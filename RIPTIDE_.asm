; ---------------------------------------------------------------------------

SREGS		struc ;	(sizeof=0x8, align=0x2,	copyof_1) ; XREF: _int86/r
					; @vga_display@get_palette$qv/r
_es		dw ?			; XREF:	vga_display::get_palette(void)+18/w
_cs		dw ?
_ss		dw ?
_ds		dw ?
SREGS		ends

; ---------------------------------------------------------------------------

WORDREGS	struc ;	(sizeof=0x10, align=0x2, copyof_3)
_ax		dw ?
_bx		dw ?
_cx		dw ?
_dx		dw ?
_si		dw ?
_di		dw ?
cflag		dw ?
flags		dw ?
WORDREGS	ends

; ---------------------------------------------------------------------------

BYTEREGS	struc ;	(sizeof=0x8, copyof_4)
_al		db ?
_ah		db ?
_bl		db ?
_bh		db ?
_cl		db ?
_ch		db ?
_dl		db ?
_dh		db ?
BYTEREGS	ends

; ---------------------------------------------------------------------------

REGPACK		struc ;	(sizeof=0x14, align=0x2, copyof_5) ; XREF: @ms_mouse@$bctr$qv/r
					; @vga_display@$bctr$quc/r
r_ax		dw ?			; XREF:	ms_mouse::ms_mouse(void)+BC/w
					; vga_display::vga_display(uchar)+6C/w
r_bx		dw ?			; XREF:	vga_display::vga_display(uchar)+71/w
r_cx		dw ?			; XREF:	ms_mouse::ms_mouse(void)+C1/w
r_dx		dw ?			; XREF:	ms_mouse::ms_mouse(void)+C6/w
r_bp		dw ?			; XREF:	vga_display::vga_display(uchar)+8B/r
r_si		dw ?
r_di		dw ?
r_ds		dw ?
r_es		dw ?			; XREF:	ms_mouse::ms_mouse(void)+CB/w
					; vga_display::vga_display(uchar)+85/r
r_flags		dw ?
REGPACK		ends

; ---------------------------------------------------------------------------

ffblk		struc ;	(sizeof=0x2C, align=0x2, copyof_6)
					; XREF:	@file_box@$bctr$qnuc/r
ff_reserved	db 21 dup(?)
ff_attrib	db ?
ff_ftime	dw ?
ff_fdate	dw ?
ff_fsize	dd ?
ff_name		db 13 dup(?)		; XREF:	file_box::file_box(uchar *)+FC/o
		db ? ; undefined
ffblk		ends

; ---------------------------------------------------------------------------

FILE		struc ;	(sizeof=0x14, align=0x2, copyof_7) ; XREF: seg2608:stru_2B114/r
					; seg2608:stru_2B128/r ...
level		dw ?
flags		dw ?			; XREF:	__setupio+8C/w __setupio+96/r
fd		db ?			; XREF:	__setupio+7D/r
hold		db ?
bsize		dw ?
buffer		dd ?			; offset
curp		dd ?			; offset
istemp		dw ?
token		dw ?
FILE		ends


; Input	MD5   :	129CE0B2734080924940A7C2A788E0B0
; Input	CRC32 :	3513474F

; File Name   :	C:\games\Reptide\RIPTIDE.EXE
; Format      :	MS-DOS executable (EXE)
; Base Address:	1000h Range: 10000h-3B640h Loaded length: 2B640h
; Entry	Point :	1000:0
; OS type	  :  MS	DOS
; Application type:  Executable	16bit

		.686p
		.mmx
		.model large

; ===========================================================================

; Segment type:	Pure code
seg0000		segment	byte public 'CODE' use16
		assume cs:seg0000
		assume es:nothing, ss:nothing, ds:nothing, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function noreturn

		public start
start		proc far		; DATA XREF: seg2608:off_2B3EEo
		mov	dx, seg	seg2608
		mov	cs:dgroup@, dx
		mov	ah, 30h
		int	21h		; DOS -	GET DOS	VERSION
					; Return: AL = major version number (00h for DOS 1.x)
		mov	bp, ds:2
		mov	bx, ds:2Ch
		mov	ds, dx
		assume ds:seg2608
		mov	word ptr __version, ax
		mov	__psp, es
		mov	__envseg, bx
		mov	word ptr __heaptop+2, bp
		call	sub_235D
		assume es:nothing
		mov	ax, __envseg

loc_220B::				; CODE XREF: _int86+27p
		mov	es, ax
		assume es:nothing
		xor	ax, ax
		mov	bx, ax
		mov	di, ax
		mov	cx, 7FFFh
		cld

loc_2217::				; CODE XREF: start+3Fj
		repne scasb
		jcxz	loc_225E
		inc	bx
		cmp	es:[di], al
		jnz	loc_2217
		or	ch, 80h
		neg	cx
		mov	__envlng, cx
		mov	cx, 2
		shl	bx, cl
		add	bx, 10h
		and	bx, 0FFF0h
		mov	__envsize, bx
		mov	dx, ss
		sub	bp, dx
		mov	di, seg	seg2608
		mov	es, di
		assume es:seg2608
		mov	di, es:__stklen
		cmp	di, 200h
		jnb	loc_2255
		mov	di, 200h
		mov	es:__stklen, di

loc_2255::				; CODE XREF: start+6Bj
		mov	cl, 4
		shr	di, cl
		inc	di
		cmp	bp, di
		jnb	loc_2261

loc_225E::				; CODE XREF: start+39j
		jmp	_abort
; ---------------------------------------------------------------------------

loc_2261::				; CODE XREF: start+7Cj
		mov	bx, di
		add	bx, dx
		mov	word ptr __heapbase+2, bx
		mov	word ptr __brklvl+2, bx
		mov	ax, __psp
		sub	bx, ax
		mov	es, ax
		assume es:nothing
		mov	ah, 4Ah	; 'J'
		push	di
		int	21h		; DOS -	2+ - ADJUST MEMORY BLOCK SIZE (SETBLOCK)
					; ES = segment address of block	to change
					; BX = new size	in paragraphs
		pop	di
		shl	di, cl
		cli
		mov	ss, dx
		assume ss:nothing
		mov	sp, di
		sti
		mov	ax, seg	seg2608
		mov	es, ax
		assume es:seg2608
		mov	es:__stklen, di
		xor	ax, ax
		mov	es, cs:dgroup@
		mov	di, offset _the_cast
		mov	cx, offset unk_2D704
		sub	cx, di
		cld
		rep stosb
		cmp	word ptr ds:3030h, 14h
		jbe	loc_22EC
		cmp	__version, 3
		jb	loc_22EC
		ja	loc_22B5
		cmp	__osminor, 1Eh
		jb	loc_22EC

loc_22B5::				; CODE XREF: start+CCj
		mov	ax, 5801h
		mov	bx, 2
		int	21h		; DOS -	3+ - GET/SET MEMORY ALLOCATION STRATEGY
					; AL = function	code: set allocation strategy
		jb	loc_22E9
		mov	ah, 67h	; 'g'
		mov	bx, __nfile
		int	21h		; DOS -	3.3+ - SET HANDLE COUNT
					; BX = desired number of handles (max 255)
		jb	loc_22E9
		mov	ah, 48h	; 'H'
		mov	bx, 1
		int	21h		; DOS -	2+ - ALLOCATE MEMORY
					; BX = number of 16-byte paragraphs desired
		jb	loc_22E9
		inc	ax
		mov	word ptr __heaptop+2, ax
		dec	ax
		mov	es, ax
		assume es:nothing
		mov	ah, 49h
		int	21h		; DOS -	2+ - FREE MEMORY
					; ES = segment address of area to be freed
		jb	loc_22E9
		mov	ax, 5801h
		mov	bx, 0
		int	21h		; DOS -	3+ - GET/SET MEMORY ALLOCATION STRATEGY
					; AL = function	code: set allocation strategy
		jnb	loc_22EC

loc_22E9::				; CODE XREF: start+DDj	start+E7j ...
		jmp	_abort
; ---------------------------------------------------------------------------
		assume es:seg2608

loc_22EC::				; CODE XREF: start+C3j	start+CAj ...
		mov	ah, 0
		int	1Ah		; CLOCK	- GET TIME OF DAY
					; Return: CX:DX	= clock	count
					; AL = 00h if clock was	read or	written	(via AH=0,1) since the previous
					; midnight
					; Otherwise, AL	> 0
		mov	word ptr __starttime, dx
		mov	word ptr __starttime+2,	cx
		or	al, al
		jz	loc_2308
		mov	ax, 40h	; '@'
		mov	es, ax
		assume es:nothing
		mov	bx, 70h	; 'p'
		mov	byte ptr es:[bx], 1
		assume es:seg2608

loc_2308::				; CODE XREF: start+11Aj
		xor	bp, bp
		mov	es, cs:dgroup@
		mov	si, offset byte_2B6DC
		mov	di, offset unk_2B6FA
		call	sub_23CD
		push	word ptr __c0environ+2
		push	word ptr __c0environ ; envp
		push	word ptr __c0argv+2
		push	word ptr __c0argv ; argv
		push	__c0argc	; argc
		call	far ptr	_main
; ---------------------------------------------------------------------------
		push	ax		; status
		nop
		push	cs
		call	near ptr _exit
; ---------------------------------------------------------------------------

__cleanup::				; CODE XREF: sub_2D4E+26p
		mov	es, cs:dgroup@
		assume es:nothing
		push	si
		push	di
		mov	si, offset unk_2B6FA
		mov	di, offset _the_cast
		call	sub_2411
		pop	di
		pop	si
		retf
start		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

__checknull	proc far		; CODE XREF: sub_2D4E+34p
		retf
__checknull	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function noreturn	bp-based frame

__terminate	proc near		; CODE XREF: sub_2D4E+4Ep

arg_2		= byte ptr  4

		mov	bp, sp
		mov	ah, 4Ch	; 'L'
		mov	al, [bp+arg_2]
		int	21h		; DOS -	2+ - QUIT WITH EXIT CODE (EXIT)
__terminate	endp			; AL = exit code


; =============== S U B	R O U T	I N E =======================================

; Attributes: noreturn

sub_2354	proc near		; DATA XREF: sub_235D+3Co
		mov	cx, 0Eh
		mov	dx, 2Fh	; '/'
		jmp	loc_2460
sub_2354	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================


sub_235D	proc near		; CODE XREF: start+25p
		push	ds
		mov	ax, 3500h
		int	21h		; DOS -	2+ - GET INTERRUPT VECTOR
					; AL = interrupt number
					; Return: ES:BX	= value	of interrupt vector
		assume es:nothing
		mov	word ptr __int0vector, bx
		mov	word ptr __int0vector+2, es
		mov	ax, 3504h
		int	21h		; DOS -	2+ - GET INTERRUPT VECTOR
					; AL = interrupt number
					; Return: ES:BX	= value	of interrupt vector
		assume es:nothing
		mov	word ptr __int4vector, bx
		mov	word ptr __int4vector+2, es
		mov	ax, 3505h
		int	21h		; DOS -	2+ - GET INTERRUPT VECTOR
					; AL = interrupt number
					; Return: ES:BX	= value	of interrupt vector
		assume es:nothing
		mov	word ptr __int5vector, bx
		mov	word ptr __int5vector+2, es
		mov	ax, 3506h
		int	21h		; DOS -	2+ - GET INTERRUPT VECTOR
					; AL = interrupt number
					; Return: ES:BX	= value	of interrupt vector
		mov	word ptr __int6vector, bx
		mov	word ptr __int6vector+2, es
		mov	ax, 2500h
		mov	dx, cs
		mov	ds, dx
		assume ds:seg0000
		mov	dx, offset sub_2354
		int	21h		; DOS -	SET INTERRUPT VECTOR
					; AL = interrupt number
					; DS:DX	= new vector to	be used	for specified interrupt
		pop	ds
		assume ds:seg2608
		retn
sub_235D	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

__restorezero	proc far		; CODE XREF: sub_2D4E+2Fp
		push	ds
		mov	ax, 2500h
		lds	dx, __int0vector
		int	21h		; DOS -	SET INTERRUPT VECTOR
					; AL = interrupt number
					; DS:DX	= new vector to	be used	for specified interrupt
		pop	ds
		push	ds
		mov	ax, 2504h
		lds	dx, __int4vector
		int	21h		; DOS -	SET INTERRUPT VECTOR
					; AL = interrupt number
					; DS:DX	= new vector to	be used	for specified interrupt
		pop	ds
		push	ds
		mov	ax, 2505h
		lds	dx, __int5vector
		int	21h		; DOS -	SET INTERRUPT VECTOR
					; AL = interrupt number
					; DS:DX	= new vector to	be used	for specified interrupt
		pop	ds
		push	ds
		mov	ax, 2506h
		lds	dx, __int6vector
		int	21h		; DOS -	SET INTERRUPT VECTOR
					; AL = interrupt number
					; DS:DX	= new vector to	be used	for specified interrupt
		pop	ds
		retf
__restorezero	endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================


sub_23CD	proc near		; CODE XREF: start+135p sub_23CD+3Aj ...
		mov	ax, 100h
		mov	dx, di
		mov	bx, si

loc_23D4::				; CODE XREF: sub_23CD+22j
		cmp	bx, di
		jz	loc_23F1
		cmp	byte ptr es:[bx], 0FFh
		jz	loc_23EC
		mov	cl, es:[bx+1]
		xor	ch, ch
		cmp	cx, ax
		jnb	loc_23EC
		mov	ax, cx
		mov	dx, bx

loc_23EC::				; CODE XREF: sub_23CD+Fj sub_23CD+19j
		add	bx, 6
		jmp	loc_23D4
; ---------------------------------------------------------------------------

loc_23F1::				; CODE XREF: sub_23CD+9j
		cmp	dx, di
		jz	locret_2410
		mov	bx, dx
		cmp	byte ptr es:[bx], 0
		mov	byte ptr es:[bx], 0FFh
		push	es
		jz	loc_2409
		call	dword ptr es:[bx+2]
		pop	es
		jmp	sub_23CD
; ---------------------------------------------------------------------------

loc_2409::				; CODE XREF: sub_23CD+33j
		call	word ptr es:[bx+2]
		pop	es
		jmp	sub_23CD
; ---------------------------------------------------------------------------

locret_2410::				; CODE XREF: sub_23CD+26j
		retn
sub_23CD	endp


; =============== S U B	R O U T	I N E =======================================


sub_2411	proc near		; CODE XREF: start+164p sub_2411+37j ...
		mov	ah, 0
		mov	dx, di
		mov	bx, si

loc_2417::				; CODE XREF: sub_2411+1Fj
		cmp	bx, di
		jz	loc_2432
		cmp	byte ptr es:[bx], 0FFh
		jz	loc_242D
		cmp	es:[bx+1], ah
		jb	loc_242D
		mov	ah, es:[bx+1]
		mov	dx, bx

loc_242D::				; CODE XREF: sub_2411+Ej sub_2411+14j
		add	bx, 6
		jmp	loc_2417
; ---------------------------------------------------------------------------

loc_2432::				; CODE XREF: sub_2411+8j
		cmp	dx, di
		jz	locret_2451
		mov	bx, dx
		cmp	byte ptr es:[bx], 0
		mov	byte ptr es:[bx], 0FFh
		push	es
		jz	loc_244A
		call	dword ptr es:[bx+2]
		pop	es
		assume es:nothing
		jmp	sub_2411
; ---------------------------------------------------------------------------

loc_244A::				; CODE XREF: sub_2411+30j
		call	word ptr es:[bx+2]
		pop	es
		jmp	sub_2411
; ---------------------------------------------------------------------------

locret_2451::				; CODE XREF: sub_2411+23j
		retn
sub_2411	endp


; =============== S U B	R O U T	I N E =======================================


sub_2452	proc near		; CODE XREF: _abort+Bp
		mov	ah, 40h	; '@'
		mov	bx, 2
		int	21h		; DOS -	2+ - WRITE TO FILE WITH	HANDLE
					; BX = file handle, CX = number	of bytes to write, DS:DX -> buffer
		retn
sub_2452	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function noreturn

; void abort(void)
_abort		proc near		; CODE XREF: start:loc_225Ej
					; start:loc_22E9j ...
		mov	cx, 1Eh
		mov	dx, (offset aDivideErrorAbn+0Eh) ; "Abnormal program termination\r\n"

loc_2460::				; CODE XREF: sub_2354+6j
		mov	ds, cs:dgroup@
		call	sub_2452
		mov	ax, 3
		push	ax		; status
		nop
		push	cs
		call	near ptr __exit
_abort		endp

; ---------------------------------------------------------------------------
dgroup@		dw 0			; DATA XREF: start+3w start+AEr ...
__mmodel	dw 0C004h
		db    0
word_2476	dw 0			; DATA XREF: sub_24D9+2Bo
					; seg0000:04C6o
		dw 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		dw 0
		dw 0
		dw 0
		dw 0
dword_24AA	dd 7F800000h		; DATA XREF: sub_24D9+AEr sub_24D9+B5r

; =============== S U B	R O U T	I N E =======================================


sub_24AE	proc far		; DATA XREF: sub_2624+32o
		push	ax
		xor	al, al
		out	0F0h, al	; AT 80287 latch clear.
					; 'Busy' gets latched upon an unmasked 287 error.
		mov	al, 20h	; ' '
		out	0A0h, al	; PIC 2	 same as 0020 for PIC 1
		out	20h, al		; Interrupt controller,	8259A.
		pop	ax
		int	2		; - external hardware -	NMI (NON-MASKABLE INTERRUPT)
					; Generated by NMI signal in hardware.
		iret
sub_24AE	endp

; ---------------------------------------------------------------------------

loc_24BD::				; DATA XREF: sub_2624+15o
		push	ax
		mov	ax, seg	seg2b53
		call	e087_trap
		jb	loc_24CE
		pop	ax
; ---------------------------------------------------------------------------
		db 0EAh
word_24CA	dw 0			; DATA XREF: sub_24D9+52w
word_24CC	dw 0			; DATA XREF: sub_24D9+56w
; ---------------------------------------------------------------------------

loc_24CE::				; CODE XREF: seg0000:02E6j
		xchg	ax, bx
		mov	ax, seg	seg2608
		mov	ds, ax
		call	__fperror
		pop	ax
		iret
		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: noreturn

sub_24D9	proc near		; DATA XREF: seg2608:347Eo
		push	ds
		push	si
		push	di
		mov	ax, 44h	; 'D'
		mov	ss:0Eh,	ax
		add	ax, 0C0h ; 'À'
		mov	ss:10h,	ax
		mov	ax, __ldt
		mov	ss:0Ah,	ax
		mov	al, __protected
		mov	ss:7, al
		mov	cx, cs
		xor	cl, al
		mov	ds, cx
		assume ds:seg0000
		mov	ax, 3534h
		mov	cx, 0Bh
		mov	di, offset word_2476

loc_2507::				; CODE XREF: sub_24D9+39j
		int	21h		; DOS -	2+ - GET INTERRUPT VECTOR
					; AL = interrupt number
					; Return: ES:BX	= value	of interrupt vector
		assume es:nothing
		mov	[di], bx
		mov	word ptr [di+2], es
		add	di, 4
		inc	ax
		loop	loc_2507
		mov	ax, 3575h
		int	21h		; DOS -	2+ - GET INTERRUPT VECTOR
					; AL = interrupt number
					; Return: ES:BX	= value	of interrupt vector
		assume es:nothing
		mov	[di], bx
		mov	word ptr [di+2], es
		add	di, 4
		mov	ax, 3502h
		int	21h		; DOS -	2+ - GET INTERRUPT VECTOR
					; AL = interrupt number
					; Return: ES:BX	= value	of interrupt vector
		assume es:nothing
		mov	[di], bx
		mov	word ptr [di+2], es
		mov	word_24CA, bx
		mov	word_24CC, es
		mov	ax, seg	seg2608
		mov	ds, ax
		assume ds:seg2608
		mov	bx, 0FFFFh
		mov	es, __psp
		assume es:nothing
		mov	es, word ptr es:2Ch
		assume es:nothing
		sub	di, di
		mov	cx, 7FFFh
		mov	al, 0
		cld

loc_254C::				; CODE XREF: sub_24D9+81j sub_24D9+8Aj
		repne scasb
		jcxz	loc_256F
		cmp	al, es:[di]
		jz	loc_256F
		cmp	word ptr es:[di], '78'
		jnz	loc_254C
		mov	dx, es:[di+2]
		cmp	dl, '='
		jnz	loc_254C
		inc	bx
		and	dh, 0DFh
		cmp	dh, 'Y'
		jnz	loc_256F
		inc	bx

loc_256F::				; CODE XREF: sub_24D9+75j sub_24D9+7Aj ...
		pop	di
		pop	si
		or	bx, bx
		jz	loc_25D9
		push	sp
		pop	cx
		cmp	cx, sp
		jnz	loc_259F
		or	bx, bx
		jg	loc_2585
		int	11h		; EQUIPMENT DETERMINATION
					; Return: AX = equipment flag bits
		and	al, 2
		jz	loc_25D7

loc_2585::				; CODE XREF: sub_24D9+A4j
		fninit
		fld	cs:dword_24AA
		fchs
		fcomp	cs:dword_24AA
		fstsw	ax
		sahf
		mov	al, 2
		jz	short loc_25D7
		inc	al
		jmp	short loc_25D7
; ---------------------------------------------------------------------------

loc_259F::				; CODE XREF: sub_24D9+A0j
		fninit
		mov	__8087,	0
		fnstcw	__8087
		mov	cx, 14h

loc_25AE::				; CODE XREF: sub_24D9:loc_25AEj
		loop	loc_25AE
		mov	cx, __8087
		and	cx, 0F3Fh
		cmp	cx, 33Fh
		jnz	short loc_25D7
		mov	__8087,	0FFFFh
		fnstsw	__8087
		mov	cx, 14h

loc_25CB::				; CODE XREF: sub_24D9:loc_25CBj
		loop	loc_25CB
		test	__8087,	0B8BFh
		jnz	short loc_25D7
		inc	al

loc_25D7::				; CODE XREF: sub_24D9+AAj sub_24D9+C0j ...
		cbw
		xchg	ax, bx

loc_25D9::				; CODE XREF: sub_24D9+9Aj
		mov	__8087,	bx
		mov	ss:6, bl
		pop	ds

___fpreset:
		push	ds
		push	bp
		mov	bp, sp
		sub	sp, 8
		mov	bx, seg	seg2608
		mov	ds, bx
		cmp	__8087,	0
		mov	word ptr [bp-8], offset	e087_entry
		mov	word ptr [bp-6], seg seg25ab
		mov	word ptr [bp-4], offset	e087_shortcut
		mov	word ptr [bp-2], seg seg25ab
		jnz	loc_261E
		mov	word ptr [bp-8], offset	e086_entry
		mov	word ptr [bp-6], seg seg2333
		mov	word ptr [bp-4], offset	e086_shortcut
		mov	word ptr [bp-2], seg seg2333

loc_261E::				; CODE XREF: sub_24D9+12Fj
		mov	ax, 2534h
		mov	cx, 0Ah
sub_24D9	endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================

; Attributes: noreturn

sub_2624	proc near		; CODE XREF: _clrscr+16p
		lds	dx, [bp-8]
		assume ds:seg25ab

loc_2627::				; CODE XREF: sub_2624+6j
		int	21h		; DOS -	SET INTERRUPT VECTOR
					; AL = interrupt number
					; DS:DX	= new vector to	be used	for specified interrupt
		inc	ax
		loop	loc_2627
		mov	ax, 253Eh
		lds	dx, [bp-4]
		int	21h		; DOS -	SET INTERRUPT VECTOR
					; AL = interrupt number
					; DS:DX	= new vector to	be used	for specified interrupt
		mov	ax, 2502h
		push	cs
		pop	ds
		assume ds:seg0000
		mov	dx, offset loc_24BD
		int	21h		; DOS -	SET INTERRUPT VECTOR
					; AL = interrupt number
					; DS:DX	= new vector to	be used	for specified interrupt
		mov	ds, bx
		assume ds:seg2608
		cmp	__8087,	0
		jz	loc_265B
		mov	ax, word ptr __version
		xchg	ah, al
		cmp	ax, 1403h
		jnz	loc_265B
		mov	ax, 2575h
		push	cs
		pop	ds
		assume ds:seg0000
		mov	dx, offset sub_24AE
		int	21h		; DOS -	SET INTERRUPT VECTOR
					; AL = interrupt number
					; DS:DX	= new vector to	be used	for specified interrupt
		assume ds:seg2608

loc_265B::				; CODE XREF: sub_2624+21j sub_2624+2Bj
		fninit			; (emulator call)
		mov	word ptr ss:20h, 0
		mov	word ptr ss:22h, 0
		mov	ds, bx
		mov	ax, __default87
		mov	[bp-8],	ax
		cmp	__8087,	3
		jl	loc_267F
		or	word ptr [bp-8], 2

loc_267F::				; CODE XREF: sub_2624+55j
		fldcw	word ptr [bp-8]	; (emulator call)
		mov	ax, [bp-8]
		and	ss:2, ax
		xor	ax, ax
		cwd
		mov	sp, bp
		pop	bp
		pop	ds
		retn
sub_2624	endp

; ---------------------------------------------------------------------------
		push	ds
		mov	ax, seg	seg2608
		mov	ds, ax
		cmp	__8087,	0
		jl	loc_26C8
		fninit			; (emulator call)
		mov	ax, 2534h
		mov	bx, offset word_2476
		mov	cx, 0Bh

loc_26AC::				; CODE XREF: seg0000:04D5j
		lds	dx, cs:[bx]
		int	21h		; DOS -	SET INTERRUPT VECTOR
					; AL = interrupt number
					; DS:DX	= new vector to	be used	for specified interrupt
		add	bx, 4
		inc	ax
		loop	loc_26AC
		mov	ax, 2575h
		lds	dx, cs:[bx]
		int	21h		; DOS -	SET INTERRUPT VECTOR
					; AL = interrupt number
					; DS:DX	= new vector to	be used	for specified interrupt
		mov	ax, 2502h
		lds	dx, cs:[bx+4]
		int	21h		; DOS -	SET INTERRUPT VECTOR
					; AL = interrupt number
					; DS:DX	= new vector to	be used	for specified interrupt

loc_26C8::				; CODE XREF: seg0000:04BEj
		pop	ds
		retn

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

__fpuint	proc far		; CODE XREF: sub_27C24:loc_27C61P
		mov	ax, 2
		retf
__fpuint	endp


; =============== S U B	R O U T	I N E =======================================

; TCC/TCC++/BCC++ 16 bit DOS
; Attributes: library function bp-based	frame

unknown_libname_1 proc near		; CODE XREF: sub_26F1+10Fp
					; sub_26F1+148p
		push	bp
		mov	bp, sp
		mov	al, 5Fh	; '_'
		and	al, dl
		cmp	al, 47h	; 'G'
		jnz	loc_26E7

loc_26D9::				; CODE XREF: unknown_libname_1+15j
		cmp	byte ptr es:[bx-1], '0'
		jnz	loc_26E7
		dec	bx
		cmp	bx, cx
		ja	loc_26D9
		jmp	loc_26EF
; ---------------------------------------------------------------------------

loc_26E7::				; CODE XREF: unknown_libname_1+9j
					; unknown_libname_1+10j
		cmp	byte ptr es:[bx-1], '.'
		jnz	loc_26EF
		dec	bx

loc_26EF::				; CODE XREF: unknown_libname_1+17j
					; unknown_libname_1+1Ej
		pop	bp
		retn
unknown_libname_1 endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

sub_26F1	proc near		; CODE XREF: __realcvtj
					; DATA XREF: seg2608:__realcvtvectoro

var_30		= byte ptr -30h
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  4
arg_2		= byte ptr  6
arg_4		= byte ptr  8
arg_6		= dword	ptr  0Ah
arg_A		= word ptr  0Eh
arg_C		= word ptr  10h
arg_E		= word ptr  12h

		push	bp
		mov	bp, sp
		sub	sp, 30h
		push	si
		push	di
		push	es
		mov	ax, [bp+arg_A]
		cmp	ax, 28h	; '('
		jbe	loc_2708
		mov	ax, 28h	; '('
		mov	[bp+arg_A], ax

loc_2708::				; CODE XREF: sub_26F1+Fj
		mov	[bp+var_4], ax
		mov	dl, [bp+arg_4]
		and	dl, 0DFh
		cmp	dl, 46h	; 'F'
		jnz	loc_2721
		neg	ax
		jle	loc_272A
		sub	ax, ax
		mov	[bp+arg_A], ax
		jmp	loc_272A
; ---------------------------------------------------------------------------

loc_2721::				; CODE XREF: sub_26F1+23j
		or	ax, ax
		jg	loc_272A
		mov	ax, 1
		jmp	loc_2733
; ---------------------------------------------------------------------------

loc_272A::				; CODE XREF: sub_26F1+27j sub_26F1+2Ej ...
		cmp	dl, 45h	; 'E'
		jnz	loc_2733
		inc	ax
		inc	[bp+arg_A]

loc_2733::				; CODE XREF: sub_26F1+37j sub_26F1+3Cj
		push	[bp+arg_E]
		push	[bp+arg_C]
		push	ax
		push	ss
		lea	bx, [bp+var_2]
		push	bx
		push	ss
		lea	si, [bp+var_30]
		push	si
		mov	ax, [bp+arg_0]
		push	ax
		call	__xcvt
		xchg	ax, bx
		les	di, [bp+arg_6]
		assume es:nothing
		cld
		cmp	bx, 7FFFh
		jz	loc_275E
		cmp	bx, 7FFEh
		jz	loc_2771
		jmp	loc_2783
; ---------------------------------------------------------------------------

loc_275E::				; CODE XREF: sub_26F1+63j
		mov	ax, 'I+'
		cmp	[bp+var_2], 0
		jz	loc_2769
		inc	ax
		inc	ax

loc_2769::				; CODE XREF: sub_26F1+74j
		stosw
		mov	ax, 'FN'
		stosw
		jmp	loc_287A
; ---------------------------------------------------------------------------

loc_2771::				; CODE XREF: sub_26F1+69j
		mov	ax, 'N+'
		cmp	[bp+var_2], 0
		jz	loc_277C
		inc	ax
		inc	ax

loc_277C::				; CODE XREF: sub_26F1+87j
		stosw
		mov	al, 'A'
		stosw
		jmp	loc_287A
; ---------------------------------------------------------------------------

loc_2783::				; CODE XREF: sub_26F1+6Bj
		cmp	byte ptr [bp+var_2], 0
		jz	loc_278C
		mov	al, '-'
		stosb

loc_278C::				; CODE XREF: sub_26F1+96j
		mov	dl, [bp+arg_4]
		and	dl, 5Fh

loc_2792::				; CODE XREF: sub_23CD:loc_2409p
		cmp	dl, 46h	; 'F'
		jz	loc_27AD
		cmp	dl, 45h	; 'E'
		jz	loc_280F
		cmp	bx, 0FFFDh
		jl	loc_280F
		mov	ax, [bp+arg_A]
		or	ax, ax
		jnz	loc_27A9
		inc	ax

loc_27A9::				; CODE XREF: sub_26F1+B5j
		cmp	bx, ax
		jg	loc_280F

loc_27AD::				; CODE XREF: sub_26F1+A4j
		cmp	bx, 40
		jg	loc_280F
		or	bx, bx
		jg	loc_27C5
		mov	ax, '.0'
		stosw
		mov	cx, 1
		jz	loc_27C8
		mov	al, '0'

loc_27C1::				; CODE XREF: sub_26F1+D2j
		stosb
		inc	bx
		jnz	loc_27C1

loc_27C5::				; CODE XREF: sub_26F1+C3j
		mov	cx, 0

loc_27C8::				; CODE XREF: sub_26F1+CCj sub_26F1+DFj ...
		lods	byte ptr ss:[si]
		or	al, al
		jz	loc_27D8
		stosb
		dec	bx
		jnz	loc_27C8
		mov	al, '.'
		stosb
		inc	cx
		jmp	loc_27C8
; ---------------------------------------------------------------------------

loc_27D8::				; CODE XREF: sub_26F1+DBj
		mov	ax, [bp+arg_A]
		add	cx, [bp+var_4]
		cmp	ax, cx
		jbe	loc_27EF
		sub	ax, cx
		mov	cx, ax
		add	bx, ax
		mov	al, '0'
		rep stosb
		dec	bx
		jz	loc_2805

loc_27EF::				; CODE XREF: sub_26F1+EFj
		dec	bx
		jz	loc_2805
		cmp	[bp+arg_2], 0
		jnz	loc_2805
		mov	dl, [bp+arg_4]
		mov	cx, word ptr [bp+arg_6]
		xchg	bx, di
		call	unknown_libname_1 ; TCC/TCC++/BCC++ 16 bit DOS
		xchg	di, bx

loc_2805::				; CODE XREF: sub_26F1+FCj sub_26F1+FFj ...
		cmp	di, word ptr [bp+arg_6]
		jnz	loc_280D
		mov	al, '0'
		stosb

loc_280D::				; CODE XREF: sub_26F1+117j
		jmp	loc_287A
; ---------------------------------------------------------------------------

loc_280F::				; CODE XREF: sub_26F1+A9j sub_26F1+AEj ...
		lods	word ptr ss:[si]
		stosb
		mov	al, '.'
		or	ah, ah
		jnz	loc_2821
		cmp	[bp+arg_2], 0
		jz	loc_283E
		stosb
		jmp	loc_283E
; ---------------------------------------------------------------------------

loc_2821::				; CODE XREF: sub_26F1+125j
		stosb
		mov	al, ah

loc_2824::				; CODE XREF: sub_26F1+138j
		stosb

loc_2825::				; CODE XREF: unknown_libname_3:loc_49E5p
		lods	byte ptr ss:[si]
		or	al, al
		jnz	loc_2824
		cmp	[bp+arg_2], 0
		jnz	loc_283E
		mov	dl, [bp+arg_4]
		mov	cx, word ptr [bp+arg_6]
		xchg	bx, di
		call	unknown_libname_1 ; TCC/TCC++/BCC++ 16 bit DOS
		xchg	di, bx

loc_283E::				; CODE XREF: sub_26F1+12Bj
					; sub_26F1+12Ej ...
		mov	al, ' '
		and	al, [bp+arg_4]
		or	al, 45h
		stosb
		mov	ax, '-+'
		dec	bx
		jge	loc_2850
		xchg	al, ah
		neg	bx

loc_2850::				; CODE XREF: sub_26F1+159j
		stosb
		xchg	ax, bx
		mov	cx, '00'
		cmp	ax, 99
		jbe	loc_2873
		cmp	ax, 999
		jbe	loc_2869
		cwd
		mov	bx, 1000
		div	bx
		add	al, cl
		stosb
		xchg	ax, dx

loc_2869::				; CODE XREF: sub_26F1+16Cj
		mov	bl, 100
		div	bl
		add	al, cl
		stosb
		xchg	al, ah
		cbw

loc_2873::				; CODE XREF: sub_26F1+167j
		mov	bl, 10
		div	bl
		add	ax, cx
		stosw

loc_287A::				; CODE XREF: sub_26F1+7Dj sub_26F1+8Fj ...
		xor	al, al
		stosb
		pop	es
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn	10h
sub_26F1	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_2886	proc near
		push	bp
		mov	bp, sp
		pop	bp
		retn
sub_2886	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__xcvt		proc near		; CODE XREF: sub_26F1+57p

var_10		= tbyte	ptr -10h
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  4
arg_2		= dword	ptr  6
arg_6		= dword	ptr  0Ah
arg_A		= word ptr  0Eh
arg_C		= dword	ptr  10h

		push	bp
		mov	bp, sp
		sub	sp, 10h
		push	si
		push	di
		mov	[bp+var_2], 8000h
		mov	[bp+var_4], 0Ah
		push	es
		les	di, [bp+arg_C]
		mov	ax, 7FFFh
		mov	bx, [bp+arg_0]
		mov	cx, es:[bx+di]
		and	[bp+var_2], cx
		and	es:[bx+di], ax
		shr	bx, 1
		shr	bx, 1
		shl	bx, 1
		jmp	word ptr cs:loc_28BB[bx]
; ---------------------------------------------------------------------------

loc_28BB::				; CODE XREF: sub_4120+4Ap
					; DATA XREF: __xcvt+2Br
		loope	loc_28C1+2
		out	6, ax		; DMA controller, 8237A-5.
					; channel 3 base address
					; (also	sets current address)
		in	ax, dx
		push	es

loc_28C1::				; CODE XREF: __xcvt+2Bj
					; __xcvt:loc_28BBj
		fld	dword ptr es:[di] ; (emulator call)
		jmp	loc_28DE
; ---------------------------------------------------------------------------

loc_28C7::				; CODE XREF: __xcvt+2Bj
		fld	qword ptr es:[di] ; (emulator call)
		jmp	loc_28DE
; ---------------------------------------------------------------------------

loc_28CD::				; CODE XREF: __xcvt+2Bj
		and	ax, es:[di+8]
		cmp	ax, 7FFFh
		jz	loc_28DA
		and	byte ptr es:[di], 0F0h

loc_28DA::				; CODE XREF: __xcvt+49j
		fld	tbyte ptr es:[di] ; (emulator call)

loc_28DE::				; CODE XREF: __xcvt+3Aj __xcvt+40j
		xor	bx, bx
		shl	cx, 1
		rcl	bx, 1
		les	di, [bp+arg_6]
		mov	es:[di], bx
		fxam			; (emulator call)
		fnstsw	[bp+var_6]	; (emulator call)
		wait			; (emulator call)
		mov	ax, [bp+var_6]
		and	ah, 47h
		cmp	ah, 40h	; '@'
		jz	short loc_2914
		cmp	ah, 5
		jz	short loc_290F
		cmp	ah, 1
		jz	short loc_290A
		jmp	short loc_293A
; ---------------------------------------------------------------------------

loc_290A::				; CODE XREF: __xcvt+7Bj
		mov	dx, 7FFEh
		jmp	short loc_2934
; ---------------------------------------------------------------------------

loc_290F::				; CODE XREF: __xcvt+76j
		mov	dx, 7FFFh
		jmp	short loc_2934
; ---------------------------------------------------------------------------

loc_2914::				; CODE XREF: __xcvt+71j __xcvt+E2j ...
		mov	dx, 1
		mov	al, 30h	; '0'
		mov	cx, [bp+arg_A]
		or	cx, cx
		jg	short loc_2923
		neg	cx
		inc	cx

loc_2923::				; CODE XREF: __xcvt+93j
		cmp	cx, 28h	; '('
		jbe	short loc_292B
		mov	cx, 28h	; '('

loc_292B::				; CODE XREF: __xcvt+9Bj
		cld
		les	di, [bp+arg_2]
		rep stosb
		xor	al, al
		stosb

loc_2934::				; CODE XREF: __xcvt+82j __xcvt+87j
		fstp	st		; (emulator call)
		jmp	loc_2A7F
; ---------------------------------------------------------------------------

loc_293A::				; CODE XREF: __xcvt+7Dj
		fld	st		; (emulator call)
		fstp	[bp+var_10]	; (emulator call)
		wait			; (emulator call)
		mov	ax, word ptr [bp+var_10+8]
		sub	ax, 16383
		mov	dx, 19728
		imul	dx
		xchg	ax, bx
		mov	ah, 4Dh	; 'M'
		mov	al, byte ptr [bp+var_10+7]
		shl	al, 1
		mul	ah
		add	ax, bx
		adc	dx, 0
		neg	ax
		adc	dx, 0
		mov	ax, [bp+arg_A]
		or	ax, ax
		jg	loc_296F
		neg	ax
		add	ax, dx
		jl	loc_2914

loc_296F::				; CODE XREF: __xcvt+DCj
		cmp	ax, 12h
		jle	loc_2977
		mov	ax, 12h

loc_2977::				; CODE XREF: __xcvt+E7j
		mov	bx, ax
		sub	ax, dx

loc_297B::				; CODE XREF: __xcvt+110j __xcvt+118j
		jz	loc_29A5
		mov	si, ax
		jge	loc_2983
		neg	ax

loc_2983::				; CODE XREF: __xcvt+F4j
		cmp	ax, 1344h
		jle	loc_298B
		mov	ax, 1344h

loc_298B::				; CODE XREF: __xcvt+FBj
		push	ax		; p
		nop
		push	cs
		call	near ptr _pow10
		pop	ax
		or	si, si
		jg	loc_299D
		fdivp	st(1), st	; (emulator call)
		add	ax, si
		jmp	loc_297B
; ---------------------------------------------------------------------------

loc_299D::				; CODE XREF: __xcvt+109j
		fmulp	st(1), st	; (emulator call)
		xchg	ax, si
		sub	ax, si
		jmp	loc_297B
; ---------------------------------------------------------------------------

loc_29A5::				; CODE XREF: __xcvt:loc_297Bj
		push	bx		; p
		nop
		push	cs
		call	near ptr _pow10
		pop	ax
		fcomp	st(1)		; (emulator call)
		fnstsw	[bp+var_6]	; (emulator call)
		wait			; (emulator call)
		test	byte ptr [bp+var_6+1], 45h
		jz	loc_29CF
		inc	dx
		inc	bx
		cmp	bx, 12h
		ja	loc_29C8
		cmp	[bp+arg_A], 0
		jle	loc_29F5

loc_29C8::				; CODE XREF: __xcvt+135j
		fidiv	[bp+var_4]	; (emulator call)
		dec	bx
		jmp	loc_29F5
; ---------------------------------------------------------------------------

loc_29CF::				; CODE XREF: __xcvt+12Ej
		mov	ax, bx
		dec	ax
		push	ax		; p
		nop
		push	cs
		call	near ptr _pow10
		pop	ax
		fcomp	st(1)		; (emulator call)
		fnstsw	[bp+var_6]	; (emulator call)
		wait			; (emulator call)
		test	byte ptr [bp+var_6+1], 41h
		jnz	loc_29F5
		dec	dx
		dec	bx
		cmp	[bp+arg_A], 0
		jle	loc_29F5
		fimul	[bp+var_4]	; (emulator call)
		inc	bx

loc_29F5::				; CODE XREF: __xcvt+13Bj __xcvt+142j ...
		or	bx, bx
		jl	loc_2A1E
		frndint			; (emulator call)
		fbstp	[bp+var_10]	; (emulator call)
		les	di, [bp+arg_2]
		add	di, bx
		push	di
		xor	al, al
		std
		stosb
		lea	si, [bp+var_10]
		mov	cx, 4
		wait			; (emulator call)
		or	bx, bx
		jnz	loc_2A25
		mov	ch, ss:[si]
		xor	ch, 1
		jz	loc_2A40

loc_2A1E::				; CODE XREF: __xcvt+16Cj
		fldz			; (emulator call)
		pop	di
		jmp	loc_2914
; ---------------------------------------------------------------------------

loc_2A25::				; CODE XREF: __xcvt+189j __xcvt+1B3j
		mov	al, ss:[si]
		inc	si
		mov	ah, al
		shr	ah, cl
		and	al, 0Fh
		add	ax, '00'
		stosb
		or	ch, al
		dec	bx
		jz	loc_2A40
		mov	al, ah
		stosb
		or	ch, al
		dec	bx
		jnz	loc_2A25

loc_2A40::				; CODE XREF: __xcvt+191j __xcvt+1ABj
		pop	bx
		and	ch, 0Fh
		jnz	loc_2A57
		inc	dx
		cmp	[bp+arg_A], 0
		jg	loc_2A51
		mov	byte ptr es:[bx], '0'

loc_2A51::				; CODE XREF: __xcvt+1C0j
		inc	bx
		mov	byte ptr es:[di+1], '1'

loc_2A57::				; CODE XREF: __xcvt+1B9j
		mov	cx, [bp+arg_A]
		or	cx, cx
		jg	loc_2A62
		neg	cx
		add	cx, dx

loc_2A62::				; CODE XREF: __xcvt+1D1j
		cmp	cx, 28h	; '('
		jbe	loc_2A6A
		mov	cx, 28h	; '('

loc_2A6A::				; CODE XREF: __xcvt+1DAj
		mov	byte ptr es:[bx], 0
		mov	ax, bx
		sub	ax, word ptr [bp+arg_2]
		sub	cx, ax
		jbe	loc_2A7F

loc_2A77::				; CODE XREF: __xcvt+1F2j
		mov	word ptr es:[bx], '0'
		inc	bx
		loop	loc_2A77

loc_2A7F::				; CODE XREF: __xcvt+ACj __xcvt+1EAj
		cld
		les	di, [bp+arg_C]
		mov	bx, [bp+arg_0]
		mov	cx, [bp+var_2]
		or	es:[bx+di], cx
		pop	es
		mov	ax, dx
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn	10h
__xcvt		endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__fperror	proc near		; CODE XREF: seg0000:02F4p

var_8		= dword	ptr -8
var_4		= dword	ptr -4

		push	bp
		mov	bp, sp
		sub	sp, 8
		mov	word ptr [bp+var_4+2], ss
		mov	word ptr [bp+var_4], bx
		mov	ax, word ptr ___signalptr
		or	ax, word ptr ___signalptr+2
		jz	loc_2B13
		xor	ax, ax
		xor	dx, dx
		push	ax
		push	dx
		mov	ax, 8
		push	ax
		call	___signalptr
		add	sp, 6
		mov	word ptr [bp+var_8+2], dx
		mov	word ptr [bp+var_8], ax
		push	dx
		push	ax
		mov	ax, 8
		push	ax
		call	___signalptr
		add	sp, 6
		cmp	word ptr [bp+var_8+2], 0
		jnz	loc_2ADC
		cmp	word ptr [bp+var_8], 1
		jz	loc_2B44

loc_2ADC::				; CODE XREF: __fperror+3Dj
		mov	ax, word ptr [bp+var_8]
		or	ax, word ptr [bp+var_8+2]
		jz	loc_2B13
		xor	ax, ax
		xor	dx, dx
		push	ax
		push	dx
		mov	ax, 8
		push	ax
		call	___signalptr
		add	sp, 6
		les	bx, [bp+var_4]
		mov	ax, es:[bx]
		mov	dx, 6
		imul	dx
		mov	bx, ax
		push	word ptr __protected[bx]
		mov	ax, 8
		push	ax
		call	[bp+var_8]
		pop	cx
		pop	cx
		jmp	loc_2B44
; ---------------------------------------------------------------------------
		jmp	loc_2B44
; ---------------------------------------------------------------------------

loc_2B13::				; CODE XREF: __fperror+13j
					; __fperror+4Bj
		les	bx, [bp+var_4]
		mov	ax, es:[bx]
		mov	dx, 6
		imul	dx
		mov	dx, offset __protected
		add	dx, 2
		add	ax, dx
		mov	bx, ax
		push	word ptr [bx+2]
		push	word ptr [bx]
		push	ds
		mov	ax, offset aFloatingPointE ; "Floating point error: %s.\n"
		push	ax		; format
		push	ds
		mov	ax, offset stru_2B128
		push	ax		; stream
		nop
		push	cs
		call	near ptr _fprintf
		add	sp, 0Ch
		nop
		push	cs
		call	_abort
; ---------------------------------------------------------------------------

loc_2B44::				; CODE XREF: __fperror+43j
					; __fperror+78j ...
		mov	sp, bp
		pop	bp
		retn
__fperror	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

__pow10		proc near		; CODE XREF: _pow10+6p

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		push	si
		mov	ax, [bp+arg_0]
		cmp	ax, 0ECBCh
		jge	loc_2B5A
		fldz			; (emulator call)
		jmp	loc_2C0C
; ---------------------------------------------------------------------------

loc_2B5A::				; CODE XREF: __pow10+Aj
		cmp	ax, 1344h
		jle	loc_2B67
		fld	flt_2AFEC	; (emulator call)
		jmp	loc_2C0C
; ---------------------------------------------------------------------------

loc_2B67::				; CODE XREF: __pow10+15j
		or	ax, ax
		jnz	loc_2B71
		fld1			; (emulator call)
		jmp	loc_2C0C
; ---------------------------------------------------------------------------

loc_2B71::				; CODE XREF: __pow10+21j
		or	ax, ax
		jge	loc_2B77
		neg	ax

loc_2B77::				; CODE XREF: __pow10+2Bj
		mov	si, 7
		and	si, ax
		shl	si, 1
		shl	si, 1
		fld	flt_2AF70[si]	; (emulator call)
		shr	ax, 1
		shr	ax, 1
		shr	ax, 1
		shr	ax, 1
		jnb	loc_2B94
		fmul	flt_2AF90	; (emulator call)

loc_2B94::				; CODE XREF: __pow10+45j
		jnz	loc_2B98
		jmp	loc_2C01
; ---------------------------------------------------------------------------

loc_2B98::				; CODE XREF: __pow10:loc_2B94j
		shr	ax, 1
		jnb	loc_2BA1
		fmul	dbl_2AF94	; (emulator call)

loc_2BA1::				; CODE XREF: __pow10+52j
		shr	ax, 1
		jnb	loc_2BAD
		fld	tbyte_2AF9C	; (emulator call)
		fmulp	st(1), st	; (emulator call)

loc_2BAD::				; CODE XREF: __pow10+5Bj
		shr	ax, 1
		jnb	loc_2BB9
		fld	tbyte_2AFA6	; (emulator call)
		fmulp	st(1), st	; (emulator call)

loc_2BB9::				; CODE XREF: __pow10+67j
		shr	ax, 1
		jnb	loc_2BC5
		fld	tbyte_2AFB0	; (emulator call)
		fmulp	st(1), st	; (emulator call)

loc_2BC5::				; CODE XREF: __pow10+73j
		shr	ax, 1
		jnb	loc_2BD1
		fld	tbyte_2AFBA	; (emulator call)
		fmulp	st(1), st	; (emulator call)

loc_2BD1::				; CODE XREF: __pow10+7Fj
		shr	ax, 1
		jnb	loc_2BDD
		fld	tbyte_2AFC4	; (emulator call)
		fmulp	st(1), st	; (emulator call)

loc_2BDD::				; CODE XREF: __pow10+8Bj
		shr	ax, 1
		jnb	loc_2BE9
		fld	tbyte_2AFCE	; (emulator call)
		fmulp	st(1), st	; (emulator call)

loc_2BE9::				; CODE XREF: __pow10+97j
		shr	ax, 1
		jnb	loc_2BF5
		fld	tbyte_2AFD8	; (emulator call)
		fmulp	st(1), st	; (emulator call)

loc_2BF5::				; CODE XREF: __pow10+A3j
		shr	ax, 1
		jnb	loc_2C01
		fld	tbyte_2AFE2	; (emulator call)
		fmulp	st(1), st	; (emulator call)

loc_2C01::				; CODE XREF: __pow10+4Ej __pow10+AFj
		test	byte ptr [bp+arg_0+1], 80h
		jz	loc_2C0C
		fdivr	flt_2AF70	; (emulator call)

loc_2C0C::				; CODE XREF: __pow10+Fj __pow10+1Cj ...
		pop	si
		pop	bp
		retn	2
__pow10		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; double __cdecl pow10(int p)
_pow10		proc far		; CODE XREF: __xcvt+103p __xcvt+11Dp ...

p		= word ptr  6

		push	bp
		mov	bp, sp
		push	[bp+p]
		call	__pow10
		pop	bp
		retf
_pow10		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

ftol@		proc far		; CODE XREF: show_stats(void)+110P
					; show_stats(void)+138P ...

var_A		= qword	ptr -0Ah
var_2		= word ptr -2

		push	bp
		mov	bp, sp
		sub	sp, 0Ah
		fnstcw	[bp+var_2]	; (emulator call)
		wait			; (emulator call)
		mov	al, byte ptr [bp+var_2+1]
		or	byte ptr [bp+var_2+1], 0Ch
		fldcw	[bp+var_2]	; (emulator call)
		fistp	[bp+var_A]	; (emulator call)
		mov	byte ptr [bp+var_2+1], al
		fldcw	[bp+var_2]	; (emulator call)
		mov	ax, word ptr [bp+var_A]
		mov	dx, word ptr [bp+var_A+2]
		mov	sp, bp
		pop	bp
		retf
ftol@		endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl atexit(void (*func)(void))
_atexit		proc far		; CODE XREF: _gr_start_kbd_grab+4EP

func		= dword	ptr  6

		push	bp
		mov	bp, sp
		cmp	__atexitcnt, 20h ; ' '
		jnz	loc_2C57
		mov	ax, 1
		jmp	loc_2C73
; ---------------------------------------------------------------------------

loc_2C57::				; CODE XREF: _atexit+8j
		mov	bx, __atexitcnt
		mov	cl, 2
		shl	bx, cl
		mov	ax, word ptr [bp+func+2]
		mov	dx, word ptr [bp+func]
		mov	word_2D66A[bx],	ax
		mov	__atexittbl[bx], dx
		inc	__atexitcnt
		xor	ax, ax

loc_2C73::				; CODE XREF: _atexit+Dj
		pop	bp
		retf
_atexit		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl chdir(const char *path)
_chdir		proc far		; CODE XREF: i_load_file(uchar *,uchar *)+CCP

path_		= dword	ptr  6

		push	bp
		mov	bp, sp
		push	ds
		mov	ah, 3Bh	; ';'
		lds	dx, [bp+path_]
		int	21h		; DOS -	2+ - CHANGE THE	CURRENT	DIRECTORY (CHDIR)
					; DS:DX	-> ASCIZ directory name	(may include drive)
		pop	ds
		jb	loc_2C87
		xor	ax, ax
		jmp	loc_2C8B
; ---------------------------------------------------------------------------

loc_2C87::				; CODE XREF: _chdir+Cj
		push	ax
		call	__ioerror

loc_2C8B::				; CODE XREF: _chdir+10j
		pop	bp
		retf
_chdir		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; clock_t clock(void)
_clock		proc far		; CODE XREF: init_game(void)+22DP
					; init_game(void)+2AAP	...

var_4		= word ptr -4
var_2		= word ptr -2

		push	bp
		mov	bp, sp
		sub	sp, 4
		xor	ah, ah
		int	1Ah		; CLOCK	- GET TIME OF DAY
					; Return: CX:DX	= clock	count
					; AL = 00h if clock was	read or	written	(via AH=0,1) since the previous
					; midnight
					; Otherwise, AL	> 0
		add	byte_2D6E8, al
		mov	[bp+var_4], dx
		mov	[bp+var_2], cx
		or	al, al
		jz	loc_2CB4
		mov	ax, 40h	; '@'
		mov	es, ax
		assume es:nothing
		mov	byte ptr es:70h, 1
		mov	ah, 2Ah
		int	21h		; DOS -	GET CURRENT DATE
					; Return: DL = day, DH = month,	CX = year
					; AL = day of the week (0=Sunday, 1=Monday, etc.)
		assume es:seg2608

loc_2CB4::				; CODE XREF: _clock+16j
		cmp	byte_2D6E8, 0
		jz	loc_2CC4
		add	[bp+var_4], 0B0h ; '°'
		adc	[bp+var_2], 18h

loc_2CC4::				; CODE XREF: _clock+2Cj
		mov	dx, [bp+var_2]
		mov	ax, [bp+var_4]
		sub	ax, word ptr __starttime
		sbb	dx, word ptr __starttime+2
		mov	sp, bp
		pop	bp
		retf
_clock		endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far operator delete(void far *block)
@$bdele$qnv	proc far		; CODE XREF: end_game(void)+163P
					; end_game(void):loc_7BC2P ...

block		= dword	ptr  6

		push	bp
		mov	bp, sp
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		nop
		push	cs
		call	near ptr _farfree
		pop	cx
		pop	cx
		pop	bp
		retf
@$bdele$qnv	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; unsigned int __cdecl _dos_getfileattr(const char *filename, unsigned int *attrib)
__dos_getfileattr proc far		; CODE XREF: __tmpnam+43p

filename	= dword	ptr  6
attrib		= dword	ptr  0Ah

		push	bp
		mov	bp, sp
		push	ds
		mov	ah, 43h	; 'C'
		xor	al, al
		lds	dx, [bp+filename]
		int	21h		; DOS -	2+ - GET FILE ATTRIBUTES
					; DS:DX	-> ASCIZ file name or directory
					; name without trailing	slash
		pop	ds
		jb	loc_2D02
		les	bx, [bp+attrib]
		assume es:nothing
		mov	es:[bx], cx
		xor	ax, ax
		jmp	loc_2D06
; ---------------------------------------------------------------------------

loc_2D02::				; CODE XREF: __dos_getfileattr+Ej
		push	ax
		call	__doserror

loc_2D06::				; CODE XREF: __dos_getfileattr+18j
		pop	bp
		retf
__dos_getfileattr endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; unsigned int __cdecl _dos_setfileattr(const char *filename, unsigned int attrib)
__dos_setfileattr proc far

filename	= dword	ptr  6
attrib		= word ptr  0Ah

		push	bp
		mov	bp, sp
		push	ds
		mov	ah, 43h	; 'C'
		mov	al, 1
		lds	dx, [bp+filename]
		mov	cx, [bp+attrib]
		int	21h		; DOS -	2+ - SET FILE ATTRIBUTES
					; DS:DX	-> ASCIZ file name
					; CX = file attribute bits
		pop	ds
		jb	loc_2D1F
		xor	ax, ax
		jmp	loc_2D23
; ---------------------------------------------------------------------------

loc_2D1F::				; CODE XREF: __dos_setfileattr+11j
		push	ax
		call	__doserror

loc_2D23::				; CODE XREF: __dos_setfileattr+15j
		pop	bp
		retf
__dos_setfileattr endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void __cdecl _dos_getdrive(unsigned int *drive)
__dos_getdrive	proc far		; CODE XREF: _getdisk+Dp

drive		= dword	ptr  6

		push	bp
		mov	bp, sp
		mov	ah, 19h
		int	21h		; DOS -	GET DEFAULT DISK NUMBER
		mov	ah, 0
		inc	ax
		les	bx, [bp+drive]
		mov	es:[bx], ax
		pop	bp
		retf
__dos_getdrive	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void __cdecl _dos_setdrive(unsigned int drive, unsigned int *ndrives)
__dos_setdrive	proc far		; CODE XREF: _setdisk+12p

drive		= word ptr  6
ndrives		= dword	ptr  8

		push	bp
		mov	bp, sp
		mov	dl, byte ptr [bp+drive]
		dec	dl
		mov	ah, 0Eh
		int	21h		; DOS -	SELECT DISK
					; DL = new default drive number	(0 = A,	1 = B, etc.)
					; Return: AL = number of logical drives
		mov	ah, 0
		les	bx, [bp+ndrives]
		mov	es:[bx], ax
		pop	bp
		retf
__dos_setdrive	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

nullsub_1	proc far		; CODE XREF: sub_2D4E+29P sub_2D4E+41P ...
		retf
nullsub_1	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

sub_2D4E	proc near		; CODE XREF: _exit+Ap __exit+Dp ...

arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= word ptr  8

		push	bp
		mov	bp, sp
		push	si
		mov	si, [bp+arg_4]
		or	si, si
		jnz	loc_2D7B
		jmp	loc_2D6B
; ---------------------------------------------------------------------------

loc_2D5B::				; CODE XREF: sub_2D4E+22j
		dec	__atexitcnt
		mov	bx, __atexitcnt
		mov	cl, 2
		shl	bx, cl
		call	dword ptr __atexittbl[bx]

loc_2D6B::				; CODE XREF: sub_2D4E+Bj
		cmp	__atexitcnt, 0
		jnz	loc_2D5B
		nop
		push	cs
		call	__cleanup
; ---------------------------------------------------------------------------
		call	__exitbuf

loc_2D7B::				; CODE XREF: sub_2D4E+9j
		nop
		push	cs
		call	near ptr __restorezero
		nop
		push	cs
		call	near ptr __checknull
		cmp	[bp+arg_2], 0
		jnz	loc_2DA0
		or	si, si
		jnz	loc_2D97
		call	__exitfopen
		call	__exitopen

loc_2D97::				; CODE XREF: sub_2D4E+3Fj
		push	[bp+arg_0]
		nop
		push	cs
		call	__terminate
; ---------------------------------------------------------------------------
		pop	cx

loc_2DA0::				; CODE XREF: sub_2D4E+3Bj
		pop	si
		pop	bp
		retn	6
sub_2D4E	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function noreturn	bp-based frame

; void __cdecl exit(int	status)
_exit		proc far		; CODE XREF: start+154p seg0fa9:0ADAP	...

status		= word ptr  6

		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		push	ax
		push	[bp+status]
		call	sub_2D4E
		pop	bp
		retf
_exit		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function noreturn	bp-based frame

; void __cdecl _exit(int status)
__exit		proc far		; CODE XREF: _abort+14p

status		= word ptr  6

		push	bp
		mov	bp, sp
		mov	ax, 1
		push	ax
		xor	ax, ax
		push	ax
		push	[bp+status]
		call	sub_2D4E
		pop	bp
		retf
__exit		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

; void _cexit(void)
__cexit		proc far
		xor	ax, ax
		push	ax
		mov	ax, 1
		push	ax
		xor	ax, ax
		push	ax
		call	sub_2D4E
		retf
__cexit		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

; void _c_exit(void)
__c_exit	proc far
		mov	ax, 1
		push	ax
		push	ax
		xor	ax, ax
		push	ax
		call	sub_2D4E
		retf
__c_exit	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

scopy@		proc far		; CODE XREF: save_new_score(ulong,uchar	*,uchar)+33P
					; return_element(uchar,uchar)+10P

arg_0		= dword	ptr  6
arg_4		= dword	ptr  0Ah

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	ds
		lds	si, [bp+arg_0]
		les	di, [bp+arg_4]
		cld
		shr	cx, 1
		rep movsw
		adc	cx, cx
		rep movsb
		pop	ds
		pop	di
		pop	si
		pop	bp
		retf	8
scopy@		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl getcurdir(int drive, char	*directory)
_getcurdir	proc far		; CODE XREF: file_box::current_directory(uchar *)+2EP

drive		= word ptr  6
directory	= dword	ptr  8

		push	bp
		mov	bp, sp
		push	si
		push	ds
		mov	ah, 47h	; 'G'
		mov	dl, byte ptr [bp+drive]
		lds	si, [bp+directory]
		int	21h		; DOS -	2+ - GET CURRENT DIRECTORY
					; DL = drive (0=default, 1=A, etc.)
					; DS:SI	points to 64-byte buffer area
		pop	ds
		jb	loc_2E12
		xor	ax, ax
		jmp	loc_2E16
; ---------------------------------------------------------------------------

loc_2E12::				; CODE XREF: _getcurdir+10j
		push	ax
		call	__ioerror

loc_2E16::				; CODE XREF: _getcurdir+14j
		pop	si
		pop	bp
		retf
_getcurdir	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int getdisk(void)
_getdisk	proc far		; CODE XREF: file_box::current_directory(uchar *)+15P

drive		= word ptr -2

		push	bp
		mov	bp, sp
		sub	sp, 2
		push	ss
		lea	ax, [bp+drive]
		push	ax		; drive
		nop
		push	cs
		call	near ptr __dos_getdrive
		pop	cx
		pop	cx
		mov	ax, [bp+drive]
		dec	ax
		mov	sp, bp
		pop	bp
		retf
_getdisk	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl setdisk(int drive)
_setdisk	proc far

ndrives		= word ptr -2
drive		= word ptr  6

		push	bp
		mov	bp, sp
		sub	sp, 2
		push	ss
		lea	ax, [bp+ndrives]
		push	ax		; ndrives
		mov	ax, [bp+drive]
		inc	ax
		push	ax		; drive
		nop

loc_2E44::				; CODE XREF: sub_2433E+81p
					; sub_24429+Ep	...
		push	cs
		call	near ptr __dos_setdrive
		add	sp, 6
		mov	ax, [bp+ndrives]
		mov	sp, bp
		pop	bp
		retf
_setdisk	endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void (__cdecl	__interrupt far	*__cdecl getvect(int interruptno))()
_getvect	proc far		; CODE XREF: game_manager::game_manager(uchar *)+17AP
					; _gr_start_kbd_grab+13P

interruptno	= word ptr  6

		push	bp
		mov	bp, sp
		mov	ah, 35h	; '5'
		mov	al, byte ptr [bp+interruptno]
		int	21h		; DOS -	2+ - GET INTERRUPT VECTOR
					; AL = interrupt number
					; Return: ES:BX	= value	of interrupt vector
		assume es:nothing
		xchg	ax, bx
		mov	dx, es
		pop	bp
		retf
_getvect	endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void __cdecl setvect(int interruptno,	void (__interrupt far *isr)())
_setvect	proc far		; CODE XREF: game_manager::game_manager(uchar *)+18FP
					; game_manager::~game_manager(void)+37P ...

interruptno	= word ptr  6
isr		= dword	ptr  8

		push	bp
		mov	bp, sp
		mov	ah, 25h	; '%'
		mov	al, byte ptr [bp+interruptno]
		push	ds
		lds	dx, [bp+isr]
		assume ds:seg1a07
		int	21h		; DOS -	SET INTERRUPT VECTOR
					; AL = interrupt number
					; DS:DX	= new vector to	be used	for specified interrupt
		pop	ds
		assume ds:seg2608
		pop	bp
		retf
_setvect	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

n_lxlsh@	proc far		; CODE XREF: __sbrk+Dp
		pop	bx
		push	cs
		push	bx

f_lxlsh@:
		cmp	cl, 10h
		jnb	loc_2E8A
		mov	bx, ax
		shl	ax, cl
		shl	dx, cl

loc_2E80::				; CODE XREF: _startworx+3p
		neg	cl
		add	cl, 10h
		shr	bx, cl
		or	dx, bx
		retf
; ---------------------------------------------------------------------------

loc_2E8A::				; CODE XREF: n_lxlsh@+6j
		sub	cl, 10h
		xchg	ax, dx
		xor	ax, ax
		shl	dx, cl
		retf
n_lxlsh@	endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

n_padd@		proc far		; CODE XREF: sub_420D+6p
		pop	es
		assume es:nothing
		push	cs
		push	es

padd@:
		or	cx, cx
		jge	loc_2EA6
		not	bx
		not	cx
		add	bx, 1
		adc	cx, 0
		jmp	loc_2ED5
; ---------------------------------------------------------------------------

loc_2EA6::				; CODE XREF: n_padd@+5j n_padd@+40j
		add	ax, bx
		jnb	loc_2EAE
		add	dx, 1000h

loc_2EAE::				; CODE XREF: n_padd@+15j
		mov	ch, cl
		mov	cl, 4
		shl	ch, cl
		add	dh, ch
		mov	ch, al
		shr	ax, cl
		add	dx, ax
		mov	al, ch
		and	ax, 0Fh
		retf
; ---------------------------------------------------------------------------

n_psub@:
		pop	es
		assume es:nothing
		push	cs
		push	es

psub@:
		or	cx, cx
		jge	loc_2ED5
		not	bx
		not	cx
		add	bx, 1
		adc	cx, 0
		jmp	loc_2EA6
; ---------------------------------------------------------------------------

loc_2ED5::				; CODE XREF: n_padd@+11j n_padd@+34j
		sub	ax, bx
		jnb	loc_2EDD
		sub	dx, 1000h

loc_2EDD::				; CODE XREF: n_padd@+44j
		mov	bh, cl
		mov	cl, 4
		shl	bh, cl
		xor	bl, bl
		sub	dx, bx
		mov	ch, al
		shr	ax, cl
		add	dx, ax
		mov	al, ch
		and	ax, 0Fh
		retf
n_padd@		endp ; sp-analysis failed

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

n_psbp@		proc far		; CODE XREF: _farcoreleft+1Fp
		pop	es
		assume es:nothing
		push	cs
		push	es

f_psbp@:
		push	di
		mov	di, cx
		mov	ch, dh
		mov	cl, 4
		shl	dx, cl
		shr	ch, cl
		add	dx, ax
		adc	ch, 0
		mov	ax, di
		shl	di, cl
		shr	ah, cl
		add	bx, di
		adc	ah, 0
		sub	dx, bx
		sbb	ch, ah
		mov	al, ch
		cbw
		xchg	ax, dx
		pop	di
		retf
n_psbp@		endp ; sp-analysis failed

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__ioerror	proc near		; CODE XREF: _chdir+13p _getcurdir+17p ...

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		push	si
		mov	si, [bp+arg_0]
		or	si, si
		jl	loc_2F3B
		cmp	si, 58h	; 'X'
		jle	loc_2F2E

loc_2F2B::				; CODE XREF: __ioerror+25j
		mov	si, 57h	; 'W'

loc_2F2E::				; CODE XREF: __ioerror+Ej
		mov	__doserrno, si
		mov	al, __doserrortosv[si]
		cbw
		mov	si, ax
		jmp	loc_2F48
; ---------------------------------------------------------------------------

loc_2F3B::				; CODE XREF: __ioerror+9j
		neg	si
		cmp	si, 30h	; '0'
		jg	loc_2F2B
		mov	__doserrno, 0FFFFh

loc_2F48::				; CODE XREF: __ioerror+1Ej
		mov	_errno,	si
		mov	ax, 0FFFFh
		pop	si
		pop	bp
		retn	2
__ioerror	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__doserror	proc near		; CODE XREF: __dos_getfileattr+1Bp
					; __dos_setfileattr+18p

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		push	si
		mov	si, [bp+arg_0]
		push	si
		call	__ioerror
		mov	ax, si
		pop	si
		pop	bp
		retn	2
__doserror	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl isatty(int handle)
_isatty		proc far		; CODE XREF: __setupio+48p
					; __setupio+84p ...

handle		= word ptr  6

		push	bp
		mov	bp, sp
		mov	ax, 4400h
		mov	bx, [bp+handle]
		int	21h		; DOS -	2+ - IOCTL - GET DEVICE	INFORMATION
					; BX = file or device handle
		xchg	ax, dx
		and	ax, 80h
		pop	bp
		retf
_isatty		endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__longtoa	proc near		; CODE XREF: __utoa+19p
					; __vprinter+220p ...

var_22		= byte ptr -22h
arg_0		= byte ptr  4
arg_2		= byte ptr  6
arg_4		= word ptr  8
arg_6		= dword	ptr  0Ah
arg_A		= word ptr  0Eh
arg_C		= word ptr  10h

		push	bp
		mov	bp, sp
		sub	sp, 22h
		push	si
		push	di
		push	es
		les	di, [bp+arg_6]
		assume es:seg2608
		mov	bx, [bp+arg_4]
		cmp	bx, 24h	; '$'
		ja	loc_2FE7
		cmp	bl, 2
		jb	loc_2FE7
		mov	ax, [bp+arg_A]
		mov	cx, [bp+arg_C]
		or	cx, cx
		jge	loc_2FAC
		cmp	[bp+arg_2], 0
		jz	loc_2FAC
		mov	byte ptr es:[di], 2Dh ;	'-'
		inc	di
		neg	cx
		neg	ax
		sbb	cx, 0

loc_2FAC::				; CODE XREF: __longtoa+21j
					; __longtoa+27j
		lea	si, [bp+var_22]
		jcxz	loc_2FC1

loc_2FB1::				; CODE XREF: __longtoa+48j
		xchg	ax, cx
		sub	dx, dx
		div	bx
		xchg	ax, cx
		div	bx
		mov	ss:[si], dl
		inc	si
		jcxz	loc_2FC9
		jmp	loc_2FB1
; ---------------------------------------------------------------------------

loc_2FC1::				; CODE XREF: __longtoa+38j
					; __longtoa+54j
		sub	dx, dx
		div	bx
		mov	ss:[si], dl
		inc	si

loc_2FC9::				; CODE XREF: __longtoa+46j
		or	ax, ax
		jnz	loc_2FC1
		lea	cx, [bp+var_22]
		neg	cx
		add	cx, si
		cld

loc_2FD5::				; CODE XREF: __longtoa+6Ej
		dec	si
		mov	al, ss:[si]
		sub	al, 0Ah
		jnb	loc_2FE1
		add	al, 3Ah	; ':'
		jmp	loc_2FE4
; ---------------------------------------------------------------------------

loc_2FE1::				; CODE XREF: __longtoa+64j
		add	al, [bp+arg_0]

loc_2FE4::				; CODE XREF: __longtoa+68j
		stosb
		loop	loc_2FD5

loc_2FE7::				; CODE XREF: __longtoa+12j
					; __longtoa+17j
		mov	al, 0
		stosb
		pop	es
		assume es:nothing

loc_2FEB::				; CODE XREF: sub_2192A+8p
					; sub_2192A+11p ...
		mov	dx, word ptr [bp+arg_6+2]
		mov	ax, word ptr [bp+arg_6]
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn	0Eh
__longtoa	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__utoa		proc near		; CODE XREF: __mkname+3Dp

arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= word ptr  8

		push	bp

loc_2FFA::				; CODE XREF: sub_219F3+1Dp
		mov	bp, sp
		xor	ax, ax
		push	ax
		push	[bp+arg_4]
		push	[bp+arg_2]
		push	[bp+arg_0]
		mov	ax, 0Ah
		push	ax
		mov	al, 0
		push	ax
		mov	al, 61h	; 'a'
		push	ax
		call	__longtoa
		pop	bp
		retn	6
__utoa		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; __int32 __cdecl lseek(int handle, __int32 offset, int	fromwhere)
_lseek		proc far		; CODE XREF: _fseek+66p _ftell+1Bp ...

handle		= word ptr  6
offset_		= dword	ptr  8
fromwhere	= word ptr  0Ch

		push	bp
		mov	bp, sp
		mov	bx, [bp+handle]
		shl	bx, 1
		and	__openfd[bx], 0FDFFh
		mov	ah, 42h	; 'B'
		mov	al, byte ptr [bp+fromwhere]
		mov	bx, [bp+handle]
		mov	cx, word ptr [bp+offset_+2]
		mov	dx, word ptr [bp+offset_]
		int	21h		; DOS -	2+ - MOVE FILE READ/WRITE POINTER (LSEEK)
					; AL = method:
					; 0-from beginnig,1-from current,2-from	end
		jb	loc_303B
		jmp	loc_3040
; ---------------------------------------------------------------------------

loc_303B::				; CODE XREF: _lseek+1Ej
		push	ax
		call	__ioerror
		cwd

loc_3040::				; CODE XREF: _lseek+20j
		pop	bp
		retf
_lseek		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __stdcall	_mkname(int, int, int, char *dest)
__mkname	proc near		; CODE XREF: __tmpnam+2Dp _fclose+9Ep

arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= word ptr  8
dest		= dword	ptr  0Ah

		push	bp
		mov	bp, sp
		mov	ax, word ptr [bp+dest]
		or	ax, word ptr [bp+dest+2]
		jnz	loc_3055
		mov	word ptr [bp+dest+2], ds
		mov	word ptr [bp+dest], offset unk_2D6EA

loc_3055::				; CODE XREF: __mkname+9j
		push	[bp+arg_0]
		mov	ax, [bp+arg_2]
		or	ax, [bp+arg_4]
		jnz	loc_3067
		mov	dx, ds
		mov	ax, offset aTmp	; "TMP"
		jmp	loc_306D
; ---------------------------------------------------------------------------

loc_3067::				; CODE XREF: __mkname+1Cj
		mov	dx, [bp+arg_4]
		mov	ax, [bp+arg_2]

loc_306D::				; CODE XREF: __mkname+23j
		push	dx
		push	ax		; src
		push	word ptr [bp+dest+2]
		push	word ptr [bp+dest] ; dest
		nop
		push	cs
		call	near ptr __stpcpy
		add	sp, 8
		push	dx
		push	ax
		call	__utoa
		push	ds
		mov	ax, offset a__0	; ".$$$"
		push	ax		; src
		push	word ptr [bp+dest+2]
		push	word ptr [bp+dest] ; dest
		nop
		push	cs
		call	near ptr _strcat
		add	sp, 8
		mov	dx, word ptr [bp+dest+2]
		mov	ax, word ptr [bp+dest]
		pop	bp
		retn	0Ah
__mkname	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __stdcall	_tmpnam(__int32, char *filename)
__tmpnam	proc near

attrib		= word ptr -2
arg_0		= dword	ptr  4
filename	= dword	ptr  8

		push	bp
		mov	bp, sp
		sub	sp, 2

loc_30A5::				; CODE XREF: __tmpnam+4Bj
		push	word ptr [bp+filename+2]
		push	word ptr [bp+filename] ; dest
		xor	ax, ax
		xor	dx, dx
		push	ax		; int
		push	dx		; int
		les	bx, [bp+arg_0]
		assume es:nothing
		cmp	word ptr es:[bx], 0FFFFh
		jnz	loc_30BF
		mov	ax, 2
		jmp	loc_30C2
; ---------------------------------------------------------------------------

loc_30BF::				; CODE XREF: __tmpnam+19j
		mov	ax, 1

loc_30C2::				; CODE XREF: __tmpnam+1Ej
		les	bx, [bp+arg_0]
		add	es:[bx], ax
		mov	ax, es:[bx]
		push	ax		; int
		call	__mkname
		mov	word ptr [bp+filename+2], dx
		mov	word ptr [bp+filename],	ax
		push	ss
		lea	ax, [bp+attrib]
		push	ax		; attrib
		push	word ptr [bp+filename+2]
		push	word ptr [bp+filename] ; filename
		nop
		push	cs
		call	near ptr __dos_getfileattr
		add	sp, 8
		or	ax, ax
		jz	loc_30A5
		mov	dx, word ptr [bp+filename+2]
		mov	ax, word ptr [bp+filename]
		mov	sp, bp
		pop	bp
		retn	8
__tmpnam	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; _DWORD __cdecl set_new_handler(void (*)(void))
@set_new_handler$qnqv$v	proc far

var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		sub	sp, 4
		mov	ax, word ptr __new_handler+2
		mov	dx, word ptr __new_handler
		mov	[bp+var_2], ax
		mov	[bp+var_4], dx
		mov	ax, word ptr [bp+arg_0+2]
		mov	dx, word ptr [bp+arg_0]
		mov	word ptr __new_handler+2, ax
		mov	word ptr __new_handler,	dx
		mov	dx, [bp+var_2]
		mov	ax, [bp+var_4]
		mov	sp, bp
		pop	bp
		retf
@set_new_handler$qnqv$v	endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; _DWORD __cdecl operator new(unsigned int)
@$bnew$qui	proc far		; CODE XREF: show_stats(void)+153P
					; game_manager::game_manager(uchar *)+EP ...

var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6

		push	bp
		mov	bp, sp
		sub	sp, 4
		push	si
		mov	si, [bp+arg_0]
		or	si, si
		jz	loc_3134
		mov	ax, si
		jmp	loc_3137
; ---------------------------------------------------------------------------

loc_3134::				; CODE XREF: operator new(uint)+Cj
		mov	ax, 1

loc_3137::				; CODE XREF: operator new(uint)+10j
		mov	si, ax
		jmp	loc_313F
; ---------------------------------------------------------------------------

loc_313B::				; CODE XREF: operator new(uint)+35j
		call	__new_handler

loc_313F::				; CODE XREF: operator new(uint)+17j
		push	si		; size
		nop
		push	cs
		call	near ptr _malloc
		assume es:nothing
		pop	cx
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax
		or	ax, dx
		jnz	loc_3159
		mov	ax, word ptr __new_handler
		or	ax, word ptr __new_handler+2
		jnz	loc_313B

loc_3159::				; CODE XREF: operator new(uint)+2Cj
		mov	dx, [bp+var_2]
		mov	ax, [bp+var_4]
		pop	si
		mov	sp, bp
		pop	bp
		retf
@$bnew$qui	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

n_lxmul@	proc near		; CODE XREF: _rand+Ep _delay+1Cp
		push	si
		xchg	ax, si
		xchg	ax, dx
		test	ax, ax
		jz	loc_316D
		mul	bx

loc_316D::				; CODE XREF: n_lxmul@+5j
		jcxz	loc_3174
		assume es:nothing
		xchg	ax, cx
		mul	si
		add	ax, cx
		assume es:nothing

loc_3174::				; CODE XREF: n_lxmul@:loc_316Dj
		xchg	ax, si
		mul	bx
		add	dx, si
		pop	si
		retn
n_lxmul@	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

n_pcmp@		proc near		; CODE XREF: __brk+11p	__brk+24p ...
		push	cx
		mov	ch, al
		mov	cl, 4
		shr	ax, cl
		add	dx, ax
		mov	al, ch
		mov	ah, bl
		shr	bx, cl
		pop	cx
		add	cx, bx
		mov	bl, ah
		and	ax, 0Fh
		and	bx, 0Fh
		cmp	dx, cx
		jnz	locret_319B
		cmp	ax, bx

locret_319B::				; CODE XREF: n_pcmp@+1Cj
		retn
n_pcmp@		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void __cdecl srand(unsigned int seed)
_srand		proc far

seed		= word ptr  6

		push	bp
		mov	bp, sp
		mov	ax, [bp+seed]
		mov	word_2B328, 0
		mov	word_2B326, ax
		pop	bp
		retf
_srand		endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

; int rand(void)
_rand		proc far		; CODE XREF: random(int)+3P
		mov	cx, word_2B328
		mov	bx, word_2B326
		mov	dx, 15Ah
		mov	ax, 4E35h
		call	n_lxmul@
		add	ax, 1
		adc	dx, 0
		mov	word_2B328, dx
		mov	word_2B326, ax
		mov	ax, word_2B328
		cwd
		and	ax, 7FFFh
		retf
_rand		endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl _read(int	handle,	void *buf, unsigned int	len)
__read		proc far		; CODE XREF: ___read+44p ___read+91p

handle		= word ptr  6
buf		= dword	ptr  8
len		= word ptr  0Ch

		push	bp
		mov	bp, sp
		mov	bx, [bp+handle]
		shl	bx, 1
		test	__openfd[bx], 2
		jz	loc_31E9
		mov	ax, 5
		push	ax
		jmp	loc_31FD
; ---------------------------------------------------------------------------

loc_31E9::				; CODE XREF: __read+Ej
		push	ds
		mov	ah, 3Fh	; '?'
		mov	bx, [bp+handle]
		mov	cx, [bp+len]
		lds	dx, [bp+buf]
		int	21h		; DOS -	2+ - READ FROM FILE WITH HANDLE
					; BX = file handle, CX = number	of bytes to read
					; DS:DX	-> buffer
		pop	ds
		jb	loc_31FC
		jmp	loc_3200
; ---------------------------------------------------------------------------

loc_31FC::				; CODE XREF: __read+25j
		push	ax

loc_31FD::				; CODE XREF: __read+14j
		call	__ioerror

loc_3200::				; CODE XREF: __read+27j
		pop	bp
		retf
__read		endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void __cdecl segread(struct SREGS *segp)
_segread	proc far		; CODE XREF: _int86+Dp

segp		= dword	ptr  6

		push	bp
		mov	bp, sp
		push	si
		mov	bx, es
		les	si, [bp+segp]
		assume es:seg2b53
		mov	es:[si], bx
		mov	ax, [bp+4]
		mov	es:[si+2], ax
		mov	word ptr es:[si+4], ss
		mov	word ptr es:[si+6], ds
		mov	es, bx
		assume es:nothing
		pop	si
		pop	bp
		retf
_segread	endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

__setupio	proc near		; DATA XREF: seg2608:3484o
		mov	cx, 5
		cmp	cx, __nfile
		jnb	loc_3263

loc_322B::				; CODE XREF: __setupio+3Fj
		mov	bx, cx
		shl	bx, 1
		mov	__openfd[bx], 0
		mov	ax, cx
		mov	dx, 14h
		imul	dx
		mov	bx, ax
		mov	byte_2B104[bx],	0FFh
		mov	ax, cx
		mov	dx, 14h
		imul	dx
		add	ax, offset __streams
		push	ax
		mov	ax, cx
		mov	dx, 14h
		imul	dx
		mov	bx, ax
		pop	ax
		mov	off_2B112[bx], ax
		inc	cx
		cmp	cx, __nfile
		jb	loc_322B

loc_3263::				; CODE XREF: __setupio+7j
		mov	al, byte_2B104
		cbw
		push	ax		; handle
		nop
		push	cs
		call	near ptr _isatty
		pop	cx
		or	ax, ax
		jnz	loc_3278
		and	word_2B102, 0FDFFh

loc_3278::				; CODE XREF: __setupio+4Ej
		mov	ax, 200h
		push	ax
		test	word_2B102, 200h
		jz	loc_3289
		mov	ax, 1
		jmp	loc_328B
; ---------------------------------------------------------------------------

loc_3289::				; CODE XREF: __setupio+60j
		xor	ax, ax

loc_328B::				; CODE XREF: __setupio+65j
		push	ax		; size
		xor	ax, ax
		xor	dx, dx
		push	ax		; type
		push	dx
		push	ds		; buf
		mov	ax, offset __streams
		push	ax
		nop
		push	cs		; stream
		call	near ptr _setvbuf
		add	sp, 0Ch
		mov	al, stru_2B114.fd
		cbw
		push	ax		; handle
		nop
		push	cs
		call	near ptr _isatty
		pop	cx
		or	ax, ax
		jnz	loc_32B4
		and	stru_2B114.flags, 0FDFFh

loc_32B4::				; CODE XREF: __setupio+8Aj
		mov	ax, 200h
		push	ax
		test	stru_2B114.flags, 200h
		jz	loc_32C5
		mov	ax, 2
		jmp	loc_32C7
; ---------------------------------------------------------------------------

loc_32C5::				; CODE XREF: __setupio+9Cj
		xor	ax, ax

loc_32C7::				; CODE XREF: __setupio+A1j
		push	ax		; size
		xor	ax, ax
		xor	dx, dx
		push	ax		; type
		push	dx
		push	ds		; buf
		mov	ax, offset stru_2B114
		push	ax
		nop
		push	cs		; stream
		call	near ptr _setvbuf
		add	sp, 0Ch
		retn
__setupio	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl unlink(const char	*path)
_unlink		proc far		; CODE XREF: _fclose+A5p

path_		= dword	ptr  6

		push	bp
		mov	bp, sp

loc_32DF::				; CODE XREF: sub_219F3+1Dp
		push	ds
		mov	ah, 41h	; 'A'
		lds	dx, [bp+path_]
		int	21h		; DOS -	2+ - DELETE A FILE (UNLINK)
					; DS:DX	-> ASCIZ pathname of file to delete (no	wildcards allowed)
		pop	ds
		jb	loc_32EE
		xor	ax, ax
		jmp	loc_32F2
; ---------------------------------------------------------------------------

loc_32EE::				; CODE XREF: _unlink+Cj
		push	ax
		call	__ioerror

loc_32F2::				; CODE XREF: _unlink+10j
		pop	bp
		retf
_unlink		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_32F4	proc near		; CODE XREF: __vprinter+257p
					; __vprinter+260p
		mov	al, dh
		call	sub_32FB
		mov	al, dl
sub_32F4	endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_32FB	proc near		; CODE XREF: sub_32F4+2p
		aam	;10h
		xchg	ah, al
		call	sub_3304
		xchg	ah, al
sub_32FB	endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_3304	proc near		; CODE XREF: sub_32FB+4p
		add	al, 90h	; ''
		daa
		adc	al, 40h	; '@'
		daa
		stosb
		retn
sub_3304	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__vprinter	proc near		; CODE XREF: _cprintf+17p _fprintf+17p ...

var_96		= byte ptr -96h
var_46		= byte ptr -46h
var_45		= byte ptr -45h
var_16		= word ptr -16h
var_14		= word ptr -14h
var_12		= word ptr -12h
var_10		= word ptr -10h
var_E		= word ptr -0Eh
var_B		= byte ptr -0Bh
var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= byte ptr -6
var_5		= byte ptr -5
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  4
arg_2		= dword	ptr  6

; FUNCTION CHUNK AT 1190 SIZE 0000042F BYTES

		push	bp
		mov	bp, sp
		sub	sp, 96h
		push	si
		push	di
		mov	[bp+var_12], 0
		mov	[bp+var_14], 50h ; 'P'
		mov	[bp+var_16], 0
		jmp	loc_3370
__vprinter	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_3326	proc near		; CODE XREF: __vprinter:loc_35DDp
					; __vprinter:loc_363Dp	...
		push	di
		mov	cx, 0FFFFh
		xor	al, al
		repne scasb
		not	cx
		dec	cx
		pop	di
		retn
sub_3326	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_3333	proc near		; CODE XREF: __vprinter+3B7p
					; __vprinter+3C8p ...
		mov	ss:[di], al
		inc	di
		dec	byte ptr [bp-14h]
		jnz	locret_336F
sub_3333	endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_333C	proc near		; CODE XREF: __vprinter+86p
					; __vprinter+40Ep ...
		push	bx
		push	cx
		push	dx
		push	es
		lea	ax, [bp-96h]
		sub	di, ax
		push	ss
		lea	ax, [bp-96h]
		push	ax
		push	di
		push	word ptr [bp+0Ch]
		push	word ptr [bp+0Ah]
		call	ss:off_2826E[bp]
		assume es:seg2b53
		or	ax, ax
		jnz	loc_335F
		mov	word ptr [bp-16h], 1

loc_335F::				; CODE XREF: sub_333C+1Cj
		mov	word ptr [bp-14h], 50h ; 'P'

loc_3364::				; CODE XREF: _memset+11p
		add	[bp-12h], di
		lea	di, [bp-96h]
		pop	es
		assume es:seg2608
		pop	dx
		pop	cx
		pop	bx

locret_336F::				; CODE XREF: sub_3333+7j
		retn
sub_333C	endp ; sp-analysis failed

; ---------------------------------------------------------------------------
; START	OF FUNCTION CHUNK FOR __vprinter

loc_3370::				; CODE XREF: __vprinter+18j
		push	es
		cld
		lea	di, [bp+var_96]
		mov	[bp+var_4], di

loc_3379::				; CODE XREF: __vprinter:loc_3768j
		mov	di, [bp+var_4]

loc_337C::				; CODE XREF: __vprinter:loc_372Cj
		les	si, [bp+arg_2]

loc_337F::				; CODE XREF: __vprinter+84j
					; __vprinter+89j
		lods	byte ptr es:[si]
		or	al, al
		jz	loc_3397
		cmp	al, 25h	; '%'
		jz	loc_339A	; CODE XREF: _gr_start_kbd_grab+29p

loc_3389::				; CODE XREF: __vprinter+95j
		mov	ss:[di], al
		inc	di
		dec	byte ptr [bp+var_14]
		jg	loc_337F
		call	sub_333C
		jmp	loc_337F
; ---------------------------------------------------------------------------

loc_3397::				; CODE XREF: __vprinter+77j
		jmp	loc_377F
; ---------------------------------------------------------------------------

loc_339A::				; CODE XREF: __vprinter+7Bj
		mov	[bp+var_10], si
		lods	byte ptr es:[si]
		cmp	al, 25h	; '%'
		jz	loc_3389
		mov	[bp+var_4], di
		xor	cx, cx
		mov	[bp+var_E], cx
		mov	[bp+var_2], 20h	; ' '
		mov	[bp+var_B], cl
		mov	[bp+var_8], 0FFFFh
		mov	[bp+var_A], 0FFFFh
		jmp	loc_33C1
; ---------------------------------------------------------------------------

loc_33BF::				; CODE XREF: __vprinter+E2j
					; __vprinter+EDj ...
		lods	byte ptr es:[si]

loc_33C1::				; CODE XREF: __vprinter+B1j
		xor	ah, ah
		mov	dx, ax
		mov	bx, ax
		sub	bl, 20h	; ' '
		cmp	bl, 60h	; '`'
		jnb	loc_33E2
		mov	bl, byte_2B333[bx]
		cmp	bx, 17h		; switch 24 cases
		jbe	loc_33DB
		jmp	loc_376B	; jumptable 000111FD default case
; ---------------------------------------------------------------------------

loc_33DB::				; CODE XREF: __vprinter+CAj
		shl	bx, 1
		jmp	cs:off_379F[bx]	; switch jump
; ---------------------------------------------------------------------------

loc_33E2::				; CODE XREF: __vprinter+C1j
					; __vprinter+DCj ...
		jmp	loc_376B	; jumptable 000111FD default case
; ---------------------------------------------------------------------------

loc_33E5::				; CODE XREF: __vprinter+D1j
					; DATA XREF: seg0000:off_379Fo
		cmp	ch, 0		; jumptable 000111FD case 1
		ja	loc_33E2
		or	[bp+var_2], 1
		jmp	loc_33BF
; ---------------------------------------------------------------------------

loc_33F0::				; CODE XREF: __vprinter+D1j
					; DATA XREF: seg0000:off_379Fo
		cmp	ch, 0		; jumptable 000111FD case 3
		ja	loc_33E2
		or	[bp+var_2], 2
		jmp	loc_33BF
; ---------------------------------------------------------------------------

loc_33FB::				; CODE XREF: __vprinter+D1j
					; DATA XREF: seg0000:off_379Fo
		cmp	ch, 0		; jumptable 000111FD case 0
		ja	loc_33E2
		cmp	[bp+var_B], 2Bh	; '+'
		jz	loc_3409
		mov	[bp+var_B], dl

loc_3409::				; CODE XREF: __vprinter+F8j
		jmp	loc_33BF
; ---------------------------------------------------------------------------

loc_340B::				; CODE XREF: __vprinter+D1j
					; DATA XREF: seg0000:off_379Fo
		and	[bp+var_2], 0FFDFh ; jumptable 000111FD	case 22
		jmp	loc_3415
; ---------------------------------------------------------------------------

loc_3411::				; CODE XREF: __vprinter+D1j
					; DATA XREF: seg0000:off_379Fo
		or	[bp+var_2], 20h	; jumptable 000111FD case 23

loc_3415::				; CODE XREF: __vprinter+103j
					; __vprinter+1A1j ...
		mov	ch, 5
		jmp	loc_33BF
; ---------------------------------------------------------------------------

loc_3419::				; CODE XREF: __vprinter+D1j
					; DATA XREF: seg0000:off_379Fo
		cmp	ch, 0		; jumptable 000111FD case 9
		ja	loc_346B	; jumptable 000111FD case 5
		test	[bp+var_2], 2
		jnz	loc_344E
		or	[bp+var_2], 8
		mov	ch, 1
		jmp	loc_33BF
; ---------------------------------------------------------------------------

loc_342D::				; CODE XREF: __vprinter+148j
					; __vprinter+155j ...
		jmp	loc_376B	; jumptable 000111FD default case
; ---------------------------------------------------------------------------

loc_3430::				; CODE XREF: __vprinter+D1j
					; DATA XREF: seg0000:off_379Fo
		mov	di, [bp+arg_0]	; jumptable 000111FD case 2
		mov	ax, ss:[di]
		add	[bp+arg_0], 2
		cmp	ch, 2
		jnb	loc_3451
		or	ax, ax
		jns	loc_3449
		neg	ax
		or	[bp+var_2], 2

loc_3449::				; CODE XREF: __vprinter+135j
		mov	[bp+var_8], ax
		mov	ch, 3

loc_344E::				; CODE XREF: __vprinter+117j
					; __vprinter+16Fj ...
		jmp	loc_33BF
; ---------------------------------------------------------------------------

loc_3451::				; CODE XREF: __vprinter+131j
		cmp	ch, 4
		jnz	loc_342D
		mov	[bp+var_A], ax
		inc	ch
		jmp	loc_33BF
; ---------------------------------------------------------------------------

loc_345E::				; CODE XREF: __vprinter+D1j
					; DATA XREF: seg0000:off_379Fo
		cmp	ch, 4		; jumptable 000111FD case 4
		jnb	loc_342D
		mov	ch, 4
		inc	[bp+var_A]
		jmp	loc_33BF
; ---------------------------------------------------------------------------

loc_346B::				; CODE XREF: __vprinter+D1j
					; __vprinter+110j
					; DATA XREF: ...
		xchg	ax, dx		; jumptable 000111FD case 5
		sub	al, 30h	; '0'
		cbw
		cmp	ch, 2
		ja	loc_348D
		mov	ch, 2
		xchg	ax, [bp+var_8]
		or	ax, ax
		jl	loc_344E
		shl	ax, 1
		mov	dx, ax
		shl	ax, 1
		shl	ax, 1
		add	ax, dx
		add	[bp+var_8], ax
		jmp	loc_33BF
; ---------------------------------------------------------------------------

loc_348D::				; CODE XREF: __vprinter+166j
		cmp	ch, 4
		jnz	loc_342D
		xchg	ax, [bp+var_A]
		or	ax, ax
		jz	loc_344E
		shl	ax, 1
		mov	dx, ax
		shl	ax, 1
		shl	ax, 1
		add	ax, dx
		add	[bp+var_A], ax
		jmp	loc_33BF
; ---------------------------------------------------------------------------

loc_34A9::				; CODE XREF: __vprinter+D1j
					; DATA XREF: seg0000:off_379Fo
		or	[bp+var_2], 10h	; jumptable 000111FD case 6
		jmp	loc_3415
; ---------------------------------------------------------------------------

loc_34B0::				; CODE XREF: __vprinter+D1j
					; DATA XREF: seg0000:off_379Fo
		or	[bp+var_2], 100h ; jumptable 000111FD case 7

loc_34B5::				; CODE XREF: __vprinter+D1j
					; DATA XREF: seg0000:off_379Fo
		and	[bp+var_2], 0FFEFh ; jumptable 000111FD	case 8
		jmp	loc_3415
; ---------------------------------------------------------------------------

loc_34BC::				; CODE XREF: __vprinter+D1j
					; DATA XREF: seg0000:off_379Fo
		mov	bh, 8		; jumptable 000111FD case 11
		jmp	loc_34CA
; ---------------------------------------------------------------------------

loc_34C0::				; CODE XREF: __vprinter+D1j
					; DATA XREF: seg0000:off_379Fo
		mov	bh, 0Ah		; jumptable 000111FD case 12
		jmp	loc_34CE
; ---------------------------------------------------------------------------

loc_34C4::				; CODE XREF: __vprinter+D1j
					; DATA XREF: seg0000:off_379Fo
		mov	bh, 10h		; jumptable 000111FD case 13
		mov	bl, 0E9h ; 'é'
		add	bl, dl

loc_34CA::				; CODE XREF: __vprinter+1B2j
		mov	[bp+var_B], 0

loc_34CE::				; CODE XREF: __vprinter+1B6j
		mov	[bp+var_5], dl
		xor	dx, dx
		mov	[bp+var_6], dl
		mov	di, [bp+arg_0]
		mov	ax, ss:[di]
		jmp	loc_34EE
; ---------------------------------------------------------------------------

loc_34DE::				; CODE XREF: __vprinter+D1j
					; DATA XREF: seg0000:off_379Fo
		mov	bh, 0Ah		; jumptable 000111FD case 10
		mov	[bp+var_6], 1
		mov	[bp+var_5], dl
		mov	di, [bp+arg_0]
		mov	ax, ss:[di]
		cwd

loc_34EE::				; CODE XREF: __vprinter+1D0j
		inc	di
		inc	di
		mov	word ptr [bp+arg_2], si
		test	[bp+var_2], 10h
		jz	loc_34FF
		mov	dx, ss:[di]
		inc	di
		inc	di

loc_34FF::				; CODE XREF: __vprinter+1ECj
		mov	[bp+arg_0], di
		lea	di, [bp+var_45]
		or	ax, ax
		jnz	loc_351B
		or	dx, dx
		jnz	loc_351B
		cmp	[bp+var_A], 0
		jnz	loc_351F
		mov	byte ptr ss:[di], 0
		mov	ax, di
		jmp	loc_352F
; ---------------------------------------------------------------------------

loc_351B::				; CODE XREF: __vprinter+1FBj
					; __vprinter+1FFj
		or	[bp+var_2], 4

loc_351F::				; CODE XREF: __vprinter+205j
		push	dx
		push	ax
		push	ss
		push	di
		mov	al, bh
		cbw
		push	ax
		mov	al, [bp+var_6]
		push	ax
		push	bx
		call	__longtoa

loc_352F::				; CODE XREF: __vprinter+20Dj
		push	ss
		pop	es
		assume es:nothing
		mov	dx, [bp+var_A]
		or	dx, dx
		jge	loc_353B
		jmp	loc_362F
; ---------------------------------------------------------------------------

loc_353B::				; CODE XREF: __vprinter+22Aj
		jmp	loc_363D
; ---------------------------------------------------------------------------

loc_353E::				; CODE XREF: __vprinter+D1j
					; DATA XREF: seg0000:off_379Fo
		mov	[bp+var_5], dl	; jumptable 000111FD case 14
		mov	word ptr [bp+arg_2], si
		lea	di, [bp+var_46]
		mov	bx, [bp+arg_0]
		push	word ptr ss:[bx]
		inc	bx
		inc	bx
		mov	[bp+arg_0], bx
		test	[bp+var_2], 20h
		jz	loc_3569
		mov	dx, ss:[bx]
		inc	bx
		inc	bx
		mov	[bp+arg_0], bx
		push	ss
		pop	es
		call	sub_32F4
		mov	al, 3Ah	; ':'
		stosb

loc_3569::				; CODE XREF: __vprinter+24Bj
		push	ss
		pop	es
		pop	dx
		call	sub_32F4
		mov	byte ptr ss:[di], 0
		mov	[bp+var_6], 0
		and	[bp+var_2], 0FFFBh
		lea	cx, [bp+var_46]
		sub	di, cx
		xchg	cx, di
		mov	dx, [bp+var_A]
		cmp	dx, cx
		jg	loc_358B
		mov	dx, cx

loc_358B::				; CODE XREF: __vprinter+27Bj
		jmp	loc_362F
; ---------------------------------------------------------------------------

loc_358E::				; CODE XREF: __vprinter+D1j
					; DATA XREF: seg0000:off_379Fo
		mov	word ptr [bp+arg_2], si	; jumptable 000111FD case 16
		mov	[bp+var_5], dl
		mov	di, [bp+arg_0]
		mov	ax, ss:[di]
		add	[bp+arg_0], 2
		push	ss
		pop	es
		lea	di, [bp+var_45]
		xor	ah, ah
		mov	ss:[di], ax
		mov	cx, 1
		jmp	loc_3672
; ---------------------------------------------------------------------------
		assume es:seg2608

loc_35AE::				; CODE XREF: __vprinter+D1j
					; DATA XREF: seg0000:off_379Fo
		mov	word ptr [bp+arg_2], si	; jumptable 000111FD case 17
		mov	[bp+var_5], dl
		mov	di, [bp+arg_0]
		test	[bp+var_2], 20h
		jnz	loc_35CB
		mov	di, ss:[di]
		add	[bp+arg_0], 2
		push	ds
		pop	es
		or	di, di
		jmp	loc_35D6
; ---------------------------------------------------------------------------

loc_35CB::				; CODE XREF: __vprinter+2B0j
		les	di, ss:[di]
		add	[bp+arg_0], 4
		mov	ax, es
		or	ax, di

loc_35D6::				; CODE XREF: __vprinter+2BDj
		jnz	loc_35DD
		push	ds
		pop	es
		mov	di, offset aNull ; "(null)"

loc_35DD::				; CODE XREF: __vprinter:loc_35D6j
		call	sub_3326
		cmp	cx, [bp+var_A]
		jbe	loc_35E8
		mov	cx, [bp+var_A]

loc_35E8::				; CODE XREF: __vprinter+2D7j
					; init_game(void)+16p
		jmp	loc_3672
; ---------------------------------------------------------------------------

loc_35EB::				; CODE XREF: __vprinter+D1j
					; DATA XREF: seg0000:off_379Fo
		mov	word ptr [bp+arg_2], si	; jumptable 000111FD case 15
		mov	[bp+var_5], dl
		mov	di, [bp+arg_0]
		mov	cx, [bp+var_A]
		or	cx, cx
		jge	loc_35FE
		mov	cx, 6

loc_35FE::				; CODE XREF: __vprinter+2EDj
		push	ss
		push	di
		push	cx
		push	ss
		lea	bx, [bp+var_45]
		push	bx
		push	dx
		mov	ax, 1
		and	ax, [bp+var_2]
		push	ax
		mov	ax, [bp+var_2]
		test	ax, 100h
		jz	loc_361F
		mov	ax, 8
		add	[bp+arg_0], 0Ah
		jmp	loc_3626
; ---------------------------------------------------------------------------

loc_361F::				; CODE XREF: __vprinter+308j
		add	[bp+arg_0], 8
		mov	ax, 6

loc_3626::				; CODE XREF: __vprinter+311j
		push	ax
		call	__realcvt
		push	ss
		pop	es
		assume es:nothing
		lea	di, [bp+var_45]

loc_362F::				; CODE XREF: __vprinter+22Cj
					; __vprinter:loc_358Bj
		test	[bp+var_2], 8
		jz	loc_364E
		mov	dx, [bp+var_8]
		or	dx, dx
		jle	loc_364E

loc_363D::				; CODE XREF: __vprinter:loc_353Bj
		call	sub_3326
		cmp	byte ptr es:[di], 2Dh ;	'-'
		jnz	loc_3647
		dec	cx

loc_3647::				; CODE XREF: __vprinter+338j
		sub	dx, cx
		jle	loc_364E
		mov	[bp+var_E], dx

loc_364E::				; CODE XREF: __vprinter+328j
					; __vprinter+32Fj ...
		cmp	byte ptr es:[di], 2Dh ;	'-'
		jz	loc_365F
		mov	al, [bp+var_B]
		or	al, al
		jz	loc_366F
		dec	di
		mov	es:[di], al

loc_365F::				; CODE XREF: __vprinter+346j
		cmp	[bp+var_E], 0
		jle	loc_366F
		mov	cx, [bp+var_A]
		or	cx, cx
		jge	loc_366F
		dec	[bp+var_E]

loc_366F::				; CODE XREF: __vprinter+34Dj
					; __vprinter+357j ...
		call	sub_3326
		assume es:seg2608

loc_3672::				; CODE XREF: __vprinter+29Fj
					; __vprinter:loc_35E8j
		mov	si, di
		mov	di, [bp+var_4]
		mov	bx, [bp+var_8]
		mov	ax, 5
		and	ax, [bp+var_2]
		cmp	ax, 5
		jnz	loc_3698
		mov	ah, [bp+var_5]
		cmp	ah, 6Fh	; 'o'
		jnz	loc_369A
		cmp	[bp+var_E], 0
		jg	loc_3698
		mov	[bp+var_E], 1

loc_3698::				; CODE XREF: __vprinter+377j
					; __vprinter+385j
		jmp	loc_36B5
; ---------------------------------------------------------------------------

loc_369A::				; CODE XREF: __vprinter+37Fj
		cmp	ah, 78h	; 'x'
		jz	loc_36A4
		cmp	ah, 58h	; 'X'
		jnz	loc_36B5

loc_36A4::				; CODE XREF: __vprinter+391j
		or	[bp+var_2], 40h
		dec	bx
		dec	bx
		sub	[bp+var_E], 2
		jge	loc_36B5
		mov	[bp+var_E], 0

loc_36B5::				; CODE XREF: __vprinter:loc_3698j
					; __vprinter+396j ...
		add	cx, [bp+var_E]
		test	[bp+var_2], 2
		jnz	loc_36CB
		jmp	loc_36C7
; ---------------------------------------------------------------------------

loc_36C1::				; CODE XREF: __vprinter+3BDj
		mov	al, 20h	; ' '
		call	sub_3333
		dec	bx

loc_36C7::				; CODE XREF: __vprinter+3B3j
		cmp	bx, cx
		jg	loc_36C1

loc_36CB::				; CODE XREF: __vprinter+3B1j
		test	[bp+var_2], 40h
		jz	loc_36DD
		mov	al, 30h	; '0'
		call	sub_3333
		mov	al, [bp+var_5]
		call	sub_3333

loc_36DD::				; CODE XREF: __vprinter+3C4j
		mov	dx, [bp+var_E]
		or	dx, dx
		jle	loc_370B
		sub	cx, dx
		sub	bx, dx
		mov	al, es:[si]
		cmp	al, 2Dh	; '-'   ; CODE XREF: sub_23069+7Dp
		jz	loc_36F7
		cmp	al, 20h	; ' '
		jz	loc_36F7
		cmp	al, 2Bh	; '+'
		jnz	loc_36FE

loc_36F7::				; CODE XREF: __vprinter+3E1j
					; __vprinter+3E5j
		lods	byte ptr es:[si]
		call	sub_3333
		dec	cx
		dec	bx

loc_36FE::				; CODE XREF: __vprinter+3E9j
		xchg	cx, dx
		jcxz	loc_3709

loc_3702::				; CODE XREF: __vprinter+3FBj
		mov	al, 30h	; '0'
		call	sub_3333
		loop	loc_3702

loc_3709::				; CODE XREF: __vprinter+3F4j
		xchg	cx, dx

loc_370B::				; CODE XREF: __vprinter+3D6j
		jcxz	loc_371F

loc_370D::				; CODE XREF: sub_219F3+1Dp
					; sub_23069+82p
		sub	bx, cx

loc_370F::				; CODE XREF: __vprinter:loc_371Dj
		lods	byte ptr es:[si]
		mov	ss:[di], al
		inc	di
		dec	byte ptr [bp+var_14]
		jg	loc_371D
		call	sub_333C

loc_371D::				; CODE XREF: __vprinter+40Cj
		loop	loc_370F

loc_371F::				; CODE XREF: __vprinter:loc_370Bj
		or	bx, bx
		jle	loc_372C
		mov	cx, bx

loc_3725::				; CODE XREF: __vprinter+41Ej
		mov	al, 20h	; ' '
		call	sub_3333
		loop	loc_3725

loc_372C::				; CODE XREF: __vprinter+415j
					; sub_219F3+1Dp ...
		jmp	loc_337C
; ---------------------------------------------------------------------------

loc_372F::				; CODE XREF: __vprinter+D1j
					; DATA XREF: seg0000:off_379Fo
		mov	word ptr [bp+arg_2], si	; jumptable 000111FD case 18
		mov	di, [bp+arg_0]
		test	[bp+var_2], 20h
		jnz	loc_3747
		mov	di, ss:[di]
		add	[bp+arg_0], 2
		push	ds
		pop	es
		jmp	loc_374E
; ---------------------------------------------------------------------------

loc_3747::				; CODE XREF: __vprinter+42Ej
		les	di, ss:[di]
		assume es:nothing
		add	[bp+arg_0], 4

loc_374E::				; CODE XREF: __vprinter+439j
		mov	ax, 50h	; 'P'
		sub	al, byte ptr [bp+var_14]
		add	ax, [bp+var_12]
		mov	es:[di], ax
		test	[bp+var_2], 10h
		jz	loc_3768
		inc	di
		inc	di
		mov	word ptr es:[di], 0

loc_3768::				; CODE XREF: __vprinter+453j
		jmp	loc_3379
; ---------------------------------------------------------------------------

loc_376B::				; CODE XREF: __vprinter+CCj
					; __vprinter+D1j ...
		mov	si, [bp+var_10]	; jumptable 000111FD default case
		mov	es, word ptr [bp+arg_2+2]
		mov	di, [bp+var_4]
		mov	al, 25h	; '%'

loc_3776::				; CODE XREF: __vprinter+471j
		call	sub_3333
		lods	byte ptr es:[si]
		or	al, al
		jnz	loc_3776
		assume es:seg2608

loc_377F::				; CODE XREF: __vprinter:loc_3397j
		cmp	byte ptr [bp+var_14], 50h ; 'P'
		jge	loc_3788
		call	sub_333C

loc_3788::				; CODE XREF: __vprinter+477j
		pop	es
		cmp	[bp+var_16], 0
		jz	loc_3794
		mov	ax, 0FFFFh
		jmp	loc_3797
; ---------------------------------------------------------------------------

loc_3794::				; CODE XREF: __vprinter+481j
		mov	ax, [bp+var_12]

loc_3797::				; CODE XREF: __vprinter+486j
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn	0Ch
; END OF FUNCTION CHUNK	FOR __vprinter
; ---------------------------------------------------------------------------
off_379F	dw offset loc_33FB	; DATA XREF: __vprinter+D1r
		dw offset loc_33E5	; jump table for switch	statement
		dw offset loc_3430
		dw offset loc_33F0
		dw offset loc_345E
		dw offset loc_346B
		dw offset loc_34A9
		dw offset loc_34B0
		dw offset loc_34B5
		dw offset loc_3419
		dw offset loc_34DE
		dw offset loc_34BC
		dw offset loc_34C0
		dw offset loc_34C4
		dw offset loc_353E
		dw offset loc_35EB
		dw offset loc_358E
		dw offset loc_35AE
		dw offset loc_372F
		dw offset loc_376B
		dw offset loc_376B
		dw offset loc_376B
		dw offset loc_340B
		dw offset loc_3411

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__vptr		proc near		; CODE XREF: __cputn+8Fp _gettext+34p	...

arg_0		= word ptr  4
arg_2		= word ptr  6

		push	bp
		mov	bp, sp
		mov	al, byte_2B39E
		mov	ah, 0
		mov	dx, [bp+arg_0]
		dec	dx
		imul	dx
		push	ax
		mov	ax, word_2B3A1
		pop	dx
		add	ax, dx
		mov	dx, [bp+arg_2]
		dec	dx
		add	ax, dx
		shl	ax, 1
		mov	dx, word_2B3A3
		pop	bp
		retn	4
__vptr		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__vram		proc near		; CODE XREF: __cputn+9Dp
					; __screenio+23p

var_2		= word ptr -2
arg_0		= word ptr  4
arg_2		= dword	ptr  6
arg_6		= dword	ptr  0Ah

		push	bp
		mov	bp, sp
		sub	sp, 2
		push	si
		push	di
		mov	al, byte_2B3A0
		mov	ah, 0
		mov	[bp+var_2], ax
		push	ds
		mov	cx, [bp+arg_0]
		jcxz	loc_3864
		les	di, [bp+arg_6]
		assume es:nothing
		lds	si, [bp+arg_2]
		cld
		cmp	si, di
		jnb	loc_381F
		mov	ax, cx
		dec	ax
		shl	ax, 1
		add	si, ax
		add	di, ax
		std

loc_381F::				; CODE XREF: __vram+1Fj
		cmp	[bp+var_2], 0
		jnz	short loc_3829
		rep movsw
		jmp	short loc_3864
; ---------------------------------------------------------------------------

loc_3829::				; CODE XREF: __vram+2Fj
		mov	dx, 3DAh
		mov	ax, es
		mov	bx, ds
		cmp	ax, bx
		jz	short loc_3845

loc_3834::				; CODE XREF: __vram+4Dj
		cli

loc_3835::				; CODE XREF: __vram+44j
		in	al, dx		; Video	status bits:
					; 0: retrace.  1=display is in vert or horiz retrace.
					; 1: 1=light pen is triggered; 0=armed
					; 2: 1=light pen switch	is open; 0=closed
					; 3: 1=vertical	sync pulse is occurring.
		ror	al, 1
		jb	short loc_3835

loc_383A::				; CODE XREF: __vram+49j
		in	al, dx		; Video	status bits:
					; 0: retrace.  1=display is in vert or horiz retrace.
					; 1: 1=light pen is triggered; 0=armed
					; 2: 1=light pen switch	is open; 0=closed
					; 3: 1=vertical	sync pulse is occurring.
		ror	al, 1
		jnb	short loc_383A
		movsw
		sti
		loop	loc_3834
		jmp	short loc_3864
; ---------------------------------------------------------------------------

loc_3845::				; CODE XREF: __vram+3Ej __vram+6Ej
		cli

loc_3846::				; CODE XREF: __vram+55j
		in	al, dx		; Video	status bits:
					; 0: retrace.  1=display is in vert or horiz retrace.
					; 1: 1=light pen is triggered; 0=armed
					; 2: 1=light pen switch	is open; 0=closed
					; 3: 1=vertical	sync pulse is occurring.
		ror	al, 1
		jb	short loc_3846

loc_384B::				; CODE XREF: __vram+5Aj
		in	al, dx		; Video	status bits:
					; 0: retrace.  1=display is in vert or horiz retrace.
					; 1: 1=light pen is triggered; 0=armed
					; 2: 1=light pen switch	is open; 0=closed
					; 3: 1=vertical	sync pulse is occurring.
		ror	al, 1
		jnb	short loc_384B
		lodsw
		sti
		mov	bx, ax

loc_3854::				; CODE XREF: __vram+63j
		in	al, dx		; Video	status bits:
					; 0: retrace.  1=display is in vert or horiz retrace.
					; 1: 1=light pen is triggered; 0=armed
					; 2: 1=light pen switch	is open; 0=closed
					; 3: 1=vertical	sync pulse is occurring.
		ror	al, 1
		jb	short loc_3854

loc_3859::				; CODE XREF: __vram+68j
		in	al, dx		; Video	status bits:
					; 0: retrace.  1=display is in vert or horiz retrace.
					; 1: 1=light pen is triggered; 0=armed
					; 2: 1=light pen switch	is open; 0=closed
					; 3: 1=vertical	sync pulse is occurring.
		ror	al, 1
		jnb	short loc_3859
		mov	ax, bx
		stosw
		sti
		loop	loc_3845

loc_3864::				; CODE XREF: __vram+14j __vram+33j ...
		cld
		pop	ds
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn	0Ah
__vram		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; char *__cdecl	_stpcpy(char *dest, const char *src)
__stpcpy	proc far		; CODE XREF: __mkname+35p

dest		= dword	ptr  6
src		= dword	ptr  0Ah

		push	bp
		mov	bp, sp
		push	si
		push	word ptr [bp+src+2]
		push	word ptr [bp+src] ; s
		nop
		push	cs
		call	near ptr _strlen
		pop	cx
		pop	cx
		mov	si, ax
		inc	ax
		push	ax		; n
		push	word ptr [bp+src+2]
		push	word ptr [bp+src] ; src
		push	word ptr [bp+dest+2]
		push	word ptr [bp+dest] ; dest
		nop
		push	cs
		call	near ptr _memcpy
		add	sp, 0Ah
		mov	dx, word ptr [bp+dest+2]
		mov	ax, word ptr [bp+dest]
		add	ax, si
		pop	si
		pop	bp
		retf
__stpcpy	endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

; void clrscr(void)
_clrscr		proc far		; CODE XREF: init_game(void)+9P
		mov	al, 6
		push	ax
		mov	al, __video
		push	ax
		mov	al, byte_2B397
		push	ax
		mov	al, byte_2B398
		push	ax
		mov	al, byte_2B399
		push	ax
		mov	al, 0
		push	ax
		call	__scroll
_clrscr		endp ; sp-analysis failed

		mov	dl, __video
		mov	dh, byte_2B397
		mov	ah, 2
		mov	bh, 0
		call	__videoint
		retf

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void __cdecl textcolor(int newcolor)
_textcolor	proc far		; CODE XREF: print_form(uchar *,uchar)+50P

newcolor	= word ptr  6

		push	bp
		mov	bp, sp
		mov	al, byte_2B39A
		and	al, 70h
		mov	dl, byte ptr [bp+newcolor]
		and	dl, 8Fh
		or	al, dl
		mov	byte_2B39A, al
		pop	bp
		retf
_textcolor	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void __cdecl textbackground(int newcolor)
_textbackground	proc far		; CODE XREF: print_form(uchar *,uchar)+48P

newcolor	= word ptr  6

		push	bp
		mov	bp, sp
		mov	al, byte_2B39A
		and	al, 8Fh
		mov	dl, byte ptr [bp+newcolor]
		mov	cl, 4
		shl	dl, cl
		and	dl, 7Fh
		or	al, dl
		mov	byte_2B39A, al
		pop	bp

locret_38F8::				; CODE XREF: sub_219F3+1Dp
		retf
_textbackground	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void __cdecl textattr(int newattr)
_textattr	proc far

newattr		= word ptr  6

		push	bp
		mov	bp, sp
		mov	al, byte ptr [bp+newattr] ; CODE XREF: sub_2233A+6Ep
		mov	byte_2B39A, al
		pop	bp
		retf
_textattr	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

; void highvideo(void)
_highvideo	proc far
		or	byte_2B39A, 8
		retf
_highvideo	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

; void lowvideo(void)
_lowvideo	proc far
		and	byte_2B39A, 0F7h
		retf
_lowvideo	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

; void normvideo(void)
_normvideo	proc far
		mov	al, byte_2B39B
		mov	byte_2B39A, al
		retf
_normvideo	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================


; unsigned int coreleft(void)
_coreleft	proc far		; CODE XREF: init_game(void)+6EP
					; seg1a1e:00A4P
		nop
		push	cs
		call	near ptr _farcoreleft
		assume es:nothing
		retf
_coreleft	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__cputn		proc near		; CODE XREF: _cputs+1Dp _putch+12p
					; DATA XREF: ...

var_8		= word ptr -8
var_5		= byte ptr -5
var_4		= word ptr -4
var_2		= word ptr -2
arg_4		= word ptr  8
arg_6		= dword	ptr  0Ah

		push	bp
		mov	bp, sp
		sub	sp, 8
		push	si
		mov	si, [bp+arg_4]
		mov	[bp+var_5], 0
		call	__wherexy
		mov	ah, 0
		mov	[bp+var_2], ax
		call	__wherexy
		mov	cl, 8
		shr	ax, cl
		mov	ah, 0
		mov	[bp+var_4], ax
		jmp	loc_3A1E
; ---------------------------------------------------------------------------

loc_3942::				; CODE XREF: __cputn+108j
		les	bx, [bp+arg_6]
		assume es:nothing
		inc	word ptr [bp+arg_6]
		mov	al, es:[bx]
		mov	[bp+var_5], al
		mov	ah, 0
		sub	ax, 7
		mov	bx, ax
		cmp	bx, 6		; switch 7 cases
		ja	loc_3988	; jumptable 0001177C default case
		shl	bx, 1
		jmp	cs:off_3A41[bx]	; switch jump
; ---------------------------------------------------------------------------

loc_3961::				; CODE XREF: __cputn+3Fj
					; DATA XREF: seg0000:off_3A41o
		mov	ah, 0Eh		; jumptable 0001177C case 0
		mov	al, 7
		call	__videoint
		jmp	loc_39E0
; ---------------------------------------------------------------------------

loc_396A::				; CODE XREF: __cputn+3Fj
					; DATA XREF: seg0000:off_3A41o
		mov	al, __video	; jumptable 0001177C case 1
		mov	ah, 0
		cmp	ax, [bp+var_2]
		jge	loc_39E0
		dec	[bp+var_2]
		jmp	loc_39E0
; ---------------------------------------------------------------------------

loc_3979::				; CODE XREF: __cputn+3Fj
					; DATA XREF: seg0000:off_3A41o
		mov	al, __video	; jumptable 0001177C case 6
		mov	ah, 0
		mov	[bp+var_2], ax
		jmp	loc_39E0
; ---------------------------------------------------------------------------

loc_3983::				; CODE XREF: __cputn+3Fj
					; DATA XREF: seg0000:off_3A41o
		inc	[bp+var_4]	; jumptable 0001177C case 3
		jmp	loc_39E0
; ---------------------------------------------------------------------------

loc_3988::				; CODE XREF: __cputn+3Bj __cputn+3Fj
					; DATA XREF: ...
		mov	al, byte_2B39F	; jumptable 0001177C default case
		mov	ah, 0
		or	ax, ax
		jnz	loc_39BF
		cmp	_directvideo, 0
		jz	loc_39BF
		mov	ah, byte_2B39A
		mov	al, [bp+var_5]
		mov	[bp+var_8], ax
		mov	ax, [bp+var_2]
		inc	ax
		push	ax
		mov	ax, [bp+var_4]
		inc	ax
		push	ax
		call	__vptr
		push	dx
		push	ax
		push	ss
		lea	ax, [bp+var_8]
		push	ax
		mov	ax, 1
		push	ax
		call	__vram
		jmp	loc_39DD
; ---------------------------------------------------------------------------

loc_39BF::				; CODE XREF: __cputn+72j __cputn+79j
		mov	dl, byte ptr [bp+var_2]
		mov	dh, byte ptr [bp+var_4]
		mov	ah, 2
		mov	bh, 0
		call	__videoint
		mov	bl, byte_2B39A
		mov	al, [bp+var_5]
		mov	ah, 9
		mov	bh, 0
		mov	cx, 1
		call	__videoint

loc_39DD::				; CODE XREF: __cputn+A0j
		inc	[bp+var_2]

loc_39E0::				; CODE XREF: __cputn+4Bj __cputn+55j ...
		mov	al, byte_2B398
		mov	ah, 0
		cmp	ax, [bp+var_2]
		jge	loc_39F8
		mov	al, __video
		mov	ah, 0
		mov	[bp+var_2], ax
		mov	ax, __wscroll
		add	[bp+var_4], ax

loc_39F8::				; CODE XREF: __cputn+CBj
		mov	al, byte_2B399
		mov	ah, 0
		cmp	ax, [bp+var_4]
		jge	loc_3A1E
		mov	al, 6
		push	ax
		mov	al, __video
		push	ax
		mov	al, byte_2B397	; CODE XREF: sub_22228+2p
		push	ax
		mov	al, byte_2B398
		push	ax
		mov	al, byte_2B399
		push	ax
		mov	al, 1
		push	ax
		call	__scroll
		dec	[bp+var_4]

loc_3A1E::				; CODE XREF: __cputn+22j __cputn+E3j
		mov	ax, si
		dec	si
		or	ax, ax
		jz	loc_3A28
		jmp	loc_3942
; ---------------------------------------------------------------------------

loc_3A28::				; CODE XREF: __cputn+106j
		mov	dl, byte ptr [bp+var_2]
		mov	dh, byte ptr [bp+var_4]
		mov	ah, 2
		mov	bh, 0
		call	__videoint
		mov	al, [bp+var_5]
		mov	ah, 0
		pop	si
		mov	sp, bp
		pop	bp
		retn	0Ah
__cputn		endp

; ---------------------------------------------------------------------------
off_3A41	dw offset loc_3961	; DATA XREF: __cputn+3Fr
		dw offset loc_396A	; jump table for switch	statement
		dw offset loc_3988
		dw offset loc_3983
		dw offset loc_3988
		dw offset loc_3988
		dw offset loc_3979

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int cprintf(const char *format, ...)
_cprintf	proc far

format____	= dword	ptr  6
arg_4		= byte ptr  0Ah

		push	bp
		mov	bp, sp
		mov	ax, offset __cputn
		push	ax
		xor	ax, ax
		xor	dx, dx
		push	ax
		push	dx
		push	word ptr [bp+format____+2]
		push	word ptr [bp+format____]
		lea	ax, [bp+arg_4]
		push	ax
		call	__vprinter
		pop	bp
		retf
_cprintf	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl cputs(const char *str)
_cputs		proc far		; CODE XREF: print_form(uchar *,uchar)+129P

str_		= dword	ptr  6

		push	bp
		mov	bp, sp
		push	word ptr [bp+str_+2]
		push	word ptr [bp+str_]
		push	word ptr [bp+str_+2]
		push	word ptr [bp+str_] ; s
		nop
		push	cs
		call	near ptr _strlen
		pop	cx
		pop	cx
		push	ax
		xor	ax, ax
		xor	dx, dx
		push	ax
		push	dx
		call	__cputn
		pop	bp
		retf
_cputs		endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

sub_3A8D	proc near		; CODE XREF: __crtinit+78p

arg_0		= dword	ptr  4
arg_4		= dword	ptr  8

		push	bp
		mov	bp, sp
		jmp	loc_3AAA
; ---------------------------------------------------------------------------

loc_3A92::				; CODE XREF: sub_3A8D+24j
		les	bx, [bp+arg_0]
		inc	word ptr [bp+arg_0]
		mov	al, es:[bx]
		les	bx, [bp+arg_4]
		assume es:nothing
		inc	word ptr [bp+arg_4]

loc_3AA1::				; CODE XREF: __setupio+77p
					; __setupio+B3p
		cmp	al, es:[bx]
		jz	loc_3AAA
		xor	ax, ax
		jmp	loc_3AB6
; ---------------------------------------------------------------------------
		assume es:seg2608

loc_3AAA::				; CODE XREF: sub_3A8D+3j sub_3A8D+17j
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx], 0
		jnz	loc_3A92
		mov	ax, 1
		assume es:nothing

loc_3AB6::				; CODE XREF: sub_3A8D+1Bj
		pop	bp
		retn	8
sub_3A8D	endp

		assume es:seg2608, ds:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_3ABA	proc near		; CODE XREF: __videoint+77p
					; __crtinit+7Fp
		mov	ah, 12h
		mov	bl, 10h
		call	__videoint
		mov	al, bl
		add	al, 0F0h ; 'ð'
		mov	ah, 0
		retn
sub_3ABA	endp

		assume ds:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

__videoint	proc near		; CODE XREF: seg0000:16E7p __cputn+48p ...
		push	bp
		push	ds
		push	cx
		mov	cx, 40h	; '@'
		mov	ds, cx
		assume ds:nothing
		pop	cx
		cmp	ah, 0
		jz	loc_3ADF
		cmp	ah, 0Fh
		jz	loc_3B34

loc_3ADB::				; CODE XREF: __videoint+36j
					; __videoint+3Aj
		int	10h		; - VIDEO -
		jmp	loc_3B50
; ---------------------------------------------------------------------------

loc_3ADF::				; CODE XREF: __videoint+Cj
		cmp	al, 2
		jz	loc_3AE7
		cmp	al, 3
		jnz	loc_3B00

loc_3AE7::				; CODE XREF: __videoint+19j
		push	ax
		mov	ax, 1A00h
		int	10h		; - VIDEO - DISPLAY COMBINATION	(PS,VGA/MCGA): read display combination	code
		cmp	al, 1Ah
		jz	loc_3AF6
		and	byte ptr ds:87h, 0FEh

loc_3AF6::				; CODE XREF: __videoint+27j
		mov	ah, 1
		mov	cx, 607h
		int	10h		; - VIDEO - SET	CURSOR CHARACTERISTICS
					; CH bits 0-4 =	start line for cursor in character cell
					; bits 5-6 = blink attribute
					; CL bits 0-4 =	end line for cursor in character cell
		pop	ax
		jmp	loc_3ADB
; ---------------------------------------------------------------------------

loc_3B00::				; CODE XREF: __videoint+1Dj
		cmp	al, 40h	; '@'
		jnz	loc_3ADB
		mov	bl, 10h
		mov	ah, 12h
		int	10h		; - VIDEO - ALTERNATE FUNCTION SELECT (PS, EGA,	VGA, MCGA) - GET EGA INFO
					; Return: BH = 00h color mode in effect	CH = feature bits, CL =	switch settings
		cmp	bl, 10h
		jz	loc_3B50
		mov	ax, 1112h
		xor	bl, bl
		int	10h		; - VIDEO - TEXT-MODE CHARACTER	GENERATOR FUNCTIONS (PS, EGA, VGA)
					; AL = 00h, 10h: load user-specified patterns
					; AL = 01h, 11h: load ROM monochrome patterns (8 by 14)
					; AL = 02h, 12h: load ROM 8 by 8 double-dot patterns
					; AL = 03h: set	block specifier
		mov	ax, 1200h
		mov	bl, 20h	; ' '
		int	10h		; - VIDEO - ALTERNATE FUNCTION SELECT (PS,EGA,VGA,MCGA)	- ALTERNATE PRTSC
					; select alternate print screen	routine
		mov	ax, 1A00h
		int	10h		; - VIDEO - DISPLAY COMBINATION	(PS,VGA/MCGA): read display combination	code
		cmp	al, 1Ah
		jz	loc_3B50
		or	byte ptr ds:87h, 1
		mov	ah, 1
		mov	cx, 600h
		int	10h		; - VIDEO - SET	CURSOR CHARACTERISTICS
					; CH bits 0-4 =	start line for cursor in character cell
					; bits 5-6 = blink attribute
					; CL bits 0-4 =	end line for cursor in character cell
		jmp	loc_3B50
; ---------------------------------------------------------------------------

loc_3B34::				; CODE XREF: __videoint+11j
		int	10h		; - VIDEO -
		cmp	al, 2
		jz	loc_3B3E
		cmp	al, 3
		jnz	loc_3B50

loc_3B3E::				; CODE XREF: __videoint+70j
		push	ax
		call	sub_3ABA
		or	al, al
		pop	ax
		jz	loc_3B50
		cmp	byte ptr ds:84h, 18h
		jz	loc_3B50
		mov	al, 40h	; '@'

loc_3B50::				; CODE XREF: __videoint+15j
					; __videoint+45j ...
		pop	ds
		pop	bp
		retn
__videoint	endp

		assume ds:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

__c0crtinit	proc near		; DATA XREF: seg2608:348Ao
		mov	ah, 0Fh
		call	__videoint
		push	ax
		call	__crtinit
		assume es:nothing
		pop	cx
		mov	ah, 8
		mov	bh, 0
		call	__videoint
		and	ah, 7Fh
		mov	byte_2B39B, ah
		mov	byte_2B39A, ah
		retn
__c0crtinit	endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__crtinit	proc near		; CODE XREF: __c0crtinit+6p

arg_0		= byte ptr  4

		push	bp
		mov	bp, sp
		mov	al, [bp+arg_0]
		mov	byte_2B39C, al
		mov	ah, 0Fh
		call	__videoint
		mov	byte_2B39E, ah
		cmp	al, byte_2B39C
		jz	loc_3B9C
		mov	al, byte_2B39C
		mov	ah, 0
		call	__videoint
		mov	ah, 0Fh
		call	__videoint
		mov	byte_2B39C, al
		mov	byte_2B39E, ah

loc_3B9C::				; CODE XREF: __crtinit+16j
		cmp	byte_2B39C, 3
		jbe	loc_3BB6
		cmp	byte_2B39C, 40h	; '@'
		jnb	loc_3BB6
		cmp	byte_2B39C, 7
		jz	loc_3BB6
		mov	ax, 1
		jmp	loc_3BB8
; ---------------------------------------------------------------------------

loc_3BB6::				; CODE XREF: __crtinit+31j
					; __crtinit+38j ...
		xor	ax, ax

loc_3BB8::				; CODE XREF: __crtinit+44j
		mov	byte_2B39F, al
		cmp	byte_2B39C, 40h	; '@'
		jz	loc_3BC6
		mov	al, 19h
		jmp	loc_3BD1
; ---------------------------------------------------------------------------

loc_3BC6::				; CODE XREF: __crtinit+50j
		mov	ax, 40h	; '@'
		mov	es, ax
		assume es:nothing
		mov	al, es:84h
		inc	al
		assume es:seg2608

loc_3BD1::				; CODE XREF: __crtinit+54j
		mov	byte_2B39D, al
		cmp	byte_2B39C, 7
		jz	loc_3BFB
		mov	ax, 0F000h
		mov	dx, 0FFEAh
		push	ax
		push	dx
		push	ds
		mov	ax, offset aCompaq ; "COMPAQ"
		push	ax
		call	sub_3A8D
		assume es:nothing
		or	ax, ax
		jnz	loc_3BFB
		call	sub_3ABA
		or	ax, ax
		jnz	loc_3BFB
		mov	ax, 1
		jmp	loc_3BFD
; ---------------------------------------------------------------------------

loc_3BFB::				; CODE XREF: __crtinit+69j
					; __crtinit+7Dj ...
		xor	ax, ax

loc_3BFD::				; CODE XREF: __crtinit+89j
					; parse_options(int,uchar **)+31p ...
		mov	byte_2B3A0, al
		cmp	byte_2B39C, 7
		jnz	loc_3C0C
		mov	ax, 0B000h
		jmp	loc_3C0F
; ---------------------------------------------------------------------------

loc_3C0C::				; CODE XREF: __crtinit+95j
		mov	ax, 0B800h

loc_3C0F::				; CODE XREF: __crtinit+9Aj
		mov	word_2B3A3, ax
		mov	word_2B3A1, 0
		mov	al, 0
		mov	byte_2B397, al
		mov	__video, al
		mov	al, byte_2B39E
		add	al, 0FFh
		mov	byte_2B398, al
		mov	al, byte_2B39D
		add	al, 0FFh
		mov	byte_2B399, al
		pop	bp
		retn
__crtinit	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function noreturn

sub_3C32	proc near		; DATA XREF: seg2608:3474o
		mov	dx, offset aPrint ; "print"
		jmp	loc_3C3A
; ---------------------------------------------------------------------------

loc_3C37::				; DATA XREF: seg2608:__scantodvectoro
					; seg2608:3478o ...
		mov	dx, offset aScan ; " scan"

loc_3C3A::				; CODE XREF: sub_3C32+3j
		mov	cx, 5
		mov	ah, 40h	; '@'
		mov	bx, 2
		int	21h		; DOS -	2+ - WRITE TO FILE WITH	HANDLE
					; BX = file handle, CX = number	of bytes to write, DS:DX -> buffer
		mov	cx, 39
		mov	dx, offset aFFloatingPoint ; "f	: floating point formats not linked\r"...
		mov	ah, 40h
		int	21h		; DOS -	2+ - WRITE TO FILE WITH	HANDLE
					; BX = file handle, CX = number	of bytes to write, DS:DX -> buffer
		jmp	_abort
sub_3C32	endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

nullsub_2	proc near		; CODE XREF: sub_3C52+6p sub_3C52+Dp
		retn
nullsub_2	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_3C52	proc near		; CODE XREF: seg0000:loc_3C6Fp
					; _delay+7p ...
		pushf
		cli
		mov	al, 0
		out	43h, al		; Timer	8253-5 (AT: 8254.2).
		call	nullsub_2
		in	al, 40h		; Timer	8253-5 (AT: 8254.2).
		mov	bl, al
		call	nullsub_2
		in	al, 40h		; Timer	8253-5 (AT: 8254.2).
		mov	bh, al
		not	bx
		popf
		mov	ax, bx
		retn
sub_3C52	endp

; ---------------------------------------------------------------------------

loc_3C6C::				; DATA XREF: seg2608:3490o
		push	si
		xor	si, si

loc_3C6F::				; CODE XREF: seg0000:1AA9j
		call	sub_3C52
		test	ax, 1
		jnz	loc_3C85
		mov	word_2B3E2, 0
		mov	word_2B3E0, 4A9h
		jmp	loc_3C8B
; ---------------------------------------------------------------------------

loc_3C85::				; CODE XREF: seg0000:1A95j
		inc	si
		cmp	si, 64h	; 'd'
		jl	loc_3C6F

loc_3C8B::				; CODE XREF: seg0000:1AA3j
		pop	si
		retf

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void __cdecl delay(unsigned int milliseconds)
_delay		proc far		; CODE XREF: beep(void)+EP

var_4		= word ptr -4
var_2		= word ptr -2
milliseconds	= word ptr  6

		push	bp
		mov	bp, sp
		sub	sp, 4
		push	si
		call	sub_3C52
		mov	si, ax
		xor	dx, dx
		mov	bx, [bp+milliseconds]
		xor	cx, cx
		push	ax
		push	dx
		mov	dx, word_2B3E2
		mov	ax, word_2B3E0
		call	n_lxmul@
		pop	bx
		pop	cx
		add	cx, ax
		adc	bx, dx
		mov	[bp+var_2], bx
		mov	[bp+var_4], cx
		jmp	loc_3CD6
; ---------------------------------------------------------------------------

loc_3CBA::				; CODE XREF: _delay+53j _delay+5Aj
		cmp	bx, si
		jnb	loc_3CD4
		cmp	[bp+var_2], 1
		ja	loc_3CCC
		jb	loc_3CE9
		cmp	[bp+var_4], 0
		jb	loc_3CE9

loc_3CCC::				; CODE XREF: _delay+35j
		sub	[bp+var_4], 0
		sbb	[bp+var_2], 1

loc_3CD4::				; CODE XREF: _delay+2Fj
		mov	si, bx

loc_3CD6::				; CODE XREF: _delay+2Bj
		call	sub_3C52
		mov	bx, ax
		xor	dx, dx
		cmp	dx, [bp+var_2]
		jb	loc_3CBA
		jnz	loc_3CE9
		cmp	ax, [bp+var_4]
		jb	loc_3CBA

loc_3CE9::				; CODE XREF: _delay+37j _delay+3Dj ...
		pop	si
		mov	sp, bp
		pop	bp
		retf
_delay		endp

; ---------------------------------------------------------------------------
___first	dw 0			; DATA XREF: sub_3CFAr	sub_3CFA+1Dr ...
___last		dw 0			; DATA XREF: sub_3CFA+14w sub_3CFA+27w ...
___rover	dw 0			; DATA XREF: sub_3CFA+4Cw sub_3DCE+19w ...
word_3CF4	dw 0			; DATA XREF: sub_3CFA+32r
					; sub_3CFA:loc_3D4Dr ...
word_3CF6	dw 0			; DATA XREF: sub_3FBF+1r _realloc+1Aw
; unsigned __int32 nbytes
nbytes		dw 0			; DATA XREF: sub_3FBF+7r _realloc+1Fw
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_3CFA	proc near		; CODE XREF: _farfree+18p
		cmp	dx, cs:___first
		jz	loc_3D38
		mov	ds, dx
		assume ds:nothing
		mov	ds, word ptr ds:2
		assume ds:nothing
		cmp	word ptr ds:2, 0
		jz	loc_3D15
		mov	cs:___last, ds
		jmp	loc_3D4D
; ---------------------------------------------------------------------------
		assume es:nothing, ds:nothing

loc_3D15::				; CODE XREF: sub_3CFA+12j
		mov	ax, ds
		cmp	ax, cs:___first
		jz	loc_3D33
		mov	ax, ds:8
		mov	cs:___last, ax
		push	ds
		xor	ax, ax
		push	ax
		call	sub_3DCE
		mov	ds, cs:word_3CF4
		assume ds:seg2608
		jmp	loc_3D56
; ---------------------------------------------------------------------------

loc_3D33::				; CODE XREF: sub_3CFA+22j
		mov	dx, cs:___first

loc_3D38::				; CODE XREF: sub_3CFA+5j
		mov	cs:___first, 0
		mov	cs:___last, 0
		mov	cs:___rover, 0
		assume es:nothing, ds:nothing

loc_3D4D::				; CODE XREF: sub_3CFA+19j
		mov	ds, cs:word_3CF4
		assume ds:seg2608
		push	dx
		xor	ax, ax
		push	ax

loc_3D56::				; CODE XREF: sub_3CFA+37j
		call	__brk
		add	sp, 4
		retn
sub_3CFA	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_3D5D	proc near		; CODE XREF: _farfree:loc_3E4Bp
		mov	ds, dx
		assume ds:nothing
		push	ds
		mov	es, word ptr ds:2
		assume es:nothing
		mov	word ptr ds:2, 0
		mov	word ptr ds:8, es
		cmp	dx, cs:___first
		jz	loc_3DA3
		cmp	word ptr es:2, 0
		jnz	loc_3DA3
		assume es:nothing, ds:nothing
		mov	ax, ds:0
		pop	bx
		push	es
		add	es:0, ax
		mov	cx, es
		add	dx, ax
		mov	es, dx
		assume es:nothing
		cmp	word ptr es:2, 0 ; CODE	XREF: __fputn+1EBp
		jnz	loc_3D9C
		assume es:nothing, ds:nothing
		mov	es:8, cx
		jmp	loc_3DA6
; ---------------------------------------------------------------------------
		assume es:nothing, ds:nothing

loc_3D9C::				; CODE XREF: sub_3D5D+36j
		mov	es:2, cx
		jmp	loc_3DA6
; ---------------------------------------------------------------------------
		assume es:nothing, ds:nothing

loc_3DA3::				; CODE XREF: sub_3D5D+16j sub_3D5D+1Ej
		call	sub_3DF7

loc_3DA6::				; CODE XREF: sub_3D5D+3Dj sub_3D5D+44j
		pop	es
		assume es:nothing
		mov	ax, es
		add	ax, es:0
		mov	ds, ax
		assume ds:nothing
		cmp	word ptr ds:2, 0
		jz	loc_3DB8
		retn
; ---------------------------------------------------------------------------
		assume es:nothing, ds:nothing

loc_3DB8::				; CODE XREF: sub_3D5D+58j
		mov	ax, ds:0
		add	es:0, ax
		mov	ax, es
		mov	bx, ds
		add	bx, ds:0
		mov	es, bx
		assume es:nothing
		mov	es:2, ax
sub_3D5D	endp ; sp-analysis failed

		assume es:nothing, ds:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_3DCE	proc near		; CODE XREF: sub_3CFA+2Fp
					; _farmalloc+66p
		mov	bx, ds
		cmp	bx, ds:6
		jz	loc_3DEF
		assume es:nothing, ds:nothing
		mov	es, word ptr ds:6
		assume es:nothing
		mov	ds, word ptr ds:4
		assume ds:nothing
		mov	word ptr ds:6, es
		mov	word ptr es:4, ds
		mov	cs:___rover, ds
		mov	ds, bx
		assume ds:nothing
		retn
; ---------------------------------------------------------------------------
		assume es:nothing, ds:nothing

loc_3DEF::				; CODE XREF: sub_3DCE+6j
		mov	cs:___rover, 0
		retn
sub_3DCE	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_3DF7	proc near		; CODE XREF: sub_3D5D:loc_3DA3p
		mov	ax, cs:___rover
		or	ax, ax
		jz	loc_3E20
		assume es:nothing, ds:nothing
		mov	bx, ss
		pushf
		cli
		mov	ss, ax
		mov	es, word ptr ss:6
		assume es:nothing
		mov	word ptr ss:6, ds
		mov	word ptr ds:4, ss
		mov	ss, bx
		popf
		mov	word ptr es:4, ds
		mov	word ptr ds:6, es
		retn
; ---------------------------------------------------------------------------
		assume es:nothing, ds:nothing

loc_3E20::				; CODE XREF: sub_3DF7+6j
		mov	cs:___rover, ds
		mov	word ptr ds:4, ds
		mov	word ptr ds:6, ds
		retn
sub_3DF7	endp

		assume es:nothing, ds:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void __cdecl farfree(void far	*block)
_farfree	proc far		; CODE XREF: operator delete(void *)+Bp
					; sub_3FBF+71p	...

arg_2		= word ptr  8

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	cs:word_3CF4, ds
		mov	dx, [bp+arg_2]
		or	dx, dx
		jz	loc_3E4E
		cmp	dx, cs:___last
		jnz	loc_3E4B
		call	sub_3CFA
		jmp	loc_3E4E
; ---------------------------------------------------------------------------
		assume es:nothing

loc_3E4B::				; CODE XREF: _farfree+16j
		call	sub_3D5D
		assume es:nothing

loc_3E4E::				; CODE XREF: _farfree+Fj _farfree+1Bj
		mov	ds, cs:word_3CF4
		pop	di
		pop	si
		pop	bp
		retf
_farfree	endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_3E57	proc near		; CODE XREF: _farmalloc:loc_3F97p
		push	ax
		mov	ds, cs:word_3CF4
		xor	ax, ax
		push	ax
		push	ax
		call	__sbrk
		assume es:nothing
		add	sp, 4
		and	ax, 0Fh
		jz	loc_3E80
		mov	dx, 10h
		sub	dx, ax
		xor	ax, ax
		mov	ds, cs:word_3CF4
		push	ax
		push	dx
		call	__sbrk
		add	sp, 4

loc_3E80::				; CODE XREF: sub_3E57+13j
		pop	ax
		push	ax
		xor	bx, bx

loc_3E84::				; CODE XREF: sub_219F3+1Dp
		mov	bl, ah
		mov	cl, 4
		shr	bx, cl
		shl	ax, cl
		mov	ds, cs:word_3CF4
		push	bx
		push	ax
		call	__sbrk
		add	sp, 4
		pop	bx
		cmp	ax, 0FFFFh
		jz	loc_3EB7
		mov	cs:___first, dx
		mov	cs:___last, dx
		mov	ds, dx
		assume ds:nothing
		mov	ds:0, bx
		mov	ds:2, dx
		mov	ax, 4
		retn
; ---------------------------------------------------------------------------

loc_3EB7::				; CODE XREF: sub_3E57+46j
		xor	ax, ax
		cwd
		retn
sub_3E57	endp

		assume es:seg2608, ds:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_3EBB	proc near		; CODE XREF: _farmalloc:loc_3F92p
		push	ax
		xor	bx, bx
		mov	bl, ah
		mov	cl, 4
		shr	bx, cl
		shl	ax, cl
		mov	ds, cs:word_3CF4
		push	bx
		push	ax
		call	__sbrk
		assume es:nothing
		add	sp, 4
		pop	bx
		cmp	ax, 0FFFFh
		jz	loc_3F11
		and	ax, 0Fh
		jnz	loc_3EF6

loc_3EDE::				; CODE XREF: sub_3EBB+54j
					; ___write+12Ep
		mov	cx, cs:___last
		mov	cs:___last, dx
		mov	ds, dx
		assume ds:nothing
		mov	ds:0, bx
		mov	ds:2, cx
		mov	ax, 4
		retn
; ---------------------------------------------------------------------------

loc_3EF6::				; CODE XREF: sub_3EBB+21j
		push	bx
		push	dx
		neg	ax
		add	ax, 10h
		xor	bx, bx
		push	bx
		push	ax
		call	__sbrk
		add	sp, 4
		pop	dx
		pop	bx
		cmp	ax, 0FFFFh
		jz	loc_3F11
		inc	dx
		jmp	loc_3EDE
; ---------------------------------------------------------------------------

loc_3F11::				; CODE XREF: sub_3EBB+1Cj sub_3EBB+51j
		xor	ax, ax
		cwd
		retn
sub_3EBB	endp

		assume es:nothing, ds:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_3F15	proc near		; CODE XREF: _farmalloc:loc_3F9Cp
		mov	bx, dx
		sub	ds:0, ax
		add	dx, ds:0
		mov	ds, dx
		assume ds:nothing
		mov	ds:0, ax
		mov	ds:2, bx
		mov	bx, dx
		add	bx, ds:0
		mov	ds, bx
		assume ds:nothing
		mov	ds:2, dx
		mov	ax, 4
		retn
sub_3F15	endp

		assume es:seg2608, ds:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void *__cdecl	malloc(size_t size)
_malloc		proc far		; CODE XREF: operator new(uint)+20p
					; _setvbuf+D2p	...

size_		= word ptr  6

		push	bp
		mov	bp, sp
		xor	dx, dx
		mov	ax, [bp+size_]
		jmp	loc_3F4B
_malloc		endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void far *__cdecl farmalloc(unsigned __int32 nbytes)
_farmalloc	proc far		; CODE XREF: sub_3FBF+Ep _realloc+64p	...

nbytes_		= dword	ptr  6

		push	bp
		mov	bp, sp
		mov	dx, word ptr [bp+nbytes_+2]
		mov	ax, word ptr [bp+nbytes_]
		assume es:seg2608

loc_3F4B::				; CODE XREF: _malloc+8j
		mov	cx, ax
		or	cx, dx
		push	si
		push	di
		mov	cs:word_3CF4, ds
		jz	loc_3FB6
		add	ax, 13h
		adc	dx, 0
		jb	loc_3FA1
		test	dx, 0FFF0h
		jnz	loc_3FA1
		mov	cl, 4
		shr	ax, cl
		shl	dx, cl
		or	ah, dl
		mov	dx, cs:___first
		or	dx, dx
		jz	loc_3F97
		mov	dx, cs:___rover
		or	dx, dx
		jz	loc_3F92
		assume es:nothing
		mov	bx, dx

loc_3F82::				; CODE XREF: _farmalloc+4Ej
		mov	ds, dx
		assume ds:nothing
		cmp	ds:0, ax
		jnb	loc_3FA6
		assume es:nothing
		mov	dx, ds:6
		cmp	dx, bx
		jnz	loc_3F82
		assume es:seg2608, ds:seg2608

loc_3F92::				; CODE XREF: _farmalloc+3Cj
		call	sub_3EBB
		assume es:nothing, ds:nothing
		jmp	loc_3FB6
; ---------------------------------------------------------------------------
		assume es:seg2608, ds:seg2608

loc_3F97::				; CODE XREF: _farmalloc+33j
		call	sub_3E57
		assume es:nothing, ds:nothing
		jmp	loc_3FB6
; ---------------------------------------------------------------------------
		assume es:nothing, ds:nothing

loc_3F9C::				; CODE XREF: _farmalloc:loc_3FA6j
		call	sub_3F15
		assume ds:nothing
		jmp	loc_3FB6
; ---------------------------------------------------------------------------

loc_3FA1::				; CODE XREF: _farmalloc+1Cj
					; _farmalloc+22j
		xor	ax, ax
		cwd
		jmp	loc_3FB6
; ---------------------------------------------------------------------------
		assume ds:nothing

loc_3FA6::				; CODE XREF: _farmalloc+46j
		ja	loc_3F9C
		assume es:nothing, ds:nothing
		call	sub_3DCE
		assume es:nothing
		mov	bx, ds:8
		mov	ds:2, bx
		mov	ax, offset word_28264
		assume es:nothing, ds:nothing

loc_3FB6::				; CODE XREF: _farmalloc+14j
					; _farmalloc+53j ...
		mov	ds, cs:word_3CF4
		assume ds:seg2608
		pop	di
		pop	si
		pop	bp
		retf
_farmalloc	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_3FBF	proc near		; CODE XREF: _realloc:loc_40FBp
		push	bx
		mov	si, cs:word_3CF6
		push	si
		mov	si, cs:nbytes
		push	si		; nbytes
		push	cs
		call	near ptr _farmalloc
		add	sp, 4
		or	dx, dx
		jnz	loc_3FD9
		pop	bx
		retn
; ---------------------------------------------------------------------------

loc_3FD9::				; CODE XREF: sub_3FBF+16j
		pop	ds
		mov	es, dx
		assume es:nothing
		push	es
		push	ds
		push	bx		; block
		mov	dx, dataseg@
		cld
		dec	dx
		mov	di, 4
		mov	si, di
		mov	cx, 6
		rep movsw
		or	dx, dx
		jz	loc_402A
		mov	ax, es
		inc	ax
		mov	es, ax
		assume es:nothing
		mov	ax, ds
		inc	ax
		mov	ds, ax
		assume ds:nothing

loc_3FFD::				; CODE XREF: sub_3FBF+69j
		xor	di, di
		mov	si, di
		mov	cx, dx
		cmp	cx, 1000h
		jbe	loc_400C
		mov	cx, 1000h

loc_400C::				; CODE XREF: sub_3FBF+48j
		shl	cx, 1
		shl	cx, 1
		shl	cx, 1
		rep movsw
		sub	dx, 1000h
		jbe	loc_402A
		mov	ax, es
		add	ax, 1000h
		mov	es, ax
		assume es:nothing
		mov	ax, ds
		add	ax, 1000h
		mov	ds, ax
		assume ds:nothing
		jmp	loc_3FFD
; ---------------------------------------------------------------------------

loc_402A::				; CODE XREF: sub_3FBF+32j sub_3FBF+59j
		mov	ds, cs:word_3CF4
		assume ds:seg2608
		push	cs
		call	near ptr _farfree
		add	sp, 4
		pop	dx
		mov	ax, 4
		retn
sub_3FBF	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

; int __fastcall sub_403B(void far *block)
sub_403B	proc near		; CODE XREF: _realloc:loc_40F6p
		cmp	bx, cs:___last
		jz	loc_4087
		mov	di, bx
		add	di, ax
		mov	es, di
		assume es:nothing
		mov	si, cx
		sub	si, ax
		mov	es:0, si
		mov	es:2, bx
		push	es
		push	ax		; block
		mov	es, bx
		mov	es:0, ax
		mov	dx, bx
		add	dx, cx
		mov	es, dx
		cmp	word ptr es:2, 0
		jz	loc_4073
		mov	es:2, di
		jmp	loc_4078
; ---------------------------------------------------------------------------

loc_4073::				; CODE XREF: sub_403B+2Fj
		mov	es:8, di

loc_4078::				; CODE XREF: sub_403B+36j
		mov	si, bx
		push	cs
		call	near ptr _farfree
		add	sp, 4
		mov	dx, si
		mov	ax, 4
		retn
; ---------------------------------------------------------------------------

loc_4087::				; CODE XREF: sub_403B+5j
		push	bx
		mov	es, bx
		mov	es:0, ax
		add	bx, ax
		push	bx
		xor	ax, ax
		push	ax

loc_4094::				; CODE XREF: seg1c75:loc_22A87p
		call	__brk
		add	sp, 4
		pop	dx
		mov	ax, 4
		retn
sub_403B	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void *__cdecl	realloc(void *block, size_t size)
_realloc	proc far

arg_2		= word ptr  8
size_		= word ptr  0Ah
arg_6		= word ptr  0Ch

		push	bp
		mov	bp, sp
		xor	dx, dx
		jmp	loc_40AC
; ---------------------------------------------------------------------------

; void far *__cdecl farrealloc(void far	*oldblock, unsigned __int32 nbytes)
_farrealloc:
		push	bp
		mov	bp, sp
		mov	dx, [bp+arg_6]

loc_40AC::				; CODE XREF: _realloc+5j
		mov	ax, [bp+size_]
		mov	bx, [bp+arg_2]
		push	si
		push	di
		mov	cs:word_3CF4, ds
		mov	cs:word_3CF6, dx
		mov	cs:nbytes, ax
		or	bx, bx
		jz	loc_4100
		mov	cx, ax
		or	cx, dx
		jz	loc_410B
		add	ax, 13h
		adc	dx, 0
		jb	loc_4114
		test	dx, 0FFF0h
		jnz	loc_4114
		mov	cl, 4
		shr	ax, cl
		shl	dx, cl
		or	ah, dl		; block
		mov	es, bx
		mov	cx, es:0
		cmp	cx, ax
		jb	loc_40FB
		ja	loc_40F6
		mov	dx, bx
		mov	ax, 4
		jmp	loc_4117
; ---------------------------------------------------------------------------

loc_40F6::				; CODE XREF: _realloc+4Ej
		call	sub_403B
		jmp	loc_4117
; ---------------------------------------------------------------------------

loc_40FB::				; CODE XREF: _realloc+4Cj
		call	sub_3FBF
		jmp	loc_4117
; ---------------------------------------------------------------------------

loc_4100::				; CODE XREF: _realloc+25j
		push	dx
		push	ax		; nbytes
		push	cs
		call	near ptr _farmalloc
		add	sp, 4
		jmp	loc_4117
; ---------------------------------------------------------------------------

loc_410B::				; CODE XREF: _realloc+2Bj
		push	bx
		push	ax		; block
		push	cs
		call	near ptr _farfree
		add	sp, 4

loc_4114::				; CODE XREF: _realloc+33j _realloc+39j
		xor	ax, ax
		cwd

loc_4117::				; CODE XREF: _realloc+55j _realloc+5Aj ...
		mov	ds, cs:word_3CF4
		pop	di
		pop	si
		pop	bp
		retf
_realloc	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

sub_4120	proc near		; CODE XREF: __brk+2Fp	sub_420D+42p

arg_0		= word ptr  4
arg_2		= word ptr  6

		push	bp
		mov	bp, sp
		push	si
		mov	si, [bp+arg_2]
		inc	si
		sub	si, __psp
		add	si, 3Fh	; '?'
		mov	cl, 6
		shr	si, cl
		cmp	si, word_2B3E4
		jnz	loc_414B
		assume es:nothing

loc_4139::				; CODE XREF: sub_4120+5Fj
		mov	ax, [bp+arg_2]
		mov	dx, [bp+arg_0]
		mov	word ptr __brklvl+2, ax
		mov	word ptr __brklvl, dx
		mov	ax, 1
		jmp	loc_4191
; ---------------------------------------------------------------------------
		assume es:nothing

loc_414B::				; CODE XREF: sub_4120+17j
		mov	cl, 6
		shl	si, cl
		mov	dx, word ptr __heaptop+2
		mov	ax, si
		add	ax, __psp
		cmp	ax, dx
		jbe	loc_4163
		mov	si, dx
		sub	si, __psp

loc_4163::				; CODE XREF: sub_4120+3Bj
		push	si		; newsize
		push	__psp		; newsize
		nop
		push	cs		; segx
		call	near ptr _setblock
		assume es:nothing
		pop	cx
		pop	cx
		mov	dx, ax
		cmp	dx, 0FFFFh
		jnz	loc_4181
		mov	ax, si
		mov	cl, 6
		shr	ax, cl
		mov	ds:3184h, ax
		jmp	loc_4139
; ---------------------------------------------------------------------------

loc_4181::				; CODE XREF: sub_4120+54j
		mov	ax, __psp
		add	ax, dx
		mov	word ptr __heaptop+2, ax
		mov	word ptr __heaptop, 0
		xor	ax, ax

loc_4191::				; CODE XREF: sub_4120+29j
		pop	si
		pop	bp
		retn	4
sub_4120	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__brk		proc near		; CODE XREF: sub_3CFA:loc_3D56p
					; sub_403B:loc_4094p

arg_0		= word ptr  4
arg_2		= word ptr  6

		push	bp
		mov	bp, sp
		mov	cx, word ptr __heapbase+2
		mov	bx, word ptr __heapbase
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		call	n_pcmp@
		jb	loc_41CC
		mov	cx, word ptr __heaptop+2
		mov	bx, word ptr __heaptop
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		call	n_pcmp@
		ja	loc_41CC
		push	[bp+arg_2]
		push	[bp+arg_0]
		call	sub_4120
		or	ax, ax
		jnz	loc_41D1

loc_41CC::				; CODE XREF: __brk+14j	__brk+27j
		mov	ax, 0FFFFh
		jmp	loc_41D3
; ---------------------------------------------------------------------------

loc_41D1::				; CODE XREF: __brk+34j
		xor	ax, ax

loc_41D3::				; CODE XREF: __brk+39j
		pop	bp
		retn
__brk		endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__sbrk		proc near		; CODE XREF: sub_3E57+Ap sub_3E57+23p	...

arg_0		= word ptr  4
arg_2		= word ptr  6

		push	bp
		mov	bp, sp
		sub	sp, 8
		mov	ax, word ptr __brklvl+2
		xor	dx, dx
		mov	cl, 4
		call	near ptr n_lxlsh@
		add	ax, word ptr __brklvl
		adc	dx, 0
		add	ax, [bp+arg_0]
		adc	dx, [bp+arg_2]
		cmp	dx, 0Fh
		jl	loc_4206
		jg	loc_41FE
		cmp	ax, 0FFFFh
		jbe	loc_4206

loc_41FE::				; CODE XREF: __sbrk+22j sub_420D+1Aj ...
		mov	dx, 0FFFFh
		mov	ax, 0FFFFh
		jmp	loc_425C
; ---------------------------------------------------------------------------

loc_4206::				; CODE XREF: __sbrk+20j __sbrk+27j
		mov	dx, word ptr __brklvl+2

loc_420A::				; CODE XREF: sub_333C+17p
					; DATA XREF: seg2608:off_2826Eo
		mov	ax, word ptr __brklvl
__sbrk		endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_420D	proc near		; CODE XREF: sub_333C+17p
					; DATA XREF: seg2608:off_28270o
		mov	cx, [bp+6]
		mov	bx, [bp+4]
		call	near ptr n_padd@
		assume es:nothing
		mov	[bp-2],	dx
		mov	[bp-4],	ax
		mov	cx, word ptr __heapbase+2
		mov	bx, word ptr __heapbase
		call	n_pcmp@
		jb	loc_41FE
		mov	cx, word ptr __heaptop+2
		mov	bx, word ptr __heaptop
		mov	dx, [bp-2]
		mov	ax, [bp-4]
		call	n_pcmp@
		ja	loc_41FE
		mov	ax, word ptr __brklvl+2
		mov	dx, word ptr __brklvl
		mov	[bp-6],	ax
		mov	[bp-8],	dx
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	sub_4120
		assume es:nothing
		or	ax, ax
		jz	loc_41FE
		mov	dx, [bp-6]
		mov	ax, [bp-8]

loc_425C::				; CODE XREF: __sbrk+2Fj
		mov	sp, bp
		pop	bp
		retn
sub_420D	endp ; sp-analysis failed

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; unsigned __int32 farcoreleft(void)
_farcoreleft	proc far		; CODE XREF: _coreleft+2p
					; activate_menu_bar(void)+B5P ...

var_4		= word ptr -4
var_2		= word ptr -2

		push	bp
		mov	bp, sp
		sub	sp, 4
		mov	[bp+var_2], 0
		mov	[bp+var_4], 0
		mov	dx, word ptr __heaptop+2
		mov	ax, word ptr __heaptop
		mov	cx, word ptr __brklvl+2
		mov	bx, word ptr __brklvl
		call	near ptr n_psbp@
		assume es:nothing
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax
		cmp	[bp+var_2], 0
		jb	loc_429E
		ja	loc_4296
		cmp	[bp+var_4], 10h
		jbe	loc_429E

loc_4296::				; CODE XREF: _farcoreleft+2Ej
		sub	[bp+var_4], 10h
		sbb	[bp+var_2], 0

loc_429E::				; CODE XREF: _farcoreleft+2Cj
					; _farcoreleft+34j
		and	[bp+var_4], 0FFF0h
		and	[bp+var_2], 0FFFFh
		mov	dx, [bp+var_2]
		mov	ax, [bp+var_4]
		mov	sp, bp
		pop	bp
		retf
_farcoreleft	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

; int getch(void)
_getch		proc far		; CODE XREF: seg0000:20F5p
					; seg0000:20FDp ...
		cmp	__cflag, 0
		jz	loc_42C1
		mov	__cflag, 0
		mov	al, __cchar
		jmp	loc_42C6
; ---------------------------------------------------------------------------

loc_42C1::				; CODE XREF: _getch+5j
		mov	ax, 700h
		int	21h		; DOS -	DIRECT STDIN INPUT, NO ECHO

loc_42C6::				; CODE XREF: _getch+Fj
		mov	ah, 0
		retf
_getch		endp

; ---------------------------------------------------------------------------

__ngetche:
		pop	ax
		push	cs
		push	ax

; int getche(void)
_getche:
		push	si
		cmp	__cflag, 0
		jz	loc_42DC
		push	cs
		call	near ptr _getch
		mov	si, ax
		jmp	loc_42E9
; ---------------------------------------------------------------------------

loc_42DC::				; CODE XREF: seg0000:20F2j
		push	cs
		call	near ptr _getch
		mov	si, ax
		push	ax		; c
		nop
		push	cs
		call	near ptr _putch
		pop	cx

loc_42E9::				; CODE XREF: seg0000:20FAj
		mov	ax, si
		pop	si
		retf
; ---------------------------------------------------------------------------

__nungetch:
		pop	ax
		push	cs
		push	ax

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl ungetch(int ch)
_ungetch	proc far

arg_0		= word ptr  6

		push	bp
		mov	bp, sp
		cmp	__cflag, 0
		jz	loc_42FF
		mov	ax, 0FFFFh
		jmp	loc_430C
; ---------------------------------------------------------------------------

loc_42FF::				; CODE XREF: _ungetch+8j
		mov	__cflag, 1
		mov	al, byte ptr [bp+arg_0]
		mov	__cchar, al
		mov	ah, 0

loc_430C::				; CODE XREF: _ungetch+Dj
		pop	bp
		retf
_ungetch	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl gettext(int left,	int top, int right, int	bottom,	void *destin)
_gettext	proc far		; CODE XREF: __scroll+88p
					; __scroll+11Ap

var_2		= word ptr -2
left		= word ptr  6
top		= word ptr  8
right		= word ptr  0Ah
bottom		= word ptr  0Ch
destin		= dword	ptr  0Eh

		push	bp
		mov	bp, sp
		sub	sp, 2
		push	si
		push	di
		mov	di, [bp+left]
		mov	si, [bp+top]
		push	di
		push	si
		push	[bp+right]
		push	[bp+bottom]
		call	__validatexy
		or	ax, ax
		jnz	loc_432F
		xor	ax, ax
		jmp	loc_435E
; ---------------------------------------------------------------------------

loc_432F::				; CODE XREF: _gettext+1Bj
		mov	ax, [bp+right]
		sub	ax, di
		inc	ax
		mov	[bp+var_2], ax
		jmp	loc_4356
; ---------------------------------------------------------------------------

loc_433A::				; CODE XREF: _gettext+4Bj
		push	word ptr [bp+destin+2]
		push	word ptr [bp+destin]
		push	di
		push	si
		call	__vptr
		push	dx
		push	ax
		push	[bp+var_2]
		call	__screenio
		mov	ax, [bp+var_2]
		shl	ax, 1
		add	word ptr [bp+destin], ax
		inc	si

loc_4356::				; CODE XREF: _gettext+2Aj
		cmp	si, [bp+bottom]
		jle	loc_433A
		mov	ax, 1

loc_435E::				; CODE XREF: _gettext+1Fj
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retf
_gettext	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl puttext(int left,	int top, int right, int	bottom,	void *source)
_puttext	proc far		; CODE XREF: __scroll+C3p

var_2		= word ptr -2
left		= word ptr  6
top		= word ptr  8
right		= word ptr  0Ah
bottom		= word ptr  0Ch
source		= dword	ptr  0Eh

		push	bp
		mov	bp, sp
		sub	sp, 2
		push	si
		push	di
		mov	di, [bp+left]
		mov	si, [bp+top]
		push	di
		push	si
		push	[bp+right]
		push	[bp+bottom]
		call	__validatexy
		or	ax, ax
		jnz	loc_4385
		xor	ax, ax
		jmp	loc_43B4
; ---------------------------------------------------------------------------

loc_4385::				; CODE XREF: _puttext+1Bj
		mov	ax, [bp+right]
		sub	ax, di
		inc	ax
		mov	[bp+var_2], ax
		jmp	loc_43AC
; ---------------------------------------------------------------------------

loc_4390::				; CODE XREF: _puttext+4Bj
		push	di
		push	si
		call	__vptr
		push	dx
		push	ax
		push	word ptr [bp+source+2]
		push	word ptr [bp+source]
		push	[bp+var_2]
		call	__screenio
		mov	ax, [bp+var_2]
		shl	ax, 1
		add	word ptr [bp+source], ax
		inc	si

loc_43AC::				; CODE XREF: _puttext+2Aj
		cmp	si, [bp+bottom]
		jle	loc_4390
		mov	ax, 1

loc_43B4::				; CODE XREF: _puttext+1Fj
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retf
_puttext	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl int86(int	intno, union REGS *inregs, union REGS *outregs)
_int86		proc far		; CODE XREF: print_form(uchar *,uchar)+6DP
					; ms_mouse::ms_mouse(void)+78P	...

segp		= SREGS	ptr -8
intno		= word ptr  6
inregs		= dword	ptr  8
outregs		= dword	ptr  0Ch

		push	bp
		mov	bp, sp
		sub	sp, 8
		push	ss
		lea	ax, [bp+segp]
		push	ax		; segp
		nop
		push	cs
		call	near ptr _segread
		pop	cx
		pop	cx
		push	ss
		lea	ax, [bp+segp]
		push	ax		; segregs
		push	word ptr [bp+outregs+2]
		push	word ptr [bp+outregs] ;	outregs
		push	word ptr [bp+inregs+2]
		push	word ptr [bp+inregs] ; inregs
		push	[bp+intno]	; intno
		push	cs
		call	near ptr _int86x
		add	sp, 0Eh
		mov	sp, bp
		pop	bp
		retf
_int86		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl int86x(int intno,	union REGS *inregs, union REGS *outregs, struct	SREGS *segregs)
_int86x		proc far		; CODE XREF: _int86+27p
					; vga_display::get_palette(void)+3BP

var_E		= byte ptr -0Eh
var_D		= byte ptr -0Dh
var_C		= byte ptr -0Ch
var_B		= word ptr -0Bh
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= dword	ptr -4
intno		= word ptr  6
inregs		= dword	ptr  8
outregs		= dword	ptr  0Ch
segregs		= dword	ptr  10h

		push	bp
		mov	bp, sp
		sub	sp, 0Eh
		push	si
		push	di
		push	ds
		lea	cx, [bp+var_E]
		mov	word ptr [bp+var_4], cx
		mov	word ptr [bp+var_4+2], ss
		mov	[bp+var_E], 55h	; 'U'
		mov	[bp+var_D], 0CDh ; 'Í'
		mov	ax, [bp+intno]
		mov	[bp+var_C], al
		mov	[bp+var_B], 0CB5Dh
		cmp	al, 25h	; '%'
		jb	loc_4429
		cmp	al, 26h	; '&'
		ja	loc_4429
		mov	byte ptr [bp+var_B], 36h ; '6'
		mov	[bp+var_B+1], 68Fh
		mov	[bp+var_8], cx	; CODE XREF: seg1c75:4110p
		mov	[bp+var_6], 0CB5Dh

loc_4429::				; CODE XREF: _int86x+27j _int86x+2Bj
		lds	si, [bp+segregs]
		assume ds:seg2b53
		push	word ptr [si]
		push	word ptr [si+6]
		lds	si, [bp+inregs]
		mov	ax, [si]
		mov	bx, [si+2]
		mov	cx, [si+4]
		mov	dx, [si+6]
		mov	di, [si+0Ah]
		mov	si, [si+8]
		pop	ds
		assume ds:seg2608
		pop	es
		call	[bp+var_4]
		pushf
		pushf
		push	si
		push	ds
		push	es
		lds	si, [bp+segregs]
		assume ds:seg2b53
		pop	word ptr [si]
		pop	word ptr [si+6]
		lds	si, [bp+outregs]
		pop	word ptr [si+8]
		pop	word ptr [si+0Eh]
		pop	word ptr [si+0Ch]
		and	word ptr [si+0Ch], 1
		mov	[si+0Ah], di
		mov	[si+6],	dx
		mov	[si+4],	cx
		mov	[si+2],	bx
		mov	[si], ax
		pop	ds
		assume ds:seg2608
		jz	loc_447E
		assume es:seg2608
		push	ax
		push	ax
		call	__ioerror
		pop	ax
		assume es:nothing

loc_447E::				; CODE XREF: _int86x+8Bj
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retf
_int86x		endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void __cdecl intr(int	intno, struct REGPACK *preg)
_intr		proc far		; CODE XREF: ms_mouse::ms_mouse(void)+D7P
					; vga_display::vga_display(uchar)+7DP

var_12		= word ptr -12h
var_10		= byte ptr -10h
var_F		= byte ptr -0Fh
var_E		= byte ptr -0Eh
var_D		= byte ptr -0Dh
var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= byte ptr -8
var_7		= word ptr -7
var_4		= dword	ptr -4
intno		= word ptr  6
preg		= dword	ptr  8

; FUNCTION CHUNK AT 22EB SIZE 0000005D BYTES

		push	bp
		mov	bp, sp
		sub	sp, 12h
		push	si
		push	di
		push	bp
		push	ds
		pushf
		lea	cx, [bp+var_12]
		mov	word ptr [bp+var_4], cx
		mov	word ptr [bp+var_4+2], ss
		mov	[bp+var_12], 6E8Bh
		mov	[bp+var_10], 0DEh ; 'Þ'
		mov	[bp+var_F], 0CDh ; 'Í'
		mov	ax, [bp+intno]
		mov	[bp+var_E], al
		cmp	al, 25h	; '%'
		jb	short loc_44CB
		assume es:nothing
		cmp	al, 26h	; '&'
		ja	short loc_44CB
		mov	[bp+var_D], 36h	; '6'
		mov	[bp+var_C], 68Fh
		mov	[bp+var_A], cx
		mov	[bp+var_8], 0CAh ; 'Ê'
		mov	[bp+var_7], 2
		jmp	short loc_44D4
_intr		endp

		assume es:nothing, ds:seg2b53

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

nullsub_3	proc far		; CODE XREF: _intr+99p
		iret
nullsub_3	endp

; ---------------------------------------------------------------------------
; START	OF FUNCTION CHUNK FOR _intr
		assume es:nothing, ds:seg2608

loc_44CB::				; CODE XREF: _intr+29j	_intr+2Dj
		mov	[bp+var_D], 0CAh ; 'Ê'
		mov	[bp+var_C], 2

loc_44D4::				; CODE XREF: _intr+44j
		lds	di, [bp+preg]
		assume ds:seg2b53
		push	ds
		push	di
		mov	ax, [di]
		mov	bx, [di+2]
		mov	cx, [di+4]
		mov	dx, [di+6]
		push	word ptr [di+8]
		mov	si, [di+0Ah]
		mov	es, word ptr [di+10h]
		assume es:nothing
		lds	di, [di+0Ch]
		assume ds:nothing
		call	[bp+var_4]
		assume es:nothing
		push	ds
		push	di
		push	bp
		pushf
		mov	bp, sp
		lds	di, [bp+preg]
		assume ds:seg2b53
		mov	[di], ax
		mov	[di+2],	bx
		mov	[di+4],	cx
		mov	[di+6],	dx
		mov	[di+0Ah], si
		mov	word ptr [di+10h], es
		pop	word ptr [di+12h]
		pop	word ptr [di+8]
		pop	word ptr [di+0Ch]
		pop	word ptr [di+0Eh]
		add	sp, 4
		push	cs
		call	near ptr nullsub_3
		pop	ds
		assume ds:seg2608
		pop	bp
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retf
; END OF FUNCTION CHUNK	FOR _intr
		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int ioctl(int	handle,	int func, ...)
_ioctl		proc far		; CODE XREF: _open+D4p	_open+FCp

handle		= word ptr  6
func		= word ptr  8
arg_4		= dword	ptr  0Ah
arg_8		= word ptr  0Eh

		push	bp
		mov	bp, sp
		push	ds
		lds	dx, [bp+arg_4]
		assume ds:nothing
		mov	ah, 44h	; 'D'
		mov	al, byte ptr [bp+func]
		mov	bx, [bp+handle]
		mov	cx, [bp+arg_8]
		int	21h		; DOS -	2+ - IOCTL -
		pop	ds
		assume ds:seg2608
		jb	loc_454B
		cmp	[bp+func], 0
		jnz	loc_4549
		mov	ax, dx
		jmp	loc_454F
; ---------------------------------------------------------------------------

loc_4549::				; CODE XREF: _ioctl+1Bj
		jmp	loc_454F
; ---------------------------------------------------------------------------

loc_454B::				; CODE XREF: _ioctl+15j
		push	ax
		call	__ioerror

loc_454F::				; CODE XREF: _ioctl+1Fj
					; _ioctl:loc_4549j
		pop	bp
		retf
_ioctl		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

; int kbhit(void)
_kbhit		proc far		; CODE XREF: seg137f:loc_1897AP
		cmp	__cflag, 0
		jz	loc_455D
		mov	ax, 1
		jmp	locret_4562
; ---------------------------------------------------------------------------

loc_455D::				; CODE XREF: _kbhit+5j
		mov	ah, 0Bh
		int	21h		; DOS -	CHECK STANDARD INPUT STATUS
					; Return: AL = FFh if character	available
					; 00h if no character
		cbw

locret_4562::				; CODE XREF: _kbhit+Aj
		retf
_kbhit		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl movetext(int left, int top, int right, int bottom, int destleft, int desttop)
_movetext	proc far		; CODE XREF: __scroll+62p __scroll+F4p

var_4		= word ptr -4
var_2		= word ptr -2
left		= word ptr  6
top		= word ptr  8
right		= word ptr  0Ah
bottom		= word ptr  0Ch
destleft	= word ptr  0Eh
desttop		= word ptr  10h

		push	bp
		mov	bp, sp
		sub	sp, 4
		push	si
		push	di
		mov	si, [bp+top]
		mov	di, [bp+bottom]
		push	[bp+left]
		push	si
		push	[bp+right]
		push	di
		call	__validatexy
		or	ax, ax
		jz	loc_45A3
		push	[bp+destleft]
		push	[bp+desttop]
		mov	ax, [bp+right]
		sub	ax, [bp+left]
		mov	dx, [bp+destleft]
		add	dx, ax
		push	dx
		mov	ax, di
		sub	ax, si
		mov	dx, [bp+desttop]
		add	dx, ax
		push	dx
		call	__validatexy
		or	ax, ax
		jnz	loc_45A7

loc_45A3::				; CODE XREF: _movetext+1Bj
		xor	ax, ax
		jmp	loc_45FA
; ---------------------------------------------------------------------------

loc_45A7::				; CODE XREF: _movetext+3Ej
		mov	dx, si
		mov	[bp+var_2], di
		mov	[bp+var_4], 1
		cmp	si, [bp+desttop]
		jge	loc_45C0
		mov	dx, di
		mov	[bp+var_2], si
		mov	[bp+var_4], 0FFFFh

loc_45C0::				; CODE XREF: _movetext+51j
		mov	di, dx
		jmp	loc_45ED
; ---------------------------------------------------------------------------

loc_45C4::				; CODE XREF: _movetext+92j
		push	[bp+destleft]
		mov	ax, di
		sub	ax, si
		mov	dx, [bp+desttop]
		add	dx, ax
		push	dx
		call	__vptr
		push	dx
		push	ax
		push	[bp+left]
		push	di
		call	__vptr

loc_45DD::				; CODE XREF: sub_21C0F+7p
		push	dx
		push	ax
		mov	ax, [bp+right]
		sub	ax, [bp+left]
		inc	ax
		push	ax
		call	__screenio
		add	di, [bp+var_4]

loc_45ED::				; CODE XREF: _movetext+5Fj
		mov	ax, [bp+var_2]
		add	ax, [bp+var_4]
		cmp	ax, di
		jnz	loc_45C4
		mov	ax, 1

loc_45FA::				; CODE XREF: _movetext+42j
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retf
_movetext	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl putch(int	c)
_putch		proc far		; CODE XREF: seg0000:2105p

c_		= word ptr  6

		push	bp
		mov	bp, sp
		push	ss
		lea	ax, [bp+c_]
		push	ax
		mov	ax, 1
		push	ax
		xor	ax, ax
		xor	dx, dx
		push	ax
		push	dx
		call	__cputn
		pop	bp
		retf
_putch		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: thunk

__realcvt	proc near		; CODE XREF: __vprinter+31Bp
					; _core_startworx+72p
		jmp	__realcvtvector
__realcvt	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

sub_461B	proc near		; CODE XREF: sub_4687+31p sub_4687+54p

var_1		= byte ptr -1
arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		sub	sp, 2
		mov	ax, [bp+arg_0]
		shr	ax, 1
		mov	cx, ax
		mov	al, byte_2B39E
		mov	ah, 0
		push	ax
		mov	ax, cx
		xor	dx, dx
		pop	bx
		div	bx
		mov	bl, al
		mov	ah, 0
		mov	dl, byte_2B39E
		mov	dh, 0
		imul	dx
		mov	dl, cl
		sub	dl, al
		mov	[bp+var_1], dl
		mov	ah, bl
		mov	al, [bp+var_1]
		mov	sp, bp
		pop	bp
		retn	4
sub_461B	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

sub_4653	proc near		; CODE XREF: sub_4687+6Cp sub_4687+94p

arg_0		= dword	ptr  4
arg_4		= dword	ptr  8

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_4]
		assume es:nothing
		mov	dx, es:[bx]
		les	bx, [bp+arg_0]
		cmp	dx, es:[bx]
		jz	loc_4671
		mov	bh, 0
		mov	ah, 2
		call	__videoint
		les	bx, [bp+arg_0]
		mov	es:[bx], dx

loc_4671::				; CODE XREF: sub_4653+Fj
		inc	dl
		cmp	dl, byte_2B39E
		jb	loc_467D
		inc	dh
		mov	dl, 0

loc_467D::				; CODE XREF: sub_4653+24j
		les	bx, [bp+arg_4]
		mov	es:[bx], dx
		pop	bp
		retn	8
sub_4653	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

sub_4687	proc near		; CODE XREF: __screenio+35p

var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  4
arg_2		= dword	ptr  6
arg_6		= dword	ptr  0Ah

		push	bp
		mov	bp, sp
		sub	sp, 0Ch
		push	si
		push	di
		mov	di, [bp+arg_0]
		call	__wherexy
		mov	[bp+var_8], ax
		mov	[bp+var_6], ax
		mov	ax, word ptr [bp+arg_6+2]
		cmp	ax, word_2B3A3
		jnz	loc_46A9
		mov	ax, 1
		jmp	loc_46AB
; ---------------------------------------------------------------------------

loc_46A9::				; CODE XREF: sub_4687+1Bj
		xor	ax, ax

loc_46AB::				; CODE XREF: sub_4687+20j
		mov	[bp+var_A], ax
		or	ax, ax
		jz	loc_46BE
		push	word ptr [bp+arg_6+2]
		push	word ptr [bp+arg_6]
		call	sub_461B
		mov	[bp+var_2], ax

loc_46BE::				; CODE XREF: sub_4687+29j
		mov	ax, word ptr [bp+arg_2+2]
		cmp	ax, word_2B3A3
		jnz	loc_46CC
		mov	ax, 1
		jmp	loc_46CE
; ---------------------------------------------------------------------------

loc_46CC::				; CODE XREF: sub_4687+3Ej
		xor	ax, ax

loc_46CE::				; CODE XREF: sub_4687+43j
		mov	[bp+var_C], ax
		or	ax, ax
		jz	loc_4738
		push	word ptr [bp+arg_2+2]
		push	word ptr [bp+arg_2]
		call	sub_461B
		mov	[bp+var_4], ax
		jmp	loc_4738
; ---------------------------------------------------------------------------

loc_46E3::				; CODE XREF: sub_4687+B6j
		cmp	[bp+var_C], 0
		jz	loc_4701
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		push	ss
		lea	ax, [bp+var_6]
		push	ax
		call	sub_4653
		mov	bh, 0
		mov	ah, 8
		call	__videoint
		mov	si, ax
		jmp	loc_470B
; ---------------------------------------------------------------------------

loc_4701::				; CODE XREF: sub_4687+60j
		les	bx, [bp+arg_2]
		mov	si, es:[bx]
		add	word ptr [bp+arg_2], 2

loc_470B::				; CODE XREF: sub_4687+78j
		cmp	[bp+var_A], 0
		jz	loc_472E
		push	ss
		lea	ax, [bp+var_2]
		push	ax
		push	ss
		lea	ax, [bp+var_6]
		push	ax
		call	sub_4653
		mov	ax, si
		mov	bl, ah
		mov	cx, 1
		mov	bh, 0
		mov	ah, 9
		call	__videoint
		jmp	loc_4738
; ---------------------------------------------------------------------------

loc_472E::				; CODE XREF: sub_4687+88j
		les	bx, [bp+arg_6]
		mov	es:[bx], si
		add	word ptr [bp+arg_6], 2

loc_4738::				; CODE XREF: sub_4687+4Cj sub_4687+5Aj ...
		mov	ax, di
		dec	di
		or	ax, ax
		jnz	loc_46E3
		mov	dx, [bp+var_8]
		mov	bh, 0
		mov	ah, 2
		call	__videoint
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn	0Ah
sub_4687	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__screenio	proc near		; CODE XREF: _gettext+3Cp _puttext+3Cp ...

arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= word ptr  8
arg_6		= word ptr  0Ah
arg_8		= word ptr  0Ch

		push	bp
		mov	bp, sp
		mov	dx, [bp+arg_0]
		mov	al, byte_2B39F
		mov	ah, 0
		or	ax, ax
		jnz	loc_4779
		cmp	_directvideo, 0
		jz	loc_4779
		push	[bp+arg_8]
		push	[bp+arg_6]
		push	[bp+arg_4]
		push	[bp+arg_2]
		push	dx
		call	__vram
		jmp	loc_4789
; ---------------------------------------------------------------------------

loc_4779::				; CODE XREF: __screenio+Dj
					; __screenio+14j
		push	[bp+arg_8]
		push	[bp+arg_6]
		push	[bp+arg_4]
		push	[bp+arg_2]
		push	dx
		call	sub_4687

loc_4789::				; CODE XREF: __screenio+26j
		pop	bp
		retn	0Ah
__screenio	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__validatexy	proc near		; CODE XREF: _gettext+16p _puttext+16p ...

arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= word ptr  8
arg_6		= word ptr  0Ah

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	bx, [bp+arg_6]
		mov	si, [bp+arg_4]
		mov	di, [bp+arg_2]
		mov	al, byte_2B39E
		mov	ah, 0
		mov	cx, ax
		mov	al, byte_2B39D
		mov	ah, 0
		mov	dx, ax
		cmp	bx, cx
		ja	short loc_47DA
		cmp	di, cx
		ja	short loc_47DA
		cmp	bx, di
		jg	short loc_47DA
		cmp	si, dx
		ja	short loc_47DA
		cmp	[bp+arg_0], dx
		ja	short loc_47DA
		cmp	si, [bp+arg_0]
		jg	short loc_47DA
		or	bx, bx
		jle	short loc_47DA
		or	di, di
		jle	short loc_47DA
		or	si, si
		jle	short loc_47DA
		cmp	[bp+arg_0], 0
		jle	short loc_47DA
		mov	ax, 1
		jmp	short loc_47DC
; ---------------------------------------------------------------------------

loc_47DA::				; CODE XREF: __validatexy+1Ej
					; __validatexy+22j ...
		xor	ax, ax

loc_47DC::				; CODE XREF: __validatexy+4Bj
		pop	di
		pop	si
		pop	bp
		retn	8
__validatexy	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

sub_47E2	proc near		; CODE XREF: __scroll+A0p
					; __scroll+132p

arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= dword	ptr  8

		push	bp
		mov	bp, sp
		mov	dx, [bp+arg_2]
		mov	ch, byte_2B39A
		mov	cl, 20h	; ' '
		jmp	loc_47FB
; ---------------------------------------------------------------------------

loc_47F0::				; CODE XREF: sub_47E2+1Cj
		les	bx, [bp+arg_4]
		mov	es:[bx], cx
		add	word ptr [bp+arg_4], 2
		inc	dx

loc_47FB::				; CODE XREF: sub_47E2+Cj
		cmp	dx, [bp+arg_0]
		jle	loc_47F0
		pop	bp
		retn	8
sub_47E2	endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__scroll	proc near		; CODE XREF: _clrscr+16p __cputn+FBp

destin		= byte ptr -0A0h
arg_0		= byte ptr  4
arg_2		= byte ptr  6
arg_4		= byte ptr  8
arg_6		= byte ptr  0Ah
arg_8		= byte ptr  0Ch
arg_A		= byte ptr  0Eh

		push	bp
		mov	bp, sp
		sub	sp, 0A0h
		mov	al, byte_2B39F
		mov	ah, 0
		or	ax, ax
		jz	loc_4817
		jmp	loc_4951
; ---------------------------------------------------------------------------

loc_4817::				; CODE XREF: __scroll+Ej
		cmp	_directvideo, 0
		jnz	loc_4821
		jmp	loc_4951
; ---------------------------------------------------------------------------

loc_4821::				; CODE XREF: __scroll+18j
		cmp	[bp+arg_0], 1
		jz	loc_482A
		jmp	loc_4951
; ---------------------------------------------------------------------------

loc_482A::				; CODE XREF: __scroll+21j
		inc	[bp+arg_8]
		inc	[bp+arg_6]
		inc	[bp+arg_4]
		inc	[bp+arg_2]
		cmp	[bp+arg_A], 6
		jz	loc_483F
		jmp	loc_48D0
; ---------------------------------------------------------------------------

loc_483F::				; CODE XREF: __scroll+36j
		mov	al, [bp+arg_6]
		mov	ah, 0
		push	ax		; desttop
		mov	al, [bp+arg_8]
		mov	ah, 0
		push	ax		; destleft
		mov	al, [bp+arg_2]
		mov	ah, 0
		push	ax		; bottom
		mov	al, [bp+arg_4]
		mov	ah, 0
		push	ax		; right
		mov	al, [bp+arg_6]
		mov	ah, 0
		inc	ax
		push	ax		; top
		mov	al, [bp+arg_8]
		mov	ah, 0
		push	ax		; left
		nop
		push	cs
		call	near ptr _movetext
		add	sp, 0Ch
		push	ss
		lea	ax, [bp+destin]
		push	ax		; destin
		mov	al, [bp+arg_2]
		mov	ah, 0
		push	ax		; bottom
		mov	al, [bp+arg_8]
		mov	ah, 0
		push	ax		; right
		mov	al, [bp+arg_2]
		mov	ah, 0
		push	ax		; top
		mov	al, [bp+arg_8]
		mov	ah, 0
		push	ax		; left
		nop
		push	cs
		call	near ptr _gettext
		add	sp, 0Ch
		push	ss
		lea	ax, [bp+destin]
		push	ax
		mov	al, [bp+arg_8]
		mov	ah, 0
		push	ax
		mov	al, [bp+arg_4]
		mov	ah, 0
		push	ax
		call	sub_47E2
		push	ss
		lea	ax, [bp+destin]
		push	ax		; source
		mov	al, [bp+arg_2]
		mov	ah, 0
		push	ax		; bottom
		mov	al, [bp+arg_4]
		mov	ah, 0
		push	ax		; right
		mov	al, [bp+arg_2]

loc_48BC::				; CODE XREF: __scroll+14Aj
		mov	ah, 0
		push	ax		; top
		mov	al, [bp+arg_8]
		mov	ah, 0
		push	ax		; left
		nop
		push	cs
		call	near ptr _puttext
		add	sp, 0Ch
		jmp	loc_496A
; ---------------------------------------------------------------------------

loc_48D0::				; CODE XREF: __scroll+38j
		mov	al, [bp+arg_6]
		mov	ah, 0
		inc	ax
		push	ax		; desttop
		mov	al, [bp+arg_8]
		mov	ah, 0
		push	ax		; destleft
		mov	al, [bp+arg_2]
		mov	ah, 0
		dec	ax
		push	ax		; bottom
		mov	al, [bp+arg_4]
		mov	ah, 0
		push	ax		; right
		mov	al, [bp+arg_6]
		mov	ah, 0
		push	ax		; top
		mov	al, [bp+arg_8]
		mov	ah, 0
		push	ax		; left
		nop
		push	cs
		call	near ptr _movetext
		add	sp, 0Ch
		push	ss
		lea	ax, [bp+destin]
		push	ax		; destin
		mov	al, [bp+arg_6]
		mov	ah, 0
		push	ax		; bottom
		mov	al, [bp+arg_8]
		mov	ah, 0
		push	ax		; right
		mov	al, [bp+arg_6]
		mov	ah, 0
		push	ax		; top
		mov	al, [bp+arg_8]
		mov	ah, 0
		push	ax		; left
		nop
		push	cs
		call	near ptr _gettext
		add	sp, 0Ch
		push	ss
		lea	ax, [bp+destin]
		push	ax
		mov	al, [bp+arg_8]
		mov	ah, 0
		push	ax
		mov	al, [bp+arg_4]
		mov	ah, 0
		push	ax
		call	sub_47E2
		push	ss
		lea	ax, [bp+destin]
		push	ax
		mov	al, [bp+arg_6]
		mov	ah, 0
		push	ax
		mov	al, [bp+arg_4]
		mov	ah, 0
		push	ax
		mov	al, [bp+arg_6]
		jmp	loc_48BC
; ---------------------------------------------------------------------------

loc_4951::				; CODE XREF: __scroll+10j __scroll+1Aj ...
		mov	bh, byte_2B39A
		mov	ah, [bp+arg_A]
		mov	al, [bp+arg_0]
		mov	ch, [bp+arg_6]
		mov	cl, [bp+arg_8]
		mov	dh, [bp+arg_2]
		mov	dl, [bp+arg_4]
		call	__videoint

loc_496A::				; CODE XREF: __scroll+C9j
		mov	sp, bp
		pop	bp
		retn	0Ch
__scroll	endp

; ---------------------------------------------------------------------------
word_4970	dw 0			; DATA XREF: unknown_libname_3+Cw
					; unknown_libname_3+C3r ...

; =============== S U B	R O U T	I N E =======================================

; TCC/TCC++/BCC++ 16 bit DOS
; Attributes: library function

unknown_libname_3 proc near		; DATA XREF: seg2608:3496o

; FUNCTION CHUNK AT 284D SIZE 0000006E BYTES

		pop	off_2B3EE
		pop	word_2B3F0
		pop	word_2B3F2
		mov	cs:word_4970, ds
		mov	word_2B3F4, si
		mov	word_2B3F6, di
		cld
		mov	es, __psp
		assume es:nothing
		mov	si, 80h	; ''
		xor	ah, ah
		lods	byte ptr es:[si]
		inc	ax
		mov	bp, es
		xchg	dx, si
		xchg	ax, bx
		mov	si, __envlng
		inc	si
		inc	si
		mov	cx, 1
		cmp	__version, 3
		jb	loc_49BE
		mov	es, __envseg
		assume es:nothing
		mov	di, si
		mov	cl, 7Fh	; ''
		xor	al, al
		repne scasb
		jcxz	loc_4A2D
		xor	cl, 7Fh

loc_49BE::				; CODE XREF: unknown_libname_3+39j
		push	ax
		mov	ax, cx
		add	ax, bx
		inc	ax
		and	ax, 0FFFEh
		mov	di, sp
		sub	di, ax
		jb	loc_4A2D
		mov	sp, di
		push	es
		pop	ds
		assume ds:nothing
		push	ss
		pop	es
		assume es:seg2b53
		push	cx
		dec	cx
		rep movsb
		xor	al, al
		stosb
		mov	ds, bp
		assume ds:nothing
		xchg	si, dx
		xchg	bx, cx
		mov	ax, bx
		mov	dx, ax
		inc	bx

loc_49E5::				; CODE XREF: unknown_libname_3+8Dj
					; unknown_libname_3+91j
		call	sub_4A05
		ja	loc_49F5

loc_49EA::				; CODE XREF: unknown_libname_3+81j
		jb	loc_4A32
		cmp	al, 0Dh
		jz	loc_4A01
		call	sub_4A05
		ja	loc_49EA

loc_49F5::				; CODE XREF: unknown_libname_3+76j
		cmp	al, 20h	; ' '
		jz	loc_4A01
		cmp	al, 0Dh
		jz	loc_4A01
		cmp	al, 9
		jnz	loc_49E5

loc_4A01::				; CODE XREF: unknown_libname_3+7Cj
					; unknown_libname_3+85j ...
		xor	al, al
		jmp	loc_49E5
unknown_libname_3 endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================


sub_4A05	proc near		; CODE XREF: unknown_libname_3:loc_49E5p
					; unknown_libname_3+7Ep
		or	ax, ax
		jz	loc_4A10
		inc	dx
		stosb
		or	al, al
		jnz	loc_4A10
		inc	bx

loc_4A10::				; CODE XREF: sub_4A05+2j sub_4A05+8j
		xchg	ah, al
		xor	al, al
		stc
		jcxz	locret_4A2C
		lodsb
		dec	cx
		sub	al, 22h	; '"'
		jz	locret_4A2C
		add	al, 22h	; '"'
		cmp	al, 5Ch	; '\'
		jnz	loc_4A2A
		cmp	byte ptr [si], 22h ; '"'
		jnz	loc_4A2A
		lodsb
		dec	cx

loc_4A2A::				; CODE XREF: sub_4A05+1Cj sub_4A05+21j
		or	si, si

locret_4A2C::				; CODE XREF: sub_4A05+10j sub_4A05+16j
		retn
sub_4A05	endp

; ---------------------------------------------------------------------------
; START	OF FUNCTION CHUNK FOR unknown_libname_3

loc_4A2D::				; CODE XREF: unknown_libname_3+47j
					; unknown_libname_3+59j ...
		nop
		nop
		jmp	_abort
; ---------------------------------------------------------------------------

loc_4A32::				; CODE XREF: unknown_libname_3:loc_49EAj
		pop	cx
		add	cx, dx
		mov	ds, cs:word_4970
		assume ds:seg2608
		mov	__argc,	bx
		inc	bx
		add	bx, bx
		add	bx, bx
		mov	si, sp
		mov	bp, sp
		sub	bp, bx
		jb	loc_4A2D
		mov	sp, bp
		mov	__argv,	bp
		mov	word_2B3EC, ss

loc_4A55::				; CODE XREF: unknown_libname_3+F4j
		jcxz	loc_4A68
		mov	[bp+0],	si
		mov	word ptr [bp+2], ss
		add	bp, 4

loc_4A60::				; CODE XREF: unknown_libname_3+F2j
		lods	byte ptr ss:[si]
		or	al, al
		loopne	loc_4A60
		jz	loc_4A55

loc_4A68::				; CODE XREF: unknown_libname_3:loc_4A55j
		xor	ax, ax
		mov	[bp+0],	ax
		mov	[bp+2],	ax
		mov	ds, cs:word_4970
		mov	si, word_2B3F4
		mov	di, word_2B3F6
		push	word_2B3F2
		push	word_2B3F0
		mov	ax, __argc
		mov	__c0argc, ax
		mov	ax, word_2B3EC
		mov	word ptr __c0argv+2, ax
		mov	ax, __argv
		mov	word ptr __c0argv, ax
		jmp	off_2B3EE
; END OF FUNCTION CHUNK	FOR unknown_libname_3
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl setblock(unsigned	int segx, unsigned int newsize)
_setblock	proc far		; CODE XREF: sub_4120+4Ap

segx		= word ptr  6
newsize		= word ptr  8

		push	bp
		mov	bp, sp
		mov	ah, 4Ah	; 'J'
		mov	bx, [bp+newsize]
		mov	es, [bp+segx]
		assume es:nothing
		int	21h		; DOS -	2+ - ADJUST MEMORY BLOCK SIZE (SETBLOCK)
					; ES = segment address of block	to change
					; BX = new size	in paragraphs
		jb	loc_4AAF
		mov	ax, 0FFFFh
		jmp	loc_4AB5
; ---------------------------------------------------------------------------

loc_4AAF::				; CODE XREF: _setblock+Dj
		push	bx
		push	ax
		call	__ioerror
		pop	ax

loc_4AB5::				; CODE XREF: _setblock+12j
		pop	bp
		retf
_setblock	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void __cdecl sound(unsigned int frequency)
_sound		proc far		; CODE XREF: @pc_sound_doit$qve+80P
					; beep(void)+6P

frequency	= word ptr  6

		push	bp
		mov	bp, sp
		mov	bx, [bp+frequency]
		mov	ax, 34DDh
		mov	dx, 12h
		cmp	dx, bx
		jnb	loc_4AE1
		div	bx
		mov	bx, ax
		in	al, 61h		; PC/XT	PPI port B bits:
					; 0: Tmr 2 gate	ÍËÍ OR	03H=spkr ON
					; 1: Tmr 2 data	Í¼  AND	0fcH=spkr OFF
					; 3: 1=read high switches
					; 4: 0=enable RAM parity checking
					; 5: 0=enable I/O channel check
					; 6: 0=hold keyboard clock low
					; 7: 0=enable kbrd
		test	al, 3
		jnz	loc_4AD9
		or	al, 3
		out	61h, al		; PC/XT	PPI port B bits:
					; 0: Tmr 2 gate	ÍËÍ OR	03H=spkr ON
					; 1: Tmr 2 data	Í¼  AND	0fcH=spkr OFF
					; 3: 1=read high switches
					; 4: 0=enable RAM parity checking
					; 5: 0=enable I/O channel check
					; 6: 0=hold keyboard clock low
					; 7: 0=enable kbrd
		mov	al, 0B6h ; '¶'
		out	43h, al		; Timer	8253-5 (AT: 8254.2).

loc_4AD9::				; CODE XREF: _sound+18j
		mov	al, bl
		out	42h, al		; Timer	8253-5 (AT: 8254.2).
		mov	al, bh
		out	42h, al		; Timer	8253-5 (AT: 8254.2).

loc_4AE1::				; CODE XREF: _sound+Ej
		pop	bp
		retf
_sound		endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

; void nosound(void)
_nosound	proc far		; CODE XREF: game_manager::~game_manager(void)+44P
					; @pc_sound_doit$qve+99P ...
		in	al, 61h		; PC/XT	PPI port B bits:
					; 0: Tmr 2 gate	ÍËÍ OR	03H=spkr ON
					; 1: Tmr 2 data	Í¼  AND	0fcH=spkr OFF
					; 3: 1=read high switches
					; 4: 0=enable RAM parity checking
					; 5: 0=enable I/O channel check
					; 6: 0=hold keyboard clock low
					; 7: 0=enable kbrd
		and	al, 0FCh
		out	61h, al		; PC/XT	PPI port B bits:
					; 0: Tmr 2 gate	ÍËÍ OR	03H=spkr ON
					; 1: Tmr 2 data	Í¼  AND	0fcH=spkr OFF
					; 3: 1=read high switches
					; 4: 0=enable RAM parity checking
					; 5: 0=enable I/O channel check
					; 6: 0=hold keyboard clock low
					; 7: 0=enable kbrd
		retf
_nosound	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

__wherexy	proc near		; CODE XREF: __cputn+Ep __cputn+16p ...
		mov	ah, 3
		mov	bh, 0
		call	__videoint
		mov	ax, dx
		retn
__wherexy	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

; int wherex(void)
_wherex		proc far
		call	__wherexy
		mov	ah, 0
		mov	dl, __video
		mov	dh, 0
		sub	ax, dx
		inc	ax
		retf
_wherex		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

; int wherey(void)
_wherey		proc far
		call	__wherexy
		mov	cl, 8
		shr	ax, cl
		mov	ah, 0
		mov	dl, byte_2B397
		mov	dh, 0
		sub	ax, dx
		inc	ax
		retf
_wherey		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; __int32 __cdecl atol(const char *s)
_atol		proc far		; CODE XREF: _atoi+Ap atoi(uchar *)+9P

s		= dword	ptr  6

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	es
		push	bp
		les	si, [bp+s]
		assume es:nothing
		cld
		sub	ax, ax
		cwd
		mov	cx, 0Ah
		mov	bh, 0
		mov	di, (offset __ctype+1)

loc_4B2C::				; CODE XREF: _atol+1Dj
		mov	bl, es:[si]
		inc	si
		test	byte ptr [bx+di], 1
		jnz	loc_4B2C
		mov	bp, 0
		cmp	bl, 2Bh	; '+'
		jz	loc_4B43
		cmp	bl, 2Dh	; '-'
		jnz	loc_4B47
		inc	bp

loc_4B43::				; CODE XREF: _atol+25j	_atol+41j
		mov	bl, es:[si]
		inc	si

loc_4B47::				; CODE XREF: _atol+2Aj
		cmp	bl, 39h	; '9'
		ja	loc_4B7B
		sub	bl, 30h	; '0'
		jb	loc_4B7B
		mul	cx
		add	ax, bx
		adc	dl, dh
		jz	loc_4B43
		jmp	loc_4B6D
; ---------------------------------------------------------------------------

loc_4B5B::				; CODE XREF: _atol+63j
		mov	di, dx
		mov	cx, 0Ah
		mul	cx
		xchg	ax, di
		xchg	dx, cx
		mul	dx
		xchg	ax, dx
		xchg	ax, di
		add	ax, bx
		adc	dx, cx

loc_4B6D::				; CODE XREF: _atol+43j
		mov	bl, es:[si]
		inc	si
		cmp	bl, 39h	; '9'
		ja	loc_4B7B
		sub	bl, 30h	; '0'
		jnb	loc_4B5B

loc_4B7B::				; CODE XREF: _atol+34j	_atol+39j ...
		dec	bp
		jl	loc_4B85
		neg	dx
		neg	ax
		sbb	dx, 0

loc_4B85::				; CODE XREF: _atol+66j
		pop	bp
		pop	es
		pop	di
		pop	si
		pop	bp
		retf
_atol		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl atoi(const char *s)
_atoi		proc far

s		= dword	ptr  6

		push	bp
		mov	bp, sp
		push	word ptr [bp+s+2]
		push	word ptr [bp+s]	; s
		push	cs
		call	near ptr _atol
		pop	cx
		pop	cx
		pop	bp
		retf
_atoi		endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int _chmod(const char	*pathname, int func, ...)
__chmod		proc far		; CODE XREF: _open+27p	_open+12Ep

pathname	= dword	ptr  6
func		= word ptr  0Ah
arg_6		= word ptr  0Ch

		push	bp
		mov	bp, sp
		push	ds
		mov	cx, [bp+arg_6]
		mov	ah, 43h	; 'C'
		mov	al, byte ptr [bp+func]
		lds	dx, [bp+pathname]
		int	21h		; DOS -
		pop	ds
		jb	loc_4BB3
		xchg	ax, cx
		jmp	loc_4BB7
; ---------------------------------------------------------------------------

loc_4BB3::				; CODE XREF: __chmod+12j
		push	ax
		call	__ioerror

loc_4BB7::				; CODE XREF: __chmod+15j
		pop	bp
		retf
__chmod		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl close(int	handle)
_close		proc far		; CODE XREF: _fclose+6Cp seg1783:0AAFP ...

handle		= word ptr  6

		push	bp
		mov	bp, sp
		mov	dx, [bp+handle]
		cmp	dx, __nfile
		jb	loc_4BCE
		mov	ax, 6
		push	ax
		call	__ioerror
		jmp	loc_4BDF
; ---------------------------------------------------------------------------

loc_4BCE::				; CODE XREF: _close+Aj
		mov	bx, dx
		shl	bx, 1
		mov	__openfd[bx], 0
		push	dx		; handle
		nop
		push	cs
		call	near ptr __close
		pop	cx

loc_4BDF::				; CODE XREF: _close+13j
		pop	bp
		retf
_close		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl _close(int handle)
__close		proc far		; CODE XREF: _close+22p _open+9Ep

handle		= word ptr  6

		push	bp
		mov	bp, sp
		mov	ah, 3Eh	; '>'
		mov	bx, [bp+handle]
		int	21h		; DOS -	2+ - CLOSE A FILE WITH HANDLE
					; BX = file handle
		jb	loc_4BF9
		shl	bx, 1
		mov	__openfd[bx], 0
		xor	ax, ax
		jmp	loc_4BFD
; ---------------------------------------------------------------------------

loc_4BF9::				; CODE XREF: __close+Aj
		push	ax
		call	__ioerror

loc_4BFD::				; CODE XREF: __close+16j
		pop	bp
		retf
__close		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl eof(int handle)
_eof		proc far		; CODE XREF: _fgetc+A4p

var_4		= word ptr -4
var_2		= word ptr -2
handle		= word ptr  6

		push	bp
		mov	bp, sp
		sub	sp, 4
		mov	ax, [bp+handle]
		cmp	ax, __nfile
		jb	loc_4C14
		mov	ax, 6
		push	ax
		jmp	loc_4C6F
; ---------------------------------------------------------------------------

loc_4C14::				; CODE XREF: _eof+Dj
		mov	bx, [bp+handle]
		shl	bx, 1
		test	__openfd[bx], 200h
		jz	loc_4C26

loc_4C21::				; CODE XREF: _eof:loc_4C68j
		mov	ax, 1
		jmp	loc_4C72
; ---------------------------------------------------------------------------

loc_4C26::				; CODE XREF: _eof+20j
		mov	ax, 4400h
		mov	bx, [bp+handle]
		int	21h		; DOS -	2+ - IOCTL - GET DEVICE	INFORMATION
					; BX = file or device handle
		jb	loc_4C6E
		test	dl, 80h
		jnz	loc_4C6A
		mov	ax, 4201h
		xor	cx, cx
		mov	dx, cx
		int	21h		; DOS -	2+ - MOVE FILE READ/WRITE POINTER (LSEEK)
					; AL = method: offset from present location
		jb	loc_4C6E
		push	dx
		push	ax
		mov	ax, 4202h
		xor	cx, cx
		mov	dx, cx
		int	21h		; DOS -	2+ - MOVE FILE READ/WRITE POINTER (LSEEK)
					; AL = method: offset from end of file
		mov	[bp+var_4], ax
		mov	[bp+var_2], dx
		pop	dx
		pop	cx
		jb	loc_4C6E
		mov	ax, 4200h
		int	21h		; DOS -	2+ - MOVE FILE READ/WRITE POINTER (LSEEK)
					; AL = method: offset from beginning of	file
		jb	loc_4C6E
		cmp	dx, [bp+var_2]
		jb	loc_4C6A
		ja	loc_4C68
		cmp	ax, [bp+var_4]
		jb	loc_4C6A

loc_4C68::				; CODE XREF: _eof+62j
		jmp	loc_4C21
; ---------------------------------------------------------------------------

loc_4C6A::				; CODE XREF: _eof+34j _eof+60j ...
		xor	ax, ax
		jmp	loc_4C72
; ---------------------------------------------------------------------------

loc_4C6E::				; CODE XREF: _eof+2Fj _eof+3Fj ...
		push	ax

loc_4C6F::				; CODE XREF: _eof+13j
		call	__ioerror

loc_4C72::				; CODE XREF: _eof+25j _eof+6Dj
		mov	sp, bp
		pop	bp
		retf
_eof		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl fclose(FILE *stream)
_fclose		proc far		; CODE XREF: __openfp+B5p
					; __xfclose+28p ...

stream		= dword	ptr  6

		push	bp
		mov	bp, sp
		push	si
		mov	si, 0FFFFh
		mov	ax, word ptr [bp+stream]
		or	ax, word ptr [bp+stream+2]
		jnz	loc_4C88
		jmp	loc_4D29
; ---------------------------------------------------------------------------

loc_4C88::				; CODE XREF: _fclose+Dj
		les	bx, [bp+stream]
		mov	ax, es:[bx+12h]
		cmp	ax, word ptr [bp+stream]
		jz	loc_4C97
		jmp	loc_4D29
; ---------------------------------------------------------------------------

loc_4C97::				; CODE XREF: _fclose+1Cj
		les	bx, [bp+stream]
		cmp	word ptr es:[bx+6], 0
		jz	loc_4CD0
		cmp	word ptr es:[bx], 0
		jge	loc_4CB6
		push	word ptr [bp+stream+2]
		push	bx		; stream
		nop
		push	cs
		call	near ptr _fflush
		pop	cx
		pop	cx
		or	ax, ax
		jnz	loc_4D29

loc_4CB6::				; CODE XREF: _fclose+2Fj
		les	bx, [bp+stream]
		test	word ptr es:[bx+2], 4
		jz	loc_4CD0
		push	word ptr es:[bx+0Ah]
		push	word ptr es:[bx+8] ; block
		nop
		push	cs
		call	near ptr _farfree
		assume es:nothing
		pop	cx
		pop	cx

loc_4CD0::				; CODE XREF: _fclose+29j _fclose+49j
		les	bx, [bp+stream]
		assume es:seg2608
		cmp	byte ptr es:[bx+4], 0
		jl	loc_4CE8
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		nop
		push	cs
		call	near ptr _close
		pop	cx
		mov	si, ax

loc_4CE8::				; CODE XREF: _fclose+62j
		les	bx, [bp+stream]
		mov	word ptr es:[bx+2], 0
		mov	word ptr es:[bx+6], 0
		mov	word ptr es:[bx], 0
		mov	byte ptr es:[bx+4], 0FFh
		cmp	word ptr es:[bx+10h], 0
		jz	loc_4D29
		xor	ax, ax
		xor	dx, dx
		push	ax
		push	dx		; dest
		push	ax		; int
		push	dx		; int
		push	word ptr es:[bx+10h] ; int
		call	__mkname
		push	dx
		push	ax		; path
		nop
		push	cs
		call	near ptr _unlink
		pop	cx
		pop	cx
		les	bx, [bp+stream]
		assume es:nothing
		mov	word ptr es:[bx+10h], 0
		assume es:seg2608

loc_4D29::				; CODE XREF: _fclose+Fj _fclose+1Ej ...
		mov	ax, si
		pop	si
		pop	bp
		retf
_fclose		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl fflush(FILE *stream)
_fflush		proc far		; CODE XREF: _fclose+37p _flushall+29p ...

stream		= dword	ptr  6

		push	bp
		mov	bp, sp
		push	si
		mov	ax, word ptr [bp+stream]
		or	ax, word ptr [bp+stream+2]
		jnz	loc_4D42
		nop
		push	cs
		call	near ptr _flushall
		jmp	loc_4DF6
; ---------------------------------------------------------------------------

loc_4D42::				; CODE XREF: _fflush+Aj
		les	bx, [bp+stream]
		assume es:nothing
		mov	ax, es:[bx+12h]
		cmp	ax, word ptr [bp+stream]
		jz	loc_4D54

loc_4D4E::				; CODE XREF: _fflush+C5j
		mov	ax, 0FFFFh
		jmp	loc_4DF8
; ---------------------------------------------------------------------------

loc_4D54::				; CODE XREF: _fflush+1Ej
		les	bx, [bp+stream]
		cmp	word ptr es:[bx], 0
		jl	loc_4DAE
		test	word ptr es:[bx+2], 8
		jnz	loc_4D7D
		mov	ax, es:[bx+0Eh]
		mov	dx, word ptr [bp+stream]
		add	dx, 5
		cmp	ax, word ptr [bp+stream+2]
		jz	loc_4D77
		jmp	loc_4DF6
; ---------------------------------------------------------------------------

loc_4D77::				; CODE XREF: _fflush+44j
		cmp	es:[bx+0Ch], dx
		jnz	loc_4DF6

loc_4D7D::				; CODE XREF: _fflush+35j
		les	bx, [bp+stream]
		mov	word ptr es:[bx], 0
		mov	ax, es:[bx+0Eh]
		mov	dx, word ptr [bp+stream]
		add	dx, 5
		cmp	ax, word ptr [bp+stream+2]
		jnz	loc_4DF6
		cmp	es:[bx+0Ch], dx
		jnz	loc_4DF6
		mov	ax, es:[bx+0Ah]
		mov	dx, es:[bx+8]
		mov	es:[bx+0Eh], ax
		mov	es:[bx+0Ch], dx
		jmp	loc_4DF6
; ---------------------------------------------------------------------------
		jmp	loc_4DF6
; ---------------------------------------------------------------------------

loc_4DAE::				; CODE XREF: _fflush+2Dj
		les	bx, [bp+stream]
		mov	ax, es:[bx+6]
		add	ax, es:[bx]
		inc	ax
		mov	si, ax
		sub	es:[bx], si
		push	ax		; len
		mov	ax, es:[bx+0Ah]
		mov	dx, es:[bx+8]
		mov	es:[bx+0Eh], ax
		mov	es:[bx+0Ch], dx
		push	ax
		push	dx		; buf
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		nop
		push	cs
		call	near ptr ___write
		add	sp, 8
		cmp	ax, si
		jz	loc_4DF6
		les	bx, [bp+stream]
		test	word ptr es:[bx+2], 200h
		jnz	loc_4DF6
		or	word ptr es:[bx+2], 10h
		jmp	loc_4D4E
; ---------------------------------------------------------------------------

loc_4DF6::				; CODE XREF: _fflush+11j _fflush+46j ...
		xor	ax, ax

loc_4DF8::				; CODE XREF: _fflush+23j
		pop	si
		pop	bp
		retf
_fflush		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl findfirst(const char *path, struct ffblk *ffblk, int attrib)
_findfirst	proc far		; CODE XREF: file_box::file_box(uchar *)+F1P
					; seg1891:125FP

path__		= dword	ptr  6
ffblk_		= dword	ptr  0Ah
attrib		= word ptr  0Eh

		push	bp
		mov	bp, sp
		push	ds
		mov	ah, 2Fh
		int	21h		; DOS -	GET DISK TRANSFER AREA ADDRESS
					; Return: ES:BX	-> DTA
		push	es
		push	bx
		mov	ah, 1Ah
		lds	dx, [bp+ffblk_]
		int	21h		; DOS -	SET DISK TRANSFER AREA ADDRESS
					; DS:DX	-> disk	transfer buffer
		mov	ah, 4Eh	; 'N'
		mov	cx, [bp+attrib]
		lds	dx, [bp+path__]
		int	21h		; DOS -	2+ - FIND FIRST	ASCIZ (FINDFIRST)
					; CX = search attributes
					; DS:DX	-> ASCIZ filespec
					; (drive, path,	and wildcards allowed)
		pushf
		pop	cx
		xchg	ax, bx
		mov	ah, 1Ah
		pop	dx
		pop	ds
		int	21h		; DOS -	SET DISK TRANSFER AREA ADDRESS
					; DS:DX	-> disk	transfer buffer
		push	cx
		popf
		pop	ds
		jb	loc_4E28
		xor	ax, ax
		jmp	loc_4E2C
; ---------------------------------------------------------------------------

loc_4E28::				; CODE XREF: _findfirst+27j
		push	bx
		call	__ioerror

loc_4E2C::				; CODE XREF: _findfirst+2Bj
		pop	bp
		retf
_findfirst	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl findnext(struct ffblk *ffblk)
_findnext	proc far		; CODE XREF: file_box::file_box(uchar *)+128P
					; seg1891:128DP

ffblk__		= dword	ptr  6

		push	bp
		mov	bp, sp
		push	ds
		mov	ah, 2Fh
		int	21h		; DOS -	GET DISK TRANSFER AREA ADDRESS
					; Return: ES:BX	-> DTA
		push	es
		push	bx
		mov	ah, 1Ah
		lds	dx, [bp+ffblk__]
		int	21h		; DOS -	SET DISK TRANSFER AREA ADDRESS
					; DS:DX	-> disk	transfer buffer
		mov	ah, 4Fh
		int	21h		; DOS -	2+ - FIND NEXT ASCIZ (FINDNEXT)
					; [DTA]	= data block from
					; last AH = 4Eh/4Fh call
		pushf
		pop	cx
		xchg	ax, bx
		mov	ah, 1Ah
		pop	dx
		pop	ds
		int	21h		; DOS -	SET DISK TRANSFER AREA ADDRESS
					; DS:DX	-> disk	transfer buffer
		push	cx
		popf
		pop	ds
		jb	loc_4E55
		xor	ax, ax
		jmp	loc_4E59
; ---------------------------------------------------------------------------

loc_4E55::				; CODE XREF: _findnext+21j
		push	bx
		call	__ioerror

loc_4E59::				; CODE XREF: _findnext+25j
		pop	bp
		retf
_findnext	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; __int32 __cdecl filelength(int handle)
_filelength	proc far		; CODE XREF: g_open_element(uchar *)+5CP

var_4		= word ptr -4
var_2		= word ptr -2
handle		= word ptr  6

		push	bp
		mov	bp, sp
		sub	sp, 4
		mov	ax, 4201h
		mov	bx, [bp+handle]
		xor	cx, cx
		xor	dx, dx
		int	21h		; DOS -	2+ - MOVE FILE READ/WRITE POINTER (LSEEK)
					; AL = method: offset from present location
		jb	loc_4E93
		push	dx
		push	ax
		mov	ax, 4202h
		xor	cx, cx
		xor	dx, dx
		int	21h		; DOS -	2+ - MOVE FILE READ/WRITE POINTER (LSEEK)
					; AL = method: offset from end of file
		mov	[bp+var_4], ax
		mov	[bp+var_2], dx
		pop	dx
		pop	cx
		jb	loc_4E93
		mov	ax, 4200h
		int	21h		; DOS -	2+ - MOVE FILE READ/WRITE POINTER (LSEEK)
					; AL = method: offset from beginning of	file
		jb	loc_4E93
		mov	dx, [bp+var_2]
		mov	ax, [bp+var_4]
		jmp	loc_4E98
; ---------------------------------------------------------------------------

loc_4E93::				; CODE XREF: _filelength+12j
					; _filelength+27j ...
		push	ax
		call	__ioerror
		cwd

loc_4E98::				; CODE XREF: _filelength+36j
		mov	sp, bp
		pop	bp
		retf
_filelength	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int flushall(void)
_flushall	proc far		; CODE XREF: _fflush+Ep

stream		= dword	ptr -4

		push	bp
		mov	bp, sp
		sub	sp, 4
		push	si
		push	di
		xor	di, di
		mov	si, __nfile
		mov	word ptr [bp+stream+2],	ds
		mov	word ptr [bp+stream], offset __streams
		jmp	loc_4ECF
; ---------------------------------------------------------------------------

loc_4EB4::				; CODE XREF: _flushall+38j
		les	bx, [bp+stream]
		test	word ptr es:[bx+2], 3
		jz	loc_4ECB
		push	word ptr [bp+stream+2]
		push	bx		; stream
		nop
		push	cs
		call	near ptr _fflush
		pop	cx
		pop	cx
		inc	di

loc_4ECB::				; CODE XREF: _flushall+21j
		add	word ptr [bp+stream], 14h

loc_4ECF::				; CODE XREF: _flushall+16j
		mov	ax, si
		dec	si
		or	ax, ax
		jnz	loc_4EB4
		mov	ax, di
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retf
_flushall	endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

sub_4EDE	proc near		; CODE XREF: __openfp+16p

arg_0		= dword	ptr  4
arg_4		= dword	ptr  8
arg_8		= dword	ptr  0Ch

		push	bp
		mov	bp, sp
		push	si
		push	di
		xor	di, di
		les	bx, [bp+arg_8]
		inc	word ptr [bp+arg_8]
		mov	cl, es:[bx]
		mov	al, cl
		cmp	al, 72h	; 'r'
		jnz	loc_4EFC
		mov	dx, 1
		mov	si, 1
		jmp	loc_4F1A
; ---------------------------------------------------------------------------

loc_4EFC::				; CODE XREF: sub_4EDE+14j
		cmp	cl, 77h	; 'w'
		jnz	loc_4F06
		mov	dx, 302h
		jmp	loc_4F0E
; ---------------------------------------------------------------------------

loc_4F06::				; CODE XREF: sub_4EDE+21j
		cmp	cl, 61h	; 'a'
		jnz	loc_4F16
		mov	dx, 902h

loc_4F0E::				; CODE XREF: sub_4EDE+26j
		mov	di, 80h	; ''
		mov	si, 2
		jmp	loc_4F1A
; ---------------------------------------------------------------------------

loc_4F16::				; CODE XREF: sub_4EDE+2Bj
		xor	ax, ax
		jmp	loc_4F94
; ---------------------------------------------------------------------------

loc_4F1A::				; CODE XREF: sub_4EDE+1Cj sub_4EDE+36j
		les	bx, [bp+arg_8]
		mov	cl, es:[bx]
		inc	word ptr [bp+arg_8]
		cmp	cl, 2Bh	; '+'
		jz	loc_4F3B
		les	bx, [bp+arg_8]
		cmp	byte ptr es:[bx], 2Bh ;	'+'
		jnz	loc_4F52
		cmp	cl, 74h	; 't'
		jz	loc_4F3B
		cmp	cl, 62h	; 'b'
		jnz	loc_4F52

loc_4F3B::				; CODE XREF: sub_4EDE+48j sub_4EDE+56j
		cmp	cl, 2Bh	; '+'
		jnz	loc_4F46
		les	bx, [bp+arg_8]
		assume es:nothing
		mov	cl, es:[bx]

loc_4F46::				; CODE XREF: sub_4EDE+60j
		and	dx, 0FFFCh
		or	dx, 4
		mov	di, 180h
		mov	si, 3
		assume es:seg2608

loc_4F52::				; CODE XREF: sub_4EDE+51j sub_4EDE+5Bj
		cmp	cl, 74h	; 't'
		jnz	loc_4F5D
		or	dx, 4000h
		jmp	loc_4F7A
; ---------------------------------------------------------------------------

loc_4F5D::				; CODE XREF: sub_4EDE+77j
		cmp	cl, 62h	; 'b'
		jnz	loc_4F68
		or	dx, 8000h
		jmp	loc_4F77
; ---------------------------------------------------------------------------

loc_4F68::				; CODE XREF: sub_4EDE+82j
		mov	ax, __fmode
		and	ax, 0C000h
		or	dx, ax

loc_4F70::
		mov	ax, dx
		test	ax, 8000h
		jz	loc_4F7A

loc_4F77::				; CODE XREF: sub_4EDE+88j
		or	si, 40h

loc_4F7A::				; CODE XREF: sub_4EDE+7Dj sub_4EDE+97j
		mov	word ptr ds:2E9Ah, seg seg0000
		mov	word ptr __exitfopen, offset __xfclose
		les	bx, [bp+arg_4]
		assume es:seg2b53
		mov	es:[bx], dx
		les	bx, [bp+arg_0]
		mov	es:[bx], di
		mov	ax, si

loc_4F94::				; CODE XREF: sub_4EDE+3Aj
		pop	di
		pop	si
		pop	bp
		retn	0Ch
sub_4EDE	endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __stdcall	_openfp(int, int, int, char *path___, FILE *stream)
__openfp	proc near		; CODE XREF: _fopen+2Ep

var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= word ptr  8
path___		= dword	ptr  0Ah
stream		= dword	ptr  0Eh

		push	bp
		mov	bp, sp
		sub	sp, 4
		push	[bp+arg_4]
		push	[bp+arg_2]
		push	ss
		lea	ax, [bp+var_2]
		push	ax
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		call	sub_4EDE
		assume es:seg2b53
		les	bx, [bp+stream]
		assume es:seg2608
		mov	es:[bx+2], ax
		or	ax, ax
		jz	loc_4FE8
		cmp	byte ptr es:[bx+4], 0
		jge	loc_4FFC
		push	[bp+var_4]
		mov	ax, [bp+var_2]
		or	ax, [bp+arg_0]
		push	ax		; access
		push	word ptr [bp+path___+2]
		push	word ptr [bp+path___] ;	path
		nop
		push	cs
		call	near ptr _open
		add	sp, 8
		les	bx, [bp+stream]
		mov	es:[bx+4], al
		or	al, al
		jge	loc_4FFC

loc_4FE8::				; CODE XREF: __openfp+22j
		les	bx, [bp+stream]
		assume es:nothing
		mov	byte ptr es:[bx+4], 0FFh
		mov	word ptr es:[bx+2], 0

loc_4FF6::				; CODE XREF: __openfp+BAj
		xor	dx, dx
		xor	ax, ax
		jmp	loc_5065
; ---------------------------------------------------------------------------
		assume es:seg2608

loc_4FFC::				; CODE XREF: __openfp+29j __openfp+4Cj
		les	bx, [bp+stream]
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		nop
		push	cs
		call	near ptr _isatty
		pop	cx
		or	ax, ax
		jz	loc_5018
		les	bx, [bp+stream]
		assume es:nothing
		or	word ptr es:[bx+2], 200h
		assume es:seg2608

loc_5018::				; CODE XREF: __openfp+73j
		mov	ax, 200h
		push	ax		; size
		les	bx, [bp+stream]
		test	word ptr es:[bx+2], 200h
		jz	loc_502C
		mov	ax, 1
		jmp	loc_502E
; ---------------------------------------------------------------------------

loc_502C::				; CODE XREF: __openfp+8Bj
		xor	ax, ax

loc_502E::				; CODE XREF: __openfp+90j
		push	ax		; type
		xor	ax, ax
		xor	dx, dx
		push	ax
		push	dx		; buf
		push	word ptr [bp+stream+2]
		push	word ptr [bp+stream] ; stream
		nop
		push	cs
		call	near ptr _setvbuf
		add	sp, 0Ch
		or	ax, ax
		jz	loc_5056
		push	word ptr [bp+stream+2]
		push	word ptr [bp+stream] ; stream
		nop
		push	cs
		call	near ptr _fclose
		pop	cx
		pop	cx
		jmp	loc_4FF6
; ---------------------------------------------------------------------------

loc_5056::				; CODE XREF: __openfp+ABj
		les	bx, [bp+stream]
		mov	word ptr es:[bx+10h], 0
		mov	dx, word ptr [bp+stream+2]
		mov	ax, word ptr [bp+stream]

loc_5065::				; CODE XREF: __openfp+60j
		mov	sp, bp
		pop	bp
		retn	0Eh
__openfp	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__getfp		proc near		; CODE XREF: _fopen+6p

var_4		= dword	ptr -4

		push	bp
		mov	bp, sp
		sub	sp, 4
		mov	word ptr [bp+var_4+2], ds
		mov	word ptr [bp+var_4], offset __streams

loc_5079::				; CODE XREF: __getfp+2Ej
		les	bx, [bp+var_4]
		assume es:seg2608
		cmp	byte ptr es:[bx+4], 0
		jl	loc_509B
		mov	ax, word ptr [bp+var_4]
		add	word ptr [bp+var_4], 14h
		push	ax
		mov	ax, __nfile
		mov	dx, 14h
		imul	dx
		add	ax, offset __streams
		pop	dx
		cmp	dx, ax
		jb	loc_5079

loc_509B::				; CODE XREF: __getfp+16j
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx+4], 0
		jl	loc_50AB
		xor	dx, dx
		xor	ax, ax
		jmp	loc_50B1
; ---------------------------------------------------------------------------

loc_50AB::				; CODE XREF: __getfp+38j
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]

loc_50B1::				; CODE XREF: __getfp+3Ej
		mov	sp, bp
		pop	bp
		retn
__getfp		endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; FILE *__cdecl	fopen(const char *path,	const char *mode)
_fopen		proc far		; CODE XREF: init_game(void)+2E3P
					; seg0fa9:0A42P ...

stream		= dword	ptr -4
path____	= dword	ptr  6
mode		= dword	ptr  0Ah

		push	bp
		mov	bp, sp
		sub	sp, 4
		call	__getfp
		assume es:seg2608
		mov	word ptr [bp+stream+2],	dx
		mov	word ptr [bp+stream], ax
		or	ax, dx
		jnz	loc_50CE
		xor	dx, dx
		xor	ax, ax
		jmp	loc_50E6
; ---------------------------------------------------------------------------

loc_50CE::				; CODE XREF: _fopen+11j
		push	word ptr [bp+stream+2]
		push	word ptr [bp+stream] ; stream
		push	word ptr [bp+path____+2]
		push	word ptr [bp+path____] ; path___
		push	word ptr [bp+mode+2] ; int
		push	word ptr [bp+mode] ; int
		xor	ax, ax
		push	ax		; int
		call	__openfp

loc_50E6::				; CODE XREF: _fopen+17j
		mov	sp, bp
		pop	bp
		retf
_fopen		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int fprintf(FILE *stream, const char *format,	...)
_fprintf	proc far		; CODE XREF: __fperror+A2p _perror+4Ep

stream		= dword	ptr  6
format_		= dword	ptr  0Ah
arg_8		= byte ptr  0Eh

		push	bp
		mov	bp, sp
		mov	ax, offset __fputn
		push	ax
		push	word ptr [bp+stream+2]
		push	word ptr [bp+stream]
		push	word ptr [bp+format_+2]
		push	word ptr [bp+format_]
		lea	ax, [bp+arg_8]
		push	ax
		call	__vprinter
		pop	bp
		retf
_fprintf	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

sub_5106	proc near		; CODE XREF: _fseek+2Fp _ftell+BAp ...

var_4		= dword	ptr -4
arg_0		= dword	ptr  4

		push	bp
		mov	bp, sp
		sub	sp, 4
		push	si
		les	bx, [bp+arg_0]
		assume es:nothing
		cmp	word ptr es:[bx], 0
		jge	loc_5122
		mov	cx, es:[bx+6]
		add	cx, es:[bx]
		inc	cx
		mov	si, cx
		jmp	loc_5131
; ---------------------------------------------------------------------------

loc_5122::				; CODE XREF: sub_5106+Ej
		les	bx, [bp+arg_0]
		mov	ax, es:[bx]
		cwd
		xor	ax, dx
		sub	ax, dx
		mov	cx, ax
		mov	si, ax

loc_5131::				; CODE XREF: sub_5106+1Aj
		les	bx, [bp+arg_0]
		test	word ptr es:[bx+2], 40h
		jnz	loc_517F
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+0Eh]
		mov	dx, es:[bx+0Ch]
		mov	word ptr [bp+var_4+2], ax
		mov	word ptr [bp+var_4], dx
		cmp	word ptr es:[bx], 0
		jge	loc_5178
		jmp	loc_5162
; ---------------------------------------------------------------------------

loc_5155::				; CODE XREF: sub_5106+61j
		dec	word ptr [bp+var_4]
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 0Ah
		jnz	loc_5162
		inc	si

loc_5162::				; CODE XREF: sub_5106+4Dj sub_5106+59j
		mov	ax, cx
		dec	cx
		or	ax, ax
		jnz	loc_5155
		jmp	loc_517F
; ---------------------------------------------------------------------------

loc_516B::				; CODE XREF: sub_5106+77j
		les	bx, [bp+var_4]
		inc	word ptr [bp+var_4]
		cmp	byte ptr es:[bx], 0Ah
		jnz	loc_5178
		inc	si

loc_5178::				; CODE XREF: sub_5106+4Bj sub_5106+6Fj
		mov	ax, cx
		dec	cx
		or	ax, ax
		jnz	loc_516B

loc_517F::				; CODE XREF: sub_5106+34j sub_5106+63j
		mov	ax, si
		pop	si
		mov	sp, bp
		pop	bp
		retn	4
sub_5106	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl fseek(FILE *stream, __int32 offset, int whence)
_fseek		proc far		; CODE XREF: _setvbuf+6Bp

stream		= dword	ptr  6
offset__	= dword	ptr  0Ah
fromwhere	= word ptr  0Eh

		push	bp
		mov	bp, sp
		push	si
		mov	si, [bp+fromwhere]
		push	word ptr [bp+stream+2]
		push	word ptr [bp+stream] ; stream
		nop
		push	cs
		call	near ptr _fflush
		pop	cx
		pop	cx
		or	ax, ax
		jz	loc_51A5
		mov	ax, 0FFFFh
		jmp	loc_5205
; ---------------------------------------------------------------------------

loc_51A5::				; CODE XREF: _fseek+16j
		cmp	si, 1
		jnz	loc_51C1
		les	bx, [bp+stream]
		cmp	word ptr es:[bx], 0
		jle	loc_51C1
		push	word ptr [bp+stream+2]
		push	bx
		call	sub_5106
		cwd
		sub	word ptr [bp+offset__],	ax
		sbb	word ptr [bp+offset__+2], dx

loc_51C1::				; CODE XREF: _fseek+20j _fseek+29j
		les	bx, [bp+stream]
		and	word ptr es:[bx+2], 0FE5Fh
		mov	word ptr es:[bx], 0
		mov	ax, es:[bx+0Ah]
		mov	dx, es:[bx+8]
		mov	es:[bx+0Eh], ax
		mov	es:[bx+0Ch], dx
		push	si		; fromwhere
		push	word ptr [bp+offset__+2]
		push	word ptr [bp+offset__] ; offset
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		nop
		push	cs
		call	near ptr _lseek
		add	sp, 8
		cmp	dx, 0FFFFh
		jnz	loc_5203
		cmp	ax, 0FFFFh
		jnz	loc_5203
		mov	ax, 0FFFFh
		jmp	loc_5205
; ---------------------------------------------------------------------------

loc_5203::				; CODE XREF: _fseek+6Fj _fseek+74j
		xor	ax, ax

loc_5205::				; CODE XREF: _fseek+1Bj _fseek+79j
		pop	si
		pop	bp
		retf
_fseek		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; __int32 __cdecl ftell(FILE *stream)
_ftell		proc far

var_8		= word ptr -8
var_6		= word ptr -6
offset___	= dword	ptr -4
stream		= dword	ptr  6

		push	bp
		mov	bp, sp
		sub	sp, 8

loc_520E::
		mov	ax, 1
		push	ax		; fromwhere
		xor	ax, ax
		xor	dx, dx
		push	ax
		push	dx		; offset
		les	bx, [bp+stream]
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		nop
		push	cs
		call	near ptr _lseek
		add	sp, 8
		mov	word ptr [bp+offset___+2], dx
		mov	word ptr [bp+offset___], ax
		cmp	dx, 0FFFFh
		jnz	loc_523C
		cmp	ax, 0FFFFh
		jnz	loc_523C
		jmp	loc_52DE
; ---------------------------------------------------------------------------

loc_523C::				; CODE XREF: _ftell+2Aj _ftell+2Fj
		les	bx, [bp+stream]
		cmp	word ptr es:[bx], 0
		jl	loc_5248
		jmp	loc_52CE
; ---------------------------------------------------------------------------

loc_5248::				; CODE XREF: _ftell+3Bj
		mov	al, es:[bx+4]
		cbw
		shl	ax, 1
		mov	bx, ax
		test	__openfd[bx], 800h
		jz	loc_52BC
		mov	ax, 2
		push	ax		; fromwhere
		xor	ax, ax
		xor	dx, dx
		push	ax
		push	dx		; offset
		mov	bx, word ptr [bp+stream]
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		nop
		push	cs
		call	near ptr _lseek
		add	sp, 8
		mov	[bp+var_6], dx
		mov	[bp+var_8], ax
		cmp	dx, 0FFFFh
		jnz	loc_5284
		cmp	ax, 0FFFFh
		jz	loc_52E4

loc_5284::				; CODE XREF: _ftell+75j
		xor	ax, ax
		push	ax		; fromwhere
		push	word ptr [bp+offset___+2]
		push	word ptr [bp+offset___]	; offset
		les	bx, [bp+stream]
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		nop
		push	cs
		call	near ptr _lseek
		add	sp, 8
		cmp	dx, 0FFFFh
		jnz	loc_52B0
		cmp	ax, 0FFFFh
		jnz	loc_52B0
		mov	dx, 0FFFFh
		mov	ax, 0FFFFh
		jmp	loc_52E4
; ---------------------------------------------------------------------------

loc_52B0::				; CODE XREF: _ftell+99j _ftell+9Ej
		mov	ax, [bp+var_6]
		mov	dx, [bp+var_8]
		mov	word ptr [bp+offset___+2], ax
		mov	word ptr [bp+offset___], dx

loc_52BC::				; CODE XREF: _ftell+4Fj
		push	word ptr [bp+stream+2]
		push	word ptr [bp+stream]
		call	sub_5106
		cwd
		add	word ptr [bp+offset___], ax
		adc	word ptr [bp+offset___+2], dx
		jmp	loc_52DE
; ---------------------------------------------------------------------------

loc_52CE::				; CODE XREF: _ftell+3Dj
		push	word ptr [bp+stream+2]
		push	word ptr [bp+stream]
		call	sub_5106
		cwd
		sub	word ptr [bp+offset___], ax
		sbb	word ptr [bp+offset___+2], dx

loc_52DE::				; CODE XREF: _ftell+31j _ftell+C4j
		mov	dx, word ptr [bp+offset___+2]
		mov	ax, word ptr [bp+offset___]

loc_52E4::				; CODE XREF: _ftell+7Aj _ftell+A6j
		mov	sp, bp
		pop	bp
		retf
_ftell		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

sub_52E8	proc near		; CODE XREF: sub_5326+Ep _fgetc+78p

stream		= dword	ptr -4

		push	bp
		mov	bp, sp
		sub	sp, 4
		push	si
		mov	si, 14h
		mov	word ptr [bp+stream+2],	ds
		mov	word ptr [bp+stream], offset __streams
		jmp	loc_531A
; ---------------------------------------------------------------------------

loc_52FC::				; CODE XREF: sub_52E8+37j
		les	bx, [bp+stream]
		mov	ax, es:[bx+2]
		and	ax, 300h
		cmp	ax, 300h
		jnz	loc_5316
		push	word ptr [bp+stream+2]
		push	bx		; stream
		nop
		push	cs
		call	near ptr _fflush
		pop	cx
		pop	cx

loc_5316::				; CODE XREF: sub_52E8+21j
		add	word ptr [bp+stream], 14h

loc_531A::				; CODE XREF: sub_52E8+12j
		mov	ax, si
		dec	si
		or	ax, ax
		jnz	loc_52FC
		pop	si
		mov	sp, bp
		pop	bp
		retn
sub_52E8	endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

sub_5326	proc near		; CODE XREF: _fgetc+62p

arg_0		= dword	ptr  4

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		test	word ptr es:[bx+2], 200h
		jz	loc_5337
		call	sub_52E8

loc_5337::				; CODE XREF: sub_5326+Cj
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+6] ; len
		mov	ax, es:[bx+0Ah]
		mov	dx, es:[bx+8]
		mov	es:[bx+0Eh], ax
		mov	es:[bx+0Ch], dx
		push	ax
		push	dx		; buf
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		nop
		push	cs
		call	near ptr ___read
		add	sp, 8
		les	bx, [bp+arg_0]
		mov	es:[bx], ax

loc_5364::
		or	ax, ax
		jle	loc_5371
		and	word ptr es:[bx+2], 0FFDFh
		xor	ax, ax
		jmp	loc_539A
; ---------------------------------------------------------------------------

loc_5371::				; CODE XREF: sub_5326+40j
		les	bx, [bp+arg_0]
		assume es:nothing
		cmp	word ptr es:[bx], 0
		jnz	loc_538A
		mov	ax, es:[bx+2]
		and	ax, 0FE7Fh
		or	ax, 20h
		mov	es:[bx+2], ax
		jmp	loc_5397
; ---------------------------------------------------------------------------

loc_538A::				; CODE XREF: sub_5326+52j
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx], 0
		or	word ptr es:[bx+2], 10h

loc_5397::				; CODE XREF: sub_5326+62j
		mov	ax, 0FFFFh
		assume es:seg2608

loc_539A::				; CODE XREF: sub_5326+49j
		pop	bp
		retn	4
sub_5326	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl _fgetc(FILE *stream)
__fgetc		proc far

stream		= dword	ptr  6

		push	bp
		mov	bp, sp
		les	bx, [bp+stream]
		assume es:nothing
		inc	word ptr es:[bx]
		push	word ptr [bp+stream+2]
		push	bx		; stream
		push	cs
		call	near ptr _fgetc
		pop	cx
		pop	cx
		pop	bp
		retf
__fgetc		endp

; ---------------------------------------------------------------------------

__nfgetc:
		pop	ax
		push	cs
		push	ax
		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl fgetc(FILE *stream)
_fgetc		proc far		; CODE XREF: __fgetc+Ep _fgetchar+6p ...

stream		= dword	ptr  6

		push	bp
		mov	bp, sp
		push	si
		mov	ax, word ptr [bp+stream]
		or	ax, word ptr [bp+stream+2]
		jnz	loc_53C8

loc_53C2::				; CODE XREF: _fgetc+69j _fgetc+B5j ...
		mov	ax, 0FFFFh
		jmp	loc_54A1
; ---------------------------------------------------------------------------

loc_53C8::				; CODE XREF: _fgetc+Aj
		les	bx, [bp+stream]
		cmp	word ptr es:[bx], 0
		jle	loc_53EB

loc_53D1::				; CODE XREF: _fgetc+67j _fgetc+6Bj
		les	bx, [bp+stream]
		dec	word ptr es:[bx]
		mov	ax, es:[bx+0Eh]
		mov	si, es:[bx+0Ch]
		inc	word ptr es:[bx+0Ch]
		mov	es, ax
		assume es:nothing
		mov	al, es:[si]
		jmp	loc_549F
; ---------------------------------------------------------------------------
		assume es:seg2608

loc_53EB::				; CODE XREF: _fgetc+19j
		les	bx, [bp+stream]
		cmp	word ptr es:[bx], 0
		jl	loc_5463
		test	word ptr es:[bx+2], 110h
		jnz	loc_5463
		test	word ptr es:[bx+2], 1
		jz	loc_5463
		les	bx, [bp+stream]
		or	word ptr es:[bx+2], 80h
		cmp	word ptr es:[bx+6], 0
		jz	loc_5423
		push	word ptr [bp+stream+2]
		push	bx
		call	sub_5326
		or	ax, ax
		jz	loc_53D1
		jmp	loc_53C2
; ---------------------------------------------------------------------------
		jmp	loc_53D1
; ---------------------------------------------------------------------------

loc_5423::				; CODE XREF: _fgetc+5Cj _fgetc+DCj
		les	bx, [bp+stream]
		assume es:nothing
		test	word ptr es:[bx+2], 200h
		jz	loc_5431
		call	sub_52E8

loc_5431::				; CODE XREF: _fgetc+76j
		mov	ax, 1
		push	ax		; len
		push	ds
		mov	ax, offset byte_2D700
		push	ax		; buf
		les	bx, [bp+stream]
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		nop
		push	cs
		call	near ptr ___read
		add	sp, 8
		or	ax, ax
		jnz	loc_5482
		les	bx, [bp+stream]
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		nop
		push	cs
		call	near ptr _eof
		pop	cx
		cmp	ax, 1
		jz	loc_546E

loc_5463::				; CODE XREF: _fgetc+3Cj _fgetc+44j ...
		les	bx, [bp+stream]
		or	word ptr es:[bx+2], 10h
		jmp	loc_53C2
; ---------------------------------------------------------------------------

loc_546E::				; CODE XREF: _fgetc+ABj
		les	bx, [bp+stream]
		mov	ax, es:[bx+2]
		and	ax, 0FE7Fh
		or	ax, 20h
		mov	es:[bx+2], ax
		jmp	loc_53C2
; ---------------------------------------------------------------------------

loc_5482::				; CODE XREF: _fgetc+97j
		cmp	byte_2D700, 0Dh
		jnz	loc_5494
		les	bx, [bp+stream]
		test	word ptr es:[bx+2], 40h
		jz	loc_5423

loc_5494::				; CODE XREF: _fgetc+D1j
		les	bx, [bp+stream]
		and	word ptr es:[bx+2], 0FFDFh
		mov	al, byte_2D700
		assume es:nothing

loc_549F::				; CODE XREF: _fgetc+32j
		mov	ah, 0

loc_54A1::				; CODE XREF: _fgetc+Fj
		pop	si
		pop	bp
		retf
_fgetc		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

; int fgetchar(void)
_fgetchar	proc far
		push	ds
		mov	ax, offset __streams
		push	ax		; stream
		push	cs
		call	near ptr _fgetc
		pop	cx
		pop	cx
		retf
_fgetchar	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; char *__cdecl	itoa(int value,	char *string, int radix)
_itoa		proc far		; CODE XREF: show_high_scores(uchar)+BBP
					; show_stats(void)+205P ...

value		= word ptr  6
string		= dword	ptr  8
radix		= word ptr  0Ch

		push	bp
		mov	bp, sp
		mov	bx, [bp+value]
		mov	cx, [bp+radix]
		cmp	cx, 0Ah
		jnz	loc_54C3
		mov	ax, bx
		cwd
		jmp	loc_54C7
; ---------------------------------------------------------------------------

loc_54C3::				; CODE XREF: _itoa+Cj
		mov	ax, bx
		xor	dx, dx

loc_54C7::				; CODE XREF: _itoa+11j
		push	dx
		push	ax
		push	word ptr [bp+string+2]
		push	word ptr [bp+string]
		push	cx
		mov	al, 1
		push	ax
		mov	al, 61h	; 'a'
		push	ax
		call	__longtoa
		pop	bp
		retf
_itoa		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; char *__cdecl	ultoa(unsigned __int32 value, char *string, int	radix)
_ultoa		proc far		; CODE XREF: seg0fa9:106BP
					; return_element(uchar,uchar)+41P

value		= dword	ptr  6
string		= dword	ptr  0Ah
radix		= word ptr  0Eh

		push	bp
		mov	bp, sp
		push	word ptr [bp+value+2]
		push	word ptr [bp+value]
		push	word ptr [bp+string+2]
		push	word ptr [bp+string]
		push	[bp+radix]
		mov	al, 0
		push	ax
		mov	al, 61h	; 'a'
		push	ax
		call	__longtoa
		pop	bp
		retf
_ultoa		endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; char *__cdecl	ltoa(__int32 value, char *string, int radix)
_ltoa		proc far		; CODE XREF: update_men(void)+3AP
					; update_score(int,int)+3CP ...

value		= dword	ptr  6
string		= dword	ptr  0Ah
radix		= word ptr  0Eh

		push	bp
		mov	bp, sp
		mov	ax, [bp+radix]
		push	word ptr [bp+value+2]
		push	word ptr [bp+value]
		push	word ptr [bp+string+2]
		push	word ptr [bp+string]
		push	ax
		cmp	ax, 0Ah
		jnz	loc_5515
		mov	ax, 1
		jmp	loc_5517
; ---------------------------------------------------------------------------

loc_5515::				; CODE XREF: _ltoa+16j
		xor	ax, ax

loc_5517::				; CODE XREF: _ltoa+1Bj
		push	ax
		mov	al, 61h	; 'a'
		push	ax
		call	__longtoa
		pop	bp
		retf
_ltoa		endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void *__cdecl	memcpy(void *dest, const void *src, size_t n)
_memcpy		proc far		; CODE XREF: __stpcpy+23p __fputn+112p ...

dest		= dword	ptr  6
src		= dword	ptr  0Ah
n		= word ptr  0Eh

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	dx, ds
		les	di, [bp+dest]
		assume es:nothing
		lds	si, [bp+src]
		assume ds:nothing
		mov	cx, [bp+n]
		shr	cx, 1
		cld
		rep movsw
		jnb	loc_5538
		assume es:nothing, ds:seg2608
		movsb
		assume es:nothing, ds:nothing

loc_5538::				; CODE XREF: _memcpy+15j
		mov	ds, dx
		assume ds:seg2608
		mov	dx, word ptr [bp+dest+2]
		mov	ax, word ptr [bp+dest]
		pop	di
		pop	si
		pop	bp
		retf
_memcpy		endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void __cdecl setmem(void *dest, unsigned int length, char value)
_setmem		proc far		; CODE XREF: _memset+11p _strnset+29p	...

dest		= dword	ptr  6
length_		= word ptr  0Ah
value		= byte ptr  0Ch

		push	bp
		mov	bp, sp
		push	di
		les	di, [bp+dest]
		assume es:seg2608
		mov	cx, [bp+length_]
		mov	al, [bp+value]
		mov	ah, al
		cld
		test	di, 1
		jz	loc_555E
		jcxz	loc_5565
		stosb
		dec	cx

loc_555E::				; CODE XREF: _setmem+14j
		shr	cx, 1
		rep stosw
		jnb	loc_5565
		stosb

loc_5565::				; CODE XREF: _setmem+16j _setmem+1Ej
		pop	di
		pop	bp
		retf
_setmem		endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void *__cdecl	memset(void *s,	int c, size_t n)
_memset		proc far		; CODE XREF: print_form(uchar *,uchar)+12P
					; prompt_box::prompt_box(uchar *)+82P ...

s		= dword	ptr  6
c_		= word ptr  0Ah
n		= word ptr  0Ch

		push	bp
		mov	bp, sp
		mov	al, byte ptr [bp+c_]
		push	ax		; value
		push	[bp+n]		; value
		push	word ptr [bp+s+2] ; length
		push	word ptr [bp+s]	; dest
		push	cs		; dest
		call	near ptr _setmem
		assume es:seg2608
		add	sp, 8
		mov	dx, word ptr [bp+s+2]
		mov	ax, word ptr [bp+s]
		pop	bp
		retf
_memset		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

sub_5587	proc near		; CODE XREF: _open+8Fp	_open+ADp

arg_0		= word ptr  4
arg_2		= dword	ptr  6

		push	bp
		mov	bp, sp
		push	ds
		mov	cx, [bp+arg_0]
		mov	ah, 3Ch	; '<'
		lds	dx, [bp+arg_2]
		int	21h		; DOS -	2+ - CREATE A FILE WITH	HANDLE (CREAT)
					; CX = attributes for file
					; DS:DX	-> ASCIZ filename (may include drive and path)
		pop	ds
		jb	loc_559A
		jmp	loc_559E
; ---------------------------------------------------------------------------

loc_559A::				; CODE XREF: sub_5587+Fj
		push	ax
		call	__ioerror

loc_559E::				; CODE XREF: sub_5587+11j
		pop	bp
		retn	6
sub_5587	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

sub_55A2	proc near		; CODE XREF: _open+10Bp

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		mov	bx, [bp+arg_0]
		sub	cx, cx
		sub	dx, dx
		mov	ah, 40h
		int	21h		; DOS -	2+ - WRITE TO FILE WITH	HANDLE
					; BX = file handle, CX = number	of bytes to write, DS:DX -> buffer
		pop	bp
		retn	2
sub_55A2	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int open(const char *path, int access, ...)
_open		proc far		; CODE XREF: __openfp+3Dp
					; seg1783:09A7P ...

var_4		= word ptr -4
var_2		= word ptr -2
pathname	= dword	ptr  6
access		= word ptr  0Ah
arg_6		= word ptr  0Ch

		push	bp
		mov	bp, sp
		sub	sp, 4
		push	si
		push	di
		mov	si, [bp+access]
		mov	di, [bp+arg_6]
		test	si, 0C000h
		jnz	loc_55D0
		mov	ax, __fmode
		and	ax, 0C000h
		or	si, ax

loc_55D0::				; CODE XREF: _open+12j
		xor	ax, ax
		push	ax		; func
		push	word ptr [bp+pathname+2]
		push	word ptr [bp+pathname] ; pathname
		nop
		push	cs
		call	near ptr __chmod
		add	sp, 6
		mov	[bp+var_2], ax
		test	si, 100h
		jnz	loc_55ED
		jmp	loc_566D
; ---------------------------------------------------------------------------

loc_55ED::				; CODE XREF: _open+34j
		and	di, __notumask
		mov	ax, di
		test	ax, 180h
		jnz	loc_55FF
		mov	ax, 1
		push	ax
		call	__ioerror

loc_55FF::				; CODE XREF: _open+42j
		cmp	[bp+var_2], 0FFFFh
		jnz	loc_5628
		cmp	__doserrno, 2
		jz	loc_5616
		push	__doserrno

loc_5610::				; CODE XREF: _open+7Ej
		call	__ioerror
		jmp	loc_571D
; ---------------------------------------------------------------------------

loc_5616::				; CODE XREF: _open+56j
		test	di, 80h
		jz	loc_5620
		xor	ax, ax
		jmp	loc_5623
; ---------------------------------------------------------------------------

loc_5620::				; CODE XREF: _open+66j
		mov	ax, 1

loc_5623::				; CODE XREF: _open+6Aj
		mov	[bp+var_2], ax
		jmp	loc_5634
; ---------------------------------------------------------------------------

loc_5628::				; CODE XREF: _open+4Fj
		test	si, 400h
		jz	loc_566D
		mov	ax, 50h	; 'P'
		push	ax
		jmp	loc_5610
; ---------------------------------------------------------------------------

loc_5634::				; CODE XREF: _open+72j
		test	si, 0F0h
		jz	loc_5658
		push	word ptr [bp+pathname+2]
		push	word ptr [bp+pathname]
		xor	ax, ax
		push	ax
		call	sub_5587
		mov	di, ax
		or	ax, ax
		jge	loc_564F
		jmp	loc_571B
; ---------------------------------------------------------------------------

loc_564F::				; CODE XREF: _open+96j
		push	di		; handle
		nop
		push	cs
		call	near ptr __close
		pop	cx
		jmp	loc_566D
; ---------------------------------------------------------------------------

loc_5658::				; CODE XREF: _open+84j
		push	word ptr [bp+pathname+2]
		push	word ptr [bp+pathname]
		push	[bp+var_2]
		call	sub_5587
		mov	di, ax
		or	ax, ax
		jge	loc_56E8
		jmp	loc_571B
; ---------------------------------------------------------------------------

loc_566D::				; CODE XREF: _open+36j	_open+78j ...
		push	si		; oflags
		push	word ptr [bp+pathname+2]
		push	word ptr [bp+pathname] ; path
		nop
		push	cs
		call	near ptr __open
		add	sp, 6
		mov	di, ax
		or	ax, ax
		jl	loc_56E8
		xor	ax, ax
		push	ax		; func
		push	di		; handle
		nop
		push	cs
		call	near ptr _ioctl
		pop	cx
		pop	cx
		mov	[bp+var_4], ax
		test	ax, 80h
		jz	loc_56B8
		or	si, 2000h
		test	si, 8000h
		jz	loc_56C2
		and	ax, 0FFh
		or	ax, 20h
		xor	dx, dx
		push	dx
		push	ax
		mov	ax, 1
		push	ax		; func
		push	di		; handle
		nop
		push	cs
		call	near ptr _ioctl
		add	sp, 8
		jmp	loc_56C2
; ---------------------------------------------------------------------------

loc_56B8::				; CODE XREF: _open+DFj
		test	si, 200h
		jz	loc_56C2
		push	di
		call	sub_55A2

loc_56C2::				; CODE XREF: _open+E9j	_open+102j ...
		test	[bp+var_2], 1
		jz	loc_56E8
		test	si, 100h
		jz	loc_56E8
		test	si, 0F0h
		jz	loc_56E8
		mov	ax, 1
		push	ax
		push	ax		; func
		push	word ptr [bp+pathname+2]
		push	word ptr [bp+pathname] ; pathname
		nop
		push	cs
		call	near ptr __chmod
		add	sp, 8

loc_56E8::				; CODE XREF: _open+B4j	_open+CCj ...
		or	di, di
		jl	loc_571B
		test	si, 300h
		jz	loc_56F7
		mov	ax, 1000h
		jmp	loc_56F9
; ---------------------------------------------------------------------------

loc_56F7::				; CODE XREF: _open+13Cj
		xor	ax, ax

loc_56F9::				; CODE XREF: _open+141j
		mov	dx, si
		and	dx, 0F8FFh
		or	dx, ax
		push	dx
		test	[bp+var_2], 1
		jz	loc_570D
		xor	ax, ax
		jmp	loc_5710
; ---------------------------------------------------------------------------

loc_570D::				; CODE XREF: _open+153j
		mov	ax, 100h

loc_5710::				; CODE XREF: _open+157j
		pop	dx
		or	dx, ax
		mov	bx, di
		shl	bx, 1
		mov	__openfd[bx], dx

loc_571B::				; CODE XREF: _open+98j	_open+B6j ...
		mov	ax, di

loc_571D::				; CODE XREF: _open+5Fj
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retf
_open		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl _open(const char *path, int oflags)
__open		proc far		; CODE XREF: _open+C2p

var_2		= word ptr -2
path_____	= dword	ptr  6
oflags		= word ptr  0Ah

		push	bp
		mov	bp, sp
		sub	sp, 2
		mov	al, 1
		mov	cx, [bp+oflags]
		test	cx, 2
		jnz	loc_573E
		mov	al, 2
		test	cx, 4
		jnz	loc_573E
		mov	al, 0

loc_573E::				; CODE XREF: __open+Fj	__open+17j
		push	ds
		lds	dx, [bp+path_____]
		mov	cl, 0F0h ; 'ð'
		and	cl, byte ptr [bp+oflags]
		or	al, cl
		mov	ah, 3Dh
		int	21h		; DOS -	2+ - OPEN DISK FILE WITH HANDLE
					; DS:DX	-> ASCIZ filename
					; AL = access mode
					; 0 - read, 1 -	write, 2 - read	& write
		pop	ds
		jb	loc_576A
		mov	[bp+var_2], ax
		mov	ax, [bp+oflags]
		and	ax, 0B8FFh
		or	ax, 8000h
		mov	bx, [bp+var_2]
		shl	bx, 1
		mov	__openfd[bx], ax
		mov	ax, [bp+var_2]
		jmp	loc_576E
; ---------------------------------------------------------------------------

loc_576A::				; CODE XREF: __open+2Bj
		push	ax
		call	__ioerror

loc_576E::				; CODE XREF: __open+45j
		mov	sp, bp
		pop	bp
		retf
__open		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void __cdecl perror(const char *s)
_perror		proc far		; CODE XREF: save_all_scores(void)+22P
					; load_scores_in(void)+1FP

var_4		= word ptr -4
var_2		= word ptr -2
s		= dword	ptr  6

		push	bp
		mov	bp, sp
		sub	sp, 4
		mov	ax, _errno
		cmp	ax, _sys_nerr
		jge	loc_57A0
		cmp	_errno,	0
		jl	loc_57A0
		mov	bx, _errno
		mov	cl, 2
		shl	bx, cl
		mov	ax, word ptr (_sys_errlist+2)[bx]
		mov	dx, word ptr _sys_errlist[bx]
		mov	[bp+var_2], ax
		mov	[bp+var_4], dx
		jmp	loc_57A8
; ---------------------------------------------------------------------------

loc_57A0::				; CODE XREF: _perror+Dj _perror+14j
		mov	[bp+var_2], ds
		mov	[bp+var_4], offset aUnknownError ; "Unknown error"

loc_57A8::				; CODE XREF: _perror+2Cj
		push	[bp+var_2]
		push	[bp+var_4]
		push	word ptr [bp+s+2]
		push	word ptr [bp+s]
		push	ds
		mov	ax, offset aSS_0 ; "%s:	%s\n"
		push	ax		; format
		push	ds
		mov	ax, offset stru_2B128
		push	ax		; stream
		nop
		push	cs
		call	near ptr _fprintf
		add	sp, 10h
		mov	sp, bp
		pop	bp
		retf
_perror		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int printf(const char	*format, ...)
_printf		proc far		; CODE XREF: init_game(void)+16P
					; init_game(void)+29P ...

format__	= dword	ptr  6
arg_4		= byte ptr  0Ah

		push	bp
		mov	bp, sp
		mov	ax, offset __fputn
		push	ax
		push	ds
		mov	ax, offset stru_2B114
		push	ax
		push	word ptr [bp+format__+2]
		push	word ptr [bp+format__]
		lea	ax, [bp+arg_4]
		push	ax
		call	__vprinter
		pop	bp
		retf
_printf		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl _fputc(char c, FILE *stream)
__fputc		proc far		; CODE XREF: __fputn+1C2p

c_		= byte ptr  6
stream		= dword	ptr  8

		push	bp
		mov	bp, sp
		les	bx, [bp+stream]
		assume es:nothing
		dec	word ptr es:[bx]
		push	word ptr [bp+stream+2]
		push	bx		; stream
		mov	al, [bp+c_]
		cbw
		push	ax		; c
		nop
		push	cs
		call	near ptr _fputc
		add	sp, 6
		pop	bp
		retf
__fputc		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl fputc(int	c, FILE	*stream)
_fputc		proc far		; CODE XREF: __fputc+14p _fputchar+Cp	...

c__		= word ptr  6
stream		= dword	ptr  8

		push	bp
		mov	bp, sp
		push	si
		mov	al, byte ptr [bp+c__]
		mov	byte_2D702, al
		les	bx, [bp+stream]
		cmp	word ptr es:[bx], 0FFFFh
		jge	loc_5868
		inc	word ptr es:[bx]
		mov	ax, es:[bx+0Eh]
		mov	si, es:[bx+0Ch]
		inc	word ptr es:[bx+0Ch]
		mov	dl, byte_2D702
		mov	es, ax
		mov	es:[si], dl
		mov	es, word ptr [bp+stream+2]
		test	word ptr es:[bx+2], 8
		jnz	loc_583A
		jmp	loc_598E
; ---------------------------------------------------------------------------

loc_583A::				; CODE XREF: _fputc+34j
		cmp	byte_2D702, 0Ah
		jz	loc_584B
		cmp	byte_2D702, 0Dh
		jz	loc_584B
		jmp	loc_598E
; ---------------------------------------------------------------------------

loc_584B::				; CODE XREF: _fputc+3Ej _fputc+45j
		push	word ptr [bp+stream+2]
		push	word ptr [bp+stream] ; stream
		nop
		push	cs
		call	near ptr _fflush
		pop	cx
		pop	cx
		or	ax, ax
		jnz	loc_585F
		jmp	loc_598E
; ---------------------------------------------------------------------------

loc_585F::				; CODE XREF: _fputc+59j _fputc+82j ...
		mov	ax, 0FFFFh
		jmp	loc_5993
; ---------------------------------------------------------------------------
		jmp	loc_598E
; ---------------------------------------------------------------------------

loc_5868::				; CODE XREF: _fputc+11j
		les	bx, [bp+stream]
		test	word ptr es:[bx+2], 90h
		jnz	loc_587B
		test	word ptr es:[bx+2], 2
		jnz	loc_5885

loc_587B::				; CODE XREF: _fputc+70j _fputc+18Aj
		les	bx, [bp+stream]
		or	word ptr es:[bx+2], 10h
		jmp	loc_585F
; ---------------------------------------------------------------------------

loc_5885::				; CODE XREF: _fputc+78j
		les	bx, [bp+stream]
		or	word ptr es:[bx+2], 100h
		cmp	word ptr es:[bx+6], 0
		jz	loc_5904
		cmp	word ptr es:[bx], 0
		jz	loc_58AA
		push	word ptr [bp+stream+2]
		push	bx		; stream
		nop
		push	cs
		call	near ptr _fflush
		pop	cx
		pop	cx
		or	ax, ax
		jnz	loc_585F

loc_58AA::				; CODE XREF: _fputc+98j
		les	bx, [bp+stream]
		mov	ax, es:[bx+6]
		neg	ax
		mov	es:[bx], ax
		mov	ax, es:[bx+0Eh]
		mov	si, es:[bx+0Ch]
		inc	word ptr es:[bx+0Ch]
		mov	dl, byte_2D702
		mov	es, ax
		mov	es:[si], dl
		mov	es, word ptr [bp+stream+2]
		test	word ptr es:[bx+2], 8
		jnz	loc_58D9
		jmp	loc_598E
; ---------------------------------------------------------------------------

loc_58D9::				; CODE XREF: _fputc+D3j
		cmp	byte_2D702, 0Ah
		jz	loc_58EA
		cmp	byte_2D702, 0Dh
		jz	loc_58EA
		jmp	loc_598E
; ---------------------------------------------------------------------------

loc_58EA::				; CODE XREF: _fputc+DDj _fputc+E4j
		push	word ptr [bp+stream+2]
		push	word ptr [bp+stream] ; stream
		nop
		push	cs
		call	near ptr _fflush
		pop	cx
		pop	cx
		or	ax, ax
		jnz	loc_58FE
		jmp	loc_598E
; ---------------------------------------------------------------------------

loc_58FE::				; CODE XREF: _fputc+F8j
		jmp	loc_585F
; ---------------------------------------------------------------------------
		jmp	loc_598E
; ---------------------------------------------------------------------------

loc_5904::				; CODE XREF: _fputc+92j
		les	bx, [bp+stream]
		mov	al, es:[bx+4]
		cbw
		shl	ax, 1
		mov	bx, ax
		test	__openfd[bx], 800h
		jz	loc_5933
		mov	ax, 2
		push	ax		; fromwhere
		xor	ax, ax
		xor	dx, dx
		push	ax
		push	dx		; offset
		mov	bx, word ptr [bp+stream]
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		nop
		push	cs
		call	near ptr _lseek
		add	sp, 8

loc_5933::				; CODE XREF: _fputc+115j
		cmp	byte_2D702, 0Ah
		jnz	loc_5961
		les	bx, [bp+stream]
		test	word ptr es:[bx+2], 40h
		jnz	loc_5961
		mov	ax, 1
		push	ax		; len
		push	ds
		mov	ax, offset asc_2B6CC ; "\r"
		push	ax		; buf
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		nop
		push	cs
		call	near ptr __write
		add	sp, 8
		cmp	ax, 1
		jnz	loc_5980

loc_5961::				; CODE XREF: _fputc+137j _fputc+142j
		mov	ax, 1
		push	ax		; len
		push	ds
		mov	ax, offset byte_2D702
		push	ax		; buf
		les	bx, [bp+stream]
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		nop
		push	cs
		call	near ptr __write
		add	sp, 8
		cmp	ax, 1
		jz	loc_598E

loc_5980::				; CODE XREF: _fputc+15Ej
		les	bx, [bp+stream]
		test	word ptr es:[bx+2], 200h
		jnz	loc_598E
		jmp	loc_587B
; ---------------------------------------------------------------------------

loc_598E::				; CODE XREF: _fputc+36j _fputc+47j ...
		mov	al, byte_2D702
		mov	ah, 0

loc_5993::				; CODE XREF: _fputc+61j
		pop	si
		pop	bp
		retf
_fputc		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl fputchar(int c)
_fputchar	proc far

c____		= word ptr  6

		push	bp
		mov	bp, sp
		push	ds
		mov	ax, offset stru_2B114
		push	ax		; stream
		push	[bp+c____]	; c
		push	cs
		call	near ptr _fputc
		add	sp, 6
		pop	bp
		retf
_fputchar	endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __stdcall	_fputn(FILE *stream, size_t n, void *src)
__fputn		proc near		; DATA XREF: _fprintf+3o _printf+3o ...

var_2		= word ptr -2
stream		= dword	ptr  4
n		= word ptr  8
src		= dword	ptr  0Ah

		push	bp
		mov	bp, sp
		sub	sp, 2
		push	si
		push	di
		mov	di, [bp+n]
		mov	[bp+var_2], di
		les	bx, [bp+stream]
		test	word ptr es:[bx+2], 8
		jz	loc_59F1
		jmp	loc_59E7
; ---------------------------------------------------------------------------

loc_59C5::				; CODE XREF: __fputn+42j
		push	word ptr [bp+stream+2]
		push	word ptr [bp+stream] ; stream
		les	bx, [bp+src]
		assume es:nothing
		inc	word ptr [bp+src]
		mov	al, es:[bx]
		cbw
		push	ax		; c
		push	cs
		call	near ptr _fputc
		add	sp, 6
		cmp	ax, 0FFFFh
		jnz	loc_59E7	; CODE XREF: sub_23069+A7p
					; sub_2433E+6p	...

loc_59E2::				; CODE XREF: __fputn+78j
					; __fputn:loc_5A72j ...
		xor	ax, ax
		jmp	loc_5BA5
; ---------------------------------------------------------------------------

loc_59E7::				; CODE XREF: __fputn+19j __fputn+36j
		mov	ax, di
		dec	di
		or	ax, ax
		jnz	loc_59C5
		jmp	loc_5BA2
; ---------------------------------------------------------------------------
		assume es:seg2608

loc_59F1::				; CODE XREF: __fputn+17j
		les	bx, [bp+stream]
		test	word ptr es:[bx+2], 40h
		jnz	loc_59FF
		jmp	loc_5B27
; ---------------------------------------------------------------------------

loc_59FF::				; CODE XREF: __fputn+50j
		cmp	word ptr es:[bx+6], 0
		jnz	loc_5A09
		jmp	loc_5AD4
; ---------------------------------------------------------------------------

loc_5A09::				; CODE XREF: __fputn+5Aj
		cmp	es:[bx+6], di
		jnb	loc_5A78	; CODE XREF: sub_23069:loc_230B2p
		cmp	word ptr es:[bx], 0
		jz	loc_5A24
		push	word ptr [bp+stream+2]
		push	bx		; stream
		nop
		push	cs
		call	near ptr _fflush
		pop	cx
		pop	cx
		or	ax, ax
		jnz	loc_59E2

loc_5A24::				; CODE XREF: __fputn+69j
		les	bx, [bp+stream]
		assume es:nothing
		mov	al, es:[bx+4]
		cbw
		shl	ax, 1
		mov	bx, ax
		test	__openfd[bx], 800h
		jz	loc_5A53
		mov	ax, 2
		push	ax		; fromwhere
		xor	ax, ax
		xor	dx, dx
		push	ax
		push	dx		; offset
		mov	bx, word ptr [bp+stream]
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		nop
		push	cs
		call	near ptr _lseek
		add	sp, 8

loc_5A53::				; CODE XREF: __fputn+8Cj
		push	di		; len
		push	word ptr [bp+src+2]
		push	word ptr [bp+src] ; buf
		les	bx, [bp+stream]
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		nop
		push	cs
		call	near ptr __write
		add	sp, 8
		cmp	ax, di
		jnz	loc_5A72
		jmp	loc_5BA2
; ---------------------------------------------------------------------------

loc_5A72::				; CODE XREF: __fputn+C3j
		jmp	loc_59E2
; ---------------------------------------------------------------------------
		jmp	loc_5BA2
; ---------------------------------------------------------------------------

loc_5A78::				; CODE XREF: __fputn+63j
		les	bx, [bp+stream]
		mov	ax, es:[bx]
		add	ax, di

loc_5A80::
		jl	loc_5AA8
		cmp	word ptr es:[bx], 0
		jnz	loc_5A94
		mov	ax, 0FFFFh
		sub	ax, es:[bx+6]
		mov	es:[bx], ax
		jmp	loc_5AA8
; ---------------------------------------------------------------------------

loc_5A94::				; CODE XREF: __fputn+DCj
		push	word ptr [bp+stream+2]
		push	word ptr [bp+stream] ; stream
		nop
		push	cs
		call	near ptr _fflush
		pop	cx
		pop	cx
		or	ax, ax
		jz	loc_5AA8
		jmp	loc_59E2
; ---------------------------------------------------------------------------

loc_5AA8::				; CODE XREF: __fputn:loc_5A80j
					; __fputn+E8j ...
		push	di		; n
		push	word ptr [bp+src+2]
		push	word ptr [bp+src] ; src
		les	bx, [bp+stream]
		push	word ptr es:[bx+0Eh]
		push	word ptr es:[bx+0Ch] ; dest
		nop
		push	cs
		call	near ptr _memcpy
		add	sp, 0Ah
		les	bx, [bp+stream]
		mov	ax, es:[bx]
		add	ax, di
		mov	es:[bx], ax
		add	es:[bx+0Ch], di
		jmp	loc_5BA2
; ---------------------------------------------------------------------------

loc_5AD4::				; CODE XREF: __fputn+5Cj
		les	bx, [bp+stream]
		mov	al, es:[bx+4]
		cbw
		shl	ax, 1
		mov	bx, ax
		test	__openfd[bx], 800h
		jz	loc_5B03
		mov	ax, 2
		push	ax		; fromwhere
		xor	ax, ax
		xor	dx, dx
		push	ax
		push	dx		; offset
		mov	bx, word ptr [bp+stream]
		mov	al, es:[bx+4]

loc_5AF9::				; CODE XREF: sub_23069+40p
		cbw
		push	ax		; handle
		nop
		push	cs
		call	near ptr _lseek
		add	sp, 8

loc_5B03::				; CODE XREF: __fputn+13Cj
		push	di		; len
		push	word ptr [bp+src+2]
		push	word ptr [bp+src] ; buf
		les	bx, [bp+stream]
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		nop
		push	cs
		call	near ptr __write
		add	sp, 8
		cmp	ax, di
		jnz	loc_5B22
		jmp	loc_5BA2
; ---------------------------------------------------------------------------

loc_5B22::				; CODE XREF: __fputn+173j
		jmp	loc_59E2
; ---------------------------------------------------------------------------
		jmp	loc_5BA2
; ---------------------------------------------------------------------------
		assume es:seg2608

loc_5B27::				; CODE XREF: __fputn+52j
		les	bx, [bp+stream]
		cmp	word ptr es:[bx+6], 0
		jz	loc_5B83
		jmp	loc_5B7A
; ---------------------------------------------------------------------------

loc_5B33::				; CODE XREF: __fputn+1D5j
		les	bx, [bp+stream]
		assume es:nothing
		inc	word ptr es:[bx]
		jge	loc_5B5B
		mov	ax, es:[bx+0Eh]
		mov	si, es:[bx+0Ch]
		inc	word ptr es:[bx+0Ch]
		les	bx, [bp+src]
		inc	word ptr [bp+src]
		mov	dl, es:[bx]
		mov	es, ax
		mov	es:[si], dl
		mov	al, dl
		mov	ah, 0
		jmp	loc_5B72
; ---------------------------------------------------------------------------

loc_5B5B::				; CODE XREF: __fputn+18Fj
		push	word ptr [bp+stream+2]
		push	word ptr [bp+stream] ; stream
		les	bx, [bp+src]
		inc	word ptr [bp+src]
		mov	al, es:[bx]
		push	ax		; c
		push	cs
		call	near ptr __fputc
		add	sp, 6

loc_5B72::				; CODE XREF: __fputn+1AFj
		cmp	ax, 0FFFFh
		jnz	loc_5B7A
		jmp	loc_59E2
; ---------------------------------------------------------------------------

loc_5B7A::				; CODE XREF: __fputn+187j __fputn+1CBj
		mov	ax, di
		dec	di
		or	ax, ax
		jnz	loc_5B33
		jmp	loc_5BA2
; ---------------------------------------------------------------------------
		assume es:seg2608

loc_5B83::				; CODE XREF: __fputn+185j
		push	di		; len
		push	word ptr [bp+src+2] ; len
		push	word ptr [bp+src] ; buf
		les	bx, [bp+stream]
		mov	al, es:[bx+4]
		cbw
		push	ax		; buf
		nop
		push	cs		; handle
		call	near ptr ___write
		assume es:seg2b53
		add	sp, 8
		cmp	ax, di
		jz	loc_5BA2
		jmp	loc_59E2
; ---------------------------------------------------------------------------

loc_5BA2::				; CODE XREF: __fputn+44j __fputn+C5j ...
		mov	ax, [bp+var_2]

loc_5BA5::				; CODE XREF: __fputn+3Aj
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn	0Ah
__fputn		endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl __far __read(int handle, void *buf, unsigned int len)
___read		proc far		; CODE XREF: sub_5326+32p _fgetc+8Fp ...

var_3		= byte ptr -3
var_2		= word ptr -2
handle		= word ptr  6
buf		= dword	ptr  8
len		= word ptr  0Ch

		push	bp
		mov	bp, sp
		sub	sp, 4
		push	si
		push	di
		mov	ax, [bp+handle]
		cmp	ax, __nfile
		jb	loc_5BC8
		mov	ax, 6
		push	ax
		call	__ioerror
		jmp	loc_5C78
; ---------------------------------------------------------------------------

loc_5BC8::				; CODE XREF: ___read+Fj
		mov	ax, [bp+len]
		inc	ax
		cmp	ax, 2
		jb	loc_5BDE
		mov	bx, [bp+handle]
		shl	bx, 1
		test	__openfd[bx], 200h
		jz	loc_5BE3

loc_5BDE::				; CODE XREF: ___read+22j
		xor	ax, ax
		jmp	loc_5C78
; ---------------------------------------------------------------------------

loc_5BE3::				; CODE XREF: ___read+2Fj ___read+A2j
		push	[bp+len]	; len
		push	word ptr [bp+buf+2]
		push	word ptr [bp+buf] ; buf
		push	[bp+handle]	; handle
		nop
		push	cs
		call	near ptr __read
		add	sp, 8
		mov	[bp+var_2], ax
		inc	ax
		cmp	ax, 2
		jb	loc_5C0D
		mov	bx, [bp+handle]
		shl	bx, 1
		test	__openfd[bx], 4000h
		jnz	loc_5C12

loc_5C0D::				; CODE XREF: ___read+51j
		mov	ax, [bp+var_2]
		jmp	loc_5C78
; ---------------------------------------------------------------------------

loc_5C12::				; CODE XREF: ___read+5Ej
		mov	cx, [bp+var_2]
		les	si, [bp+buf]
		assume es:nothing
		mov	di, si
		mov	bx, si
		cld

loc_5C1D::				; CODE XREF: ___read+7Bj
					; ___read:loc_5C2Cj
		lods	byte ptr es:[si]
		cmp	al, 1Ah
		jz	loc_5C53
		cmp	al, 0Dh
		jz	loc_5C2C
		stosb
		loop	loc_5C1D
		jmp	loc_5C4B
; ---------------------------------------------------------------------------

loc_5C2C::				; CODE XREF: ___read+78j
		loop	loc_5C1D
		push	es
		push	bx
		mov	ax, 1
		push	ax		; len
		lea	ax, [bp+var_3]
		push	ss
		push	ax		; buf
		push	[bp+handle]	; handle
		nop
		push	cs
		call	near ptr __read
		add	sp, 8
		pop	bx
		pop	es
		cld
		mov	al, [bp+var_3]
		stosb

loc_5C4B::				; CODE XREF: ___read+7Dj
		cmp	di, bx
		jnz	loc_5C51
		jmp	loc_5BE3
; ---------------------------------------------------------------------------

loc_5C51::				; CODE XREF: ___read+A0j
		jmp	loc_5C75
; ---------------------------------------------------------------------------

loc_5C53::				; CODE XREF: ___read+74j
		push	bx
		mov	ax, 1
		push	ax		; fromwhere
		neg	cx
		sbb	ax, ax
		push	ax
		push	cx		; offset
		push	[bp+handle]	; handle
		nop
		push	cs
		call	near ptr _lseek
		add	sp, 8
		mov	bx, [bp+handle]
		shl	bx, 1
		or	__openfd[bx], 200h
		pop	bx

loc_5C75::				; CODE XREF: ___read:loc_5C51j
		sub	di, bx
		xchg	ax, di
		assume es:seg2608

loc_5C78::				; CODE XREF: ___read+18j ___read+33j ...
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retf
___read		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame thunk

; int __cdecl __far read(int handle, void *buf,	unsigned int len)
_read		proc far		; CODE XREF: seg1891:12F4P
					; load_scores_in(void)+38P ...

handle		= word ptr  6
buf		= dword	ptr  8
len		= word ptr  0Ch

		jmp	near ptr ___read
_read		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl setvbuf(FILE *stream, char *buf, int type, size_t	size)
_setvbuf	proc far		; CODE XREF: __setupio+77p
					; __setupio+B3p ...

stream		= dword	ptr  6
buf		= dword	ptr  0Ah
type_		= word ptr  0Eh
size_		= word ptr  10h

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	di, [bp+type_]
		mov	si, [bp+size_]
		les	bx, [bp+stream]
		mov	ax, es:[bx+12h]
		cmp	ax, word ptr [bp+stream]
		jnz	loc_5CA3
		cmp	di, 2
		jg	loc_5CA3
		cmp	si, 7FFFh
		jbe	loc_5CA9

loc_5CA3::				; CODE XREF: _setvbuf+15j _setvbuf+1Aj ...
		mov	ax, 0FFFFh
		jmp	loc_5D9A
; ---------------------------------------------------------------------------

loc_5CA9::				; CODE XREF: _setvbuf+20j
		cmp	word_2B6D0, 0
		jnz	loc_5CBF
		cmp	word ptr [bp+stream], offset stru_2B114
		jnz	loc_5CBF
		mov	word_2B6D0, 1
		jmp	loc_5CD3
; ---------------------------------------------------------------------------

loc_5CBF::				; CODE XREF: _setvbuf+2Dj _setvbuf+34j
		cmp	word_2B6CE, 0
		jnz	loc_5CD3
		cmp	word ptr [bp+stream], offset __streams
		jnz	loc_5CD3
		mov	word_2B6CE, 1

loc_5CD3::				; CODE XREF: _setvbuf+3Cj _setvbuf+43j ...
		les	bx, [bp+stream]
		cmp	word ptr es:[bx], 0
		jz	loc_5CF2
		mov	ax, 1
		push	ax		; whence
		xor	ax, ax
		xor	dx, dx
		push	ax
		push	dx		; offset
		push	word ptr [bp+stream+2]
		push	bx		; stream
		nop
		push	cs
		call	near ptr _fseek
		add	sp, 0Ah

loc_5CF2::				; CODE XREF: _setvbuf+59j
		les	bx, [bp+stream]
		test	word ptr es:[bx+2], 4
		jz	loc_5D0C
		push	word ptr es:[bx+0Ah]
		push	word ptr es:[bx+8] ; block
		nop
		push	cs
		call	near ptr _farfree
		pop	cx
		pop	cx

loc_5D0C::				; CODE XREF: _setvbuf+7Aj
		les	bx, [bp+stream]
		and	word ptr es:[bx+2], 0FFF3h
		mov	word ptr es:[bx+6], 0
		mov	ax, word ptr [bp+stream+2]
		mov	dx, word ptr [bp+stream]
		add	dx, 5
		mov	es:[bx+0Ah], ax
		mov	es:[bx+8], dx
		mov	es:[bx+0Eh], ax
		mov	es:[bx+0Ch], dx
		cmp	di, 2
		jz	loc_5D98
		or	si, si
		jbe	loc_5D98
		mov	word ptr __exitbuf+2, seg seg0000
		mov	word ptr __exitbuf, offset __xfflush
		mov	ax, word ptr [bp+buf]
		or	ax, word ptr [bp+buf+2]
		jnz	loc_5D71
		push	si		; size
		nop
		push	cs
		call	near ptr _malloc
		assume es:nothing
		pop	cx
		mov	word ptr [bp+buf+2], dx
		mov	word ptr [bp+buf], ax
		or	ax, dx
		jnz	loc_5D64
		jmp	loc_5CA3
; ---------------------------------------------------------------------------

loc_5D64::				; CODE XREF: _setvbuf+DEj
		les	bx, [bp+stream]
		assume es:seg2608
		or	word ptr es:[bx+2], 4

loc_5D6C::				; CODE XREF: sub_229C4+51p
		jmp	loc_5D71
; ---------------------------------------------------------------------------
		jmp	loc_5CA3
; ---------------------------------------------------------------------------

loc_5D71::				; CODE XREF: _setvbuf+CDj
					; _setvbuf:loc_5D6Cj
		les	bx, [bp+stream]
		mov	ax, word ptr [bp+buf+2]
		mov	dx, word ptr [bp+buf]
		mov	es:[bx+0Eh], ax
		mov	es:[bx+0Ch], dx
		mov	es:[bx+0Ah], ax
		mov	es:[bx+8], dx
		mov	es:[bx+6], si
		cmp	di, 1
		jnz	loc_5D98
		or	word ptr es:[bx+2], 8

loc_5D98::				; CODE XREF: _setvbuf+B5j _setvbuf+B9j ...
		xor	ax, ax

loc_5D9A::				; CODE XREF: _setvbuf+25j
		pop	di
		pop	si
		pop	bp
		retf
_setvbuf	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; char *__cdecl	strcat(char *dest, const char *src)
_strcat		proc far		; CODE XREF: __mkname+4Dp
					; play_game(uchar)+6DFP ...

dest		= dword	ptr  6
src		= dword	ptr  0Ah

		push	bp
		mov	bp, sp
		push	si
		push	di
		cld
		push	ds
		les	di, [bp+dest]
		mov	dx, di
		xor	al, al
		mov	cx, 0FFFFh
		repne scasb
		push	es
		lea	si, [di-1]
		les	di, [bp+src]
		mov	cx, 0FFFFh
		repne scasb
		not	cx
		sub	di, cx
		push	es
		pop	ds
		pop	es
		xchg	si, di
		test	si, 1
		jz	loc_5DCE
		movsb
		dec	cx

loc_5DCE::				; CODE XREF: _strcat+2Cj
		shr	cx, 1
		rep movsw
		jnb	loc_5DD5
		movsb

loc_5DD5::				; CODE XREF: _strcat+34j
		xchg	ax, dx
		mov	dx, es
		pop	ds
		pop	di
		pop	si
		pop	bp
		retf
_strcat		endp

		assume es:seg2b53

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl strcmp(const char	*s1, const char	*s2)
_strcmp		proc far		; CODE XREF: parse_options(int,uchar **)+31P
					; parse_options(int,uchar **)+58P ...

s1		= dword	ptr  6
s2		= dword	ptr  0Ah

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	dx, ds
		cld
		xor	ax, ax
		mov	bx, ax
		les	di, [bp+s2]
		assume es:seg2608
		mov	si, di
		xor	al, al
		mov	cx, 0FFFFh
		repne scasb
		not	cx
		mov	di, si
		lds	si, [bp+s1]
		assume ds:seg2b53
		repe cmpsb
		mov	al, [si-1]
		mov	bl, es:[di-1]
		sub	ax, bx
		mov	ds, dx
		assume ds:seg2608
		pop	di
		pop	si
		pop	bp
		retf
_strcmp		endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; char *__cdecl	strcpy(char *dest, const char *src)
_strcpy		proc far		; CODE XREF: play_game(uchar)+6C1P
					; add_barrel(uint,uint)+12P ...

dest		= dword	ptr  6
src		= dword	ptr  0Ah

		push	bp
		mov	bp, sp
		push	si
		push	di
		cld
		les	di, [bp+src]
		assume es:seg2608
		mov	si, di
		xor	al, al
		mov	cx, 0FFFFh
		repne scasb
		not	cx
		push	ds
		mov	ax, es
		mov	ds, ax
		les	di, [bp+dest]
		rep movsb
		pop	ds
		mov	dx, word ptr [bp+dest+2]
		mov	ax, word ptr [bp+dest]
		pop	di
		pop	si
		pop	bp
		retf
_strcpy		endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; char *__cdecl	strdup(const char *s)
_strdup		proc far		; CODE XREF: game_manager::load_voc(uchar *)+61P
					; game_manager::load_pcs(uchar *)+51P ...

dest		= dword	ptr -4
src		= dword	ptr  6

		push	bp
		mov	bp, sp
		sub	sp, 4
		push	si
		push	word ptr [bp+src+2]
		push	word ptr [bp+src] ; s
		nop
		push	cs
		call	near ptr _strlen
		assume es:seg2608
		pop	cx
		pop	cx
		inc	ax
		mov	si, ax
		push	ax		; size
		nop
		push	cs
		call	near ptr _malloc
		assume es:nothing
		pop	cx
		mov	word ptr [bp+dest+2], dx
		mov	word ptr [bp+dest], ax
		or	ax, dx
		jz	loc_5E71
		push	si		; n
		push	word ptr [bp+src+2]
		push	word ptr [bp+src] ; src
		push	dx
		push	word ptr [bp+dest] ; dest
		nop
		push	cs
		call	near ptr _memcpy
		assume es:nothing
		add	sp, 0Ah

loc_5E71::				; CODE XREF: _strdup+26j
		mov	dx, word ptr [bp+dest+2]
		mov	ax, word ptr [bp+dest]
		pop	si
		mov	sp, bp
		pop	bp
		retf
_strdup		endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; size_t __cdecl strlen(const char *s)
_strlen		proc far		; CODE XREF: __stpcpy+Cp _cputs+11p ...

s		= dword	ptr  6

		push	bp
		mov	bp, sp
		push	di
		les	di, [bp+s]
		assume es:seg2608
		xor	ax, ax
		cmp	ax, word ptr [bp+s+2]
		jnz	loc_5E8E
		cmp	ax, di
		jz	loc_5E98

loc_5E8E::				; CODE XREF: _strlen+Cj
		cld
		mov	cx, 0FFFFh
		repne scasb
		xchg	ax, cx
		not	ax
		dec	ax

loc_5E98::				; CODE XREF: _strlen+10j
		pop	di
		pop	bp
		retf
_strlen		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; char *__cdecl	strncpy(char *dest, const char *src, size_t maxlen)
_strncpy	proc far		; CODE XREF: parse_box_string(text_box *,uchar *)+7BP

dest		= dword	ptr  6
src		= dword	ptr  0Ah
maxlen		= word ptr  0Eh

		push	bp
		mov	bp, sp
		push	si
		push	di
		cld
		les	di, [bp+src]
		assume es:nothing
		mov	si, di
		xor	al, al
		mov	bx, [bp+maxlen]
		mov	cx, bx
		repne scasb
		sub	bx, cx
		push	ds
		mov	di, es
		mov	ds, di
		les	di, [bp+dest]
		xchg	cx, bx
		rep movsb
		mov	cx, bx
		rep stosb
		pop	ds
		mov	dx, word ptr [bp+dest+2]
		mov	ax, word ptr [bp+dest]
		pop	di
		pop	si
		pop	bp
		retf
_strncpy	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far strnset(void *dest,	char, unsigned int length_)
_strnset	proc far		; CODE XREF: print_form(uchar *,uchar)+9FP
					; file_box::update(void)+99P

dest		= dword	ptr  6
arg_4		= byte ptr  0Ah
length_		= word ptr  0Ch

		push	bp
		mov	bp, sp
		push	si
		mov	si, [bp+length_]
		push	word ptr [bp+dest+2]
		push	word ptr [bp+dest] ; s
		nop
		push	cs
		call	near ptr _strlen
		pop	cx
		pop	cx
		mov	dx, ax
		cmp	dx, si
		jnb	loc_5EE8
		mov	si, dx

loc_5EE8::				; CODE XREF: _strnset+18j
		mov	al, [bp+arg_4]
		push	ax		; value
		push	si		; length
		push	word ptr [bp+dest+2]
		push	word ptr [bp+dest] ; dest
		nop
		push	cs
		call	near ptr _setmem
		add	sp, 8
		mov	dx, word ptr [bp+dest+2]
		mov	ax, word ptr [bp+dest]
		pop	si
		pop	bp
		retf
_strnset	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far strset(void	*dest, char)
_strset		proc far		; CODE XREF: seg0fa9:loc_12BCEP

dest		= dword	ptr  6
arg_4		= byte ptr  0Ah

		push	bp
		mov	bp, sp
		mov	al, [bp+arg_4]
		push	ax		; value
		push	word ptr [bp+dest+2]
		push	word ptr [bp+dest] ; s
		nop
		push	cs
		call	near ptr _strlen
		pop	cx
		pop	cx
		push	ax		; length
		push	word ptr [bp+dest+2]
		push	word ptr [bp+dest] ; dest
		nop
		push	cs
		call	near ptr _setmem
		add	sp, 8
		mov	dx, word ptr [bp+dest+2]
		mov	ax, word ptr [bp+dest]
		pop	bp
		retf
_strset		endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; char *__cdecl	strupr(char *s)
_strupr		proc far		; CODE XREF: seg0fa9:06EAP
					; game_manager::load_loop(uchar	*)+6FP

s		= dword	ptr  6

		push	bp
		mov	bp, sp
		push	si
		cld
		push	ds
		lds	si, [bp+s]
		mov	dx, si
		jmp	loc_5F47
; ---------------------------------------------------------------------------

loc_5F3C::				; CODE XREF: _strupr+1Bj
		sub	al, 61h	; 'a'
		cmp	al, 19h
		ja	loc_5F47
		add	al, 41h	; 'A'
		mov	[si-1],	al

loc_5F47::				; CODE XREF: _strupr+Bj _strupr+11j
		lodsb
		and	al, al
		jnz	loc_5F3C
		xchg	ax, dx
		mov	dx, ds
		pop	ds
		pop	si
		pop	bp
		retf
_strupr		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl vfprintf(FILE *stream, const char	*format, void *arglist)
_vfprintf	proc far		; CODE XREF: print_form(uchar *,uchar)+13FP
					; print_form(uchar *,uchar)+16CP

stream		= dword	ptr  6
format____	= dword	ptr  0Ah
arglist		= dword	ptr  0Eh

		push	bp
		mov	bp, sp
		mov	ax, offset __fputn
		push	ax
		push	word ptr [bp+stream+2]
		push	word ptr [bp+stream]
		push	word ptr [bp+format____+2]
		push	word ptr [bp+format____]
		push	word ptr [bp+arglist]
		call	__vprinter
		pop	bp
		retf
_vfprintf	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl __far __write(int	handle,	void *buf, unsigned int	len)
___write	proc far		; CODE XREF: _fflush+ABp __fputn+1EBp	...

var_8E		= byte ptr -8Eh
var_C		= dword	ptr -0Ch
var_7		= byte ptr -7
var_6		= word ptr -6
var_4		= dword	ptr -4
handle		= word ptr  6
buf		= dword	ptr  8
len		= word ptr  0Ch

		push	bp
		mov	bp, sp
		sub	sp, 8Eh
		push	si
		push	di
		mov	di, [bp+handle]
		cmp	di, __nfile
		jb	short loc_5F8A
		mov	ax, 6
		push	ax
		call	__ioerror
		jmp	loc_60B9
; ---------------------------------------------------------------------------

loc_5F8A::				; CODE XREF: ___write+10j
		mov	ax, [bp+len]
		inc	ax
		cmp	ax, 2
		jnb	short loc_5F98
		xor	ax, ax
		jmp	loc_60B9
; ---------------------------------------------------------------------------

loc_5F98::				; CODE XREF: ___write+23j
		mov	bx, di
		shl	bx, 1
		test	__openfd[bx], 800h
		jz	short loc_5FB7
		mov	ax, 2
		push	ax		; fromwhere
		xor	ax, ax
		xor	dx, dx
		push	ax
		push	dx		; offset
		push	di		; handle
		nop
		push	cs
		call	near ptr _lseek
		add	sp, 8

loc_5FB7::				; CODE XREF: ___write+34j
		mov	bx, di
		shl	bx, 1
		test	__openfd[bx], 4000h
		jnz	loc_5FD8
		push	[bp+len]	; len
		push	word ptr [bp+buf+2]
		push	word ptr [bp+buf] ; buf
		push	di		; handle
		nop
		push	cs
		call	near ptr __write
		add	sp, 8
		jmp	loc_60B9
; ---------------------------------------------------------------------------

loc_5FD8::				; CODE XREF: ___write+53j
		mov	bx, di
		shl	bx, 1
		and	__openfd[bx], 0FDFFh
		mov	ax, word ptr [bp+buf+2]
		mov	dx, word ptr [bp+buf]
		mov	word ptr [bp+var_C+2], ax
		mov	word ptr [bp+var_C], dx
		mov	ax, [bp+len]
		mov	[bp+var_6], ax
		jmp	loc_606B
; ---------------------------------------------------------------------------

loc_5FF6::				; CODE XREF: ___write+10Dj
		dec	[bp+var_6]
		les	bx, [bp+var_C]
		assume es:seg2b53
		inc	word ptr [bp+var_C]
		mov	al, es:[bx]
		mov	[bp+var_7], al
		cmp	al, 0Ah
		jnz	loc_6013
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx], 0Dh
		inc	word ptr [bp+var_4]

loc_6013::				; CODE XREF: ___write+99j
		les	bx, [bp+var_4]
		mov	al, [bp+var_7]
		mov	es:[bx], al
		inc	word ptr [bp+var_4]
		lea	ax, [bp+var_8E]
		mov	dx, word ptr [bp+var_4]
		xor	bx, bx
		sub	dx, ax
		sbb	bx, 0
		or	bx, bx
		jl	short loc_6075
		jnz	short loc_6039
		cmp	dx, 80h	; ''
		jb	short loc_6075

loc_6039::				; CODE XREF: ___write+C3j
		lea	ax, [bp+var_8E]
		mov	si, word ptr [bp+var_4]
		xor	dx, dx
		sub	si, ax
		sbb	dx, 0
		push	si		; len
		push	ss
		push	ax		; buf
		push	di		; handle
		nop
		push	cs
		call	near ptr __write
		add	sp, 8
		mov	dx, ax
		cmp	ax, si
		jz	loc_606B
		cmp	dx, 0FFFFh
		jnz	loc_6063

loc_605E::				; CODE XREF: ___write+13Dj
		mov	ax, 0FFFFh
		jmp	loc_60B4
; ---------------------------------------------------------------------------

loc_6063::				; CODE XREF: ___write+EEj
		mov	ax, [bp+len]
		sub	ax, [bp+var_6]
		jmp	loc_60B0
; ---------------------------------------------------------------------------
		assume es:seg2608

loc_606B::				; CODE XREF: ___write+86j ___write+E9j
		lea	ax, [bp+var_8E]
		mov	word ptr [bp+var_4+2], ss
		mov	word ptr [bp+var_4], ax

loc_6075::				; CODE XREF: ___write+C1j ___write+C9j
		cmp	[bp+var_6], 0
		jz	loc_607E
		jmp	loc_5FF6
; ---------------------------------------------------------------------------
		assume es:seg2b53

loc_607E::				; CODE XREF: ___write+10Bj
		lea	ax, [bp+var_8E]
		mov	si, word ptr [bp+var_4]
		xor	dx, dx
		sub	si, ax
		sbb	dx, 0
		mov	ax, si
		or	ax, ax
		jbe	loc_60B6
		push	si		; len
		push	ss		; len
		lea	ax, [bp+var_8E]
		push	ax		; buf
		push	di		; buf
		nop
		push	cs		; handle
		call	near ptr __write
		add	sp, 8
		mov	dx, ax
		cmp	ax, si
		jz	loc_60B6
		cmp	dx, 0FFFFh
		jz	loc_605E
		mov	ax, [bp+len]

loc_60B0::				; CODE XREF: ___write+FBj
		add	ax, dx
		sub	ax, si

loc_60B4::				; CODE XREF: ___write+F3j
		jmp	loc_60B9
; ---------------------------------------------------------------------------

loc_60B6::				; CODE XREF: ___write+122j
					; ___write+138j
		mov	ax, [bp+len]

loc_60B9::				; CODE XREF: ___write+19j ___write+27j ...
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retf
___write	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl _write(int handle, const void *buf, unsigned int len)
__write		proc far		; CODE XREF: _fputc+155p _fputc+174p ...

handle		= word ptr  6
buf		= dword	ptr  8
len		= word ptr  0Ch

		push	bp
		mov	bp, sp
		mov	bx, [bp+handle]
		shl	bx, 1
		test	__openfd[bx], 1
		jz	loc_60D5
		mov	ax, 5
		push	ax
		jmp	loc_60F6
; ---------------------------------------------------------------------------

loc_60D5::				; CODE XREF: __write+Ej
		push	ds
		mov	ah, 40h	; '@'
		mov	bx, [bp+handle]
		mov	cx, [bp+len]
		lds	dx, [bp+buf]
		assume ds:seg2b53
		int	21h		; DOS -	2+ - WRITE TO FILE WITH	HANDLE
					; BX = file handle, CX = number	of bytes to write, DS:DX -> buffer
		pop	ds
		assume ds:seg2608
		jb	loc_60F5
		push	ax
		mov	bx, [bp+handle]
		shl	bx, 1
		or	__openfd[bx], 1000h
		pop	ax
		jmp	loc_60F9
; ---------------------------------------------------------------------------

loc_60F5::				; CODE XREF: __write+25j
		push	ax

loc_60F6::				; CODE XREF: __write+14j
		call	__ioerror

loc_60F9::				; CODE XREF: __write+34j
		pop	bp
		retf
__write		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame thunk

; int __cdecl __far write(int handle, void *buf, unsigned int len)
_write		proc far		; CODE XREF: seg1783:09C9P
					; seg1783:09E8P ...

handle		= word ptr  6
buf		= dword	ptr  8
len		= word ptr  0Ch

		jmp	near ptr ___write
_write		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__xfclose	proc far		; DATA XREF: sub_4EDE+A2o

stream		= dword	ptr -4

		push	bp
		mov	bp, sp
		sub	sp, 4
		push	si
		xor	si, si
		mov	word ptr [bp+stream+2],	ds
		mov	word ptr [bp+stream], offset __streams
		cmp	si, __nfile
		jnb	loc_6136

loc_6115::				; CODE XREF: __xfclose+36j
		les	bx, [bp+stream]
		assume es:nothing
		test	word ptr es:[bx+2], 3
		jz	loc_612B
		push	word ptr [bp+stream+2]
		push	bx		; stream
		nop
		push	cs
		call	near ptr _fclose
		pop	cx
		pop	cx

loc_612B::				; CODE XREF: __xfclose+20j
		add	word ptr [bp+stream], 14h
		inc	si
		cmp	si, __nfile
		jb	loc_6115

loc_6136::				; CODE XREF: __xfclose+15j
		pop	si
		mov	sp, bp
		pop	bp
		retf
__xfclose	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__xfflush	proc far		; DATA XREF: _setvbuf+C1o

stream		= dword	ptr -4

		push	bp
		mov	bp, sp
		sub	sp, 4
		push	si
		mov	si, 4
		mov	word ptr [bp+stream+2],	ds
		mov	word ptr [bp+stream], offset __streams
		jmp	loc_616A
; ---------------------------------------------------------------------------

loc_614F::				; CODE XREF: __xfflush+31j
		les	bx, [bp+stream]
		test	word ptr es:[bx+2], 3
		jz	loc_6165
		push	word ptr [bp+stream+2]
		push	bx		; stream
		nop
		push	cs
		call	near ptr _fflush
		pop	cx
		pop	cx

loc_6165::				; CODE XREF: __xfflush+1Dj
		dec	si

loc_6166::
		add	word ptr [bp+stream], 14h

loc_616A::				; CODE XREF: __xfflush+12j
		or	si, si
		jnz	loc_614F
		pop	si

loc_616F::
		mov	sp, bp
		pop	bp
		retf
__xfflush	endp

seg0000		ends

; ===========================================================================

; Segment type:	Pure code
seg03f9		segment	byte public 'CODE' use16
		assume cs:seg03f9
		;org 3
		assume es:seg2608, ss:nothing, ds:seg2608, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: noreturn bp-based	frame

; int __cdecl main(int argc, const char	**argv,	const char **envp)
_main		proc near		; CODE XREF: start+14CP

argc		= word ptr  4
argv		= dword	ptr  6
envp		= dword	ptr  0Ah

		push	bp
		mov	bp, sp
		push	word ptr [bp+envp]
		push	word ptr [bp+argv+2]
		push	word ptr [bp+argv]
		nop
		push	cs
		call	near ptr @parse_options$qinnuc ; parse_options(int,uchar **)
		add	sp, 6
		nop
		push	cs
		call	near ptr @init_game$qv ; init_game(void)

loc_618C::				; CODE XREF: _main+2Fj
		cmp	_debug_mode, 0
		jnz	loc_6198
		nop
		push	cs
		call	near ptr @start_title_loop$qv ;	start_title_loop(void)
		assume es:nothing

loc_6198::				; CODE XREF: _main+1Ej
		mov	al, _zoom_to_map
		push	ax

loc_619C::
		nop
		push	cs
		call	near ptr @play_game$quc	; play_game(uchar)
		pop	cx
		jmp	loc_618C
_main		endp

; ---------------------------------------------------------------------------
		pop	bp
		retf
		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; init_game(void)
@init_game$qv	proc far		; CODE XREF: _main+16p

stream		= dword	ptr -18h
var_14		= dword	ptr -14h
var_10		= dword	ptr -10h
var_C		= dword	ptr -0Ch
var_8		= dword	ptr -8
var_4		= dword	ptr -4

		enter	18h, 0
		call	_gr_start_kbd_grab
		call	_clrscr
		push	ds
		push	offset aRiptideRegiste ; "Riptide (Registered) 1.0 (C) 1994 MindS"...
		push	ds
		push	offset format	; "%s\n"
		call	_printf
		add	sp, 8
		cmp	_debug_mode, 1
		jnz	loc_61D7
		push	ds
		push	offset aDebugModeEnabl ; ">> DEBUG MODE	ENABLED	<<\n"
		call	_printf
		add	sp, 4

loc_61D7::				; CODE XREF: init_game(void)+23j
		cmp	_force_pc_sound, 1
		jnz	loc_61EA
		push	ds
		push	offset aForcingPcSound ; ">>  FORCING PC SOUND	<<\n"
		call	_printf
		add	sp, 4

loc_61EA::				; CODE XREF: init_game(void)+36j
		push	ds
		push	offset aRiptide_dat ; "riptide.dat"
		push	0

loc_61F0::
		push	0
		call	@game_manager@$bctr$qnuc ; game_manager::game_manager(uchar *)
		assume es:nothing
		add	sp, 8
		mov	word_2B8BC, dx
		mov	_the_game, ax
		push	0
		push	0
		call	@game_cast@$bctr$qv ; game_cast::game_cast(void)
		assume es:nothing
		add	sp, 4
		mov	word ptr _the_cast+2, dx
		mov	word ptr _the_cast, ax
		call	_coreleft
		assume es:nothing
		push	dx
		push	ax
		pop	eax
		mov	[bp+var_10], eax
		cmp	_debug_mode, 0
		jz	loc_622B
		jmp	loc_62D2
; ---------------------------------------------------------------------------

loc_622B::				; CODE XREF: init_game(void)+80j
		les	bx, dword ptr _the_game
		assume es:nothing
		cmp	byte ptr es:[bx+6], 0
		jz	loc_6240
		mov	[bp+var_14], 65518h
		jmp	loc_6248
; ---------------------------------------------------------------------------

loc_6240::				; CODE XREF: init_game(void)+8Ej
		mov	[bp+var_14], 4CE78h

loc_6248::				; CODE XREF: init_game(void)+98j
		mov	eax, [bp+var_10]
		cmp	eax, [bp+var_14]
		jnb	loc_6289
		push	3		; int
		push	word_2B8BC
		push	_the_game	; block
		call	@game_manager@$bdtr$qv ; game_manager::~game_manager(void)
		add	sp, 6
		les	bx, dword ptr _the_game
		assume es:nothing
		cmp	byte ptr es:[bx+6], 0
		jz	loc_6279
		push	0
		push	0
		push	ds
		push	offset aRiptideRequire ; "Riptide requires 600k	with digital soun"...
		jmp	loc_6281
; ---------------------------------------------------------------------------

loc_6279::				; CODE XREF: init_game(void)+C7j
		push	0
		push	0
		push	ds
		push	offset aRiptideRequi_0 ; "Riptide requires 500k	running	pc sound."

loc_6281::				; CODE XREF: init_game(void)+D1j
		call	@terminate$qnuct1 ; terminate(uchar *,uchar *)
; ---------------------------------------------------------------------------
		add	sp, 8
		assume es:nothing

loc_6289::				; CODE XREF: init_game(void)+AAj
		push	0
		call	@init_display$quc ; init_display(uchar)
		assume es:nothing
		pop	cx
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@blank_palette$qv ;	vga_display::blank_palette(void)
		add	sp, 4
		push	0FFFFh		; int
		push	0		; int
		push	1		; char
		push	ds
		push	offset aLogos_pcx ; path
		push	word ptr _display+2 ; int
		push	word ptr _display ; int
		call	@vga_display@show_pcx$qnucucuii	; vga_display::show_pcx(uchar *,uchar,uint,int)
		assume es:nothing
		add	sp, 0Eh
		nop
		push	cs
		call	near ptr @load_resources$qv ; load_resources(void)
		assume es:nothing
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fade_down$qv ; vga_display::fade_down(void)
		add	sp, 4
		jmp	loc_62EF
; ---------------------------------------------------------------------------

loc_62D2::				; CODE XREF: init_game(void)+82j
		push	dword ptr [bp+var_10]
		push	ds
		push	offset aBytesFreeLu ; "Bytes free %lu\n"
		call	_printf
		add	sp, 8
		nop
		push	cs
		call	near ptr @load_resources$qv ; load_resources(void)
		push	0
		call	@init_display$quc ; init_display(uchar)
		pop	cx

loc_62EF::				; CODE XREF: init_game(void)+12Aj
		les	bx, _display
		assume es:nothing
		mov	byte ptr es:[bx+7], 0
		push	seg seg03f9
		push	offset @de_button$qv ; de_button(void)
		push	seg seg03f9
		push	offset @de_down$qv ; de_down(void)
		push	seg seg03f9
		push	offset @de_up$qv ; de_up(void)
		push	seg seg03f9
		push	offset @de_right$qv ; de_right(void)
		push	seg seg03f9
		push	offset @de_left$qv ; de_left(void)
		call	@i_init_interface$qnvt1t1t1t1 ;	i_init_interface(void *,void *,void *,void *,void *)
		assume es:nothing
		add	sp, 14h
		push	ds
		push	offset aMouse_l	; "mouse.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@get_loop$qnuc ; game_manager::get_loop(uchar *)
		assume es:nothing
		add	sp, 8
		mov	word ptr [bp+var_C+2], dx
		mov	word ptr [bp+var_C], ax
		les	bx, [bp+var_C]
		assume es:nothing
		les	bx, es:[bx+6]
		assume es:nothing
		push	word ptr es:[bx+4]
		les	bx, [bp+var_C]
		assume es:nothing
		les	bx, es:[bx+6]
		assume es:nothing
		push	word ptr es:[bx+6]
		les	bx, [bp+var_C]
		assume es:nothing
		les	bx, es:[bx+6]
		assume es:nothing
		push	word ptr es:[bx+2]
		push	word ptr es:[bx]
		push	word ptr _mouse+2
		push	word ptr _mouse
		call	@ms_mouse@set_cursor$qnucii ; ms_mouse::set_cursor(uchar *,int,int)
		assume es:nothing
		add	sp, 0Ch
		mov	_pd_redraws, 1
		push	1Dh
		push	18h
		push	2
		push	30h ; '0'
		call	@i_set_text$qucucucuc ;	i_set_text(uchar,uchar,uchar,uchar)
		assume es:nothing
		add	sp, 8
		call	@setup_options$qv ; setup_options(void)
		assume es:nothing
		call	@init_scores_array$qv ;	init_scores_array(void)
		assume es:seg2608
		call	@load_scores_in$qv ; load_scores_in(void)
		mov	_the_map, 0
		mov	_new_map_name, 0

loc_63A2::
		mov	dword ptr _gun_underbits, 0
		mov	dword ptr _jguage_underbits, 0
		mov	_game_in_progress, 0
		mov	_god_mode, 0
		mov	_cheat_mode, 0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@blank_palette$qv ;	vga_display::blank_palette(void)
		add	sp, 4
		call	_clock
		push	dx
		push	ax
		pop	eax
		mov	[bp+var_4], eax
		mov	[bp+var_10], 28h ; '('
		jmp	loc_6416
; ---------------------------------------------------------------------------

loc_63EA::				; CODE XREF: init_game(void)+27Cj
		push	0
		push	0
		push	ds
		push	offset _tmp
		mov	ax, word ptr [bp+var_10]
		add	ax, 1Eh
		push	ax
		mov	ax, word ptr [bp+var_10]
		add	ax, 32h	; '2'
		push	ax
		push	word ptr [bp+var_10]
		push	word ptr [bp+var_10]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@put_bits$qiiiinucuiui ; vga_display::put_bits(int,int,int,int,uchar *,uint,uint)
		assume es:nothing
		add	sp, 14h
		assume es:seg2608

loc_6416::				; CODE XREF: init_game(void)+242j
		mov	eax, [bp+var_10]
		dec	[bp+var_10]
		cmp	eax, 0
		jnz	loc_63EA
		assume es:nothing
		mov	[bp+var_10], 5
		jmp	loc_6442
; ---------------------------------------------------------------------------

loc_642E::				; CODE XREF: init_game(void)+2A8j
		push	0
		push	1
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@copy_page$qucuc ; vga_display::copy_page(uchar,uchar)
		add	sp, 8

loc_6442::				; CODE XREF: init_game(void)+286j
		mov	eax, [bp+var_10]
		dec	[bp+var_10]
		cmp	eax, 0
		jnz	loc_642E
		call	_clock
		push	dx
		push	ax
		pop	eax
		mov	[bp+var_8], eax
		mov	al, byte ptr [bp+var_8]
		sub	al, byte ptr [bp+var_4]
		mov	_system_bench, al

loc_6466::
		cmp	_system_bench, 4
		jbe	loc_6478
		les	bx, dword ptr _the_game
		assume es:nothing
		mov	byte ptr es:[bx+22h], 1
		jmp	loc_6481
; ---------------------------------------------------------------------------
		assume es:nothing

loc_6478::				; CODE XREF: init_game(void)+2C5j
		les	bx, dword ptr _the_game
		assume es:nothing
		mov	byte ptr es:[bx+22h], 2

loc_6481::				; CODE XREF: init_game(void)+2D0j
		push	ds
		push	offset _mode	; "rb"
		push	ds
		push	offset aConfigrip ; "config.rip"
		call	_fopen
		assume es:seg2608
		add	sp, 8
		mov	word ptr [bp+stream+2],	dx
		mov	word ptr [bp+stream], ax
		or	ax, dx
		jz	loc_6500
		push	word ptr [bp+stream+2]
		push	word ptr [bp+stream] ; stream
		call	_fgetc
		assume es:nothing
		add	sp, 4
		les	bx, dword ptr _the_game
		assume es:nothing
		mov	es:[bx+1Ch], al
		push	word ptr [bp+stream+2]
		push	word ptr [bp+stream] ; stream
		call	_fgetc
		assume es:nothing
		add	sp, 4
		les	bx, dword ptr _the_game
		assume es:nothing
		mov	es:[bx+22h], al
		push	word ptr [bp+stream+2]
		push	word ptr [bp+stream] ; stream
		call	_fgetc
		assume es:nothing
		add	sp, 4
		or	ax, ax
		jz	loc_64F2
		les	bx, dword ptr _the_game
		assume es:nothing
		mov	byte ptr es:[bx+24h], 1
		push	word_2B8BC
		push	_the_game
		call	@game_manager@joy_update$qv ; game_manager::joy_update(void)
		add	sp, 4
		assume es:nothing

loc_64F2::				; CODE XREF: init_game(void)+331j
		push	word ptr [bp+stream+2]
		push	word ptr [bp+stream] ; stream
		call	_fclose
		assume es:seg2608
		add	sp, 4

loc_6500::				; CODE XREF: init_game(void)+2F3j
		push	seg seg0fa9
		push	offset @cb_quit$qv ; cb_quit(void)
		call	_set_exit_routine
		add	sp, 4
		leave
		retf
@init_game$qv	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; play_game(unsigned char)
@play_game$quc	proc far		; CODE XREF: _main+2Bp

var_1		= byte ptr -1
arg_0		= byte ptr  6

		enter	2, 0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@blank_palette$qv ;	vga_display::blank_palette(void)
		add	sp, 4
		push	0FFFFh		; int
		push	0		; int
		push	0		; char
		push	ds
		push	offset aP_frame_pcx ; "p_frame.pcx"
		push	word ptr _display+2 ; int
		push	word ptr _display ; int
		call	@vga_display@show_pcx$qnucucuii	; vga_display::show_pcx(uchar *,uchar,uint,int)
		assume es:nothing
		add	sp, 0Eh
		push	0A1h ; '¡'
		push	0BEh ; '¾'
		push	97h ; ''
		push	80h ; ''
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@get_bits$qiiii ; vga_display::get_bits(int,int,int,int)
		assume es:nothing
		add	sp, 0Ch
		mov	word_2B724, dx
		mov	_gun_underbits,	ax
		push	0ADh ; '­'
		push	2Ch ; ','
		push	0A7h ; '§'
		push	0Ch
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@get_bits$qiiii ; vga_display::get_bits(int,int,int,int)
		add	sp, 0Ch
		mov	word_2B728, dx
		mov	_jguage_underbits, ax
		push	0
		push	1
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@copy_page$qucuc ; vga_display::copy_page(uchar,uchar)
		add	sp, 8

loc_6596::				; CODE XREF: play_game(uchar)+71Bj
		mov	al, [bp+arg_0]
		mov	_cur_map, al

loc_659C::				; CODE XREF: play_game(uchar)+734j
		mov	_game_in_progress, 1
		mov	[bp+var_1], 0
		mov	al, 0
		mov	_score_count, al
		movzx	eax, al
		mov	_score,	eax
		mov	_gun_count, 0
		mov	_men, 2
		mov	_auto_fire_count, 0
		mov	al, 0
		mov	_jason_fire, al
		mov	_auto_fire, al
		mov	_top_fire, al
		mov	_shot_size, 0
		mov	_jason_on, 0
		mov	_jason_present,	1
		mov	_maximum_jason_power, 64h ; 'd'
		push	word_2B8BC
		push	_the_game
		call	@game_manager@clear_flags$qv ; game_manager::clear_flags(void)
		assume es:nothing
		add	sp, 4
		jmp	loc_6C4A	; jumptable 0001499D default case
; ---------------------------------------------------------------------------

loc_65F3::				; CODE XREF: play_game(uchar)+743j
		les	bx, dword ptr _the_game
		mov	al, 0
		mov	es:[bx+9], al
		les	bx, dword ptr _the_game
		mov	es:[bx+8], al
		nop
		push	cs
		call	near ptr @show_prelude$qv ; show_prelude(void)

loc_660A::				; CODE XREF: play_game(uchar):loc_6C47j
		mov	al, _cur_map
		mov	ah, 0
		imul	ax, 14h
		mov	bx, ax
		push	word ptr [bx+22Eh]
		push	word ptr [bx+22Ch]
		push	word_2B8BC
		push	_the_game
		call	@game_manager@play_song$qnuc ; game_manager::play_song(uchar *)
		add	sp, 8
		mov	al, _cur_map
		mov	ah, 0
		sub	ax, 4
		mov	bx, ax
		cmp	bx, 13h		; switch 20 cases
		jbe	loc_663E
		jmp	loc_6898	; jumptable 00014460 default case
; ---------------------------------------------------------------------------

loc_663E::				; CODE XREF: play_game(uchar)+129j
		shl	bx, 1
		jmp	cs:off_6CBA[bx]	; switch jump
; ---------------------------------------------------------------------------

loc_6645::				; CODE XREF: play_game(uchar)+130j
					; DATA XREF: seg03f9:off_6CBAo
		cmp	_jason_present,	1 ; jumptable 00014460 case 2
		jnz	loc_6651
		mov	_jason_present,	0

loc_6651::				; CODE XREF: play_game(uchar)+13Aj
		push	ds
		push	offset aBs1_bdl_l ; "bs1_bdl.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBs1_bdr_l ; "bs1_bdr.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBs1dr_l	; "bs1dr.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBosshit_l ; "bosshit.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	0
		push	ds
		push	offset aBadgrunt ; "badgrunt"

loc_66A7::				; CODE XREF: play_game(uchar)+347j
		push	word_2B8BC	; int
		push	_the_game	; int
		call	@game_manager@define_sound$qnucuc ; game_manager::define_sound(uchar *,uchar)
		add	sp, 0Ah
		jmp	loc_6898	; jumptable 00014460 default case
; ---------------------------------------------------------------------------

loc_66BA::				; CODE XREF: play_game(uchar)+130j
					; DATA XREF: seg03f9:off_6CBAo
		cmp	_jason_present,	1 ; jumptable 00014460 case 8
		jnz	loc_66C6
		mov	_jason_present,	0

loc_66C6::				; CODE XREF: play_game(uchar)+1AFj
		push	ds
		push	offset aBs2_bod_l ; "bs2_bod.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBs2_tnr1_l ; "bs2_tnr1.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBs2_tnl1_l ; "bs2_tnl1.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBs2_tnr2_l ; "bs2_tnr2.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBs2_tnl2_l ; "bs2_tnl2.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aMsl_inkl_l ; "msl_inkl.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aMsl_inkr_l ; "msl_inkr.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aOtiseyes_l ; "otiseyes.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		jmp	loc_6898	; jumptable 00014460 default case
; ---------------------------------------------------------------------------

loc_6769::				; CODE XREF: play_game(uchar)+130j
					; DATA XREF: seg03f9:off_6CBAo
		cmp	_jason_present,	1 ; jumptable 00014460 case 17
		jnz	loc_6775
		mov	_jason_present,	0

loc_6775::				; CODE XREF: play_game(uchar)+25Ej
		push	ds
		push	offset aBs3_bdr_l ; "bs3_bdr.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBs3_arr_l ; "bs3_arr.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBs3_bdl_l ; "bs3_bdl.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBs3_arl_l ; "bs3_arl.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBs3_dthr_l ; "bs3_dthr.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBs3_prpl_l ; "bs3_prpl.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBs3_prpr_l ; "bs3_prpr.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBs3_facl_l ; "bs3_facl.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBs3_facr_l ; "bs3_facr.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aChain_l	; "chain.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aExp3_l	; "exp3.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	0
		push	ds
		push	offset aPlunk2	; "plunk2"
		jmp	loc_66A7
; ---------------------------------------------------------------------------

loc_685A::				; CODE XREF: play_game(uchar)+130j
					; DATA XREF: seg03f9:off_6CBAo
		push	ds		; jumptable 00014460 cases 0,3,6,10,11,14,16,18,19
		push	offset aSharkr_l ; "sharkr.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aSharkl_l ; "sharkl.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aSharkdie_l ; "sharkdie.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		jmp	$+2	; jumptable 00014460 default case
; ---------------------------------------------------------------------------

loc_6898::				; CODE XREF: play_game(uchar)+12Bj
					; play_game(uchar)+130j ...
		mov	al, _cur_map	; jumptable 00014460 default case
		mov	ah, 0
		imul	ax, 14h
		mov	bx, ax
		push	word ptr [bx+22Ah]
		push	word ptr [bx+228h] ; path_2
		nop
		push	cs
		call	near ptr @start_room$qnuc ; start_room(uchar *)
		assume es:nothing
		add	sp, 4
		mov	al, _cur_map
		mov	ah, 0
		imul	ax, 14h
		mov	bx, ax
		mov	ax, [bx+238h]
		or	ax, [bx+23Ah]
		jz	loc_68D4
		mov	al, _cur_map
		mov	ah, 0
		imul	ax, 14h
		mov	bx, ax
		call	dword ptr [bx+238h]

loc_68D4::				; CODE XREF: play_game(uchar)+3B4j
		jmp	loc_68DB
; ---------------------------------------------------------------------------

loc_68D6::				; CODE XREF: play_game(uchar)+3D2j
		nop
		push	cs
		call	near ptr @de_doit$qv ; de_doit(void)

loc_68DB::				; CODE XREF: play_game(uchar):loc_68D4j
		mov	al, _stop_room
		mov	ah, 0
		or	ax, ax
		jz	loc_68D6
		mov	al, _cur_map
		mov	ah, 0
		sub	ax, 4
		mov	bx, ax
		cmp	bx, 13h		; switch 20 cases
		jbe	loc_68F6
		jmp	loc_6B2F	; jumptable 00014718 default case
; ---------------------------------------------------------------------------

loc_68F6::				; CODE XREF: play_game(uchar)+3E1j
		shl	bx, 1
		jmp	cs:off_6C92[bx]	; switch jump
; ---------------------------------------------------------------------------

loc_68FD::				; CODE XREF: play_game(uchar)+3E8j
					; DATA XREF: seg03f9:off_6C92o
		push	ds		; jumptable 00014718 case 2
		push	offset aBs1_bdl_l_0 ; "bs1_bdl.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_loop$qnuc ; game_manager::remove_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBs1_bdr_l_0 ; "bs1_bdr.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_loop$qnuc ; game_manager::remove_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBs1dr_l_0 ; "bs1dr.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_loop$qnuc ; game_manager::remove_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBosshit_l_0 ; "bosshit.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_loop$qnuc ; game_manager::remove_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBadgrunt_0 ; "badgrunt"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_sound$qnuc	; game_manager::remove_sound(uchar *)
		add	sp, 8

loc_6961::				; CODE XREF: play_game(uchar)+3E8j
					; DATA XREF: seg03f9:off_6C92o
		push	ds		; jumptable 00014718 case 8
		push	offset aBs2_bod_l_0 ; "bs2_bod.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_loop$qnuc ; game_manager::remove_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBs2_tnr1_l_0 ; "bs2_tnr1.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_loop$qnuc ; game_manager::remove_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBs2_tnl1_l_0 ; "bs2_tnl1.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_loop$qnuc ; game_manager::remove_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBs2_tnr2_l_0 ; "bs2_tnr2.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_loop$qnuc ; game_manager::remove_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBs2_tnl2_l_0 ; "bs2_tnl2.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_loop$qnuc ; game_manager::remove_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aMsl_inkl_l_0 ; "msl_inkl.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_loop$qnuc ; game_manager::remove_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aMsl_inkr_l_0 ; "msl_inkr.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_loop$qnuc ; game_manager::remove_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aOtiseyes_l_0 ; "otiseyes.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_loop$qnuc ; game_manager::remove_loop(uchar *)
		add	sp, 8

loc_6A01::				; CODE XREF: play_game(uchar)+3E8j
					; DATA XREF: seg03f9:off_6C92o
		push	ds		; jumptable 00014718 case 17
		push	offset aBs3_bdr_l_0 ; "bs3_bdr.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_loop$qnuc ; game_manager::remove_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBs3_arr_l_0 ; "bs3_arr.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_loop$qnuc ; game_manager::remove_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBs3_bdl_l_0 ; "bs3_bdl.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_loop$qnuc ; game_manager::remove_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBs3_arl_l_0 ; "bs3_arl.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_loop$qnuc ; game_manager::remove_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBs3_prpl_l_0 ; "bs3_prpl.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_loop$qnuc ; game_manager::remove_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBs3_prpr_l_0 ; "bs3_prpr.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_loop$qnuc ; game_manager::remove_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBs3_facl_l_0 ; "bs3_facl.l"
		push	word_2B8BC
		push	_the_game	; CODE XREF: _main+Ep
					; __int32
		call	@game_manager@remove_loop$qnuc ; game_manager::remove_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBs3_facr_l_0 ; "bs3_facr.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_loop$qnuc ; game_manager::remove_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBs3_dthr_l_0 ; "bs3_dthr.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_loop$qnuc ; game_manager::remove_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aChain_l_0 ; "chain.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_loop$qnuc ; game_manager::remove_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aExp3_l_0 ; "exp3.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_loop$qnuc ; game_manager::remove_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aPlunk2_0 ; "plunk2"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_sound$qnuc	; game_manager::remove_sound(uchar *)
		add	sp, 8

loc_6AF1::				; CODE XREF: play_game(uchar)+3E8j
					; DATA XREF: seg03f9:off_6C92o
		push	ds		; jumptable 00014718 cases 0,3,6,10,11,14,16,18,19
		push	offset aSharkr_l_0 ; "sharkr.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_loop$qnuc ; game_manager::remove_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aSharkl_l_0 ; "sharkl.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_loop$qnuc ; game_manager::remove_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aSharkdie_l_0 ; "sharkdie.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_loop$qnuc ; game_manager::remove_loop(uchar *)
		add	sp, 8
		jmp	$+2	; jumptable 00014718 default case
; ---------------------------------------------------------------------------

loc_6B2F::				; CODE XREF: play_game(uchar)+3E3j
					; play_game(uchar)+3E8j ...
		mov	al, _displayed_page ; jumptable	00014718 default case
		push	ax
		mov	al, _non_displayed_page
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@copy_page$qucuc ; vga_display::copy_page(uchar,uchar)
		add	sp, 8
		push	word ptr _the_cast+2
		push	word ptr _the_cast
		call	@game_cast@kill_all$qv ; game_cast::kill_all(void)
		add	sp, 4
		push	0
		push	1
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@copy_page$qucuc ; vga_display::copy_page(uchar,uchar)
		add	sp, 8
		mov	al, _stop_room
		mov	ah, 0
		dec	ax
		mov	bx, ax
		cmp	bx, 5		; switch 6 cases
		jbe	loc_6B7B
		jmp	loc_6C4A	; jumptable 0001499D default case
; ---------------------------------------------------------------------------

loc_6B7B::				; CODE XREF: play_game(uchar)+666j
		shl	bx, 1
		jmp	cs:off_6C86[bx]	; switch jump
; ---------------------------------------------------------------------------

loc_6B82::				; CODE XREF: play_game(uchar)+66Dj
					; DATA XREF: seg03f9:off_6C86o
		nop			; jumptable 0001499D case 4
		push	cs
		call	near ptr @end_game$qv ;	end_game(void)
		inc	[bp+var_1]
		jmp	loc_6C4A	; jumptable 0001499D default case
; ---------------------------------------------------------------------------

loc_6B8D::				; CODE XREF: play_game(uchar)+66Dj
					; DATA XREF: seg03f9:off_6C86o
		nop			; jumptable 0001499D case 0
		push	cs
		call	near ptr @end_room$qv ;	end_room(void)
		cmp	_cur_map, 15h
		jnb	loc_6B9F
		inc	_cur_map
		jmp	loc_6BB5
; ---------------------------------------------------------------------------

loc_6B9F::				; CODE XREF: play_game(uchar)+687j
		cmp	_cur_map, 16h
		jb	loc_6BAD
		nop
		push	cs
		call	near ptr @exit_secret_level$qv ; exit_secret_level(void)
		jmp	loc_6BB5
; ---------------------------------------------------------------------------

loc_6BAD::				; CODE XREF: play_game(uchar)+694j
		nop
		push	cs
		call	near ptr @end_game$qv ;	end_game(void)
		inc	[bp+var_1]

loc_6BB5::				; CODE XREF: play_game(uchar)+68Dj
					; play_game(uchar)+69Bj
		mov	al, _cur_map
		mov	ah, 0
		dec	ax
		mov	bx, ax
		cmp	bx, 16h		; switch 23 cases
		ja	loc_6C0B	; jumptable 000149E4 default case
		shl	bx, 1
		jmp	cs:off_6C58[bx]	; switch jump
; ---------------------------------------------------------------------------

loc_6BC9::				; CODE XREF: play_game(uchar)+6B4j
					; DATA XREF: seg03f9:off_6C58o
		push	ds		; jumptable 000149E4 cases 0-4,7-10,12-19,21,22
		push	offset aNewPassword ; "New password : "
		push	ds
		push	offset _tmp	; dest
		call	_strcpy
		add	sp, 8
		mov	al, _cur_map
		mov	ah, 0
		imul	ax, 14h
		mov	bx, ax
		push	word ptr [bx+232h]
		push	word ptr [bx+230h] ; src
		push	ds
		push	offset _tmp	; dest
		call	_strcat
		add	sp, 8
		push	0		; int
		push	0		; int
		push	0		; char
		push	ds
		push	offset _tmp	; s
		call	@i_inform$qnucuct1 ; i_inform(uchar *,uchar,uchar *)
		add	sp, 0Ah
		jmp	loc_6C0D
; ---------------------------------------------------------------------------

loc_6C0B::				; CODE XREF: play_game(uchar)+6B0j
					; play_game(uchar)+6B4j
					; DATA XREF: ...
		jmp	$+2	; jumptable 000149E4 default case
; ---------------------------------------------------------------------------

loc_6C0D::				; CODE XREF: play_game(uchar)+6F9j
					; play_game(uchar):loc_6C0Bj
		jmp	loc_6C4A	; jumptable 0001499D default case
; ---------------------------------------------------------------------------

loc_6C0F::				; CODE XREF: play_game(uchar)+66Dj
					; DATA XREF: seg03f9:off_6C86o
		nop			; jumptable 0001499D case 5
		push	cs
		call	near ptr @end_room$qv ;	end_room(void)
		nop
		push	cs
		call	near ptr @setup_secret_level$qv	; setup_secret_level(void)
		jmp	loc_6C4A	; jumptable 0001499D default case
; ---------------------------------------------------------------------------

loc_6C1B::				; CODE XREF: play_game(uchar)+66Dj
					; DATA XREF: seg03f9:off_6C86o
		push	word ptr _display+2 ; jumptable	0001499D case 3
		push	word ptr _display
		call	@vga_display@fade_down$qv ; vga_display::fade_down(void)
		add	sp, 4
		jmp	loc_6596
; ---------------------------------------------------------------------------

loc_6C2E::				; CODE XREF: play_game(uchar)+66Dj
					; DATA XREF: seg03f9:off_6C86o
		mov	al, _zoom_to_map ; jumptable 0001499D case 1
		mov	_cur_map, al
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fade_down$qv ; vga_display::fade_down(void)
		add	sp, 4
		jmp	loc_659C
; ---------------------------------------------------------------------------

loc_6C47::				; CODE XREF: play_game(uchar)+66Dj
					; DATA XREF: seg03f9:off_6C86o
		jmp	loc_660A	; jumptable 0001499D case 2
; ---------------------------------------------------------------------------
		assume es:nothing

loc_6C4A::				; CODE XREF: play_game(uchar)+E0j
					; play_game(uchar)+668j ...
		mov	al, [bp+var_1]	; jumptable 0001499D default case
		mov	ah, 0
		or	ax, ax
		jnz	locret_6C56
		jmp	loc_65F3
; ---------------------------------------------------------------------------

locret_6C56::				; CODE XREF: play_game(uchar)+741j
		leave
		retf
@play_game$quc	endp

; ---------------------------------------------------------------------------
off_6C58	dw offset loc_6BC9	; DATA XREF: play_game(uchar)+6B4r
		dw offset loc_6BC9	; jump table for switch	statement
		dw offset loc_6BC9
		dw offset loc_6BC9
		dw offset loc_6BC9
		dw offset loc_6C0B
		dw offset loc_6C0B
		dw offset loc_6BC9
		dw offset loc_6BC9
		dw offset loc_6BC9
		dw offset loc_6BC9
		dw offset loc_6C0B
		dw offset loc_6BC9
		dw offset loc_6BC9
		dw offset loc_6BC9
		dw offset loc_6BC9
		dw offset loc_6BC9
		dw offset loc_6BC9
		dw offset loc_6BC9
		dw offset loc_6BC9
		dw offset loc_6C0B
		dw offset loc_6BC9
		dw offset loc_6BC9
off_6C86	dw offset loc_6B8D	; DATA XREF: play_game(uchar)+66Dr
		dw offset loc_6C2E	; jump table for switch	statement
		dw offset loc_6C47
		dw offset loc_6C1B
		dw offset loc_6B82
		dw offset loc_6C0F
off_6C92	dw offset loc_6AF1	; DATA XREF: play_game(uchar)+3E8r
		dw offset loc_6B2F	; jump table for switch	statement
		dw offset loc_68FD
		dw offset loc_6AF1
		dw offset loc_6B2F
		dw offset loc_6B2F
		dw offset loc_6AF1
		dw offset loc_6B2F
		dw offset loc_6961
		dw offset loc_6B2F
		dw offset loc_6AF1
		dw offset loc_6AF1
		dw offset loc_6B2F
		dw offset loc_6B2F
		dw offset loc_6AF1
		dw offset loc_6B2F
		dw offset loc_6AF1
		dw offset loc_6A01
		dw offset loc_6AF1
		dw offset loc_6AF1
off_6CBA	dw offset loc_685A	; DATA XREF: play_game(uchar)+130r
		dw offset loc_6898	; jump table for switch	statement
		dw offset loc_6645
		dw offset loc_685A
		dw offset loc_6898
		dw offset loc_6898
		dw offset loc_685A
		dw offset loc_6898
		dw offset loc_66BA
		dw offset loc_6898
		dw offset loc_685A
		dw offset loc_685A
		dw offset loc_6898
		dw offset loc_6898
		dw offset loc_685A
		dw offset loc_6898
		dw offset loc_685A
		dw offset loc_6769
		dw offset loc_685A
		dw offset loc_685A

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; setup_secret_level(void)
@setup_secret_level$qv proc far		; CODE XREF: play_game(uchar)+706p

var_1		= byte ptr -1

		enter	2, 0
		les	bx, dword ptr _the_game
		assume es:nothing
		mov	byte ptr es:[bx+0Dh], 1
		mov	[bp+var_1], 0
		jmp	short loc_6D0D
; ---------------------------------------------------------------------------

loc_6CF5::				; CODE XREF: setup_secret_level(void)+2Fj
		mov	al, [bp+var_1]
		mov	ah, 0
		shl	ax, 1
		mov	bx, ax
		mov	al, [bx+225h]
		cmp	al, _cur_map
		jnz	short loc_6D0A
		jmp	short loc_6D13
; ---------------------------------------------------------------------------

loc_6D0A::				; CODE XREF: setup_secret_level(void)+24j
		inc	[bp+var_1]

loc_6D0D::				; CODE XREF: setup_secret_level(void)+11j
		cmp	[bp+var_1], 2
		jb	short loc_6CF5

loc_6D13::				; CODE XREF: setup_secret_level(void)+26j
		cmp	[bp+var_1], 2
		jnz	short loc_6D29
		push	0
		push	0
		push	ds
		push	offset aInvalidSecretL ; "Invalid secret level exit."
		call	@terminate$qnuct1 ; terminate(uchar *,uchar *)
; ---------------------------------------------------------------------------
		add	sp, 8

loc_6D29::				; CODE XREF: setup_secret_level(void)+35j
		mov	al, [bp+var_1]
		mov	ah, 0
		shl	ax, 1
		mov	bx, ax
		mov	al, [bx+224h]
		mov	_cur_map, al
		leave
		retf
@setup_secret_level$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; exit_secret_level(void)
@exit_secret_level$qv proc far		; CODE XREF: play_game(uchar)+698p

var_1		= byte ptr -1

		enter	2, 0
		mov	[bp+var_1], 0
		jmp	loc_6D5D
; ---------------------------------------------------------------------------

loc_6D45::				; CODE XREF: exit_secret_level(void)+26j
		mov	al, [bp+var_1]
		mov	ah, 0
		shl	ax, 1
		mov	bx, ax
		mov	al, [bx+224h]
		cmp	al, _cur_map
		jnz	loc_6D5A
		jmp	loc_6D63
; ---------------------------------------------------------------------------

loc_6D5A::				; CODE XREF: exit_secret_level(void)+1Bj
		inc	[bp+var_1]

loc_6D5D::				; CODE XREF: exit_secret_level(void)+8j
		cmp	[bp+var_1], 2
		jb	loc_6D45

loc_6D63::				; CODE XREF: exit_secret_level(void)+1Dj
		cmp	[bp+var_1], 2
		jnz	loc_6D79
		push	0
		push	0
		push	ds
		push	offset aInvalidSecre_0 ; "Invalid secret level re-entrance."
		call	@terminate$qnuct1 ; terminate(uchar *,uchar *)
; ---------------------------------------------------------------------------
		add	sp, 8

loc_6D79::				; CODE XREF: exit_secret_level(void)+2Cj
		mov	al, [bp+var_1]
		mov	ah, 0
		shl	ax, 1
		mov	bx, ax
		mov	al, [bx+225h]
		inc	al
		mov	_cur_map, al
		leave
		retf
@exit_secret_level$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far start_room(char *path_2)
@start_room$qnuc proc far		; CODE XREF: play_game(uchar)+39Cp

var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
path_2		= dword	ptr  6

		enter	6, 0
		mov	_zoom_to_map, 0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@blank_palette$qv ;	vga_display::blank_palette(void)
		add	sp, 4
		push	1
		push	0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@copy_page$qucuc ; vga_display::copy_page(uchar,uchar)
		assume es:nothing
		add	sp, 8
		mov	_non_displayed_page, 0
		mov	_displayed_page, 1
		push	0
		push	word_2B8BC
		push	_the_game
		call	@game_manager@reset_player$quc ; game_manager::reset_player(uchar)
		assume es:nothing
		add	sp, 6
		mov	_end_door_ptr, 0
		mov	_ego_x_speed, 4
		mov	al, _ego_x_speed
		add	al, 0FFh
		mov	_ego_y_speed, al
		mov	_stop_room, 0
		mov	_control, 1
		mov	_zapper_count, 0
		mov	_got_key, 0
		mov	_smart_missiles, 0
		les	bx, dword ptr _the_game
		mov	al, 0
		mov	es:[bx+0Bh], al
		les	bx, dword ptr _the_game
		mov	es:[bx+0Ah], al
		mov	al, 0
		mov	_goodies_found,	al
		mov	_enemies_killed, al
		mov	_goody_count, al
		mov	_enemy_count, al
		mov	_air_count, 0
		mov	_air_speed, 28h	; '('
		mov	_air_supply, 96h ; ''
		cmp	_shld_supply, 3Ch ; '<'
		jge	loc_6E42
		mov	_shld_supply, 3Ch ; '<'

loc_6E42::				; CODE XREF: start_room(uchar *)+ADj
		mov	_cur_message, 0FFFFh
		mov	_message_posted, 0
		nop
		push	cs
		call	near ptr @clear_message$qv ; clear_message(void)
		assume es:nothing
		push	0B3h ; '³'
		push	68h ; 'h'
		push	0
		nop
		push	cs
		call	near ptr @update_shld_guage$qiii ; update_shld_guage(int,int,int)
		add	sp, 6
		push	0A7h ; '§'
		push	68h ; 'h'
		push	0
		nop
		push	cs
		call	near ptr @update_air_guage$qiii	; update_air_guage(int,int,int)
		add	sp, 6
		push	9Fh ; ''
		push	10Dh
		nop
		push	cs
		call	near ptr @update_score$qii ; update_score(int,int)
		add	sp, 4
		nop
		push	cs
		call	near ptr @update_men$qv	; update_men(void)
		nop
		push	cs
		call	near ptr @update_gun$qv	; update_gun(void)
		assume es:nothing
		nop
		push	cs
		call	near ptr @update_key_guage$qv ;	update_key_guage(void)
		assume es:nothing
		mov	al, 0
		mov	_top_shot_count, al
		mov	_shot_count, al
		mov	_jason_count, 0
		mov	_boss, 0
		cmp	_the_map, 0
		jnz	loc_6EE1
		push	0		; int
		push	0		; int
		push	word ptr [bp+path_2+2]
		push	word ptr [bp+path_2] ; path
		push	0
		push	0		; __int32
		call	@tilemap@$bctr$qnucii ;	tilemap::tilemap(uchar *,int,int)
		assume es:nothing
		add	sp, 0Ch
		mov	word ptr _the_map+2, dx
		mov	word ptr _the_map, ax
		push	87h ; ''
		push	120h
		push	8
		push	10h
		push	word ptr _the_map+2
		push	word ptr _the_map
		call	@tilemap@set_viewport$qiiii ; tilemap::set_viewport(int,int,int,int)
		assume es:nothing
		jmp	loc_6EF8
; ---------------------------------------------------------------------------

loc_6EE1::				; CODE XREF: start_room(uchar *)+11Cj
		push	0		; int
		push	0		; int
		push	word ptr [bp+path_2+2]
		push	word ptr [bp+path_2] ; path
		push	word ptr _the_map+2
		push	word ptr _the_map ; __int32
		call	@tilemap@new_map$qnucii	; tilemap::new_map(uchar *,int,int)

loc_6EF8::				; CODE XREF: start_room(uchar *)+152j
		add	sp, 0Ch
		les	bx, dword ptr _the_game
		assume es:nothing
		mov	al, es:[bx+22h]
		les	bx, _the_map
		assume es:nothing
		mov	es:[bx+39Ch], al
		push	word ptr _the_map+2
		push	word ptr _the_map
		call	@tilemap@purge_tiles$qv	; tilemap::purge_tiles(void)
		add	sp, 4
		les	bx, _the_map
		mov	ax, es:[bx+24h]
		les	bx, _the_map
		xor	dx, dx
		div	word ptr es:[bx+8Eh]
		shl	dx, 3
		mov	_start_x, dx
		les	bx, _the_map
		mov	ax, es:[bx+24h]
		les	bx, _the_map
		xor	dx, dx
		div	word ptr es:[bx+8Eh]
		shl	ax, 3
		mov	_start_y, ax
		push	_start_y
		push	_start_x
		push	word ptr _the_map+2
		push	word ptr _the_map
		call	@tilemap@center_on$quiui ; tilemap::center_on(uint,uint)
		add	sp, 8
		mov	[bp+var_2], 0
		jmp	loc_6FE0
; ---------------------------------------------------------------------------

loc_6F6E::				; CODE XREF: start_room(uchar *)+264j
		les	bx, _the_map
		les	bx, es:[bx+39Eh]
		assume es:nothing
		mov	ax, [bp+var_2]
		shl	ax, 2
		add	bx, ax
		mov	ax, es:[bx+2]
		mov	[bp+var_4], ax
		mov	ax, [bp+var_4]
		and	ax, 0C0h
		mov	[bp+var_6], ax
		cmp	[bp+var_6], 0
		jz	loc_6FA3
		push	[bp+var_6]
		push	[bp+var_2]
		nop
		push	cs
		call	near ptr @add_switch$quiui ; add_switch(uint,uint)
		assume es:nothing
		add	sp, 4
		assume es:nothing

loc_6FA3::				; CODE XREF: start_room(uchar *)+206j
		mov	ax, [bp+var_4]
		and	ax, 300h
		mov	[bp+var_6], ax
		cmp	[bp+var_6], 0
		jz	loc_6FC0
		push	[bp+var_6]
		push	[bp+var_2]
		nop
		push	cs
		call	near ptr @add_door$quiui ; add_door(uint,uint)
		assume es:nothing
		add	sp, 4
		assume es:nothing

loc_6FC0::				; CODE XREF: start_room(uchar *)+223j
		mov	ax, [bp+var_4]
		and	ax, 3Fh
		mov	[bp+var_6], ax
		cmp	[bp+var_6], 0
		jz	loc_6FDD
		push	[bp+var_6]
		push	[bp+var_2]
		nop
		push	cs
		call	near ptr @add_barrel$quiui ; add_barrel(uint,uint)
		assume es:nothing
		add	sp, 4
		assume es:nothing

loc_6FDD::				; CODE XREF: start_room(uchar *)+240j
		inc	[bp+var_2]
		assume es:nothing

loc_6FE0::				; CODE XREF: start_room(uchar *)+1DFj
		movzx	eax, [bp+var_2]
		les	bx, _the_map
		cmp	eax, es:[bx+94h]
		jnb	loc_6FF4
		jmp	loc_6F6E
; ---------------------------------------------------------------------------

loc_6FF4::				; CODE XREF: start_room(uchar *)+262j
		mov	[bp+var_2], 0
		jmp	loc_7033
; ---------------------------------------------------------------------------

loc_6FFB::				; CODE XREF: start_room(uchar *)+2B5j
		les	bx, _the_map
		les	bx, es:[bx+39Eh]
		assume es:nothing
		mov	ax, [bp+var_2]
		shl	ax, 2
		add	bx, ax
		mov	ax, es:[bx+2]
		mov	[bp+var_4], ax
		mov	ax, [bp+var_4]
		and	ax, 0FC00h
		mov	[bp+var_6], ax
		cmp	[bp+var_6], 0
		jz	loc_7030
		push	[bp+var_6]
		push	[bp+var_2]
		nop
		push	cs
		call	near ptr @add_map_item$quiui ; add_map_item(uint,uint)
		assume es:nothing
		add	sp, 4
		assume es:nothing

loc_7030::				; CODE XREF: start_room(uchar *)+293j
		inc	[bp+var_2]
		assume es:nothing

loc_7033::				; CODE XREF: start_room(uchar *)+26Cj
		movzx	eax, [bp+var_2]
		les	bx, _the_map
		cmp	eax, es:[bx+94h]
		jb	loc_6FFB
		les	bx, _the_map
		mov	ax, es:[bx+24h]
		mov	bx, 2
		cwd
		idiv	bx
		or	dx, dx
		jz	loc_7088
		push	seg seg0b2c
		push	offset @do_ego$qn7m_actor ; __int32
		push	seg seg0b2c
		push	offset @mv_ego$qn7m_actornit2 ;	__int32
		push	ds
		push	offset aSubl_l	; "subl.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _ego+2, dx
		mov	word ptr _ego, ax
		les	bx, _ego
		assume es:nothing
		mov	byte ptr es:[bx+34h], 1
		jmp	loc_70B8
; ---------------------------------------------------------------------------
		assume es:nothing

loc_7088::				; CODE XREF: start_room(uchar *)+2C7j
		push	seg seg0b2c
		push	offset @do_ego$qn7m_actor ; __int32
		push	seg seg0b2c
		push	offset @mv_ego$qn7m_actornit2 ;	__int32
		push	ds
		push	offset aSubr_l	; "subr.l"

loc_7098::
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		assume es:nothing
		add	sp, 10h
		mov	word ptr _ego+2, dx
		mov	word ptr _ego, ax
		les	bx, _ego
		assume es:nothing
		mov	byte ptr es:[bx+34h], 0

loc_70B8::				; CODE XREF: start_room(uchar *)+2F9j
		push	1
		push	0Ch
		push	word ptr _ego+2
		push	word ptr _ego
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		les	bx, _ego
		mov	byte ptr es:[bx+3Dh], 0
		push	_start_y
		push	_start_x
		push	word ptr _ego+2
		push	word ptr _ego
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8
		les	bx, _ego
		mov	byte ptr es:[bx+35h], 11h
		les	bx, _ego
		mov	ax, es:[bx+10h]
		sar	ax, 3
		inc	ax
		mov	_ego_map_w, ax
		les	bx, _ego
		mov	ax, es:[bx+12h]
		sar	ax, 3
		inc	ax
		mov	_ego_map_h, ax
		mov	eax, _ego
		mov	_cur_sub, eax
		cmp	_jason_present,	0
		jz	loc_7128
		nop
		push	cs
		call	near ptr @add_jason$qv ; add_jason(void)
		assume es:nothing

loc_7128::				; CODE XREF: start_room(uchar *)+394j
		nop
		push	cs
		call	near ptr @update_jason_guage$qv	; update_jason_guage(void)
		assume es:nothing
		nop
		push	cs
		call	near ptr @hook_up_switches$qv ;	hook_up_switches(void)
		assume es:nothing
		les	bx, _the_map
		assume es:nothing
		mov	ax, es:[bx+26h]
		mov	_finish_tile, ax
		les	bx, _the_map
		mov	ax, es:[bx+28h]
		mov	_end_door_tile,	ax
		push	0FFh
		les	bx, _the_map
		push	word ptr es:[bx+2Ah]
		nop
		push	cs
		call	near ptr @add_door$quiui ; add_door(uint,uint)
		assume es:nothing
		add	sp, 4
		les	bx, _the_map
		assume es:nothing
		mov	ax, es:[bx+2Ch]
		mov	_secret_tile, ax
		mov	_teleport_count, 0
		mov	[bp+var_2], 0Ah
		jmp	loc_71C8
; ---------------------------------------------------------------------------

loc_7172::				; CODE XREF: start_room(uchar *)+43Fj
		mov	ax, [bp+var_2]
		shl	ax, 1
		les	bx, _the_map
		add	bx, ax
		cmp	word ptr es:[bx+24h], 0
		jz	loc_71C4
		mov	al, _teleport_count
		mov	ah, 0
		shl	ax, 2
		mov	dx, [bp+var_2]
		shl	dx, 1
		les	bx, _the_map
		add	bx, dx
		mov	dx, es:[bx+24h]
		mov	bx, ax
		mov	_all_teleports[bx], dx
		mov	ax, [bp+var_2]
		inc	ax
		shl	ax, 1
		les	bx, _the_map
		add	bx, ax
		mov	ax, es:[bx+24h]

loc_71B1::
		mov	dl, _teleport_count
		mov	dh, 0
		shl	dx, 2
		mov	bx, dx
		mov	word_2B890[bx],	ax
		inc	_teleport_count

loc_71C4::				; CODE XREF: start_room(uchar *)+3F5j
		add	[bp+var_2], 2

loc_71C8::				; CODE XREF: start_room(uchar *)+3E3j
		cmp	[bp+var_2], 1Eh
		jb	loc_7172
		mov	_message_count,	0
		mov	[bp+var_2], 1Eh
		jmp	loc_7234
; ---------------------------------------------------------------------------

loc_71DA::				; CODE XREF: start_room(uchar *)+4ABj
		mov	ax, [bp+var_2]
		shl	ax, 1
		les	bx, _the_map
		add	bx, ax
		cmp	word ptr es:[bx+24h], 0
		jnz	loc_71EE
		jmp	loc_723A
; ---------------------------------------------------------------------------

loc_71EE::				; CODE XREF: start_room(uchar *)+45Dj
		mov	al, _message_count
		mov	ah, 0
		shl	ax, 1
		mov	dx, [bp+var_2]
		shl	dx, 1
		les	bx, _the_map
		assume es:nothing
		add	bx, dx
		mov	dx, es:[bx+24h]
		mov	bx, ax
		mov	_map_messages[bx], dx
		mov	ax, [bp+var_2]
		inc	ax
		shl	ax, 1
		les	bx, _the_map
		add	bx, ax
		mov	ax, es:[bx+24h]
		mov	dl, _message_count
		mov	dh, 0
		shl	dx, 1
		mov	bx, dx
		mov	word_2B75C[bx],	ax
		mov	al, _message_count
		add	al, 2
		mov	_message_count,	al
		add	[bp+var_2], 2
		assume es:nothing

loc_7234::				; CODE XREF: start_room(uchar *)+44Bj
		cmp	[bp+var_2], 28h	; '('
		jb	loc_71DA

loc_723A::				; CODE XREF: start_room(uchar *)+45Fj
		les	bx, _display
		assume es:nothing
		mov	byte ptr es:[bx+6], 1
		mov	_control, 0
		nop
		push	cs
		call	near ptr @de_doit$qv ; de_doit(void)
		assume es:nothing
		mov	_control, 1
		les	bx, _display
		assume es:nothing
		mov	byte ptr es:[bx+6], 0
		mov	al, _displayed_page
		push	ax
		mov	al, _non_displayed_page
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@copy_page$qucuc ; vga_display::copy_page(uchar,uchar)
		assume es:nothing
		add	sp, 8
		cmp	_heavy_timer, 5
		jg	loc_72A9
		cmp	_heavy_timer, 0
		jz	loc_72A9
		push	0
		push	0
		push	word_2B724
		push	_gun_underbits
		push	0A1h ; '¡'
		push	0BEh ; '¾'
		push	97h ; ''
		push	80h ; ''
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@put_bits$qiiiinucuiui ; vga_display::put_bits(int,int,int,int,uchar *,uint,uint)
		add	sp, 14h

loc_72A9::				; CODE XREF: start_room(uchar *)+4EBj
					; start_room(uchar *)+4F2j
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fade_up$qv	; vga_display::fade_up(void)
		add	sp, 4
		leave
		retf
@start_room$qnuc endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; de_doit(void)
@de_doit$qv	proc far		; CODE XREF: play_game(uchar)+3C8p
					; start_room(uchar *)+4BDp ...

var_E		= dword	ptr -0Eh
var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_1		= byte ptr -1

		enter	0Eh, 0
		push	si
		mov	al, 0
		mov	_shootable_count, al
		mov	_barrier_count,	al
		mov	[bp+var_8], 0
		jmp	loc_73B3
; ---------------------------------------------------------------------------
		assume es:nothing

loc_72D0::				; CODE XREF: de_doit(void)+106j
		mov	ax, [bp+var_8]
		shl	ax, 2
		les	bx, _the_cast
		add	bx, ax
		mov	ax, es:[bx+4]
		mov	dx, es:[bx+2]
		mov	word ptr _act+2, ax
		mov	word ptr _act, dx
		les	bx, _act
		assume es:nothing
		test	byte ptr es:[bx+35h], 2
		jz	loc_733D
		cmp	_barrier_count,	22h ; '"'
		jnz	loc_730D
		push	0
		push	0
		push	ds
		push	offset aTooManyBarrier ; "Too many barriers for	list."
		call	@terminate$qnuct1 ; terminate(uchar *,uchar *)
; ---------------------------------------------------------------------------
		add	sp, 8

loc_730D::				; CODE XREF: de_doit(void)+40j
		les	bx, _act
		mov	al, es:[bx+52h]
		shr	ax, 5
		and	ax, 1
		or	ax, ax
		jnz	loc_733D
		mov	al, _barrier_count
		mov	ah, 0
		shl	ax, 2
		mov	dx, word ptr _act+2
		mov	bx, word ptr _act
		mov	si, ax
		mov	word_2B78C[si],	dx
		mov	_barrier_list[si], bx
		inc	_barrier_count

loc_733D::				; CODE XREF: de_doit(void)+39j
					; de_doit(void)+62j
		les	bx, _act
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		cmp	ax, 1
		jnz	loc_73B0
		assume es:nothing
		les	bx, _act
		test	byte ptr es:[bx+35h], 1
		jz	loc_73B0
		assume es:nothing
		les	bx, _act
		mov	al, es:[bx+35h]
		mov	ah, 0
		test	ax, 10h
		jnz	loc_73B0
		cmp	_shootable_count, 1Dh
		jnz	loc_7380
		push	0
		push	0
		push	ds
		push	offset aTooManyShootab ; "Too many shootables."
		call	@terminate$qnuct1 ; terminate(uchar *,uchar *)
; ---------------------------------------------------------------------------
		add	sp, 8

loc_7380::				; CODE XREF: de_doit(void)+B3j
		les	bx, _act
		mov	al, es:[bx+52h]
		shr	ax, 5
		and	ax, 1
		or	ax, ax
		jnz	loc_73B0
		mov	al, _shootable_count
		mov	ah, 0
		shl	ax, 2
		mov	dx, word ptr _act+2
		mov	bx, word ptr _act
		mov	si, ax
		mov	word_2B818[si],	dx
		mov	_shootable_list[si], bx
		inc	_shootable_count
		assume es:nothing

loc_73B0::				; CODE XREF: de_doit(void)+92j
					; de_doit(void)+9Dj ...
		inc	[bp+var_8]
		assume es:nothing

loc_73B3::				; CODE XREF: de_doit(void)+12j
		les	bx, _the_cast
		assume es:nothing
		mov	al, es:[bx]
		mov	ah, 0
		cmp	ax, [bp+var_8]
		jbe	loc_73C4
		jmp	loc_72D0
; ---------------------------------------------------------------------------

loc_73C4::				; CODE XREF: de_doit(void)+104j
		les	bx, _cur_sub
		assume es:nothing
		mov	ax, es:[bx+8]
		and	ax, 0FFFCh
		mov	[bp+var_4], ax
		les	bx, _cur_sub
		mov	ax, es:[bx+0Ah]
		mov	[bp+var_6], ax
		les	bx, _ego
		cmp	byte ptr es:[bx+3Dh], 2
		jz	loc_7403
		push	[bp+var_6]
		push	[bp+var_4]
		push	word ptr _the_map+2
		push	word ptr _the_map
		call	@tilemap@center_on$quiui ; tilemap::center_on(uint,uint)
		assume es:nothing
		add	sp, 8
		mov	[bp+var_1], al
		jmp	loc_7407
; ---------------------------------------------------------------------------
		assume es:nothing

loc_7403::				; CODE XREF: de_doit(void)+12Bj
		mov	[bp+var_1], 0
		assume es:nothing

loc_7407::				; CODE XREF: de_doit(void)+146j
		mov	al, [bp+var_1]
		push	ax
		push	word ptr _the_cast+2
		push	word ptr _the_cast
		call	@game_cast@update$quc ;	game_cast::update(uchar)
		assume es:nothing
		add	sp, 6
		mov	al, _non_displayed_page
		mov	ah, 0
		shl	ax, 1
		mov	bx, ax
		push	_page_offsets[bx]
		push	word ptr _the_map+2
		push	word ptr _the_map
		call	@tilemap@update$qui ; tilemap::update(uint)
		assume es:nothing
		add	sp, 6
		cmp	_cur_map, 6
		jz	loc_744D
		cmp	_cur_map, 0Ch
		jz	loc_744D
		cmp	_cur_map, 15h
		jnz	loc_7452

loc_744D::				; CODE XREF: de_doit(void)+182j
					; de_doit(void)+189j
		nop
		push	cs
		call	near ptr @update_boss_guage$qv ; update_boss_guage(void)

loc_7452::				; CODE XREF: de_doit(void)+190j
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@doit$qv ; vga_display::doit(void)
		assume es:nothing
		add	sp, 4
		mov	ah, 0
		mov	[bp+var_8], ax
		mov	al, _non_displayed_page
		mov	ah, 0
		shl	ax, 1
		mov	bx, ax
		push	_page_offsets[bx]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@show_offset$qui ; vga_display::show_offset(uint)
		add	sp, 6
		cmp	[bp+var_8], 0
		jz	loc_74A6
		les	bx, _display
		mov	al, es:[bx+6]
		mov	ah, 0
		or	ax, ax
		jnz	loc_74A6
		push	1
		push	ds
		push	offset _palette
		call	_forcepal
		add	sp, 6

loc_74A6::				; CODE XREF: de_doit(void)+1CDj
					; de_doit(void)+1DBj
		les	bx, _the_map
		assume es:nothing
		cmp	byte ptr es:[bx+39Ch], 2
		jnz	loc_74C4
		push	1
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@pause$qui ; vga_display::pause(uint)
		add	sp, 6

loc_74C4::				; CODE XREF: de_doit(void)+1F5j
		mov	al, _non_displayed_page
		mov	_displayed_page, al
		xor	_non_displayed_page, 1
		push	word_2B8BC
		push	_the_game
		call	@game_manager@doit$qv ;	game_manager::doit(void)
		assume es:nothing
		add	sp, 4
		nop
		push	cs
		call	near ptr @check_user$qv	; check_user(void)
		nop
		push	cs
		call	near ptr @check_guages$qv ; check_guages(void)
		assume es:nothing
		cmp	_jason_on, 0
		jz	loc_74F3
		jmp	loc_7597
; ---------------------------------------------------------------------------

loc_74F3::				; CODE XREF: de_doit(void)+233j
		push	_finish_tile
		push	word ptr _ego+2
		push	word ptr _ego
		call	@m_actor@on_pos$qui ; m_actor::on_pos(uint)
		add	sp, 6
		or	al, al
		jz	loc_7510
		mov	_stop_room, 1

loc_7510::				; CODE XREF: de_doit(void)+24Ej
		cmp	_secret_tile, 0
		jz	loc_7534
		push	_secret_tile
		push	word ptr _ego+2
		push	word ptr _ego
		call	@m_actor@on_pos$qui ; m_actor::on_pos(uint)
		add	sp, 6
		or	al, al
		jz	loc_7534
		mov	_stop_room, 6

loc_7534::				; CODE XREF: de_doit(void)+25Aj
					; de_doit(void)+272j
		push	_end_door_tile
		push	word ptr _ego+2
		push	word ptr _ego
		call	@m_actor@on_pos$qui ; m_actor::on_pos(uint)
		add	sp, 6
		or	al, al
		jz	loc_7597
		cmp	_end_door_ptr, 0
		jnz	loc_7564
		push	0
		push	0
		push	ds
		push	offset aEndDoorSwitchW ; "End door switch without door."
		call	@terminate$qnuct1 ; terminate(uchar *,uchar *)
; ---------------------------------------------------------------------------
		add	sp, 8

loc_7564::				; CODE XREF: de_doit(void)+297j
		les	bx, _end_door_ptr
		assume es:nothing
		mov	al, es:[bx+52h]
		shr	ax, 6
		and	ax, 1
		or	ax, ax
		jnz	loc_7586
		cmp	_got_key, 0
		jz	loc_7586
		les	bx, _end_door_ptr
		or	byte ptr es:[bx+52h], 40h

loc_7586::				; CODE XREF: de_doit(void)+2B9j
					; de_doit(void)+2C0j
		mov	al, _got_key
		mov	ah, 0
		or	ax, ax
		jnz	loc_7597
		push	0
		nop
		push	cs
		call	near ptr @post_message$quc ; post_message(uchar)
		pop	cx
		assume es:nothing

loc_7597::				; CODE XREF: de_doit(void)+235j
					; de_doit(void)+28Fj ...
		cmp	_heavy_timer, 0
		jz	loc_760E
		cmp	_heavy_timer, 5
		jnz	loc_75CD
		push	0
		push	0
		push	word_2B724
		push	_gun_underbits
		push	0A1h ; '¡'
		push	0BEh ; '¾'
		push	97h ; ''
		push	80h ; ''
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@put_bits$qiiiinucuiui ; vga_display::put_bits(int,int,int,int,uchar *,uint,uint)
		add	sp, 14h

loc_75CD::				; CODE XREF: de_doit(void)+2E8j
		cmp	_heavy_timer, 1
		jnz	loc_760E
		mov	_gun_count, 0
		mov	_shot_size, 0
		push	140h
		push	140h
		push	word_2A700
		push	_page_offsets
		push	97h ; ''
		push	80h ; ''
		push	0A1h ; '¡'
		push	0BEh ; '¾'
		push	97h ; ''
		push	80h ; ''
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@copy_bits$qiiiiiiuiuiuiui ; vga_display::copy_bits(int,int,int,int,int,int,uint,uint,uint,uint)
		add	sp, 18h

loc_760E::				; CODE XREF: de_doit(void)+2E1j
					; de_doit(void)+317j
		mov	al, _score_count
		inc	_score_count
		cmp	al, 28h	; '('
		jnz	loc_764E
		mov	_score_count, 0
		push	9Fh ; ''
		push	10Dh
		nop
		push	cs
		call	near ptr @update_score$qii ; update_score(int,int)
		assume es:nothing
		add	sp, 4
		push	3
		nop
		push	cs
		call	near ptr @random$qi ; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_764E
		push	2		; char
		push	ds
		push	offset aBubbles2 ; "bubbles2"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		assume es:nothing
		add	sp, 0Ah
		assume es:nothing

loc_764E::				; CODE XREF: de_doit(void)+35Cj
					; de_doit(void)+37Bj
		cmp	_displayed_page, 0
		jz	loc_7658
		jmp	loc_7788
; ---------------------------------------------------------------------------

loc_7658::				; CODE XREF: de_doit(void)+398j
		cmp	_cur_map, 0
		jz	loc_7662
		jmp	loc_7716
; ---------------------------------------------------------------------------

loc_7662::				; CODE XREF: de_doit(void)+3A2j
		mov	al, _jason_msg
		mov	ah, 0
		or	ax, ax
		jnz	loc_768F
		push	823h
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		call	@m_actor@on_pos$qui ; m_actor::on_pos(uint)
		add	sp, 6
		or	al, al
		jz	loc_768F
		mov	_jason_msg, 1
		push	0Eh
		nop
		push	cs
		call	near ptr @post_message$quc ; post_message(uchar)
		pop	cx

loc_768F::				; CODE XREF: de_doit(void)+3AEj
					; de_doit(void)+3C5j
		mov	al, _barrel_msg
		mov	ah, 0
		or	ax, ax
		jnz	loc_76BC
		push	403h
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		call	@m_actor@on_pos$qui ; m_actor::on_pos(uint)
		add	sp, 6
		or	al, al
		jz	loc_76BC
		assume es:nothing
		mov	_barrel_msg, 1
		push	0Ah
		nop
		push	cs
		call	near ptr @post_message$quc ; post_message(uchar)
		assume es:nothing
		pop	cx
		assume es:nothing

loc_76BC::				; CODE XREF: de_doit(void)+3DBj
					; de_doit(void)+3F2j
		mov	al, _gun_msg
		mov	ah, 0
		or	ax, ax
		jnz	loc_76E9
		push	0C23h
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		call	@m_actor@on_pos$qui ; m_actor::on_pos(uint)
		add	sp, 6
		or	al, al
		jz	loc_76E9
		mov	_gun_msg, 1
		push	0Ch
		nop
		push	cs
		call	near ptr @post_message$quc ; post_message(uchar)
		pop	cx

loc_76E9::				; CODE XREF: de_doit(void)+408j
					; de_doit(void)+41Fj
		mov	al, _cave_msg
		mov	ah, 0
		or	ax, ax
		jnz	loc_7716
		push	687h
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		call	@m_actor@on_pos$qui ; m_actor::on_pos(uint)
		add	sp, 6
		or	al, al
		jz	loc_7716
		mov	_cave_msg, 1
		push	0Dh
		nop
		push	cs
		call	near ptr @post_message$quc ; post_message(uchar)
		pop	cx

loc_7716::				; CODE XREF: de_doit(void)+3A4j
					; de_doit(void)+435j ...
		mov	[bp+var_8], 0
		jmp	loc_7766
; ---------------------------------------------------------------------------

loc_771D::				; CODE XREF: de_doit(void)+4B3j
		mov	bx, [bp+var_8]
		shl	bx, 1
		cmp	_map_messages[bx], 0
		jz	loc_7762
		mov	bx, [bp+var_8]
		shl	bx, 1
		push	_map_messages[bx]
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		call	@m_actor@on_pos$qui ; m_actor::on_pos(uint)
		add	sp, 6
		or	al, al
		jz	loc_7762
		mov	bx, [bp+var_8]
		inc	bx
		shl	bx, 1
		mov	al, byte ptr _map_messages[bx]
		push	ax
		nop
		push	cs
		call	near ptr @post_message$quc ; post_message(uchar)
		pop	cx
		mov	bx, [bp+var_8]
		shl	bx, 1
		mov	_map_messages[bx], 0

loc_7762::				; CODE XREF: de_doit(void)+46Cj
					; de_doit(void)+489j
		add	[bp+var_8], 2

loc_7766::				; CODE XREF: de_doit(void)+460j
		mov	al, _message_count
		mov	ah, 0
		cmp	ax, [bp+var_8]
		ja	loc_771D
		cmp	_message_posted, 0
		jz	loc_7788
		mov	al, _message_posted
		add	al, 0FFh
		mov	_message_posted, al
		or	al, al
		jnz	loc_7788
		nop
		push	cs
		call	near ptr @clear_message$qv ; clear_message(void)

loc_7788::				; CODE XREF: de_doit(void)+39Aj
					; de_doit(void)+4BAj ...
		cmp	_cur_map, 15h
		jz	loc_7792
		jmp	loc_7A32
; ---------------------------------------------------------------------------

loc_7792::				; CODE XREF: de_doit(void)+4D2j
		les	bx, dword ptr _the_game
		assume es:nothing
		cmp	byte ptr es:[bx+0Fh], 1
		jz	loc_77A0
		jmp	loc_7A32
; ---------------------------------------------------------------------------

loc_77A0::				; CODE XREF: de_doit(void)+4E0j
		push	2
		call	@pause$qui	; pause(uint)
		pop	cx
		les	bx, _boss
		push	es
		les	si, _ego
		mov	ax, es:[si]
		pop	es
		sub	ax, es:[bx+4]
		push	ax
		nop
		push	cs
		call	near ptr @abs$qi ; abs(int)
		pop	cx
		mov	[bp+var_A], ax
		les	bx, dword ptr _the_game
		cmp	byte ptr es:[bx+10h], 0
		jz	loc_77D1
		jmp	loc_7914
; ---------------------------------------------------------------------------

loc_77D1::				; CODE XREF: de_doit(void)+511j
		cmp	_control, 0
		jz	loc_77DD
		mov	_control, 0

loc_77DD::				; CODE XREF: de_doit(void)+51Bj
		les	bx, _cur_sub
		mov	ax, es:[bx+6]
		les	bx, _boss
		cmp	ax, es:[bx+0Ah]
		jz	loc_7824
		les	bx, _ego
		mov	word ptr es:[bx+14h], 0
		les	bx, _ego
		mov	ax, es:[bx+6]
		les	bx, _boss
		cmp	ax, es:[bx+0Ah]
		jge	loc_7817
		les	bx, _ego
		mov	word ptr es:[bx+16h], 1
		jmp	loc_7821
; ---------------------------------------------------------------------------

loc_7817::				; CODE XREF: de_doit(void)+54Ej
		les	bx, _ego
		mov	word ptr es:[bx+16h], 0FFFFh

loc_7821::				; CODE XREF: de_doit(void)+55Aj
		jmp	loc_7911
; ---------------------------------------------------------------------------

loc_7824::				; CODE XREF: de_doit(void)+532j
		cmp	[bp+var_A], 4
		jbe	loc_785E
		les	bx, _ego
		mov	word ptr es:[bx+16h], 0
		les	bx, _boss
		mov	ax, es:[bx+4]
		les	bx, _ego
		cmp	ax, es:[bx]
		jle	loc_7851
		les	bx, _ego
		mov	word ptr es:[bx+14h], 4
		jmp	loc_785B
; ---------------------------------------------------------------------------

loc_7851::				; CODE XREF: de_doit(void)+588j
		les	bx, _ego
		mov	word ptr es:[bx+14h], 0FFFCh

loc_785B::				; CODE XREF: de_doit(void)+594j
		jmp	loc_7911
; ---------------------------------------------------------------------------

loc_785E::				; CODE XREF: de_doit(void)+56Dj
		les	bx, dword ptr _the_game
		mov	byte ptr es:[bx+10h], 1
		les	bx, _ego
		cmp	byte ptr es:[bx+34h], 0
		jz	loc_788F
		push	ds
		push	offset aSubr_l_0 ; "subr.l"
		push	word ptr _ego+2
		push	word ptr _ego	; __int32
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8
		les	bx, _ego
		mov	byte ptr es:[bx+34h], 0

loc_788F::				; CODE XREF: de_doit(void)+5B5j
		push	0
		push	0		; __int32
		push	0
		push	0		; __int32
		push	ds
		push	offset aChain_l_1 ; "chain.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _cur_sub
		push	word ptr es:[bx+6]
		les	bx, _cur_sub
		mov	ax, es:[bx+8]
		add	ax, 5
		les	bx, _act
		sub	ax, es:[bx+10h]
		push	ax
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8
		push	4
		push	0
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		les	bx, _ego
		mov	eax, _act
		mov	es:[bx+2Ch], eax
		les	bx, _ego
		xor	ax, ax
		mov	es:[bx+16h], ax
		les	bx, _ego
		mov	es:[bx+14h], ax

loc_7911::				; CODE XREF: de_doit(void):loc_7821j
					; de_doit(void):loc_785Bj
		jmp	loc_7A32
; ---------------------------------------------------------------------------

loc_7914::				; CODE XREF: de_doit(void)+513j
		les	bx, _ego
		les	bx, es:[bx+2Ch]
		cmp	byte ptr es:[bx+3Ch], 2
		jnz	loc_7939
		push	0Fh		; char
		push	ds
		push	offset aPlunk2_1 ; "plunk2"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah

loc_7939::				; CODE XREF: de_doit(void)+666j
		les	bx, _boss
		cmp	word ptr es:[bx+14h], 0
		jnz	loc_7975
		les	bx, _ego
		les	bx, es:[bx+2Ch]
		mov	al, es:[bx+38h]
		mov	ah, 0
		or	ax, ax
		jnz	loc_7975
		les	bx, _boss
		mov	ax, 4
		mov	es:[bx+14h], ax
		les	bx, _ego
		les	bx, es:[bx+2Ch]
		mov	es:[bx+14h], ax
		les	bx, _ego
		mov	es:[bx+14h], ax

loc_7975::				; CODE XREF: de_doit(void)+687j
					; de_doit(void)+699j
		push	3
		call	@pause$qui	; pause(uint)
		pop	cx
		les	bx, _ego
		cmp	word ptr es:[bx], 258h
		jg	loc_798B
		jmp	loc_7A32
; ---------------------------------------------------------------------------

loc_798B::				; CODE XREF: de_doit(void)+6CBj
		mov	al, _displayed_page
		mov	ah, 0
		or	ax, ax
		jz	loc_7997
		jmp	loc_7A32
; ---------------------------------------------------------------------------

loc_7997::				; CODE XREF: de_doit(void)+6D7j
		push	0		; int
		push	0		; char
		push	41h ; 'A'       ; int
		push	23h ; '#'       ; int
		push	ds
		push	offset aThe_l	; "the.l"
		nop
		push	cs
		call	near ptr @show_loop$qnuciiucui ; show_loop(uchar *,int,int,uchar,uint)
		add	sp, 0Ch
		push	0		; int
		push	0		; char
		push	41h ; 'A'       ; int
		push	0A5h ; '¥'      ; int
		push	ds
		push	offset aEnd_l	; "end.l"
		nop
		push	cs
		call	near ptr @show_loop$qnuciiucui ; show_loop(uchar *,int,int,uchar,uint)
		add	sp, 0Ch
		push	12Ch
		call	@pause$qui	; pause(uint)
		pop	cx
		mov	[bp+var_E], 0
		jmp	loc_7A23
; ---------------------------------------------------------------------------

loc_79D3::				; CODE XREF: de_doit(void)+770j
		push	140h
		nop
		push	cs
		call	near ptr @random$qi ; random(int)
		pop	cx
		mov	[bp+var_4], ax
		push	0C8h ; 'È'
		nop
		push	cs
		call	near ptr @random$qi ; random(int)
		pop	cx
		mov	[bp+var_6], ax
		push	0
		push	0FFFFh
		push	10h
		nop
		push	cs
		call	near ptr @random$qi ; random(int)
		pop	cx
		add	ax, 90h	; ''
		push	ax
		mov	ax, [bp+var_6]
		add	ax, 2
		push	ax
		mov	ax, [bp+var_4]
		add	ax, 2
		push	ax
		push	[bp+var_6]
		push	[bp+var_4]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fill_rect$qiiiiiiuc ; vga_display::fill_rect(int,int,int,int,int,int,uchar)
		add	sp, 12h
		inc	[bp+var_E]

loc_7A23::				; CODE XREF: de_doit(void)+716j
		cmp	[bp+var_E], 1F400h
		jb	loc_79D3
		mov	_stop_room, 1
		assume es:nothing

loc_7A32::				; CODE XREF: de_doit(void)+4D4j
					; de_doit(void)+4E2j ...
		pop	si
		leave
		retf
@de_doit$qv	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; end_room(void)
@end_room$qv	proc far		; CODE XREF: play_game(uchar)+67Fp
					; play_game(uchar)+701p
		push	bp
		mov	bp, sp
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fade_down$qv ; vga_display::fade_down(void)
		add	sp, 4
		nop
		push	cs
		call	near ptr @show_stats$qv	; show_stats(void)
		pop	bp
		retf
@end_room$qv	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; end_game(void)
@end_game$qv	proc far		; CODE XREF: play_game(uchar)+674p
					; play_game(uchar)+69Fp

var_5		= byte ptr -5
src		= dword	ptr -4

		enter	6, 0
		push	word_2B8BC
		push	_the_game
		call	@game_manager@reset_sound$qv ; game_manager::reset_sound(void)
		add	sp, 4
		push	0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@show_offset$qui ; vga_display::show_offset(uint)
		add	sp, 6
		cmp	_stop_room, 5
		jz	loc_7A7F
		jmp	loc_7B08
; ---------------------------------------------------------------------------

loc_7A7F::				; CODE XREF: end_game(void)+2Bj
		push	2
		nop
		push	cs
		call	near ptr @random$qi ; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_7A97
		push	0FFFFh
		push	0
		push	0
		push	ds
		push	offset aP_death1_pcx ; "p_death1.pcx"
		jmp	loc_7AA1
; ---------------------------------------------------------------------------

loc_7A97::				; CODE XREF: end_game(void)+3Aj
		push	0FFFFh		; int
		push	0		; int
		push	0		; char
		push	ds
		push	offset aP_death2_pcx ; "p_death2.pcx"

loc_7AA1::				; CODE XREF: end_game(void)+46j
		push	word ptr _display+2 ; int
		push	word ptr _display ; int
		call	@vga_display@show_pcx$qnucucuii	; vga_display::show_pcx(uchar *,uchar,uint,int)
		add	sp, 0Eh
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fade_up$qv	; vga_display::fade_up(void)
		add	sp, 4
		les	bx, dword ptr _the_game
		assume es:nothing
		cmp	byte ptr es:[bx+6], 0
		jz	loc_7AD2
		push	ds
		push	offset aBubbles2_0 ; "bubbles2"
		jmp	loc_7AD6
; ---------------------------------------------------------------------------

loc_7AD2::				; CODE XREF: end_game(void)+7Bj
		push	ds
		push	offset aDead	; "dead"

loc_7AD6::				; CODE XREF: end_game(void)+81j
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@play_sound_file$qnuc ; game_manager::play_sound_file(uchar *)
		add	sp, 8
		push	5Ah ; 'Z'
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@pause$qui ; vga_display::pause(uint)
		add	sp, 6
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fade_down$qv ; vga_display::fade_down(void)
		add	sp, 4

loc_7B08::				; CODE XREF: end_game(void)+2Dj
		push	0
		push	0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@cls$qucuc ; vga_display::cls(uchar,uchar)
		add	sp, 8
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@set_palette$qv ; vga_display::set_palette(void)
		add	sp, 4
		push	dword ptr [_score]
		call	@is_record$qul	; is_record(ulong)
		add	sp, 4
		mov	[bp+var_5], al
		cmp	[bp+var_5], 0
		jz	loc_7B9B
		cmp	_cheat_mode, 1
		jnz	loc_7B61
		push	0		; int
		push	0		; int
		push	0		; char
		push	ds
		push	offset aYouMadeTheTop1 ; "You made the top 10!	Unfortunately\nyo"...
		call	@i_inform$qnucuct1 ; i_inform(uchar *,uchar,uchar *)
		add	sp, 0Ah
		mov	[bp+var_5], 0
		jmp	loc_7B9B
; ---------------------------------------------------------------------------

loc_7B61::				; CODE XREF: end_game(void)+F8j
		push	ds
		push	offset aYouReInTheTop1 ; "You're in the top 10!"
		push	ds
		push	offset aEnterName ; "Enter Name"
		call	@i_get_string$qnuct1 ; i_get_string(uchar *,uchar *)
		add	sp, 8
		mov	word ptr [bp+src+2], dx
		mov	word ptr [bp+src], ax
		cmp	[bp+src], 0
		jnz	loc_7B86
		mov	word ptr [bp+src+2], ds
		mov	word ptr [bp+src], 0F29h

loc_7B86::				; CODE XREF: end_game(void)+12Dj
		push	0		; char
		push	word ptr [bp+src+2]
		push	word ptr [bp+src] ; src
		push	dword ptr [_score]	; __int32
		call	@save_new_score$qulnucuc ; save_new_score(ulong,uchar *,uchar)
		add	sp, 0Ah

loc_7B9B::				; CODE XREF: end_game(void)+F1j
					; end_game(void)+110j
		mov	al, [bp+var_5]
		push	ax
		nop
		push	cs
		call	near ptr @show_high_scores$quc ; show_high_scores(uchar)
		pop	cx
		mov	_game_in_progress, 0
		push	word_2B724
		push	_gun_underbits	; block
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4
		push	word_2B728
		push	_jguage_underbits ; block

loc_7BC2::				; operator delete(void *)
		call	@$bdele$qnv

loc_7BC7::
		add	sp, 4
		mov	dword ptr _gun_underbits, 0
		leave
		retf
@end_game$qv	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; kill_ego(int,	int)
@kill_ego$qii	proc far		; CODE XREF: check_guages(void)+E5p
					; check_guages(void)+105p ...

arg_0		= word ptr  6
arg_2		= word ptr  8

		push	bp
		mov	bp, sp
		cmp	_god_mode, 1
		jnz	loc_7BE2
		jmp	loc_7E81
; ---------------------------------------------------------------------------

loc_7BE2::				; CODE XREF: kill_ego(int,int)+8j
		les	bx, _cur_sub
		assume es:nothing
		cmp	byte ptr es:[bx+3Dh], 6
		jnz	loc_7BF0
		jmp	loc_7E81
; ---------------------------------------------------------------------------

loc_7BF0::				; CODE XREF: kill_ego(int,int)+16j
		les	bx, _ego
		assume es:nothing
		cmp	byte ptr es:[bx+3Dh], 2
		jnz	loc_7BFE
		jmp	loc_7D35
; ---------------------------------------------------------------------------

loc_7BFE::				; CODE XREF: kill_ego(int,int)+24j
		push	word ptr _ego+2
		push	word ptr _ego
		call	@m_actor@erase$qv ; m_actor::erase(void)
		assume es:nothing
		add	sp, 4
		cmp	_death_type, 0
		jnz	loc_7C79
		push	ds
		push	offset aEgodie2_l_0_ ; "egodie2.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		assume es:nothing
		add	sp, 8
		push	ds
		push	offset aEgodie2_l_0 ; "egodie2.l"
		push	word ptr _ego+2
		push	word ptr _ego	; __int32
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		assume es:nothing
		add	sp, 8
		push	4
		push	2
		push	word ptr _ego+2
		push	word ptr _ego
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		les	bx, _ego
		mov	ax, es:[bx+2]
		add	ax, 0FFF6h
		push	ax
		les	bx, _ego
		mov	ax, es:[bx]
		inc	ax
		push	ax
		push	word ptr _ego+2
		push	word ptr _ego
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8
		jmp	loc_7CFF
; ---------------------------------------------------------------------------

loc_7C79::				; CODE XREF: kill_ego(int,int)+3Ej
		push	0Fh		; char
		push	ds
		push	offset aSwish	; "swish"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah
		push	ds
		push	offset aGotcha_l ; "gotcha.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aGotcha_l_0 ; "gotcha.l"
		push	word ptr _ego+2
		push	word ptr _ego	; __int32
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8
		push	4
		push	1
		push	word ptr _ego+2
		push	word ptr _ego
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		mov	ax, [bp+arg_2]
		add	ax, 0FFE4h
		push	ax
		mov	ax, [bp+arg_0]
		add	ax, 0FFE4h
		push	ax
		push	word ptr _ego+2
		push	word ptr _ego
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8
		push	0Fh		; char
		push	ds
		push	offset aSmash	; "smash"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah

loc_7CFF::				; CODE XREF: kill_ego(int,int)+A1j
		les	bx, _ego
		mov	byte ptr es:[bx+3Dh], 2
		les	bx, _ego
		mov	word ptr es:[bx+22h], 3Ch ; '<'
		les	bx, _ego
		xor	ax, ax
		mov	es:[bx+16h], ax
		les	bx, _ego
		mov	es:[bx+14h], ax
		cmp	_jason_present,	1
		jnz	loc_7D30
		nop
		push	cs
		call	near ptr @kill_jason$qv	; kill_jason(void)
		assume es:nothing

loc_7D30::				; CODE XREF: kill_ego(int,int)+154j
		mov	_control, 0

loc_7D35::				; CODE XREF: kill_ego(int,int)+26j
		cmp	_death_type, 0
		jnz	loc_7DB5
		les	bx, _ego
		assume es:nothing
		cmp	byte ptr es:[bx+3Ch], 4
		jnz	loc_7D5D
		push	0Fh		; char
		push	ds
		push	offset aExp2	; "exp2"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		assume es:nothing
		add	sp, 0Ah
		assume es:nothing

loc_7D5D::				; CODE XREF: kill_ego(int,int)+170j
		les	bx, _ego
		cmp	byte ptr es:[bx+3Ch], 4
		jbe	loc_7DB5
		les	bx, _ego
		mov	al, es:[bx+52h]
		shr	ax, 6
		and	ax, 1
		or	ax, ax
		jnz	loc_7DB5
		push	0
		les	bx, _ego
		push	word ptr es:[bx+12h]
		nop
		push	cs
		call	near ptr @random$qi ; random(int)
		pop	cx
		les	bx, _ego
		mov	dx, es:[bx+2]
		add	dx, ax
		push	dx
		les	bx, _ego
		push	word ptr es:[bx+10h]
		nop
		push	cs
		call	near ptr @random$qi ; random(int)
		pop	cx
		les	bx, _ego
		mov	dx, es:[bx]
		add	dx, ax
		push	dx
		nop
		push	cs
		call	near ptr @add_bubble$qiii ; add_bubble(int,int,int)
		assume es:nothing
		add	sp, 6
		assume es:nothing

loc_7DB5::				; CODE XREF: kill_ego(int,int)+165j
					; kill_ego(int,int)+191j ...
		les	bx, _ego
		cmp	byte ptr es:[bx+38h], 0
		jz	loc_7DC3
		jmp	loc_7E81
; ---------------------------------------------------------------------------

loc_7DC3::				; CODE XREF: kill_ego(int,int)+1E9j
		cmp	_death_type, 0
		jnz	loc_7DD0
		push	ds
		push	offset aEgodie2_l_1 ; "egodie2.l"
		jmp	loc_7DD4
; ---------------------------------------------------------------------------

loc_7DD0::				; CODE XREF: kill_ego(int,int)+1F3j
		push	ds
		push	offset aGotcha_l_1 ; "gotcha.l"

loc_7DD4::				; CODE XREF: kill_ego(int,int)+1F9j
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_loop$qnuc ; game_manager::remove_loop(uchar *)
		assume es:nothing
		add	sp, 8
		push	word_2B8BC
		push	_the_game
		call	@game_manager@reset_sound$qv ; game_manager::reset_sound(void)
		add	sp, 4
		mov	al, _men
		mov	ah, 0
		mov	bx, 2
		cwd
		idiv	bx
		or	dx, dx
		jz	loc_7E0A
		cmp	dx, 1
		jz	loc_7E20
		jmp	loc_7E26
; ---------------------------------------------------------------------------

loc_7E0A::				; CODE XREF: kill_ego(int,int)+22Cj
		push	ds
		push	offset aCry	; "cry"

loc_7E0E::				; CODE XREF: kill_ego(int,int)+24Fj
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@play_sound_file$qnuc ; game_manager::play_sound_file(uchar *)
		add	sp, 8
		jmp	loc_7E26
; ---------------------------------------------------------------------------

loc_7E20::				; CODE XREF: kill_ego(int,int)+231j
		push	ds
		push	offset aVillans	; "villans"
		jmp	loc_7E0E
; ---------------------------------------------------------------------------

loc_7E26::				; CODE XREF: kill_ego(int,int)+233j
					; kill_ego(int,int)+249j
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fade_down$qv ; vga_display::fade_down(void)
		add	sp, 4
		cmp	_men, 0
		jnz	loc_7E44
		mov	_stop_room, 5
		jmp	loc_7E81
; ---------------------------------------------------------------------------

loc_7E44::				; CODE XREF: kill_ego(int,int)+266j
		mov	_stop_room, 3
		cmp	_heavy_timer, 0
		jnz	loc_7E55
		mov	_shot_size, 0

loc_7E55::				; CODE XREF: kill_ego(int,int)+279j
		mov	_auto_fire, 0
		mov	_top_fire, 0
		mov	_jason_fire, 0
		mov	al, 0
		mov	_jason_present,	al
		mov	_jason_on, al
		mov	_shld_supply, 3Ch ; '<'
		mov	_heavy_timer, 0
		dec	_men
		nop
		push	cs
		call	near ptr @update_men$qv	; update_men(void)
		assume es:nothing

loc_7E81::				; CODE XREF: kill_ego(int,int)+Aj
					; kill_ego(int,int)+18j ...
		pop	bp
		retf
@kill_ego$qii	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; score_at(int,	int, int)
@score_at$qiii	proc far		; CODE XREF: seg0b2c:0D45P
					; seg0b2c:112EP ...

var_6		= word ptr -6
s2		= dword	ptr -4
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah

		enter	6, 0
		mov	ax, [bp+arg_4]
		mov	[bp+var_6], ax
		mov	cx, 6		; switch 6 cases
		mov	bx, offset word_7F52

loc_7E93::				; CODE XREF: score_at(int,int,int)+1Bj
		mov	ax, cs:[bx]
		cmp	ax, [bp+var_6]
		jz	loc_7EA2
		add	bx, 2
		loop	loc_7E93
		jmp	loc_7EE2	; jumptable 00015CC2 default case
; ---------------------------------------------------------------------------

loc_7EA2::				; CODE XREF: score_at(int,int,int)+16j
		jmp	word ptr cs:[bx+0Ch] ; switch jump
; ---------------------------------------------------------------------------
		assume es:nothing

loc_7EA6::				; CODE XREF: score_at(int,int,int):loc_7EA2j
					; DATA XREF: seg03f9:1DEEo
		mov	word ptr [bp+s2+2], ds ; jumptable 00015CC2 case 100
		mov	word ptr [bp+s2], offset aScr_100_l_0 ;	"scr_100.l"
		jmp	loc_7EF4
; ---------------------------------------------------------------------------
		assume es:nothing

loc_7EB0::				; CODE XREF: score_at(int,int,int):loc_7EA2j
					; DATA XREF: seg03f9:1DEEo
		mov	word ptr [bp+s2+2], ds ; jumptable 00015CC2 case 500
		mov	word ptr [bp+s2], offset aScr_500_l_0 ;	"scr_500.l"
		jmp	loc_7EF4
; ---------------------------------------------------------------------------

loc_7EBA::				; CODE XREF: score_at(int,int,int):loc_7EA2j
					; DATA XREF: seg03f9:1DEEo
		mov	word ptr [bp+s2+2], ds ; jumptable 00015CC2 case 1000
		mov	word ptr [bp+s2], offset aScr_1000_l_0 ; "scr_1000.l"
		jmp	loc_7EF4
; ---------------------------------------------------------------------------

loc_7EC4::				; CODE XREF: score_at(int,int,int):loc_7EA2j
					; DATA XREF: seg03f9:1DEEo
		mov	word ptr [bp+s2+2], ds ; jumptable 00015CC2 case 2000
		mov	word ptr [bp+s2], offset aScr_2000_l_0 ; "scr_2000.l"
		jmp	loc_7EF4
; ---------------------------------------------------------------------------

loc_7ECE::				; CODE XREF: score_at(int,int,int):loc_7EA2j
					; DATA XREF: seg03f9:1DEEo
		mov	word ptr [bp+s2+2], ds ; jumptable 00015CC2 case 3000
		mov	word ptr [bp+s2], offset aScr_3000_l_0 ; "scr_3000.l"
		jmp	loc_7EF4
; ---------------------------------------------------------------------------

loc_7ED8::				; CODE XREF: score_at(int,int,int):loc_7EA2j
					; DATA XREF: seg03f9:1DEEo
		mov	word ptr [bp+s2+2], ds ; jumptable 00015CC2 case 4000
		mov	word ptr [bp+s2], offset aScr_4000_l_0 ; "scr_4000.l"
		jmp	loc_7EF4
; ---------------------------------------------------------------------------

loc_7EE2::				; CODE XREF: score_at(int,int,int)+1Dj
		push	0		; jumptable 00015CC2 default case
		push	0
		push	ds
		push	offset aUndefinedScore ; "Undefined score animation."
		call	@terminate$qnuct1 ; terminate(uchar *,uchar *)
; ---------------------------------------------------------------------------
		add	sp, 8
		jmp	$+2
; ---------------------------------------------------------------------------

loc_7EF4::				; CODE XREF: score_at(int,int,int)+2Bj
					; score_at(int,int,int)+35j ...
		movsx	eax, [bp+arg_4]
		add	_score,	eax
		push	seg seg0b2c
		push	offset @do_score$qn7m_actor ; __int32
		push	0
		push	0		; __int32
		push	word ptr [bp+s2+2]
		push	word ptr [bp+s2] ; s2
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		assume es:nothing
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		push	2
		nop
		push	cs
		call	near ptr @random$qi ; random(int)
		pop	cx
		add	ax, 2
		neg	ax
		les	bx, _act
		assume es:nothing
		mov	es:[bx+16h], ax
		push	[bp+arg_2]
		push	[bp+arg_0]
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8
		leave
		retf
@score_at$qiii	endp

; ---------------------------------------------------------------------------
word_7F52	dw    64h		; DATA XREF: score_at(int,int,int)+Do
					; value	table for switch statement
		db 0F4h	; ô
		db    1
		db 0E8h	; è
		db    3
		db 0D0h	; Ð
		db    7
		db 0B8h	; ¸
		db  0Bh
		db 0A0h	;  
		db  0Fh
		dw offset loc_7EA6	; jump table for switch	statement
		dw offset loc_7EB0
		dw offset loc_7EBA
		dw offset loc_7EC4
		dw offset loc_7ECE
		dw offset loc_7ED8
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; post_message(unsigned	char)
@post_message$quc proc far		; CODE XREF: de_doit(void)+2D8p
					; de_doit(void)+3D0p ...

s2		= dword	ptr -6
var_2		= word ptr -2
arg_0		= byte ptr  6

		enter	6, 0
		mov	al, [bp+arg_0]
		mov	ah, 0
		cmp	ax, _cur_message
		jnz	loc_7F7C
		jmp	locret_80FF
; ---------------------------------------------------------------------------

loc_7F7C::				; CODE XREF: post_message(uchar)+Dj
		cmp	[bp+arg_0], 0Ah
		jnb	loc_7F85
		assume es:nothing
		jmp	loc_8058
; ---------------------------------------------------------------------------
		assume es:nothing

loc_7F85::				; CODE XREF: post_message(uchar)+16j
		mov	al, [bp+arg_0]
		mov	ah, 0
		sub	ax, 0Ah
		mov	bx, ax
		cmp	bx, 4		; switch 5 cases
		ja	loc_7FC3	; jumptable 00015DB6 default case
		shl	bx, 1
		jmp	cs:word_8102[bx] ; switch jump
; ---------------------------------------------------------------------------

loc_7F9B::				; CODE XREF: post_message(uchar)+2Cj
		mov	word ptr [bp+s2+2], ds ; jumptable 00015DB6 case 0
		mov	word ptr [bp+s2], offset aMsg_bar_l ; "msg_bar.l"
		jmp	loc_7FC3	; jumptable 00015DB6 default case
; ---------------------------------------------------------------------------

loc_7FA5::				; CODE XREF: post_message(uchar)+2Cj
		mov	word ptr [bp+s2+2], ds ; jumptable 00015DB6 case 3
		mov	word ptr [bp+s2], offset aMsg_cave_l ; "msg_cave.l"
		jmp	loc_7FC3	; jumptable 00015DB6 default case
; ---------------------------------------------------------------------------

loc_7FAF::				; CODE XREF: post_message(uchar)+2Cj
		mov	word ptr [bp+s2+2], ds ; jumptable 00015DB6 case 2
		mov	word ptr [bp+s2], offset aMsg_gun_l ; "msg_gun.l"
		jmp	loc_7FC3	; jumptable 00015DB6 default case
; ---------------------------------------------------------------------------

loc_7FB9::				; CODE XREF: post_message(uchar)+2Cj
		mov	word ptr [bp+s2+2], ds ; jumptable 00015DB6 case 4
		mov	word ptr [bp+s2], offset aMsg_jasn_l ; "msg_jasn.l"
		jmp	$+2	; jumptable 00015DB6 default case
; ---------------------------------------------------------------------------

loc_7FC3::				; CODE XREF: post_message(uchar)+28j
					; post_message(uchar)+2Cj ...
		mov	al, _displayed_page ; jumptable	00015DB6 default case
		mov	ah, 0
		shl	ax, 1
		mov	bx, ax
		push	_page_offsets[bx] ; int
		push	0		; char
		push	37h ; '7'       ; int
		push	69h ; 'i'       ; int
		push	word ptr [bp+s2+2]
		push	word ptr [bp+s2] ; s2
		nop
		push	cs
		call	near ptr @show_loop$qnuciiucui ; show_loop(uchar *,int,int,uchar,uint)
		assume es:nothing
		add	sp, 0Ch
		jmp	loc_7FF6
; ---------------------------------------------------------------------------

loc_7FE6::				; CODE XREF: post_message(uchar)+91j
					; post_message(uchar)+9Cj
		push	word_2B8BC
		push	_the_game
		call	@game_manager@doit$qv ;	game_manager::doit(void)
		add	sp, 4

loc_7FF6::				; CODE XREF: post_message(uchar)+7Aj
		cmp	byte_2D3C7, 0
		jnz	loc_7FE6
		les	bx, dword ptr _the_game
		assume es:nothing
		cmp	byte ptr es:[bx+2Ch], 0
		jnz	loc_7FE6
		jmp	loc_801A
; ---------------------------------------------------------------------------

loc_800A::				; CODE XREF: post_message(uchar)+C5j
		push	word_2B8BC
		push	_the_game
		call	@game_manager@doit$qv ;	game_manager::doit(void)
		add	sp, 4

loc_801A::				; CODE XREF: post_message(uchar)+9Ej
		mov	al, byte_2D3C7
		mov	ah, 0
		or	ax, ax
		jnz	loc_8031
		les	bx, dword ptr _the_game
		mov	al, es:[bx+2Ch]
		mov	ah, 0
		or	ax, ax
		jz	loc_800A

loc_8031::				; CODE XREF: post_message(uchar)+B7j
		jmp	loc_8043
; ---------------------------------------------------------------------------

loc_8033::				; CODE XREF: post_message(uchar)+DEj
					; post_message(uchar)+E9j
		push	word_2B8BC
		push	_the_game
		call	@game_manager@doit$qv ;	game_manager::doit(void)
		add	sp, 4

loc_8043::				; CODE XREF: post_message(uchar):loc_8031j
		cmp	byte_2D3C7, 0
		jnz	loc_8033
		les	bx, dword ptr _the_game
		cmp	byte ptr es:[bx+2Ch], 0
		jnz	loc_8033
		jmp	locret_80FF
; ---------------------------------------------------------------------------

loc_8058::				; CODE XREF: post_message(uchar)+18j
		mov	_message_posted, 3Ch ; '<'
		mov	al, [bp+arg_0]
		mov	ah, 0
		shl	ax, 2
		mov	bx, ax
		push	word ptr [bx+9Eh]
		push	word ptr [bx+9Ch] ; s
		call	_strlen
		assume es:seg2608
		add	sp, 4
		shr	ax, 1
		shl	ax, 3
		mov	dx, 0A0h ; ' '
		sub	dx, ax
		mov	[bp+var_2], dx
		push	0
		push	0FFFFh
		push	0
		push	0C8h ; 'È'
		push	140h
		push	0BEh ; '¾'
		push	0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fill_rect$qiiiiiiuc ; vga_display::fill_rect(int,int,int,int,int,int,uchar)
		assume es:nothing
		add	sp, 12h
		push	3		; char
		push	17h		; char
		mov	al, [bp+arg_0]
		mov	ah, 0
		shl	ax, 2
		mov	bx, ax
		push	word ptr [bx+9Eh]
		push	word ptr [bx+9Ch] ; s
		push	0BFh ; '¿'      ; int
		push	[bp+var_2]	; int
		call	@vga_text$qiinucucuc ; vga_text(int,int,uchar *,uchar,uchar)
		assume es:seg2608
		add	sp, 0Ch
		push	140h
		push	140h
		push	word_2A700
		push	_page_offsets
		push	0BEh ; '¾'
		push	0
		push	0C8h ; 'È'
		push	140h
		push	0BEh ; '¾'
		push	0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@copy_bits$qiiiiiiuiuiuiui ; vga_display::copy_bits(int,int,int,int,int,int,uint,uint,uint,uint)
		assume es:nothing
		add	sp, 18h
		mov	al, [bp+arg_0]
		mov	ah, 0
		mov	_cur_message, ax
		assume es:nothing

locret_80FF::				; CODE XREF: post_message(uchar)+Fj
					; post_message(uchar)+EBj
		leave
		retf
@post_message$quc endp

; ---------------------------------------------------------------------------
		db 0
word_8102	dw  1E2Bh		; DATA XREF: post_message(uchar)+2Cr
					; jump table for switch	statement
		db  53h	; S
		db  1Eh
		db  3Fh	; ?
		db  1Eh
		db  35h	; 5
		db  1Eh
		db  49h	; I
		db  1Eh

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; clear_message(void)
@clear_message$qv proc far		; CODE XREF: start_room(uchar *)+C2p
					; de_doit(void)+4CAp
		push	bp
		mov	bp, sp
		push	0
		push	0FFFFh
		push	0
		push	0C8h ; 'È'
		push	140h
		push	0BEh ; '¾'
		push	0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fill_rect$qiiiiiiuc ; vga_display::fill_rect(int,int,int,int,int,int,uchar)
		assume es:nothing
		add	sp, 12h
		push	140h
		push	140h
		push	word_2A700
		push	_page_offsets
		push	0BEh ; '¾'
		push	0
		push	0C8h ; 'È'
		push	140h
		push	0BEh ; '¾'
		push	0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@copy_bits$qiiiiiiuiuiuiui ; vga_display::copy_bits(int,int,int,int,int,int,uint,uint,uint,uint)
		add	sp, 18h
		mov	_cur_message, 0FFFFh
		pop	bp
		retf
@clear_message$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; add_map_item(unsigned	int, unsigned int)
@add_map_item$quiui proc far		; CODE XREF: start_room(uchar *)+29Dp
					; add_map_pup(uint,uint)+14Fp ...

var_C		= word ptr -0Ch
s2		= dword	ptr -0Ah
var_5		= byte ptr -5
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8

		enter	0Ch, 0
		test	[bp+arg_2], 0Fh
		jz	loc_8186
		mov	ax, [bp+arg_2]
		and	ax, 0Fh
		push	ax
		push	[bp+arg_0]
		nop
		push	cs
		call	near ptr @add_map_pup$quiui ; add_map_pup(uint,uint)

loc_8180::				; CODE XREF: add_map_item(uint,uint)+804j
		add	sp, 4
		jmp	locret_8E36
; ---------------------------------------------------------------------------

loc_8186::				; CODE XREF: add_map_item(uint,uint)+9j
		mov	ax, [bp+arg_0]
		and	ax, 1
		neg	ax
		sbb	ax, ax
		inc	ax
		mov	[bp+var_5], al
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		push	ss
		lea	ax, [bp+var_2]
		push	ax
		push	[bp+arg_0]
		nop
		push	cs
		call	near ptr @get_map_coords$quinit2 ; get_map_coords(uint,int *,int *)
		assume es:seg2b53
		add	sp, 0Ah
		mov	ax, [bp+arg_2]
		mov	[bp+var_C], ax
		mov	cx, 1Fh		; switch 31 cases
		mov	bx, offset word_8E40

loc_81B5::				; CODE XREF: add_map_item(uint,uint)+5Aj
		mov	ax, cs:[bx]
		cmp	ax, [bp+var_C]
		jz	loc_81C5
		add	bx, 2
		loop	loc_81B5
		jmp	loc_8E20	; jumptable 00015FE5 default case
; ---------------------------------------------------------------------------

loc_81C5::				; CODE XREF: add_map_item(uint,uint)+55j
		jmp	word ptr cs:[bx+3Eh] ; switch jump
; ---------------------------------------------------------------------------

loc_81C9::				; CODE XREF: add_map_item(uint,uint):loc_81C5j
					; DATA XREF: seg03f9:2D0Eo
		cmp	[bp+arg_2], 10240 ; jumptable 00015FE5 cases 16,1024,10240,20480
		jnz	loc_81DA
		mov	word ptr [bp+s2+2], ds
		mov	word ptr [bp+s2], offset aGem_l_2 ; "gem.l"
		jmp	loc_820F
; ---------------------------------------------------------------------------

loc_81DA::				; CODE XREF: add_map_item(uint,uint)+68j
		cmp	[bp+arg_2], 20480
		jnz	loc_8207
		mov	al, [bp+var_5]
		mov	ah, 0
		or	ax, ax
		jz	loc_81F1
		cmp	ax, 1
		jz	loc_81FB
		jmp	loc_8205
; ---------------------------------------------------------------------------

loc_81F1::				; CODE XREF: add_map_item(uint,uint)+82j
		mov	word ptr [bp+s2+2], ds
		mov	word ptr [bp+s2], offset aBonus1_l_0 ; "bonus1.l"
		jmp	loc_8205
; ---------------------------------------------------------------------------

loc_81FB::				; CODE XREF: add_map_item(uint,uint)+87j
		mov	word ptr [bp+s2+2], ds
		mov	word ptr [bp+s2], offset aBonus2_l_0 ; "bonus2.l"
		jmp	$+2
; ---------------------------------------------------------------------------

loc_8205::				; CODE XREF: add_map_item(uint,uint)+89j
					; add_map_item(uint,uint)+93j ...
		jmp	loc_820F
; ---------------------------------------------------------------------------

loc_8207::				; CODE XREF: add_map_item(uint,uint)+79j
		mov	word ptr [bp+s2+2], ds
		mov	word ptr [bp+s2], offset aCoin_l_1 ; "coin.l"

loc_820F::				; CODE XREF: add_map_item(uint,uint)+72j
					; add_map_item(uint,uint):loc_8205j
		push	seg seg0b2c
		push	offset @do_coin$qn7m_actor ; __int32
		push	0
		push	0		; __int32
		push	word ptr [bp+s2+2]
		push	word ptr [bp+s2] ; s2
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		assume es:nothing
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		push	1
		push	2
		nop
		push	cs
		call	near ptr @random$qi ; random(int)
		pop	cx
		inc	al
		push	ax
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		assume es:nothing
		add	sp, 8
		cmp	[bp+arg_2], 10240
		jnz	loc_8263
		les	bx, _act
		or	byte ptr es:[bx+52h], 80h

loc_8263::				; CODE XREF: add_map_item(uint,uint)+F2j
		les	bx, _act
		mov	ax, es:[bx+10h]
		sar	ax, 1
		add	[bp+var_2], ax
		cmp	[bp+arg_2], 10h
		jz	loc_827A
		inc	_goody_count

loc_827A::				; CODE XREF: add_map_item(uint,uint)+10Ej
		jmp	loc_8E20	; jumptable 00015FE5 default case
; ---------------------------------------------------------------------------
		assume es:seg2b53

loc_827D::				; CODE XREF: add_map_item(uint,uint):loc_81C5j
					; DATA XREF: seg03f9:2D0Eo
		cmp	[bp+var_5], 0	; jumptable 00015FE5 cases 32,4096
		jz	loc_82AC
		push	seg seg0b2c
		push	offset @do_pod$qn7m_actor ; __int32
		push	seg seg0b2c
		push	offset @mv_std$qn7m_actornit2 ;	__int32
		push	ds
		push	offset aPod1_l	; "pod1.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		assume es:nothing
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		jmp	loc_82DD
; ---------------------------------------------------------------------------

loc_82AC::				; CODE XREF: add_map_item(uint,uint)+11Bj
		push	seg seg0b2c
		push	offset @do_pod$qn7m_actor ; __int32
		push	seg seg0b2c
		push	offset @mv_std$qn7m_actornit2 ;	__int32
		push	ds
		push	offset aPod2_l	; "pod2.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		assume es:nothing
		mov	word ptr es:[bx+26h], 1
		assume es:nothing

loc_82DD::				; CODE XREF: add_map_item(uint,uint)+144j
		push	1
		push	2
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		assume es:nothing
		add	sp, 8
		les	bx, _act
		mov	byte ptr es:[bx+35h], 1
		cmp	[bp+arg_2], 4096
		jnz	loc_8307
		inc	_enemy_count
		jmp	loc_8312
; ---------------------------------------------------------------------------

loc_8307::				; CODE XREF: add_map_item(uint,uint)+199j
		les	bx, _act
		assume es:nothing
		mov	ax, es:[bx+12h]
		add	[bp+var_4], ax
		assume es:nothing

loc_8312::				; CODE XREF: add_map_item(uint,uint)+19Fj
		jmp	loc_8E20	; jumptable 00015FE5 default case
; ---------------------------------------------------------------------------
		assume es:seg2b53

loc_8315::				; CODE XREF: add_map_item(uint,uint):loc_81C5j
					; DATA XREF: seg03f9:2D0Eo
		push	seg seg0b2c	; jumptable 00015FE5 case 2048
		push	offset @do_mine1$qn7m_actor ; __int32
		push	0
		push	0		; __int32
		push	ds
		push	offset aMine_l	; "mine.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		assume es:nothing
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		assume es:nothing
		mov	ax, es:[bx+10h]
		cwd
		sub	ax, dx
		sar	ax, 1
		mov	dx, [bp+var_2]
		sub	dx, ax
		mov	[bp+var_2], dx
		les	bx, _act
		mov	ax, [bp+var_4]
		sub	ax, es:[bx+12h]
		mov	[bp+var_4], ax
		les	bx, _act
		mov	byte ptr es:[bx+35h], 21h ; '!'
		push	1
		push	0Ah
		nop
		push	cs
		call	near ptr @random$qi ; random(int)
		pop	cx
		add	al, 0Fh

loc_8372::				; CODE XREF: add_map_item(uint,uint)+374j
		push	ax
		jmp	loc_8678
; ---------------------------------------------------------------------------

loc_8376::				; CODE XREF: add_map_item(uint,uint):loc_81C5j
					; DATA XREF: seg03f9:2D0Eo
		inc	_zapper_count	; jumptable 00015FE5 case 3072
		push	seg seg0b2c
		push	offset @do_zapper$qn7m_actor ; __int32
		push	0
		push	0		; __int32
		push	ds
		push	offset aZap_ud_l ; "zap_ud.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		mov	ax, [bp+var_2]
		add	ax, 0FFFDh
		mov	[bp+var_2], ax
		mov	ax, [bp+var_4]
		add	ax, 8
		mov	[bp+var_4], ax
		mov	al, _zapper_count
		mov	ah, 0
		mov	bx, 2
		cwd
		idiv	bx
		imul	dx, 0Ah
		add	dx, 28h	; '('
		les	bx, _act
		assume es:nothing
		mov	es:[bx+24h], dx
		push	0
		push	0
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		les	bx, _act
		mov	byte ptr es:[bx+35h], 1
		jmp	loc_8E20	; jumptable 00015FE5 default case
; ---------------------------------------------------------------------------
		assume es:seg2b53

loc_83EA::				; CODE XREF: add_map_item(uint,uint):loc_81C5j
					; DATA XREF: seg03f9:2D0Eo
		cmp	[bp+var_5], 0	; jumptable 00015FE5 case 5120
		jz	loc_8421
		push	seg seg0b2c
		push	offset @do_fish$qn7m_actor ; __int32
		push	0
		push	0		; __int32
		push	ds
		push	offset aFish1r_l ; "fish1r.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		assume es:nothing
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		assume es:nothing
		mov	word ptr es:[bx+26h], 1
		jmp	loc_8450
; ---------------------------------------------------------------------------
		assume es:seg2b53

loc_8421::				; CODE XREF: add_map_item(uint,uint)+288j
		push	seg seg0b2c
		push	offset @do_fish$qn7m_actor ; __int32
		push	0
		push	0		; __int32
		push	ds
		push	offset aFish2r_l ; "fish2r.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		assume es:nothing
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		assume es:nothing
		mov	word ptr es:[bx+26h], 2
		assume es:nothing

loc_8450::				; CODE XREF: add_map_item(uint,uint)+2B9j
		les	bx, _act
		mov	ax, es:[bx+12h]
		cwd
		sub	ax, dx
		sar	ax, 1
		sub	[bp+var_4], ax
		les	bx, _act
		mov	byte ptr es:[bx+34h], 0
		les	bx, _act
		mov	word ptr es:[bx+14h], 1
		push	64h ; 'd'
		nop
		push	cs
		call	near ptr @random$qi ; random(int)
		pop	cx
		add	ax, 64h	; 'd'
		les	bx, _act
		mov	es:[bx+24h], ax
		push	1
		push	3
		jmp	loc_8678
; ---------------------------------------------------------------------------
		assume es:seg2b53

loc_848D::				; CODE XREF: add_map_item(uint,uint):loc_81C5j
					; DATA XREF: seg03f9:2D0Eo
		push	0		; jumptable 00015FE5 case 6144
		push	0		; __int32
		push	0
		push	0		; __int32
		push	ds
		push	offset aWeed1_l	; "weed1.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		assume es:nothing
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		assume es:nothing
		mov	ax, es:[bx+10h]
		cwd
		sub	ax, dx
		sar	ax, 1
		sub	[bp+var_2], ax
		les	bx, _act
		mov	ax, es:[bx+12h]
		add	ax, 0FFFEh
		sub	[bp+var_4], ax
		push	1
		push	5
		nop
		push	cs
		call	near ptr @random$qi ; random(int)
		pop	cx
		add	al, 0Ah
		jmp	loc_8372
; ---------------------------------------------------------------------------

loc_84DD::				; CODE XREF: add_map_item(uint,uint):loc_81C5j
					; DATA XREF: seg03f9:2D0Eo
		push	seg seg0b2c	; jumptable 00015FE5 case 7168
		push	offset @do_tulip$qn7m_actor ; __int32
		push	0
		push	0		; __int32
		push	ds
		push	offset aTulip_l	; "tulip.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		assume es:nothing
		mov	word ptr es:[bx+24h], 16h
		push	0
		push	0
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		sub	[bp+var_2], 0Bh
		les	bx, _act
		les	bx, es:[bx+46h]
		les	bx, es:[bx+0Ah]
		mov	ax, es:[bx+4]
		add	ax, 3
		jmp	loc_8CF9
; ---------------------------------------------------------------------------

loc_853A::				; CODE XREF: add_map_item(uint,uint):loc_81C5j
					; DATA XREF: seg03f9:2D0Eo
		push	seg seg0b2c	; jumptable 00015FE5 case 8192
		push	offset @do_chest$qn7m_actor ; __int32
		push	0
		push	0		; __int32
		push	ds
		push	offset aChest_l	; "chest.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		mov	byte ptr es:[bx+35h], 3
		les	bx, _act
		mov	ax, es:[bx+10h]
		cwd
		sub	ax, dx
		sar	ax, 1
		sub	[bp+var_2], ax
		les	bx, _act
		mov	ax, es:[bx+12h]
		sub	[bp+var_4], ax
		push	0
		push	0
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		mov	al, _goody_count
		add	al, 0Ah
		mov	_goody_count, al
		jmp	loc_8E20	; jumptable 00015FE5 default case
; ---------------------------------------------------------------------------

loc_85A2::				; CODE XREF: add_map_item(uint,uint):loc_81C5j
					; DATA XREF: seg03f9:2D0Eo
		cmp	[bp+var_5], 0	; jumptable 00015FE5 case 11264
		jz	loc_85D8
		push	seg seg0b2c
		push	offset @do_duct_lr$qn7m_actor ;	__int32
		push	0
		push	0		; __int32
		push	ds
		push	offset aDuct_r_l ; "duct_r.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		mov	byte ptr es:[bx+34h], 0
		jmp	loc_8606
; ---------------------------------------------------------------------------

loc_85D8::				; CODE XREF: add_map_item(uint,uint)+440j
		push	seg seg0b2c
		push	offset @do_duct_lr$qn7m_actor ;	__int32
		push	0
		push	0		; __int32
		push	ds
		push	offset aDuct_l_l ; "duct_l.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		mov	byte ptr es:[bx+34h], 1

loc_8606::				; CODE XREF: add_map_item(uint,uint)+470j
		add	[bp+var_4], 8
		jmp	loc_8674
; ---------------------------------------------------------------------------

loc_860C::				; CODE XREF: add_map_item(uint,uint):loc_81C5j
					; DATA XREF: seg03f9:2D0Eo
		cmp	[bp+var_5], 0	; jumptable 00015FE5 case 12288
		jz	loc_8642
		push	seg seg0b2c
		push	offset @do_duct_ud$qn7m_actor ;	__int32
		push	0
		push	0		; __int32
		push	ds
		push	offset aDuct_u_l ; "duct_u.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		mov	byte ptr es:[bx+34h], 2
		jmp	loc_8670
; ---------------------------------------------------------------------------

loc_8642::				; CODE XREF: add_map_item(uint,uint)+4AAj
		push	seg seg0b2c
		push	offset @do_duct_ud$qn7m_actor ;	__int32
		push	0
		push	0		; __int32
		push	ds
		push	offset aDuct_d_l ; "duct_d.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		mov	byte ptr es:[bx+34h], 3

loc_8670::				; CODE XREF: add_map_item(uint,uint)+4DAj
		add	[bp+var_2], 8

loc_8674::				; CODE XREF: add_map_item(uint,uint)+4A4j
		push	1
		push	1
		assume es:nothing

loc_8678::				; CODE XREF: add_map_item(uint,uint)+20Dj
					; add_map_item(uint,uint)+324j
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		jmp	loc_8E20	; jumptable 00015FE5 default case
; ---------------------------------------------------------------------------

loc_868B::				; CODE XREF: add_map_item(uint,uint):loc_81C5j
					; DATA XREF: seg03f9:2D0Eo
		cmp	[bp+var_5], 0	; jumptable 00015FE5 case 9216
		jz	loc_86CD
		push	seg seg0b2c
		push	offset @do_pirana$qn7m_actor ; __int32
		push	seg seg0b2c
		push	offset @mv_pirana$qn7m_actornit2 ; __int32
		push	ds
		push	offset aPiranar_l ; "piranar.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		assume es:nothing
		mov	word ptr es:[bx+14h], 1
		les	bx, _act
		mov	byte ptr es:[bx+34h], 0
		jmp	loc_8707
; ---------------------------------------------------------------------------

loc_86CD::				; CODE XREF: add_map_item(uint,uint)+529j
		push	seg seg0b2c
		push	offset @do_pirana$qn7m_actor ; __int32
		push	seg seg0b2c
		push	offset @mv_pirana$qn7m_actornit2 ; __int32
		push	ds
		push	offset aPiranal_l ; "piranal.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		mov	word ptr es:[bx+14h], 0FFFFh
		les	bx, _act
		mov	byte ptr es:[bx+34h], 1

loc_8707::				; CODE XREF: add_map_item(uint,uint)+565j
		les	bx, _act
		mov	byte ptr es:[bx+35h], 1
		les	bx, _act
		mov	ax, es:[bx+10h]
		cwd
		sub	ax, dx
		sar	ax, 1
		sub	[bp+var_2], ax
		les	bx, _act
		mov	ax, es:[bx+12h]
		cwd
		sub	ax, dx
		sar	ax, 1
		sub	[bp+var_4], ax
		push	1
		push	5
		assume es:nothing

loc_8734::				; CODE XREF: add_map_item(uint,uint)+765j
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		jmp	loc_8AC7
; ---------------------------------------------------------------------------

loc_8747::				; CODE XREF: add_map_item(uint,uint):loc_81C5j
					; DATA XREF: seg03f9:2D0Eo
		cmp	[bp+var_5], 0	; jumptable 00015FE5 case 13312
		jz	loc_875D
		push	seg seg0b2c
		push	offset @do_block$qn7m_actor ; do_block(m_actor *)
		push	0
		push	0
		push	ds
		push	offset aBlock2_l ; "block2.l"
		jmp	loc_876B
; ---------------------------------------------------------------------------

loc_875D::				; CODE XREF: add_map_item(uint,uint)+5E5j
		push	seg seg0b2c
		push	offset @do_block$qn7m_actor ; __int32
		push	0
		push	0		; __int32
		push	ds
		push	offset aBlock_l	; "block.l"

loc_876B::				; CODE XREF: add_map_item(uint,uint)+5F5j
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		assume es:nothing
		mov	byte ptr es:[bx+35h], 3
		jmp	loc_8E20	; jumptable 00015FE5 default case
; ---------------------------------------------------------------------------

loc_878E::				; CODE XREF: add_map_item(uint,uint):loc_81C5j
					; DATA XREF: seg03f9:2D0Eo
		cmp	[bp+arg_2], 14336 ; jumptable 00015FE5 cases 14336,28672
		jnz	loc_87C9
		push	seg seg0b2c
		push	offset @do_face$qn7m_actor ; __int32
		push	0
		push	0		; __int32
		push	ds
		push	offset aFace_r_l ; "face_r.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		mov	byte ptr es:[bx+34h], 0
		add	[bp+var_2], 7
		jmp	loc_8803
; ---------------------------------------------------------------------------

loc_87C9::				; CODE XREF: add_map_item(uint,uint)+62Dj
		push	seg seg0b2c
		push	offset @do_face$qn7m_actor ; __int32
		push	0
		push	0		; __int32
		push	ds
		push	offset aFace_l_l ; "face_l.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		mov	byte ptr es:[bx+34h], 1
		les	bx, _act
		mov	ax, es:[bx+10h]
		dec	ax
		sub	[bp+var_2], ax

loc_8803::				; CODE XREF: add_map_item(uint,uint)+661j
		push	0
		push	0
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		les	bx, _act
		mov	byte ptr es:[bx+35h], 1
		sub	[bp+var_4], 2
		jmp	loc_8AC7
; ---------------------------------------------------------------------------
		assume es:seg2b53

loc_8827::				; CODE XREF: add_map_item(uint,uint):loc_81C5j
					; DATA XREF: seg03f9:2D0Eo
		cmp	[bp+var_5], 0	; jumptable 00015FE5 case 15360
		jz	loc_8869
		push	seg seg0b2c
		push	offset @do_serpent$qn7m_actor ;	__int32
		push	seg seg0b2c
		push	offset @mv_pace$qn7m_actornit2 ; __int32
		push	ds
		push	offset aSerp_r_l ; "serp_r.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		assume es:nothing
		mov	byte ptr es:[bx+34h], 0
		les	bx, _act
		mov	word ptr es:[bx+14h], 1
		jmp	loc_88A3
; ---------------------------------------------------------------------------
		assume es:seg2b53

loc_8869::				; CODE XREF: add_map_item(uint,uint)+6C5j
		push	seg seg0b2c
		push	offset @do_serpent$qn7m_actor ;	__int32
		push	seg seg0b2c
		push	offset @mv_pace$qn7m_actornit2 ; __int32
		push	ds
		push	offset aSerp_l_l ; "serp_l.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		assume es:nothing
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		assume es:nothing
		mov	byte ptr es:[bx+34h], 1
		les	bx, _act
		mov	word ptr es:[bx+14h], 0FFFFh

loc_88A3::				; CODE XREF: add_map_item(uint,uint)+701j
		les	bx, _act
		mov	ax, es:[bx+10h]
		cwd
		sub	ax, dx
		sar	ax, 1
		sub	[bp+var_2], ax
		les	bx, _act
		mov	ax, es:[bx+12h]
		sub	[bp+var_4], ax
		les	bx, _act
		mov	byte ptr es:[bx+35h], 1
		push	1
		push	1
		jmp	loc_8734
; ---------------------------------------------------------------------------

loc_88CE::				; CODE XREF: add_map_item(uint,uint):loc_81C5j
					; DATA XREF: seg03f9:2D0Eo
		push	seg seg0b2c	; jumptable 00015FE5 case 16384
		push	offset @do_crab$qn7m_actor ; __int32
		push	seg seg0b2c
		push	offset @mv_pace$qn7m_actornit2 ; __int32
		push	ds
		push	offset aCrab_l	; "crab.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		cmp	[bp+var_5], 0
		jz	loc_8910
		les	bx, _act
		assume es:nothing
		mov	byte ptr es:[bx+34h], 0
		les	bx, _act
		mov	word ptr es:[bx+14h], 2
		jmp	loc_8923
; ---------------------------------------------------------------------------

loc_8910::				; CODE XREF: add_map_item(uint,uint)+793j
		les	bx, _act
		mov	byte ptr es:[bx+34h], 1
		les	bx, _act
		mov	word ptr es:[bx+14h], 0FFFEh

loc_8923::				; CODE XREF: add_map_item(uint,uint)+7A8j
		push	1
		push	1
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		les	bx, _act
		mov	byte ptr es:[bx+35h], 1
		les	bx, _act
		mov	ax, es:[bx+12h]
		sub	[bp+var_4], ax
		jmp	loc_8AC7
; ---------------------------------------------------------------------------
		assume es:seg2b53

loc_894E::				; CODE XREF: add_map_item(uint,uint):loc_81C5j
					; DATA XREF: seg03f9:2D0Eo
		les	bx, dword ptr _the_game	; jumptable 00015FE5 case 17408
		assume es:nothing
		cmp	byte ptr es:[bx+9], 1
		jz	loc_8960
		cmp	_gun_count, 4
		jnz	loc_896D

loc_8960::				; CODE XREF: add_map_item(uint,uint)+7F1j
		push	10h
		push	[bp+arg_0]
		nop
		push	cs
		call	near ptr @add_barrel$quiui ; add_barrel(uint,uint)
		jmp	loc_8180
; ---------------------------------------------------------------------------

loc_896D::				; CODE XREF: add_map_item(uint,uint)+7F8j
		mov	al, _gun_count
		mov	ah, 0
		mov	bx, ax
		cmp	bx, 3		; switch 4 cases
		ja	loc_89A8	; jumptable 0001679B default case
		shl	bx, 1
		jmp	cs:off_8E38[bx]	; switch jump
; ---------------------------------------------------------------------------

loc_8980::				; CODE XREF: add_map_item(uint,uint)+815j
					; DATA XREF: seg03f9:off_8E38o
		mov	word ptr [bp+s2+2], ds ; jumptable 0001679B case 0
		mov	word ptr [bp+s2], offset aPiece_1_l_0 ;	"piece_1.l"
		jmp	loc_89A8	; jumptable 0001679B default case
; ---------------------------------------------------------------------------

loc_898A::				; CODE XREF: add_map_item(uint,uint)+815j
		mov	word ptr [bp+s2+2], ds ; jumptable 0001679B case 1
		mov	word ptr [bp+s2], offset aPiece_2_l_0 ;	"piece_2.l"
		jmp	loc_89A8	; jumptable 0001679B default case
; ---------------------------------------------------------------------------

loc_8994::				; CODE XREF: add_map_item(uint,uint)+815j
		mov	word ptr [bp+s2+2], ds ; jumptable 0001679B case 2
		mov	word ptr [bp+s2], offset aPiece_3_l_0 ;	"piece_3.l"
		jmp	loc_89A8	; jumptable 0001679B default case
; ---------------------------------------------------------------------------

loc_899E::				; CODE XREF: add_map_item(uint,uint)+815j
		mov	word ptr [bp+s2+2], ds ; jumptable 0001679B case 3
		mov	word ptr [bp+s2], offset aPiece_4_l_0 ;	"piece_4.l"
		jmp	$+2	; jumptable 0001679B default case
; ---------------------------------------------------------------------------

loc_89A8::				; CODE XREF: add_map_item(uint,uint)+811j
					; add_map_item(uint,uint)+822j	...
		push	seg seg0b2c	; jumptable 0001679B default case
		push	offset @do_gun_piece$qn7m_actor	; __int32
		push	0
		push	0		; __int32
		push	word ptr [bp+s2+2]
		push	word ptr [bp+s2] ; s2
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		assume es:nothing
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		push	1
		push	6
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		assume es:nothing
		add	sp, 8
		les	bx, _act
		mov	ax, es:[bx+12h]
		sub	[bp+var_4], ax
		inc	_goody_count
		jmp	loc_8E20	; jumptable 00015FE5 default case
; ---------------------------------------------------------------------------

loc_89F5::				; CODE XREF: add_map_item(uint,uint):loc_81C5j
					; DATA XREF: seg03f9:2D0Eo
		push	seg seg0b2c	; jumptable 00015FE5 case 18432
		push	offset @do_jelly$qn7m_actor ; __int32
		push	0
		push	0		; __int32
		push	ds
		push	offset aJelly_l	; "jelly.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		assume es:nothing
		mov	byte ptr es:[bx+35h], 1
		push	1
		push	2
		nop
		push	cs
		call	near ptr @random$qi ; random(int)
		pop	cx
		add	al, 4
		push	ax
		jmp	loc_8AA7
; ---------------------------------------------------------------------------

loc_8A32::				; CODE XREF: add_map_item(uint,uint):loc_81C5j
					; DATA XREF: seg03f9:2D0Eo
		cmp	[bp+var_5], 0	; jumptable 00015FE5 case 19456
		jz	loc_8A6A
		push	seg seg0b2c
		push	offset @do_shark$qn7m_actor ; __int32
		push	seg seg0b2c
		push	offset @mv_shark$qn7m_actornit2	; __int32
		push	ds
		push	offset aSharkr_l_1 ; "sharkr.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		mov	byte ptr es:[bx+34h], 0
		jmp	loc_8A9A
; ---------------------------------------------------------------------------

loc_8A6A::				; CODE XREF: add_map_item(uint,uint)+8D0j
		push	seg seg0b2c
		push	offset @do_shark$qn7m_actor ; __int32
		push	seg seg0b2c
		push	offset @mv_shark$qn7m_actornit2	; __int32
		push	ds
		push	offset aSharkl_l_1 ; "sharkl.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		mov	byte ptr es:[bx+34h], 1

loc_8A9A::				; CODE XREF: add_map_item(uint,uint)+902j
		les	bx, _act
		mov	byte ptr es:[bx+35h], 1
		push	0
		push	0

loc_8AA7::				; CODE XREF: add_map_item(uint,uint)+8CAj
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		les	bx, _act
		mov	ax, es:[bx+10h]
		cwd
		sub	ax, dx
		sar	ax, 1
		sub	[bp+var_2], ax
		assume es:nothing

loc_8AC7::				; CODE XREF: add_map_item(uint,uint)+5DEj
					; add_map_item(uint,uint)+6BEj	...
		inc	_enemy_count
		jmp	loc_8E20	; jumptable 00015FE5 default case
; ---------------------------------------------------------------------------

loc_8ACE::				; CODE XREF: add_map_item(uint,uint):loc_81C5j
					; DATA XREF: seg03f9:2D0Eo
		push	seg seg0b2c	; jumptable 00015FE5 case 21504
		push	offset @do_tentacle$qn7m_actor ; __int32
		push	0
		push	0		; __int32
		push	ds
		push	offset aTent_out_l ; "tent_out.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		assume es:nothing
		mov	byte ptr es:[bx+35h], 1
		les	bx, _act
		mov	word ptr es:[bx+22h], 19h
		push	0
		push	0
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		sub	[bp+var_2], 0Fh
		les	bx, _act
		mov	ax, es:[bx+12h]
		add	[bp+var_4], ax
		jmp	loc_8E20	; jumptable 00015FE5 default case
; ---------------------------------------------------------------------------

loc_8B2C::				; CODE XREF: add_map_item(uint,uint):loc_81C5j
					; DATA XREF: seg03f9:2D0Eo
		cmp	[bp+var_5], 0	; jumptable 00015FE5 case 22528
		jz	loc_8B5D
		push	seg seg0b2c
		push	offset @do_spikes$qn7m_actor ; __int32
		push	0
		push	0		; __int32
		push	ds
		push	offset aSpikes_d_l ; "spikes_d.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		add	[bp+var_4], 8
		jmp	loc_8B8D
; ---------------------------------------------------------------------------

loc_8B5D::				; CODE XREF: add_map_item(uint,uint)+9CAj
		push	seg seg0b2c
		push	offset @do_spikes$qn7m_actor ; __int32
		push	0
		push	0		; __int32
		push	ds
		push	offset aSpikes_u_l ; "spikes_u.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		mov	ax, es:[bx+12h]
		sub	[bp+var_4], ax

loc_8B8D::				; CODE XREF: add_map_item(uint,uint)+9F5j
		push	19h
		nop
		push	cs
		call	near ptr @random$qi ; random(int)
		pop	cx
		add	ax, 28h	; '('
		les	bx, _act
		mov	es:[bx+24h], ax
		les	bx, _act
		mov	byte ptr es:[bx+35h], 1
		push	0
		push	0
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8

loc_8BBD::				; CODE XREF: add_map_item(uint,uint)+B33j
		les	bx, _act
		mov	ax, es:[bx+10h]
		jmp	loc_8D66
; ---------------------------------------------------------------------------

loc_8BC8::				; CODE XREF: add_map_item(uint,uint):loc_81C5j
					; DATA XREF: seg03f9:2D0Eo
		push	0		; jumptable 00015FE5 case 23552
		push	0		; __int32
		push	0
		push	0		; __int32
		push	ds
		push	offset aStatue_l ; "statue.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		mov	ax, es:[bx+10h]
		cwd
		sub	ax, dx
		sar	ax, 1
		sub	[bp+var_2], ax
		les	bx, _act
		mov	ax, es:[bx+12h]
		jmp	loc_8CF9
; ---------------------------------------------------------------------------

loc_8C06::				; CODE XREF: add_map_item(uint,uint):loc_81C5j
					; DATA XREF: seg03f9:2D0Eo
		push	seg seg0b2c	; jumptable 00015FE5 case 24576
		push	offset @do_fire_pit$qn7m_actor ; __int32
		push	0
		push	0		; __int32
		push	ds
		push	offset aFire_pit_l ; "fire_pit.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		push	1
		push	3
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		cmp	[bp+var_5], 0
		jz	loc_8C51
		les	bx, _act
		mov	word ptr es:[bx+24h], 50h ; 'P'
		jmp	loc_8C5B
; ---------------------------------------------------------------------------

loc_8C51::				; CODE XREF: add_map_item(uint,uint)+ADDj
		les	bx, _act
		mov	word ptr es:[bx+24h], 28h ; '('

loc_8C5B::				; CODE XREF: add_map_item(uint,uint)+AE9j
		sub	[bp+var_4], 5
		jmp	loc_8E20	; jumptable 00015FE5 default case
; ---------------------------------------------------------------------------

loc_8C62::				; CODE XREF: add_map_item(uint,uint):loc_81C5j
					; DATA XREF: seg03f9:2D0Eo
		push	seg seg0b2c	; jumptable 00015FE5 case 25600
		push	offset @do_shuttle$qn7m_actor ;	__int32
		push	0
		push	0		; __int32
		push	ds
		push	offset aShutl_l_l ; "shutl_l.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		mov	byte ptr es:[bx+35h], 1
		les	bx, _act
		mov	byte ptr es:[bx+34h], 1
		jmp	loc_8BBD
; ---------------------------------------------------------------------------

loc_8C9C::				; CODE XREF: add_map_item(uint,uint):loc_81C5j
					; DATA XREF: seg03f9:2D0Eo
		push	seg seg0b2c	; jumptable 00015FE5 case 26624
		push	offset @do_clam$qn7m_actor ; __int32
		push	0
		push	0		; __int32
		push	ds
		push	offset aClam_l	; "clam.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		mov	byte ptr es:[bx+35h], 1
		push	0
		push	0
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		les	bx, _act
		mov	ax, es:[bx+10h]
		cwd
		sub	ax, dx
		sar	ax, 1
		sub	[bp+var_2], ax
		les	bx, _act
		mov	ax, es:[bx+12h]
		add	ax, 0FFFEh

loc_8CF9::				; CODE XREF: add_map_item(uint,uint)+3D1j
					; add_map_item(uint,uint)+A9Dj
		sub	[bp+var_4], ax
		jmp	loc_8E20	; jumptable 00015FE5 default case
; ---------------------------------------------------------------------------

loc_8CFF::				; CODE XREF: add_map_item(uint,uint):loc_81C5j
					; DATA XREF: seg03f9:2D0Eo
		push	seg seg0b2c	; jumptable 00015FE5 case 27648
		push	offset @do_cannon$qn7m_actor ; __int32
		push	seg seg0b2c
		push	offset @mv_std$qn7m_actornit2 ;	__int32
		push	ds
		push	offset aCannonr_l ; "cannonr.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		mov	byte ptr es:[bx+35h], 1
		les	bx, _act
		mov	byte ptr es:[bx+34h], 0
		push	0
		push	0
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		les	bx, _act
		mov	word ptr es:[bx+16h], 1
		les	bx, _act
		les	bx, es:[bx+46h]
		les	bx, es:[bx+0Eh]
		mov	ax, es:[bx+6]

loc_8D66::				; CODE XREF: add_map_item(uint,uint)+A5Fj
		cwd
		sub	ax, dx
		sar	ax, 1
		sub	[bp+var_2], ax
		jmp	loc_8E20	; jumptable 00015FE5 default case
; ---------------------------------------------------------------------------

loc_8D71::				; CODE XREF: add_map_item(uint,uint):loc_81C5j
					; DATA XREF: seg03f9:2D0Eo
		cmp	[bp+var_5], 0	; jumptable 00015FE5 case 29696
		jz	loc_8DB3
		push	seg seg0b2c
		push	offset @do_ship$qn7m_actor ; __int32
		push	seg seg0b2c
		push	offset @mv_ship$qn7m_actornit2 ; __int32
		push	ds
		push	offset aShipl_l	; "shipl.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		mov	word ptr es:[bx+14h], 0FFFBh
		les	bx, _act
		mov	byte ptr es:[bx+34h], 1
		jmp	loc_8DED
; ---------------------------------------------------------------------------

loc_8DB3::				; CODE XREF: add_map_item(uint,uint)+C0Fj
		push	seg seg0b2c
		push	offset @do_ship$qn7m_actor ; __int32
		push	seg seg0b2c
		push	offset @mv_ship$qn7m_actornit2 ; __int32
		push	ds
		push	offset aShipr_l	; "shipr.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		mov	word ptr es:[bx+14h], 5
		les	bx, _act
		mov	byte ptr es:[bx+34h], 0

loc_8DED::				; CODE XREF: add_map_item(uint,uint)+C4Bj
		push	0Ah
		push	1
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		les	bx, _act
		mov	byte ptr es:[bx+35h], 1
		les	bx, _act
		mov	ax, es:[bx+10h]
		cwd
		sub	ax, dx
		sar	ax, 1
		sub	[bp+var_2], ax
		sub	[bp+var_4], 14h
		jmp	$+2	; jumptable 00015FE5 default case
; ---------------------------------------------------------------------------
		assume es:nothing

loc_8E20::				; CODE XREF: add_map_item(uint,uint)+5Cj
					; add_map_item(uint,uint):loc_827Aj ...
		push	[bp+var_4]	; jumptable 00015FE5 default case
		push	[bp+var_2]
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8

locret_8E36::				; CODE XREF: add_map_item(uint,uint)+1Dj
		leave
		retf
@add_map_item$quiui endp

; ---------------------------------------------------------------------------
off_8E38	dw offset loc_8980	; DATA XREF: add_map_item(uint,uint)+815r
					; jump table for switch	statement
		db  1Ah
		db  28h	; (
		db  24h	; $
		db  28h	; (
		db  2Eh	; .
		db  28h	; (
word_8E40	dw    10h		; DATA XREF: add_map_item(uint,uint)+4Co
					; value	table for switch statement
		db  20h
		db    0
		db    0
		db    4
		db    0
		db    8
		db    0
		db  0Ch
		db    0
		db  10h
		db    0
		db  14h
		db    0
		db  18h
		db    0
		db  1Ch
		db    0
		db  20h
		db    0
		db  24h	; $
		db    0
		db  28h	; (
		db    0
		db  2Ch	; ,
		db    0
		db  30h	; 0
		db    0
		db  34h	; 4
		db    0
		db  38h	; 8
		db    0
		db  3Ch	; <
		db    0
		db  40h	; @
		db    0
		db  44h	; D
		db    0
		db  48h	; H
		db    0
		db  4Ch	; L
		db    0
		db  50h	; P
		db    0
		db  54h	; T
		db    0
		db  58h	; X
		db    0
		db  5Ch	; \
		db    0
		db  60h	; `
		db    0
		db  64h	; d
		db    0
		db  68h	; h
		db    0
		db  6Ch	; l
		db    0
		db  70h	; p
		db    0
		db  74h	; t
		dw offset loc_81C9	; jump table for switch	statement
		dw offset loc_827D
		dw offset loc_81C9
		dw offset loc_8315
		dw offset loc_8376
		dw offset loc_827D
		dw offset loc_83EA
		dw offset loc_848D
		dw offset loc_84DD
		dw offset loc_853A
		dw offset loc_868B
		dw offset loc_81C9
		dw offset loc_85A2
		dw offset loc_860C
		dw offset loc_8747
		dw offset loc_878E
		dw offset loc_8827
		dw offset loc_88CE
		dw offset loc_894E
		dw offset loc_89F5
		dw offset loc_8A32
		dw offset loc_81C9
		dw offset loc_8ACE
		dw offset loc_8B2C
		dw offset loc_8BC8
		dw offset loc_8C06
		dw offset loc_8C62
		dw offset loc_8C9C
		dw offset loc_8CFF
		dw offset loc_878E
		dw offset loc_8D71
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; add_barrel(unsigned int, unsigned int)
@add_barrel$quiui proc far		; CODE XREF: start_room(uchar *)+24Ap
					; add_map_item(uint,uint)+801p

arg_0		= word ptr  6
arg_2		= word ptr  8

		push	bp
		mov	bp, sp
		test	[bp+arg_2], 0Fh
		jz	loc_8ED8
		push	ds
		push	offset aBarrel2_l ; "barrel2.l"
		push	ds
		push	offset _tmp	; dest
		call	_strcpy
		assume es:seg2608
		add	sp, 8
		jmp	loc_8F0F
; ---------------------------------------------------------------------------
		assume es:nothing

loc_8ED8::				; CODE XREF: add_barrel(uint,uint)+8j
		mov	al, _goody_count
		mov	ah, 0
		mov	dx, [bp+arg_2]
		add	dx, ax
		mov	al, _enemy_count
		mov	ah, 0
		add	dx, ax
		and	dx, 1
		or	dx, dx
		jz	loc_8EF7
		cmp	dx, 1
		jz	loc_8F09
		jmp	loc_8F0F
; ---------------------------------------------------------------------------

loc_8EF7::				; CODE XREF: add_barrel(uint,uint)+32j
		push	ds
		push	offset aBarrel1_l ; "barrel1.l"

loc_8EFB::				; CODE XREF: add_barrel(uint,uint)+51j
		push	ds
		push	offset _tmp	; dest

loc_8EFF::
		call	_strcpy
		assume es:seg2608
		add	sp, 8
		jmp	loc_8F0F
; ---------------------------------------------------------------------------
		assume es:nothing

loc_8F09::				; CODE XREF: add_barrel(uint,uint)+37j
		push	ds
		push	offset aBarrel3_l ; "barrel3.l"
		jmp	loc_8EFB
; ---------------------------------------------------------------------------
		assume es:seg2608

loc_8F0F::				; CODE XREF: add_barrel(uint,uint)+1Aj
					; add_barrel(uint,uint)+39j ...
		push	seg seg0b2c
		push	offset @do_barrel$qn7m_actor ; __int32
		push	seg seg0b2c
		push	offset @mv_barrel$qn7m_actornit2 ; __int32
		push	ds
		push	offset _tmp	; s2
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		assume es:nothing
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		assume es:nothing
		mov	byte ptr es:[bx+35h], 3
		les	bx, _act
		mov	ax, [bp+arg_2]
		mov	es:[bx+22h], ax
		les	bx, _act
		mov	word ptr es:[bx+16h], 1
		mov	ax, word ptr _act
		add	ax, 2
		push	word ptr _act+2
		push	ax
		push	word ptr _act+2
		push	word ptr _act
		push	[bp+arg_0]
		nop
		push	cs
		call	near ptr @get_map_coords$quinit2 ; get_map_coords(uint,int *,int *)
		add	sp, 0Ah
		les	bx, _act
		mov	ax, es:[bx+2]
		les	bx, _act
		sub	ax, es:[bx+12h]
		push	ax
		les	bx, _act
		mov	ax, es:[bx+10h]
		cwd
		sub	ax, dx
		sar	ax, 1
		les	bx, _act
		mov	dx, es:[bx]
		sub	dx, ax
		push	dx
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8
		test	[bp+arg_2], 0Fh
		jz	loc_8FB5
		assume es:nothing
		inc	_goody_count
		assume es:nothing

loc_8FB5::				; CODE XREF: add_barrel(uint,uint)+F3j
		test	[bp+arg_2], 10h
		jz	loc_8FC0
		inc	_goody_count

loc_8FC0::				; CODE XREF: add_barrel(uint,uint)+FEj
		test	[bp+arg_2], 20h
		jz	loc_8FCB
		assume es:nothing
		inc	_enemy_count
		assume es:nothing

loc_8FCB::				; CODE XREF: add_barrel(uint,uint)+109j
		pop	bp
		retf
@add_barrel$quiui endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; add_map_pup(unsigned int, unsigned int)
@add_map_pup$quiui proc	far		; CODE XREF: add_map_item(uint,uint)+17p

var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8

		enter	4, 0
		mov	bx, [bp+arg_2]
		dec	bx
		cmp	bx, 8		; switch 9 cases
		jbe	loc_8FDD
		jmp	loc_908B	; jumptable 00016DFF default case
; ---------------------------------------------------------------------------

loc_8FDD::				; CODE XREF: add_map_pup(uint,uint)+Bj
		shl	bx, 1
		jmp	cs:off_912A[bx]	; switch jump
; ---------------------------------------------------------------------------

loc_8FE4::				; CODE XREF: add_map_pup(uint,uint)+12j
					; DATA XREF: seg03f9:off_912Ao
		push	ds		; jumptable 00016DFF case 0
		push	offset aPu_air_l ; "pu_air.l"

loc_8FE8::				; CODE XREF: add_map_pup(uint,uint)+2Ej
					; add_map_pup(uint,uint)+3Ej ...
		push	ds
		push	offset _tmp	; dest
		call	_strcpy

loc_8FF1::				; CODE XREF: add_map_pup(uint,uint)+CBj
		add	sp, 8
		jmp	loc_909B
; ---------------------------------------------------------------------------

loc_8FF7::				; CODE XREF: add_map_pup(uint,uint)+12j
					; DATA XREF: seg03f9:off_912Ao
		push	ds		; jumptable 00016DFF case 1
		push	offset aPu_shld_l ; "pu_shld.l"
		jmp	loc_8FE8
; ---------------------------------------------------------------------------

loc_8FFD::				; CODE XREF: add_map_pup(uint,uint)+12j
					; DATA XREF: seg03f9:off_912Ao
		cmp	_heavy_timer, 0	; jumptable 00016DFF case 2
		jz	loc_9007
		jmp	loc_9115
; ---------------------------------------------------------------------------

loc_9007::				; CODE XREF: add_map_pup(uint,uint)+35j
		push	ds
		push	offset aPu_fire_l ; "pu_fire.l"
		jmp	loc_8FE8
; ---------------------------------------------------------------------------

loc_900D::				; CODE XREF: add_map_pup(uint,uint)+12j
					; DATA XREF: seg03f9:off_912Ao
		cmp	_top_fire, 0	; jumptable 00016DFF case 3
		jz	loc_9017
		jmp	loc_9115
; ---------------------------------------------------------------------------

loc_9017::				; CODE XREF: add_map_pup(uint,uint)+45j
		push	ds
		push	offset aPu_top_l ; "pu_top.l"
		jmp	loc_8FE8
; ---------------------------------------------------------------------------

loc_901D::				; CODE XREF: add_map_pup(uint,uint)+12j
					; DATA XREF: seg03f9:off_912Ao
		les	bx, dword ptr _the_game	; jumptable 00016DFF case 4
		assume es:nothing
		cmp	byte ptr es:[bx+8], 1
		jnz	loc_902B
		jmp	loc_9115
; ---------------------------------------------------------------------------

loc_902B::				; CODE XREF: add_map_pup(uint,uint)+59j
		push	ds
		push	offset aPu_1up_l ; "pu_1up.l"
		push	ds
		push	offset _tmp	; dest
		call	_strcpy
		add	sp, 8
		les	bx, _the_map
		mov	ax, es:[bx+8Eh]
		sub	[bp+arg_0], ax
		jmp	loc_909B
; ---------------------------------------------------------------------------

loc_9049::				; CODE XREF: add_map_pup(uint,uint)+12j
					; DATA XREF: seg03f9:off_912Ao
		cmp	_auto_fire, 1	; jumptable 00016DFF case 6
		jnz	loc_9053
		jmp	loc_9115
; ---------------------------------------------------------------------------

loc_9053::				; CODE XREF: add_map_pup(uint,uint)+81j
		push	ds
		push	offset aPu_auto_l ; "pu_auto.l"
		jmp	loc_8FE8
; ---------------------------------------------------------------------------

loc_9059::				; CODE XREF: add_map_pup(uint,uint)+12j
					; DATA XREF: seg03f9:off_912Ao
		push	ds		; jumptable 00016DFF case 5
		push	offset aPu_key_l ; "pu_key.l"
		jmp	loc_8FE8
; ---------------------------------------------------------------------------

loc_905F::				; CODE XREF: add_map_pup(uint,uint)+12j
					; DATA XREF: seg03f9:off_912Ao
		cmp	_jason_present,	0 ; jumptable 00016DFF case 7
		jz	loc_9069
		jmp	loc_9115
; ---------------------------------------------------------------------------

loc_9069::				; CODE XREF: add_map_pup(uint,uint)+97j
		push	ds
		push	offset aPu_jason_l ; "pu_jason.l"
		jmp	loc_8FE8
; ---------------------------------------------------------------------------

loc_9070::				; CODE XREF: add_map_pup(uint,uint)+12j
					; DATA XREF: seg03f9:off_912Ao
		cmp	_jason_present,	0 ; jumptable 00016DFF case 8
		jnz	loc_907A
		jmp	loc_9115
; ---------------------------------------------------------------------------

loc_907A::				; CODE XREF: add_map_pup(uint,uint)+A8j
		cmp	_jason_fire, 1
		jnz	loc_9084
		jmp	loc_9115
; ---------------------------------------------------------------------------

loc_9084::				; CODE XREF: add_map_pup(uint,uint)+B2j
		push	ds
		push	offset aPu_jf_l	; "pu_jf.l"
		jmp	loc_8FE8
; ---------------------------------------------------------------------------

loc_908B::				; CODE XREF: add_map_pup(uint,uint)+Dj
		push	0		; jumptable 00016DFF default case
		push	0
		push	ds
		push	offset aPupNotDefined ;	"Pup not defined!"
		call	@terminate$qnuct1 ; terminate(uchar *,uchar *)
; ---------------------------------------------------------------------------
		jmp	loc_8FF1
; ---------------------------------------------------------------------------

loc_909B::				; CODE XREF: add_map_pup(uint,uint)+27j
					; add_map_pup(uint,uint)+7Aj
		push	seg seg0b2c
		push	offset @do_pup$qn7m_actor ; __int32
		push	0
		push	0		; __int32
		push	ds
		push	offset _tmp	; s2
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		mov	ax, [bp+arg_2]
		mov	es:[bx+22h], ax
		les	bx, _act
		or	byte ptr es:[bx+52h], 20h
		push	1
		push	2
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		push	ss
		lea	ax, [bp+var_2]
		push	ax
		push	[bp+arg_0]
		nop
		push	cs
		call	near ptr @get_map_coords$quinit2 ; get_map_coords(uint,int *,int *)
		add	sp, 0Ah
		push	[bp+var_4]
		push	[bp+var_2]
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8
		jmp	locret_9128
; ---------------------------------------------------------------------------

loc_9115::				; CODE XREF: add_map_pup(uint,uint)+37j
					; add_map_pup(uint,uint)+47j ...
		push	400h
		push	[bp+arg_0]
		push	cs
		call	near ptr @add_map_item$quiui ; add_map_item(uint,uint)
		add	sp, 4
		dec	_goody_count
		jmp	$+2
; ---------------------------------------------------------------------------

locret_9128::				; CODE XREF: add_map_pup(uint,uint)+146j
					; add_map_pup(uint,uint)+159j
		leave
		retf
@add_map_pup$quiui endp

; ---------------------------------------------------------------------------
off_912A	dw offset loc_8FE4	; DATA XREF: add_map_pup(uint,uint)+12r
		dw offset loc_8FF7	; jump table for switch	statement
		dw offset loc_8FFD
		dw offset loc_900D
		dw offset loc_901D
		dw offset loc_9059
		dw offset loc_9049
		dw offset loc_905F
		dw offset loc_9070
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; hook_up_switches(void)
@hook_up_switches$qv proc far		; CODE XREF: start_room(uchar *)+3A2p

var_4		= word ptr -4
var_2		= word ptr -2

		enter	4, 0
		mov	[bp+var_2], 0
		jmp	loc_9213
; ---------------------------------------------------------------------------
		assume es:nothing

loc_9148::				; CODE XREF: hook_up_switches(void)+E5j
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, _the_cast
		add	bx, ax
		mov	ax, es:[bx+4]
		mov	dx, es:[bx+2]
		mov	word ptr _act+2, ax
		mov	word ptr _act, dx
		les	bx, _act
		assume es:nothing
		test	byte ptr es:[bx+35h], 4
		jnz	loc_9171
		jmp	loc_9210
; ---------------------------------------------------------------------------
		assume es:nothing

loc_9171::				; CODE XREF: hook_up_switches(void)+30j
		mov	[bp+var_4], 0
		jmp	loc_91FF
; ---------------------------------------------------------------------------
		assume es:nothing

loc_9179::				; CODE XREF: hook_up_switches(void)+D1j
		mov	ax, [bp+var_4]
		shl	ax, 2
		les	bx, _the_cast
		add	bx, ax
		les	bx, es:[bx+2]
		assume es:nothing
		test	byte ptr es:[bx+35h], 8
		jz	loc_91FC
		assume es:nothing
		mov	ax, [bp+var_4]
		shl	ax, 2
		les	bx, _the_cast
		assume es:nothing
		add	bx, ax
		les	bx, es:[bx+2]
		assume es:nothing
		mov	ax, es:[bx+22h]
		les	bx, _act
		assume es:nothing
		cmp	ax, es:[bx+22h]
		jnz	loc_91FC
		les	bx, _act
		cmp	dword ptr es:[bx+2Ch], 0
		jnz	loc_91DC
		mov	ax, [bp+var_4]
		shl	ax, 2
		les	bx, _the_cast
		assume es:nothing
		add	bx, ax
		mov	ax, es:[bx+4]
		mov	dx, es:[bx+2]
		les	bx, _act
		assume es:nothing
		mov	es:[bx+2Eh], ax
		mov	es:[bx+2Ch], dx
		jmp	loc_91FC
; ---------------------------------------------------------------------------

loc_91DC::				; CODE XREF: hook_up_switches(void)+7Cj
		mov	ax, [bp+var_4]
		shl	ax, 2
		les	bx, _the_cast
		assume es:nothing
		add	bx, ax
		mov	ax, es:[bx+4]
		mov	dx, es:[bx+2]
		les	bx, _act
		mov	es:[bx+32h], ax
		mov	es:[bx+30h], dx
		assume es:nothing

loc_91FC::				; CODE XREF: hook_up_switches(void)+52j
					; hook_up_switches(void)+70j ...
		inc	[bp+var_4]
		assume es:nothing

loc_91FF::				; CODE XREF: hook_up_switches(void)+3Aj
		les	bx, _the_cast
		assume es:nothing
		mov	al, es:[bx]
		mov	ah, 0
		cmp	ax, [bp+var_4]
		jle	loc_9210
		jmp	loc_9179
; ---------------------------------------------------------------------------
		assume es:nothing

loc_9210::				; CODE XREF: hook_up_switches(void)+32j
					; hook_up_switches(void)+CFj
		inc	[bp+var_2]
		assume es:nothing

loc_9213::				; CODE XREF: hook_up_switches(void)+9j
		les	bx, _the_cast
		assume es:nothing
		mov	al, es:[bx]
		mov	ah, 0
		cmp	ax, [bp+var_2]
		jle	locret_9224
		jmp	loc_9148
; ---------------------------------------------------------------------------

locret_9224::				; CODE XREF: hook_up_switches(void)+E3j
		leave
		retf
@hook_up_switches$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; add_switch(unsigned int, unsigned int)
@add_switch$quiui proc far		; CODE XREF: start_room(uchar *)+210p

var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8

		enter	4, 0
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		push	ss
		lea	ax, [bp+var_2]
		push	ax
		push	[bp+arg_0]
		nop
		push	cs
		call	near ptr @get_map_coords$quinit2 ; get_map_coords(uint,int *,int *)
		assume es:seg2b53
		add	sp, 0Ah
		push	seg seg0b2c
		push	offset @do_switch$qn7m_actor ; __int32
		push	0
		push	0		; __int32
		push	ds
		push	offset aSwitch_l ; "switch.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		assume es:nothing
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		assume es:nothing
		mov	byte ptr es:[bx+35h], 5
		mov	ax, [bp+arg_2]
		shr	ax, 6
		les	bx, _act
		mov	es:[bx+22h], ax
		push	[bp+var_4]
		mov	ax, [bp+var_2]
		dec	ax
		push	ax
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8
		push	0
		push	0
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		les	bx, _act
		mov	byte ptr es:[bx+3Ch], 1
		leave
		retf
@add_switch$quiui endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; add_door(unsigned int, unsigned int)
@add_door$quiui	proc far		; CODE XREF: start_room(uchar *)+22Dp
					; start_room(uchar *)+3C8p

var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8

		enter	4, 0
		les	bx, _the_map
		assume es:nothing
		mov	ax, es:[bx+8Eh]
		add	[bp+arg_0], ax
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		push	ss
		lea	ax, [bp+var_2]
		push	ax
		push	[bp+arg_0]
		nop
		push	cs
		call	near ptr @get_map_coords$quinit2 ; get_map_coords(uint,int *,int *)
		assume es:seg2b53
		add	sp, 0Ah
		cmp	[bp+arg_2], 0FFh
		jnz	loc_930D
		push	seg seg0b2c
		push	offset @do_door$qn7m_actor ; __int32
		push	0
		push	0		; __int32
		push	ds
		push	offset aEnd_dr_l ; "end_dr.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32

loc_92F4::				; game_cast::add(uchar *,void *,void *)
		call	@game_cast@add$qnucnvt2
		assume es:nothing
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		mov	eax, _act
		mov	_end_door_ptr, eax
		jmp	loc_9332
; ---------------------------------------------------------------------------
		assume es:seg2b53

loc_930D::				; CODE XREF: add_door(uint,uint)+2Aj
		push	seg seg0b2c
		push	offset @do_door$qn7m_actor ; __int32
		push	0
		push	0		; __int32
		push	ds
		push	offset aDoor_ud_l ; "door_ud.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		assume es:nothing
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax

loc_9332::				; CODE XREF: add_door(uint,uint)+59j
		les	bx, _act
		assume es:nothing
		mov	byte ptr es:[bx+35h], 0Bh
		mov	ax, [bp+arg_2]
		shr	ax, 8
		les	bx, _act
		mov	es:[bx+22h], ax
		push	[bp+var_4]
		mov	ax, [bp+var_2]
		add	ax, 0FFFCh
		push	ax
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8
		push	0
		push	0
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		leave
		retf
@add_door$quiui	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; add_bubble(int, int, int)
@add_bubble$qiii proc far		; CODE XREF: kill_ego(int,int)+1DAp
					; add_explosion(int,int,uchar,uchar *)+105p ...

var_1		= byte ptr -1
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah

		enter	2, 0
		les	bx, _the_cast
		assume es:nothing
		cmp	byte ptr es:[bx], 7Dh ;	'}'
		jbe	loc_938A
		jmp	locret_941D
; ---------------------------------------------------------------------------

loc_938A::				; CODE XREF: add_bubble(int,int,int)+Cj
		push	2
		nop
		push	cs
		call	near ptr @random$qi ; random(int)
		pop	cx
		mov	[bp+var_1], al
		push	3
		nop
		push	cs
		call	near ptr @random$qi ; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_93B1
		push	seg seg0b2c
		push	offset @do_bubble$qn7m_actor ; do_bubble(m_actor *)
		push	0
		push	0
		push	ds
		push	offset aBubmd_l	; "bubmd.l"
		jmp	loc_93BF
; ---------------------------------------------------------------------------

loc_93B1::				; CODE XREF: add_bubble(int,int,int)+26j
		push	seg seg0b2c
		push	offset @do_bubble$qn7m_actor ; __int32
		push	0
		push	0		; __int32
		push	ds
		push	offset aBubsm_l	; "bubsm.l"

loc_93BF::				; CODE XREF: add_bubble(int,int,int)+36j
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		assume es:nothing
		mov	ax, [bp+arg_4]
		mov	es:[bx+14h], ax
		mov	al, [bp+var_1]
		mov	ah, 0
		inc	ax
		neg	ax
		les	bx, _act
		mov	es:[bx+16h], ax
		push	[bp+arg_2]
		push	[bp+arg_0]
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8
		push	1
		mov	al, [bp+var_1]
		push	ax
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8

locret_941D::				; CODE XREF: add_bubble(int,int,int)+Ej
		leave
		retf
@add_bubble$qiii endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; add_explosion(int, int, unsigned char, unsigned char *)
@add_explosion$qiiucnuc	proc far	; CODE XREF: kill_jason(void)+23p
					; seg0b2c:147BP ...

var_2		= byte ptr -2
var_1		= byte ptr -1
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= byte ptr  0Ah
arg_6		= dword	ptr  0Ch

		enter	2, 0
		mov	al, [bp+arg_4]
		mov	ah, 0
		mov	bx, ax
		cmp	bx, 5		; switch 6 cases
		ja	loc_9452	; jumptable 00017251 default case
		shl	bx, 1
		jmp	cs:off_952D[bx]	; switch jump
; ---------------------------------------------------------------------------

loc_9436::				; CODE XREF: add_explosion(int,int,uchar,uchar *)+12j
					; DATA XREF: seg03f9:off_952Do
		mov	[bp+var_1], 3	; jumptable 00017251 case 0

loc_943A::				; CODE XREF: add_explosion(int,int,uchar,uchar *)+31j
		mov	[bp+var_2], 0
		jmp	loc_945A
; ---------------------------------------------------------------------------

loc_9440::				; CODE XREF: add_explosion(int,int,uchar,uchar *)+12j
					; DATA XREF: seg03f9:33BFo
		mov	[bp+var_1], 3	; jumptable 00017251 case 1
		jmp	loc_9456
; ---------------------------------------------------------------------------
		assume es:nothing

loc_9446::				; CODE XREF: add_explosion(int,int,uchar,uchar *)+12j
		mov	[bp+var_1], 5	; jumptable 00017251 case 2
		jmp	loc_9456
; ---------------------------------------------------------------------------

loc_944C::				; CODE XREF: add_explosion(int,int,uchar,uchar *)+12j
		mov	[bp+var_1], 5	; jumptable 00017251 case 5
		jmp	loc_943A
; ---------------------------------------------------------------------------

loc_9452::				; CODE XREF: add_explosion(int,int,uchar,uchar *)+Ej
					; add_explosion(int,int,uchar,uchar *)+12j
		mov	[bp+var_1], 2	; jumptable 00017251 default case
		assume es:nothing

loc_9456::				; CODE XREF: add_explosion(int,int,uchar,uchar *)+25j
					; add_explosion(int,int,uchar,uchar *)+2Bj
		mov	[bp+var_2], 1

loc_945A::				; CODE XREF: add_explosion(int,int,uchar,uchar *)+1Fj
		cmp	[bp+arg_6], 0
		jz	loc_946B
		assume es:nothing
		push	5
		push	word ptr [bp+arg_6+2]
		push	word ptr [bp+arg_6]
		jmp	loc_9481
; ---------------------------------------------------------------------------
		assume es:nothing

loc_946B::				; CODE XREF: add_explosion(int,int,uchar,uchar *)+40j
		mov	al, [bp+var_1]
		push	ax		; char
		mov	al, [bp+arg_4]
		mov	ah, 0
		shl	ax, 3
		mov	bx, ax
		push	word ptr [bx+1FAh]
		push	word ptr [bx+1F8h] ; s2

loc_9481::				; CODE XREF: add_explosion(int,int,uchar,uchar *)+4Aj
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		assume es:nothing
		add	sp, 0Ah
		push	seg seg0b2c
		push	offset @do_exp$qn7m_actor ; __int32
		push	0
		push	0		; __int32
		mov	al, [bp+arg_4]
		mov	ah, 0
		shl	ax, 3
		mov	bx, ax
		push	word ptr [bx+1F6h]
		push	word ptr [bx+1F4h] ; s2
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		assume es:nothing
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		push	2
		mov	al, [bp+var_2]
		push	ax
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		assume es:nothing
		add	sp, 8
		les	bx, _act
		mov	ax, es:[bx+12h]
		cwd
		sub	ax, dx
		sar	ax, 1
		mov	dx, [bp+arg_2]
		sub	dx, ax
		push	dx
		les	bx, _act
		mov	ax, es:[bx+10h]
		cwd
		sub	ax, dx
		sar	ax, 1
		mov	dx, [bp+arg_0]
		sub	dx, ax
		push	dx
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8
		test	[bp+arg_0], 1
		jz	locret_952A
		push	0
		mov	ax, [bp+arg_2]
		add	ax, 0FFFDh
		push	ax
		push	[bp+arg_0]
		push	cs
		call	near ptr @add_bubble$qiii ; add_bubble(int,int,int)
		assume es:nothing
		add	sp, 6

locret_952A::				; CODE XREF: add_explosion(int,int,uchar,uchar *)+F6j
		leave
		retf
@add_explosion$qiiucnuc	endp

; ---------------------------------------------------------------------------
		db 0
off_952D	dw offset loc_9436	; DATA XREF: add_explosion(int,int,uchar,uchar *)+12r
					; jump table for switch	statement
		dw offset loc_9440	; jumptable 00017251 case 1
		db 0D6h	; Ö
		db  32h	; 2
		db 0E2h	; â
		db  32h	; 2
		db 0E2h	; â
		db  32h	; 2
		db 0DCh	; Ü
		db  32h	; 2
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; add_missile(m_actor *, unsigned char,	int)
@add_missile$qn7m_actoruci proc	far	; CODE XREF: ego_fire(void)+32p
					; ego_fire(void)+5Ep ...

var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= byte ptr  0Ah
arg_6		= word ptr  0Ch

		enter	4, 0
		push	si
		les	bx, [bp+arg_0]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jnz	loc_9551
		jmp	loc_9815
; ---------------------------------------------------------------------------

loc_9551::				; CODE XREF: add_missile(m_actor *,uchar,int)+13j
		cmp	[bp+arg_4], 63h	; 'c'
		jnz	loc_9576
		push	100h
		push	word ptr _ego+2
		push	word ptr _ego
		call	@m_actor@on_tile$qi ; m_actor::on_tile(int)
		add	sp, 6
		or	al, al
		jnz	loc_9573
		jmp	loc_9755
; ---------------------------------------------------------------------------
		jmp	loc_9576
; ---------------------------------------------------------------------------

loc_9573::				; CODE XREF: add_missile(m_actor *,uchar,int)+33j
		jmp	loc_9815
; ---------------------------------------------------------------------------

loc_9576::				; CODE XREF: add_missile(m_actor *,uchar,int)+1Cj
					; add_missile(m_actor *,uchar,int)+38j
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx+34h], 1
		jnz	loc_95D3
		push	seg seg0b2c
		push	offset @do_missle$qn7m_actor ; __int32
		push	0
		push	0		; __int32
		mov	al, [bp+arg_4]
		mov	ah, 0
		imul	ax, 16h
		mov	bx, ax
		push	word ptr [bx+0F2h]
		push	word ptr [bx+0F0h] ; s2
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		assume es:nothing
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx]
		mov	[bp+var_2], ax
		les	bx, _act
		assume es:nothing
		mov	ax, es:[bx+10h]
		sub	[bp+var_2], ax
		les	bx, _act
		mov	word ptr es:[bx+14h], 0FFFFh
		jmp	loc_961D
; ---------------------------------------------------------------------------
		assume es:nothing

loc_95D3::				; CODE XREF: add_missile(m_actor *,uchar,int)+45j
		push	seg seg0b2c
		push	offset @do_missle$qn7m_actor ; __int32
		push	0
		push	0		; __int32
		mov	al, [bp+arg_4]
		mov	ah, 0
		imul	ax, 16h
		mov	bx, ax
		push	word ptr [bx+0F6h]
		push	word ptr [bx+0F4h] ; s2
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		assume es:nothing
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+4]
		add	ax, 0FFFDh
		mov	[bp+var_2], ax
		les	bx, _act
		assume es:nothing
		mov	word ptr es:[bx+14h], 1

loc_961D::				; CODE XREF: add_missile(m_actor *,uchar,int)+98j
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	al, es:[bx+34h]
		les	bx, _act
		assume es:nothing
		mov	es:[bx+34h], al
		cmp	[bp+arg_6], 0
		jnz	loc_963E
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+0Ah]
		add	ax, 3
		jmp	loc_9648
; ---------------------------------------------------------------------------
		assume es:nothing

loc_963E::				; CODE XREF: add_missile(m_actor *,uchar,int)+F7j
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+2]
		add	ax, [bp+arg_6]
		assume es:nothing

loc_9648::				; CODE XREF: add_missile(m_actor *,uchar,int)+103j
		mov	[bp+var_4], ax
		mov	al, [bp+arg_4]
		mov	ah, 0
		imul	ax, 16h
		mov	bx, ax
		mov	al, [bx+0FAh]
		mov	ah, 0
		les	bx, _act
		assume es:nothing
		mov	es:[bx+22h], ax
		mov	al, [bp+arg_4]
		mov	ah, 0
		imul	ax, 16h
		mov	bx, ax
		mov	al, [bx+0F9h]
		mov	ah, 0
		les	bx, _act
		mov	es:[bx+24h], ax
		mov	al, [bp+arg_4]
		mov	ah, 0
		imul	ax, 16h
		mov	bx, ax
		mov	al, [bx+0F8h]
		mov	ah, 0
		les	bx, _act
		mov	es:[bx+26h], ax
		mov	al, [bp+arg_4]
		mov	ah, 0
		imul	ax, 16h
		mov	bx, ax
		mov	al, [bx+100h]
		mov	ah, 0
		and	ax, 1
		les	bx, _act
		and	byte ptr es:[bx+52h], 7Fh
		shl	al, 7
		or	es:[bx+52h], al
		cmp	[bp+arg_4], 9
		jnz	loc_96CF
		les	bx, _act
		assume es:nothing
		mov	byte ptr es:[bx+3Dh], 3
		les	bx, _act
		mov	word ptr es:[bx+16h], 0FFF9h
		assume es:nothing

loc_96CF::				; CODE XREF: add_missile(m_actor *,uchar,int)+181j
		les	bx, _act
		mov	eax, [bp+arg_0]
		mov	es:[bx+2Ch], eax
		mov	al, [bp+arg_4]
		mov	ah, 0
		imul	ax, 16h
		mov	bx, ax
		mov	ax, [bx+0FEh]
		mov	dx, [bx+0FCh]
		les	bx, _act
		mov	es:[bx+50h], ax
		mov	es:[bx+4Eh], dx
		push	1
		push	0
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		push	[bp+var_4]
		push	[bp+var_2]
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8
		cmp	[bp+arg_4], 0Ah
		jnz	short loc_972E
		push	0Ah
		jmp	short loc_9730
; ---------------------------------------------------------------------------

loc_972E::				; CODE XREF: add_missile(m_actor *,uchar,int)+1EFj
		push	3		; char

loc_9730::				; CODE XREF: add_missile(m_actor *,uchar,int)+1F3j
		mov	al, [bp+arg_4]
		mov	ah, 0
		imul	ax, 16h
		mov	bx, ax
		push	word ptr [bx+0EEh]
		push	word ptr [bx+0ECh] ; s2
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		assume es:nothing
		add	sp, 0Ah
		jmp	loc_9815
; ---------------------------------------------------------------------------

loc_9755::				; CODE XREF: add_missile(m_actor *,uchar,int)+35j
		push	seg seg0b2c
		push	offset @do_missle$qn7m_actor ; __int32
		push	0
		push	0		; __int32
		push	ds
		push	offset aMsl_top_l ; "msl_top.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		assume es:nothing
		mov	eax, [bp+arg_0]
		mov	es:[bx+2Ch], eax
		les	bx, _act
		mov	byte ptr es:[bx+34h], 63h ; 'c'
		les	bx, _act
		or	byte ptr es:[bx+52h], 80h
		les	bx, _act
		mov	word ptr es:[bx+24h], 8
		les	bx, _act
		mov	word ptr es:[bx+26h], 2
		les	bx, _ego
		cmp	byte ptr es:[bx+34h], 0
		jnz	loc_97D8
		les	bx, _ego
		mov	ax, es:[bx+0Ah]
		les	bx, _act
		sub	ax, es:[bx+12h]
		add	ax, 0FFF8h
		push	ax
		les	bx, _ego
		mov	ax, es:[bx]
		add	ax, 0Bh
		jmp	loc_9800
; ---------------------------------------------------------------------------

loc_97D8::				; CODE XREF: add_missile(m_actor *,uchar,int)+27Dj
		les	bx, _ego
		mov	ax, es:[bx+0Ah]
		les	bx, _act
		sub	ax, es:[bx+12h]
		add	ax, 0FFF8h
		push	ax
		les	bx, _ego
		push	es
		les	si, _ego
		mov	ax, es:[si]
		pop	es
		add	ax, es:[bx+10h]
		add	ax, 0FFF3h

loc_9800::				; CODE XREF: add_missile(m_actor *,uchar,int)+29Dj
		push	ax
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8
		inc	_top_shot_count
		assume es:nothing

loc_9815::				; CODE XREF: add_missile(m_actor *,uchar,int)+15j
					; add_missile(m_actor *,uchar,int):loc_9573j ...
		pop	si
		leave
		retf
@add_missile$qn7m_actoruci endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; add_jason(void)
@add_jason$qv	proc far		; CODE XREF: start_room(uchar *)+398p
					; check_user(void)+348p ...
		push	bp
		mov	bp, sp
		push	seg seg0b2c
		push	offset @do_probe$qn7m_actor ; __int32
		push	seg seg0b2c
		push	offset @mv_ego$qn7m_actornit2 ;	__int32
		push	ds
		push	offset aProber_l ; "prober.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast ; __int32
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		assume es:nothing
		add	sp, 10h
		mov	word ptr _jason+2, dx
		mov	word ptr _jason, ax
		les	bx, _jason
		assume es:nothing
		mov	byte ptr es:[bx+35h], 11h
		les	bx, _jason
		mov	byte ptr es:[bx+34h], 0
		les	bx, _ego
		assume es:nothing
		cmp	byte ptr es:[bx+34h], 0
		jnz	loc_9874
		les	bx, _ego
		push	word ptr es:[bx+2]
		les	bx, _ego
		mov	ax, es:[bx]
		add	ax, 0FFFEh
		push	ax
		jmp	loc_9884
; ---------------------------------------------------------------------------

loc_9874::				; CODE XREF: add_jason(void)+45j
		les	bx, _ego
		assume es:nothing
		push	word ptr es:[bx+2]
		les	bx, _ego
		push	word ptr es:[bx+4]
		assume es:nothing

loc_9884::				; CODE XREF: add_jason(void)+5Aj
		push	word ptr _jason+2
		push	word ptr _jason
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		assume es:nothing
		add	sp, 8
		push	1
		push	0Ch
		push	word ptr _jason+2
		push	word ptr _jason
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		mov	_jason_power, 100
		mov	_jason_present,	1
		pop	bp
		retf
@add_jason$qv	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; kill_jason(void)
@kill_jason$qv	proc far		; CODE XREF: kill_ego(int,int)+158p
					; check_guages(void)+1CEp
		push	bp
		mov	bp, sp
		les	bx, _jason
		assume es:nothing
		or	byte ptr es:[bx+52h], 1
		push	0
		push	0
		push	2
		les	bx, _jason
		push	word ptr es:[bx+0Ah]
		les	bx, _jason
		push	word ptr es:[bx+8]
		push	cs
		call	near ptr @add_explosion$qiiucnuc ; add_explosion(int,int,uchar,uchar *)
		assume es:nothing
		add	sp, 0Ah
		cmp	_jason_on, 1
		jnz	loc_98FF
		les	bx, _ego
		assume es:nothing
		cmp	byte ptr es:[bx+3Dh], 2
		jz	loc_98FF
		push	word ptr _ego+2
		push	word ptr _ego
		nop
		push	cs
		call	near ptr @scroll_to$qn7m_actor ; scroll_to(m_actor *)
		add	sp, 4

loc_98FF::				; CODE XREF: kill_jason(void)+2Ej
					; kill_jason(void)+39j
		mov	al, 0
		mov	_jason_present,	al
		mov	_jason_on, al
		mov	eax, _ego
		mov	_cur_sub, eax
		nop
		push	cs
		call	near ptr @update_jason_guage$qv	; update_jason_guage(void)
		assume es:nothing
		pop	bp
		retf
@kill_jason$qv	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; toggle_sub_control(void)
@toggle_sub_control$qv proc far		; CODE XREF: check_user(void)+E4p
		push	bp
		mov	bp, sp
		cmp	_jason_present,	0
		jnz	loc_9922
		jmp	loc_9991
; ---------------------------------------------------------------------------

loc_9922::				; CODE XREF: toggle_sub_control(void)+8j
		push	ds
		push	offset aSqueek	; "squeek"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@play_sound_file$qnuc ; game_manager::play_sound_file(uchar *)
		assume es:seg2608
		add	sp, 8
		les	bx, _cur_sub
		assume es:nothing
		xor	ax, ax
		mov	es:[bx+16h], ax
		les	bx, _cur_sub
		mov	es:[bx+14h], ax
		cmp	_jason_on, 1
		jnz	loc_996A
		assume es:nothing
		push	word ptr _ego+2
		push	word ptr _ego
		nop
		push	cs
		call	near ptr @scroll_to$qn7m_actor ; scroll_to(m_actor *)
		assume es:nothing
		add	sp, 4
		mov	_jason_on, 0
		mov	eax, _ego
		jmp	loc_998D
; ---------------------------------------------------------------------------
		assume es:nothing

loc_996A::				; CODE XREF: toggle_sub_control(void)+37j
		les	bx, _ego
		mov	word ptr es:[bx+16h], 0
		push	word ptr _jason+2
		push	word ptr _jason
		nop
		push	cs
		call	near ptr @scroll_to$qn7m_actor ; scroll_to(m_actor *)
		assume es:nothing
		add	sp, 4
		mov	_jason_on, 1
		mov	eax, _jason

loc_998D::				; CODE XREF: toggle_sub_control(void)+52j
		mov	_cur_sub, eax

loc_9991::				; CODE XREF: toggle_sub_control(void)+Aj
		pop	bp
		retf
@toggle_sub_control$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; scroll_to(m_actor *)
@scroll_to$qn7m_actor proc far		; CODE XREF: kill_jason(void)+45p
					; toggle_sub_control(void)+43p	...

var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_1		= byte ptr -1
arg_0		= dword	ptr  6

		enter	0Ah, 0
		les	bx, _the_map
		assume es:nothing
		mov	ax, es:[bx+8]
		les	bx, _the_map
		mov	dx, es:[bx+4]
		sar	dx, 1
		add	ax, dx
		mov	[bp+var_4], ax
		les	bx, _the_map
		mov	ax, es:[bx+0Ah]
		les	bx, _the_map
		mov	dx, es:[bx+6]
		sar	dx, 1
		add	ax, dx
		mov	[bp+var_6], ax
		mov	ax, [bp+var_4]
		shr	ax, 3
		shl	ax, 3
		mov	[bp+var_4], ax
		mov	ax, [bp+var_6]
		shr	ax, 3
		shl	ax, 3
		mov	[bp+var_6], ax
		xor	ax, ax
		mov	[bp+var_A], ax
		mov	[bp+var_8], ax
		jmp	loc_9AAE
; ---------------------------------------------------------------------------

loc_99E8::				; CODE XREF: scroll_to(m_actor *)+123j
					; scroll_to(m_actor *)+12Ej
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+8]
		sar	ax, 3
		shl	ax, 3
		mov	[bp+var_8], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+0Ah]
		sar	ax, 3
		shl	ax, 3
		mov	[bp+var_A], ax
		mov	ax, [bp+var_4]
		cmp	ax, [bp+var_8]
		jnb	loc_9A16
		add	[bp+var_4], 8
		jmp	loc_9A22
; ---------------------------------------------------------------------------

loc_9A16::				; CODE XREF: scroll_to(m_actor *)+7Bj
		mov	ax, [bp+var_4]
		cmp	ax, [bp+var_8]
		jbe	loc_9A22
		sub	[bp+var_4], 8

loc_9A22::				; CODE XREF: scroll_to(m_actor *)+81j
					; scroll_to(m_actor *)+89j
		mov	ax, [bp+var_6]
		cmp	ax, [bp+var_A]
		jnb	loc_9A30
		assume es:nothing
		add	[bp+var_6], 8
		jmp	loc_9A3C
; ---------------------------------------------------------------------------
		assume es:nothing

loc_9A30::				; CODE XREF: scroll_to(m_actor *)+95j
		mov	ax, [bp+var_6]
		cmp	ax, [bp+var_A]
		jbe	loc_9A3C
		sub	[bp+var_6], 8

loc_9A3C::				; CODE XREF: scroll_to(m_actor *)+9Bj
					; scroll_to(m_actor *)+A3j
		push	[bp+var_6]
		push	[bp+var_4]
		push	word ptr _the_map+2
		push	word ptr _the_map
		call	@tilemap@center_on$quiui ; tilemap::center_on(uint,uint)
		assume es:nothing
		add	sp, 8
		mov	[bp+var_1], al
		mov	al, [bp+var_1]
		push	ax
		push	word ptr _the_cast+2
		push	word ptr _the_cast
		call	@game_cast@update$quc ;	game_cast::update(uchar)
		assume es:nothing
		add	sp, 6
		mov	al, _non_displayed_page
		mov	ah, 0
		shl	ax, 1
		mov	bx, ax
		push	_page_offsets[bx]
		push	word ptr _the_map+2
		push	word ptr _the_map
		call	@tilemap@update$qui ; tilemap::update(uint)
		assume es:nothing
		add	sp, 6
		mov	al, _non_displayed_page
		mov	ah, 0
		shl	ax, 1
		mov	bx, ax
		push	_page_offsets[bx]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@show_offset$qui ; vga_display::show_offset(uint)
		assume es:nothing
		add	sp, 6
		mov	al, _non_displayed_page
		mov	_displayed_page, al
		xor	_non_displayed_page, 1
		assume es:nothing

loc_9AAE::				; CODE XREF: scroll_to(m_actor *)+52j
		mov	ax, [bp+var_4]
		cmp	ax, [bp+var_8]
		jz	loc_9AB9
		jmp	loc_99E8
; ---------------------------------------------------------------------------
		assume es:nothing

loc_9AB9::				; CODE XREF: scroll_to(m_actor *)+121j
		mov	ax, [bp+var_6]
		cmp	ax, [bp+var_A]
		jz	loc_9AC4
		jmp	loc_99E8
; ---------------------------------------------------------------------------

loc_9AC4::				; CODE XREF: scroll_to(m_actor *)+12Cj
		jmp	loc_9B85
; ---------------------------------------------------------------------------

loc_9AC7::				; CODE XREF: scroll_to(m_actor *)+1FAj
					; scroll_to(m_actor *)+205j
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+8]
		sar	ax, 2
		shl	ax, 2
		mov	[bp+var_8], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+0Ah]
		mov	[bp+var_A], ax
		mov	ax, [bp+var_4]
		cmp	ax, [bp+var_8]
		jnb	loc_9AEF
		add	[bp+var_4], 4
		jmp	loc_9AFB
; ---------------------------------------------------------------------------

loc_9AEF::				; CODE XREF: scroll_to(m_actor *)+154j
		mov	ax, [bp+var_4]
		cmp	ax, [bp+var_8]
		jbe	loc_9AFB
		sub	[bp+var_4], 4

loc_9AFB::				; CODE XREF: scroll_to(m_actor *)+15Aj
					; scroll_to(m_actor *)+162j
		mov	ax, [bp+var_6]
		cmp	ax, [bp+var_A]
		jnb	loc_9B08
		inc	[bp+var_6]
		jmp	loc_9B13
; ---------------------------------------------------------------------------

loc_9B08::				; CODE XREF: scroll_to(m_actor *)+16Ej
		mov	ax, [bp+var_6]
		cmp	ax, [bp+var_A]
		jbe	loc_9B13
		dec	[bp+var_6]

loc_9B13::				; CODE XREF: scroll_to(m_actor *)+173j
					; scroll_to(m_actor *)+17Bj
		push	[bp+var_6]
		push	[bp+var_4]
		push	word ptr _the_map+2
		push	word ptr _the_map
		call	@tilemap@center_on$quiui ; tilemap::center_on(uint,uint)
		add	sp, 8
		mov	[bp+var_1], al
		mov	al, [bp+var_1]
		push	ax
		push	word ptr _the_cast+2
		push	word ptr _the_cast
		call	@game_cast@update$quc ;	game_cast::update(uchar)
		add	sp, 6
		mov	al, _non_displayed_page
		mov	ah, 0
		shl	ax, 1
		mov	bx, ax
		push	_page_offsets[bx]
		push	word ptr _the_map+2
		push	word ptr _the_map
		call	@tilemap@update$qui ; tilemap::update(uint)
		add	sp, 6
		mov	al, _non_displayed_page
		mov	ah, 0
		shl	ax, 1
		mov	bx, ax
		push	_page_offsets[bx]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@show_offset$qui ; vga_display::show_offset(uint)
		add	sp, 6
		mov	al, _non_displayed_page
		mov	_displayed_page, al
		xor	_non_displayed_page, 1
		assume es:nothing

loc_9B85::				; CODE XREF: scroll_to(m_actor *):loc_9AC4j
		mov	ax, [bp+var_4]
		cmp	ax, [bp+var_8]
		jz	loc_9B90
		jmp	loc_9AC7
; ---------------------------------------------------------------------------

loc_9B90::				; CODE XREF: scroll_to(m_actor *)+1F8j
		mov	ax, [bp+var_6]
		cmp	ax, [bp+var_A]
		jz	locret_9B9B
		jmp	loc_9AC7
; ---------------------------------------------------------------------------

locret_9B9B::				; CODE XREF: scroll_to(m_actor *)+203j
		leave
		retf
@scroll_to$qn7m_actor endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; ego_fire(void)
@ego_fire$qv	proc far		; CODE XREF: check_user(void)+54p
					; check_user(void)+61p
		push	bp
		mov	bp, sp
		cmp	_shot_count, 5
		jnz	loc_9BAA
		jmp	loc_9CB1
; ---------------------------------------------------------------------------

loc_9BAA::				; CODE XREF: ego_fire(void)+8j
		cmp	_jason_on, 0
		jz	loc_9BDA
		inc	_shot_count
		cmp	_shot_size, 0
		jnz	loc_9BC2
		push	4
		push	0
		jmp	loc_9BC6
; ---------------------------------------------------------------------------

loc_9BC2::				; CODE XREF: ego_fire(void)+1Dj
		push	4
		push	1

loc_9BC6::				; CODE XREF: ego_fire(void)+23j
		push	word ptr _jason+2
		push	word ptr _jason
		push	cs
		call	near ptr @add_missile$qn7m_actoruci ; add_missile(m_actor *,uchar,int)
		add	sp, 8
		jmp	loc_9CB1
; ---------------------------------------------------------------------------
		jmp	loc_9BE8
; ---------------------------------------------------------------------------

loc_9BDA::				; CODE XREF: ego_fire(void)+12j
		les	bx, _ego
		assume es:nothing
		cmp	byte ptr es:[bx+3Dh], 1
		jnz	loc_9BE8
		jmp	loc_9CB1
; ---------------------------------------------------------------------------

loc_9BE8::				; CODE XREF: ego_fire(void)+3Bj
					; ego_fire(void)+46j
		inc	_shot_count
		push	0
		mov	al, _shot_size
		push	ax
		push	word ptr _ego+2
		push	word ptr _ego
		push	cs
		call	near ptr @add_missile$qn7m_actoruci ; add_missile(m_actor *,uchar,int)
		assume es:nothing
		add	sp, 8
		cmp	_heavy_timer, 0
		jz	short loc_9C0C
		dec	_heavy_timer

loc_9C0C::				; CODE XREF: ego_fire(void)+69j
		cmp	_jason_fire, 0
		jz	short loc_9C49
		cmp	_jason_present,	0
		jz	short loc_9C49
		les	bx, _jason
		assume es:nothing
		cmp	byte ptr es:[bx+3Dh], 0
		jnz	short loc_9C49
		push	0
		cmp	_shot_size, 0
		jnz	short loc_9C33
		mov	ax, 1
		jmp	short loc_9C35
; ---------------------------------------------------------------------------

loc_9C33::				; CODE XREF: ego_fire(void)+8Fj
		xor	ax, ax

loc_9C35::				; CODE XREF: ego_fire(void)+94j
		mov	dl, 1
		sub	dl, al
		push	dx
		push	word ptr _jason+2
		push	word ptr _jason
		push	cs
		call	near ptr @add_missile$qn7m_actoruci ; add_missile(m_actor *,uchar,int)
		add	sp, 8
		assume es:nothing

loc_9C49::				; CODE XREF: ego_fire(void)+74j
					; ego_fire(void)+7Bj ...
		cmp	_top_fire, 1
		jnz	loc_9C6A
		cmp	_top_shot_count, 2
		jz	loc_9C6A
		push	0
		push	63h ; 'c'
		push	word ptr _ego+2
		push	word ptr _ego
		push	cs
		call	near ptr @add_missile$qn7m_actoruci ; add_missile(m_actor *,uchar,int)
		add	sp, 8

loc_9C6A::				; CODE XREF: ego_fire(void)+B1j
					; ego_fire(void)+B8j
		cmp	_shot_size, 0
		jz	loc_9CB1
		les	bx, _ego
		assume es:nothing
		push	word ptr es:[bx+14h]
		nop
		push	cs
		call	near ptr @abs$qi ; abs(int)
		pop	cx
		cmp	ax, 6
		jg	loc_9CB1
		les	bx, _ego
		cmp	byte ptr es:[bx+34h], 0
		jnz	loc_9CA1
		mov	al, _shot_size
		mov	ah, 0
		add	ax, 2
		les	bx, _ego
		sub	es:[bx+14h], ax
		jmp	loc_9CB1
; ---------------------------------------------------------------------------

loc_9CA1::				; CODE XREF: ego_fire(void)+F0j
		mov	al, _shot_size
		mov	ah, 0
		add	ax, 2
		les	bx, _ego
		add	es:[bx+14h], ax
		assume es:nothing

loc_9CB1::				; CODE XREF: ego_fire(void)+Aj
					; ego_fire(void)+38j ...
		pop	bp
		retf
@ego_fire$qv	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; turn_ego(void)
@turn_ego$qv	proc far		; CODE XREF: check_user(void)+114p
					; check_user(void)+14Cp ...
		push	bp
		mov	bp, sp
		cmp	_jason_on, 0
		jz	loc_9CE4
		assume es:nothing
		les	bx, _jason
		cmp	byte ptr es:[bx+34h], 1
		jnz	loc_9CCE
		push	ds
		push	offset aProber_l_0 ; "prober.l"
		jmp	loc_9CD2
; ---------------------------------------------------------------------------

loc_9CCE::				; CODE XREF: turn_ego(void)+13j
		push	ds
		push	offset aProbel_l ; "probel.l"

loc_9CD2::				; CODE XREF: turn_ego(void)+19j
		push	word ptr _jason+2
		push	word ptr _jason	; __int32
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8
		jmp	loc_9D0B
; ---------------------------------------------------------------------------
		assume es:nothing

loc_9CE4::				; CODE XREF: turn_ego(void)+8j
		les	bx, _ego
		mov	byte ptr es:[bx+3Dh], 1
		les	bx, _ego
		mov	word ptr es:[bx+22h], 3
		push	ds
		push	offset aTurn_l	; "turn.l"
		push	word ptr _ego+2
		push	word ptr _ego	; __int32
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8

loc_9D0B::				; CODE XREF: turn_ego(void)+2Fj
		les	bx, _cur_sub
		xor	byte ptr es:[bx+34h], 1
		pop	bp
		retf
@turn_ego$qv	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; check_user(void)
@check_user$qv	proc far		; CODE XREF: de_doit(void)+226p

var_4		= word ptr -4
var_1		= byte ptr -1

		enter	4, 0
		cmp	_control, 0
		jnz	loc_9D24
		jmp	loc_A0F1
; ---------------------------------------------------------------------------

loc_9D24::				; CODE XREF: check_user(void)+9j
		cmp	byte_2D3AC, 0
		jnz	loc_9D32
		cmp	byte_2D3E6, 0
		jz	loc_9D40

loc_9D32::				; CODE XREF: check_user(void)+13j
		mov	al, _displayed_page
		mov	ah, 0
		or	ax, ax
		jnz	loc_9D40
		nop
		push	cs
		call	near ptr @activate_menu_bar$qv ; activate_menu_bar(void)

loc_9D40::				; CODE XREF: check_user(void)+1Aj
					; check_user(void)+23j
		les	bx, dword ptr _the_game
		cmp	byte ptr es:[bx+2Bh], 1
		jnz	loc_9D81
		cmp	_auto_fire, 1
		jnz	loc_9D6F
		cmp	_jason_on, 0
		jnz	loc_9D6F
		mov	al, _auto_fire_count
		inc	_auto_fire_count
		cmp	al, 2
		jnz	loc_9D6D
		mov	_auto_fire_count, 0
		push	cs
		call	near ptr @ego_fire$qv ;	ego_fire(void)

loc_9D6D::				; CODE XREF: check_user(void)+4Cj
		jmp	loc_9D7F
; ---------------------------------------------------------------------------

loc_9D6F::				; CODE XREF: check_user(void)+3Aj
					; check_user(void)+41j
		cmp	_space_bar_been_up, 0
		jz	loc_9D7A
		push	cs
		call	near ptr @ego_fire$qv ;	ego_fire(void)

loc_9D7A::				; CODE XREF: check_user(void)+5Ej
		mov	_space_bar_been_up, 0

loc_9D7F::				; CODE XREF: check_user(void):loc_9D6Dj
		jmp	loc_9D8E
; ---------------------------------------------------------------------------

loc_9D81::				; CODE XREF: check_user(void)+33j
		mov	al, _space_bar_been_up
		mov	ah, 0
		or	ax, ax
		jnz	loc_9D8E
		inc	_space_bar_been_up

loc_9D8E::				; CODE XREF: check_user(void):loc_9D7Fj
					; check_user(void)+72j
		les	bx, dword ptr _the_game
		cmp	byte ptr es:[bx+2Ch], 1
		jnz	loc_9E0F
		les	bx, _ego
		assume es:nothing
		cmp	byte ptr es:[bx+3Dh], 0
		jnz	loc_9E0F
		mov	[bp+var_4], 0
		jmp	loc_9DDE
; ---------------------------------------------------------------------------

loc_9DAB::				; CODE XREF: check_user(void)+D0j
		mov	bx, [bp+var_4]
		shl	bx, 2
		push	_all_teleports[bx]
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		call	@m_actor@on_pos$qui ; m_actor::on_pos(uint)
		add	sp, 6
		or	al, al
		jz	loc_9DDB
		mov	bx, [bp+var_4]
		shl	bx, 2
		push	word_2B890[bx]
		nop
		push	cs
		call	near ptr @teleport_to$qui ; teleport_to(uint)
		pop	cx
		jmp	loc_9DE8
; ---------------------------------------------------------------------------

loc_9DDB::				; CODE XREF: check_user(void)+B1j
		inc	[bp+var_4]

loc_9DDE::				; CODE XREF: check_user(void)+93j
		mov	al, _teleport_count
		mov	ah, 0
		cmp	ax, [bp+var_4]
		jg	loc_9DAB

loc_9DE8::				; CODE XREF: check_user(void)+C3j
		cmp	_jason_present,	1
		jnz	loc_9E0F
		mov	al, _teleport_count
		mov	ah, 0
		cmp	ax, [bp+var_4]
		jnz	loc_9E0F
		push	cs
		call	near ptr @toggle_sub_control$qv	; toggle_sub_control(void)
		assume es:nothing
		push	0Ah
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@pause$qui ; vga_display::pause(uint)
		add	sp, 6

loc_9E0F::				; CODE XREF: check_user(void)+81j
					; check_user(void)+8Cj	...
		mov	[bp+var_1], 0
		les	bx, dword ptr _the_game
		assume es:nothing
		cmp	byte ptr es:[bx+2Ah], 0
		jz	short loc_9E4B
		les	bx, _cur_sub
		assume es:nothing
		cmp	byte ptr es:[bx+34h], 0
		jz	short loc_9E2D
		push	cs
		call	near ptr @turn_ego$qv ;	turn_ego(void)

loc_9E2D::				; CODE XREF: check_user(void)+111j
		les	bx, _cur_sub
		cmp	byte ptr es:[bx+3Dh], 1
		jz	short loc_9E45
		mov	al, _ego_x_speed
		mov	ah, 0
		les	bx, _cur_sub
		mov	es:[bx+14h], ax

loc_9E45::				; CODE XREF: check_user(void)+120j
		mov	[bp+var_1], 1
		jmp	short loc_9EAD
; ---------------------------------------------------------------------------
		assume es:nothing

loc_9E4B::				; CODE XREF: check_user(void)+106j
		les	bx, dword ptr _the_game
		cmp	byte ptr es:[bx+29h], 0
		jz	short loc_9E85
		les	bx, _cur_sub
		assume es:nothing
		cmp	byte ptr es:[bx+34h], 1
		jz	short loc_9E65
		push	cs
		call	near ptr @turn_ego$qv ;	turn_ego(void)

loc_9E65::				; CODE XREF: check_user(void)+149j
		les	bx, _cur_sub
		cmp	byte ptr es:[bx+3Dh], 1
		jz	short loc_9E7F
		mov	al, _ego_x_speed
		mov	ah, 0
		neg	ax
		les	bx, _cur_sub
		mov	es:[bx+14h], ax

loc_9E7F::				; CODE XREF: check_user(void)+158j
		mov	[bp+var_1], 1
		jmp	short loc_9EAD
; ---------------------------------------------------------------------------
		assume es:nothing

loc_9E85::				; CODE XREF: check_user(void)+13Ej
		les	bx, _cur_sub
		assume es:nothing
		cmp	word ptr es:[bx+14h], 0
		jz	short loc_9EAD
		assume es:nothing
		les	bx, _cur_sub
		cmp	word ptr es:[bx+14h], 0
		jle	short loc_9EA5
		les	bx, _cur_sub
		dec	word ptr es:[bx+14h]
		jmp	short loc_9EAD
; ---------------------------------------------------------------------------

loc_9EA5::				; CODE XREF: check_user(void)+183j
		les	bx, _cur_sub
		inc	word ptr es:[bx+14h]
		assume es:nothing

loc_9EAD::				; CODE XREF: check_user(void)+133j
					; check_user(void)+16Dj ...
		les	bx, dword ptr _the_game
		assume es:nothing
		cmp	byte ptr es:[bx+28h], 0
		jz	short loc_9EF3
		mov	al, _ego_y_speed
		mov	ah, 0
		les	bx, _cur_sub
		assume es:nothing
		cmp	ax, es:[bx+16h]
		jle	short loc_9ED1
		les	bx, _cur_sub
		inc	word ptr es:[bx+16h]
		jmp	short loc_9EED
; ---------------------------------------------------------------------------

loc_9ED1::				; CODE XREF: check_user(void)+1AFj
		mov	al, _ego_y_speed
		mov	ah, 0
		les	bx, _cur_sub
		cmp	ax, es:[bx+16h]
		jge	short loc_9EED
		mov	al, _ego_y_speed
		mov	ah, 0
		les	bx, _cur_sub
		assume es:nothing
		mov	es:[bx+16h], ax
		assume es:nothing

loc_9EED::				; CODE XREF: check_user(void)+1B9j
					; check_user(void)+1C8j
		mov	[bp+var_1], 1
		jmp	loc_9F6F
; ---------------------------------------------------------------------------
		assume es:nothing

loc_9EF3::				; CODE XREF: check_user(void)+1A0j
		les	bx, dword ptr _the_game
		cmp	byte ptr es:[bx+27h], 0
		jz	loc_9F3F
		mov	al, _ego_y_speed
		mov	ah, 0
		neg	ax
		les	bx, _cur_sub
		assume es:nothing
		cmp	ax, es:[bx+16h]
		jge	loc_9F19
		les	bx, _cur_sub
		dec	word ptr es:[bx+16h]
		jmp	loc_9F39
; ---------------------------------------------------------------------------

loc_9F19::				; CODE XREF: check_user(void)+1F7j
		mov	al, _ego_y_speed
		mov	ah, 0
		neg	ax
		les	bx, _cur_sub
		cmp	ax, es:[bx+16h]
		jle	loc_9F39
		mov	al, _ego_y_speed
		mov	ah, 0
		neg	ax
		les	bx, _cur_sub
		assume es:nothing
		mov	es:[bx+16h], ax
		assume es:nothing

loc_9F39::				; CODE XREF: check_user(void)+201j
					; check_user(void)+212j
		mov	[bp+var_1], 1
		jmp	loc_9F6F
; ---------------------------------------------------------------------------
		assume es:nothing

loc_9F3F::				; CODE XREF: check_user(void)+1E6j
		les	bx, _cur_sub
		assume es:nothing
		push	word ptr es:[bx+16h]
		nop
		push	cs
		call	near ptr @abs$qi ; abs(int)
		pop	cx
		cmp	ax, 1
		jle	loc_9F6F
		assume es:nothing
		les	bx, _cur_sub
		cmp	word ptr es:[bx+16h], 0
		jle	loc_9F67
		assume es:nothing
		les	bx, _cur_sub
		dec	word ptr es:[bx+16h]
		jmp	loc_9F6F
; ---------------------------------------------------------------------------
		assume es:nothing

loc_9F67::				; CODE XREF: check_user(void)+245j
		les	bx, _cur_sub
		inc	word ptr es:[bx+16h]
		assume es:nothing

loc_9F6F::				; CODE XREF: check_user(void)+1DBj
					; check_user(void)+227j ...
		les	bx, _ego
		assume es:nothing
		cmp	byte ptr es:[bx+3Dh], 1
		jz	loc_9FCB
		cmp	[bp+var_1], 0
		jz	loc_9FAC
		les	bx, _cur_sub
		cmp	byte ptr es:[bx+3Ah], 0
		jnz	loc_9F96
		les	bx, _cur_sub
		cmp	byte ptr es:[bx+38h], 0
		jnz	loc_9FAA

loc_9F96::				; CODE XREF: check_user(void)+273j
		push	1
		push	0
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8

loc_9FAA::				; CODE XREF: check_user(void)+27Ej
		jmp	loc_9FCB
; ---------------------------------------------------------------------------

loc_9FAC::				; CODE XREF: check_user(void)+268j
		les	bx, _cur_sub
		assume es:nothing
		cmp	byte ptr es:[bx+3Ah], 0Ch
		jz	loc_9FCB
		assume es:nothing
		push	1
		push	0Ch
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		assume es:nothing

loc_9FCB::				; CODE XREF: check_user(void)+262j
					; check_user(void):loc_9FAAj ...
		cmp	_cheat_mode, 1
		jz	loc_9FD5
		jmp	loc_A0F1
; ---------------------------------------------------------------------------

loc_9FD5::				; CODE XREF: check_user(void)+2BAj
		cmp	byte_2D3C9, 0
		jz	loc_9FEB
		push	0A7h ; '§'
		push	68h ; 'h'
		push	2
		nop
		push	cs
		call	near ptr @update_air_guage$qiii	; update_air_guage(int,int,int)
		add	sp, 6

loc_9FEB::				; CODE XREF: check_user(void)+2C4j
		cmp	byte_2D3CA, 0
		jz	loc_A001
		push	0B3h ; '³'
		push	68h ; 'h'
		push	2
		nop
		push	cs
		call	near ptr @update_shld_guage$qiii ; update_shld_guage(int,int,int)
		add	sp, 6

loc_A001::				; CODE XREF: check_user(void)+2DAj
		cmp	byte_2D3CC, 0
		jz	loc_A028
		cmp	_shot_size, 3
		jz	loc_A028
		mov	_shot_size, 3
		push	ds
		push	offset aDrillhi	; "drillhi"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@play_sound_file$qnuc ; game_manager::play_sound_file(uchar *)
		add	sp, 8

loc_A028::				; CODE XREF: check_user(void)+2F0j
					; check_user(void)+2F7j
		cmp	byte_2D3BE, 0
		jz	loc_A04F
		cmp	_auto_fire, 1
		jz	loc_A04F
		mov	_auto_fire, 1
		push	ds
		push	offset aDrillhi_0 ; "drillhi"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@play_sound_file$qnuc ; game_manager::play_sound_file(uchar *)
		add	sp, 8

loc_A04F::				; CODE XREF: check_user(void)+317j
					; check_user(void)+31Ej
		cmp	byte_2D3CF, 0
		jz	loc_A075
		cmp	_jason_present,	0
		jnz	loc_A075
		push	cs
		call	near ptr @add_jason$qv ; add_jason(void)
		push	ds
		push	offset aDrillhi_1 ; "drillhi"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@play_sound_file$qnuc ; game_manager::play_sound_file(uchar *)
		add	sp, 8

loc_A075::				; CODE XREF: check_user(void)+33Ej
					; check_user(void)+345j
		cmp	byte_2D3CE, 0
		jz	loc_A0A3
		cmp	_jason_present,	1
		jnz	loc_A0A3
		cmp	_jason_fire, 1
		jz	loc_A0A3
		mov	_jason_fire, 1
		push	ds
		push	offset aDrillhi_2 ; "drillhi"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@play_sound_file$qnuc ; game_manager::play_sound_file(uchar *)
		add	sp, 8

loc_A0A3::				; CODE XREF: check_user(void)+364j
					; check_user(void)+36Bj ...
		cmp	byte_2D3C1, 0
		jz	loc_A0CA
		cmp	_top_fire, 1
		jz	loc_A0CA
		mov	_top_fire, 1
		push	ds
		push	offset aDrillhi_3 ; "drillhi"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@play_sound_file$qnuc ; game_manager::play_sound_file(uchar *)
		add	sp, 8

loc_A0CA::				; CODE XREF: check_user(void)+392j
					; check_user(void)+399j
		cmp	byte_2D3CD, 0
		jz	loc_A0F1
		cmp	_god_mode, 1
		jz	loc_A0F1
		mov	_god_mode, 1
		push	ds
		push	offset aDrillhi_4 ; "drillhi"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@play_sound_file$qnuc ; game_manager::play_sound_file(uchar *)
		add	sp, 8
		assume es:nothing

loc_A0F1::				; CODE XREF: check_user(void)+Bj
					; check_user(void)+2BCj ...
		cmp	_debug_mode, 1
		jz	loc_A0FB
		jmp	locret_A1DB
; ---------------------------------------------------------------------------

loc_A0FB::				; CODE XREF: check_user(void)+3E0j
		cmp	byte_2D3CB, 0
		jz	loc_A106
		inc	byte ptr _debug

loc_A106::				; CODE XREF: check_user(void)+3EAj
		cmp	byte_2D3C4, 0
		jz	loc_A136
		cmp	_displayed_page, 0
		jnz	loc_A136
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@dump_pcx$qv ; vga_display::dump_pcx(void)
		add	sp, 4
		push	0		; int
		push	0		; int
		push	0		; char
		push	ds
		push	offset aRiptide_pcxHas ; "'riptide.pcx' has been dumped."
		call	@i_inform$qnucuct1 ; i_inform(uchar *,uchar,uchar *)
		add	sp, 0Ah

loc_A136::				; CODE XREF: check_user(void)+3F5j
					; check_user(void)+3FCj
		cmp	byte_2D3D7, 0
		jz	loc_A142
		mov	_stop_room, 1

loc_A142::				; CODE XREF: check_user(void)+425j
		cmp	byte_2D3AD, 0
		jz	loc_A15B
		push	0Ah
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@pause$qui ; vga_display::pause(uint)
		add	sp, 6

loc_A15B::				; CODE XREF: check_user(void)+431j
		cmp	byte_2D3AE, 0
		jz	loc_A174
		push	1Eh
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@pause$qui ; vga_display::pause(uint)
		add	sp, 6

loc_A174::				; CODE XREF: check_user(void)+44Aj
		cmp	byte_2D3E6, 0
		jz	loc_A18D
		push	0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@show_offset$qui ; vga_display::show_offset(uint)
		add	sp, 6

loc_A18D::				; CODE XREF: check_user(void)+463j
		cmp	byte_2D3E7, 0
		jz	loc_A1A7
		push	3E80h
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@show_offset$qui ; vga_display::show_offset(uint)
		add	sp, 6

loc_A1A7::				; CODE XREF: check_user(void)+47Cj
		cmp	byte_2D3E8, 0
		jz	loc_A1C1
		push	7D00h
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@show_offset$qui ; vga_display::show_offset(uint)
		add	sp, 6

loc_A1C1::				; CODE XREF: check_user(void)+496j
		cmp	byte_2D3E9, 0
		jz	locret_A1DB
		push	0BB80h
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@show_offset$qui ; vga_display::show_offset(uint)
		add	sp, 6

locret_A1DB::				; CODE XREF: check_user(void)+3E2j
					; check_user(void)+4B0j
		leave
		retf
@check_user$qv	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; teleport_to(unsigned int)
@teleport_to$qui proc far		; CODE XREF: check_user(void)+BFp

var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6

		enter	6, 0
		mov	_control, 0
		les	bx, _cur_sub
		assume es:nothing
		mov	byte ptr es:[bx+3Dh], 6
		cmp	_jason_on, 0
		jnz	loc_A21E
		push	ds
		push	offset aBacksub_l ; "backsub.l"
		push	word ptr _ego+2
		push	word ptr _ego	; __int32
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8
		push	1
		push	0
		push	word ptr _ego+2
		push	word ptr _ego
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8

loc_A21E::				; CODE XREF: teleport_to(uint)+17j
		les	bx, _cur_sub
		mov	word ptr es:[bx+14h], 0
		les	bx, _cur_sub
		mov	word ptr es:[bx+16h], 0
		mov	[bp+var_6], 0Ah
		push	0Fh		; char
		push	ds
		push	offset aTport	; "tport"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah
		jmp	loc_A253
; ---------------------------------------------------------------------------

loc_A24F::				; CODE XREF: teleport_to(uint)+7Ej
		push	cs
		call	near ptr @de_doit$qv ; de_doit(void)

loc_A253::				; CODE XREF: teleport_to(uint)+70j
		mov	ax, [bp+var_6]
		dec	[bp+var_6]
		or	ax, ax
		jnz	loc_A24F
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		push	ss
		lea	ax, [bp+var_2]
		push	ax
		push	[bp+arg_0]
		nop
		push	cs
		call	near ptr @get_map_coords$quinit2 ; get_map_coords(uint,int *,int *)
		add	sp, 0Ah
		les	bx, _cur_sub
		mov	ax, es:[bx+10h]
		cwd
		sub	ax, dx
		sar	ax, 1
		sub	[bp+var_2], ax
		les	bx, _cur_sub
		mov	ax, es:[bx+12h]
		cwd
		sub	ax, dx
		sar	ax, 1
		sub	[bp+var_4], ax
		cmp	_jason_on, 0
		jnz	loc_A2E6
		cmp	_jason_present,	0
		jz	loc_A2D2
		push	word ptr _jason+2
		push	word ptr _jason
		push	word ptr _ego+2
		push	word ptr _ego
		call	@touching$qn7m_actort1 ; touching(m_actor *,m_actor *)
		add	sp, 8
		or	al, al
		jz	loc_A2D2
		push	[bp+var_4]
		push	[bp+var_2]
		push	word ptr _jason+2
		push	word ptr _jason
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8

loc_A2D2::				; CODE XREF: teleport_to(uint)+C1j
					; teleport_to(uint)+DDj
		push	ds
		push	offset aTurn_l_0 ; "turn.l"
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub ; __int32
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8

loc_A2E6::				; CODE XREF: teleport_to(uint)+BAj
		push	[bp+var_4]
		push	[bp+var_2]
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8
		mov	[bp+var_6], 5
		jmp	loc_A307
; ---------------------------------------------------------------------------

loc_A303::				; CODE XREF: teleport_to(uint)+132j
		push	cs
		call	near ptr @de_doit$qv ; de_doit(void)

loc_A307::				; CODE XREF: teleport_to(uint)+124j
		mov	ax, [bp+var_6]
		dec	[bp+var_6]
		or	ax, ax
		jnz	loc_A303
		cmp	_jason_on, 0
		jnz	loc_A33D
		les	bx, _ego
		cmp	byte ptr es:[bx+34h], 0
		jnz	loc_A329
		push	ds
		push	offset aSubr_l_1 ; "subr.l"
		jmp	loc_A32D
; ---------------------------------------------------------------------------

loc_A329::				; CODE XREF: teleport_to(uint)+144j
		push	ds
		push	offset aSubl_l_0 ; "subl.l"

loc_A32D::				; CODE XREF: teleport_to(uint)+14Aj
		push	word ptr _ego+2
		push	word ptr _ego	; __int32
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8

loc_A33D::				; CODE XREF: teleport_to(uint)+139j
		les	bx, _cur_sub
		mov	byte ptr es:[bx+3Dh], 0
		mov	_control, 1
		leave
		retf
@teleport_to$qui endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; update_boss_guage(void)
@update_boss_guage$qv proc far		; CODE XREF: de_doit(void)+194p

var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2

		enter	6, 0
		les	bx, _boss
		cmp	byte ptr es:[bx+3Dh], 2
		jnz	loc_A35F
		jmp	locret_A517
; ---------------------------------------------------------------------------

loc_A35F::				; CODE XREF: update_boss_guage(void)+Dj
		mov	al, _cur_map
		mov	ah, 0
		cmp	ax, 6
		jz	loc_A376
		cmp	ax, 0Ch
		jz	loc_A3AA
		cmp	ax, 15h
		jz	loc_A3D4
		jmp	loc_A413
; ---------------------------------------------------------------------------

loc_A376::				; CODE XREF: update_boss_guage(void)+1Aj
		les	bx, _boss
		cmp	word ptr es:[bx+14h], 0
		jz	loc_A3A3
		cmp	_boss, 0
		jz	loc_A3A3
		les	bx, _boss
		mov	ax, 5Ah	; 'Z'
		sub	ax, es:[bx+26h]
		mov	[bp+var_2], ax
		mov	[bp+var_4], 5Ah	; 'Z'
		mov	[bp+var_6], 1
		jmp	loc_A3A8
; ---------------------------------------------------------------------------

loc_A3A3::				; CODE XREF: update_boss_guage(void)+32j
					; update_boss_guage(void)+3Aj
		mov	[bp+var_6], 0

loc_A3A8::				; CODE XREF: update_boss_guage(void)+54j
		jmp	loc_A413
; ---------------------------------------------------------------------------

loc_A3AA::				; CODE XREF: update_boss_guage(void)+1Fj
		mov	[bp+var_6], 1
		mov	[bp+var_4], 3Ch	; '<'
		les	bx, _boss
		cmp	word ptr es:[bx+24h], 4
		jnz	loc_A3CC
		les	bx, _boss
		mov	ax, 3Ch	; '<'
		sub	ax, es:[bx+28h]
		jmp	loc_A3CF
; ---------------------------------------------------------------------------

loc_A3CC::				; CODE XREF: update_boss_guage(void)+70j
		mov	ax, [bp+var_4]

loc_A3CF::				; CODE XREF: update_boss_guage(void)+7Dj
		mov	[bp+var_2], ax
		jmp	loc_A413
; ---------------------------------------------------------------------------

loc_A3D4::				; CODE XREF: update_boss_guage(void)+24j
		mov	[bp+var_6], 1
		les	bx, _boss
		cmp	dword ptr es:[bx+2Ch], 0
		jz	loc_A3FE
		les	bx, _boss
		les	bx, es:[bx+2Ch]
		mov	ax, 28h	; '('
		sub	ax, es:[bx+28h]
		mov	[bp+var_2], ax
		mov	[bp+var_4], 28h	; '('
		jmp	loc_A411
; ---------------------------------------------------------------------------

loc_A3FE::				; CODE XREF: update_boss_guage(void)+96j
		les	bx, _boss
		mov	ax, 5Ah	; 'Z'
		sub	ax, es:[bx+28h]
		mov	[bp+var_2], ax
		mov	[bp+var_4], 5Ah	; 'Z'

loc_A411::				; CODE XREF: update_boss_guage(void)+AFj
		jmp	$+2
; ---------------------------------------------------------------------------

loc_A413::				; CODE XREF: update_boss_guage(void)+26j
					; update_boss_guage(void):loc_A3A8j ...
		cmp	[bp+var_6], 0
		jnz	loc_A41C
		jmp	locret_A517
; ---------------------------------------------------------------------------

loc_A41C::				; CODE XREF: update_boss_guage(void)+CAj
		cmp	[bp+var_2], 0
		jge	loc_A427
		mov	[bp+var_2], 0

loc_A427::				; CODE XREF: update_boss_guage(void)+D3j
		mov	al, _non_displayed_page
		push	ax
		push	0FFFFh
		push	1Ch
		push	8Ch ; ''
		mov	ax, [bp+var_4]
		add	ax, 0C3h ; 'Ã'
		push	ax
		push	87h ; ''
		push	0C3h ; 'Ã'
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fill_rect$qiiiiiiuc ; vga_display::fill_rect(int,int,int,int,int,int,uchar)
		add	sp, 12h
		mov	al, _non_displayed_page
		mov	ah, 0
		shl	ax, 1
		mov	bx, ax
		push	_page_offsets[bx]
		push	[bp+var_2]
		push	26h ; '&'
		push	87h ; ''
		push	0C3h ; 'Ã'
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@draw_span$qiiuciui	; vga_display::draw_span(int,int,uchar,int,uint)
		add	sp, 0Eh
		mov	al, _non_displayed_page
		mov	ah, 0
		shl	ax, 1
		mov	bx, ax
		push	_page_offsets[bx]
		push	[bp+var_2]
		push	23h ; '#'
		push	88h ; ''
		push	0C3h ; 'Ã'
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@draw_span$qiiuciui	; vga_display::draw_span(int,int,uchar,int,uint)
		add	sp, 0Eh
		mov	al, _non_displayed_page
		mov	ah, 0
		shl	ax, 1
		mov	bx, ax
		push	_page_offsets[bx]
		push	[bp+var_2]
		push	20h ; ' '
		push	89h ; ''
		push	0C3h ; 'Ã'
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@draw_span$qiiuciui	; vga_display::draw_span(int,int,uchar,int,uint)
		add	sp, 0Eh
		mov	al, _non_displayed_page
		mov	ah, 0
		shl	ax, 1
		mov	bx, ax
		push	_page_offsets[bx]
		push	[bp+var_2]
		push	23h ; '#'
		push	8Ah ; ''
		push	0C3h ; 'Ã'
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@draw_span$qiiuciui	; vga_display::draw_span(int,int,uchar,int,uint)
		add	sp, 0Eh
		mov	al, _non_displayed_page
		mov	ah, 0
		shl	ax, 1
		mov	bx, ax
		push	_page_offsets[bx]
		push	[bp+var_2]
		push	26h ; '&'
		push	8Bh ; ''
		push	0C3h ; 'Ã'
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@draw_span$qiiuciui	; vga_display::draw_span(int,int,uchar,int,uint)
		add	sp, 0Eh

locret_A517::				; CODE XREF: update_boss_guage(void)+Fj
					; update_boss_guage(void)+CCj
		leave
		retf
@update_boss_guage$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; update_air_guage(int,	int, int)
@update_air_guage$qiii proc far		; CODE XREF: start_room(uchar *)+DDp
					; check_user(void)+2CFp ...

var_2		= byte ptr -2
var_1		= byte ptr -1
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah

		enter	2, 0
		push	0
		push	0FFFFh
		push	0
		mov	ax, [bp+arg_4]
		add	ax, 5
		push	ax
		mov	ax, [bp+arg_2]
		add	ax, 96h	; ''
		push	ax
		push	[bp+arg_4]
		push	[bp+arg_2]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fill_rect$qiiiiiiuc ; vga_display::fill_rect(int,int,int,int,int,int,uchar)
		add	sp, 12h
		mov	ax, _air_supply
		add	ax, [bp+arg_0]
		cmp	ax, 95h	; ''
		jl	loc_A55A
		mov	_air_supply, 95h ; ''
		jmp	loc_A571
; ---------------------------------------------------------------------------

loc_A55A::				; CODE XREF: update_air_guage(int,int,int)+37j
		mov	ax, _air_supply
		add	ax, [bp+arg_0]
		jge	loc_A56A
		mov	_air_supply, 0
		jmp	loc_A571
; ---------------------------------------------------------------------------

loc_A56A::				; CODE XREF: update_air_guage(int,int,int)+47j
		mov	ax, [bp+arg_0]
		add	_air_supply, ax

loc_A571::				; CODE XREF: update_air_guage(int,int,int)+3Fj
					; update_air_guage(int,int,int)+4Fj
		cmp	_air_supply, 32h ; '2'
		jge	loc_A57E
		mov	[bp+var_1], 20h	; ' '
		jmp	loc_A582
; ---------------------------------------------------------------------------

loc_A57E::				; CODE XREF: update_air_guage(int,int,int)+5Dj
		mov	[bp+var_1], 60h	; '`'

loc_A582::				; CODE XREF: update_air_guage(int,int,int)+63j
		cmp	_air_supply, 2
		jge	loc_A58C
		jmp	loc_A654
; ---------------------------------------------------------------------------

loc_A58C::				; CODE XREF: update_air_guage(int,int,int)+6Ej
		mov	al, [bp+var_1]
		add	al, 8
		mov	[bp+var_2], al
		push	0
		mov	ax, _air_supply
		add	ax, 0FFFEh
		push	ax
		mov	al, [bp+var_2]
		push	ax
		push	[bp+arg_4]
		mov	ax, [bp+arg_2]
		inc	ax
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@draw_span$qiiuciui	; vga_display::draw_span(int,int,uchar,int,uint)
		add	sp, 0Eh
		push	0
		mov	ax, _air_supply
		add	ax, 0FFFEh
		push	ax
		mov	al, [bp+var_2]
		push	ax
		mov	ax, [bp+arg_4]
		add	ax, 4
		push	ax
		mov	ax, [bp+arg_2]
		inc	ax
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@draw_span$qiiuciui	; vga_display::draw_span(int,int,uchar,int,uint)
		add	sp, 0Eh
		mov	al, [bp+var_1]
		add	al, 4
		mov	[bp+var_2], al
		push	0
		push	_air_supply
		mov	al, [bp+var_2]
		push	ax
		mov	ax, [bp+arg_4]
		inc	ax
		push	ax
		push	[bp+arg_2]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@draw_span$qiiuciui	; vga_display::draw_span(int,int,uchar,int,uint)
		add	sp, 0Eh
		push	0
		push	_air_supply
		mov	al, [bp+var_2]
		push	ax
		mov	ax, [bp+arg_4]
		add	ax, 3
		push	ax
		push	[bp+arg_2]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@draw_span$qiiuciui	; vga_display::draw_span(int,int,uchar,int,uint)
		add	sp, 0Eh
		push	0
		push	_air_supply
		mov	al, [bp+var_1]
		push	ax
		mov	ax, [bp+arg_4]
		add	ax, 2
		push	ax
		push	[bp+arg_2]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@draw_span$qiiuciui	; vga_display::draw_span(int,int,uchar,int,uint)
		add	sp, 0Eh

loc_A654::				; CODE XREF: update_air_guage(int,int,int)+70j
		push	0Fh
		mov	ax, [bp+arg_4]
		inc	ax
		push	ax
		mov	ax, [bp+arg_2]
		add	ax, 3
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@set_pix$qiiuc ; vga_display::set_pix(int,int,uchar)
		add	sp, 0Ah
		push	140h
		push	140h
		push	word_2A700
		push	_page_offsets
		push	0A7h ; '§'
		push	68h ; 'h'
		push	0ACh ; '¬'
		push	0FEh ; 'þ'
		push	0A7h ; '§'
		push	68h ; 'h'
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@copy_bits$qiiiiiiuiuiuiui ; vga_display::copy_bits(int,int,int,int,int,int,uint,uint,uint,uint)
		add	sp, 18h
		leave
		retf
@update_air_guage$qiii endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; update_shld_guage(int, int, int)
@update_shld_guage$qiii	proc far	; CODE XREF: start_room(uchar *)+CEp
					; check_user(void)+2E5p ...

var_2		= byte ptr -2
var_1		= byte ptr -1
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah

		enter	2, 0
		push	0
		push	0FFFFh
		push	0
		mov	ax, [bp+arg_4]
		add	ax, 5
		push	ax
		mov	ax, [bp+arg_2]
		add	ax, 96h	; ''
		push	ax
		push	[bp+arg_4]
		push	[bp+arg_2]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fill_rect$qiiiiiiuc ; vga_display::fill_rect(int,int,int,int,int,int,uchar)
		add	sp, 12h
		mov	ax, _shld_supply
		add	ax, [bp+arg_0]
		cmp	ax, 95h	; ''
		jl	loc_A6E3
		mov	_shld_supply, 95h ; ''
		jmp	loc_A6FA
; ---------------------------------------------------------------------------

loc_A6E3::				; CODE XREF: update_shld_guage(int,int,int)+37j
		mov	ax, _shld_supply
		add	ax, [bp+arg_0]
		jge	loc_A6F3
		mov	_shld_supply, 0
		jmp	loc_A6FA
; ---------------------------------------------------------------------------

loc_A6F3::				; CODE XREF: update_shld_guage(int,int,int)+47j
		mov	ax, [bp+arg_0]
		add	_shld_supply, ax

loc_A6FA::				; CODE XREF: update_shld_guage(int,int,int)+3Fj
					; update_shld_guage(int,int,int)+4Fj
		cmp	_shld_supply, 32h ; '2'
		jge	loc_A707
		mov	[bp+var_1], 20h	; ' '
		jmp	loc_A70B
; ---------------------------------------------------------------------------

loc_A707::				; CODE XREF: update_shld_guage(int,int,int)+5Dj
		mov	[bp+var_1], 91h	; ''

loc_A70B::				; CODE XREF: update_shld_guage(int,int,int)+63j
		cmp	_shld_supply, 2
		jge	loc_A715
		jmp	loc_A7DD
; ---------------------------------------------------------------------------

loc_A715::				; CODE XREF: update_shld_guage(int,int,int)+6Ej
		mov	al, [bp+var_1]
		add	al, 8
		mov	[bp+var_2], al
		push	0
		mov	ax, _shld_supply
		add	ax, 0FFFEh
		push	ax
		mov	al, [bp+var_2]
		push	ax
		push	[bp+arg_4]
		mov	ax, [bp+arg_2]
		inc	ax
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@draw_span$qiiuciui	; vga_display::draw_span(int,int,uchar,int,uint)
		add	sp, 0Eh
		push	0
		mov	ax, _shld_supply
		add	ax, 0FFFEh
		push	ax
		mov	al, [bp+var_2]
		push	ax
		mov	ax, [bp+arg_4]
		add	ax, 4
		push	ax
		mov	ax, [bp+arg_2]
		inc	ax
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@draw_span$qiiuciui	; vga_display::draw_span(int,int,uchar,int,uint)
		add	sp, 0Eh
		mov	al, [bp+var_1]
		add	al, 4
		mov	[bp+var_2], al
		push	0
		push	_shld_supply
		mov	al, [bp+var_2]
		push	ax
		mov	ax, [bp+arg_4]
		inc	ax
		push	ax
		push	[bp+arg_2]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@draw_span$qiiuciui	; vga_display::draw_span(int,int,uchar,int,uint)
		add	sp, 0Eh
		push	0
		push	_shld_supply
		mov	al, [bp+var_2]
		push	ax
		mov	ax, [bp+arg_4]
		add	ax, 3
		push	ax
		push	[bp+arg_2]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@draw_span$qiiuciui	; vga_display::draw_span(int,int,uchar,int,uint)
		add	sp, 0Eh

loc_A7B9::
		push	0
		push	_shld_supply
		mov	al, [bp+var_1]
		push	ax
		mov	ax, [bp+arg_4]
		add	ax, 2
		push	ax
		push	[bp+arg_2]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@draw_span$qiiuciui	; vga_display::draw_span(int,int,uchar,int,uint)
		add	sp, 0Eh

loc_A7DD::				; CODE XREF: update_shld_guage(int,int,int)+70j
		push	0Fh
		mov	ax, [bp+arg_4]
		inc	ax
		push	ax
		mov	ax, [bp+arg_2]
		add	ax, 3
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@set_pix$qiiuc ; vga_display::set_pix(int,int,uchar)
		add	sp, 0Ah
		push	140h
		push	140h
		push	word_2A700
		push	_page_offsets
		push	0B3h ; '³'
		push	68h ; 'h'
		push	0B8h ; '¸'
		push	0FEh ; 'þ'
		push	0B3h ; '³'
		push	68h ; 'h'
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@copy_bits$qiiiiiiuiuiuiui ; vga_display::copy_bits(int,int,int,int,int,int,uint,uint,uint,uint)
		add	sp, 18h
		leave
		retf
@update_shld_guage$qiii	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; update_men(void)
@update_men$qv	proc far		; CODE XREF: start_room(uchar *)+F3p
					; kill_ego(int,int)+2A9p ...
		push	bp
		mov	bp, sp
		push	0
		push	0FFFFh
		push	0
		push	0AFh ; '¯'
		push	138h
		push	0A6h ; '¦'
		push	127h
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fill_rect$qiiiiiiuc ; vga_display::fill_rect(int,int,int,int,int,int,uchar)
		add	sp, 12h
		push	3		; char
		push	68h ; 'h'       ; char
		push	0Ah		; radix
		push	ds
		push	offset _tmp	; string
		mov	al, _men
		mov	ah, 0
		movsx	eax, ax
		push	eax		; value
		call	_ltoa
		add	sp, 0Ah
		push	dx
		push	ax		; s
		push	0A8h ; '¨'      ; int
		push	128h		; int
		call	@vga_text$qiinucucuc ; vga_text(int,int,uchar *,uchar,uchar)
		assume es:seg2608
		add	sp, 0Ch
		push	140h
		push	140h
		push	word_2A700
		push	_page_offsets
		push	0A7h ; '§'
		push	128h
		push	0AFh ; '¯'
		push	138h
		push	0A7h ; '§'
		push	128h
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@copy_bits$qiiiiiiuiuiuiui ; vga_display::copy_bits(int,int,int,int,int,int,uint,uint,uint,uint)
		assume es:nothing
		add	sp, 18h
		pop	bp
		retf
@update_men$qv	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; update_score(int, int)
@update_score$qii proc far		; CODE XREF: start_room(uchar *)+EBp
					; de_doit(void)+36Bp ...

arg_0		= word ptr  6
arg_2		= word ptr  8

		push	bp
		mov	bp, sp
		push	0
		push	0FFFFh
		push	0
		mov	ax, [bp+arg_2]
		add	ax, 8
		push	ax
		mov	ax, [bp+arg_0]
		add	ax, 30h	; '0'
		push	ax
		mov	ax, [bp+arg_2]
		dec	ax
		push	ax
		mov	ax, [bp+arg_0]
		dec	ax
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fill_rect$qiiiiiiuc ; vga_display::fill_rect(int,int,int,int,int,int,uchar)
		add	sp, 12h
		push	0Ah		; radix
		push	ds
		push	offset _tmp2	; string
		push	dword ptr [_score]	; value
		call	_ltoa
		add	sp, 0Ah
		push	dx
		push	ax		; src
		push	ds
		push	offset _tmp	; dest
		call	_strcpy
		assume es:seg2608
		add	sp, 8
		push	3		; char
		push	68h ; 'h'       ; char
		push	ds
		push	offset _tmp	; s
		push	[bp+arg_2]	; int
		push	ds
		push	offset _tmp	; s
		call	_strlen
		add	sp, 4
		shl	ax, 3
		mov	dx, 30h	; '0'
		sub	dx, ax
		mov	ax, [bp+arg_0]
		add	ax, dx
		push	ax		; int
		call	@vga_text$qiinucucuc ; vga_text(int,int,uchar *,uchar,uchar)
		add	sp, 0Ch
		push	140h
		push	140h
		mov	al, _non_displayed_page
		cmp	al, _displayed_page
		jz	loc_A942
		mov	ax, 1
		jmp	loc_A944
; ---------------------------------------------------------------------------

loc_A942::				; CODE XREF: update_score(int,int)+8Cj
		xor	ax, ax

loc_A944::				; CODE XREF: update_score(int,int)+91j
		shl	ax, 1
		mov	bx, ax
		push	_page_offsets[bx]
		push	_page_offsets
		push	[bp+arg_2]
		push	[bp+arg_0]
		mov	ax, [bp+arg_2]
		add	ax, 8
		push	ax
		mov	ax, [bp+arg_0]
		add	ax, 31h	; '1'
		push	ax
		push	[bp+arg_2]
		push	[bp+arg_0]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@copy_bits$qiiiiiiuiuiuiui ; vga_display::copy_bits(int,int,int,int,int,int,uint,uint,uint,uint)
		assume es:nothing
		add	sp, 18h
		pop	bp
		retf
@update_score$qii endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; update_jason_guage(void)
@update_jason_guage$qv proc far		; CODE XREF: start_room(uchar *)+39Dp
					; kill_jason(void)+5Dp	...

var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2

		enter	0Ah, 0
		push	0
		push	0
		push	word_2B728
		push	_jguage_underbits
		push	0ADh ; '­'
		push	2Ch ; ','
		push	0A7h ; '§'
		push	0Ch
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@put_bits$qiiiinucuiui ; vga_display::put_bits(int,int,int,int,uchar *,uint,uint)
		assume es:nothing
		add	sp, 14h
		mov	al, _jason_power
		mov	ah, 0
		mov	bx, 3
		cwd
		idiv	bx
		dec	ax
		mov	[bp+var_2], ax
		cmp	_jason_present,	0
		jnz	short loc_A9BF
		jmp	loc_AACC
; ---------------------------------------------------------------------------

loc_A9BF::				; CODE XREF: update_jason_guage(void)+3Ej
		cmp	[bp+var_2], 1
		jg	short loc_A9C8
		jmp	loc_AACC
; ---------------------------------------------------------------------------

loc_A9C8::				; CODE XREF: update_jason_guage(void)+47j
		mov	al, _jason_power
		mov	ah, 0
		mov	bx, 3
		cwd
		idiv	bx
		dec	ax
		mov	[bp+var_2], ax
		cmp	[bp+var_2], 8
		jle	loc_A9E4
		mov	[bp+var_4], 64h	; 'd'
		jmp	loc_A9E9
; ---------------------------------------------------------------------------

loc_A9E4::				; CODE XREF: update_jason_guage(void)+5Fj
		mov	[bp+var_4], 23h	; '#'

loc_A9E9::				; CODE XREF: update_jason_guage(void)+66j
		mov	ax, [bp+var_4]
		add	ax, 0FFFDh
		mov	[bp+var_6], ax
		mov	ax, [bp+var_4]
		add	ax, 3
		mov	[bp+var_8], ax
		push	0
		push	0FFFFh
		push	[bp+var_4]
		push	0ACh ; '¬'
		mov	ax, [bp+var_2]
		add	ax, 0Ch
		push	ax
		push	0A7h ; '§'
		push	0Ch
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fill_rect$qiiiiiiuc ; vga_display::fill_rect(int,int,int,int,int,int,uchar)
		add	sp, 12h
		push	0
		push	[bp+var_2]
		mov	al, byte ptr [bp+var_6]
		push	ax
		push	0A7h ; '§'
		push	0Ch
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@draw_span$qiiuciui	; vga_display::draw_span(int,int,uchar,int,uint)
		add	sp, 0Eh
		push	0
		push	[bp+var_2]
		mov	al, byte ptr [bp+var_8]
		push	ax
		push	0ACh ; '¬'
		push	0Ch
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@draw_span$qiiuciui	; vga_display::draw_span(int,int,uchar,int,uint)
		add	sp, 0Eh
		mov	[bp+var_A], 0
		jmp	loc_AAC6
; ---------------------------------------------------------------------------

loc_AA64::				; CODE XREF: update_jason_guage(void)+14Ej
		mov	al, byte ptr [bp+var_6]
		push	ax
		mov	ax, [bp+var_A]
		add	ax, 0A7h ; '§'
		push	ax
		push	0Ch
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@set_pix$qiiuc ; vga_display::set_pix(int,int,uchar)
		add	sp, 0Ah
		mov	al, byte ptr [bp+var_8]
		push	ax
		mov	ax, [bp+var_A]
		add	ax, 0A7h ; '§'
		push	ax
		mov	ax, [bp+var_2]
		add	ax, 0Bh
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@set_pix$qiiuc ; vga_display::set_pix(int,int,uchar)
		add	sp, 0Ah
		push	1Dh
		mov	ax, [bp+var_A]
		add	ax, 0A7h ; '§'
		push	ax
		mov	ax, [bp+var_2]
		add	ax, 0Ch
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@set_pix$qiiuc ; vga_display::set_pix(int,int,uchar)
		add	sp, 0Ah
		inc	[bp+var_A]

loc_AAC6::				; CODE XREF: update_jason_guage(void)+E6j
		cmp	[bp+var_A], 6
		jl	loc_AA64

loc_AACC::				; CODE XREF: update_jason_guage(void)+40j
					; update_jason_guage(void)+49j
		push	140h
		push	140h
		push	word_2A700
		push	_page_offsets
		push	0A7h ; '§'
		push	0Ch
		push	0ADh ; '­'
		push	2Ch ; ','
		push	0A7h ; '§'
		push	0Ch
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@copy_bits$qiiiiiiuiuiuiui ; vga_display::copy_bits(int,int,int,int,int,int,uint,uint,uint,uint)
		add	sp, 18h
		leave
		retf
@update_jason_guage$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; update_key_guage(void)
@update_key_guage$qv proc far		; CODE XREF: start_room(uchar *)+FDp
					; seg0b2c:161EP
		push	bp
		mov	bp, sp
		push	0
		push	0FFFFh
		push	0
		push	0A1h ; '¡'
		push	0F4h ; 'ô'
		push	95h ; ''
		push	0EAh ; 'ê'
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fill_rect$qiiiiiiuc ; vga_display::fill_rect(int,int,int,int,int,int,uchar)
		assume es:nothing
		add	sp, 12h
		cmp	_got_key, 0
		jz	loc_AB3D
		push	0		; int
		push	0		; char
		push	95h ; ''       ; int
		push	0EAh ; 'ê'      ; int
		push	ds
		push	offset aKey_l	; "key.l"
		nop
		push	cs
		call	near ptr @show_loop$qnuciiucui ; show_loop(uchar *,int,int,uchar,uint)
		add	sp, 0Ch

loc_AB3D::				; CODE XREF: update_key_guage(void)+2Aj
		push	140h
		push	140h
		push	word_2A700
		push	_page_offsets
		push	95h ; ''
		push	0EAh ; 'ê'
		push	0A1h ; '¡'
		push	0F4h ; 'ô'
		push	95h ; ''
		push	0EAh ; 'ê'
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@copy_bits$qiiiiiiuiuiuiui ; vga_display::copy_bits(int,int,int,int,int,int,uint,uint,uint,uint)
		add	sp, 18h
		pop	bp
		retf
@update_key_guage$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; update_gun(void)
@update_gun$qv	proc far		; CODE XREF: start_room(uchar *)+F8p
					; seg0b2c:0D55P

var_E		= dword	ptr -0Eh
s2		= dword	ptr -0Ah
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2

		enter	0Eh, 0
		les	bx, _display
		assume es:nothing
		mov	byte ptr es:[bx+7], 1
		mov	[bp+var_6], 0
		jmp	loc_AC96
; ---------------------------------------------------------------------------

loc_AB84::				; CODE XREF: update_gun(void)+131j
		mov	bx, [bp+var_6]
		shl	bx, 1
		mov	al, [bx+94h]
		mov	ah, 0
		mov	[bp+var_2], ax
		mov	bx, [bp+var_6]
		shl	bx, 1
		mov	al, [bx+95h]
		mov	ah, 0
		mov	[bp+var_4], ax
		mov	bx, [bp+var_6]
		cmp	bx, 3		; switch 4 cases
		ja	loc_ABD7	; jumptable 000189CA default case
		shl	bx, 1
		jmp	cs:off_ACAE[bx]	; switch jump
; ---------------------------------------------------------------------------

loc_ABAF::				; CODE XREF: update_gun(void)+3Bj
					; DATA XREF: seg03f9:off_ACAEo
		mov	word ptr [bp+s2+2], ds ; jumptable 000189CA case 0
		mov	word ptr [bp+s2], offset aGun_1_l_0 ; "gun_1.l"
		jmp	loc_ABE7
; ---------------------------------------------------------------------------

loc_ABB9::				; CODE XREF: update_gun(void)+3Bj
					; DATA XREF: seg03f9:off_ACAEo
		mov	word ptr [bp+amandich+2], ds ; jumptable 000189CA case 1
		mov	word ptr [bp+s2], offset aGun_2_l_0 ; "gun_2.l"
		jmp	loc_ABE7
; ---------------------------------------------------------------------------

loc_ABC3::				; CODE XREF: update_gun(void)+3Bj
					; DATA XREF: seg03f9:off_ACAEo
		mov	word ptr [bp+s2+2], ds ; jumptable 000189CA case 2
		mov	word ptr [bp+s2], offset aGun_3_l_0 ; "gun_3.l"
		jmp	loc_ABE7
; ---------------------------------------------------------------------------

loc_ABCD::				; CODE XREF: update_gun(void)+3Bj
					; DATA XREF: seg03f9:off_ACAEo
		mov	word ptr [bp+s2+2], ds ; jumptable 000189CA case 3
		mov	word ptr [bp+s2], offset aGun_4_l_0 ; "gun_4.l"
		jmp	loc_ABE7
; ---------------------------------------------------------------------------

loc_ABD7::				; CODE XREF: update_gun(void)+37j
		push	0		; jumptable 000189CA default case
		push	0
		push	ds
		push	offset aErrorUpdatingG ; "Error	updating gun."
		call	@terminate$qnuct1 ; terminate(uchar *,uchar *)
; ---------------------------------------------------------------------------
		add	sp, 8

loc_ABE7::				; CODE XREF: update_gun(void)+48j
					; update_gun(void)+52j	...
		push	word ptr [bp+s2+2]
		push	word ptr [bp+s2] ; s2
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@get_loop$qnuc ; game_manager::get_loop(uchar *)
		add	sp, 8
		mov	word ptr [bp+var_E+2], dx
		mov	word ptr [bp+var_E], ax
		push	0
		push	0
		push	0
		les	bx, [bp+var_E]
		assume es:nothing
		les	bx, es:[bx+6]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx]
		les	bx, [bp+var_E]
		les	bx, es:[bx+6]
		mov	ax, [bp+var_4]
		add	ax, es:[bx+4]
		push	ax
		les	bx, [bp+var_E]
		les	bx, es:[bx+6]
		mov	ax, [bp+var_2]
		add	ax, es:[bx+6]
		push	ax
		push	[bp+var_4]
		push	[bp+var_2]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@put_bits_masked$qiiiinucuiuiuc ; vga_display::put_bits_masked(int,int,int,int,uchar *,uint,uint,uchar)
		add	sp, 16h
		push	140h
		push	140h
		push	word_2A700
		push	_page_offsets
		push	[bp+var_4]
		push	[bp+var_2]
		les	bx, [bp+var_E]
		les	bx, es:[bx+6]
		mov	ax, [bp+var_4]
		add	ax, es:[bx+4]
		push	ax
		les	bx, [bp+var_E]
		les	bx, es:[bx+6]
		mov	ax, [bp+var_2]
		add	ax, es:[bx+6]
		push	ax
		push	[bp+var_4]
		push	[bp+var_2]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@copy_bits$qiiiiiiuiuiuiui ; vga_display::copy_bits(int,int,int,int,int,int,uint,uint,uint,uint)
		add	sp, 18h
		inc	[bp+var_6]
		assume es:nothing

loc_AC96::				; CODE XREF: update_gun(void)+12j
		mov	al, _gun_count
		mov	ah, 0
		cmp	ax, [bp+var_6]
		jle	loc_ACA3
		jmp	loc_AB84
; ---------------------------------------------------------------------------

loc_ACA3::				; CODE XREF: update_gun(void)+12Fj
		les	bx, _display
		mov	byte ptr es:[bx+7], 0
		leave
		retf
@update_gun$qv	endp

; ---------------------------------------------------------------------------
off_ACAE	dw offset loc_ABAF	; DATA XREF: update_gun(void)+3Br
		dw offset loc_ABB9	; jump table for switch	statement
		dw offset loc_ABC3
		dw offset loc_ABCD
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; activate_menu_bar(void)
@activate_menu_bar$qv proc far		; CODE XREF: check_user(void)+27p
					; start_title_loop(void)+126p
		push	bp
		mov	bp, sp
		push	1Dh
		push	18h
		push	2
		push	30h ; '0'
		call	@i_set_text$qucucucuc ;	i_set_text(uchar,uchar,uchar,uchar)
		assume es:nothing
		add	sp, 8
		cmp	_game_in_progress, 0
		jz	loc_AD16
		push	1		; char
		push	ds
		push	offset aRunBenchmark ; "Run benchmark"
		push	ds
		push	offset aDebug_	; "Debug"
		push	word ptr _the_menu_bar+2
		push	word ptr _the_menu_bar ; __int32
		call	@menu_bar@toggle_item$qnuct1uc ; menu_bar::toggle_item(uchar *,uchar *,uchar)
		add	sp, 0Eh
		push	1		; char
		push	ds
		push	offset aResume	; "Resume"
		push	ds
		push	offset aGame	; "Game"
		push	word ptr _the_menu_bar+2
		push	word ptr _the_menu_bar ; __int32
		call	@menu_bar@toggle_item$qnuct1uc ; menu_bar::toggle_item(uchar *,uchar *,uchar)
		add	sp, 0Eh
		push	word_2B8BC
		push	_the_game
		call	@game_manager@pause_song$qv ; game_manager::pause_song(void)
		add	sp, 4
		jmp	loc_AD4A
; ---------------------------------------------------------------------------

loc_AD16::				; CODE XREF: activate_menu_bar(void)+18j
		push	0		; char
		push	ds
		push	offset aRunBenchmark_0 ; "Run benchmark"
		push	ds
		push	offset aDebug_2	; "Debug"
		push	word ptr _the_menu_bar+2
		push	word ptr _the_menu_bar ; __int32
		call	@menu_bar@toggle_item$qnuct1uc ; menu_bar::toggle_item(uchar *,uchar *,uchar)
		assume es:nothing
		add	sp, 0Eh
		push	0		; char
		push	ds
		push	offset aResume_0 ; "Resume"
		push	ds
		push	offset aGame_0	; "Game"
		push	word ptr _the_menu_bar+2
		push	word ptr _the_menu_bar ; __int32
		call	@menu_bar@toggle_item$qnuct1uc ; menu_bar::toggle_item(uchar *,uchar *,uchar)
		assume es:nothing
		add	sp, 0Eh

loc_AD4A::				; CODE XREF: activate_menu_bar(void)+5Ej
		push	word ptr _the_menu_bar+2
		push	word ptr _the_menu_bar
		les	bx, _the_menu_bar
		assume es:nothing
		mov	bx, es:[bx]
		call	dword ptr [bx]
		add	sp, 4
		cmp	_debug_mode, 1
		jnz	loc_ADA3
		push	0Ah		; radix
		push	ds
		push	offset _tmp2	; string
		call	_farcoreleft
		push	dx
		push	ax		; value
		call	_ltoa
		add	sp, 0Ah
		push	dx
		push	ax		; src
		push	ds
		push	offset _tmp	; dest
		call	_strcpy
		add	sp, 8
		push	0		; char
		push	ds
		push	offset _tmp	; s
		push	1		; int
		push	104h		; int
		push	word ptr _display+2 ; int
		push	word ptr _display ; int
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh

loc_ADA3::				; CODE XREF: activate_menu_bar(void)+ADj
		push	word ptr _mouse+2
		push	word ptr _mouse
		call	@ms_mouse@show$qv ; ms_mouse::show(void)
		assume es:nothing
		add	sp, 4
		jmp	$+2
; ---------------------------------------------------------------------------

loc_ADB5::				; CODE XREF: activate_menu_bar(void)+FDj
					; activate_menu_bar(void)+104j
		cmp	byte_2D3AC, 0
		jnz	loc_ADB5
		mov	_resume, 0
		les	bx, _the_menu_bar
		assume es:nothing
		mov	word ptr es:[bx+16h], 1
		jmp	loc_ADD2
; ---------------------------------------------------------------------------

loc_ADCD::				; CODE XREF: activate_menu_bar(void)+12Cj
		call	@i_poll_interface$qv ; i_poll_interface(void)

loc_ADD2::				; CODE XREF: activate_menu_bar(void)+115j
		mov	al, byte_2D3AC
		mov	ah, 0
		or	ax, ax
		jnz	loc_ADE4
		mov	al, _resume
		mov	ah, 0
		or	ax, ax
		jz	loc_ADCD

loc_ADE4::				; CODE XREF: activate_menu_bar(void)+123j
		push	word ptr _mouse+2
		push	word ptr _mouse
		call	@ms_mouse@hide$qv ; ms_mouse::hide(void)
		assume es:nothing
		add	sp, 4
		push	word ptr _the_menu_bar+2
		push	word ptr _the_menu_bar
		les	bx, _the_menu_bar
		assume es:nothing
		mov	bx, es:[bx]
		call	dword ptr [bx+4]
		add	sp, 4
		jmp	$+2
; ---------------------------------------------------------------------------

loc_AE0B::				; CODE XREF: activate_menu_bar(void)+153j
					; activate_menu_bar(void)+15Aj
		cmp	byte_2D3AC, 0
		jnz	loc_AE0B
		cmp	_game_in_progress, 0
		jz	loc_AE34
		les	bx, dword ptr _the_game
		assume es:nothing
		cmp	byte ptr es:[bx+1Ch], 1
		jnz	loc_AE34
		push	word_2B8BC
		push	_the_game
		call	@game_manager@continue_song$qv ; game_manager::continue_song(void)
		add	sp, 4
		assume es:nothing

loc_AE34::				; CODE XREF: activate_menu_bar(void)+161j
					; activate_menu_bar(void)+16Cj
		pop	bp
		retf
@activate_menu_bar$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; check_guages(void)
@check_guages$qv proc far		; CODE XREF: de_doit(void)+22Bp

var_4		= word ptr -4
var_2		= word ptr -2

		enter	4, 0
		mov	al, _air_count
		inc	_air_count
		cmp	al, _air_speed
		jz	loc_AE4A
		jmp	loc_AF0B
; ---------------------------------------------------------------------------
		assume es:nothing

loc_AE4A::				; CODE XREF: check_guages(void)+Fj
		push	0A7h ; '§'
		push	68h ; 'h'
		push	0FFFDh
		push	cs
		call	near ptr @update_air_guage$qiii	; update_air_guage(int,int,int)
		assume es:nothing
		add	sp, 6
		mov	_air_count, 0
		cmp	_air_supply, 28h ; '('
		jge	loc_AE99
		les	bx, dword ptr _the_game
		assume es:nothing
		mov	al, es:[bx+0Ah]
		mov	ah, 0
		or	ax, ax
		jnz	loc_AE99
		les	bx, dword ptr _the_game
		inc	byte ptr es:[bx+0Ah]
		push	0Fh		; char
		push	ds
		push	offset aPing	; "ping"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah
		push	5
		push	cs
		call	near ptr @post_message$quc ; post_message(uchar)
		pop	cx
		jmp	loc_AEB4
; ---------------------------------------------------------------------------
		assume es:nothing

loc_AE99::				; CODE XREF: check_guages(void)+2Cj
					; check_guages(void)+3Aj
		les	bx, dword ptr _the_game
		assume es:nothing
		cmp	byte ptr es:[bx+0Ah], 0
		jz	loc_AEB4
		cmp	_air_supply, 40
		jle	loc_AEB4
		les	bx, dword ptr _the_game
		assume es:nothing
		mov	byte ptr es:[bx+0Ah], 0
		assume es:nothing

loc_AEB4::				; CODE XREF: check_guages(void)+61j
					; check_guages(void)+6Cj ...
		cmp	_shld_supply, 40
		jge	loc_AEF0
		les	bx, dword ptr _the_game
		mov	al, es:[bx+0Bh]
		mov	ah, 0
		or	ax, ax
		jnz	loc_AEF0
		les	bx, dword ptr _the_game
		inc	byte ptr es:[bx+0Bh]
		push	0Fh		; char
		push	ds
		push	offset aPing_0	; "ping"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah
		push	9
		push	cs
		call	near ptr @post_message$quc ; post_message(uchar)
		assume es:nothing
		pop	cx
		jmp	loc_AF0B
; ---------------------------------------------------------------------------
		assume es:nothing

loc_AEF0::				; CODE XREF: check_guages(void)+83j
					; check_guages(void)+91j
		les	bx, dword ptr _the_game
		cmp	byte ptr es:[bx+0Bh], 0
		jz	loc_AF0B
		cmp	_shld_supply, 40
		jle	loc_AF0B
		les	bx, dword ptr _the_game
		assume es:nothing
		mov	byte ptr es:[bx+0Bh], 0
		assume es:nothing

loc_AF0B::				; CODE XREF: check_guages(void)+11j
					; check_guages(void)+B8j ...
		les	bx, _ego
		assume es:nothing
		cmp	byte ptr es:[bx+3Dh], 2
		jnz	loc_AF23
		push	0
		push	0
		push	cs
		call	near ptr @kill_ego$qii ; kill_ego(int,int)
		add	sp, 4
		jmp	loc_AF41
; ---------------------------------------------------------------------------

loc_AF23::				; CODE XREF: check_guages(void)+DEj
		cmp	_air_supply, 0
		jz	loc_AF31
		cmp	_shld_supply, 0
		jnz	loc_AF41

loc_AF31::				; CODE XREF: check_guages(void)+F2j
		mov	_death_type, 0
		push	0
		push	0
		push	cs
		call	near ptr @kill_ego$qii ; kill_ego(int,int)
		add	sp, 4

loc_AF41::				; CODE XREF: check_guages(void)+EBj
					; check_guages(void)+F9j
		cmp	_jason_present,	0
		jnz	loc_AF4B
		jmp	locret_B01B
; ---------------------------------------------------------------------------

loc_AF4B::				; CODE XREF: check_guages(void)+110j
		mov	al, _jason_count
		inc	_jason_count
		cmp	al, 14h
		jz	loc_AF59
		jmp	locret_B01B
; ---------------------------------------------------------------------------

loc_AF59::				; CODE XREF: check_guages(void)+11Ej
		mov	_jason_count, 0
		push	cs
		call	near ptr @update_jason_guage$qv	; update_jason_guage(void)
		assume es:nothing
		les	bx, _ego
		assume es:nothing
		mov	ax, es:[bx+8]
		les	bx, _jason
		assume es:nothing
		sub	ax, es:[bx+8]
		push	ax
		nop
		push	cs
		call	near ptr @abs$qi ; abs(int)
		pop	cx
		mov	[bp+var_2], ax
		les	bx, _ego
		assume es:nothing
		mov	ax, es:[bx+0Ah]
		les	bx, _jason
		assume es:nothing
		sub	ax, es:[bx+0Ah]
		push	ax
		nop
		push	cs
		call	near ptr @abs$qi ; abs(int)
		pop	cx
		mov	[bp+var_4], ax
		cmp	[bp+var_2], 1Eh
		ja	loc_AFA2
		cmp	[bp+var_4], 0Ah
		jbe	loc_B009

loc_AFA2::				; CODE XREF: check_guages(void)+164j
		cmp	_jason_power, 28h ; '('
		jnb	loc_AFDE
		les	bx, dword ptr _the_game
		assume es:nothing
		mov	al, es:[bx+0Ch]
		mov	ah, 0
		or	ax, ax
		jnz	loc_AFDC
		les	bx, dword ptr _the_game
		inc	byte ptr es:[bx+0Ch]
		push	0Fh		; char
		push	ds
		push	offset aPing_1	; "ping"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah
		push	8
		push	cs
		call	near ptr @post_message$quc ; post_message(uchar)
		pop	cx

loc_AFDC::				; CODE XREF: check_guages(void)+17Fj
		jmp	loc_AFF2
; ---------------------------------------------------------------------------
		assume es:nothing

loc_AFDE::				; CODE XREF: check_guages(void)+171j
		les	bx, dword ptr _the_game
		assume es:nothing
		cmp	byte ptr es:[bx+0Ch], 0
		jz	loc_AFF2
		les	bx, dword ptr _the_game
		assume es:nothing
		mov	byte ptr es:[bx+0Ch], 0
		assume es:nothing

loc_AFF2::				; CODE XREF: check_guages(void):loc_AFDCj
					; check_guages(void)+1B1j
		cmp	_jason_power, 0
		jz	loc_B003
		mov	al, _jason_power
		add	al, 0FEh ; 'þ'
		mov	_jason_power, al
		jmp	loc_B007
; ---------------------------------------------------------------------------

loc_B003::				; CODE XREF: check_guages(void)+1C1j
		push	cs
		call	near ptr @kill_jason$qv	; kill_jason(void)

loc_B007::				; CODE XREF: check_guages(void)+1CBj
		jmp	locret_B01B
; ---------------------------------------------------------------------------
		assume es:nothing

loc_B009::				; CODE XREF: check_guages(void)+16Aj
		cmp	[bp+var_2], 1Eh
		ja	locret_B01B
		cmp	[bp+var_4], 0Ah
		ja	locret_B01B
		mov	al, _maximum_jason_power
		mov	_jason_power, al
		assume es:nothing

locret_B01B::				; CODE XREF: check_guages(void)+112j
					; check_guages(void)+120j ...
		leave
		retf
@check_guages$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; get_map_coords(unsigned int, int *, int *)
@get_map_coords$quinit2	proc far	; CODE XREF: add_map_item(uint,uint)+3Dp
					; add_barrel(uint,uint)+B0p ...

arg_0		= word ptr  6
arg_2		= dword	ptr  8
arg_6		= dword	ptr  0Ch

		push	bp
		mov	bp, sp
		les	bx, _the_map
		assume es:nothing
		mov	ax, [bp+arg_0]
		xor	dx, dx
		div	word ptr es:[bx+8Eh]
		shl	dx, 3
		les	bx, [bp+arg_2]
		assume es:nothing
		mov	es:[bx], dx
		les	bx, _the_map
		assume es:nothing
		mov	ax, [bp+arg_0]
		xor	dx, dx
		div	word ptr es:[bx+8Eh]
		shl	ax, 3
		les	bx, [bp+arg_6]
		assume es:nothing
		mov	es:[bx], ax
		pop	bp
		retf
@get_map_coords$quinit2	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; load_resources(void)
@load_resources$qv proc	far		; CODE XREF: init_game(void)+117p
					; init_game(void)+13Ep
		push	bp
		mov	bp, sp
		push	ds
		push	offset aBubsm_l_0 ; "bubsm.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		assume es:nothing
		add	sp, 8
		push	ds
		push	offset aBubmd_l_0 ; "bubmd.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aSubr_l_2 ; "subr.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aSubl_l_1 ; "subl.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aTurn_l_1 ; "turn.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aMsl_str_l ; "msl_str.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aMsl_sm_l ; "msl_sm.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aMsl_tpl_l ; "msl_tpl.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aMsl_tpr_l ; "msl_tpr.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aMsl_rkr_l ; "msl_rkr.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aMsl_rkl_l ; "msl_rkl.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aMsl_top_l_0 ; "msl_top.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aMsl_pea_l ; "msl_pea.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aMsl_spt_l ; "msl_spt.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aMsl_red_l ; "msl_red.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aMsl_arwl_l ; "msl_arwl.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aMsl_arwr_l ; "msl_arwr.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aMsl_bg2l_l ; "msl_bg2l.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aMsl_bg2r_l ; "msl_bg2r.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aShpbmb_l ; "shpbmb.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aFireball_l ; "fireball.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		assume es:seg2608
		add	sp, 8
		push	ds
		push	offset aExplg_l	; "explg.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		assume es:nothing
		add	sp, 8
		push	ds
		push	offset aExpmd_l	; "expmd.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aExpsm_l	; "expsm.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aSplat_l	; "splat.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aProber_l_1 ; "prober.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aProbel_l_0 ; "probel.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aFish1l_l ; "fish1l.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aFish1r_l_0 ; "fish1r.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aFish2l_l ; "fish2l.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aFish2r_l_0 ; "fish2r.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aScr_100_l ; "scr_100.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aScr_500_l ; "scr_500.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aScr_1000_l ; "scr_1000.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aScr_2000_l ; "scr_2000.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aScr_3000_l ; "scr_3000.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aScr_4000_l ; "scr_4000.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aCoin_l	; "coin.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBonus1_l ; "bonus1.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBonus2_l ; "bonus2.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aTulipl_l ; "tulipl.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aTulipr_l ; "tulipr.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aTulip_l_0 ; "tulip.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aSerp_r_l_0 ; "serp_r.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aSerp_l_l_0 ; "serp_l.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aMsl_bigl_l ; "msl_bigl.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aMsl_bigr_l ; "msl_bigr.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aMsl_hbl_l ; "msl_hbl.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aMsl_hbr_l ; "msl_hbr.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aFirbalup_l ; "firbalup.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aFirbaldn_l ; "firbaldn.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aPu_air_l_0 ; "pu_air.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aPu_fire_l_0 ; "pu_fire.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aPu_shld_l_0 ; "pu_shld.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aPu_jwl1_l ; "pu_jwl1.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aPu_1up_l_0 ; "pu_1up.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aPu_auto_l_0 ; "pu_auto.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aPu_key_l_0 ; "pu_key.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aPu_top_l_0 ; "pu_top.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aPu_jason_l_0 ; "pu_jason.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aPu_jf_l_0 ; "pu_jf.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aGem_l	; "gem.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aSpikes_u_l_0 ; "spikes_u.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aSpikes_d_l_0 ; "spikes_d.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aShutl_l_l_0 ; "shutl_l.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aShutl_r_l ; "shutl_r.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aMreal_l	; "mreal.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aFreemine_l ; "freemine.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aTent_out_l_0 ; "tent_out.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aTent_in_l ; "tent_in.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aMine_l_0 ; "mine.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBarrel1_l_0 ; "barrel1.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBarrel2_l_0 ; "barrel2.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBarrel3_l_0 ; "barrel3.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aPod1_l_0 ; "pod1.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aPod2_l_0 ; "pod2.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aPiranar_l_0 ; "piranar.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aPiranal_l_0 ; "piranal.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aJelly_l_0 ; "jelly.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBacksub_l_0 ; "backsub.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aEnd_dr_l_0 ; "end_dr.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aDoor_ud_l_0 ; "door_ud.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aDuct_l_l_0 ; "duct_l.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aDuct_r_l_0 ; "duct_r.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aDuct_u_l_0 ; "duct_u.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aDuct_d_l_0 ; "duct_d.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBlock_l_0 ; "block.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aBlock2_l_0 ; "block2.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aSwitch_l_0 ; "switch.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aZap_ud_l_0 ; "zap_ud.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aWeed1_l_0 ; "weed1.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aChest_l_0 ; "chest.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aFace_r_l_0 ; "face_r.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aFace_l_l_0 ; "face_l.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aCrab_l_0 ; "crab.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aCrabdie_l ; "crabdie.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aSerpdie_l ; "serpdie.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aProbspin_l ; "probspin.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aPiece_1_l ; "piece_1.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aPiece_2_l ; "piece_2.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aPiece_3_l ; "piece_3.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aPiece_4_l ; "piece_4.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aGun_1_l	; "gun_1.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aGun_2_l	; "gun_2.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aGun_3_l	; "gun_3.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aGun_4_l	; "gun_4.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aStatue_l_0 ; "statue.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aFire_pit_l_0 ; "fire_pit.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aClam_l_0 ; "clam.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aCannonr_l_0 ; "cannonr.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aCannonl_l ; "cannonl.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aShipr_l_0 ; "shipr.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aShipl_l_0 ; "shipl.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aMouse_l_0 ; "mouse.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aKey_l_0	; "key.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	ds
		push	offset aPat1_l	; "pat1.l"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		push	0
		push	ds
		push	offset aFire1	; "fire1"
		push	word_2B8BC	; int
		push	_the_game	; int
		call	@game_manager@define_sound$qnucuc ; game_manager::define_sound(uchar *,uchar)
		add	sp, 0Ah
		push	0
		push	ds
		push	offset aFire2	; "fire2"
		push	word_2B8BC	; int
		push	_the_game	; int
		call	@game_manager@define_sound$qnucuc ; game_manager::define_sound(uchar *,uchar)
		add	sp, 0Ah
		push	0
		push	ds
		push	offset aExp1	; "exp1"
		push	word_2B8BC	; int
		push	_the_game	; int
		call	@game_manager@define_sound$qnucuc ; game_manager::define_sound(uchar *,uchar)
		add	sp, 0Ah
		push	0
		push	ds
		push	offset aExp2_0	; "exp2"
		push	word_2B8BC	; int
		push	_the_game	; int
		call	@game_manager@define_sound$qnucuc ; game_manager::define_sound(uchar *,uchar)
		add	sp, 0Ah
		push	0
		push	ds
		push	offset aDirhit	; "dirhit"
		push	word_2B8BC	; int
		push	_the_game	; int
		call	@game_manager@define_sound$qnucuc ; game_manager::define_sound(uchar *,uchar)
		add	sp, 0Ah
		push	0
		push	ds
		push	offset aBubbles2_1 ; "bubbles2"
		push	word_2B8BC	; int
		push	_the_game	; int
		call	@game_manager@define_sound$qnucuc ; game_manager::define_sound(uchar *,uchar)
		add	sp, 0Ah
		push	0
		push	ds
		push	offset aPirana	; "pirana"
		push	word_2B8BC	; int
		push	_the_game	; int
		call	@game_manager@define_sound$qnucuc ; game_manager::define_sound(uchar *,uchar)
		add	sp, 0Ah
		push	0
		push	ds
		push	offset aDoor	; "door"
		push	word_2B8BC	; int
		push	_the_game	; int
		call	@game_manager@define_sound$qnucuc ; game_manager::define_sound(uchar *,uchar)
		add	sp, 0Ah
		push	0
		push	ds
		push	offset aDrillhi_5 ; "drillhi"
		push	word_2B8BC	; int
		push	_the_game	; int
		call	@game_manager@define_sound$qnucuc ; game_manager::define_sound(uchar *,uchar)
		add	sp, 0Ah
		push	0
		push	ds
		push	offset aZap	; "zap"
		push	word_2B8BC	; int
		push	_the_game	; int
		call	@game_manager@define_sound$qnucuc ; game_manager::define_sound(uchar *,uchar)
		add	sp, 0Ah
		push	0
		push	ds
		push	offset aPup	; "pup"
		push	word_2B8BC	; int
		push	_the_game	; int
		call	@game_manager@define_sound$qnucuc ; game_manager::define_sound(uchar *,uchar)
		add	sp, 0Ah
		push	0
		push	ds
		push	offset aPup2	; "pup2"
		push	word_2B8BC	; int
		push	_the_game	; int
		call	@game_manager@define_sound$qnucuc ; game_manager::define_sound(uchar *,uchar)
		add	sp, 0Ah
		push	0
		push	ds
		push	offset aFaze	; "faze"
		push	word_2B8BC	; int
		push	_the_game	; int
		call	@game_manager@define_sound$qnucuc ; game_manager::define_sound(uchar *,uchar)
		add	sp, 0Ah
		push	1
		push	ds
		push	offset aTulip	; "tulip"
		push	word_2B8BC	; int
		push	_the_game	; int
		call	@game_manager@define_sound$qnucuc ; game_manager::define_sound(uchar *,uchar)
		add	sp, 0Ah
		push	0
		push	ds
		push	offset aPing_2	; "ping"
		push	word_2B8BC	; int
		push	_the_game	; int
		call	@game_manager@define_sound$qnucuc ; game_manager::define_sound(uchar *,uchar)
		add	sp, 0Ah
		push	0
		push	ds
		push	offset aTport_0	; "tport"
		push	word_2B8BC	; int
		push	_the_game	; int
		call	@game_manager@define_sound$qnucuc ; game_manager::define_sound(uchar *,uchar)
		add	sp, 0Ah
		push	0
		push	ds
		push	offset aSwish_0	; "swish"
		push	word_2B8BC	; int
		push	_the_game	; int
		call	@game_manager@define_sound$qnucuc ; game_manager::define_sound(uchar *,uchar)
		add	sp, 0Ah
		push	0
		push	ds
		push	offset aSmash_0	; "smash"
		push	word_2B8BC	; int
		push	_the_game	; int
		call	@game_manager@define_sound$qnucuc ; game_manager::define_sound(uchar *,uchar)
		add	sp, 0Ah
		pop	bp
		retf
@load_resources$qv endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; start_title_loop(void)
@start_title_loop$qv proc far		; CODE XREF: _main+22p

var_2		= word ptr -2

		enter	2, 0
		push	ds
		push	offset aTitle_cmf ; "title.cmf"
		push	word_2B8BC
		push	_the_game
		call	@game_manager@play_song$qnuc ; game_manager::play_song(uchar *)
		assume es:nothing
		add	sp, 8
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@blank_palette$qv ;	vga_display::blank_palette(void)
		add	sp, 4
		push	0FFFFh		; int
		push	0		; int
		push	0		; char
		push	ds
		push	offset aP_title_pcx ; "p_title.pcx"
		push	word ptr _display+2 ; int
		push	word ptr _display ; int
		call	@vga_display@show_pcx$qnucucuii	; vga_display::show_pcx(uchar *,uchar,uint,int)
		assume es:nothing
		add	sp, 0Eh
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@set_palette$qv ; vga_display::set_palette(void)
		add	sp, 4
		push	1Dh
		push	18h
		push	2
		push	30h ; '0'
		call	@i_set_text$qucucucuc ;	i_set_text(uchar,uchar,uchar,uchar)
		assume es:nothing
		add	sp, 8
		les	bx, dword ptr _the_game
		assume es:nothing
		cmp	byte ptr es:[bx+6], 0
		jnz	loc_BB64
		push	ds
		push	offset aTitle	; "title"
		jmp	loc_BB68
; ---------------------------------------------------------------------------

loc_BB64::				; CODE XREF: start_title_loop(void)+6Bj
		push	ds
		push	offset aPup2_0	; "pup2"

loc_BB68::				; CODE XREF: start_title_loop(void)+71j
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@play_sound_file$qnuc ; game_manager::play_sound_file(uchar *)
		assume es:seg2608
		add	sp, 8
		mov	al, _saw_title_screen
		mov	ah, 0
		or	ax, ax
		jz	loc_BB84
		jmp	loc_BC16
; ---------------------------------------------------------------------------

loc_BB84::				; CODE XREF: start_title_loop(void)+8Ej
		inc	_saw_title_screen
		jmp	loc_BB9A
; ---------------------------------------------------------------------------

loc_BB8A::				; CODE XREF: start_title_loop(void)+B2j
		push	word_2B8BC
		push	_the_game
		call	@game_manager@doit$qv ;	game_manager::doit(void)
		add	sp, 4

loc_BB9A::				; CODE XREF: start_title_loop(void)+97j
		les	bx, dword ptr _the_game
		assume es:nothing
		cmp	byte ptr es:[bx+2Bh], 0
		jnz	loc_BB8A
		mov	[bp+var_2], 12Ch
		jmp	loc_BBFE
; ---------------------------------------------------------------------------

loc_BBAC::				; CODE XREF: start_title_loop(void)+123j
		mov	al, _god_mode
		mov	ah, 0
		or	ax, ax
		jnz	loc_BBDC
		cmp	byte_2D3CD, 0
		jz	loc_BBDC
		cmp	byte_2D3E3, 0
		jz	loc_BBDC
		push	ds
		push	offset aSum	; "sum"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@play_sound_file$qnuc ; game_manager::play_sound_file(uchar *)
		add	sp, 8
		mov	_god_mode, 1

loc_BBDC::				; CODE XREF: start_title_loop(void)+C2j
					; start_title_loop(void)+C9j ...
		push	1
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@pause$qui ; vga_display::pause(uint)
		add	sp, 6
		push	word_2B8BC
		push	_the_game
		call	@game_manager@doit$qv ;	game_manager::doit(void)
		add	sp, 4

loc_BBFE::				; CODE XREF: start_title_loop(void)+B9j
		les	bx, dword ptr _the_game
		mov	al, es:[bx+2Bh]
		mov	ah, 0
		or	ax, ax
		jnz	loc_BC16
		mov	ax, [bp+var_2]
		dec	[bp+var_2]
		or	ax, ax
		jnz	loc_BBAC

loc_BC16::				; CODE XREF: start_title_loop(void)+90j
					; start_title_loop(void)+119j
		push	cs
		call	near ptr @activate_menu_bar$qv ; activate_menu_bar(void)
		assume es:nothing
		leave
		retf
@start_title_loop$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; show_high_scores(unsigned char)
@show_high_scores$quc proc far		; CODE XREF: end_game(void)+152p
					; seg0fa9:09BDP

block		= dword	ptr -10h
var_C		= dword	ptr -0Ch
var_7		= byte ptr -7
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= byte ptr  6

		enter	10h, 0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@save_palette$qv ; vga_display::save_palette(void)

loc_BC2D::				; CODE XREF: show_high_scores(uchar)+378j
		add	sp, 4
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@blank_palette$qv ;	vga_display::blank_palette(void)
		add	sp, 4
		push	0FFFFh		; int
		push	0		; int
		push	0		; char
		push	ds
		push	offset aP_highs_pcx ; "p_highs.pcx"
		push	word ptr _display+2 ; int
		push	word ptr _display ; int
		call	@vga_display@show_pcx$qnucucuii	; vga_display::show_pcx(uchar *,uchar,uint,int)
		add	sp, 0Eh
		push	9Eh ; ''
		push	1Ch
		push	2
		push	40h ; '@'
		call	@i_set_text$qucucucuc ;	i_set_text(uchar,uchar,uchar,uchar)
		add	sp, 8
		mov	[bp+var_4], 46h	; 'F'
		mov	[bp+var_6], 1Eh
		mov	[bp+var_2], 0
		jmp	loc_BDA1
; ---------------------------------------------------------------------------

loc_BC7D::				; CODE XREF: show_high_scores(uchar)+18Bj
		push	9Fh ; ''
		push	87h ; ''
		push	2
		push	80h ; ''
		call	@i_set_text$qucucucuc ;	i_set_text(uchar,uchar,uchar,uchar)
		add	sp, 8
		cmp	[bp+var_2], 0
		jnz	loc_BCA9
		push	9Eh ; ''
		push	1Ch
		push	2
		push	40h ; '@'
		call	@i_set_text$qucucucuc ;	i_set_text(uchar,uchar,uchar,uchar)
		add	sp, 8
		jmp	loc_BCCC
; ---------------------------------------------------------------------------

loc_BCA9::				; CODE XREF: show_high_scores(uchar)+78j
		cmp	[bp+arg_0], 0
		jz	loc_BCCC
		mov	al, [bp+arg_0]
		mov	ah, 0
		mov	dx, [bp+var_2]
		inc	dx
		cmp	ax, dx
		jnz	loc_BCCC
		push	1Dh
		push	18h
		push	2
		push	30h ; '0'
		call	@i_set_text$qucucucuc ;	i_set_text(uchar,uchar,uchar,uchar)
		add	sp, 8

loc_BCCC::				; CODE XREF: show_high_scores(uchar)+8Bj
					; show_high_scores(uchar)+91j ...
		push	0Ah		; radix
		push	ds
		push	offset _tmp	; string
		mov	ax, [bp+var_2]
		inc	ax
		push	ax		; value
		call	_itoa
		add	sp, 8
		push	ds
		push	offset _src	; "."
		push	ds
		push	offset _tmp	; dest
		call	_strcat
		add	sp, 8
		push	0		; char
		push	ds
		push	offset _tmp	; s
		mov	ax, [bp+var_2]
		imul	ax, 0Ah
		mov	dx, [bp+var_6]
		add	dx, ax
		push	dx		; int
		push	[bp+var_4]	; int
		push	word ptr _display+2 ; int
		push	word ptr _display ; int
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		push	2
		mov	al, byte ptr [bp+var_2]
		push	ax
		call	@return_element$qucuc ;	return_element(uchar,uchar)
		add	sp, 4
		push	dx
		push	ax		; src
		push	ds
		push	offset _tmp	; dest
		call	_strcpy
		add	sp, 8
		push	0		; char
		push	ds
		push	offset _tmp	; s
		mov	ax, [bp+var_2]
		imul	ax, 0Ah
		mov	dx, [bp+var_6]
		add	dx, ax
		push	dx		; int
		mov	ax, [bp+var_4]
		add	ax, 28h	; '('
		push	ax		; int
		push	word ptr _display+2 ; int
		push	word ptr _display ; int
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		push	1
		mov	al, byte ptr [bp+var_2]
		push	ax
		call	@return_element$qucuc ;	return_element(uchar,uchar)
		add	sp, 4
		push	dx
		push	ax		; src
		push	ds
		push	offset _tmp	; dest
		call	_strcpy
		add	sp, 8
		push	0		; char
		push	ds
		push	offset _tmp	; s
		mov	ax, [bp+var_2]
		imul	ax, 0Ah
		mov	dx, [bp+var_6]
		add	dx, ax
		push	dx		; int
		mov	ax, [bp+var_4]
		add	ax, 8Ch	; ''
		push	ax		; int
		push	word ptr _display+2 ; int
		push	word ptr _display ; int
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		inc	[bp+var_2]

loc_BDA1::				; CODE XREF: show_high_scores(uchar)+5Ej
		cmp	[bp+var_2], 0Ah
		jge	loc_BDAA
		jmp	loc_BC7D
; ---------------------------------------------------------------------------

loc_BDAA::				; CODE XREF: show_high_scores(uchar)+189j
		push	1Dh
		push	18h
		push	2
		push	30h ; '0'
		call	@i_set_text$qucucucuc ;	i_set_text(uchar,uchar,uchar,uchar)
		add	sp, 8
		push	ds
		push	offset aYourScore ; "Your score: "
		push	ds
		push	offset _tmp	; dest
		call	_strcpy
		add	sp, 8
		push	0Ah		; radix
		push	ds
		push	offset _tmp2	; string
		push	dword ptr [_score]	; value
		call	_ltoa
		add	sp, 0Ah
		push	dx
		push	ax		; src
		push	ds
		push	offset _tmp	; dest
		call	_strcat
		add	sp, 8
		push	0		; char
		push	ds
		push	offset _tmp	; s
		mov	ax, [bp+var_6]
		add	ax, 78h	; 'x'
		push	ax		; int
		mov	ax, [bp+var_4]
		add	ax, 0FFF6h
		push	ax		; int
		push	word ptr _display+2 ; int
		push	word ptr _display ; int
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		push	1Dh
		push	18h
		push	2
		push	30h ; '0'
		call	@i_set_text$qucucucuc ;	i_set_text(uchar,uchar,uchar,uchar)
		add	sp, 8
		push	0
		push	0
		push	0
		push	ds
		push	offset aReset	; "Reset"
		push	0
		push	0
		call	@button@$bctr$qnucnvuc ; button::button(uchar *,void *,uchar)
		add	sp, 0Eh
		mov	word ptr [bp+block+2], dx
		mov	word ptr [bp+block], ax
		push	0
		push	0
		push	0
		push	ds
		push	offset aOk	; "Ok"
		push	0
		push	0
		call	@button@$bctr$qnucnvuc ; button::button(uchar *,void *,uchar)
		add	sp, 0Eh
		mov	word ptr [bp+var_C+2], dx
		mov	word ptr [bp+var_C], ax
		les	bx, [bp+block]
		assume es:nothing
		mov	word ptr es:[bx+18h], 0A0h ; ' '
		les	bx, [bp+block]
		mov	word ptr es:[bx+1Ah], 0B7h ; '·'
		les	bx, [bp+var_C]
		mov	word ptr es:[bx+18h], 0E6h ; 'æ'
		les	bx, [bp+var_C]
		mov	word ptr es:[bx+1Ah], 0B7h ; '·'
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		les	bx, [bp+block]
		mov	bx, es:[bx]
		call	dword ptr [bx]
		add	sp, 4
		push	word ptr [bp+var_C+2]
		push	word ptr [bp+var_C]
		les	bx, [bp+var_C]
		mov	bx, es:[bx]
		call	dword ptr [bx]
		add	sp, 4
		push	word ptr [bp+var_C+2]
		push	word ptr [bp+var_C]
		call	@button@mouse_to_me$qv ; button::mouse_to_me(void)
		add	sp, 4
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@set_palette$qv ; vga_display::set_palette(void)
		add	sp, 4
		push	word ptr _mouse+2
		push	word ptr _mouse
		call	@ms_mouse@show$qv ; ms_mouse::show(void)
		add	sp, 4
		jmp	$+2
; ---------------------------------------------------------------------------

loc_BECD::				; CODE XREF: show_high_scores(uchar)+2AFj
					; show_high_scores(uchar)+2B8j
		nop
		push	cs
		call	near ptr @de_button$qv ; de_button(void)
		or	al, al
		jnz	loc_BECD
		mov	[bp+var_2], 438h
		mov	[bp+var_7], 1
		jmp	loc_BFBE
; ---------------------------------------------------------------------------

loc_BEE2::				; CODE XREF: show_high_scores(uchar)+3BAj
		call	_i_external_left
		or	al, al
		jnz	loc_BEF2
		call	_i_external_right
		or	al, al
		jz	loc_BF38

loc_BEF2::				; CODE XREF: show_high_scores(uchar)+2CCj
		push	0Ah
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@pause$qui ; vga_display::pause(uint)
		add	sp, 6
		xor	[bp+var_7], 1
		mov	al, [bp+var_7]
		mov	ah, 0
		shl	ax, 2
		lea	dx, [bp+block]
		add	ax, dx
		mov	bx, ax
		push	word ptr ss:[bx+2]
		push	word ptr ss:[bx]
		call	@button@mouse_to_me$qv ; button::mouse_to_me(void)
		add	sp, 4
		jmp	$+2
; ---------------------------------------------------------------------------

loc_BF28::				; CODE XREF: show_high_scores(uchar)+30Aj
					; show_high_scores(uchar)+312j	...
		call	_i_external_left
		or	al, al
		jnz	loc_BF28
		call	_i_external_right
		or	al, al
		jnz	loc_BF28

loc_BF38::				; CODE XREF: show_high_scores(uchar)+2D4j
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		les	bx, [bp+block]
		mov	bx, es:[bx]
		call	dword ptr [bx+8]
		add	sp, 4
		or	al, al
		jz	loc_BFA0
		push	0		; char
		push	ds
		push	offset aAreYouSureYouW ; "Are you sure you want	to\nreset the hig"...
		call	@i_yes_cancel$qnucuc ; i_yes_cancel(uchar *,uchar)
		add	sp, 6
		mov	ah, 0
		or	ax, ax
		jnz	loc_BF97
		call	@init_scores_file$qv ; init_scores_file(void)
		push	3		; int
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		nop
		push	cs
		call	near ptr @button@$bdtr$qv ; button::~button(void)
		add	sp, 6
		push	3		; int
		push	word ptr [bp+var_C+2]
		push	word ptr [bp+var_C] ; block
		nop
		push	cs
		call	near ptr @button@$bdtr$qv ; button::~button(void)
		add	sp, 6
		push	word ptr _mouse+2
		push	word ptr _mouse
		call	@ms_mouse@hide$qv ; ms_mouse::hide(void)
		jmp	loc_BC2D
; ---------------------------------------------------------------------------

loc_BF97::				; CODE XREF: show_high_scores(uchar)+344j
		les	bx, [bp+block]
		mov	word ptr es:[bx+20h], 0

loc_BFA0::				; CODE XREF: show_high_scores(uchar)+330j
		push	1
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@pause$qui ; vga_display::pause(uint)
		add	sp, 6
		mov	ax, [bp+var_2]
		dec	[bp+var_2]
		or	ax, ax
		jnz	loc_BFBE
		jmp	loc_BFD9
; ---------------------------------------------------------------------------

loc_BFBE::				; CODE XREF: show_high_scores(uchar)+2C3j
					; show_high_scores(uchar)+39Ej
		push	word ptr [bp+var_C+2]
		push	word ptr [bp+var_C]
		les	bx, [bp+var_C]
		mov	bx, es:[bx]
		call	dword ptr [bx+8]
		add	sp, 4
		mov	ah, 0
		or	ax, ax
		jnz	loc_BFD9
		jmp	loc_BEE2
; ---------------------------------------------------------------------------

loc_BFD9::				; CODE XREF: show_high_scores(uchar)+3A0j
					; show_high_scores(uchar)+3B8j
		push	3		; int
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		nop
		push	cs
		call	near ptr @button@$bdtr$qv ; button::~button(void)
		add	sp, 6
		push	3		; int
		push	word ptr [bp+var_C+2]
		push	word ptr [bp+var_C] ; block
		nop
		push	cs
		call	near ptr @button@$bdtr$qv ; button::~button(void)
		add	sp, 6
		push	word ptr _mouse+2
		push	word ptr _mouse
		call	@ms_mouse@hide$qv ; ms_mouse::hide(void)
		add	sp, 4
		push	0
		push	0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@cls$qucuc ; vga_display::cls(uchar,uchar)
		add	sp, 8
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@restore_palette$qv	; vga_display::restore_palette(void)
		add	sp, 4
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@set_palette$qv ; vga_display::set_palette(void)
		add	sp, 4
		leave
		retf
@show_high_scores$quc endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; show_stats(void)
@show_stats$qv	proc far		; CODE XREF: end_room(void)+15p

var_28		= word ptr -28h
dest		= dword	ptr -26h
block		= dword	ptr -22h
var_1E		= word ptr -1Eh
var_1C		= word ptr -1Ch
var_1A		= word ptr -1Ah
var_18		= word ptr -18h
var_16		= word ptr -16h
var_14		= word ptr -14h
value		= word ptr -12h
var_10		= word ptr -10h
var_E		= word ptr -0Eh
var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2

		enter	28h, 0
		mov	al, 0
		mov	_displayed_page, al
		mov	_non_displayed_page, al
		push	0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@show_offset$qui ; vga_display::show_offset(uint)
		add	sp, 6
		push	word_2B8BC
		push	_the_game
		call	@game_manager@reset_sound$qv ; game_manager::reset_sound(void)
		add	sp, 4
		push	0
		push	word_2B8BC
		push	_the_game
		call	@game_manager@reset_player$quc ; game_manager::reset_player(uchar)
		add	sp, 6
		push	ds
		push	offset aStats_cmf ; "stats.cmf"
		push	word_2B8BC
		push	_the_game
		call	@game_manager@play_song$qnuc ; game_manager::play_song(uchar *)
		add	sp, 8
		push	0
		push	ds
		push	offset aAdd	; "add"
		push	word_2B8BC	; int
		push	_the_game	; int
		call	@game_manager@define_sound$qnucuc ; game_manager::define_sound(uchar *,uchar)
		add	sp, 0Ah
		push	0
		push	ds
		push	offset aSum_0	; "sum"
		push	word_2B8BC	; int
		push	_the_game	; int
		call	@game_manager@define_sound$qnucuc ; game_manager::define_sound(uchar *,uchar)
		add	sp, 0Ah
		push	1Dh
		push	18h
		push	2
		push	30h ; '0'
		call	@i_set_text$qucucucuc ;	i_set_text(uchar,uchar,uchar,uchar)
		add	sp, 8
		mov	ax, _air_supply
		mov	[bp+var_2], ax
		mov	ax, _shld_supply
		mov	[bp+var_4], ax
		mov	[bp+var_1E], 0
		mov	[bp+var_6], 41h	; 'A'
		mov	[bp+var_8], 69h	; 'i'
		mov	ax, [bp+var_6]
		mov	[bp+var_A], ax
		mov	ax, [bp+var_8]
		add	ax, 0Ah
		mov	[bp+var_C], ax
		mov	[bp+var_18], 54h ; 'T'
		mov	[bp+var_1A], 54h ; 'T'
		mov	[bp+var_1C], 0F9h ; 'ù'
		mov	[bp+var_E], 0A0h ; ' '
		mov	al, _enemy_count
		mov	ah, 0
		or	ax, ax
		jz	loc_C11F
		mov	al, _goody_count
		mov	ah, 0
		or	ax, ax
		jnz	loc_C12F

loc_C11F::				; CODE XREF: show_stats(void)+D5j
		push	0
		push	0
		push	ds
		push	offset aAttemptToDivid ; "Attempt to divide by zero in show_stats"...
		call	@terminate$qnuct1 ; terminate(uchar *,uchar *)
; ---------------------------------------------------------------------------
		add	sp, 8

loc_C12F::				; CODE XREF: show_stats(void)+DEj
		mov	al, _goodies_found
		mov	ah, 0
		mov	[bp+var_28], ax
		fild	[bp+var_28]	; (emulator call)
		mov	al, _goody_count
		mov	ah, 0
		mov	[bp+var_28], ax
		fild	[bp+var_28]	; (emulator call)
		fdivp	st(1), st	; (emulator call)
		fmul	flt_29B10	; (emulator call)
		call	ftol@
		mov	[bp+var_10], ax
		mov	al, _enemies_killed
		mov	ah, 0
		mov	[bp+var_28], ax
		fild	[bp+var_28]	; (emulator call)
		mov	al, _enemy_count
		mov	ah, 0
		mov	[bp+var_28], ax
		fild	[bp+var_28]	; (emulator call)
		fdivp	st(1), st	; (emulator call)
		fmul	flt_29B10	; (emulator call)
		call	ftol@
		mov	[bp+value], ax
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@blank_palette$qv ;	vga_display::blank_palette(void)
		add	sp, 4
		push	300h		; unsigned int
		call	@$bnew$qui	; operator new(uint)
		pop	cx
		mov	word ptr [bp+dest+2], dx
		mov	word ptr [bp+dest], ax
		cmp	[bp+dest], 0
		jnz	loc_C1B1
		push	ds
		push	offset aShowStats ; "show stats"
		call	@no_heap$qnuc	; no_heap(uchar	*)
; ---------------------------------------------------------------------------
		add	sp, 4

loc_C1B1::				; CODE XREF: show_stats(void)+164j
		push	300h		; n
		push	ds
		push	offset _palette	; src
		push	word ptr [bp+dest+2]
		push	word ptr [bp+dest] ; dest
		call	_memcpy
		add	sp, 0Ah
		push	0FFFFh		; int
		push	0		; int
		push	0		; char
		push	ds
		push	offset aP_stats_pcx ; "p_stats.pcx"
		push	word ptr _display+2 ; int
		push	word ptr _display ; int
		call	@vga_display@show_pcx$qnucucuii	; vga_display::show_pcx(uchar *,uchar,uint,int)
		add	sp, 0Eh
		mov	[bp+var_14], 0D2h ; 'Ò'
		mov	[bp+var_16], 0Ah
		push	0		; int
		push	0		; char
		push	[bp+var_16]	; int
		push	[bp+var_14]	; int
		push	ds
		push	offset aOtis_l	; "otis.l"
		nop
		push	cs
		call	near ptr @show_loop$qnuciiucui ; show_loop(uchar *,int,int,uchar,uint)
		add	sp, 0Ch
		push	0A7h ; '§'
		push	[bp+var_18]
		push	0
		push	cs
		call	near ptr @update_air_guage$qiii	; update_air_guage(int,int,int)
		add	sp, 6
		push	0B3h ; '³'
		push	[bp+var_1A]
		push	0
		push	cs
		call	near ptr @update_shld_guage$qiii ; update_shld_guage(int,int,int)
		add	sp, 6
		push	9Fh ; ''
		push	[bp+var_1C]
		push	cs
		call	near ptr @update_score$qii ; update_score(int,int)
		add	sp, 4
		push	ds
		push	offset aEnemiesDestroy ; "Enemies destroyed : "
		push	ds
		push	offset _tmp	; dest
		call	_strcpy
		add	sp, 8
		push	0Ah		; radix
		push	ds
		push	offset _tmp2	; string
		push	[bp+value]	; value
		call	_itoa
		add	sp, 8
		push	dx
		push	ax		; src
		push	ds
		push	offset _tmp	; dest
		call	_strcat
		add	sp, 8
		push	ds
		push	offset asc_29B47 ; "%"
		push	ds
		push	offset _tmp	; dest
		call	_strcat
		add	sp, 8
		push	0		; char
		push	ds
		push	offset _tmp	; s
		mov	ax, [bp+var_8]
		add	ax, 0FFE2h
		push	ax		; int
		push	[bp+var_6]	; int
		push	word ptr _display+2 ; int
		push	word ptr _display ; int
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		push	ds
		push	offset aGoodies	; "Goodies	     : "
		push	ds
		push	offset _tmp	; dest
		call	_strcpy
		add	sp, 8
		push	0Ah		; radix
		push	ds
		push	offset _tmp2	; string
		push	[bp+var_10]	; value
		call	_itoa
		add	sp, 8
		push	dx
		push	ax		; src
		push	ds
		push	offset _tmp	; dest
		call	_strcat
		add	sp, 8
		push	ds
		push	offset asc_29B5E ; "%"
		push	ds
		push	offset _tmp	; dest
		call	_strcat
		add	sp, 8
		push	0		; char
		push	ds
		push	offset _tmp	; s
		mov	ax, [bp+var_8]
		add	ax, 0FFECh
		push	ax		; int
		push	[bp+var_6]	; int
		push	word ptr _display+2 ; int
		push	word ptr _display ; int
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		push	0		; char
		push	ds
		push	offset aBonusX50 ; "Bonus X 50	      :"
		push	[bp+var_8]	; int
		push	[bp+var_6]	; int
		push	word ptr _display+2 ; int
		push	word ptr _display ; int
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		push	0		; char
		push	ds
		push	offset aBonusX100 ; "Bonus X 100       :"
		push	[bp+var_C]	; int
		push	[bp+var_A]	; int
		push	word ptr _display+2 ; int
		push	word ptr _display ; int
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@set_palette$qv ; vga_display::set_palette(void)
		add	sp, 4
		mov	ax, [bp+var_8]
		add	ax, 0Ah
		push	ax
		mov	ax, [bp+var_6]
		add	ax, [bp+var_E]
		add	ax, 28h	; '('
		push	ax
		push	[bp+var_8]
		mov	ax, [bp+var_6]
		add	ax, [bp+var_E]
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@get_bits$qiiii ; vga_display::get_bits(int,int,int,int)
		add	sp, 0Ch
		mov	word ptr [bp+block+2], dx
		mov	word ptr [bp+block], ax
		jmp	loc_C40B
; ---------------------------------------------------------------------------

loc_C365::				; CODE XREF: show_stats(void)+3E1j
		push	word_2B8BC
		push	_the_game
		call	@game_manager@doit$qv ;	game_manager::doit(void)
		add	sp, 4
		push	0Fh		; char
		push	ds
		push	offset aAdd_0	; "add"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah
		push	3
		call	@pause$qui	; pause(uint)
		pop	cx
		add	[bp+var_1E], 96h ; ''
		push	0A7h ; '§'
		push	[bp+var_18]
		push	0FFFDh
		push	cs
		call	near ptr @update_air_guage$qiii	; update_air_guage(int,int,int)
		add	sp, 6
		push	0
		push	0
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		mov	ax, [bp+var_8]
		add	ax, 0Ah
		push	ax
		mov	ax, [bp+var_6]
		add	ax, [bp+var_E]
		add	ax, 28h	; '('
		push	ax
		push	[bp+var_8]
		mov	ax, [bp+var_6]
		add	ax, [bp+var_E]
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@put_bits$qiiiinucuiui ; vga_display::put_bits(int,int,int,int,uchar *,uint,uint)
		add	sp, 14h
		push	0		; char
		push	0Ah		; radix
		push	ds
		push	offset _tmp	; string
		push	[bp+var_1E]	; value
		call	_itoa
		add	sp, 8
		push	dx
		push	ax		; s
		push	[bp+var_8]	; int
		mov	ax, [bp+var_6]
		add	ax, [bp+var_E]
		push	ax		; int
		push	word ptr _display+2 ; int
		push	word ptr _display ; int
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh

loc_C40B::				; CODE XREF: show_stats(void)+323j
		cmp	_air_supply, 0
		jz	loc_C423
		les	bx, dword ptr _the_game
		mov	al, es:[bx+2Bh]
		mov	ah, 0
		or	ax, ax
		jnz	loc_C423
		jmp	loc_C365
; ---------------------------------------------------------------------------

loc_C423::				; CODE XREF: show_stats(void)+3D1j
					; show_stats(void)+3DFj
		mov	_air_supply, 0
		mov	ax, [bp+var_2]
		imul	ax, 32h
		movsx	eax, ax
		add	_score,	eax
		mov	ax, [bp+var_2]
		imul	ax, 32h
		mov	[bp+var_1E], ax
		push	0
		push	0
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		mov	ax, [bp+var_8]
		add	ax, 0Ah
		push	ax
		mov	ax, [bp+var_6]
		add	ax, [bp+var_E]
		add	ax, 28h	; '('
		push	ax
		push	[bp+var_8]
		mov	ax, [bp+var_6]
		add	ax, [bp+var_E]
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@put_bits$qiiiinucuiui ; vga_display::put_bits(int,int,int,int,uchar *,uint,uint)
		add	sp, 14h
		push	0		; char
		push	0Ah		; radix
		push	ds
		push	offset _tmp	; string
		push	[bp+var_1E]	; value
		call	_itoa
		add	sp, 8
		push	dx
		push	ax		; s
		push	[bp+var_8]	; int
		mov	ax, [bp+var_6]
		add	ax, [bp+var_E]
		push	ax		; int
		push	word ptr _display+2 ; int
		push	word ptr _display ; int
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		push	9Fh ; ''
		push	[bp+var_1C]
		push	cs
		call	near ptr @update_score$qii ; update_score(int,int)
		add	sp, 4
		push	1Dh
		push	18h
		push	2
		push	30h ; '0'
		call	@i_set_text$qucucucuc ;	i_set_text(uchar,uchar,uchar,uchar)
		add	sp, 8
		push	0A7h ; '§'
		push	[bp+var_18]
		push	0
		push	cs
		call	near ptr @update_air_guage$qiii	; update_air_guage(int,int,int)
		add	sp, 6
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4
		mov	ax, [bp+var_C]
		add	ax, 0Ah
		push	ax
		mov	ax, [bp+var_A]
		add	ax, [bp+var_E]
		add	ax, 28h	; '('
		push	ax
		push	[bp+var_C]
		mov	ax, [bp+var_A]
		add	ax, [bp+var_E]
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@get_bits$qiiii ; vga_display::get_bits(int,int,int,int)
		add	sp, 0Ch
		mov	word ptr [bp+block+2], dx
		mov	word ptr [bp+block], ax
		mov	[bp+var_1E], 0
		jmp	loc_C5BE
; ---------------------------------------------------------------------------

loc_C518::				; CODE XREF: show_stats(void)+594j
		push	word_2B8BC
		push	_the_game
		call	@game_manager@doit$qv ;	game_manager::doit(void)
		add	sp, 4
		push	0Fh		; char
		push	ds
		push	offset aAdd_1	; "add"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah
		push	3
		call	@pause$qui	; pause(uint)
		pop	cx
		push	0B3h ; '³'
		push	[bp+var_1A]
		push	0FFFDh
		push	cs
		call	near ptr @update_shld_guage$qiii ; update_shld_guage(int,int,int)
		add	sp, 6
		add	[bp+var_1E], 12Ch
		push	0
		push	0
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		mov	ax, [bp+var_C]
		add	ax, 0Ah
		push	ax
		mov	ax, [bp+var_A]
		add	ax, [bp+var_E]
		add	ax, 28h	; '('
		push	ax
		push	[bp+var_C]
		mov	ax, [bp+var_A]
		add	ax, [bp+var_E]
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@put_bits$qiiiinucuiui ; vga_display::put_bits(int,int,int,int,uchar *,uint,uint)
		add	sp, 14h
		push	0		; char
		push	0Ah		; radix
		push	ds
		push	offset _tmp	; string
		push	[bp+var_1E]	; value
		call	_itoa
		add	sp, 8
		push	dx
		push	ax		; s
		push	[bp+var_C]	; int
		mov	ax, [bp+var_A]
		add	ax, [bp+var_E]
		push	ax		; int
		push	word ptr _display+2 ; int
		push	word ptr _display ; int
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh

loc_C5BE::				; CODE XREF: show_stats(void)+4D6j
		cmp	_shld_supply, 0
		jz	loc_C5D6
		les	bx, dword ptr _the_game
		mov	al, es:[bx+2Bh]
		mov	ah, 0
		or	ax, ax
		jnz	loc_C5D6
		jmp	loc_C518
; ---------------------------------------------------------------------------

loc_C5D6::				; CODE XREF: show_stats(void)+584j
					; show_stats(void)+592j
		mov	_shld_supply, 0
		mov	ax, [bp+var_4]
		imul	ax, 64h
		movsx	eax, ax
		add	_score,	eax
		mov	ax, [bp+var_4]
		imul	ax, 64h
		mov	[bp+var_1E], ax
		push	9Fh ; ''
		push	[bp+var_1C]
		push	cs
		call	near ptr @update_score$qii ; update_score(int,int)
		add	sp, 4
		push	1Dh
		push	18h
		push	2
		push	30h ; '0'
		call	@i_set_text$qucucucuc ;	i_set_text(uchar,uchar,uchar,uchar)
		add	sp, 8
		push	0
		push	0
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		mov	ax, [bp+var_C]
		add	ax, 0Ah
		push	ax
		mov	ax, [bp+var_A]
		add	ax, [bp+var_E]
		add	ax, 28h	; '('
		push	ax
		push	[bp+var_C]
		mov	ax, [bp+var_A]
		add	ax, [bp+var_E]
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@put_bits$qiiiinucuiui ; vga_display::put_bits(int,int,int,int,uchar *,uint,uint)
		add	sp, 14h
		push	0		; char
		push	0Ah		; radix
		push	ds
		push	offset _tmp	; string
		push	[bp+var_1E]	; value
		call	_itoa
		add	sp, 8
		push	dx
		push	ax		; s
		push	[bp+var_C]	; int
		mov	ax, [bp+var_A]
		add	ax, [bp+var_E]
		push	ax		; int
		push	word ptr _display+2 ; int
		push	word ptr _display ; int
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		push	0B3h ; '³'
		push	[bp+var_1A]
		push	0
		push	cs
		call	near ptr @update_shld_guage$qiii ; update_shld_guage(int,int,int)
		add	sp, 6
		push	0Fh		; char
		push	ds
		push	offset aSum_1	; "sum"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_C69C::				; CODE XREF: show_stats(void)+65Bj
					; show_stats(void)+66Fj
		push	word_2B8BC
		push	_the_game
		call	@game_manager@voc_playing$qv ; game_manager::voc_playing(void)
		add	sp, 4
		or	al, al
		jnz	loc_C69C
		nop
		push	cs
		call	near ptr @wait_for_user$qv ; wait_for_user(void)
		mov	ax, [bp+var_2]
		mov	_air_supply, ax
		mov	ax, [bp+var_4]
		mov	_shld_supply, ax
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4
		push	ds
		push	offset aAdd_2	; "add"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_sound$qnuc	; game_manager::remove_sound(uchar *)
		add	sp, 8
		push	ds
		push	offset aSum_2	; "sum"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_sound$qnuc	; game_manager::remove_sound(uchar *)
		add	sp, 8
		push	1Dh
		push	18h
		push	2
		push	30h ; '0'
		call	@i_set_text$qucucucuc ;	i_set_text(uchar,uchar,uchar,uchar)
		add	sp, 8
		push	word_2B8BC
		push	_the_game
		call	@game_manager@reset_sound$qv ; game_manager::reset_sound(void)
		add	sp, 4
		push	300h		; n
		push	word ptr [bp+dest+2]
		push	word ptr [bp+dest] ; src
		push	ds
		push	offset _palette	; dest
		call	_memcpy
		add	sp, 0Ah
		push	word ptr [bp+dest+2]
		push	word ptr [bp+dest] ; block
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4
		leave
		retf
@show_stats$qv	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; show_prelude(void)
@show_prelude$qv proc far		; CODE XREF: play_game(uchar)+F7p

var_4		= dword	ptr -4

		enter	4, 0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@blank_palette$qv ;	vga_display::blank_palette(void)
		add	sp, 4
		push	word_2B8BC
		push	_the_game
		call	@game_manager@reset_sound$qv ; game_manager::reset_sound(void)
		add	sp, 4
		push	1
		push	2
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@copy_page$qucuc ; vga_display::copy_page(uchar,uchar)
		assume es:nothing
		add	sp, 8
		push	0
		push	0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@cls$qucuc ; vga_display::cls(uchar,uchar)
		add	sp, 8
		push	1
		push	0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@cls$qucuc ; vga_display::cls(uchar,uchar)
		add	sp, 8
		push	word_2A700
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@show_offset$qui ; vga_display::show_offset(uint)
		assume es:nothing
		add	sp, 6
		push	0		; int
		push	0		; char
		push	32h ; '2'       ; int
		push	50h ; 'P'       ; int
		push	ds
		push	offset aPrelude_l ; "prelude.l"
		nop
		push	cs
		call	near ptr @show_loop$qnuciiucui ; show_loop(uchar *,int,int,uchar,uint)
		add	sp, 0Ch
		push	9Fh ; ''
		push	87h ; ''
		push	2
		push	80h ; ''
		call	@i_set_text$qucucucuc ;	i_set_text(uchar,uchar,uchar,uchar)
		add	sp, 8
		push	1		; char
		mov	al, _cur_map
		mov	ah, 0
		imul	ax, 14h
		mov	bx, ax
		push	word ptr [bx+236h]
		push	word ptr [bx+234h] ; s
		push	64h ; 'd'       ; int
		push	0		; int
		push	word ptr _display+2 ; int
		push	word ptr _display ; int
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		assume es:seg2608
		add	sp, 0Eh
		push	1Dh
		push	18h
		push	2
		push	30h ; '0'
		call	@i_set_text$qucucucuc ;	i_set_text(uchar,uchar,uchar,uchar)
		assume es:nothing
		add	sp, 8
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@set_palette$qv ; vga_display::set_palette(void)
		add	sp, 4
		push	0Dh		; char
		push	ds
		push	offset aFire2_0	; "fire2"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		assume es:nothing
		add	sp, 0Ah
		push	word_2B8BC
		push	_the_game
		call	@game_manager@doit$qv ;	game_manager::doit(void)
		add	sp, 4
		mov	[bp+var_4], offset unk_2C0E0
		jmp	loc_C86A
; ---------------------------------------------------------------------------

loc_C84F::				; CODE XREF: show_prelude(void)+133j
		push	word ptr [bp+var_4]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@show_offset$qui ; vga_display::show_offset(uint)
		assume es:nothing
		add	sp, 6
		sub	[bp+var_4], offset off_284E0
		assume es:nothing

loc_C86A::				; CODE XREF: show_prelude(void)+111j
		cmp	[bp+var_4], 0
		jge	loc_C84F
		assume es:nothing
		push	0
		push	1
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@copy_page$qucuc ; vga_display::copy_page(uchar,uchar)
		assume es:nothing
		add	sp, 8
		push	word_2A700
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@show_offset$qui ; vga_display::show_offset(uint)
		assume es:nothing
		add	sp, 6
		push	0
		push	0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@cls$qucuc ; vga_display::cls(uchar,uchar)
		assume es:nothing
		add	sp, 8
		push	0Eh		; char
		push	ds
		push	offset aExp2_1	; "exp2"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		assume es:nothing
		add	sp, 0Ah
		push	word ptr ds:365Ch
		push	word ptr ds:365Ah
		call	@game_manager@doit$qv ;	game_manager::doit(void)
		add	sp, 4
		push	offset unk_2BFA0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@show_offset$qui ; vga_display::show_offset(uint)
		assume es:nothing
		add	sp, 6
		push	2
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@pause$qui ; vga_display::pause(uint)
		add	sp, 6
		push	word_2A700
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@show_offset$qui ; vga_display::show_offset(uint)
		add	sp, 6
		jmp	$+2
; ---------------------------------------------------------------------------

loc_C90E::				; CODE XREF: show_prelude(void)+1D0j
					; show_prelude(void)+1DBj
		nop
		push	cs
		call	near ptr @de_button$qv ; de_button(void)
		assume es:nothing
		mov	ah, 0
		or	ax, ax
		jz	loc_C90E
		push	0Fh		; char
		push	ds
		push	offset aFire2_1	; "fire2"
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah
		mov	[bp+var_4], offset unk_2C0E0
		jmp	loc_C954
; ---------------------------------------------------------------------------

loc_C939::				; CODE XREF: show_prelude(void)+21Dj
		push	word ptr [bp+var_4]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@show_offset$qui ; vga_display::show_offset(uint)
		assume es:nothing
		add	sp, 6
		sub	[bp+var_4], offset off_284E0
		assume es:nothing

loc_C954::				; CODE XREF: show_prelude(void)+1FBj
		cmp	[bp+var_4], 0
		jge	loc_C939
		assume es:nothing
		push	2
		push	1
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@copy_page$qucuc ; vga_display::copy_page(uchar,uchar)
		assume es:nothing
		add	sp, 8
		jmp	$+2
; ---------------------------------------------------------------------------

loc_C971::				; CODE XREF: show_prelude(void)+233j
					; show_prelude(void)+247j
		push	word_2B8BC
		push	_the_game
		call	@game_manager@voc_playing$qv ; game_manager::voc_playing(void)
		assume es:nothing
		add	sp, 4
		or	al, al
		jnz	loc_C971
		push	word_2B8BC
		push	_the_game
		call	@game_manager@reset_sound$qv ; game_manager::reset_sound(void)
		add	sp, 4
		leave
		retf
@show_prelude$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far show_loop(char *s2,	int, int, char,	int)
@show_loop$qnuciiucui proc far		; CODE XREF: de_doit(void)+6EAp
					; de_doit(void)+6FFp ...

var_6		= dword	ptr -6
var_1		= byte ptr -1
s2		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= byte ptr  0Eh
arg_A		= word ptr  10h

		enter	6, 0
		les	bx, _display
		mov	byte ptr es:[bx+7], 1
		mov	[bp+var_1], 0
		push	word ptr [bp+s2+2]
		push	word ptr [bp+s2] ; s2
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@get_loop$qnuc ; game_manager::get_loop(uchar *)
		assume es:nothing
		add	sp, 8
		mov	word ptr [bp+var_6+2], dx
		mov	word ptr [bp+var_6], ax
		cmp	[bp+var_6], 0
		jnz	loc_CA06
		push	word ptr [bp+s2+2]
		push	word ptr [bp+s2] ; src
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@load_loop$qnuc ; game_manager::load_loop(uchar *)
		add	sp, 8
		mov	word ptr [bp+var_6+2], dx
		mov	word ptr [bp+var_6], ax
		cmp	[bp+var_6], 0
		jnz	loc_CA00
		push	word ptr [bp+s2+2]
		push	word ptr [bp+s2]
		push	ds
		push	offset aLoopDoesNotExi ; "Loop does not	exist."
		call	@terminate$qnuct1 ; terminate(uchar *,uchar *)
; ---------------------------------------------------------------------------
		add	sp, 8

loc_CA00::				; CODE XREF: show_loop(uchar *,int,int,uchar,uint)+55j
		mov	[bp+var_1], 1
		jmp	loc_CA0A
; ---------------------------------------------------------------------------

loc_CA06::				; CODE XREF: show_loop(uchar *,int,int,uchar,uint)+32j
		mov	[bp+var_1], 0

loc_CA0A::				; CODE XREF: show_loop(uchar *,int,int,uchar,uint)+6Dj
		push	0
		push	0
		push	[bp+arg_A]
		mov	al, [bp+arg_8]
		mov	ah, 0
		shl	ax, 2
		les	bx, [bp+var_6]
		assume es:nothing
		add	bx, ax
		les	bx, es:[bx+6]
		assume es:nothing
		push	word ptr es:[bx+2]
		push	word ptr es:[bx]
		mov	al, [bp+arg_8]
		mov	ah, 0
		shl	ax, 2
		les	bx, [bp+var_6]
		assume es:nothing
		add	bx, ax
		les	bx, es:[bx+6]
		assume es:nothing
		mov	ax, [bp+arg_6]
		add	ax, es:[bx+4]
		push	ax
		mov	al, [bp+arg_8]
		mov	ah, 0
		shl	ax, 2
		les	bx, [bp+var_6]
		assume es:nothing
		add	bx, ax
		les	bx, es:[bx+6]
		assume es:nothing
		mov	ax, [bp+arg_4]
		add	ax, es:[bx+6]
		push	ax
		push	[bp+arg_6]
		push	[bp+arg_4]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@put_bits_masked$qiiiinucuiuiuc ; vga_display::put_bits_masked(int,int,int,int,uchar *,uint,uint,uchar)
		assume es:nothing
		add	sp, 16h
		cmp	[bp+var_1], 0
		jz	loc_CA8D
		push	word ptr [bp+s2+2]
		push	word ptr [bp+s2] ; s2
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@remove_loop$qnuc ; game_manager::remove_loop(uchar *)
		assume es:nothing
		add	sp, 8
		assume es:nothing

loc_CA8D::				; CODE XREF: show_loop(uchar *,int,int,uchar,uint)+DEj
		les	bx, _display
		assume es:nothing
		mov	byte ptr es:[bx+7], 0
		leave
		retf
@show_loop$qnuciiucui endp

; ---------------------------------------------------------------------------
		assume es:nothing

; de_left(void)
@de_left$qv:				; DATA XREF: init_game(void)+16Do
		push	bp
		mov	bp, sp
		push	word_2B8BC
		push	_the_game
		call	@game_manager@doit$qv ;	game_manager::doit(void)
		assume es:nothing
		add	sp, 4
		les	bx, dword ptr _the_game
		mov	al, byte_2D3F6
		or	al, es:[bx+29h]
		jmp	$+2
; ---------------------------------------------------------------------------

loc_CAB8::				; CODE XREF: seg03f9:6946j
		pop	bp
		retf
; ---------------------------------------------------------------------------

; de_right(void)
@de_right$qv:				; DATA XREF: init_game(void)+167o
		push	bp
		mov	bp, sp
		push	word_2B8BC
		push	_the_game
		call	@game_manager@doit$qv ;	game_manager::doit(void)
		add	sp, 4
		les	bx, dword ptr _the_game
		mov	al, byte_2D3F8
		or	al, es:[bx+2Ah]
		jmp	$+2
; ---------------------------------------------------------------------------

loc_CADA::				; CODE XREF: seg03f9:6968j
		pop	bp
		retf
; ---------------------------------------------------------------------------

; de_up(void)
@de_up$qv:				; DATA XREF: init_game(void)+161o
		push	bp
		mov	bp, sp
		push	word_2B8BC
		push	_the_game
		call	@game_manager@doit$qv ;	game_manager::doit(void)
		add	sp, 4
		les	bx, dword ptr _the_game
		mov	al, byte_2D3F3
		or	al, es:[bx+27h]
		jmp	$+2
; ---------------------------------------------------------------------------

loc_CAFC::				; CODE XREF: seg03f9:698Aj
		pop	bp
		retf
; ---------------------------------------------------------------------------

; de_down(void)
@de_down$qv:				; DATA XREF: init_game(void)+15Bo
		push	bp
		mov	bp, sp
		push	word_2B8BC
		push	_the_game
		call	@game_manager@doit$qv ;	game_manager::doit(void)
		add	sp, 4
		les	bx, dword ptr _the_game
		mov	al, byte_2D3FB
		or	al, es:[bx+28h]
		jmp	$+2
; ---------------------------------------------------------------------------

loc_CB1E::				; CODE XREF: seg03f9:69ACj
		pop	bp
		retf
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; de_button(void)
@de_button$qv	proc far		; CODE XREF: show_high_scores(uchar)+2B3p
					; show_prelude(void)+1D4p
					; DATA XREF: ...
		push	bp
		mov	bp, sp
		push	word_2B8BC
		push	_the_game
		call	@game_manager@doit$qv ;	game_manager::doit(void)
		assume es:nothing
		add	sp, 4
		les	bx, dword ptr _the_game
		mov	al, byte_2D3E4
		or	al, byte_2D3C7
		or	al, es:[bx+2Bh]
		jmp	$+2
; ---------------------------------------------------------------------------

loc_CB44::				; CODE XREF: de_button(void)+22j
		pop	bp
		retf
@de_button$qv	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; wait_for_user(void)
@wait_for_user$qv proc far		; CODE XREF: show_stats(void)+673p
		push	bp
		mov	bp, sp
		jmp	short loc_CB5B
; ---------------------------------------------------------------------------

loc_CB4B::				; CODE XREF: wait_for_user(void)+1Ej
					; wait_for_user(void)+28j ...
		push	word_2B8BC
		push	_the_game
		call	@game_manager@doit$qv ;	game_manager::doit(void)
		add	sp, 4

loc_CB5B::				; CODE XREF: wait_for_user(void)+3j
		les	bx, dword ptr _the_game
		assume es:nothing
		cmp	byte ptr es:[bx+2Bh], 0
		jnz	short loc_CB4B
		les	bx, _mouse
		cmp	byte ptr es:[bx], 0
		jnz	short loc_CB4B
		cmp	byte_2D3E4, 0
		jnz	short loc_CB4B
		cmp	byte_2D3C7, 0
		jnz	short loc_CB4B
		jmp	short loc_CB90
; ---------------------------------------------------------------------------

loc_CB80::				; CODE XREF: wait_for_user(void)+75j
		push	word_2B8BC
		push	_the_game
		call	@game_manager@doit$qv ;	game_manager::doit(void)
		add	sp, 4

loc_CB90::				; CODE XREF: wait_for_user(void)+38j
		les	bx, dword ptr _the_game
		mov	al, es:[bx+2Bh]
		mov	ah, 0
		or	ax, ax
		jnz	short loc_CBBD
		les	bx, _mouse
		mov	al, es:[bx]
		mov	ah, 0
		or	ax, ax
		jnz	short loc_CBBD
		mov	al, byte_2D3E4
		mov	ah, 0
		or	ax, ax
		jnz	short loc_CBBD
		mov	al, byte_2D3C7
		mov	ah, 0
		or	ax, ax
		jz	short loc_CB80

loc_CBBD::				; CODE XREF: wait_for_user(void)+56j
					; wait_for_user(void)+63j ...
		jmp	short loc_CBCF
; ---------------------------------------------------------------------------

loc_CBBF::				; CODE XREF: wait_for_user(void)+92j
					; wait_for_user(void)+9Cj ...
		push	word_2B8BC
		push	_the_game
		call	@game_manager@doit$qv ;	game_manager::doit(void)
		add	sp, 4

loc_CBCF::				; CODE XREF: wait_for_user(void):loc_CBBDj
		les	bx, dword ptr _the_game
		cmp	byte ptr es:[bx+2Bh], 0
		jnz	short loc_CBBF
		les	bx, _mouse
		cmp	byte ptr es:[bx], 0
		jnz	short loc_CBBF
		cmp	byte_2D3E4, 0
		jnz	short loc_CBBF
		cmp	byte_2D3C7, 0
		jnz	short loc_CBBF
		pop	bp
		retf
@wait_for_user$qv endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; parse_options(int, unsigned char **)
@parse_options$qinnuc proc far		; CODE XREF: _main+Ep

var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= dword	ptr  8

		enter	2, 0
		mov	_debug_mode, 0
		mov	_force_pc_sound, 0
		mov	_zoom_to_map, 0
		mov	[bp+var_2], 0
		jmp	loc_CCA2
; ---------------------------------------------------------------------------

loc_CC0F::				; CODE XREF: parse_options(int,uchar **)+B6j
		push	ds
		push	offset amandich	; "-mandich"
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+arg_2]
		assume es:seg2b53
		add	bx, ax
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; s1
		call	_strcmp
		assume es:seg2608
		add	sp, 8
		or	ax, ax
		jnz	loc_CC36
		mov	_debug_mode, 1

loc_CC36::				; CODE XREF: parse_options(int,uchar **)+3Bj
		push	ds
		push	offset aPcsound	; "-pcsound"
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+arg_2]
		assume es:seg2b53
		add	bx, ax
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; s1
		call	_strcmp
		assume es:seg2608
		add	sp, 8
		or	ax, ax
		jnz	loc_CC5D
		mov	_force_pc_sound, 1

loc_CC5D::				; CODE XREF: parse_options(int,uchar **)+62j
		push	ds
		push	offset aStart	; "-start"
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+arg_2]
		assume es:seg2b53
		add	bx, ax
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; s1
		call	_strcmp
		assume es:seg2608
		add	sp, 8
		or	ax, ax
		jnz	loc_CC9F
		mov	ax, [bp+var_2]
		inc	ax
		shl	ax, 2
		les	bx, [bp+arg_2]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; s
		nop
		push	cs
		call	near ptr @atoi$qnxuc ; atoi(uchar *)
		add	sp, 4
		add	al, 0FFh
		mov	_zoom_to_map, al
		assume es:seg2608

loc_CC9F::				; CODE XREF: parse_options(int,uchar **)+89j
		inc	[bp+var_2]

loc_CCA2::				; CODE XREF: parse_options(int,uchar **)+18j
		mov	ax, [bp+var_2]
		cmp	ax, [bp+arg_0]
		jge	locret_CCAD
		jmp	loc_CC0F
; ---------------------------------------------------------------------------

locret_CCAD::				; CODE XREF: parse_options(int,uchar **)+B4j
		leave
		retf
@parse_options$qinnuc endp

; ---------------------------------------------------------------------------

; bs1_start_up(void)
@bs1_start_up$qv:			; DATA XREF: seg2608:02B0o
		push	bp
		mov	bp, sp
		push	seg seg0b2c
		push	offset @do_bs1$qn7m_actor ; do_bs1(m_actor *)
		push	seg seg0b2c
		push	offset @mv_std$qn7m_actornit2 ;	mv_std(m_actor *,int *,int *)
		push	ds
		push	offset aBs1_bdl_l_1 ; "bs1_bdl.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		assume es:nothing
		mov	byte ptr es:[bx+35h], 1
		les	bx, _act
		mov	byte ptr es:[bx+34h], 1
		les	bx, _act
		mov	eax, _end_door_ptr
		mov	es:[bx+2Ch], eax
		push	0
		push	0
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		push	1DAh
		push	1C4h
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8
		mov	eax, _act
		mov	_boss, eax
		inc	_enemy_count
		pop	bp
		retf
; ---------------------------------------------------------------------------

; bs2_start_up(void)
@bs2_start_up$qv:			; DATA XREF: seg2608:0328o
		push	bp
		mov	bp, sp
		mov	_smart_missiles, 1
		push	seg seg0b2c
		push	offset @do_bs2$qn7m_actor ; do_bs2(m_actor *)
		push	seg seg0b2c
		push	offset @mv_std$qn7m_actornit2 ;	mv_std(m_actor *,int *,int *)
		push	ds
		push	offset aBs2_bod_l_1 ; "bs2_bod.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		mov	byte ptr es:[bx+35h], 1
		les	bx, _act
		mov	word ptr es:[bx+14h], 0FFFFh
		les	bx, _act
		mov	byte ptr es:[bx+34h], 1
		les	bx, _act
		mov	eax, _end_door_ptr
		mov	es:[bx+2Ch], eax
		push	0
		push	0
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		push	70h ; 'p'
		push	1EDh
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)

loc_CDAE::
		add	sp, 8
		mov	eax, _act
		mov	_boss, eax
		inc	_enemy_count
		push	seg seg0b2c
		push	offset @do_bs2_eyes$qn7m_actor ; do_bs2_eyes(m_actor *)
		push	seg seg0b2c
		push	offset @mv_bs2tn$qn7m_actornit2	; mv_bs2tn(m_actor *,int *,int *)
		push	ds
		push	offset aOtiseyes_l_1 ; "otiseyes.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		mov	byte ptr es:[bx+34h], 1
		les	bx, _act
		mov	eax, _boss
		mov	es:[bx+2Ch], eax
		push	82h ; ''
		push	1FBh
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8
		push	0
		push	0
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		les	bx, _act
		or	byte ptr es:[bx+52h], 40h
		les	bx, _act
		mov	ax, es:[bx]
		les	bx, _boss
		sub	ax, es:[bx]
		les	bx, _act
		mov	es:[bx+22h], ax
		les	bx, _act
		mov	ax, es:[bx+2]
		les	bx, _boss
		sub	ax, es:[bx+2]
		les	bx, _act
		mov	es:[bx+24h], ax
		push	seg seg0b2c
		push	offset @do_bs2tn$qn7m_actor ; do_bs2tn(m_actor *)
		push	seg seg0b2c
		push	offset @mv_bs2tn$qn7m_actornit2	; mv_bs2tn(m_actor *,int *,int *)
		push	ds
		push	offset aBs2_tnl2_l_1 ; "bs2_tnl2.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		mov	byte ptr es:[bx+34h], 1
		les	bx, _act
		mov	byte ptr es:[bx+35h], 1
		les	bx, _act
		mov	eax, _boss
		mov	es:[bx+2Ch], eax
		push	1
		push	2
		nop
		push	cs
		call	near ptr @random$qi ; random(int)
		pop	cx
		add	al, 2
		push	ax
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		push	90h ; ''
		push	1CCh
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8
		les	bx, _act
		mov	ax, es:[bx]
		les	bx, _boss
		sub	ax, es:[bx]
		les	bx, _act
		mov	es:[bx+22h], ax
		les	bx, _act
		mov	ax, es:[bx+2]
		les	bx, _boss
		sub	ax, es:[bx+2]
		les	bx, _act
		mov	es:[bx+24h], ax
		push	seg seg0b2c
		push	offset @do_bs2tn$qn7m_actor ; do_bs2tn(m_actor *)
		push	seg seg0b2c
		push	offset @mv_bs2tn$qn7m_actornit2	; mv_bs2tn(m_actor *,int *,int *)
		push	ds
		push	offset aBs2_tnr2_l_1 ; "bs2_tnr2.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		mov	byte ptr es:[bx+34h], 1
		les	bx, _act
		mov	byte ptr es:[bx+35h], 1
		les	bx, _act
		mov	eax, _boss
		mov	es:[bx+2Ch], eax
		push	1
		push	2
		nop
		push	cs
		call	near ptr @random$qi ; random(int)
		pop	cx
		add	al, 2
		push	ax
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		push	90h ; ''
		push	217h
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8
		les	bx, _act
		mov	ax, es:[bx]
		les	bx, _boss
		sub	ax, es:[bx]
		les	bx, _act
		mov	es:[bx+22h], ax
		les	bx, _act
		mov	ax, es:[bx+2]
		les	bx, _boss
		sub	ax, es:[bx+2]
		les	bx, _act
		mov	es:[bx+24h], ax
		push	seg seg0b2c
		push	offset @do_bs2tn$qn7m_actor ; do_bs2tn(m_actor *)
		push	seg seg0b2c
		push	offset @mv_bs2tn$qn7m_actornit2	; mv_bs2tn(m_actor *,int *,int *)
		push	ds
		push	offset aBs2_tnl1_l_1 ; "bs2_tnl1.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		mov	byte ptr es:[bx+34h], 1
		les	bx, _act
		mov	byte ptr es:[bx+35h], 1
		les	bx, _act
		mov	eax, _boss
		mov	es:[bx+2Ch], eax
		push	1
		push	2
		nop
		push	cs
		call	near ptr @random$qi ; random(int)
		pop	cx
		add	al, 2
		push	ax
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		push	94h ; ''
		push	1D0h
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8
		les	bx, _act
		mov	ax, es:[bx]
		les	bx, _boss
		sub	ax, es:[bx]
		les	bx, _act
		mov	es:[bx+22h], ax
		les	bx, _act
		mov	ax, es:[bx+2]
		les	bx, _boss
		sub	ax, es:[bx+2]
		les	bx, _act
		mov	es:[bx+24h], ax
		push	seg seg0b2c
		push	offset @do_bs2tn$qn7m_actor ; do_bs2tn(m_actor *)
		push	seg seg0b2c
		push	offset @mv_bs2tn$qn7m_actornit2	; mv_bs2tn(m_actor *,int *,int *)
		push	ds
		push	offset aBs2_tnr1_l_1 ; "bs2_tnr1.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		mov	byte ptr es:[bx+34h], 1
		les	bx, _act
		mov	byte ptr es:[bx+35h], 1
		les	bx, _act
		mov	eax, _boss
		mov	es:[bx+2Ch], eax
		push	1
		push	2
		nop
		push	cs
		call	near ptr @random$qi ; random(int)
		pop	cx
		add	al, 2
		push	ax
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		push	94h ; ''
		push	213h
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8
		les	bx, _act
		mov	ax, es:[bx]
		les	bx, _boss
		sub	ax, es:[bx]
		les	bx, _act
		mov	es:[bx+22h], ax
		les	bx, _act
		mov	ax, es:[bx+2]
		les	bx, _boss
		sub	ax, es:[bx+2]
		les	bx, _act
		mov	es:[bx+24h], ax
		pop	bp
		retf
; ---------------------------------------------------------------------------

; bs3_start_up(void)
@bs3_start_up$qv:			; DATA XREF: seg2608:03DCo
		push	bp
		mov	bp, sp
		mov	_smart_missiles, 1
		push	seg seg0b2c
		push	offset @do_bs3$qn7m_actor ; do_bs3(m_actor *)
		push	seg seg0b2c
		push	offset @mv_std$qn7m_actornit2 ;	mv_std(m_actor *,int *,int *)
		push	ds
		push	offset aBs3_bdl_l_1 ; "bs3_bdl.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		mov	word ptr es:[bx+14h], 0FFFEh
		les	bx, _act
		mov	byte ptr es:[bx+35h], 1
		les	bx, _act
		mov	byte ptr es:[bx+34h], 1
		les	bx, _act
		mov	eax, _end_door_ptr
		mov	es:[bx+30h], eax
		push	65h ; 'e'
		push	193h
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8
		les	bx, _act
		mov	word ptr es:[bx+26h], 1
		mov	eax, _act
		mov	_boss, eax
		inc	_enemy_count
		push	seg seg0b2c
		push	offset @do_bs3a$qn7m_actor ; do_bs3a(m_actor *)
		push	seg seg0b2c
		push	offset @mv_bs2tn$qn7m_actornit2	; mv_bs2tn(m_actor *,int *,int *)
		push	ds
		push	offset aBs3_arr_l_1 ; "bs3_arr.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		mov	byte ptr es:[bx+35h], 1
		les	bx, _act
		mov	byte ptr es:[bx+34h], 1
		les	bx, _act
		mov	eax, _boss
		mov	es:[bx+2Ch], eax
		push	8Ah ; ''
		push	1A4h
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8
		push	0
		push	0
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		les	bx, _act
		mov	ax, es:[bx]
		les	bx, _boss
		sub	ax, es:[bx]
		les	bx, _act
		mov	es:[bx+22h], ax
		les	bx, _act
		mov	ax, es:[bx+2]
		les	bx, _boss
		sub	ax, es:[bx+2]
		les	bx, _act
		mov	es:[bx+24h], ax
		les	bx, _boss
		mov	ax, es:[bx+10h]
		les	bx, _act
		sub	ax, es:[bx+22h]
		les	bx, _act
		sub	ax, es:[bx+10h]
		add	ax, 0FFF3h
		les	bx, _act
		mov	es:[bx+26h], ax
		les	bx, _boss
		mov	eax, _act
		mov	es:[bx+2Ch], eax
		push	ds
		push	offset aBs3_arl_l_1 ; "bs3_arl.l"
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8
		push	seg seg0b2c
		push	offset @do_bs3_prop$qn7m_actor ; do_bs3_prop(m_actor *)
		push	seg seg0b2c
		push	offset @mv_bs2tn$qn7m_actornit2	; mv_bs2tn(m_actor *,int *,int *)
		push	ds
		push	offset aBs3_prpr_l_1 ; "bs3_prpr.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		mov	byte ptr es:[bx+34h], 1
		les	bx, _act
		mov	eax, _boss
		mov	es:[bx+2Ch], eax
		push	7Dh ; '}'
		push	1E8h
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8
		push	1
		push	1
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		les	bx, _act
		mov	ax, es:[bx]
		les	bx, _boss
		sub	ax, es:[bx]
		les	bx, _act
		mov	es:[bx+22h], ax
		les	bx, _act
		mov	ax, es:[bx+2]
		les	bx, _boss
		sub	ax, es:[bx+2]
		les	bx, _act
		mov	es:[bx+24h], ax
		les	bx, _boss
		mov	ax, es:[bx+10h]
		les	bx, _act
		sub	ax, es:[bx+22h]
		les	bx, _act
		sub	ax, es:[bx+10h]
		les	bx, _act
		mov	es:[bx+26h], ax
		push	ds
		push	offset aBs3_prpl_l_1 ; "bs3_prpl.l"
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8
		push	seg seg0b2c
		push	offset @do_bs3_face$qn7m_actor ; do_bs3_face(m_actor *)
		push	seg seg0b2c
		push	offset @mv_bs2tn$qn7m_actornit2	; mv_bs2tn(m_actor *,int *,int *)
		push	ds
		push	offset aBs3_facr_l_1 ; "bs3_facr.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		mov	byte ptr es:[bx+34h], 1
		les	bx, _act
		mov	eax, _boss
		mov	es:[bx+2Ch], eax
		push	6Bh ; 'k'
		push	1A9h
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8
		push	0Ah
		push	0Fh
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		les	bx, _act
		mov	ax, es:[bx]
		les	bx, _boss
		sub	ax, es:[bx]
		les	bx, _act
		mov	es:[bx+22h], ax
		les	bx, _act
		mov	ax, es:[bx+2]
		les	bx, _boss
		sub	ax, es:[bx+2]
		les	bx, _act
		mov	es:[bx+24h], ax
		les	bx, _boss
		mov	ax, es:[bx+10h]
		les	bx, _act
		sub	ax, es:[bx+22h]
		les	bx, _act
		sub	ax, es:[bx+10h]
		les	bx, _act
		mov	es:[bx+26h], ax
		push	ds
		push	offset aBs3_facl_l_1 ; "bs3_facl.l"
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8
		pop	bp
		retf
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; random(int)
@random$qi	proc far		; CODE XREF: de_doit(void)+375p
					; de_doit(void)+71Dp ...

arg_0		= word ptr  6

		push	bp
		mov	bp, sp
		call	_rand
		movsx	eax, ax
		movsx	edx, [bp+arg_0]
		imul	eax, edx
		mov	ebx, 8000h
		cdq
		idiv	ebx
		jmp	$+2
; ---------------------------------------------------------------------------

loc_D412::				; CODE XREF: random(int)+20j
		pop	bp
		retf
@random$qi	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; abs(int)
@abs$qi		proc far		; CODE XREF: de_doit(void)+501p
					; ego_fire(void)+DEp ...

arg_0		= word ptr  6

		push	bp
		mov	bp, sp
		mov	ax, [bp+arg_0]
		cwd
		xor	ax, dx
		sub	ax, dx
		jmp	$+2
; ---------------------------------------------------------------------------

loc_D421::				; CODE XREF: abs(int)+Bj
		pop	bp
		retf
@abs$qi		endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far button::~button(void far *block, int)
@button@$bdtr$qv proc far		; CODE XREF: show_high_scores(uchar)+355p
					; show_high_scores(uchar)+365p	...

block		= dword	ptr  6
arg_4		= word ptr  0Ah

		push	bp
		mov	bp, sp
		cmp	[bp+block], 0
		jz	loc_D45A
		les	bx, [bp+block]
		assume es:nothing
		mov	word ptr es:[bx], offset @button@ ; `__vtable__'[button]
		push	0		; int
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		nop
		push	cs
		call	near ptr @gui_item@$bdtr$qv ; gui_item::~gui_item(void)
		add	sp, 6
		test	[bp+arg_4], 1
		jz	loc_D45A
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4

loc_D45A::				; CODE XREF: button::~button(void)+8j
					; button::~button(void)+27j
		pop	bp
		retf
@button@$bdtr$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far atoi(char *s)
@atoi$qnxuc	proc far		; CODE XREF: parse_options(int,uchar **)+A0p
					; seg137f:30BCP

s		= dword	ptr  6

		push	bp
		mov	bp, sp
		push	word ptr [bp+s+2]
		push	word ptr [bp+s]	; s
		call	_atol
		add	sp, 4
		jmp	$+2
; ---------------------------------------------------------------------------

loc_D46F::				; CODE XREF: atoi(uchar	*)+11j
		pop	bp
		retf
@atoi$qnxuc	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far gui_item::~gui_item(void far *block, int)
@gui_item@$bdtr$qv proc	far		; CODE XREF: button::~button(void)+1Cp
					; text_box::~text_box(void)+85P ...

block		= dword	ptr  6
arg_4		= word ptr  0Ah

		push	bp
		mov	bp, sp
		cmp	[bp+block], 0
		jz	loc_D498
		les	bx, [bp+block]
		mov	word ptr es:[bx], offset @gui_item@ ; `__vtable__'[gui_item]
		test	[bp+arg_4], 1
		jz	loc_D498
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4

loc_D498::				; CODE XREF: gui_item::~gui_item(void)+8j
					; gui_item::~gui_item(void)+17j
		pop	bp
		retf
@gui_item@$bdtr$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; _DWORD gui_item::draw(filebuf	*__hidden this_)
@gui_item@draw$qv proc far		; DATA XREF: seg2608:`__vtable__'[gui_item]o
					; seg2608:`__vtable__'[text_pager]o

this_		= dword	ptr  6

		push	bp
		mov	bp, sp
		pop	bp
		retf
@gui_item@draw$qv endp

; ---------------------------------------------------------------------------

; gui_item::erase(void)
@gui_item@erase$qv:			; DATA XREF: seg2608:1A1Eo
					; seg2608:1A2Ao ...
		push	bp

loc_D4A0::
		mov	bp, sp
		pop	bp
		retf
seg03f9		ends

; ---------------------------------------------------------------------------
; ===========================================================================

; Segment type:	Pure code
seg0b2c		segment	byte public 'CODE' use16
		assume cs:seg0b2c
		;org 4
		assume es:nothing, ss:nothing, ds:seg2608, fs:nothing, gs:nothing

; gui_item::poll(void)
@gui_item@poll$qv:
		push	bp
		mov	bp, sp
		mov	al, 0
		jmp	$+2
; ---------------------------------------------------------------------------

loc_D4AB::				; CODE XREF: seg0b2c:0009j
		pop	bp
		retf
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; hit_cur_sub(int, int)
@hit_cur_sub$qii proc far		; CODE XREF: seg0b2c:1A90p
					; seg0b2c:1E17p ...

arg_0		= word ptr  6
arg_2		= word ptr  8

		push	bp
		mov	bp, sp
		les	bx, _cur_sub
		assume es:nothing
		or	byte ptr es:[bx+52h], 8
		les	bx, _cur_sub
		mov	ax, [bp+arg_0]
		add	es:[bx+28h], ax
		les	bx, _cur_sub
		mov	ax, [bp+arg_2]

loc_D4CB::
		mov	es:[bx+1Eh], ax
		pop	bp
		retf
@hit_cur_sub$qii endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far set_flying_death(__int32, char *s2,	char, int, char)
@set_flying_death$qn7m_actornuciiuc proc far ; CODE XREF: seg0b2c:254Fp
					; seg0b2c:28D2p ...

arg_0		= dword	ptr  6
s2		= dword	ptr  0Ah
arg_8		= byte ptr  0Eh
arg_A		= word ptr  10h
arg_C		= byte ptr  12h

		push	bp
		mov	bp, sp
		push	word ptr [bp+s2+2]
		push	word ptr [bp+s2] ; s2
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0] ; __int32
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8
		mov	al, [bp+arg_C]
		push	ax
		mov	al, [bp+arg_8]
		push	ax
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	byte ptr es:[bx+3Dh], 2
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_A]
		mov	es:[bx+16h], ax
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+14h], 0
		les	bx, [bp+arg_0]

loc_D51C::
		mov	byte ptr es:[bx+35h], 0
		les	bx, [bp+arg_0]
		and	byte ptr es:[bx+52h], 0FEh
		inc	_enemies_killed
		pop	bp
		retf
@set_flying_death$qn7m_actornuciiuc endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; check_flying_death(m_actor *)
@check_flying_death$qn7m_actor proc far	; CODE XREF: seg0b2c:236Ep
					; seg0b2c:27DEp ...

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx+3Dh], 2
		jnz	loc_D55D
		les	bx, [bp+arg_0]
		inc	word ptr es:[bx+16h]
		les	bx, [bp+arg_0]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jnz	loc_D55B
		les	bx, [bp+arg_0]
		or	byte ptr es:[bx+52h], 1

loc_D55B::				; CODE XREF: check_flying_death(m_actor	*)+22j
		jmp	$+2
; ---------------------------------------------------------------------------

loc_D55D::				; CODE XREF: check_flying_death(m_actor	*)+Bj
					; check_flying_death(m_actor *):loc_D55Bj
		pop	bp
		retf
@check_flying_death$qn7m_actor endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; check_for_hit(m_actor	*, unsigned char)
@check_for_hit$qn7m_actoruc proc far	; CODE XREF: seg0b2c:0D99p
					; seg0b2c:145Ep ...

arg_0		= dword	ptr  6
arg_4		= byte ptr  0Ah

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		mov	al, es:[bx+52h]
		shr	ax, 3
		and	ax, 1
		or	ax, ax
		jz	loc_D5A3
		les	bx, [bp+arg_0]
		and	byte ptr es:[bx+52h], 0F7h
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+36h], 0Fh
		mov	al, [bp+arg_4]
		mov	ah, 0
		les	bx, [bp+arg_0]
		cmp	ax, es:[bx+28h]
		jg	loc_D59F
		les	bx, [bp+arg_0]
		or	byte ptr es:[bx+52h], 1
		mov	al, 2

loc_D59B::				; CODE XREF: check_for_hit(m_actor *,uchar)+42j
					; check_for_hit(m_actor	*,uchar)+46j
		jmp	loc_D5A7
; ---------------------------------------------------------------------------
		jmp	loc_D5A3
; ---------------------------------------------------------------------------

loc_D59F::				; CODE XREF: check_for_hit(m_actor *,uchar)+30j
		mov	al, 1
		jmp	loc_D59B
; ---------------------------------------------------------------------------

loc_D5A3::				; CODE XREF: check_for_hit(m_actor *,uchar)+12j
					; check_for_hit(m_actor	*,uchar)+3Ej
		mov	al, 0
		jmp	loc_D59B
; ---------------------------------------------------------------------------

loc_D5A7::				; CODE XREF: check_for_hit(m_actor *,uchar):loc_D59Bj
		pop	bp
		retf
@check_for_hit$qn7m_actoruc endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; check_vertical_ray(m_actor *,	unsigned int)
@check_vertical_ray$qn7m_actorui proc far ; CODE XREF: do_follow(m_actor *,int,int)+5Bp

var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah

		enter	6, 0
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+18h]
		mov	[bp+var_2], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+0Ah]
		les	bx, _cur_sub
		cmp	ax, es:[bx+0Ah]
		jge	loc_D5E3
		les	bx, [bp+arg_0]
		mov	bx, es:[bx+1Ch]
		shl	bx, 1
		mov	ax, word ptr (_the_map+2)[bx]
		add	[bp+var_2], ax
		les	bx, _the_map
		mov	ax, es:[bx+8Eh]
		jmp	loc_D5EE
; ---------------------------------------------------------------------------

loc_D5E3::				; CODE XREF: check_vertical_ray(m_actor	*,uint)+1Dj
		les	bx, _the_map
		mov	ax, es:[bx+8Eh]
		neg	ax

loc_D5EE::				; CODE XREF: check_vertical_ray(m_actor	*,uint)+38j
		mov	[bp+var_4], ax
		cmp	[bp+arg_4], 1
		jnb	loc_D5FC
		mov	[bp+arg_4], 1

loc_D5FC::				; CODE XREF: check_vertical_ray(m_actor	*,uint)+4Cj
		jmp	loc_D639
; ---------------------------------------------------------------------------

loc_D5FE::				; CODE XREF: check_vertical_ray(m_actor	*,uint)+98j
		mov	[bp+var_6], 0
		jmp	loc_D627
; ---------------------------------------------------------------------------

loc_D605::				; CODE XREF: check_vertical_ray(m_actor	*,uint)+88j
		mov	ax, [bp+var_2]
		add	ax, [bp+var_6]
		shl	ax, 2
		les	bx, _the_map
		les	bx, es:[bx+39Eh]
		add	bx, ax
		cmp	word ptr es:[bx], 100h
		jnb	loc_D624
		mov	al, 0

loc_D622::				; CODE XREF: check_vertical_ray(m_actor	*,uint)+9Cj
		jmp	locret_D647
; ---------------------------------------------------------------------------

loc_D624::				; CODE XREF: check_vertical_ray(m_actor	*,uint)+75j
		inc	[bp+var_6]

loc_D627::				; CODE XREF: check_vertical_ray(m_actor	*,uint)+5Aj
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+1Ah]
		cmp	ax, [bp+var_6]
		jg	loc_D605
		mov	ax, [bp+var_4]
		add	[bp+var_2], ax

loc_D639::				; CODE XREF: check_vertical_ray(m_actor	*,uint):loc_D5FCj
		mov	ax, [bp+arg_4]
		dec	[bp+arg_4]
		or	ax, ax
		jnz	loc_D5FE
		mov	al, 1
		jmp	loc_D622
; ---------------------------------------------------------------------------

locret_D647::				; CODE XREF: check_vertical_ray(m_actor	*,uint):loc_D622j
		leave
		retf
@check_vertical_ray$qn7m_actorui endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; check_horizontal_ray(m_actor *, unsigned int)
@check_horizontal_ray$qn7m_actorui proc	far ; CODE XREF: do_follow(m_actor *,int,int)+44p

var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah

		enter	4, 0
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+18h]
		les	bx, [bp+arg_0]
		mov	bx, es:[bx+1Ch]
		sar	bx, 1
		shl	bx, 1
		add	ax, word ptr _tbl_mul_tw[bx]
		mov	[bp+var_2], ax
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx+34h], 0
		jnz	loc_D681
		mov	[bp+var_4], 1
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+1Ah]
		add	[bp+var_2], ax
		jmp	loc_D686
; ---------------------------------------------------------------------------

loc_D681::				; CODE XREF: check_horizontal_ray(m_actor *,uint)+25j
		mov	[bp+var_4], 0FFFFh

loc_D686::				; CODE XREF: check_horizontal_ray(m_actor *,uint)+36j
		cmp	[bp+arg_4], 1
		jnb	loc_D691
		mov	[bp+arg_4], 1

loc_D691::				; CODE XREF: check_horizontal_ray(m_actor *,uint)+41j
		jmp	loc_D6B5
; ---------------------------------------------------------------------------

loc_D693::				; CODE XREF: check_horizontal_ray(m_actor *,uint)+74j
		les	bx, _the_map
		les	bx, es:[bx+39Eh]
		mov	ax, [bp+var_2]
		shl	ax, 2
		add	bx, ax
		cmp	word ptr es:[bx], 100h
		jnb	loc_D6AF
		mov	al, 0

loc_D6AD::				; CODE XREF: check_horizontal_ray(m_actor *,uint)+78j
		jmp	locret_D6C3
; ---------------------------------------------------------------------------

loc_D6AF::				; CODE XREF: check_horizontal_ray(m_actor *,uint)+60j
		mov	ax, [bp+var_4]
		add	[bp+var_2], ax

loc_D6B5::				; CODE XREF: check_horizontal_ray(m_actor *,uint):loc_D691j
		mov	ax, [bp+arg_4]
		dec	[bp+arg_4]
		or	ax, ax
		jnz	loc_D693
		mov	al, 1
		jmp	loc_D6AD
; ---------------------------------------------------------------------------

locret_D6C3::				; CODE XREF: check_horizontal_ray(m_actor *,uint):loc_D6ADj
		leave
		retf
@check_horizontal_ray$qn7m_actorui endp

		assume es:seg2b53

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; check_new_pos(m_actor	*, int,	int, int *, int	*, int,	int, int)
@check_new_pos$qn7m_actoriinit4iii proc	far ; CODE XREF: seg0b2c:040Bp
					; seg0b2c:04C4p ...

var_E		= word ptr -0Eh
var_B		= byte ptr -0Bh
var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= dword	ptr  0Eh
arg_C		= dword	ptr  12h
arg_10		= word ptr  16h
arg_12		= word ptr  18h
arg_14		= word ptr  1Ah

		enter	0Eh, 0
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx]
		mov	[bp+var_2], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2]
		mov	[bp+var_4], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+18h]
		mov	[bp+var_6], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+14h]
		mov	[bp+var_8], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+16h]
		mov	[bp+var_A], ax
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_4]
		mov	es:[bx], ax
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_6]
		mov	es:[bx+2], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx]
		sar	ax, 3
		les	bx, [bp+arg_0]
		mov	bx, es:[bx+2]
		sar	bx, 3
		shl	bx, 1
		mov	dx, word ptr _tbl_mul_tw[bx]
		add	dx, ax
		les	bx, [bp+arg_0]
		mov	es:[bx+18h], dx
		push	[bp+arg_14]
		push	[bp+arg_12]
		push	[bp+arg_10]
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		call	@m_actor@tile_collision$qiii ; m_actor::tile_collision(int,int,int)
		assume es:nothing
		add	sp, 0Ah
		mov	ah, 0
		mov	[bp+var_E], ax
		cmp	[bp+var_E], 0
		jz	loc_D758
		or	[bp+var_E], 8000h
		jmp	loc_D7C4
; ---------------------------------------------------------------------------

loc_D758::				; CODE XREF: check_new_pos(m_actor *,int,int,int *,int *,int,int,int)+8Aj
		mov	[bp+var_B], 0
		jmp	loc_D7BB
; ---------------------------------------------------------------------------

loc_D75E::				; CODE XREF: check_new_pos(m_actor *,int,int,int *,int *,int,int,int)+FDj
		mov	al, [bp+var_B]
		mov	ah, 0
		shl	ax, 2
		mov	bx, ax
		mov	ax, word_2B78C[bx]
		mov	dx, _barrier_list[bx]
		mov	word ptr _act+2, ax
		mov	word ptr _act, dx
		mov	eax, _act
		cmp	eax, [bp+arg_0]
		jz	loc_D7B8
		push	word ptr _act+2
		push	word ptr _act
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		call	@touching$qn7m_actort1 ; touching(m_actor *,m_actor *)
		assume es:nothing
		add	sp, 8
		or	al, al
		jz	loc_D7B8
		assume es:nothing
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx]
		les	bx, _act
		assume es:nothing
		cmp	ax, es:[bx]
		jge	loc_D7B1
		mov	[bp+var_E], 80h	; ''
		jmp	loc_D7B6
; ---------------------------------------------------------------------------

loc_D7B1::				; CODE XREF: check_new_pos(m_actor *,int,int,int *,int *,int,int,int)+E3j
		mov	[bp+var_E], 20h	; ' '

loc_D7B6::				; CODE XREF: check_new_pos(m_actor *,int,int,int *,int *,int,int,int)+EAj
		jmp	loc_D7C4
; ---------------------------------------------------------------------------
		assume es:nothing

loc_D7B8::				; CODE XREF: check_new_pos(m_actor *,int,int,int *,int *,int,int,int)+BAj
					; check_new_pos(m_actor	*,int,int,int *,int *,int,int,int)+D4j
		inc	[bp+var_B]

loc_D7BB::				; CODE XREF: check_new_pos(m_actor *,int,int,int *,int *,int,int,int)+97j
		mov	al, [bp+var_B]
		cmp	al, _barrier_count
		jb	loc_D75E
		assume es:nothing

loc_D7C4::				; CODE XREF: check_new_pos(m_actor *,int,int,int *,int *,int,int,int)+91j
					; check_new_pos(m_actor	*,int,int,int *,int *,int,int,int):loc_D7B6j
		test	[bp+var_E], 5
		jz	loc_D7D0
		assume es:nothing
		mov	[bp+var_A], 1
		assume es:nothing

loc_D7D0::				; CODE XREF: check_new_pos(m_actor *,int,int,int *,int *,int,int,int)+104j
		test	[bp+var_E], 0Ah
		jz	loc_D7DC
		assume es:nothing
		mov	[bp+var_8], 1
		assume es:nothing

loc_D7DC::				; CODE XREF: check_new_pos(m_actor *,int,int,int *,int *,int,int,int)+110j
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, [bp+var_2]
		mov	es:[bx], ax
		les	bx, [bp+arg_0]
		mov	ax, [bp+var_4]
		mov	es:[bx+2], ax
		les	bx, [bp+arg_0]
		mov	ax, [bp+var_6]
		mov	es:[bx+18h], ax
		les	bx, [bp+arg_8]
		assume es:seg2b53
		mov	ax, [bp+var_8]
		mov	es:[bx], ax
		les	bx, [bp+arg_C]
		mov	ax, [bp+var_A]
		mov	es:[bx], ax
		mov	ax, [bp+var_E]
		jmp	$+2
; ---------------------------------------------------------------------------

locret_D810::				; CODE XREF: check_new_pos(m_actor *,int,int,int *,int *,int,int,int)+149j
		leave
		retf
@check_new_pos$qn7m_actoriinit4iii endp

; ---------------------------------------------------------------------------
		assume es:nothing

; mv_ego(m_actor *, int	*, int *)
@mv_ego$qn7m_actornit2:			; DATA XREF: start_room(uchar *)+2D2o
					; start_room(uchar *)+304o ...
		enter	8, 0
		push	si
		les	bx, [bp+0Eh]
		assume es:seg2b53
		cmp	word ptr es:[bx], 0
		jge	loc_D828
		les	bx, [bp+0Eh]
		assume es:nothing
		mov	word ptr es:[bx], 0
		assume es:seg2b53

loc_D828::				; CODE XREF: seg0b2c:037Ej
		les	bx, [bp+6]
		assume es:nothing
		mov	al, es:[bx+52h]
		shr	ax, 6
		and	ax, 1
		or	ax, ax
		jz	loc_D871
		les	bx, [bp+6]
		assume es:nothing
		push	es
		les	si, [bp+0Eh]
		mov	ax, es:[si]
		pop	es
		sub	ax, es:[bx+16h]
		sar	ax, 3
		inc	ax
		shl	ax, 3
		dec	ax
		mov	[bp-2],	ax
		les	bx, [bp+0Eh]
		mov	ax, es:[bx]
		cmp	ax, [bp-2]
		jge	loc_D871
		les	bx, [bp+6]
		cmp	word ptr es:[bx+16h], 0
		jg	loc_D871
		les	bx, [bp+0Eh]
		mov	ax, [bp-2]
		mov	es:[bx], ax
		assume es:nothing

loc_D871::				; CODE XREF: seg0b2c:0397j
					; seg0b2c:03BCj ...
		mov	eax, [bp+6]
		cmp	eax, _jason
		jnz	loc_D884
		assume es:nothing
		push	0
		push	2
		push	4
		jmp	loc_D88E
; ---------------------------------------------------------------------------
		assume es:nothing

loc_D884::				; CODE XREF: seg0b2c:03DAj
		push	1
		push	_ego_map_h
		push	_ego_map_w

loc_D88E::				; CODE XREF: seg0b2c:03E2j
		push	ss
		lea	ax, [bp-6]
		push	ax
		push	ss
		lea	ax, [bp-4]
		push	ax
		les	bx, [bp+0Eh]
		assume es:seg2b53
		push	word ptr es:[bx]
		les	bx, [bp+0Ah]
		push	word ptr es:[bx]
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @check_new_pos$qn7m_actoriinit4iii ; check_new_pos(m_actor *,int,int,int *,int	*,int,int,int)
		add	sp, 16h
		mov	[bp-8],	ax
		cmp	word ptr [bp-8], 0
		jz	loc_D8F1
		cmp	word ptr [bp-4], 0
		jz	loc_D8D5
		les	bx, [bp+6]
		assume es:nothing
		mov	ax, es:[bx]
		les	bx, [bp+0Ah]
		assume es:seg2b53
		mov	es:[bx], ax
		les	bx, [bp+6]
		assume es:nothing
		mov	word ptr es:[bx+14h], 0

loc_D8D5::				; CODE XREF: seg0b2c:041Ej
		cmp	word ptr [bp-6], 0
		jz	loc_D8F1
		les	bx, [bp+6]
		mov	ax, es:[bx+2]
		les	bx, [bp+0Eh]
		assume es:seg2b53
		mov	es:[bx], ax
		les	bx, [bp+6]
		assume es:nothing
		mov	word ptr es:[bx+16h], 0
		assume es:seg2b53

loc_D8F1::				; CODE XREF: seg0b2c:0418j
					; seg0b2c:0439j
		pop	si
		leave
		retf
; ---------------------------------------------------------------------------

; mv_pirana(m_actor *, int *, int *)
@mv_pirana$qn7m_actornit2:		; DATA XREF: add_map_item(uint,uint)+534o
					; add_map_item(uint,uint)+570o
		push	bp
		mov	bp, sp
		les	bx, [bp+6]
		assume es:nothing
		mov	al, es:[bx+52h]
		shr	ax, 7
		and	ax, 1
		or	ax, ax
		jnz	loc_D921
		les	bx, [bp+6]
		mov	ax, es:[bx]
		les	bx, [bp+0Ah]
		mov	es:[bx], ax
		les	bx, [bp+6]
		mov	ax, es:[bx+2]
		les	bx, [bp+0Eh]
		mov	es:[bx], ax

loc_D921::				; CODE XREF: seg0b2c:0466j
		push	word ptr [bp+10h]
		push	word ptr [bp+0Eh]
		push	word ptr [bp+0Ch]
		push	word ptr [bp+0Ah]
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		nop
		push	cs
		call	near ptr @mv_std$qn7m_actornit2	; mv_std(m_actor *,int *,int *)
		add	sp, 0Ch
		pop	bp
		retf
; ---------------------------------------------------------------------------
		assume es:nothing

; mv_barrel(m_actor *, int *, int *)
@mv_barrel$qn7m_actornit2:		; DATA XREF: add_barrel(uint,uint)+5Co
		enter	6, 0
		push	0
		push	0
		push	0
		push	ss
		lea	ax, [bp-4]
		push	ax
		push	ss
		lea	ax, [bp-2]
		push	ax
		les	bx, [bp+0Eh]
		assume es:seg2b53
		push	word ptr es:[bx]
		les	bx, [bp+0Ah]
		push	word ptr es:[bx]
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @check_new_pos$qn7m_actoriinit4iii ; check_new_pos(m_actor *,int,int,int *,int	*,int,int,int)
		add	sp, 16h
		mov	[bp-6],	ax
		cmp	word ptr [bp-6], 0
		jz	loc_D99E
		test	word ptr [bp-6], 8000h
		jz	loc_D986
		les	bx, [bp+6]
		assume es:nothing
		mov	dword ptr es:[bx+42h], 0

loc_D986::				; CODE XREF: seg0b2c:04D8j
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 0
		les	bx, [bp+6]
		mov	ax, es:[bx+2]
		les	bx, [bp+0Eh]
		assume es:seg2b53
		mov	es:[bx], ax
		jmp	locret_D9AF
; ---------------------------------------------------------------------------

loc_D99E::				; CODE XREF: seg0b2c:04D1j
		les	bx, [bp+6]
		assume es:nothing
		cmp	word ptr es:[bx+16h], 2
		jz	locret_D9AF
		les	bx, [bp+6]
		inc	word ptr es:[bx+16h]

locret_D9AF::				; CODE XREF: seg0b2c:04FCj
					; seg0b2c:0506j
		leave
		retf
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; mv_std(m_actor *, int	*, int *)
@mv_std$qn7m_actornit2 proc far		; CODE XREF: seg0b2c:0495p
					; DATA XREF: add_map_item(uint,uint)+126o ...

var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= dword	ptr  0Ah
arg_8		= dword	ptr  0Eh

		enter	6, 0
		push	0
		push	0
		push	0
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		push	ss
		lea	ax, [bp+var_2]
		push	ax
		les	bx, [bp+arg_8]
		assume es:seg2b53
		push	word ptr es:[bx]
		les	bx, [bp+arg_4]
		push	word ptr es:[bx]
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		push	cs
		call	near ptr @check_new_pos$qn7m_actoriinit4iii ; check_new_pos(m_actor *,int,int,int *,int	*,int,int,int)
		add	sp, 16h
		mov	[bp+var_6], ax
		cmp	[bp+var_6], 0
		jz	locret_DA24
		cmp	[bp+var_2], 0
		jz	loc_DA01
		les	bx, [bp+arg_0]
		assume es:nothing
		or	byte ptr es:[bx+52h], 40h
		les	bx, [bp+arg_0]
		mov	ax, es:[bx]
		les	bx, [bp+arg_4]
		mov	es:[bx], ax

loc_DA01::				; CODE XREF: mv_std(m_actor *,int *,int	*)+3Aj
		cmp	[bp+var_4], 0
		jz	locret_DA24
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+16h]
		neg	ax
		les	bx, [bp+arg_0]
		mov	es:[bx+16h], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2]
		les	bx, [bp+arg_8]
		mov	es:[bx], ax
		assume es:seg2b53

locret_DA24::				; CODE XREF: mv_std(m_actor *,int *,int	*)+34j
					; mv_std(m_actor *,int *,int *)+54j
		leave
		retf
@mv_std$qn7m_actornit2 endp

; ---------------------------------------------------------------------------
		assume es:nothing

; mv_pace(m_actor *, int *, int	*)
@mv_pace$qn7m_actornit2:		; DATA XREF: add_map_item(uint,uint)+6D0o
					; add_map_item(uint,uint)+70Co	...
		enter	8, 0
		push	si
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+3Dh], 2
		jnz	loc_DA38
		jmp	loc_DB3C
; ---------------------------------------------------------------------------

loc_DA38::				; CODE XREF: seg0b2c:0593j
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jnz	loc_DA4B
		jmp	loc_DB2E
; ---------------------------------------------------------------------------
		assume es:nothing

loc_DA4B::				; CODE XREF: seg0b2c:05A6j
		les	bx, [bp+6]
		mov	ax, es:[bx+18h]
		les	bx, [bp+6]
		mov	bx, es:[bx+1Ch]
		shl	bx, 1
		add	ax, word ptr _tbl_mul_tw[bx]
		mov	[bp-2],	ax
		les	bx, _the_map
		assume es:nothing
		mov	ax, [bp-2]
		sub	ax, es:[bx+8Eh]
		mov	[bp-4],	ax
		les	bx, [bp+6]
		assume es:nothing
		cmp	word ptr es:[bx+14h], 0
		jle	loc_DA8F
		les	bx, [bp+6]
		mov	ax, es:[bx+1Ah]
		add	[bp-4],	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+1Ah]
		add	[bp-2],	ax

loc_DA8F::				; CODE XREF: seg0b2c:05D9j
		les	bx, _the_map
		assume es:nothing
		les	bx, es:[bx+39Eh]
		assume es:nothing
		mov	ax, [bp-2]
		shl	ax, 2
		add	bx, ax
		cmp	word ptr es:[bx], 100h
		ja	loc_DABF
		les	bx, _the_map
		assume es:nothing
		les	bx, es:[bx+39Eh]
		assume es:nothing
		mov	ax, [bp-4]
		shl	ax, 2
		add	bx, ax
		cmp	word ptr es:[bx], 100h
		jnb	loc_DAC1

loc_DABF::				; CODE XREF: seg0b2c:0605j
		jmp	loc_DB26
; ---------------------------------------------------------------------------

loc_DAC1::				; CODE XREF: seg0b2c:061Dj
		les	bx, [bp+6]
		assume es:nothing
		mov	ax, es:[bx]
		mov	[bp-8],	ax
		les	bx, [bp+6]
		push	es
		les	si, [bp+0Ah]
		assume es:seg2b53
		mov	ax, es:[si]
		pop	es
		assume es:nothing
		add	ax, es:[bx+14h]
		les	bx, [bp+6]
		mov	es:[bx], ax
		mov	word ptr [bp-6], 0
		jmp	loc_DB14
; ---------------------------------------------------------------------------

loc_DAE6::				; CODE XREF: seg0b2c:067Cj
		mov	bx, [bp-6]
		shl	bx, 2
		push	word_2B78C[bx]
		push	_barrier_list[bx]
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@touching$qn7m_actort1 ; touching(m_actor *,m_actor *)
		add	sp, 8
		or	al, al
		jz	loc_DB11
		les	bx, [bp+6]
		assume es:nothing
		mov	ax, [bp-8]
		mov	es:[bx], ax
		jmp	loc_DB26
; ---------------------------------------------------------------------------
		assume es:nothing

loc_DB11::				; CODE XREF: seg0b2c:0664j
		inc	word ptr [bp-6]

loc_DB14::				; CODE XREF: seg0b2c:0644j
		mov	al, _barrier_count
		mov	ah, 0
		cmp	ax, [bp-6]
		ja	loc_DAE6
		assume es:nothing
		les	bx, [bp+6]
		assume es:nothing
		mov	ax, [bp-8]
		jmp	loc_DB37
; ---------------------------------------------------------------------------
		assume es:nothing

loc_DB26::				; CODE XREF: seg0b2c:loc_DABFj
					; seg0b2c:066Fj
		les	bx, [bp+6]
		assume es:nothing
		or	byte ptr es:[bx+52h], 40h
		assume es:nothing

loc_DB2E::				; CODE XREF: seg0b2c:05A8j
		les	bx, [bp+6]
		mov	ax, es:[bx]
		les	bx, [bp+0Ah]
		assume es:seg2b53

loc_DB37::				; CODE XREF: seg0b2c:0684j
		mov	es:[bx], ax
		jmp	$+2
; ---------------------------------------------------------------------------

loc_DB3C::				; CODE XREF: seg0b2c:0595j
					; seg0b2c:069Aj
		pop	si
		leave
		retf
; ---------------------------------------------------------------------------

; mv_shark(m_actor *, int *, int *)
@mv_shark$qn7m_actornit2:		; DATA XREF: add_map_item(uint,uint)+8DBo
					; add_map_item(uint,uint)+90Do
		push	bp
		mov	bp, sp
		push	si
		les	bx, [bp+6]
		assume es:nothing
		mov	al, es:[bx+52h]
		shr	ax, 6
		and	ax, 1
		or	ax, ax
		jnz	loc_DB56
		jmp	loc_DBCD
; ---------------------------------------------------------------------------

loc_DB56::				; CODE XREF: seg0b2c:06B2j
		les	bx, _the_map
		les	bx, es:[bx+39Eh]
		push	es
		les	si, [bp+6]
		mov	ax, es:[si+18h]
		add	ax, 0FFFEh
		shl	ax, 2
		add	bx, ax
		pop	es
		cmp	word ptr es:[bx], 100h
		jnb	loc_DB85
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+34h], 1
		jnz	loc_DB85
		jmp	loc_DBB9
; ---------------------------------------------------------------------------
		jmp	loc_DBB7
; ---------------------------------------------------------------------------

loc_DB85::				; CODE XREF: seg0b2c:06D5j
					; seg0b2c:06DFj
		les	bx, [bp+6]
		mov	ax, es:[bx+18h]
		les	bx, [bp+6]
		add	ax, es:[bx+1Ah]
		add	ax, 2
		shl	ax, 2
		les	bx, _the_map
		les	bx, es:[bx+39Eh]
		add	bx, ax
		cmp	word ptr es:[bx], 100h
		jnb	loc_DBB7
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+34h], 0
		jnz	loc_DBB7
		jmp	loc_DBB9
; ---------------------------------------------------------------------------

loc_DBB7::				; CODE XREF: seg0b2c:06E3j
					; seg0b2c:0709j ...
		jmp	loc_DBCD
; ---------------------------------------------------------------------------

loc_DBB9::				; CODE XREF: seg0b2c:06E1j
					; seg0b2c:0715j
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 80h
		les	bx, [bp+6]
		mov	ax, es:[bx]
		les	bx, [bp+0Ah]
		mov	es:[bx], ax

loc_DBCD::				; CODE XREF: seg0b2c:06B4j
					; seg0b2c:loc_DBB7j
		pop	si
		pop	bp
		retf
; ---------------------------------------------------------------------------

; mv_ship(m_actor *, int *, int	*)
@mv_ship$qn7m_actornit2:		; DATA XREF: add_map_item(uint,uint)+C1Ao
					; add_map_item(uint,uint)+C56o
		enter	2, 0
		les	bx, [bp+6]
		mov	ax, es:[bx+18h]
		les	bx, [bp+6]
		mov	bx, es:[bx+1Ch]
		shl	bx, 1
		add	ax, word ptr (_the_map+2)[bx]
		mov	[bp-2],	ax
		mov	ax, [bp-2]
		dec	ax
		shl	ax, 2
		les	bx, _the_map
		les	bx, es:[bx+39Eh]
		add	bx, ax
		cmp	word ptr es:[bx], 100h
		jnb	loc_DC12
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+34h], 1
		jnz	loc_DC12
		jmp	loc_DC40
; ---------------------------------------------------------------------------
		jmp	loc_DC3E
; ---------------------------------------------------------------------------

loc_DC12::				; CODE XREF: seg0b2c:0762j
					; seg0b2c:076Cj
		les	bx, [bp+6]
		mov	ax, [bp-2]
		add	ax, es:[bx+1Ah]
		inc	ax
		shl	ax, 2
		les	bx, _the_map
		les	bx, es:[bx+39Eh]
		add	bx, ax
		cmp	word ptr es:[bx], 100h
		jnb	loc_DC3E
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+34h], 0
		jnz	loc_DC3E
		jmp	loc_DC40
; ---------------------------------------------------------------------------

loc_DC3E::				; CODE XREF: seg0b2c:0770j
					; seg0b2c:0790j ...
		jmp	locret_DC54
; ---------------------------------------------------------------------------

loc_DC40::				; CODE XREF: seg0b2c:076Ej
					; seg0b2c:079Cj
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 40h
		les	bx, [bp+6]
		mov	ax, es:[bx]
		les	bx, [bp+0Ah]
		mov	es:[bx], ax

locret_DC54::				; CODE XREF: seg0b2c:loc_DC3Ej
		leave
		retf
; ---------------------------------------------------------------------------

; mv_bs2tn(m_actor *, int *, int *)
@mv_bs2tn$qn7m_actornit2:		; DATA XREF: seg03f9:6C56o
					; seg03f9:6CF4o ...
		push	bp
		mov	bp, sp
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+34h], 1
		jnz	loc_DC76
		les	bx, [bp+6]
		les	bx, es:[bx+2Ch]
		mov	ax, es:[bx]
		les	bx, [bp+6]
		add	ax, es:[bx+22h]
		jmp	loc_DC87
; ---------------------------------------------------------------------------

loc_DC76::				; CODE XREF: seg0b2c:07C1j
		les	bx, [bp+6]
		les	bx, es:[bx+2Ch]
		mov	ax, es:[bx]
		les	bx, [bp+6]
		add	ax, es:[bx+26h]

loc_DC87::				; CODE XREF: seg0b2c:07D4j
		les	bx, [bp+0Ah]
		mov	es:[bx], ax
		les	bx, [bp+6]
		les	bx, es:[bx+2Ch]
		mov	ax, es:[bx+2]
		les	bx, [bp+6]
		add	ax, es:[bx+24h]
		les	bx, [bp+0Eh]
		mov	es:[bx], ax
		pop	bp
		retf
; ---------------------------------------------------------------------------
		assume es:nothing

; do_ego(m_actor *)
@do_ego$qn7m_actor:			; DATA XREF: start_room(uchar *)+2CCo
					; start_room(uchar *)+2FEo
		enter	4, 0
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+3Dh], 2
		jz	loc_DCBF
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+3Dh], 6
		jnz	loc_DCC2

loc_DCBF::				; CODE XREF: seg0b2c:0813j
		jmp	locret_DE1A
; ---------------------------------------------------------------------------

loc_DCC2::				; CODE XREF: seg0b2c:081Dj
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 3
		and	ax, 1
		or	ax, ax
		jz	loc_DD3D
		push	0B3h ; '³'
		push	68h ; 'h'
		les	bx, [bp+6]
		mov	ax, es:[bx+28h]
		neg	ax
		push	ax
		call	@update_shld_guage$qiii	; update_shld_guage(int,int,int)
		assume es:nothing
		add	sp, 6
		les	bx, [bp+6]
		assume es:nothing
		mov	byte ptr es:[bx+36h], 20h ; ' '
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 0F7h
		les	bx, [bp+6]
		mov	word ptr es:[bx+28h], 0
		cmp	_jason_present,	0
		jz	loc_DD1C
		mov	al, _jason_on
		mov	ah, 0
		or	ax, ax
		jnz	loc_DD1C
		les	bx, _jason
		assume es:nothing
		or	byte ptr es:[bx+52h], 80h
		assume es:nothing

loc_DD1C::				; CODE XREF: seg0b2c:0868j
					; seg0b2c:0871j
		les	bx, [bp+6]
		cmp	word ptr es:[bx+1Eh], 0
		jz	loc_DD3D
		les	bx, [bp+6]
		mov	ax, es:[bx+1Eh]
		les	bx, [bp+6]
		add	es:[bx+14h], ax
		les	bx, [bp+6]
		mov	word ptr es:[bx+1Eh], 0

loc_DD3D::				; CODE XREF: seg0b2c:0831j
					; seg0b2c:0884j
		cmp	_jason_on, 1
		jnz	loc_DD47
		jmp	locret_DE1A
; ---------------------------------------------------------------------------

loc_DD47::				; CODE XREF: seg0b2c:08A2j
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+3Dh], 1
		jnz	loc_DD84
		les	bx, [bp+6]
		dec	word ptr es:[bx+22h]
		jnz	loc_DD84
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+34h], 1
		jnz	loc_DD6A
		push	ds
		push	offset aSubl_l_2 ; "subl.l"
		jmp	loc_DD6E
; ---------------------------------------------------------------------------

loc_DD6A::				; CODE XREF: seg0b2c:08C2j
		push	ds
		push	offset aSubr_l_3 ; "subr.l"

loc_DD6E::				; CODE XREF: seg0b2c:08C8j
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8
		les	bx, [bp+6]
		mov	byte ptr es:[bx+3Dh], 0

loc_DD84::				; CODE XREF: seg0b2c:08AFj
					; seg0b2c:08B8j
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+3Ah], 0
		jnz	loc_DDE3
		push	2
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_DDE3
		les	bx, [bp+6]
		mov	ax, es:[bx]
		mov	[bp-2],	ax
		push	0Ah
		call	@random$qi	; random(int)
		pop	cx
		les	bx, [bp+6]
		mov	dx, es:[bx+0Ah]
		add	dx, ax
		mov	[bp-4],	dx
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+34h], 0
		jnz	loc_DDCB
		push	0FFFAh
		push	word ptr [bp-4]
		push	word ptr [bp-2]
		jmp	loc_DDDB
; ---------------------------------------------------------------------------

loc_DDCB::				; CODE XREF: seg0b2c:091Fj
		push	6
		push	word ptr [bp-4]
		les	bx, [bp+6]
		mov	ax, [bp-2]
		add	ax, es:[bx+10h]
		push	ax

loc_DDDB::				; CODE XREF: seg0b2c:0929j
		call	@add_bubble$qiii ; add_bubble(int,int,int)
		assume es:nothing
		add	sp, 6
		assume es:nothing

loc_DDE3::				; CODE XREF: seg0b2c:08ECj
					; seg0b2c:08F8j
		push	100h
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@on_tile$qi ; m_actor::on_tile(int)
		add	sp, 6
		cmp	al, 3
		jnz	locret_DE1A
		assume es:nothing
		push	0A7h ; '§'
		push	68h ; 'h'
		push	5
		call	@update_air_guage$qiii ; update_air_guage(int,int,int)
		assume es:nothing
		add	sp, 6
		les	bx, [bp+6]
		assume es:nothing
		cmp	word ptr es:[bx+16h], 0
		jge	locret_DE1A
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 0

locret_DE1A::				; CODE XREF: seg0b2c:loc_DCBFj
					; seg0b2c:08A4j ...
		leave
		retf
; ---------------------------------------------------------------------------
		assume es:nothing

; do_probe(m_actor *)
@do_probe$qn7m_actor:			; DATA XREF: add_jason(void)+6o
		enter	4, 0
		push	si
		les	bx, [bp+6]
		cmp	word ptr es:[bx+16h], 0
		jge	loc_DE49
		push	100h
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@on_tile$qi ; m_actor::on_tile(int)
		add	sp, 6
		or	al, al
		jz	loc_DE49
		assume es:nothing
		les	bx, [bp+6]
		assume es:nothing
		mov	word ptr es:[bx+16h], 0

loc_DE49::				; CODE XREF: seg0b2c:0989j
					; seg0b2c:099Ej
		cmp	_jason_on, 1
		jnz	loc_DE53
		jmp	loc_E08C
; ---------------------------------------------------------------------------

loc_DE53::				; CODE XREF: seg0b2c:09AEj
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+3Dh], 4
		jnz	loc_DEB6
		les	bx, [bp+6]
		assume es:nothing
		dec	word ptr es:[bx+22h]
		jnz	loc_DE6B
		jmp	loc_E169
; ---------------------------------------------------------------------------
		jmp	loc_DEB6
; ---------------------------------------------------------------------------

loc_DE6B::				; CODE XREF: seg0b2c:09C4j
		push	5
		call	@random$qi	; random(int)
		pop	cx
		add	ax, 0FFFEh
		les	bx, [bp+6]
		mov	es:[bx+14h], ax
		push	3
		call	@random$qi	; random(int)
		pop	cx
		dec	ax
		les	bx, [bp+6]
		mov	es:[bx+16h], ax
		les	bx, [bp+6]
		mov	ax, es:[bx]
		and	ax, 2
		cmp	ax, 2
		jnz	loc_DEB3
		push	0
		les	bx, [bp+6]
		push	word ptr es:[bx+0Ah]
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		call	@add_bubble$qiii ; add_bubble(int,int,int)
		add	sp, 6

loc_DEB3::				; CODE XREF: seg0b2c:09F9j
		jmp	loc_E19B
; ---------------------------------------------------------------------------
		assume es:nothing

loc_DEB6::				; CODE XREF: seg0b2c:09BBj
					; seg0b2c:09C9j
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 7
		and	ax, 1
		or	ax, ax
		jnz	loc_DECA
		jmp	loc_DF4F
; ---------------------------------------------------------------------------

loc_DECA::				; CODE XREF: seg0b2c:0A25j
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jz	loc_DF4F
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+3Dh], 0
		jnz	loc_DF47
		push	7
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_DF47
		push	ds
		push	offset aProbspin_l_0 ; "probspin.l"
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8
		push	1
		push	1
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		les	bx, [bp+6]
		assume es:nothing
		mov	byte ptr es:[bx+3Dh], 4
		push	14h
		call	@random$qi	; random(int)
		pop	cx
		add	ax, 14h
		les	bx, [bp+6]
		mov	es:[bx+22h], ax
		push	0Bh
		push	ds
		push	offset aDrillhi_6 ; "drillhi"
		push	word_2B8BC
		push	_the_game
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah
		jmp	loc_E19B
; ---------------------------------------------------------------------------
		assume es:nothing

loc_DF47::				; CODE XREF: seg0b2c:0A42j
					; seg0b2c:0A4Ej
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 7Fh

loc_DF4F::				; CODE XREF: seg0b2c:0A27j
					; seg0b2c:0A38j
		les	bx, _ego
		assume es:nothing
		mov	ax, es:[bx+8]
		les	bx, [bp+6]
		assume es:nothing
		sub	ax, es:[bx+8]
		push	ax
		call	@abs$qi		; abs(int)
		pop	cx
		mov	_diff_x, ax
		les	bx, _ego
		assume es:nothing
		mov	ax, es:[bx+0Ah]
		les	bx, [bp+6]
		assume es:nothing
		sub	ax, es:[bx+0Ah]
		push	ax
		call	@abs$qi		; abs(int)
		pop	cx
		mov	_diff_y, ax
		cmp	_diff_y, 0Ah
		jbe	loc_DFB4
		mov	word ptr [bp-4], 0Ah
		les	bx, [bp+6]
		mov	ax, es:[bx+0Ah]
		les	bx, _ego
		assume es:nothing
		cmp	ax, es:[bx+0Ah]
		jge	loc_DFA9
		les	bx, [bp+6]
		assume es:nothing
		mov	word ptr es:[bx+16h], 3
		jmp	loc_DFB2
; ---------------------------------------------------------------------------
		assume es:nothing

loc_DFA9::				; CODE XREF: seg0b2c:0AFCj
		les	bx, [bp+6]
		assume es:nothing
		mov	word ptr es:[bx+16h], 0FFFDh

loc_DFB2::				; CODE XREF: seg0b2c:0B07j
		jmp	loc_DFC2
; ---------------------------------------------------------------------------

loc_DFB4::				; CODE XREF: seg0b2c:0AE6j
		mov	word ptr [bp-4], 19h
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 0

loc_DFC2::				; CODE XREF: seg0b2c:loc_DFB2j
		mov	ax, _diff_x
		cmp	ax, [bp-4]
		jbe	loc_DFF1
		les	bx, _ego
		assume es:nothing
		mov	ax, es:[bx+8]
		les	bx, [bp+6]
		assume es:nothing
		cmp	ax, es:[bx+8]
		jle	loc_DFE6
		les	bx, [bp+6]
		mov	word ptr es:[bx+14h], 4
		jmp	loc_DFEF
; ---------------------------------------------------------------------------

loc_DFE6::				; CODE XREF: seg0b2c:0B39j
		les	bx, [bp+6]
		mov	word ptr es:[bx+14h], 0FFFCh

loc_DFEF::				; CODE XREF: seg0b2c:0B44j
		jmp	loc_DFFA
; ---------------------------------------------------------------------------

loc_DFF1::				; CODE XREF: seg0b2c:0B28j
		les	bx, [bp+6]
		mov	word ptr es:[bx+14h], 0

loc_DFFA::				; CODE XREF: seg0b2c:loc_DFEFj
		les	bx, [bp+6]
		mov	al, es:[bx+34h]
		les	bx, _ego
		assume es:nothing
		cmp	al, es:[bx+34h]
		jz	loc_E04B
		les	bx, _ego
		cmp	byte ptr es:[bx+34h], 0
		jnz	loc_E02A
		les	bx, [bp+6]
		assume es:nothing
		mov	ax, es:[bx+8]
		les	bx, _ego
		assume es:nothing
		cmp	ax, es:[bx+8]
		jge	loc_E02A
		jmp	loc_E169
; ---------------------------------------------------------------------------

loc_E02A::				; CODE XREF: seg0b2c:0B74j
					; seg0b2c:0B85j
		les	bx, _ego
		cmp	byte ptr es:[bx+34h], 1
		jnz	loc_E049
		les	bx, [bp+6]
		assume es:nothing
		mov	ax, es:[bx+8]
		les	bx, _ego
		assume es:nothing
		cmp	ax, es:[bx+8]
		jle	loc_E049
		jmp	loc_E169
; ---------------------------------------------------------------------------

loc_E049::				; CODE XREF: seg0b2c:0B93j
					; seg0b2c:0BA4j
		jmp	loc_E089
; ---------------------------------------------------------------------------

loc_E04B::				; CODE XREF: seg0b2c:0B69j
		les	bx, _ego
		cmp	byte ptr es:[bx+34h], 0
		jnz	loc_E06A
		les	bx, [bp+6]
		assume es:nothing
		mov	ax, es:[bx+8]
		les	bx, _ego
		assume es:nothing
		cmp	ax, es:[bx+8]
		jle	loc_E06A
		jmp	loc_E169
; ---------------------------------------------------------------------------

loc_E06A::				; CODE XREF: seg0b2c:0BB4j
					; seg0b2c:0BC5j
		les	bx, _ego
		cmp	byte ptr es:[bx+34h], 1
		jnz	loc_E089
		les	bx, [bp+6]
		assume es:nothing
		mov	ax, es:[bx+8]
		les	bx, _ego
		assume es:nothing
		cmp	ax, es:[bx+8]
		jge	loc_E089
		jmp	loc_E169
; ---------------------------------------------------------------------------

loc_E089::				; CODE XREF: seg0b2c:loc_E049j
					; seg0b2c:0BD3j ...
		jmp	loc_E19B
; ---------------------------------------------------------------------------
		assume es:nothing

loc_E08C::				; CODE XREF: seg0b2c:09B0j
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+3Dh], 0
		jz	loc_E099
		jmp	loc_E169
; ---------------------------------------------------------------------------

loc_E099::				; CODE XREF: seg0b2c:0BF4j
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 3
		and	ax, 1
		or	ax, ax
		jz	loc_E106
		les	bx, _ego
		assume es:nothing
		or	byte ptr es:[bx+52h], 8
		les	bx, _ego
		mov	word ptr es:[bx+1Eh], 0
		les	bx, [bp+6]
		assume es:nothing
		mov	ax, es:[bx+28h]
		les	bx, _ego
		assume es:nothing
		mov	es:[bx+28h], ax
		les	bx, [bp+6]
		assume es:nothing
		and	byte ptr es:[bx+52h], 0F7h
		les	bx, [bp+6]
		mov	word ptr es:[bx+28h], 0
		les	bx, [bp+6]
		mov	byte ptr es:[bx+36h], 20h ; ' '
		les	bx, [bp+6]
		cmp	word ptr es:[bx+1Eh], 0
		jz	loc_E106
		les	bx, [bp+6]
		mov	ax, es:[bx+1Eh]
		les	bx, [bp+6]
		add	es:[bx+14h], ax
		les	bx, [bp+6]
		mov	word ptr es:[bx+1Eh], 0

loc_E106::				; CODE XREF: seg0b2c:0C08j
					; seg0b2c:0C4Dj
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+3Ah], 0
		jnz	loc_E167
		push	4
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_E167
		push	3
		call	@random$qi	; random(int)
		pop	cx
		les	bx, [bp+6]
		mov	dx, es:[bx+2]
		add	dx, ax
		add	dx, 4
		mov	[bp-2],	dx
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+34h], 0
		jnz	loc_E14A
		push	0FFFCh
		push	word ptr [bp-2]
		les	bx, [bp+6]
		push	word ptr es:[bx]
		jmp	loc_E15F
; ---------------------------------------------------------------------------

loc_E14A::				; CODE XREF: seg0b2c:0C9Bj
		push	4
		push	word ptr [bp-2]
		les	bx, [bp+6]
		push	es
		les	si, [bp+6]
		mov	ax, es:[si]
		pop	es
		add	ax, es:[bx+10h]
		push	ax

loc_E15F::				; CODE XREF: seg0b2c:0CA8j
		call	@add_bubble$qiii ; add_bubble(int,int,int)
		assume es:nothing
		add	sp, 6
		assume es:nothing

loc_E167::				; CODE XREF: seg0b2c:0C6Ej
					; seg0b2c:0C7Aj
		jmp	loc_E19B
; ---------------------------------------------------------------------------
		assume es:nothing

loc_E169::				; CODE XREF: seg0b2c:09C6j
					; seg0b2c:0B87j ...
		les	bx, [bp+6]
		assume es:nothing
		mov	byte ptr es:[bx+3Dh], 0
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+34h], 0
		jnz	loc_E181
		push	ds
		push	offset aProbel_l_1 ; "probel.l"
		jmp	loc_E185
; ---------------------------------------------------------------------------

loc_E181::				; CODE XREF: seg0b2c:0CD9j
		push	ds
		push	offset aProber_l_2 ; "prober.l"

loc_E185::				; CODE XREF: seg0b2c:0CDFj
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8
		les	bx, [bp+6]
		xor	byte ptr es:[bx+34h], 1
		assume es:nothing

loc_E19B::				; CODE XREF: seg0b2c:loc_DEB3j
					; seg0b2c:0AA4j ...
		pop	si
		leave
		retf
; ---------------------------------------------------------------------------
		assume es:nothing

; do_gun_piece(m_actor *)
@do_gun_piece$qn7m_actor:		; DATA XREF: add_map_item(uint,uint)+845o
		push	bp
		mov	bp, sp
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jnz	loc_E1B3
		jmp	loc_E22B
; ---------------------------------------------------------------------------

loc_E1B3::				; CODE XREF: seg0b2c:0D0Fj
		push	word ptr _ego+2
		push	word ptr _ego
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@touching$qn7m_actort1 ; touching(m_actor *,m_actor *)
		add	sp, 8
		or	al, al
		jz	loc_E22B
		les	bx, [bp+6]
		assume es:nothing
		or	byte ptr es:[bx+52h], 1
		push	7D0h
		les	bx, [bp+6]
		push	word ptr es:[bx+2]
		les	bx, [bp+6]
		push	word ptr es:[bx]
		call	@score_at$qiii	; score_at(int,int,int)
		add	sp, 6
		inc	_gun_count
		inc	_goodies_found
		call	@update_gun$qv	; update_gun(void)
		les	bx, dword ptr _the_game
		mov	byte ptr es:[bx+9], 1
		push	9
		push	ds
		push	offset aPup2_1	; "pup2"
		push	word_2B8BC
		push	_the_game
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah
		cmp	_gun_count, 4
		jnz	loc_E22B
		mov	_shot_size, 4
		mov	_heavy_timer, 32h ; '2'
		assume es:nothing

loc_E22B::				; CODE XREF: seg0b2c:0D11j
					; seg0b2c:0D2Bj ...
		pop	bp
		retf
; ---------------------------------------------------------------------------

; do_block(m_actor *)
@do_block$qn7m_actor:			; DATA XREF: add_map_item(uint,uint)+5EAo
					; add_map_item(uint,uint)+5FAo
		push	bp
		mov	bp, sp
		push	3
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @check_for_hit$qn7m_actoruc ; check_for_hit(m_actor *,uchar)
		add	sp, 6
		pop	bp
		retf
; ---------------------------------------------------------------------------
		assume es:nothing

; do_score(m_actor *)
@do_score$qn7m_actor:			; DATA XREF: score_at(int,int,int)+7Eo
		push	bp
		mov	bp, sp
		les	bx, [bp+6]
		mov	ax, es:[bx+22h]
		inc	word ptr es:[bx+22h]
		cmp	ax, 0Fh
		jnz	loc_E25C
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 1

loc_E25C::				; CODE XREF: seg0b2c:0DB2j
		pop	bp
		retf
; ---------------------------------------------------------------------------

; do_chest(m_actor *)
@do_chest$qn7m_actor:			; DATA XREF: add_map_item(uint,uint)+3D7o
		enter	8, 0
		les	bx, [bp+6]
		assume es:nothing
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jnz	loc_E275
		jmp	loc_E2F8
; ---------------------------------------------------------------------------

loc_E275::				; CODE XREF: seg0b2c:0DD0j
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 3
		and	ax, 1
		or	ax, ax
		jz	loc_E2CB
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 6
		and	ax, 1
		or	ax, ax
		jnz	loc_E2CB
		les	bx, [bp+6]
		cmp	word ptr es:[bx+28h], 4
		jl	loc_E2BB
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 40h
		push	4
		push	3
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8

loc_E2BB::				; CODE XREF: seg0b2c:0DFFj
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 0F7h
		les	bx, [bp+6]
		mov	byte ptr es:[bx+36h], 0Fh

loc_E2CB::				; CODE XREF: seg0b2c:0DE4j
					; seg0b2c:0DF5j
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 6
		and	ax, 1
		or	ax, ax
		jz	loc_E2F8
		les	bx, [bp+6]
		mov	ax, es:[bx+22h]
		inc	word ptr es:[bx+22h]
		cmp	ax, 0Ah
		jnz	loc_E2F6
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 1
		jmp	loc_E2F8
; ---------------------------------------------------------------------------

loc_E2F6::				; CODE XREF: seg0b2c:0E4Aj
		jmp	loc_E2FB
; ---------------------------------------------------------------------------

loc_E2F8::				; CODE XREF: seg0b2c:0DD2j
					; seg0b2c:0E3Aj ...
		jmp	locret_E414
; ---------------------------------------------------------------------------

loc_E2FB::				; CODE XREF: seg0b2c:loc_E2F6j
		les	bx, [bp+6]
		push	word ptr es:[bx+10h]
		call	@random$qi	; random(int)
		pop	cx
		les	bx, [bp+6]
		mov	dx, es:[bx]
		add	dx, ax
		mov	[bp-2],	dx
		push	5
		call	@random$qi	; random(int)
		pop	cx
		les	bx, [bp+6]
		mov	dx, es:[bx+2]
		sub	dx, ax
		mov	[bp-4],	dx
		push	0Ch
		call	@random$qi	; random(int)
		pop	cx
		mov	[bp-6],	ax
		push	8
		call	@random$qi	; random(int)
		pop	cx
		add	ax, 6
		mov	[bp-8],	ax
		push	0Fh
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_E37C
		push	seg seg0b2c
		push	offset @do_coin$qn7m_actor ; do_coin(m_actor *)
		push	0
		push	0
		push	ds
		push	offset aGem_l_1	; "gem.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		or	byte ptr es:[bx+52h], 80h
		jmp	loc_E3A1
; ---------------------------------------------------------------------------

loc_E37C::				; CODE XREF: seg0b2c:0EAAj
		push	seg seg0b2c
		push	offset @do_coin$qn7m_actor ; do_coin(m_actor *)
		push	0
		push	0
		push	ds
		push	offset aCoin_l_0 ; "coin.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax

loc_E3A1::				; CODE XREF: seg0b2c:0EDAj
		les	bx, _act
		mov	ax, [bp-8]
		neg	ax
		mov	es:[bx+16h], ax
		push	word ptr [bp-4]
		push	word ptr [bp-2]
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8
		push	1
		push	1
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		push	3
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jz	loc_E3F0
		cmp	ax, 1
		jz	loc_E3FF
		cmp	ax, 2
		jz	loc_E40B
		jmp	locret_E414
; ---------------------------------------------------------------------------

loc_E3F0::				; CODE XREF: seg0b2c:0F42j
		les	bx, _act
		mov	ax, [bp-6]
		neg	ax

loc_E3F9::				; CODE XREF: seg0b2c:0F72j
		mov	es:[bx+14h], ax
		jmp	locret_E414
; ---------------------------------------------------------------------------

loc_E3FF::				; CODE XREF: seg0b2c:0F47j
		les	bx, _act
		mov	word ptr es:[bx+14h], 0
		jmp	locret_E414
; ---------------------------------------------------------------------------

loc_E40B::				; CODE XREF: seg0b2c:0F4Cj
		les	bx, _act
		mov	ax, [bp-6]
		jmp	loc_E3F9
; ---------------------------------------------------------------------------

locret_E414::				; CODE XREF: seg0b2c:loc_E2F8j
					; seg0b2c:0F4Ej ...
		leave
		retf
; ---------------------------------------------------------------------------
		assume es:nothing

; do_coin(m_actor *)
@do_coin$qn7m_actor:			; DATA XREF: add_map_item(uint,uint)+ACo
					; seg0b2c:0EAFo ...
		enter	2, 0
		push	si
		les	bx, _the_map
		assume es:nothing
		les	bx, es:[bx+39Eh]
		assume es:nothing
		push	es
		les	si, [bp+6]
		assume es:nothing
		mov	ax, es:[si+18h]
		dec	ax
		shl	ax, 2
		add	bx, ax
		pop	es
		assume es:nothing
		cmp	word ptr es:[bx], 100h
		jb	short loc_E45B
		les	bx, _the_map
		assume es:nothing
		les	bx, es:[bx+39Eh]
		assume es:nothing
		push	es
		les	si, [bp+6]
		assume es:nothing
		mov	ax, es:[si+18h]
		add	ax, 2
		shl	ax, 2
		add	bx, ax
		pop	es
		assume es:nothing
		cmp	word ptr es:[bx], 100h
		jnb	loc_E483

loc_E45B::				; CODE XREF: seg0b2c:0F98j
		les	bx, [bp+6]
		assume es:nothing
		cmp	word ptr es:[bx+14h], 0
		jz	loc_E470
		les	bx, [bp+6]
		mov	word ptr es:[bx+14h], 0
		jmp	loc_E483
; ---------------------------------------------------------------------------

loc_E470::				; CODE XREF: seg0b2c:0FC3j
		les	bx, [bp+6]
		cmp	word ptr es:[bx+16h], 1
		jz	loc_E483
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 1
		assume es:nothing

loc_E483::				; CODE XREF: seg0b2c:0FB9j
					; seg0b2c:0FCEj ...
		les	bx, [bp+6]
		assume es:nothing
		mov	ax, es:[bx+18h]
		les	bx, [bp+6]
		mov	bl, es:[bx+52h]
		shr	bx, 7
		and	bx, 1
		neg	bx
		sbb	bx, bx
		inc	bx
		shl	bx, 1
		add	ax, word ptr (_tbl_mul_tw+2)[bx]
		shl	ax, 2
		les	bx, _the_map
		assume es:nothing
		les	bx, es:[bx+39Eh]
		assume es:nothing
		add	bx, ax
		cmp	word ptr es:[bx], 100h
		jnb	loc_E4C0
		les	bx, [bp+6]
		assume es:nothing
		mov	word ptr es:[bx+16h], 0
		assume es:nothing

loc_E4C0::				; CODE XREF: seg0b2c:1015j
		les	bx, [bp+6]
		assume es:nothing
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jnz	loc_E4D3
		jmp	loc_E5DA
; ---------------------------------------------------------------------------
		assume es:nothing

loc_E4D3::				; CODE XREF: seg0b2c:102Ej
		les	bx, [bp+6]
		cmp	word ptr es:[bx+16h], 0
		jnz	loc_E4FF
		les	bx, [bp+6]

loc_E4E0::
		mov	al, es:[bx+52h]
		shr	ax, 6
		and	ax, 1
		or	ax, ax
		jnz	loc_E4FF
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 40h
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 1

loc_E4FF::				; CODE XREF: seg0b2c:103Bj
					; seg0b2c:104Cj
		les	bx, [bp+6]
		cmp	word ptr es:[bx+16h], 0
		jz	loc_E51A
		les	bx, [bp+6]
		cmp	word ptr es:[bx+16h], 1
		jz	loc_E51A
		les	bx, [bp+6]
		assume es:nothing
		inc	word ptr es:[bx+16h]
		assume es:nothing

loc_E51A::				; CODE XREF: seg0b2c:1067j
					; seg0b2c:1071j
		les	bx, [bp+6]
		cmp	word ptr es:[bx+14h], 0
		jz	loc_E53E
		les	bx, [bp+6]
		assume es:nothing
		cmp	word ptr es:[bx+14h], 0
		jle	loc_E537
		les	bx, [bp+6]
		dec	word ptr es:[bx+14h]
		jmp	loc_E53E
; ---------------------------------------------------------------------------

loc_E537::				; CODE XREF: seg0b2c:108Cj
		les	bx, [bp+6]
		inc	word ptr es:[bx+14h]
		assume es:nothing

loc_E53E::				; CODE XREF: seg0b2c:1082j
					; seg0b2c:1095j
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@touching$qn7m_actort1 ; touching(m_actor *,m_actor *)
		assume es:nothing
		add	sp, 8
		or	al, al
		jnz	loc_E55B
		jmp	loc_E5DA
; ---------------------------------------------------------------------------
		assume es:nothing

loc_E55B::				; CODE XREF: seg0b2c:10B6j
		les	bx, [bp+6]
		assume es:nothing
		or	byte ptr es:[bx+52h], 1
		push	9
		push	ds
		push	offset aPup_0	; "pup"
		push	word_2B8BC
		push	_the_game
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		assume es:nothing
		add	sp, 0Ah
		les	bx, [bp+6]
		assume es:nothing
		mov	al, es:[bx+52h]
		shr	ax, 7
		and	ax, 1
		or	ax, ax
		jz	loc_E5A7
		les	bx, [bp+6]
		assume es:nothing
		cmp	word ptr es:[bx+16h], 0
		jz	loc_E599
		mov	ax, 1
		jmp	loc_E59B
; ---------------------------------------------------------------------------

loc_E599::				; CODE XREF: seg0b2c:10F2j
		xor	ax, ax

loc_E59B::				; CODE XREF: seg0b2c:10F7j
		mov	dx, 7D0h
		mov	cl, al
		shl	dx, cl
		mov	[bp-2],	dx
		jmp	loc_E5BD
; ---------------------------------------------------------------------------
		assume es:nothing

loc_E5A7::				; CODE XREF: seg0b2c:10E8j
		les	bx, [bp+6]
		cmp	word ptr es:[bx+16h], 0
		jz	loc_E5B8
		mov	word ptr [bp-2], 1F4h
		jmp	loc_E5BD
; ---------------------------------------------------------------------------
		assume es:nothing

loc_E5B8::				; CODE XREF: seg0b2c:110Fj
		mov	word ptr [bp-2], 64h ; 'd'
		assume es:nothing

loc_E5BD::				; CODE XREF: seg0b2c:1105j
					; seg0b2c:1116j
		push	word ptr [bp-2]
		les	bx, [bp+6]
		push	word ptr es:[bx+0Ah]
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		call	@score_at$qiii	; score_at(int,int,int)
		assume es:nothing
		add	sp, 6
		inc	_goodies_found
		assume es:nothing

loc_E5DA::				; CODE XREF: seg0b2c:1030j
					; seg0b2c:10B8j
		pop	si
		leave
		retf
; ---------------------------------------------------------------------------
		assume es:nothing

; do_fish(m_actor *)
@do_fish$qn7m_actor:			; DATA XREF: add_map_item(uint,uint)+28Do
					; add_map_item(uint,uint)+2BEo
		push	bp
		mov	bp, sp
		push	0
		push	0
		push	0
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@tile_collision$qiii ; m_actor::tile_collision(int,int,int)
		assume es:nothing
		add	sp, 0Ah
		or	al, al
		jz	loc_E5FA
		jmp	loc_E61B
; ---------------------------------------------------------------------------

loc_E5FA::				; CODE XREF: seg0b2c:1156j
		les	bx, [bp+6]
		assume es:nothing
		mov	ax, es:[bx+22h]
		inc	word ptr es:[bx+22h]
		les	bx, [bp+6]
		cmp	ax, es:[bx+24h]
		jnz	loc_E619
		les	bx, [bp+6]
		mov	word ptr es:[bx+22h], 0
		jmp	loc_E61B
; ---------------------------------------------------------------------------

loc_E619::				; CODE XREF: seg0b2c:116Cj
		jmp	loc_E683
; ---------------------------------------------------------------------------
		assume es:nothing

loc_E61B::				; CODE XREF: seg0b2c:1158j
					; seg0b2c:1177j
		les	bx, [bp+6]
		assume es:nothing
		cmp	byte ptr es:[bx+34h], 1
		jnz	loc_E649
		assume es:nothing
		les	bx, [bp+6]
		cmp	word ptr es:[bx+26h], 1
		jnz	loc_E635
		push	ds
		push	offset aFish1r_l_1 ; "fish1r.l"
		jmp	loc_E639
; ---------------------------------------------------------------------------
		assume es:nothing

loc_E635::				; CODE XREF: seg0b2c:118Dj
		push	ds
		push	offset aFish2r_l_1 ; "fish2r.l"
		assume es:nothing

loc_E639::				; CODE XREF: seg0b2c:1193j
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8
		jmp	loc_E66B
; ---------------------------------------------------------------------------
		assume es:nothing

loc_E649::				; CODE XREF: seg0b2c:1183j
		les	bx, [bp+6]
		cmp	word ptr es:[bx+26h], 1
		jnz	loc_E659
		push	ds
		push	offset aFish1l_l_0 ; "fish1l.l"
		jmp	loc_E65D
; ---------------------------------------------------------------------------
		assume es:nothing

loc_E659::				; CODE XREF: seg0b2c:11B1j
		push	ds
		push	offset aFish2l_l_0 ; "fish2l.l"
		assume es:nothing

loc_E65D::				; CODE XREF: seg0b2c:11B7j
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8

loc_E66B::				; CODE XREF: seg0b2c:11A7j
		les	bx, [bp+6]
		xor	byte ptr es:[bx+34h], 1
		les	bx, [bp+6]
		mov	ax, es:[bx+14h]
		neg	ax
		les	bx, [bp+6]
		mov	es:[bx+14h], ax
		assume es:nothing

loc_E683::				; CODE XREF: seg0b2c:loc_E619j
		pop	bp
		retf
; ---------------------------------------------------------------------------
		assume es:nothing

; do_switch(m_actor *)
@do_switch$qn7m_actor:			; DATA XREF: add_switch(uint,uint)+1Co
		push	bp
		mov	bp, sp
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 5
		and	ax, 1
		or	ax, ax
		jz	loc_E69B
		jmp	loc_E6E7
; ---------------------------------------------------------------------------

loc_E69B::				; CODE XREF: seg0b2c:11F7j
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 3
		and	ax, 1
		or	ax, ax
		jz	loc_E6E7
		les	bx, [bp+6]
		assume es:nothing
		mov	byte ptr es:[bx+3Ch], 0
		les	bx, [bp+6]
		les	bx, es:[bx+2Ch]
		or	byte ptr es:[bx+52h], 40h
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 0F7h
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 20h
		les	bx, [bp+6]
		cmp	dword ptr es:[bx+30h], 0
		jz	loc_E6E7
		les	bx, [bp+6]
		les	bx, es:[bx+30h]
		or	byte ptr es:[bx+52h], 40h
		assume es:nothing

loc_E6E7::				; CODE XREF: seg0b2c:11F9j
					; seg0b2c:120Aj ...
		pop	bp
		retf
; ---------------------------------------------------------------------------
		assume es:nothing

; do_door(m_actor *)
@do_door$qn7m_actor:			; DATA XREF: add_door(uint,uint)+2Fo
					; add_door(uint,uint)+5Eo
		push	bp
		mov	bp, sp
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 6
		and	ax, 1
		cmp	ax, 1
		jnz	loc_E733
		les	bx, [bp+6]
		assume es:nothing
		mov	al, es:[bx+38h]
		mov	ah, 0
		or	ax, ax
		jnz	loc_E733
		push	6
		push	ds
		push	offset aDoor_0	; "door"
		push	word_2B8BC
		push	_the_game
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah
		push	2
		push	4
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		assume es:nothing

loc_E733::				; CODE XREF: seg0b2c:125Cj
					; seg0b2c:1269j
		pop	bp
		retf
; ---------------------------------------------------------------------------

; do_duct_lr(m_actor *)
@do_duct_lr$qn7m_actor:			; DATA XREF: add_map_item(uint,uint)+445o
					; add_map_item(uint,uint)+475o
		enter	2, 0
		push	si
		les	bx, [bp+6]
		assume es:nothing
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jnz	loc_E74D
		jmp	loc_E812
; ---------------------------------------------------------------------------

loc_E74D::				; CODE XREF: seg0b2c:12A8j
		les	bx, _cur_sub
		cmp	byte ptr es:[bx+3Dh], 6
		jnz	loc_E75B
		jmp	loc_E812
; ---------------------------------------------------------------------------

loc_E75B::				; CODE XREF: seg0b2c:12B6j
		les	bx, _cur_sub
		push	es
		les	si, [bp+6]
		mov	ax, es:[si+2]
		add	ax, 2Bh	; '+'
		pop	es
		cmp	es:[bx+6], ax
		jg	loc_E782
		les	bx, _cur_sub
		mov	ax, es:[bx+2]
		les	bx, [bp+6]
		cmp	ax, es:[bx+2]
		jge	loc_E785

loc_E782::				; CODE XREF: seg0b2c:12CFj
		jmp	loc_E812
; ---------------------------------------------------------------------------

loc_E785::				; CODE XREF: seg0b2c:12E0j
		les	bx, [bp+6]
		mov	ax, es:[bx+8]
		les	bx, _cur_sub
		sub	ax, es:[bx+8]
		push	ax
		call	@abs$qi		; abs(int)
		pop	cx
		mov	_diff_x, ax
		cmp	_diff_x, 46h ; 'F'
		jnb	loc_E812
		cmp	_diff_x, 32h ; '2'
		jbe	loc_E7B3
		mov	word ptr [bp-2], 2
		jmp	loc_E7C6
; ---------------------------------------------------------------------------

loc_E7B3::				; CODE XREF: seg0b2c:130Aj
		cmp	_diff_x, 14h
		jbe	loc_E7C1
		mov	word ptr [bp-2], 3
		jmp	loc_E7C6
; ---------------------------------------------------------------------------

loc_E7C1::				; CODE XREF: seg0b2c:1318j
		mov	word ptr [bp-2], 5

loc_E7C6::				; CODE XREF: seg0b2c:1311j
					; seg0b2c:131Fj
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+34h], 1
		jnz	loc_E7F2
		les	bx, _cur_sub
		mov	ax, [bp-2]
		sub	es:[bx+14h], ax
		les	bx, _cur_sub
		cmp	word ptr es:[bx+14h], 0FFF8h
		jge	loc_E7F0
		les	bx, _cur_sub
		mov	word ptr es:[bx+14h], 0FFF8h

loc_E7F0::				; CODE XREF: seg0b2c:1344j
		jmp	loc_E812
; ---------------------------------------------------------------------------

loc_E7F2::				; CODE XREF: seg0b2c:132Ej
		les	bx, _cur_sub
		mov	ax, [bp-2]
		add	es:[bx+14h], ax
		les	bx, _cur_sub
		cmp	word ptr es:[bx+14h], 8
		jle	loc_E812
		les	bx, _cur_sub
		mov	word ptr es:[bx+14h], 8

loc_E812::				; CODE XREF: seg0b2c:12AAj
					; seg0b2c:12B8j ...
		pop	si
		leave
		retf
; ---------------------------------------------------------------------------

; do_duct_ud(m_actor *)
@do_duct_ud$qn7m_actor:			; DATA XREF: add_map_item(uint,uint)+4AFo
					; add_map_item(uint,uint)+4DFo
		enter	2, 0
		push	si
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jnz	loc_E82D
		jmp	loc_E8EF
; ---------------------------------------------------------------------------

loc_E82D::				; CODE XREF: seg0b2c:1388j
		les	bx, _cur_sub
		cmp	byte ptr es:[bx+3Dh], 6
		jnz	loc_E83B
		jmp	loc_E8EF
; ---------------------------------------------------------------------------

loc_E83B::				; CODE XREF: seg0b2c:1396j
		les	bx, [bp+6]
		mov	ax, es:[bx+0Ah]
		les	bx, _cur_sub
		sub	ax, es:[bx+0Ah]
		push	ax
		call	@abs$qi		; abs(int)
		pop	cx
		mov	_diff_y, ax
		les	bx, _cur_sub
		mov	ax, es:[bx+8]
		les	bx, [bp+6]
		cmp	ax, es:[bx]
		jl	loc_E879
		les	bx, _cur_sub
		push	es
		les	si, [bp+6]
		mov	ax, es:[si]
		add	ax, 38h	; '8'
		pop	es
		cmp	es:[bx+8], ax
		jle	loc_E87B

loc_E879::				; CODE XREF: seg0b2c:13C2j
		jmp	loc_E8EF
; ---------------------------------------------------------------------------

loc_E87B::				; CODE XREF: seg0b2c:13D7j
		cmp	_diff_y, 2Dh ; '-'
		jnb	loc_E8EF
		cmp	_diff_y, 0Fh
		jbe	loc_E89E
		les	bx, _cur_sub
		push	word ptr es:[bx+14h]
		call	@abs$qi		; abs(int)
		pop	cx
		cmp	ax, 4
		jl	loc_E89E
		jmp	loc_E8EF
; ---------------------------------------------------------------------------

loc_E89E::				; CODE XREF: seg0b2c:13E7j
					; seg0b2c:13FAj
		mov	word ptr [bp-2], 3
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+34h], 2
		jnz	loc_E8CF
		les	bx, _cur_sub
		mov	ax, [bp-2]
		sub	es:[bx+16h], ax
		les	bx, _cur_sub
		cmp	word ptr es:[bx+16h], 0FFFAh
		jge	loc_E8CD
		les	bx, _cur_sub
		mov	word ptr es:[bx+16h], 0FFFAh

loc_E8CD::				; CODE XREF: seg0b2c:1421j
		jmp	loc_E8EF
; ---------------------------------------------------------------------------

loc_E8CF::				; CODE XREF: seg0b2c:140Bj
		les	bx, _cur_sub
		mov	ax, [bp-2]
		add	es:[bx+16h], ax
		les	bx, _cur_sub
		cmp	word ptr es:[bx+16h], 6
		jle	loc_E8EF
		les	bx, _cur_sub
		mov	word ptr es:[bx+16h], 6

loc_E8EF::				; CODE XREF: seg0b2c:138Aj
					; seg0b2c:1398j ...
		pop	si
		leave
		retf
; ---------------------------------------------------------------------------
		assume es:nothing

; do_barrel(m_actor *)
@do_barrel$qn7m_actor:			; DATA XREF: add_barrel(uint,uint)+56o
		push	bp
		mov	bp, sp
		push	2
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @check_for_hit$qn7m_actoruc ; check_for_hit(m_actor *,uchar)
		add	sp, 6
		cmp	al, 2
		jnz	loc_E939
		push	0
		push	0
		push	2
		les	bx, [bp+6]
		push	word ptr es:[bx+2]
		les	bx, [bp+6]
		push	word ptr es:[bx]
		call	@add_explosion$qiiucnuc	; add_explosion(int,int,uchar,uchar *)
		assume es:nothing
		add	sp, 0Ah
		les	bx, [bp+6]
		assume es:nothing
		push	word ptr es:[bx+22h]
		les	bx, [bp+6]
		push	word ptr es:[bx+18h]
		call	@add_map_item$quiui ; add_map_item(uint,uint)
		assume es:nothing
		add	sp, 4
		assume es:nothing

loc_E939::				; CODE XREF: seg0b2c:1466j
		pop	bp
		retf
; ---------------------------------------------------------------------------

; do_pup(m_actor *)
@do_pup$qn7m_actor:			; DATA XREF: add_map_pup(uint,uint)+D1o
		enter	2, 0
		les	bx, [bp+6]
		assume es:nothing
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		cmp	ax, 1
		jnz	loc_E973
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 5
		and	ax, 1
		cmp	ax, 1
		jnz	loc_E973
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 0DFh
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 0FFFFh

loc_E973::				; CODE XREF: seg0b2c:14AEj
					; seg0b2c:14C0j
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 5
		and	ax, 1
		cmp	ax, 1
		jnz	loc_E988
		jmp	locret_EB3A
; ---------------------------------------------------------------------------

loc_E988::				; CODE XREF: seg0b2c:14E3j
		les	bx, [bp+6]
		cmp	word ptr es:[bx+16h], 0
		jz	loc_E9D3
		push	100h
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@on_tile$qi ; m_actor::on_tile(int)
		add	sp, 6
		or	al, al
		jz	loc_E9B2
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 0
		jmp	loc_E9D3
; ---------------------------------------------------------------------------

loc_E9B2::				; CODE XREF: seg0b2c:1505j
		push	0
		push	0
		push	0
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@tile_collision$qiii ; m_actor::tile_collision(int,int,int)
		add	sp, 0Ah
		or	al, al
		jz	loc_E9D3
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 0

loc_E9D3::				; CODE XREF: seg0b2c:14F0j
					; seg0b2c:1510j ...
		push	word ptr _ego+2
		push	word ptr _ego
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@touching$qn7m_actort1 ; touching(m_actor *,m_actor *)
		add	sp, 8
		or	al, al
		jnz	loc_E9F0
		jmp	locret_EB3A
; ---------------------------------------------------------------------------

loc_E9F0::				; CODE XREF: seg0b2c:154Bj
		les	bx, [bp+6]
		mov	bx, es:[bx+22h]
		dec	bx
		cmp	bx, 8		; switch 9 cases
		jbe	loc_EA00
		jmp	loc_EA99	; jumptable 0001C822 default case
; ---------------------------------------------------------------------------

loc_EA00::				; CODE XREF: seg0b2c:155Bj
		shl	bx, 1
		jmp	cs:off_EB3D[bx]	; switch jump
; ---------------------------------------------------------------------------

loc_EA07::				; CODE XREF: seg0b2c:1562j
					; DATA XREF: seg0b2c:off_EB3Do
		push	0A7h ; '§'      ; jumptable 0001C822 case 0
		push	68h ; 'h'
		push	50h ; 'P'
		call	@update_air_guage$qiii ; update_air_guage(int,int,int)
		add	sp, 6
		jmp	loc_EA99	; jumptable 0001C822 default case
; ---------------------------------------------------------------------------

loc_EA19::				; CODE XREF: seg0b2c:1562j
					; DATA XREF: seg0b2c:off_EB3Do
		cmp	_shot_size, 3	; jumptable 0001C822 case 2
		jnb	loc_EA24
		inc	_shot_size

loc_EA24::				; CODE XREF: seg0b2c:157Ej
		push	3
		call	@post_message$quc ; post_message(uchar)
		pop	cx
		jmp	loc_EA99	; jumptable 0001C822 default case
; ---------------------------------------------------------------------------

loc_EA2E::				; CODE XREF: seg0b2c:1562j
					; DATA XREF: seg0b2c:off_EB3Do
		push	0B3h ; '³'      ; jumptable 0001C822 case 1
		push	68h ; 'h'
		push	28h ; '('
		call	@update_shld_guage$qiii	; update_shld_guage(int,int,int)
		add	sp, 6
		cmp	_shot_size, 0
		jz	loc_EA4F
		cmp	_heavy_timer, 0
		jnz	loc_EA4F
		dec	_shot_size

loc_EA4F::				; CODE XREF: seg0b2c:15A2j
					; seg0b2c:15A9j
		jmp	loc_EA99	; jumptable 0001C822 default case
; ---------------------------------------------------------------------------

loc_EA51::				; CODE XREF: seg0b2c:1562j
					; DATA XREF: seg0b2c:off_EB3Do
		mov	_top_fire, 1	; jumptable 0001C822 case 3
		jmp	loc_EA99	; jumptable 0001C822 default case
; ---------------------------------------------------------------------------

loc_EA58::				; CODE XREF: seg0b2c:1562j
					; DATA XREF: seg0b2c:off_EB3Do
		inc	_men		; jumptable 0001C822 case 4
		mov	_auto_fire, 0
		mov	_jason_fire, 0
		les	bx, dword ptr _the_game
		mov	byte ptr es:[bx+8], 1
		call	@update_men$qv	; update_men(void)
		jmp	loc_EA99	; jumptable 0001C822 default case
; ---------------------------------------------------------------------------

loc_EA76::				; CODE XREF: seg0b2c:1562j
					; DATA XREF: seg0b2c:off_EB3Do
		push	4		; jumptable 0001C822 case 6
		call	@post_message$quc ; post_message(uchar)
		pop	cx
		mov	_auto_fire, 1
		jmp	loc_EA99	; jumptable 0001C822 default case
; ---------------------------------------------------------------------------

loc_EA85::				; CODE XREF: seg0b2c:1562j
					; DATA XREF: seg0b2c:off_EB3Do
		inc	_got_key	; jumptable 0001C822 case 5
		jmp	loc_EA99	; jumptable 0001C822 default case
; ---------------------------------------------------------------------------

loc_EA8B::				; CODE XREF: seg0b2c:1562j
					; DATA XREF: seg0b2c:off_EB3Do
		call	@add_jason$qv	; jumptable 0001C822 case 7
		jmp	loc_EA99	; jumptable 0001C822 default case
; ---------------------------------------------------------------------------

loc_EA92::				; CODE XREF: seg0b2c:1562j
					; DATA XREF: seg0b2c:off_EB3Do
		mov	_jason_fire, 1	; jumptable 0001C822 case 8
		jmp	$+2	; jumptable 0001C822 default case
; ---------------------------------------------------------------------------

loc_EA99::				; CODE XREF: seg0b2c:155Dj
					; seg0b2c:1576j ...
		les	bx, [bp+6]	; jumptable 0001C822 default case
		cmp	word ptr es:[bx+22h], 6
		jnz	loc_EACD
		mov	word ptr [bp-2], 3E8h
		push	0Eh
		push	ds
		push	offset aPup2_2	; "pup2"
		push	word_2B8BC
		push	_the_game
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah
		call	@update_key_guage$qv ; update_key_guage(void)
		push	1
		call	@post_message$quc ; post_message(uchar)
		pop	cx
		jmp	loc_EAD2
; ---------------------------------------------------------------------------

loc_EACD::				; CODE XREF: seg0b2c:1601j
		mov	word ptr [bp-2], 1F4h

loc_EAD2::				; CODE XREF: seg0b2c:162Bj
		les	bx, [bp+6]
		cmp	word ptr es:[bx+16h], 0
		jz	loc_EAFF
		push	0Ah
		push	ds
		push	offset aPup2_3	; "pup2"
		push	word_2B8BC
		push	_the_game
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah
		mov	dx, 2
		mov	ax, [bp-2]
		imul	dx
		mov	[bp-2],	ax
		jmp	loc_EB15
; ---------------------------------------------------------------------------

loc_EAFF::				; CODE XREF: seg0b2c:163Aj
		push	9
		push	ds
		push	offset aPup_1	; "pup"
		push	word_2B8BC
		push	_the_game
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah

loc_EB15::				; CODE XREF: seg0b2c:165Dj
		push	word ptr [bp-2]
		les	bx, [bp+6]
		push	word ptr es:[bx+0Ah]
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		call	@score_at$qiii	; score_at(int,int,int)
		add	sp, 6
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 1
		inc	_goodies_found

locret_EB3A::				; CODE XREF: seg0b2c:14E5j
					; seg0b2c:154Dj
		leave
		retf
; ---------------------------------------------------------------------------
		db 0
off_EB3D	dw offset loc_EA07	; DATA XREF: seg0b2c:1562r
		dw offset loc_EA2E	; jump table for switch	statement
		dw offset loc_EA19
		dw offset loc_EA51
		dw offset loc_EA58
		dw offset loc_EA85
		dw offset loc_EA76
		dw offset loc_EA8B
		dw offset loc_EA92
; ---------------------------------------------------------------------------
		assume es:nothing

; do_exp(m_actor *)
@do_exp$qn7m_actor:			; DATA XREF: add_explosion(int,int,uchar,uchar *)+75o
		push	bp
		mov	bp, sp
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jnz	loc_EB6A
		les	bx, [bp+6]
		assume es:nothing
		or	byte ptr es:[bx+52h], 1
		assume es:nothing

loc_EB6A::				; CODE XREF: seg0b2c:16C0j
		pop	bp
		retf
; ---------------------------------------------------------------------------

; do_bubble(m_actor *)
@do_bubble$qn7m_actor:			; DATA XREF: add_bubble(int,int,int)+2Bo
					; add_bubble(int,int,int)+3Bo
		push	bp
		mov	bp, sp
		push	si
		les	bx, [bp+6]
		mov	ax, es:[bx+22h]
		inc	word ptr es:[bx+22h]
		cmp	ax, 14h
		jnz	loc_EB84
		assume es:nothing
		jmp	loc_EBDE
; ---------------------------------------------------------------------------
		jmp	loc_EBA8
; ---------------------------------------------------------------------------
		assume es:nothing

loc_EB84::				; CODE XREF: seg0b2c:16DEj
		les	bx, [bp+6]
		cmp	word ptr es:[bx+14h], 0
		jz	loc_EBA8
		les	bx, [bp+6]
		cmp	word ptr es:[bx+14h], 0
		jle	loc_EBA1
		assume es:nothing
		les	bx, [bp+6]
		dec	word ptr es:[bx+14h]
		jmp	loc_EBA8
; ---------------------------------------------------------------------------
		assume es:nothing

loc_EBA1::				; CODE XREF: seg0b2c:16F6j
		les	bx, [bp+6]
		inc	word ptr es:[bx+14h]

loc_EBA8::				; CODE XREF: seg0b2c:16E2j
					; seg0b2c:16ECj ...
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jnz	loc_EBBC
		assume es:nothing
		jmp	loc_EBDE
; ---------------------------------------------------------------------------
		jmp	loc_EBDC
; ---------------------------------------------------------------------------
		assume es:nothing

loc_EBBC::				; CODE XREF: seg0b2c:1716j
		les	bx, _the_map
		assume es:nothing
		les	bx, es:[bx+39Eh]
		assume es:nothing
		push	es
		les	si, [bp+6]
		assume es:nothing
		mov	ax, es:[si+18h]
		shl	ax, 2
		add	bx, ax
		pop	es
		assume es:nothing
		cmp	word ptr es:[bx], 100h
		jnz	loc_EBDC
		jmp	loc_EBDE
; ---------------------------------------------------------------------------

loc_EBDC::				; CODE XREF: seg0b2c:171Aj
					; seg0b2c:1738j
		jmp	loc_EBE6
; ---------------------------------------------------------------------------

loc_EBDE::				; CODE XREF: seg0b2c:16E0j
					; seg0b2c:1718j ...
		les	bx, [bp+6]
		assume es:nothing
		or	byte ptr es:[bx+52h], 1
		assume es:nothing

loc_EBE6::				; CODE XREF: seg0b2c:loc_EBDCj
		pop	si
		pop	bp
		retf

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; do_follow(m_actor *, int, int)
@do_follow$qn7m_actorii	proc far	; CODE XREF: seg0b2c:1F8Fp

var_2		= byte ptr -2
var_1		= byte ptr -1
arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch

		enter	2, 0
		les	bx, _cur_sub
		assume es:nothing
		mov	ax, es:[bx+8]
		les	bx, [bp+arg_0]
		sub	ax, es:[bx+8]
		push	ax
		call	@abs$qi		; abs(int)
		pop	cx
		mov	_diff_x, ax
		les	bx, _cur_sub
		mov	ax, es:[bx+0Ah]
		les	bx, [bp+arg_0]
		sub	ax, es:[bx+0Ah]
		push	ax
		call	@abs$qi		; abs(int)
		pop	cx
		mov	_diff_y, ax
		mov	ax, _diff_x
		shr	ax, 3
		push	ax
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		push	cs
		call	near ptr @check_horizontal_ray$qn7m_actorui ; check_horizontal_ray(m_actor *,uint)
		add	sp, 6
		mov	[bp+var_1], al
		mov	ax, _diff_y
		shr	ax, 3
		push	ax
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		push	cs
		call	near ptr @check_vertical_ray$qn7m_actorui ; check_vertical_ray(m_actor *,uint)
		add	sp, 6
		mov	[bp+var_2], al
		cmp	[bp+var_2], 0
		jz	loc_EC8E
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+14h], 0
		cmp	_diff_y, 0Ah
		jbe	loc_EC8A
		les	bx, _cur_sub
		mov	ax, es:[bx+0Ah]
		les	bx, [bp+arg_0]
		cmp	ax, es:[bx+0Ah]
		jge	loc_EC7E
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_4]
		neg	ax
		jmp	loc_EC84
; ---------------------------------------------------------------------------

loc_EC7E::				; CODE XREF: do_follow(m_actor *,int,int)+89j
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_4]

loc_EC84::				; CODE XREF: do_follow(m_actor *,int,int)+93j
		mov	es:[bx+16h], ax
		jmp	loc_EC8C
; ---------------------------------------------------------------------------

loc_EC8A::				; CODE XREF: do_follow(m_actor *,int,int)+78j
		jmp	loc_ECEB
; ---------------------------------------------------------------------------

loc_EC8C::				; CODE XREF: do_follow(m_actor *,int,int)+9Fj
		jmp	loc_ECE7
; ---------------------------------------------------------------------------

loc_EC8E::				; CODE XREF: do_follow(m_actor *,int,int)+68j
		cmp	[bp+var_1], 0
		jz	loc_EC98
		jmp	loc_ECEB
; ---------------------------------------------------------------------------
		jmp	loc_ECE7
; ---------------------------------------------------------------------------

loc_EC98::				; CODE XREF: do_follow(m_actor *,int,int)+A9j
		mov	al, [bp+var_2]
		mov	ah, 0
		or	ax, ax
		jnz	loc_ECD7
		cmp	[bp+var_1], 0
		jz	loc_ECD7
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+16h], 0
		les	bx, _cur_sub
		mov	ax, es:[bx+8]
		les	bx, [bp+arg_0]
		cmp	ax, es:[bx+8]
		jge	loc_ECCB
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_6]
		neg	ax
		jmp	loc_ECD1
; ---------------------------------------------------------------------------

loc_ECCB::				; CODE XREF: do_follow(m_actor *,int,int)+D6j
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_6]

loc_ECD1::				; CODE XREF: do_follow(m_actor *,int,int)+E0j
		mov	es:[bx+14h], ax
		jmp	loc_ECE7
; ---------------------------------------------------------------------------

loc_ECD7::				; CODE XREF: do_follow(m_actor *,int,int)+B6j
					; do_follow(m_actor *,int,int)+BCj
		les	bx, [bp+arg_0]
		xor	ax, ax
		mov	es:[bx+16h], ax
		les	bx, [bp+arg_0]
		mov	es:[bx+14h], ax

loc_ECE7::				; CODE XREF: do_follow(m_actor *,int,int):loc_EC8Cj
					; do_follow(m_actor *,int,int)+ADj ...
		mov	al, 0

loc_ECE9::				; CODE XREF: do_follow(m_actor *,int,int)+134j
		jmp	locret_ED1F
; ---------------------------------------------------------------------------

loc_ECEB::				; CODE XREF: do_follow(m_actor *,int,int):loc_EC8Aj
					; do_follow(m_actor *,int,int)+ABj
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+16h], 0
		les	bx, _cur_sub
		mov	ax, es:[bx+8]
		les	bx, [bp+arg_0]
		cmp	ax, es:[bx+8]
		jge	loc_ED10
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_6]
		dec	ax
		neg	ax
		jmp	loc_ED17
; ---------------------------------------------------------------------------

loc_ED10::				; CODE XREF: do_follow(m_actor *,int,int)+11Aj
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_6]
		dec	ax

loc_ED17::				; CODE XREF: do_follow(m_actor *,int,int)+125j
		mov	es:[bx+14h], ax
		mov	al, 1
		jmp	loc_ECE9
; ---------------------------------------------------------------------------

locret_ED1F::				; CODE XREF: do_follow(m_actor *,int,int):loc_ECE9j
		leave
		retf
@do_follow$qn7m_actorii	endp

; ---------------------------------------------------------------------------

; do_ship(m_actor *)
@do_ship$qn7m_actor:			; DATA XREF: add_map_item(uint,uint)+C14o
					; add_map_item(uint,uint)+C50o
		enter	2, 0
		les	bx, [bp+6]
		cmp	word ptr es:[bx+22h], 0
		jnz	loc_ED3D
		les	bx, [bp+6]
		mov	word ptr es:[bx+22h], 2Dh ; '-'
		jmp	loc_EE8D
; ---------------------------------------------------------------------------
		jmp	loc_ED44
; ---------------------------------------------------------------------------

loc_ED3D::				; CODE XREF: seg0b2c:188Dj
		les	bx, [bp+6]
		dec	word ptr es:[bx+22h]

loc_ED44::				; CODE XREF: seg0b2c:189Bj
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 6
		and	ax, 1
		cmp	ax, 1
		jnz	loc_ED59
		jmp	loc_EE49
; ---------------------------------------------------------------------------

loc_ED59::				; CODE XREF: seg0b2c:18B4j
		push	1Eh
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_ED68
		jmp	loc_EE49
; ---------------------------------------------------------------------------

loc_ED68::				; CODE XREF: seg0b2c:18C3j
		les	bx, _cur_sub
		mov	ax, es:[bx+0Ah]
		les	bx, [bp+6]
		sub	ax, es:[bx+6]
		push	ax
		call	@abs$qi		; abs(int)
		pop	cx
		mov	_diff_y, ax
		cmp	_diff_y, 0Ah
		jnb	loc_EDD3
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@facing_actor$qn7m_actor ; m_actor::facing_actor(m_actor *)
		add	sp, 8
		mov	ah, 0
		or	ax, ax
		jnz	loc_EDB5
		push	0Ah
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_EDB3
		jmp	loc_EE49
; ---------------------------------------------------------------------------

loc_EDB3::				; CODE XREF: seg0b2c:190Ej
		jmp	loc_EDD3
; ---------------------------------------------------------------------------

loc_EDB5::				; CODE XREF: seg0b2c:1902j
		push	0Ah
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_EDD3
		push	0
		push	2
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@add_missile$qn7m_actoruci ; add_missile(m_actor *,uchar,int)
		add	sp, 8

loc_EDD3::				; CODE XREF: seg0b2c:18E6j
					; seg0b2c:loc_EDB3j ...
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		cmp	ax, 1
		jnz	loc_EE46
		push	14h
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @check_for_hit$qn7m_actoruc ; check_for_hit(m_actor *,uchar)
		add	sp, 6
		mov	[bp-1],	al
		cmp	byte ptr [bp-1], 1
		jnz	loc_EE0B
		push	6
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_EE0B
		jmp	loc_EE8D
; ---------------------------------------------------------------------------

loc_EE0B::				; CODE XREF: seg0b2c:195Aj
					; seg0b2c:1966j
		cmp	byte ptr [bp-1], 2
		jnz	loc_EE46
		push	0
		push	0
		push	2
		les	bx, [bp+6]
		push	word ptr es:[bx+0Ah]
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		call	@add_explosion$qiiucnuc	; add_explosion(int,int,uchar,uchar *)
		add	sp, 0Ah
		push	0BB8h
		les	bx, [bp+6]
		push	word ptr es:[bx+0Ah]
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		call	@score_at$qiii	; score_at(int,int,int)
		add	sp, 6

loc_EE46::				; CODE XREF: seg0b2c:1942j
					; seg0b2c:196Fj
		jmp	locret_EEDA
; ---------------------------------------------------------------------------

loc_EE49::				; CODE XREF: seg0b2c:18B6j
					; seg0b2c:18C5j ...
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+34h], 1
		jnz	loc_EE59
		push	ds
		push	offset aShipr_l_1 ; "shipr.l"
		jmp	loc_EE5D
; ---------------------------------------------------------------------------

loc_EE59::				; CODE XREF: seg0b2c:19B1j
		push	ds
		push	offset aShipl_l_1 ; "shipl.l"

loc_EE5D::				; CODE XREF: seg0b2c:19B7j
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8
		les	bx, [bp+6]
		mov	ax, es:[bx+14h]
		neg	ax
		les	bx, [bp+6]
		mov	es:[bx+14h], ax
		les	bx, [bp+6]
		xor	byte ptr es:[bx+34h], 1
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 0BFh
		jmp	locret_EEDA
; ---------------------------------------------------------------------------

loc_EE8D::				; CODE XREF: seg0b2c:1898j
					; seg0b2c:1968j
		push	seg seg0b2c
		push	offset @do_ship_bomb$qn7m_actor	; do_ship_bomb(m_actor *)
		push	0
		push	0
		push	ds
		push	offset aShpbmb_l_0 ; "shpbmb.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		mov	word ptr es:[bx+16h], 3
		les	bx, [bp+6]
		push	word ptr es:[bx+6]
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8

locret_EEDA::				; CODE XREF: seg0b2c:loc_EE46j
					; seg0b2c:19EBj
		leave
		retf
; ---------------------------------------------------------------------------

; do_ship_bomb(m_actor *)
@do_ship_bomb$qn7m_actor:		; DATA XREF: seg0b2c:19F0o
		push	bp
		mov	bp, sp
		push	si
		les	bx, _the_map
		les	bx, es:[bx+39Eh]
		push	es
		les	si, [bp+6]
		mov	ax, es:[si+18h]

loc_EEF1::
		shl	ax, 2
		add	bx, ax
		pop	es

loc_EEF7::
		cmp	word ptr es:[bx], 100h
		jnb	loc_EF00
		jmp	loc_EF5E
; ---------------------------------------------------------------------------

loc_EF00::				; CODE XREF: seg0b2c:1A5Cj
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		cmp	ax, 1
		jnz	loc_EF5C
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@touching$qn7m_actort1 ; touching(m_actor *,m_actor *)
		add	sp, 8
		or	al, al
		jz	loc_EF38
		push	0
		push	6
		push	cs
		call	near ptr @hit_cur_sub$qii ; hit_cur_sub(int,int)
		add	sp, 4
		jmp	loc_EF5E
; ---------------------------------------------------------------------------

loc_EF38::				; CODE XREF: seg0b2c:1A89j
		push	6
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_EF5C
		push	0
		les	bx, [bp+6]
		push	word ptr es:[bx+2]
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		call	@add_bubble$qiii ; add_bubble(int,int,int)
		add	sp, 6

loc_EF5C::				; CODE XREF: seg0b2c:1A6Fj
					; seg0b2c:1AA2j
		jmp	loc_EF92
; ---------------------------------------------------------------------------

loc_EF5E::				; CODE XREF: seg0b2c:1A5Ej
					; seg0b2c:1A96j
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		cmp	ax, 1
		jnz	loc_EF8A
		push	0
		push	0
		push	1
		les	bx, [bp+6]
		push	word ptr es:[bx+2]
		les	bx, [bp+6]
		push	word ptr es:[bx]
		call	@add_explosion$qiiucnuc	; add_explosion(int,int,uchar,uchar *)
		add	sp, 0Ah

loc_EF8A::				; CODE XREF: seg0b2c:1ACDj
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 1

loc_EF92::				; CODE XREF: seg0b2c:loc_EF5Cj
		pop	si
		pop	bp
		retf
; ---------------------------------------------------------------------------

; do_cannon(m_actor *)
@do_cannon$qn7m_actor:			; DATA XREF: add_map_item(uint,uint)+B9Co
		push	bp
		mov	bp, sp
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jnz	loc_EFAB
		jmp	loc_F0AB
; ---------------------------------------------------------------------------

loc_EFAB::				; CODE XREF: seg0b2c:1B06j
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@facing_actor$qn7m_actor ; m_actor::facing_actor(m_actor *)
		add	sp, 8
		mov	ah, 0
		or	ax, ax
		jnz	loc_EFF1
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+34h], 1
		jnz	loc_EFD7
		push	ds
		push	offset aCannonr_l_1 ; "cannonr.l"
		jmp	loc_EFDB
; ---------------------------------------------------------------------------

loc_EFD7::				; CODE XREF: seg0b2c:1B2Fj
		push	ds
		push	offset aCannonl_l_0 ; "cannonl.l"

loc_EFDB::				; CODE XREF: seg0b2c:1B35j
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8
		les	bx, [bp+6]
		xor	byte ptr es:[bx+34h], 1

loc_EFF1::				; CODE XREF: seg0b2c:1B25j
		les	bx, [bp+6]
		cmp	word ptr es:[bx+22h], 0
		jz	loc_F01F
		les	bx, [bp+6]
		mov	ax, es:[bx+22h]	; DATA XREF: 0000012Bw
		dec	word ptr es:[bx+22h]
		cmp	ax, 8
		jnz	loc_F01D
		push	5
		push	0Ah
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@add_missile$qn7m_actoruci ; add_missile(m_actor *,uchar,int)
		add	sp, 8

loc_F01D::				; CODE XREF: seg0b2c:1B69j
		jmp	loc_F063
; ---------------------------------------------------------------------------

loc_F01F::				; CODE XREF: seg0b2c:1B59j
		les	bx, _cur_sub
		mov	ax, es:[bx+0Ah]
		les	bx, [bp+6]
		sub	ax, es:[bx+0Ah]
		push	ax
		call	@abs$qi		; abs(int)
		pop	cx
		mov	_diff_y, ax
		cmp	_diff_y, 0Ah
		jnb	loc_F063
		push	3
		push	2
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		push	5
		call	@random$qi	; random(int)
		pop	cx
		add	ax, 0Ah
		les	bx, [bp+6]
		mov	es:[bx+22h], ax

loc_F063::				; CODE XREF: seg0b2c:loc_F01Dj
					; seg0b2c:1B9Dj
		push	0Ah
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @check_for_hit$qn7m_actoruc ; check_for_hit(m_actor *,uchar)
		add	sp, 6
		cmp	al, 2
		jnz	loc_F0AB
		push	0
		push	0
		push	2
		les	bx, [bp+6]
		push	word ptr es:[bx+2]
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		call	@add_explosion$qiiucnuc	; add_explosion(int,int,uchar,uchar *)
		add	sp, 0Ah
		push	3E8h
		les	bx, [bp+6]
		push	word ptr es:[bx+2]
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		call	@score_at$qiii	; score_at(int,int,int)
		add	sp, 6

loc_F0AB::				; CODE XREF: seg0b2c:1B08j
					; seg0b2c:1BD4j
		pop	bp
		retf
; ---------------------------------------------------------------------------

; do_clam(m_actor *)
@do_clam$qn7m_actor:			; DATA XREF: add_map_item(uint,uint)+B39o
		push	bp
		mov	bp, sp
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jnz	loc_F0C3
		jmp	loc_F35D
; ---------------------------------------------------------------------------

loc_F0C3::				; CODE XREF: seg0b2c:1C1Ej
		les	bx, [bp+6]
		cmp	word ptr es:[bx+24h], 0
		jz	loc_F0D7
		les	bx, [bp+6]
		dec	word ptr es:[bx+24h]
		jmp	loc_F35D
; ---------------------------------------------------------------------------

loc_F0D7::				; CODE XREF: seg0b2c:1C2Bj
		push	6
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @check_for_hit$qn7m_actoruc ; check_for_hit(m_actor *,uchar)
		add	sp, 6
		cmp	al, 2
		jz	loc_F0ED
		jmp	loc_F1B9
; ---------------------------------------------------------------------------

loc_F0ED::				; CODE XREF: seg0b2c:1C48j
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 0FEh
		les	bx, [bp+6]
		mov	byte ptr es:[bx+35h], 0
		les	bx, [bp+6]
		mov	dword ptr es:[bx+3Eh], 0
		push	4
		push	0
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		push	0
		push	0
		push	1
		les	bx, [bp+6]
		push	word ptr es:[bx+2]
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		call	@add_explosion$qiiucnuc	; add_explosion(int,int,uchar,uchar *)
		add	sp, 0Ah
		push	0
		les	bx, [bp+6]
		push	word ptr es:[bx+2]
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		call	@add_bubble$qiii ; add_bubble(int,int,int)
		add	sp, 6
		push	seg seg0b2c
		push	offset @do_coin$qn7m_actor ; do_coin(m_actor *)
		push	0
		push	0
		push	ds
		push	offset aGem_l_0	; "gem.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		or	byte ptr es:[bx+52h], 80h
		les	bx, _act
		mov	word ptr es:[bx+16h], 0FFF8h
		les	bx, [bp+6]
		push	word ptr es:[bx+2]
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8
		push	1
		push	1
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8

loc_F1B9::				; CODE XREF: seg0b2c:1C4Aj
		les	bx, _cur_sub
		mov	ax, es:[bx+8]
		les	bx, [bp+6]
		sub	ax, es:[bx+8]
		push	ax
		call	@abs$qi		; abs(int)
		pop	cx
		mov	_diff_x, ax
		les	bx, _cur_sub
		mov	ax, es:[bx+0Ah]
		les	bx, [bp+6]
		sub	ax, es:[bx+0Ah]
		push	ax
		call	@abs$qi		; abs(int)
		pop	cx
		mov	_diff_y, ax
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 6
		and	ax, 1
		cmp	ax, 1
		jz	loc_F200
		jmp	loc_F2ED
; ---------------------------------------------------------------------------

loc_F200::				; CODE XREF: seg0b2c:1D5Bj
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 7
		and	ax, 1
		cmp	ax, 1
		jnz	loc_F278
		les	bx, [bp+6]
		dec	word ptr es:[bx+22h]
		jnz	loc_F264
		push	3
		push	1
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 7Fh
		mov	al, 0
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 0BFh
		shl	al, 6
		or	es:[bx+52h], al
		les	bx, [bp+6]
		mov	word ptr es:[bx+24h], 28h ; '('
		les	bx, dword ptr _the_game
		mov	byte ptr es:[bx+0Eh], 0
		les	bx, _cur_sub
		mov	word ptr es:[bx+16h], 0FFFCh
		jmp	loc_F276
; ---------------------------------------------------------------------------

loc_F264::				; CODE XREF: seg0b2c:1D79j
		les	bx, _cur_sub
		xor	ax, ax
		mov	es:[bx+16h], ax
		les	bx, _cur_sub
		mov	es:[bx+14h], ax

loc_F276::				; CODE XREF: seg0b2c:1DC2j
		jmp	loc_F2EB
; ---------------------------------------------------------------------------

loc_F278::				; CODE XREF: seg0b2c:1D70j
		les	bx, _cur_sub
		mov	ax, es:[bx+0Ah]
		les	bx, [bp+6]
		sub	ax, es:[bx+2]
		push	ax
		call	@abs$qi		; abs(int)
		pop	cx
		cmp	ax, 8
		jge	loc_F2E2
		push	6
		push	ds
		push	offset aDirhit_0 ; "dirhit"
		push	word_2B8BC
		push	_the_game
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah
		les	bx, dword ptr _the_game
		mov	byte ptr es:[bx+0Eh], 1
		push	0
		push	4
		push	cs
		call	near ptr @hit_cur_sub$qii ; hit_cur_sub(int,int)
		add	sp, 4
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 80h
		les	bx, [bp+6]
		mov	word ptr es:[bx+22h], 3Ch ; '<'
		push	5
		push	1
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		jmp	loc_F2EB
; ---------------------------------------------------------------------------

loc_F2E2::				; CODE XREF: seg0b2c:1DF1j
		les	bx, _cur_sub
		add	word ptr es:[bx+16h], 4

loc_F2EB::				; CODE XREF: seg0b2c:loc_F276j
					; seg0b2c:1E40j
		jmp	loc_F35D
; ---------------------------------------------------------------------------

loc_F2ED::				; CODE XREF: seg0b2c:1D5Dj
		les	bx, _cur_sub
		mov	ax, es:[bx+0Ah]
		les	bx, [bp+6]
		cmp	ax, es:[bx+0Ah]
		jge	loc_F35D
		cmp	_jason_on, 0
		jnz	loc_F35D
		cmp	_diff_y, 32h ; '2'
		jnb	loc_F35D
		les	bx, _cur_sub
		mov	ax, es:[bx+8]
		les	bx, [bp+6]
		cmp	ax, es:[bx]
		jl	loc_F35D
		les	bx, _cur_sub
		mov	ax, es:[bx+8]
		les	bx, [bp+6]
		cmp	ax, es:[bx+4]
		jge	loc_F35D
		push	6
		push	ds
		push	offset aSwish_1	; "swish"
		push	word_2B8BC
		push	_the_game
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah
		push	4
		push	1
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 40h

loc_F35D::				; CODE XREF: seg0b2c:1C20j
					; seg0b2c:1C34j ...
		pop	bp
		retf
; ---------------------------------------------------------------------------

; do_shuttle(m_actor *)
@do_shuttle$qn7m_actor:			; DATA XREF: add_map_item(uint,uint)+AFFo
		enter	2, 0
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jnz	loc_F387
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 7
		and	ax, 1
		or	ax, ax
		jnz	loc_F387
		jmp	locret_F49F
; ---------------------------------------------------------------------------

loc_F387::				; CODE XREF: seg0b2c:1ED1j
					; seg0b2c:1EE2j
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 80h
		les	bx, [bp+6]
		cmp	word ptr es:[bx+22h], 0
		jz	loc_F3A0
		les	bx, [bp+6]
		dec	word ptr es:[bx+22h]

loc_F3A0::				; CODE XREF: seg0b2c:1EF7j
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 6
		and	ax, 1
		or	ax, ax
		jz	loc_F3B4
		jmp	loc_F43D
; ---------------------------------------------------------------------------

loc_F3B4::				; CODE XREF: seg0b2c:1F0Fj
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@facing_actor$qn7m_actor ; m_actor::facing_actor(m_actor *)
		add	sp, 8
		mov	ah, 0
		or	ax, ax
		jnz	loc_F3D8
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 40h

loc_F3D8::				; CODE XREF: seg0b2c:1F2Ej
		push	19h
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @check_for_hit$qn7m_actoruc ; check_for_hit(m_actor *,uchar)
		add	sp, 6
		mov	[bp-1],	al
		cmp	byte ptr [bp-1], 2
		jnz	loc_F424
		push	0
		push	0
		push	2
		les	bx, [bp+6]
		push	word ptr es:[bx+0Ah]
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		call	@add_explosion$qiiucnuc	; add_explosion(int,int,uchar,uchar *)
		add	sp, 0Ah
		push	7D0h
		les	bx, [bp+6]
		push	word ptr es:[bx+2]
		les	bx, [bp+6]
		push	word ptr es:[bx]
		call	@score_at$qiii	; score_at(int,int,int)
		add	sp, 6

loc_F424::				; CODE XREF: seg0b2c:1F4Ej
		push	4
		push	2
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @do_follow$qn7m_actorii ; do_follow(m_actor *,int,int)
		add	sp, 8
		or	al, al
		jz	loc_F43B
		jmp	loc_F47A
; ---------------------------------------------------------------------------

loc_F43B::				; CODE XREF: seg0b2c:1F97j
		jmp	locret_F49F
; ---------------------------------------------------------------------------

loc_F43D::				; CODE XREF: seg0b2c:1F11j
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+34h], 1
		jnz	loc_F44D
		push	ds
		push	offset aShutl_r_l_0 ; "shutl_r.l"
		jmp	loc_F451
; ---------------------------------------------------------------------------

loc_F44D::				; CODE XREF: seg0b2c:1FA5j
		push	ds
		push	offset aShutl_l_l_1 ; "shutl_l.l"

loc_F451::				; CODE XREF: seg0b2c:1FABj
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8
		les	bx, [bp+6]
		xor	byte ptr es:[bx+34h], 1
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 0BFh
		les	bx, [bp+6]
		mov	word ptr es:[bx+22h], 0Ah
		jmp	locret_F49F
; ---------------------------------------------------------------------------

loc_F47A::				; CODE XREF: seg0b2c:1F99j
		cmp	_diff_y, 0Fh
		jnb	locret_F49F
		push	0Ch
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	locret_F49F
		push	0
		push	1
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@add_missile$qn7m_actoruci ; add_missile(m_actor *,uchar,int)
		add	sp, 8

locret_F49F::				; CODE XREF: seg0b2c:1EE4j
					; seg0b2c:loc_F43Bj ...
		leave
		retf
; ---------------------------------------------------------------------------

; do_fire_ball(m_actor *)
@do_fire_ball$qn7m_actor:		; DATA XREF: seg0b2c:210Eo
		push	bp
		mov	bp, sp
		les	bx, [bp+6]
		mov	ax, es:[bx+16h]
		inc	word ptr es:[bx+16h]
		les	bx, [bp+6]
		cmp	ax, es:[bx+22h]
		jnz	loc_F4C0
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 1

loc_F4C0::				; CODE XREF: seg0b2c:2016j
		les	bx, [bp+6]
		cmp	word ptr es:[bx+16h], 1
		jnz	loc_F4DC
		push	ds
		push	offset aFirbaldn_l_0 ; "firbaldn.l"
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8

loc_F4DC::				; CODE XREF: seg0b2c:2028j
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jz	loc_F558
		push	0Ah
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_F510
		push	0
		les	bx, [bp+6]
		push	word ptr es:[bx+0Ah]
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		call	@add_bubble$qiii ; add_bubble(int,int,int)
		add	sp, 6

loc_F510::				; CODE XREF: seg0b2c:2056j
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@touching$qn7m_actort1 ; touching(m_actor *,m_actor *)
		add	sp, 8
		or	al, al
		jz	loc_F558
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 1
		push	2
		push	0Fh
		push	cs
		call	near ptr @hit_cur_sub$qii ; hit_cur_sub(int,int)
		add	sp, 4
		push	0
		push	0
		push	1
		les	bx, [bp+6]
		push	word ptr es:[bx+2]
		les	bx, [bp+6]
		push	word ptr es:[bx]
		call	@add_explosion$qiiucnuc	; add_explosion(int,int,uchar,uchar *)
		add	sp, 0Ah

loc_F558::				; CODE XREF: seg0b2c:204Aj
					; seg0b2c:2088j
		pop	bp
		retf
; ---------------------------------------------------------------------------

; do_fire_pit(m_actor *)
@do_fire_pit$qn7m_actor:		; DATA XREF: add_map_item(uint,uint)+AA3o
		enter	2, 0
		les	bx, [bp+6]
		mov	ax, es:[bx+22h]
		inc	word ptr es:[bx+22h]
		les	bx, [bp+6]
		cmp	ax, es:[bx+24h]
		jz	loc_F575
		jmp	locret_F62E
; ---------------------------------------------------------------------------

loc_F575::				; CODE XREF: seg0b2c:20D0j
		push	5
		call	@random$qi	; random(int)
		pop	cx
		les	bx, [bp+6]
		mov	es:[bx+22h], ax
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		cmp	ax, 1
		jnz	loc_F5AB
		push	5
		push	ds
		push	offset aFire1_0	; "fire1"
		push	word_2B8BC
		push	_the_game
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah

loc_F5AB::				; CODE XREF: seg0b2c:20F3j
		push	seg seg0b2c
		push	offset @do_fire_ball$qn7m_actor	; do_fire_ball(m_actor *)
		push	0
		push	0
		push	ds
		push	offset aFirbalup_l_0 ; "firbalup.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, [bp+6]
		push	word ptr es:[bx+2]
		les	bx, [bp+6]
		mov	ax, es:[bx]
		add	ax, 0Fh
		push	ax
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8
		push	1
		push	1
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		push	5
		call	@random$qi	; random(int)
		pop	cx
		add	ax, 0Ch
		mov	[bp-2],	ax
		les	bx, _act
		mov	ax, [bp-2]
		neg	ax
		mov	es:[bx+16h], ax
		les	bx, _act
		mov	ax, [bp-2]
		add	ax, 0FFFEh
		mov	es:[bx+22h], ax

locret_F62E::				; CODE XREF: seg0b2c:20D2j
		leave
		retf
; ---------------------------------------------------------------------------

; do_spikes(m_actor *)
@do_spikes$qn7m_actor:			; DATA XREF: add_map_item(uint,uint)+9CFo
					; add_map_item(uint,uint)+9FAo
		push	bp
		mov	bp, sp
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jnz	loc_F646
		jmp	loc_F703
; ---------------------------------------------------------------------------

loc_F646::				; CODE XREF: seg0b2c:21A1j
		les	bx, [bp+6]
		mov	al, es:[bx+38h]
		mov	ah, 0
		or	ax, ax
		jnz	loc_F6C5
		les	bx, [bp+6]
		mov	al, es:[bx+3Ch]
		mov	ah, 0
		les	bx, [bp+6]
		mov	dl, es:[bx+3Bh]
		mov	dh, 0
		dec	dx
		cmp	ax, dx
		jnz	loc_F699
		les	bx, [bp+6]
		cmp	word ptr es:[bx+22h], 0
		jz	loc_F67D
		les	bx, [bp+6]
		dec	word ptr es:[bx+22h]
		jmp	loc_F697
; ---------------------------------------------------------------------------

loc_F67D::				; CODE XREF: seg0b2c:21D2j
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 0BFh
		push	5
		push	2
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8

loc_F697::				; CODE XREF: seg0b2c:21DBj
		jmp	loc_F6C3
; ---------------------------------------------------------------------------

loc_F699::				; CODE XREF: seg0b2c:21C8j
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+3Ch], 0
		jnz	loc_F6C3
		les	bx, [bp+6]
		mov	ax, es:[bx+24h]
		les	bx, [bp+6]
		mov	es:[bx+22h], ax
		push	4
		push	2
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8

loc_F6C3::				; CODE XREF: seg0b2c:loc_F697j
					; seg0b2c:2201j
		jmp	loc_F703
; ---------------------------------------------------------------------------

loc_F6C5::				; CODE XREF: seg0b2c:21B1j
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 6
		and	ax, 1
		or	ax, ax
		jnz	loc_F703
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@touching$qn7m_actort1 ; touching(m_actor *,m_actor *)
		add	sp, 8
		or	al, al
		jz	loc_F703
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 40h
		push	0
		push	0Ah
		push	cs
		call	near ptr @hit_cur_sub$qii ; hit_cur_sub(int,int)
		add	sp, 4

loc_F703::				; CODE XREF: seg0b2c:21A3j
					; seg0b2c:loc_F6C3j ...
		pop	bp
		retf
; ---------------------------------------------------------------------------

; do_tentacle(m_actor *)
@do_tentacle$qn7m_actor:		; DATA XREF: add_map_item(uint,uint)+96Bo
		push	bp
		mov	bp, sp
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jnz	loc_F71B
		jmp	loc_F7F7
; ---------------------------------------------------------------------------

loc_F71B::				; CODE XREF: seg0b2c:2276j
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+3Dh], 0
		jnz	loc_F765
		les	bx, [bp+6]
		dec	word ptr es:[bx+22h]
		jnz	loc_F762
		les	bx, [bp+6]
		mov	byte ptr es:[bx+3Dh], 5
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 0F7h
		push	ds
		push	offset aTent_out_l_1 ; "tent_out.l"
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8
		push	4
		push	4
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8

loc_F762::				; CODE XREF: seg0b2c:228Cj
		jmp	loc_F7F7
; ---------------------------------------------------------------------------

loc_F765::				; CODE XREF: seg0b2c:2283j
		push	word ptr _ego+2
		push	word ptr _ego
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@touching$qn7m_actort1 ; touching(m_actor *,m_actor *)
		add	sp, 8
		or	al, al
		jz	loc_F7A1
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 1
		mov	_death_type, 1
		les	bx, [bp+6]
		push	word ptr es:[bx+2]
		les	bx, [bp+6]
		push	word ptr es:[bx]
		call	@kill_ego$qii	; kill_ego(int,int)
		add	sp, 4

loc_F7A1::				; CODE XREF: seg0b2c:22DDj
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 3
		and	ax, 1
		or	ax, ax
		jz	loc_F7F7
		push	ds
		push	offset aTent_in_l_0 ; "tent_in.l"
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8
		push	4
		push	1
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 0F7h
		les	bx, [bp+6]
		mov	byte ptr es:[bx+36h], 0Fh
		les	bx, [bp+6]
		mov	byte ptr es:[bx+3Dh], 0
		les	bx, [bp+6]
		mov	word ptr es:[bx+22h], 64h ; 'd'

loc_F7F7::				; CODE XREF: seg0b2c:2278j
					; seg0b2c:loc_F762j ...
		pop	bp
		retf
; ---------------------------------------------------------------------------

; do_shark(m_actor *)
@do_shark$qn7m_actor:			; DATA XREF: add_map_item(uint,uint)+8D5o
					; add_map_item(uint,uint)+907o
		enter	2, 0
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+3Dh], 2
		jnz	loc_F817
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @check_flying_death$qn7m_actor	; check_flying_death(m_actor *)
		add	sp, 4
		jmp	locret_FA97
; ---------------------------------------------------------------------------

loc_F817::				; CODE XREF: seg0b2c:2365j
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jnz	loc_F83B
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 6
		and	ax, 1
		or	ax, ax
		jnz	loc_F83B
		jmp	locret_FA97
; ---------------------------------------------------------------------------

loc_F83B::				; CODE XREF: seg0b2c:2385j
					; seg0b2c:2396j
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 6
		and	ax, 1
		or	ax, ax
		jnz	loc_F884
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 40h
		push	1
		push	8
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+34h], 1
		jnz	loc_F87B
		les	bx, [bp+6]
		mov	word ptr es:[bx+14h], 0FFFFh
		jmp	loc_F884
; ---------------------------------------------------------------------------

loc_F87B::				; CODE XREF: seg0b2c:23CEj
		les	bx, [bp+6]
		mov	word ptr es:[bx+14h], 1

loc_F884::				; CODE XREF: seg0b2c:23AAj
					; seg0b2c:23D9j
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 7
		and	ax, 1
		cmp	ax, 1
		jnz	loc_F899
		jmp	loc_FA0E
; ---------------------------------------------------------------------------

loc_F899::				; CODE XREF: seg0b2c:23F4j
		les	bx, [bp+6]
		cmp	word ptr es:[bx+22h], 0
		jz	loc_F91D
		les	bx, [bp+6]
		cmp	word ptr es:[bx+24h], 0
		jz	loc_F8B6
		les	bx, [bp+6]
		dec	word ptr es:[bx+24h]
		jmp	loc_F908
; ---------------------------------------------------------------------------

loc_F8B6::				; CODE XREF: seg0b2c:240Bj
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@touching$qn7m_actort1 ; touching(m_actor *,m_actor *)
		add	sp, 8
		or	al, al
		jz	loc_F908
		push	8
		push	ds
		push	offset aPirana_1 ; "pirana"
		push	word_2B8BC
		push	_the_game
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah
		les	bx, [bp+6]
		mov	ax, es:[bx+14h]
		cwd
		sub	ax, dx
		sar	ax, 1
		push	ax
		push	0Fh
		push	cs
		call	near ptr @hit_cur_sub$qii ; hit_cur_sub(int,int)
		add	sp, 4
		les	bx, [bp+6]
		mov	word ptr es:[bx+24h], 3
		jmp	loc_FA0E
; ---------------------------------------------------------------------------

loc_F908::				; CODE XREF: seg0b2c:2414j
					; seg0b2c:242Ej
		les	bx, [bp+6]
		dec	word ptr es:[bx+22h]
		mov	ax, es:[bx+22h]
		cmp	ax, 1
		jnz	loc_F91B
		jmp	loc_FA71
; ---------------------------------------------------------------------------

loc_F91B::				; CODE XREF: seg0b2c:2476j
		jmp	loc_F969
; ---------------------------------------------------------------------------

loc_F91D::				; CODE XREF: seg0b2c:2401j
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@facing_actor$qn7m_actor ; m_actor::facing_actor(m_actor *)
		add	sp, 8
		or	al, al
		jz	loc_F95A
		les	bx, [bp+6]
		mov	ax, es:[bx+0Ah]
		les	bx, _cur_sub
		sub	ax, es:[bx+0Ah]
		push	ax
		call	@abs$qi		; abs(int)
		pop	cx
		mov	_diff_y, ax
		cmp	_diff_y, 1Eh
		jnb	loc_F95A
		jmp	loc_FA52
; ---------------------------------------------------------------------------

loc_F95A::				; CODE XREF: seg0b2c:2495j
					; seg0b2c:24B5j
		push	64h ; 'd'
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_F969
		jmp	loc_FA0E
; ---------------------------------------------------------------------------

loc_F969::				; CODE XREF: seg0b2c:loc_F91Bj
					; seg0b2c:24C4j
		push	16h
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @check_for_hit$qn7m_actoruc ; check_for_hit(m_actor *,uchar)
		add	sp, 6
		mov	[bp-1],	al
		cmp	byte ptr [bp-1], 0
		jnz	loc_F984
		jmp	loc_FA0B
; ---------------------------------------------------------------------------

loc_F984::				; CODE XREF: seg0b2c:24DFj
		cmp	byte ptr [bp-1], 1
		jnz	loc_F9BF
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@facing_actor$qn7m_actor ; m_actor::facing_actor(m_actor *)
		add	sp, 8
		mov	ah, 0
		or	ax, ax
		jnz	loc_F9BD
		mov	al, _shot_size
		mov	ah, 0
		mov	dx, 4
		sub	dx, ax
		push	dx
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_F9BD
		jmp	loc_FA0E
; ---------------------------------------------------------------------------

loc_F9BD::				; CODE XREF: seg0b2c:2504j
					; seg0b2c:2519j
		jmp	loc_FA0B
; ---------------------------------------------------------------------------

loc_F9BF::				; CODE XREF: seg0b2c:24E8j
		cmp	byte ptr [bp-1], 2
		jnz	loc_FA0B
		push	0BB8h
		les	bx, [bp+6]
		push	word ptr es:[bx+0Ah]
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		call	@score_at$qiii	; score_at(int,int,int)
		add	sp, 6
		push	4
		push	0FFF7h
		push	2
		push	ds
		push	offset aSharkdie_l_1 ; "sharkdie.l"
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @set_flying_death$qn7m_actornuciiuc ; set_flying_death(m_actor	*,uchar	*,int,int,uchar)
		add	sp, 0Eh
		push	8
		push	ds
		push	offset aPirana_2 ; "pirana"
		push	word_2B8BC
		push	_the_game
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah

loc_FA0B::				; CODE XREF: seg0b2c:24E1j
					; seg0b2c:loc_F9BDj ...
		jmp	locret_FA97
; ---------------------------------------------------------------------------

loc_FA0E::				; CODE XREF: seg0b2c:23F6j
					; seg0b2c:2465j ...
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+34h], 1
		jnz	loc_FA1E
		push	ds
		push	offset aSharkr_l_2 ; "sharkr.l"
		jmp	loc_FA22
; ---------------------------------------------------------------------------

loc_FA1E::				; CODE XREF: seg0b2c:2576j
		push	ds
		push	offset aSharkl_l_2 ; "sharkl.l"

loc_FA22::				; CODE XREF: seg0b2c:257Cj
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8
		les	bx, [bp+6]
		xor	byte ptr es:[bx+34h], 1
		les	bx, [bp+6]
		mov	ax, es:[bx+14h]
		neg	ax
		les	bx, [bp+6]
		mov	es:[bx+14h], ax
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 7Fh
		jmp	locret_FA97
; ---------------------------------------------------------------------------

loc_FA52::				; CODE XREF: seg0b2c:24B7j
		les	bx, [bp+6]
		mov	dx, 0Ah
		mov	ax, es:[bx+14h]
		imul	dx
		mov	es:[bx+14h], ax
		les	bx, [bp+6]
		mov	word ptr es:[bx+22h], 19h
		push	1
		push	1
		jmp	loc_FA89
; ---------------------------------------------------------------------------

loc_FA71::				; CODE XREF: seg0b2c:2478j
		les	bx, [bp+6]
		mov	ax, es:[bx+14h]
		mov	bx, 0Ah
		cwd
		idiv	bx
		les	bx, [bp+6]
		mov	es:[bx+14h], ax
		push	1
		push	0Ah

loc_FA89::				; CODE XREF: seg0b2c:25CFj
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8

locret_FA97::				; CODE XREF: seg0b2c:2374j
					; seg0b2c:2398j ...
		leave
		retf
; ---------------------------------------------------------------------------

; do_jelly(m_actor *)
@do_jelly$qn7m_actor:			; DATA XREF: add_map_item(uint,uint)+892o
		enter	4, 0
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+3Dh], 0
		jz	loc_FAAA
		jmp	loc_FB29
; ---------------------------------------------------------------------------

loc_FAAA::				; CODE XREF: seg0b2c:2605j
		les	bx, [bp+6]
		cmp	word ptr es:[bx+16h], 0
		jz	loc_FABB
		les	bx, [bp+6]
		inc	word ptr es:[bx+16h]

loc_FABB::				; CODE XREF: seg0b2c:2612j
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+3Ch], 0
		jnz	loc_FAD5
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 0FFFEh
		les	bx, [bp+6]
		inc	word ptr es:[bx+24h]

loc_FAD5::				; CODE XREF: seg0b2c:2623j
		push	12Ch
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_FAE5
		jmp	loc_FC57
; ---------------------------------------------------------------------------

loc_FAE5::				; CODE XREF: seg0b2c:2640j
		les	bx, [bp+6]
		mov	ax, es:[bx+18h]
		inc	ax
		sub	ax, word ptr _tbl_mul_tw+2
		mov	[bp-2],	ax
		les	bx, _the_map
		les	bx, es:[bx+39Eh]
		mov	ax, [bp-2]
		shl	ax, 2
		add	bx, ax
		cmp	word ptr es:[bx], 100h
		jb	loc_FB24
		les	bx, _the_map
		les	bx, es:[bx+39Eh]
		mov	ax, [bp-2]
		shl	ax, 2
		add	bx, ax
		cmp	word ptr es:[bx], 100h
		jnz	loc_FB27

loc_FB24::				; CODE XREF: seg0b2c:266Aj
		jmp	loc_FC57
; ---------------------------------------------------------------------------

loc_FB27::				; CODE XREF: seg0b2c:2682j
		jmp	loc_FB8A
; ---------------------------------------------------------------------------

loc_FB29::				; CODE XREF: seg0b2c:2607j
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+3Ch], 1
		jnz	loc_FB45
		push	0
		push	0
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8

loc_FB45::				; CODE XREF: seg0b2c:2691j
		les	bx, [bp+6]
		mov	ax, es:[bx+18h]
		les	bx, [bp+6]
		mov	bx, es:[bx+1Ch]
		shl	bx, 1
		add	ax, word ptr _tbl_mul_tw[bx]
		inc	ax
		mov	[bp-2],	ax
		les	bx, _the_map
		les	bx, es:[bx+39Eh]
		mov	ax, [bp-2]
		shl	ax, 2
		add	bx, ax
		cmp	word ptr es:[bx], 100h
		jnb	loc_FB7A
		jmp	loc_FC29
; ---------------------------------------------------------------------------
		jmp	loc_FB8A
; ---------------------------------------------------------------------------

loc_FB7A::				; CODE XREF: seg0b2c:26D3j
		push	12Ch
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_FB8A
		jmp	loc_FC29
; ---------------------------------------------------------------------------

loc_FB8A::				; CODE XREF: seg0b2c:loc_FB27j
					; seg0b2c:26D8j ...
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jnz	loc_FB9D
		jmp	loc_FC27
; ---------------------------------------------------------------------------

loc_FB9D::				; CODE XREF: seg0b2c:26F8j
		les	bx, [bp+6]
		cmp	word ptr es:[bx+22h], 0
		jz	loc_FBB0
		les	bx, [bp+6]
		dec	word ptr es:[bx+22h]
		jmp	loc_FBDE
; ---------------------------------------------------------------------------

loc_FBB0::				; CODE XREF: seg0b2c:2705j
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@touching$qn7m_actort1 ; touching(m_actor *,m_actor *)
		add	sp, 8
		or	al, al
		jz	loc_FBDE
		les	bx, [bp+6]
		mov	word ptr es:[bx+22h], 0Ah
		push	0
		push	0Ah
		push	cs
		call	near ptr @hit_cur_sub$qii ; hit_cur_sub(int,int)
		add	sp, 4

loc_FBDE::				; CODE XREF: seg0b2c:270Ej
					; seg0b2c:2728j
		push	2
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @check_for_hit$qn7m_actoruc ; check_for_hit(m_actor *,uchar)
		add	sp, 6
		mov	[bp-3],	al
		cmp	byte ptr [bp-3], 0
		jz	loc_FC27
		cmp	byte ptr [bp-3], 2
		jnz	loc_FC1B
		push	1F4h
		les	bx, [bp+6]
		push	word ptr es:[bx+0Ah]
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		call	@score_at$qiii	; score_at(int,int,int)
		add	sp, 6
		inc	_enemies_killed
		jmp	loc_FC27
; ---------------------------------------------------------------------------

loc_FC1B::				; CODE XREF: seg0b2c:275Aj
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+3Dh], 3
		jnz	loc_FC27
		jmp	loc_FC29
; ---------------------------------------------------------------------------

loc_FC27::				; CODE XREF: seg0b2c:26FAj
					; seg0b2c:2754j ...
		jmp	locret_FC68
; ---------------------------------------------------------------------------

loc_FC29::				; CODE XREF: seg0b2c:26D5j
					; seg0b2c:26E7j ...
		les	bx, [bp+6]
		mov	byte ptr es:[bx+3Dh], 0
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 0
		push	1
		push	2
		call	@random$qi	; random(int)
		pop	cx
		add	al, 4
		push	ax
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		jmp	locret_FC68
; ---------------------------------------------------------------------------

loc_FC57::				; CODE XREF: seg0b2c:2642j
					; seg0b2c:loc_FB24j
		les	bx, [bp+6]
		mov	byte ptr es:[bx+3Dh], 3
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 1

locret_FC68::				; CODE XREF: seg0b2c:loc_FC27j
					; seg0b2c:27B5j
		leave
		retf
; ---------------------------------------------------------------------------

; do_crab(m_actor *)
@do_crab$qn7m_actor:			; DATA XREF: add_map_item(uint,uint)+76Bo
		push	bp
		mov	bp, sp
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+3Dh], 2
		jnz	loc_FC87
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @check_flying_death$qn7m_actor	; check_flying_death(m_actor *)
		add	sp, 4
		jmp	loc_FDAD
; ---------------------------------------------------------------------------

loc_FC87::				; CODE XREF: seg0b2c:27D5j
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jnz	loc_FC9A
		jmp	loc_FDAD
; ---------------------------------------------------------------------------

loc_FC9A::				; CODE XREF: seg0b2c:27F5j
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 6
		and	ax, 1
		or	ax, ax
		jz	loc_FCC3
		les	bx, [bp+6]
		mov	ax, es:[bx+14h]
		neg	ax
		les	bx, [bp+6]
		mov	es:[bx+14h], ax
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 0BFh

loc_FCC3::				; CODE XREF: seg0b2c:2809j
		push	3Ch ; '<'
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_FCDF
		les	bx, [bp+6]
		mov	ax, es:[bx+14h]
		neg	ax
		les	bx, [bp+6]
		mov	es:[bx+14h], ax

loc_FCDF::				; CODE XREF: seg0b2c:282Dj
		les	bx, [bp+6]
		cmp	word ptr es:[bx+22h], 0
		jz	loc_FCF2
		les	bx, [bp+6]
		dec	word ptr es:[bx+22h]
		jmp	loc_FD35
; ---------------------------------------------------------------------------

loc_FCF2::				; CODE XREF: seg0b2c:2847j
		les	bx, [bp+6]
		mov	ax, es:[bx+0Ah]
		les	bx, _cur_sub
		sub	ax, es:[bx+0Ah]
		push	ax
		call	@abs$qi		; abs(int)
		pop	cx
		mov	_diff_y, ax
		cmp	_diff_y, 41h ; 'A'
		jnb	loc_FD35
		les	bx, [bp+6]
		mov	ax, es:[bx]
		les	bx, _cur_sub
		cmp	ax, es:[bx]
		jge	loc_FD2B
		les	bx, [bp+6]
		mov	byte ptr es:[bx+34h], 0
		jmp	loc_FD33
; ---------------------------------------------------------------------------

loc_FD2B::				; CODE XREF: seg0b2c:287Fj
		les	bx, [bp+6]
		mov	byte ptr es:[bx+34h], 1

loc_FD33::				; CODE XREF: seg0b2c:2889j
		jmp	loc_FD90
; ---------------------------------------------------------------------------

loc_FD35::				; CODE XREF: seg0b2c:2850j
					; seg0b2c:2870j
		push	4
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @check_for_hit$qn7m_actoruc ; check_for_hit(m_actor *,uchar)
		add	sp, 6
		cmp	al, 2
		jnz	loc_FD8E
		push	3E8h
		les	bx, [bp+6]
		push	word ptr es:[bx+0Ah]
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		call	@score_at$qiii	; score_at(int,int,int)
		add	sp, 6
		push	4
		push	0FFFAh
		push	6
		push	ds
		push	offset aCrabdie_l_0 ; "crabdie.l"
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @set_flying_death$qn7m_actornuciiuc ; set_flying_death(m_actor	*,uchar	*,int,int,uchar)
		add	sp, 0Eh
		push	8
		push	ds
		push	offset aPirana_0 ; "pirana"
		push	word_2B8BC
		push	_the_game
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah

loc_FD8E::				; CODE XREF: seg0b2c:28A6j
		jmp	loc_FDAD
; ---------------------------------------------------------------------------

loc_FD90::				; CODE XREF: seg0b2c:loc_FD33j
		push	1
		push	9
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@add_missile$qn7m_actoruci ; add_missile(m_actor *,uchar,int)
		add	sp, 8
		les	bx, [bp+6]
		mov	word ptr es:[bx+22h], 19h
		jmp	$+2
; ---------------------------------------------------------------------------

loc_FDAD::				; CODE XREF: seg0b2c:27E4j
					; seg0b2c:27F7j ...
		pop	bp
		retf
; ---------------------------------------------------------------------------
		assume es:nothing

; do_serpent(m_actor *)
@do_serpent$qn7m_actor:			; DATA XREF: add_map_item(uint,uint)+6CAo
					; add_map_item(uint,uint)+706o
		push	bp
		mov	bp, sp
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+3Dh], 2
		jnz	loc_FDCC
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @check_flying_death$qn7m_actor	; check_flying_death(m_actor *)
		add	sp, 4
		jmp	loc_FEE6
; ---------------------------------------------------------------------------

loc_FDCC::				; CODE XREF: seg0b2c:291Aj
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jnz	loc_FDDF
		jmp	loc_FEE6
; ---------------------------------------------------------------------------
		assume es:nothing

loc_FDDF::				; CODE XREF: seg0b2c:293Aj
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 6
		and	ax, 1
		or	ax, ax
		jz	loc_FDF3
		jmp	loc_FEA4
; ---------------------------------------------------------------------------

loc_FDF3::				; CODE XREF: seg0b2c:294Ej
		les	bx, [bp+6]
		cmp	word ptr es:[bx+22h], 0
		jz	loc_FE06
		les	bx, [bp+6]
		dec	word ptr es:[bx+22h]
		jmp	loc_FE42
; ---------------------------------------------------------------------------

loc_FE06::				; CODE XREF: seg0b2c:295Bj
		les	bx, [bp+6]
		mov	ax, es:[bx+0Ah]
		les	bx, _cur_sub
		assume es:nothing
		sub	ax, es:[bx+0Ah]
		push	ax
		call	@abs$qi		; abs(int)
		pop	cx
		mov	_diff_y, ax
		cmp	_diff_y, 1Eh
		jnb	loc_FE42
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@facing_actor$qn7m_actor ; m_actor::facing_actor(m_actor *)
		assume es:nothing
		add	sp, 8
		or	al, al
		jz	loc_FE42
		jmp	loc_FE87
; ---------------------------------------------------------------------------
		assume es:nothing

loc_FE42::				; CODE XREF: seg0b2c:2964j
					; seg0b2c:2984j ...
		push	3
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @check_for_hit$qn7m_actoruc ; check_for_hit(m_actor *,uchar)
		assume es:nothing
		add	sp, 6
		cmp	al, 2
		jnz	loc_FE85
		push	1F4h
		les	bx, [bp+6]
		assume es:nothing
		push	word ptr es:[bx+0Ah]
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		call	@score_at$qiii	; score_at(int,int,int)
		add	sp, 6
		push	1
		push	0FFF8h
		push	2
		push	ds
		push	offset aSerpdie_l_0 ; "serpdie.l"
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @set_flying_death$qn7m_actornuciiuc ; set_flying_death(m_actor	*,uchar	*,int,int,uchar)
		add	sp, 0Eh
		assume es:nothing

loc_FE85::				; CODE XREF: seg0b2c:29B3j
		jmp	loc_FEE6
; ---------------------------------------------------------------------------

loc_FE87::				; CODE XREF: seg0b2c:29A0j
		push	4
		push	7
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@add_missile$qn7m_actoruci ; add_missile(m_actor *,uchar,int)
		assume es:nothing
		add	sp, 8
		les	bx, [bp+6]
		assume es:nothing
		mov	word ptr es:[bx+22h], 0Fh
		jmp	loc_FEE6
; ---------------------------------------------------------------------------

loc_FEA4::				; CODE XREF: seg0b2c:2950j
					; seg1c75:4136p
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+34h], 0
		jnz	loc_FEB4
		push	ds
		push	offset aSerp_l_l_1 ; "serp_l.l"
		jmp	loc_FEB8
; ---------------------------------------------------------------------------

loc_FEB4::				; CODE XREF: seg0b2c:2A0Cj
		push	ds
		push	offset aSerp_r_l_1 ; "serp_r.l"

loc_FEB8::				; CODE XREF: seg0b2c:2A12j
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 0BFh
		les	bx, [bp+6]
		xor	byte ptr es:[bx+34h], 1
		les	bx, [bp+6]
		mov	ax, es:[bx+14h]
		neg	ax
		les	bx, [bp+6]
		mov	es:[bx+14h], ax
		assume es:nothing

loc_FEE6::				; CODE XREF: seg0b2c:2929j
					; seg0b2c:293Cj ...
		pop	bp
		retf
; ---------------------------------------------------------------------------

; do_face(m_actor *)
@do_face$qn7m_actor:			; DATA XREF: add_map_item(uint,uint)+632o
					; add_map_item(uint,uint)+666o
		enter	2, 0
		les	bx, [bp+6]
		assume es:nothing
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jnz	loc_FEFF
		jmp	locret_10013
; ---------------------------------------------------------------------------

loc_FEFF::				; CODE XREF: seg0b2c:2A5Aj
		les	bx, [bp+6]

loc_FF02::				; DATA XREF: start+Cr
		mov	al, es:[bx+52h]
		shr	ax, 3
		and	ax, 1
		or	ax, ax
		jz	loc_FF6B
		les	bx, [bp+6]
		cmp	word ptr es:[bx+28h], 0Ah
		jl	loc_FF5B
		push	3E8h
		les	bx, [bp+6]
		push	word ptr es:[bx+0Ah]
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		call	@score_at$qiii	; DATA XREF: start+10r
					; score_at(int,int,int)
		add	sp, 6
		push	0
		push	0
		push	2
		les	bx, [bp+6]
		push	word ptr es:[bx+0Ah]
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		call	@add_explosion$qiiucnuc	; add_explosion(int,int,uchar,uchar *)
		add	sp, 0Ah
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 1
		inc	_enemies_killed

loc_FF5B::				; CODE XREF: seg0b2c:2A78j
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 0F7h
		les	bx, [bp+6]
		mov	byte ptr es:[bx+36h], 0Fh

loc_FF6B::				; CODE XREF: seg0b2c:2A6Ej
		les	bx, [bp+6]
		cmp	word ptr es:[bx+22h], 0
		jz	loc_FFB3
		les	bx, [bp+6]
		dec	word ptr es:[bx+22h]
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 6
		and	ax, 1
		or	ax, ax
		jnz	loc_FFB1
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+3Ch], 1
		jnz	loc_FFB1
		push	0Ch
		push	8
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@add_missile$qn7m_actoruci ; add_missile(m_actor *,uchar,int)
		add	sp, 8
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 40h

loc_FFB1::				; CODE XREF: seg0b2c:2AEBj
					; seg0b2c:2AF5j
		jmp	loc_FFEE
; ---------------------------------------------------------------------------

loc_FFB3::				; CODE XREF: seg0b2c:2AD3j
		les	bx, [bp+6]
		mov	ax, es:[bx+0Ah]
		les	bx, _cur_sub
		sub	ax, es:[bx+0Ah]
		push	ax
		call	@abs$qi		; abs(int)
		pop	cx
		mov	[bp-2],	ax
		cmp	word ptr [bp-2], 23h ; '#'
		jge	loc_FFEE
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@facing_actor$qn7m_actor ; m_actor::facing_actor(m_actor *)
		add	sp, 8
		or	al, al
		jz	loc_FFEE
		jmp	loc_FFF0
; ---------------------------------------------------------------------------

loc_FFEE::				; CODE XREF: seg0b2c:loc_FFB1j
					; seg0b2c:2B30j ...
		jmp	locret_10013
; ---------------------------------------------------------------------------

loc_FFF0::				; CODE XREF: seg0b2c:2B4Cj
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 0BFh
		les	bx, [bp+6]
		mov	word ptr es:[bx+22h], 19h
		push	3
		push	4
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8

locret_10013::				; CODE XREF: seg0b2c:2A5Cj
					; seg0b2c:loc_FFEEj
		leave
		retf
; ---------------------------------------------------------------------------

; do_pirana(m_actor *)
@do_pirana$qn7m_actor:			; DATA XREF: add_map_item(uint,uint)+52Eo
					; add_map_item(uint,uint)+56Ao
		enter	2, 0
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jnz	loc_1004D
		les	bx, [bp+6]
		cmp	word ptr es:[bx+22h], 0
		jz	loc_10038
		jmp	loc_10203
; ---------------------------------------------------------------------------
		jmp	loc_1004D
; ---------------------------------------------------------------------------

loc_10038::				; CODE XREF: seg0b2c:2B91j
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 7
		and	ax, 1
		cmp	ax, 1
		jz	loc_1004D
		jmp	locret_10256
; ---------------------------------------------------------------------------

loc_1004D::				; CODE XREF: seg0b2c:2B87j
					; seg0b2c:2B96j ...
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 80h
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 6
		and	ax, 1
		cmp	ax, 1
		jnz	loc_100A9
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 0BFh
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+34h], 1
		jnz	loc_1007F
		push	ds
		push	offset aPiranar_l_1 ; "piranar.l"
		jmp	loc_10083
; ---------------------------------------------------------------------------

loc_1007F::				; CODE XREF: seg0b2c:2BD7j
		push	ds
		push	offset aPiranal_l_1 ; "piranal.l"

loc_10083::				; CODE XREF: seg0b2c:2BDDj
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8
		les	bx, [bp+6]
		mov	ax, es:[bx+14h]
		neg	ax
		les	bx, [bp+6]
		mov	es:[bx+14h], ax
		les	bx, [bp+6]
		xor	byte ptr es:[bx+34h], 1

loc_100A9::				; CODE XREF: seg0b2c:2BC5j
		push	7
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @check_for_hit$qn7m_actoruc ; check_for_hit(m_actor *,uchar)
		add	sp, 6
		mov	[bp-1],	al
		cmp	byte ptr [bp-1], 0
		jz	loc_100F1
		cmp	byte ptr [bp-1], 2
		jnz	loc_100CD
		inc	_enemies_killed
		jmp	loc_100D9
; ---------------------------------------------------------------------------

loc_100CD::				; CODE XREF: seg0b2c:2C25j
		les	bx, [bp+6]
		cmp	word ptr es:[bx+24h], 0
		jnz	loc_100D9
		jmp	loc_10142
; ---------------------------------------------------------------------------

loc_100D9::				; CODE XREF: seg0b2c:2C2Bj
					; seg0b2c:2C35j
		push	64h ; 'd'
		les	bx, [bp+6]
		push	word ptr es:[bx+0Ah]
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		call	@score_at$qiii	; score_at(int,int,int)
		add	sp, 6

loc_100F1::				; CODE XREF: seg0b2c:2C1Fj
		les	bx, [bp+6]
		cmp	word ptr es:[bx+24h], 0
		jz	loc_100FD
		jmp	loc_1015B
; ---------------------------------------------------------------------------

loc_100FD::				; CODE XREF: seg0b2c:2C59j
		les	bx, [bp+6]
		mov	ax, es:[bx+8]
		les	bx, _ego
		sub	ax, es:[bx+8]
		push	ax
		call	@abs$qi		; abs(int)
		pop	cx
		mov	_diff_x, ax
		les	bx, [bp+6]
		mov	ax, es:[bx+0Ah]
		les	bx, _ego
		sub	ax, es:[bx+0Ah]
		push	ax
		call	@abs$qi		; abs(int)
		pop	cx
		mov	_diff_y, ax
		cmp	_diff_x, 32h ; '2'
		jnb	loc_1013F
		cmp	_diff_y, 1Eh
		jnb	loc_1013F
		jmp	loc_10142
; ---------------------------------------------------------------------------

loc_1013F::				; CODE XREF: seg0b2c:2C94j
					; seg0b2c:2C9Bj
		jmp	locret_10256
; ---------------------------------------------------------------------------

loc_10142::				; CODE XREF: seg0b2c:2C37j
					; seg0b2c:2C9Dj
		les	bx, [bp+6]
		mov	word ptr es:[bx+24h], 1Eh
		les	bx, [bp+6]
		mov	dx, 2
		mov	ax, es:[bx+14h]
		imul	dx
		mov	es:[bx+14h], ax

loc_1015B::				; CODE XREF: seg0b2c:2C5Bj
		les	bx, [bp+6]
		mov	ax, es:[bx+24h]
		dec	word ptr es:[bx+24h]
		cmp	ax, 1
		jnz	loc_1016E
		jmp	loc_10203
; ---------------------------------------------------------------------------

loc_1016E::				; CODE XREF: seg0b2c:2CC9j
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@facing_actor$qn7m_actor ; m_actor::facing_actor(m_actor *)
		add	sp, 8
		or	al, al
		jnz	loc_10190
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 40h

loc_10190::				; CODE XREF: seg0b2c:2CE6j
		les	bx, [bp+6]
		mov	ax, es:[bx+2]
		les	bx, _cur_sub
		cmp	ax, es:[bx+0Ah]
		jge	loc_101B6
		les	bx, [bp+6]
		cmp	word ptr es:[bx+16h], 2
		jz	loc_101B6
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 2
		jmp	loc_101DA
; ---------------------------------------------------------------------------

loc_101B6::				; CODE XREF: seg0b2c:2CFFj
					; seg0b2c:2D09j
		les	bx, [bp+6]
		mov	ax, es:[bx+2]
		les	bx, _cur_sub
		cmp	ax, es:[bx+0Ah]
		jle	loc_101DA
		les	bx, [bp+6]
		cmp	word ptr es:[bx+16h], 0FFFEh
		jz	loc_101DA
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 0FFFEh

loc_101DA::				; CODE XREF: seg0b2c:2D14j
					; seg0b2c:2D25j ...
		les	bx, [bp+6]
		test	word ptr es:[bx+24h], 3
		jnz	loc_10201
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@touching$qn7m_actort1 ; touching(m_actor *,m_actor *)
		add	sp, 8
		or	al, al
		jz	loc_10201
		jmp	loc_10235
; ---------------------------------------------------------------------------

loc_10201::				; CODE XREF: seg0b2c:2D43j
					; seg0b2c:2D5Dj
		jmp	locret_10256
; ---------------------------------------------------------------------------

loc_10203::				; CODE XREF: seg0b2c:2B93j
					; seg0b2c:2CCBj
		les	bx, [bp+6]
		mov	word ptr es:[bx+24h], 0
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 0
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+34h], 0
		jnz	loc_1022A
		les	bx, [bp+6]
		mov	word ptr es:[bx+14h], 1
		jmp	loc_10233
; ---------------------------------------------------------------------------

loc_1022A::				; CODE XREF: seg0b2c:2D7Dj
		les	bx, [bp+6]

loc_1022D::
		mov	word ptr es:[bx+14h], 0FFFFh

loc_10233::				; CODE XREF: seg0b2c:2D88j
		jmp	locret_10256
; ---------------------------------------------------------------------------

loc_10235::				; CODE XREF: seg0b2c:2D5Fj
		push	8
		push	ds
		push	offset aPirana_3 ; "pirana"
		push	word_2B8BC
		push	_the_game
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah
		push	0
		push	2
		push	cs
		call	near ptr @hit_cur_sub$qii ; hit_cur_sub(int,int)
		add	sp, 4

locret_10256::				; CODE XREF: seg0b2c:2BAAj
					; seg0b2c:loc_1013Fj ...
		leave
		retf
; ---------------------------------------------------------------------------

; do_tulip(m_actor *)
@do_tulip$qn7m_actor:			; DATA XREF: add_map_item(uint,uint)+37Ao
		push	bp
		mov	bp, sp
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jnz	loc_1026E
		jmp	loc_103BA
; ---------------------------------------------------------------------------

loc_1026E::				; CODE XREF: seg0b2c:2DC9j
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 6
		and	ax, 1
		or	ax, ax
		jnz	loc_10285
		jmp	loc_103BD
; ---------------------------------------------------------------------------
		jmp	loc_10353
; ---------------------------------------------------------------------------

loc_10285::				; CODE XREF: seg0b2c:2DDDj
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 7
		and	ax, 1
		or	ax, ax
		jnz	loc_102C0
		les	bx, [bp+6]
		mov	al, es:[bx+3Ch]
		mov	ah, 0
		les	bx, [bp+6]
		mov	dl, es:[bx+3Bh]
		mov	dh, 0
		dec	dx
		cmp	ax, dx
		jnz	loc_102BD
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 80h
		les	bx, [bp+6]
		mov	byte ptr es:[bx+34h], 63h ; 'c'

loc_102BD::				; CODE XREF: seg0b2c:2E0Bj
		jmp	loc_10353
; ---------------------------------------------------------------------------

loc_102C0::				; CODE XREF: seg0b2c:2DF4j
		les	bx, _cur_sub
		mov	ax, es:[bx]
		les	bx, [bp+6]
		cmp	ax, es:[bx]
		jge	loc_102FE
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+34h], 1
		jz	loc_102FE
		les	bx, [bp+6]
		mov	byte ptr es:[bx+35h], 1
		les	bx, [bp+6]
		mov	byte ptr es:[bx+34h], 1
		push	ds
		push	offset aTulipl_l_0 ; "tulipl.l"
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8
		jmp	loc_103EC
; ---------------------------------------------------------------------------

loc_102FE::				; CODE XREF: seg0b2c:2E2Dj
					; seg0b2c:2E37j
		les	bx, _cur_sub
		mov	ax, es:[bx]
		les	bx, [bp+6]
		cmp	ax, es:[bx]
		jle	loc_1033C
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+34h], 0
		jz	loc_1033C
		les	bx, [bp+6]
		mov	byte ptr es:[bx+35h], 1
		les	bx, [bp+6]
		mov	byte ptr es:[bx+34h], 0
		push	ds
		push	offset aTulipr_l_0 ; "tulipr.l"
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8
		jmp	loc_103EC
; ---------------------------------------------------------------------------

loc_1033C::				; CODE XREF: seg0b2c:2E6Bj
					; seg0b2c:2E75j
		les	bx, [bp+6]
		mov	ax, es:[bx+22h]
		inc	word ptr es:[bx+22h]
		les	bx, [bp+6]
		cmp	ax, es:[bx+24h]
		jnz	loc_10353
		jmp	loc_103EC
; ---------------------------------------------------------------------------

loc_10353::				; CODE XREF: seg0b2c:2DE2j
					; seg0b2c:loc_102BDj ...
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 3
		and	ax, 1
		or	ax, ax
		jz	loc_103BA
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 0F7h
		les	bx, [bp+6]
		mov	byte ptr es:[bx+36h], 0Fh
		les	bx, [bp+6]
		cmp	word ptr es:[bx+28h], 3
		jl	loc_103BA
		push	1F4h
		les	bx, [bp+6]
		push	word ptr es:[bx+0Ah]
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		call	@score_at$qiii	; score_at(int,int,int)
		add	sp, 6
		les	bx, [bp+6]
		cmp	word ptr es:[bx+28h], 5
		jl	loc_103AF
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 1
		inc	_enemies_killed
		jmp	loc_103BA
; ---------------------------------------------------------------------------

loc_103AF::				; CODE XREF: seg0b2c:2EFFj
		les	bx, [bp+6]
		mov	word ptr es:[bx+28h], 0
		jmp	loc_1041B
; ---------------------------------------------------------------------------

loc_103BA::				; CODE XREF: seg0b2c:2DCBj
					; seg0b2c:2EC2j ...
		jmp	loc_10460
; ---------------------------------------------------------------------------

loc_103BD::				; CODE XREF: seg0b2c:2DDFj
		les	bx, [bp+6]
		cmp	word ptr es:[bx+26h], 0
		jz	loc_103DE
		les	bx, [bp+6]
		mov	al, es:[bx+38h]
		mov	ah, 0
		or	ax, ax
		jnz	loc_103DB
		les	bx, [bp+6]
		dec	word ptr es:[bx+26h]

loc_103DB::				; CODE XREF: seg0b2c:2F32j
		jmp	loc_10460
; ---------------------------------------------------------------------------

loc_103DE::				; CODE XREF: seg0b2c:2F25j
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 40h
		push	4
		push	3
		jmp	loc_1040B
; ---------------------------------------------------------------------------

loc_103EC::				; CODE XREF: seg0b2c:2E5Bj
					; seg0b2c:2E99j ...
		les	bx, [bp+6]
		mov	word ptr es:[bx+22h], 0
		push	6
		push	6
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@add_missile$qn7m_actoruci ; add_missile(m_actor *,uchar,int)
		add	sp, 8
		push	3
		push	0

loc_1040B::				; CODE XREF: seg0b2c:2F4Aj
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		jmp	loc_10460
; ---------------------------------------------------------------------------

loc_1041B::				; CODE XREF: seg0b2c:2F18j
		push	ds
		push	offset aTulip_l_1 ; "tulip.l"
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8
		push	5
		push	1
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		les	bx, [bp+6]
		mov	byte ptr es:[bx+35h], 0
		les	bx, [bp+6]
		mov	word ptr es:[bx+26h], 64h ; 'd'
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 7Fh
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 0BFh

loc_10460::				; CODE XREF: seg0b2c:loc_103BAj
					; seg0b2c:loc_103DBj ...
		pop	bp
		retf
; ---------------------------------------------------------------------------
		assume es:nothing

; do_pod(m_actor *)
@do_pod$qn7m_actor:			; DATA XREF: add_map_item(uint,uint)+120o
					; add_map_item(uint,uint)+149o
		enter	2, 0
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 7
		and	ax, 1
		cmp	ax, 1
		jnz	loc_1047A
		jmp	loc_10498
; ---------------------------------------------------------------------------

loc_1047A::				; CODE XREF: seg0b2c:2FD6j
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jnz	loc_1048D
		jmp	locret_106AA
; ---------------------------------------------------------------------------

loc_1048D::				; CODE XREF: seg0b2c:2FE8j
		les	bx, [bp+6]
		assume es:nothing
		or	byte ptr es:[bx+52h], 80h
		jmp	loc_105A2
; ---------------------------------------------------------------------------

loc_10498::				; CODE XREF: seg0b2c:2FD8j
		push	100h
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@on_tile$qi ; m_actor::on_tile(int)
		add	sp, 6
		or	al, al
		jz	loc_104BB
		les	bx, [bp+6]
		mov	ax, es:[bx+16h]
		les	bx, [bp+6]
		sub	es:[bx+16h], ax

loc_104BB::				; CODE XREF: seg0b2c:300Bj
		les	bx, [bp+6]
		mov	ax, es:[bx+24h]
		inc	word ptr es:[bx+24h]
		cmp	ax, 0Ah
		jl	loc_104CE
		jmp	loc_105A2
; ---------------------------------------------------------------------------

loc_104CE::				; CODE XREF: seg0b2c:3029j
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 6
		and	ax, 1
		cmp	ax, 1
		jnz	loc_1051C
		les	bx, [bp+6]
		mov	ax, es:[bx+14h]
		neg	ax
		les	bx, [bp+6]
		mov	es:[bx+14h], ax
		push	2
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_10505
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 0

loc_10505::				; CODE XREF: seg0b2c:305Aj
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 0BFh
		push	5
		call	@random$qi	; random(int)
		pop	cx
		les	bx, [bp+6]
		mov	es:[bx+24h], ax

loc_1051C::				; CODE XREF: seg0b2c:303Ej
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		cmp	ax, 1
		jnz	loc_1059F
		les	bx, [bp+6]
		cmp	word ptr es:[bx+26h], 0
		jz	loc_1053D
		mov	byte ptr [bp-1], 4
		jmp	loc_10541
; ---------------------------------------------------------------------------

loc_1053D::				; CODE XREF: seg0b2c:3095j
		mov	byte ptr [bp-1], 2

loc_10541::				; CODE XREF: seg0b2c:309Bj
		mov	al, [bp-1]
		push	ax
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @check_for_hit$qn7m_actoruc ; check_for_hit(m_actor *,uchar)
		add	sp, 6
		cmp	al, 2
		jnz	loc_10572
		push	1F4h
		les	bx, [bp+6]
		push	word ptr es:[bx+0Ah]
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		call	@score_at$qiii	; score_at(int,int,int)
		add	sp, 6
		jmp	loc_10683
; ---------------------------------------------------------------------------

loc_10572::				; CODE XREF: seg0b2c:30B4j
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@touching$qn7m_actort1 ; touching(m_actor *,m_actor *)
		add	sp, 8
		or	al, al
		jz	loc_1059F
		les	bx, [bp+6]
		push	word ptr es:[bx+14h]
		push	19h
		push	cs
		call	near ptr @hit_cur_sub$qii ; hit_cur_sub(int,int)
		add	sp, 4
		jmp	loc_10683
; ---------------------------------------------------------------------------

loc_1059F::				; CODE XREF: seg0b2c:308Bj
					; seg0b2c:30EAj
		jmp	locret_106AA
; ---------------------------------------------------------------------------

loc_105A2::				; CODE XREF: seg0b2c:2FF5j
					; seg0b2c:302Bj
		les	bx, [bp+6]
		mov	ax, es:[bx+8]
		les	bx, _cur_sub
		sub	ax, es:[bx+8]
		push	ax
		call	@abs$qi		; abs(int)
		pop	cx
		mov	_diff_x, ax
		les	bx, [bp+6]
		mov	ax, es:[bx+0Ah]
		les	bx, _cur_sub
		sub	ax, es:[bx+0Ah]
		push	ax
		call	@abs$qi		; abs(int)
		pop	cx
		mov	_diff_y, ax
		push	5
		call	@random$qi	; random(int)
		pop	cx
		les	bx, [bp+6]
		mov	es:[bx+24h], ax
		cmp	_diff_y, 0Fh
		jnb	loc_10606
		cmp	_diff_x, 5Ah ; 'Z'
		jnb	loc_10606
		les	bx, [bp+6]
		cmp	word ptr es:[bx+14h], 0
		jz	loc_10606
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 0
		jmp	loc_10632
; ---------------------------------------------------------------------------

loc_10606::				; CODE XREF: seg0b2c:3148j
					; seg0b2c:314Fj ...
		les	bx, _cur_sub
		mov	ax, es:[bx+0Ah]
		les	bx, [bp+6]
		cmp	ax, es:[bx+0Ah]
		jge	loc_10623
		les	bx, [bp+6]
		mov	ax, es:[bx+26h]
		inc	ax
		neg	ax
		jmp	loc_1062B
; ---------------------------------------------------------------------------

loc_10623::				; CODE XREF: seg0b2c:3175j
		les	bx, [bp+6]
		mov	ax, es:[bx+26h]
		inc	ax

loc_1062B::				; CODE XREF: seg0b2c:3181j
		les	bx, [bp+6]
		mov	es:[bx+16h], ax

loc_10632::				; CODE XREF: seg0b2c:3164j
		cmp	_diff_x, 1Eh
		jnb	loc_10655
		cmp	_diff_y, 3Ch ; '<'
		jnb	loc_10655
		les	bx, [bp+6]
		cmp	word ptr es:[bx+16h], 0
		jz	loc_10655
		les	bx, [bp+6]
		mov	word ptr es:[bx+14h], 0
		jmp	loc_10681
; ---------------------------------------------------------------------------

loc_10655::				; CODE XREF: seg0b2c:3197j
					; seg0b2c:319Ej ...
		les	bx, _cur_sub
		mov	ax, es:[bx+8]
		les	bx, [bp+6]
		cmp	ax, es:[bx+8]
		jge	loc_10672
		les	bx, [bp+6]
		mov	ax, es:[bx+26h]
		inc	ax
		neg	ax
		jmp	loc_1067A
; ---------------------------------------------------------------------------

loc_10672::				; CODE XREF: seg0b2c:31C4j
		les	bx, [bp+6]
		mov	ax, es:[bx+26h]
		inc	ax

loc_1067A::				; CODE XREF: seg0b2c:31D0j
		les	bx, [bp+6]
		mov	es:[bx+14h], ax

loc_10681::				; CODE XREF: seg0b2c:31B3j
		jmp	locret_106AA
; ---------------------------------------------------------------------------

loc_10683::				; CODE XREF: seg0b2c:30CFj
					; seg0b2c:30FCj
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 1
		push	0
		push	0
		push	1
		les	bx, [bp+6]
		push	word ptr es:[bx+2]
		les	bx, [bp+6]
		push	word ptr es:[bx]
		call	@add_explosion$qiiucnuc	; add_explosion(int,int,uchar,uchar *)
		add	sp, 0Ah
		inc	_enemies_killed
		assume es:nothing

locret_106AA::				; CODE XREF: seg0b2c:2FEAj
					; seg0b2c:loc_1059Fj ...
		leave
		retf
; ---------------------------------------------------------------------------

; do_zapper(m_actor *)
@do_zapper$qn7m_actor:			; DATA XREF: add_map_item(uint,uint)+217o
		push	bp
		mov	bp, sp
		les	bx, [bp+6]
		assume es:nothing
		mov	ax, es:[bx+22h]
		inc	word ptr es:[bx+22h]
		les	bx, [bp+6]
		cmp	ax, es:[bx+24h]
		jnz	loc_106DE
		les	bx, [bp+6]
		mov	word ptr es:[bx+22h], 0
		push	3
		push	0
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8

loc_106DE::				; CODE XREF: seg0b2c:3221j
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jnz	loc_106F0
		jmp	loc_1073F
; ---------------------------------------------------------------------------

loc_106F0::				; CODE XREF: seg0b2c:324Cj
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+38h], 0
		jz	loc_1073F
		les	bx, [bp+6]
		cmp	word ptr es:[bx+22h], 2
		jnz	loc_1071A
		push	8
		push	ds
		push	offset aZap_0	; "zap"
		push	word_2B8BC
		push	_the_game
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah

loc_1071A::				; CODE XREF: seg0b2c:3262j
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@touching$qn7m_actort1 ; touching(m_actor *,m_actor *)
		add	sp, 8
		or	al, al
		jz	loc_1073F
		push	0
		push	8
		push	cs
		call	near ptr @hit_cur_sub$qii ; hit_cur_sub(int,int)
		add	sp, 4

loc_1073F::				; CODE XREF: seg0b2c:324Ej
					; seg0b2c:3258j ...
		pop	bp
		retf
; ---------------------------------------------------------------------------
		assume es:nothing

; do_mine1(m_actor *)
@do_mine1$qn7m_actor:			; DATA XREF: add_map_item(uint,uint)+1B2o
		enter	4, 0
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jnz	loc_10758
		jmp	locret_108DD
; ---------------------------------------------------------------------------
		assume es:nothing

loc_10758::				; CODE XREF: seg0b2c:32B3j
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 3
		and	ax, 1
		cmp	ax, 1
		jnz	loc_1076D
		jmp	loc_107F4
; ---------------------------------------------------------------------------

loc_1076D::				; CODE XREF: seg0b2c:32C8j
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+3Ch], 3
		jnb	loc_10781
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+3Ch], 1
		ja	loc_107B3

loc_10781::				; CODE XREF: seg0b2c:32D5j
		les	bx, [bp+6]
		mov	ax, es:[bx+8]
		les	bx, _cur_sub
		assume es:nothing
		sub	ax, es:[bx+8]
		push	ax
		call	@abs$qi		; abs(int)
		pop	cx
		mov	[bp-4],	ax
		cmp	word ptr [bp-4], 23h ; '#'
		jnb	loc_107B3
		les	bx, _ego
		mov	ax, es:[bx+2]
		les	bx, [bp+6]
		assume es:nothing
		cmp	ax, es:[bx+2]
		jge	loc_107B3
		jmp	loc_107F4
; ---------------------------------------------------------------------------
		assume es:nothing

loc_107B3::				; CODE XREF: seg0b2c:32DFj
					; seg0b2c:32FEj ...
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@touching$qn7m_actort1 ; touching(m_actor *,m_actor *)
		assume es:nothing
		add	sp, 8
		or	al, al
		jz	loc_107F1
		push	0
		push	2
		push	cs
		call	near ptr @hit_cur_sub$qii ; hit_cur_sub(int,int)
		add	sp, 4
		push	0
		les	bx, [bp+6]
		assume es:nothing
		push	word ptr es:[bx+2]
		les	bx, [bp+6]
		push	word ptr es:[bx]
		call	@add_bubble$qiii ; add_bubble(int,int,int)
		add	sp, 6
		jmp	loc_107F4
; ---------------------------------------------------------------------------
		assume es:nothing

loc_107F1::				; CODE XREF: seg0b2c:332Bj
		jmp	locret_108DD
; ---------------------------------------------------------------------------

loc_107F4::				; CODE XREF: seg0b2c:32CAj
					; seg0b2c:3311j ...
		push	seg seg0b2c
		push	offset @do_mine2$qn7m_actor ; do_mine2(m_actor *)
		push	0
		push	0
		push	ds
		push	offset aFreemine_l_0 ; "freemine.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		assume es:nothing
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		les	bx, _act
		assume es:nothing
		mov	byte ptr es:[bx+35h], 1
		les	bx, [bp+6]
		assume es:nothing
		push	word ptr es:[bx+2]
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		assume es:nothing
		add	sp, 8
		les	bx, _act
		mov	al, es:[bx+12h]
		mov	[bp-1],	al
		les	bx, [bp+6]
		assume es:nothing
		mov	al, es:[bx+52h]
		shr	ax, 6
		and	ax, 1
		cmp	ax, 1
		jnz	loc_10866
		les	bx, _act
		assume es:nothing
		or	byte ptr es:[bx+52h], 8
		assume es:nothing

loc_10866::				; CODE XREF: seg0b2c:33BBj
		push	0
		push	0
		push	0
		push	0
		push	ds
		push	offset aMreal_l_0 ; "mreal.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		assume es:nothing
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		mov	al, [bp-1]
		mov	ah, 0
		les	bx, [bp+6]
		assume es:nothing
		mov	dx, es:[bx+2]
		add	dx, ax
		push	dx
		les	bx, [bp+6]
		mov	ax, es:[bx+8]
		les	bx, _act
		assume es:nothing
		push	ax
		mov	ax, es:[bx+10h]
		cwd
		sub	ax, dx
		sar	ax, 1
		pop	dx
		sub	dx, ax
		push	dx
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8
		push	2
		push	5
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		les	bx, [bp+6]
		assume es:nothing
		or	byte ptr es:[bx+52h], 1
		assume es:nothing

locret_108DD::				; CODE XREF: seg0b2c:32B5j
					; seg0b2c:loc_107F1j
		leave
		retf
; ---------------------------------------------------------------------------
		assume es:nothing

; do_mine2(m_actor *)
@do_mine2$qn7m_actor:			; DATA XREF: seg0b2c:3357o
		enter	2, 0
		mov	byte ptr [bp-1], 0
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jnz	loc_108FA
		jmp	loc_109C2
; ---------------------------------------------------------------------------

loc_108FA::				; CODE XREF: seg0b2c:3455j
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 3
		and	ax, 1
		cmp	ax, 1
		jnz	loc_10927
		push	1F4h
		les	bx, [bp+6]
		assume es:nothing
		push	word ptr es:[bx+0Ah]
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		call	@score_at$qiii	; score_at(int,int,int)
		add	sp, 6
		jmp	short loc_1099B
; ---------------------------------------------------------------------------
		assume es:nothing

loc_10927::				; CODE XREF: seg0b2c:346Aj
		push	0
		push	0
		push	0
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@tile_collision$qiii ; m_actor::tile_collision(int,int,int)
		assume es:nothing
		add	sp, 0Ah
		or	al, al
		jz	loc_10943
		jmp	loc_1099B
; ---------------------------------------------------------------------------
		jmp	loc_10999
; ---------------------------------------------------------------------------

loc_10943::				; CODE XREF: seg0b2c:349Dj
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@touching$qn7m_actort1 ; touching(m_actor *,m_actor *)
		assume es:nothing
		add	sp, 8
		or	al, al
		jz	loc_1096F
		assume es:nothing
		push	0
		push	19h
		push	cs
		call	near ptr @hit_cur_sub$qii ; hit_cur_sub(int,int)
		assume es:nothing
		add	sp, 4
		inc	byte ptr [bp-1]
		jmp	loc_1099B
; ---------------------------------------------------------------------------
		jmp	loc_10999
; ---------------------------------------------------------------------------
		assume es:nothing

loc_1096F::				; CODE XREF: seg0b2c:34BBj
		push	100h
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@on_tile$qi ; m_actor::on_tile(int)
		add	sp, 6
		or	al, al
		jz	loc_10988
		assume es:nothing
		jmp	loc_1099B
; ---------------------------------------------------------------------------
		jmp	loc_10999
; ---------------------------------------------------------------------------
		assume es:nothing

loc_10988::				; CODE XREF: seg0b2c:34E2j
		les	bx, [bp+6]
		cmp	word ptr es:[bx+16h], 0FFFBh
		jz	loc_10999
		les	bx, [bp+6]
		dec	word ptr es:[bx+16h]

loc_10999::				; CODE XREF: seg0b2c:34A1j
					; seg0b2c:34CDj ...
		jmp	locret_109CA
; ---------------------------------------------------------------------------
		assume es:nothing

loc_1099B::				; CODE XREF: seg0b2c:3485j
					; seg0b2c:349Fj ...
		cmp	byte ptr [bp-1], 0
		jz	loc_109A7
		assume es:nothing
		push	ds
		push	offset aDirhit_2 ; "dirhit"
		jmp	loc_109AB
; ---------------------------------------------------------------------------
		assume es:nothing

loc_109A7::				; CODE XREF: seg0b2c:34FFj
		push	0
		push	0

loc_109AB::				; CODE XREF: seg0b2c:3505j
		push	1
		les	bx, [bp+6]
		assume es:nothing
		push	word ptr es:[bx+2]
		les	bx, [bp+6]
		push	word ptr es:[bx]
		call	@add_explosion$qiiucnuc	; add_explosion(int,int,uchar,uchar *)
		assume es:nothing
		add	sp, 0Ah

loc_109C2::				; CODE XREF: seg0b2c:3457j
		les	bx, [bp+6]
		assume es:nothing
		or	byte ptr es:[bx+52h], 1

locret_109CA::				; CODE XREF: seg0b2c:loc_10999j
		leave
		retf
; ---------------------------------------------------------------------------

; do_missle(m_actor *)
@do_missle$qn7m_actor:			; DATA XREF: add_missile(m_actor *,uchar,int)+4Ao
					; add_missile(m_actor *,uchar,int)+9Do	...
		enter	2, 0
		push	si
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		cmp	ax, 1
		jz	loc_109E5
		jmp	loc_10CBF
; ---------------------------------------------------------------------------

loc_109E5::				; CODE XREF: seg0b2c:3540j
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+34h], 1
		jnz	loc_10A0D
		les	bx, [bp+6]
		push	es
		les	si, [bp+6]
		mov	ax, es:[si+24h]
		neg	ax
		pop	es
		cmp	es:[bx+14h], ax
		jle	loc_10A0B
		les	bx, [bp+6]
		sub	word ptr es:[bx+14h], 2

loc_10A0B::				; CODE XREF: seg0b2c:3561j
		jmp	loc_10A2F
; ---------------------------------------------------------------------------

loc_10A0D::				; CODE XREF: seg0b2c:354Dj
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+34h], 0
		jnz	loc_10A2F
		les	bx, [bp+6]
		mov	ax, es:[bx+14h]
		les	bx, [bp+6]
		cmp	ax, es:[bx+24h]
		jge	loc_10A2F
		les	bx, [bp+6]
		add	word ptr es:[bx+14h], 2

loc_10A2F::				; CODE XREF: seg0b2c:loc_10A0Bj
					; seg0b2c:3575j ...
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+3Dh], 3
		jnz	loc_10A4A
		les	bx, [bp+6]
		assume es:nothing
		cmp	word ptr es:[bx+16h], 0Ah
		jz	loc_10A4A
		les	bx, [bp+6]
		inc	word ptr es:[bx+16h]
		assume es:nothing

loc_10A4A::				; CODE XREF: seg0b2c:3597j
					; seg0b2c:35A1j
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 7
		and	ax, 1
		or	ax, ax
		jz	loc_10A7F
		push	0Ah
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_10A7F
		push	0
		les	bx, [bp+6]
		push	word ptr es:[bx+2]
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		call	@add_bubble$qiii ; add_bubble(int,int,int)
		assume es:nothing
		add	sp, 6
		assume es:nothing

loc_10A7F::				; CODE XREF: seg0b2c:35B9j
					; seg0b2c:35C5j
		mov	byte ptr [bp-2], 0
		les	bx, [bp+6]
		les	bx, es:[bx+2Ch]
		assume es:nothing
		test	byte ptr es:[bx+35h], 10h
		jnz	loc_10A94
		assume es:nothing
		jmp	loc_10BC3
; ---------------------------------------------------------------------------
		assume es:nothing

loc_10A94::				; CODE XREF: seg0b2c:35EFj
		mov	byte ptr [bp-1], 0
		jmp	loc_10B6E
; ---------------------------------------------------------------------------

loc_10A9B::				; CODE XREF: seg0b2c:36D7j
		mov	al, [bp-1]
		mov	ah, 0
		shl	ax, 2
		mov	bx, ax
		mov	ax, word_2B818[bx]
		mov	dx, _shootable_list[bx]
		mov	word ptr _act+2, ax
		mov	word ptr _act, dx
		les	bx, _act
		assume es:nothing
		mov	al, es:[bx+52h]
		shr	ax, 5
		and	ax, 1
		or	ax, ax
		jz	loc_10AC9
		jmp	loc_10B6B
; ---------------------------------------------------------------------------

loc_10AC9::				; CODE XREF: seg0b2c:3624j
		push	word ptr _act+2
		push	word ptr _act
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@touching$qn7m_actort1 ; touching(m_actor *,m_actor *)
		add	sp, 8
		or	al, al
		jnz	loc_10AE6
		jmp	loc_10B6B
; ---------------------------------------------------------------------------
		assume es:nothing

loc_10AE6::				; CODE XREF: seg0b2c:3641j
		les	bx, _act
		assume es:nothing
		or	byte ptr es:[bx+52h], 8
		les	bx, [bp+6]
		assume es:nothing
		mov	ax, es:[bx+26h]
		les	bx, _act
		assume es:nothing
		add	es:[bx+28h], ax
		les	bx, [bp+6]
		assume es:nothing
		cmp	word ptr es:[bx+14h], 0
		jle	loc_10B14
		les	bx, _act
		assume es:nothing
		mov	word ptr es:[bx+1Eh], 5
		jmp	loc_10B1E
; ---------------------------------------------------------------------------

loc_10B14::				; CODE XREF: seg0b2c:3666j
		les	bx, _act
		assume es:nothing
		mov	word ptr es:[bx+1Eh], 0FFFBh
		assume es:nothing

loc_10B1E::				; CODE XREF: seg0b2c:3672j
		les	bx, _act
		test	byte ptr es:[bx+35h], 20h
		jz	loc_10B5E
		les	bx, [bp+6]
		assume es:nothing
		mov	ax, es:[bx+2]
		les	bx, _act
		sub	ax, es:[bx+2]
		push	ax
		call	@abs$qi		; abs(int)
		pop	cx
		mov	_diff_y, ax
		les	bx, _act
		mov	ax, es:[bx+12h]
		cwd
		sub	ax, dx
		sar	ax, 1
		cmp	ax, _diff_y
		jbe	loc_10B5E
		les	bx, _act
		or	byte ptr es:[bx+52h], 40h
		assume es:nothing

loc_10B5E::				; CODE XREF: seg0b2c:3687j
					; seg0b2c:36B3j
		les	bx, [bp+6]
		assume es:nothing
		cmp	word ptr es:[bx+26h], 0Ah
		jge	loc_10B6B
		jmp	loc_10CBF
; ---------------------------------------------------------------------------
		assume es:nothing

loc_10B6B::				; CODE XREF: seg0b2c:3626j
					; seg0b2c:3643j ...
		inc	byte ptr [bp-1]
		assume es:nothing

loc_10B6E::				; CODE XREF: seg0b2c:35F8j
		mov	al, [bp-1]
		cmp	al, _shootable_count
		jnb	loc_10B7A
		jmp	loc_10A9B
; ---------------------------------------------------------------------------
		assume es:nothing

loc_10B7A::				; CODE XREF: seg0b2c:36D5j
		les	bx, [bp+6]
		assume es:nothing
		cmp	byte ptr es:[bx+34h], 63h ; 'c'
		jnz	loc_10BC0
		les	bx, _the_map
		assume es:nothing
		les	bx, es:[bx+39Eh]
		push	es
		les	si, [bp+6]
		mov	ax, es:[si+18h]
		shl	ax, 2
		add	bx, ax
		pop	es
		cmp	word ptr es:[bx], 100h
		jnz	loc_10BA5
		jmp	loc_10CBF
; ---------------------------------------------------------------------------

loc_10BA5::				; CODE XREF: seg0b2c:3700j
		les	bx, [bp+6]
		push	es
		les	si, [bp+6]
		mov	ax, es:[si+24h]
		neg	ax
		pop	es
		cmp	es:[bx+16h], ax
		jz	short loc_10BC0
		les	bx, [bp+6]
		dec	word ptr es:[bx+16h]
		assume es:nothing

loc_10BC0::				; CODE XREF: seg0b2c:36E2j
					; seg0b2c:3717j
		jmp	loc_10C99
; ---------------------------------------------------------------------------
		assume es:nothing

loc_10BC3::				; CODE XREF: seg0b2c:35F1j
		cmp	_smart_missiles, 1
		jnz	short loc_10C15
		les	bx, [bp+6]
		assume es:nothing
		cmp	byte ptr es:[bx+34h], 63h ; 'c'
		jz	short loc_10C15
		les	bx, [bp+6]
		mov	ax, es:[bx+0Ah]
		les	bx, _cur_sub
		cmp	ax, es:[bx+0Ah]
		jle	short loc_10BF0
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 0FFFFh
		jmp	short loc_10C15
; ---------------------------------------------------------------------------

loc_10BF0::				; CODE XREF: seg0b2c:3743j
		les	bx, [bp+6]
		mov	ax, es:[bx+0Ah]
		les	bx, _cur_sub
		cmp	ax, es:[bx+0Ah]
		jge	short loc_10C0C
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 1
		jmp	short loc_10C15
; ---------------------------------------------------------------------------

loc_10C0C::				; CODE XREF: seg0b2c:375Fj
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 0
		assume es:nothing

loc_10C15::				; CODE XREF: seg0b2c:3728j
					; seg0b2c:3732j ...
		mov	byte ptr [bp-1], 0
		jmp	short loc_10C53
; ---------------------------------------------------------------------------

loc_10C1B::				; CODE XREF: seg0b2c:37BAj
		mov	al, [bp-1]
		mov	ah, 0
		shl	ax, 2
		mov	bx, ax
		mov	ax, word_2B78C[bx]
		mov	dx, _barrier_list[bx]
		mov	word ptr _act+2, ax
		mov	word ptr _act, dx
		push	word ptr _act+2
		push	word ptr _act
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@touching$qn7m_actort1 ; touching(m_actor *,m_actor *)
		assume es:nothing
		add	sp, 8
		or	al, al
		jz	loc_10C50
		jmp	loc_10CBF
; ---------------------------------------------------------------------------

loc_10C50::				; CODE XREF: seg0b2c:37ACj
		inc	byte ptr [bp-1]
		assume es:nothing

loc_10C53::				; CODE XREF: seg0b2c:3779j
		mov	al, [bp-1]
		cmp	al, _barrier_count
		jb	loc_10C1B
		assume es:nothing
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@touching$qn7m_actort1 ; touching(m_actor *,m_actor *)
		assume es:nothing
		add	sp, 8
		or	al, al
		jz	loc_10C99
		assume es:nothing
		les	bx, [bp+6]
		assume es:nothing
		cmp	word ptr es:[bx+14h], 0
		jle	loc_10C84
		push	5
		jmp	loc_10C86
; ---------------------------------------------------------------------------

loc_10C84::				; CODE XREF: seg0b2c:37DEj
		push	0FFFBh

loc_10C86::				; CODE XREF: seg0b2c:37E2j
		les	bx, [bp+6]
		push	word ptr es:[bx+26h]
		push	cs
		call	near ptr @hit_cur_sub$qii ; hit_cur_sub(int,int)
		assume es:nothing
		add	sp, 4
		inc	byte ptr [bp-2]
		jmp	loc_10CBF
; ---------------------------------------------------------------------------
		assume es:nothing

loc_10C99::				; CODE XREF: seg0b2c:loc_10BC0j
					; seg0b2c:37D4j
		les	bx, [bp+6]
		cmp	word ptr es:[bx+26h], 0Ah
		jge	loc_10CBD
		push	0
		push	0
		push	0
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@tile_collision$qiii ; m_actor::tile_collision(int,int,int)
		assume es:nothing
		add	sp, 0Ah
		or	al, al
		jz	loc_10CBD
		jmp	loc_10CBF
; ---------------------------------------------------------------------------

loc_10CBD::				; CODE XREF: seg0b2c:3801j
					; seg0b2c:3819j
		jmp	loc_10D2F
; ---------------------------------------------------------------------------
		assume es:nothing

loc_10CBF::				; CODE XREF: seg0b2c:3542j
					; seg0b2c:36C8j ...
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 1
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+34h], 63h ; 'c'
		jnz	loc_10CD7
		dec	_top_shot_count
		jmp	loc_10CE9
; ---------------------------------------------------------------------------

loc_10CD7::				; CODE XREF: seg0b2c:382Fj
		les	bx, [bp+6]
		les	bx, es:[bx+2Ch]
		assume es:nothing
		test	byte ptr es:[bx+35h], 10h
		jz	loc_10CE9
		dec	_shot_count

loc_10CE9::				; CODE XREF: seg0b2c:3835j
					; seg0b2c:3843j
		les	bx, [bp+6]
		assume es:nothing
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		cmp	ax, 1
		jnz	loc_10D2F
		cmp	byte ptr [bp-2], 0
		jz	loc_10D0D
		assume es:nothing
		les	bx, [bp+6]
		push	word ptr es:[bx+50h]
		push	word ptr es:[bx+4Eh]
		jmp	loc_10D11
; ---------------------------------------------------------------------------
		assume es:nothing

loc_10D0D::				; CODE XREF: seg0b2c:385Ej
		push	0
		push	0

loc_10D11::				; CODE XREF: seg0b2c:386Bj
		les	bx, [bp+6]
		mov	al, es:[bx+22h]
		push	ax
		les	bx, [bp+6]
		push	word ptr es:[bx+0Ah]
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		call	@add_explosion$qiiucnuc	; add_explosion(int,int,uchar,uchar *)
		assume es:nothing
		add	sp, 0Ah
		assume es:nothing

loc_10D2F::				; CODE XREF: seg0b2c:loc_10CBDj
					; seg0b2c:3858j
		pop	si
		leave
		retf
; ---------------------------------------------------------------------------

; do_bs1(m_actor *)
@do_bs1$qn7m_actor:			; DATA XREF: seg03f9:6B45o
		push	bp
		mov	bp, sp
		les	bx, [bp+6]
		assume es:nothing
		cmp	byte ptr es:[bx+3Dh], 2
		jz	loc_10D42
		jmp	loc_10E29
; ---------------------------------------------------------------------------

loc_10D42::				; CODE XREF: seg0b2c:389Dj
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 5
		and	ax, 1
		or	ax, ax
		jz	loc_10D56
		jmp	loc_10DE8
; ---------------------------------------------------------------------------

loc_10D56::				; CODE XREF: seg0b2c:38B1j
		push	2
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_10DB1
		push	2
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_10D76
		push	0
		push	0
		push	5
		jmp	loc_10D7C
; ---------------------------------------------------------------------------

loc_10D76::				; CODE XREF: seg0b2c:38CCj
		push	0
		push	0
		push	1

loc_10D7C::				; CODE XREF: seg0b2c:38D4j
		les	bx, [bp+6]
		push	word ptr es:[bx+12h]
		call	@random$qi	; random(int)
		pop	cx
		les	bx, [bp+6]
		mov	dx, es:[bx+2]
		add	dx, ax
		push	dx
		les	bx, [bp+6]
		push	word ptr es:[bx+10h]
		call	@random$qi	; random(int)
		pop	cx
		les	bx, [bp+6]
		mov	dx, es:[bx]
		add	dx, ax
		push	dx
		call	@add_explosion$qiiucnuc	; add_explosion(int,int,uchar,uchar *)
		add	sp, 0Ah

loc_10DB1::				; CODE XREF: seg0b2c:38C0j
		push	0
		push	0
		push	0
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@tile_collision$qiii ; m_actor::tile_collision(int,int,int)
		add	sp, 0Ah
		or	al, al
		jz	loc_10DE6
		les	bx, [bp+6]
		les	bx, es:[bx+2Ch]
		or	byte ptr es:[bx+52h], 40h
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 20h
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 0

loc_10DE6::				; CODE XREF: seg0b2c:3927j
		jmp	loc_10E26
; ---------------------------------------------------------------------------

loc_10DE8::				; CODE XREF: seg0b2c:38B3j
		push	3
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_10E26
		push	0
		push	14h
		call	@random$qi	; random(int)
		pop	cx
		les	bx, [bp+6]
		mov	dx, es:[bx+2]
		add	dx, ax
		push	dx
		les	bx, [bp+6]
		push	word ptr es:[bx+10h]
		call	@random$qi	; random(int)
		pop	cx
		les	bx, [bp+6]
		mov	dx, es:[bx]
		add	dx, ax
		push	dx
		call	@add_bubble$qiii ; add_bubble(int,int,int)
		add	sp, 6

loc_10E26::				; CODE XREF: seg0b2c:loc_10DE6j
					; seg0b2c:3952j
		jmp	loc_111C4
; ---------------------------------------------------------------------------

loc_10E29::				; CODE XREF: seg0b2c:389Fj
		les	bx, [bp+6]
		cmp	word ptr es:[bx+14h], 0
		jnz	loc_10E7A
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		cmp	ax, 1
		jnz	loc_10E77
		les	bx, [bp+6]
		mov	word ptr es:[bx+14h], 0FFFFh
		push	9
		push	8
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		push	0Fh
		push	ds
		push	offset aBadgrunt_1 ; "badgrunt"
		push	word_2B8BC
		push	_the_game
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah
		jmp	loc_10E7A
; ---------------------------------------------------------------------------

loc_10E77::				; CODE XREF: seg0b2c:39A2j
		jmp	loc_111C4
; ---------------------------------------------------------------------------

loc_10E7A::				; CODE XREF: seg0b2c:3991j
					; seg0b2c:39D5j
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 3
		and	ax, 1
		or	ax, ax
		jnz	loc_10E8E
		jmp	loc_10F7A
; ---------------------------------------------------------------------------

loc_10E8E::				; CODE XREF: seg0b2c:39E9j
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 0F7h
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@facing_actor$qn7m_actor ; m_actor::facing_actor(m_actor *)
		add	sp, 8
		mov	ah, 0
		or	ax, ax
		jz	loc_10EB5
		jmp	loc_10F56
; ---------------------------------------------------------------------------

loc_10EB5::				; CODE XREF: seg0b2c:3A10j
		les	bx, [bp+6]
		mov	byte ptr es:[bx+36h], 0Fh
		mov	al, _shot_size
		mov	ah, 0
		mov	dx, 4
		sub	dx, ax
		push	dx
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_10EDA
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 40h

loc_10EDA::				; CODE XREF: seg0b2c:3A30j
		les	bx, [bp+6]
		mov	ax, es:[bx+28h]
		les	bx, [bp+6]
		mov	es:[bx+26h], ax
		les	bx, [bp+6]
		cmp	word ptr es:[bx+28h], 5Ah ; 'Z'
		jle	loc_10F54
		push	ds
		push	offset aBs1dr_l_1 ; "bs1dr.l"
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8
		push	0
		push	0
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		les	bx, [bp+6]
		mov	byte ptr es:[bx+3Dh], 2
		les	bx, [bp+6]
		mov	word ptr es:[bx+14h], 0
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 1
		les	bx, [bp+6]
		mov	dword ptr es:[bx+42h], 0
		les	bx, [bp+6]
		mov	byte ptr es:[bx+35h], 0
		add	_score,	50000
		inc	_enemies_killed
		jmp	loc_111C4
; ---------------------------------------------------------------------------

loc_10F54::				; CODE XREF: seg0b2c:3A50j
		jmp	loc_10F7A
; ---------------------------------------------------------------------------

loc_10F56::				; CODE XREF: seg0b2c:3A12j
		les	bx, [bp+6]
		mov	ax, es:[bx+26h]
		les	bx, [bp+6]
		mov	es:[bx+28h], ax
		push	8
		push	ds
		push	offset aDirhit_1 ; "dirhit"
		push	word_2B8BC
		push	_the_game
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah

loc_10F7A::				; CODE XREF: seg0b2c:39EBj
					; seg0b2c:loc_10F54j
		les	bx, [bp+6]
		cmp	word ptr es:[bx+22h], 0
		jz	loc_10F8D
		les	bx, [bp+6]
		dec	word ptr es:[bx+22h]
		jmp	loc_10FF3
; ---------------------------------------------------------------------------

loc_10F8D::				; CODE XREF: seg0b2c:3AE2j
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 6
		and	ax, 1
		cmp	ax, 1
		jnz	loc_10FF3
		push	14h
		call	@random$qi	; random(int)
		pop	cx
		add	ax, 0Ah
		les	bx, [bp+6]
		mov	es:[bx+22h], ax
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 0BFh
		les	bx, [bp+6]
		mov	ax, es:[bx+14h]
		neg	ax
		les	bx, [bp+6]
		mov	es:[bx+14h], ax
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+34h], 1
		jnz	loc_10FD9
		push	ds
		push	offset aBs1_bdr_l_1 ; "bs1_bdr.l"
		jmp	loc_10FDD
; ---------------------------------------------------------------------------

loc_10FD9::				; CODE XREF: seg0b2c:3B31j
		push	ds
		push	offset aBs1_bdl_l_2 ; "bs1_bdl.l"

loc_10FDD::				; CODE XREF: seg0b2c:3B37j
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8
		les	bx, [bp+6]
		xor	byte ptr es:[bx+34h], 1

loc_10FF3::				; CODE XREF: seg0b2c:3AEBj
					; seg0b2c:3AFDj
		les	bx, [bp+6]
		cmp	word ptr es:[bx+24h], 0
		jz	loc_11066
		les	bx, [bp+6]
		dec	word ptr es:[bx+24h]
		jnz	loc_11009
		jmp	loc_11177
; ---------------------------------------------------------------------------

loc_11009::				; CODE XREF: seg0b2c:3B64j
		push	4
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_11027
		push	28h ; '('
		push	5
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@add_missile$qn7m_actoruci ; add_missile(m_actor *,uchar,int)
		add	sp, 8

loc_11027::				; CODE XREF: seg0b2c:3B73j
		les	bx, _cur_sub
		mov	al, es:[bx+36h]
		mov	ah, 0
		or	ax, ax
		jnz	loc_11063
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@touching$qn7m_actort1 ; touching(m_actor *,m_actor *)
		add	sp, 8
		or	al, al
		jz	loc_11063
		les	bx, _cur_sub
		mov	ax, es:[bx+14h]
		neg	ax
		push	ax
		push	5
		push	cs
		call	near ptr @hit_cur_sub$qii ; hit_cur_sub(int,int)
		add	sp, 4

loc_11063::				; CODE XREF: seg0b2c:3B93j
					; seg0b2c:3BADj
		jmp	loc_11146
; ---------------------------------------------------------------------------

loc_11066::				; CODE XREF: seg0b2c:3B5Bj
		les	bx, _cur_sub
		mov	ax, es:[bx+8]
		les	bx, [bp+6]
		sub	ax, es:[bx+8]
		push	ax
		call	@abs$qi		; abs(int)
		pop	cx
		mov	_diff_x, ax
		les	bx, _cur_sub
		mov	ax, es:[bx+0Ah]
		les	bx, [bp+6]
		sub	ax, es:[bx+0Ah]
		push	ax
		call	@abs$qi		; abs(int)
		pop	cx
		mov	_diff_y, ax
		cmp	_diff_x, 96h ; ''
		jnb	loc_110D1
		cmp	_diff_y, 28h ; '('
		jnb	loc_110D1
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@facing_actor$qn7m_actor ; m_actor::facing_actor(m_actor *)
		add	sp, 8
		or	al, al
		jz	short loc_110CF
		push	0Ah
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	short loc_110CF
		jmp	short loc_11148
; ---------------------------------------------------------------------------

loc_110CF::				; CODE XREF: seg0b2c:3C1Fj
					; seg0b2c:3C2Bj
		jmp	short loc_11107
; ---------------------------------------------------------------------------

loc_110D1::				; CODE XREF: seg0b2c:3BFEj
					; seg0b2c:3C05j
		cmp	_diff_y, 0Ah
		jbe	short loc_11107
		les	bx, [bp+6]
		cmp	word ptr es:[bx+22h], 0
		jnz	short loc_11107
		les	bx, [bp+6]
		mov	ax, es:[bx+0Ah]
		les	bx, _cur_sub
		cmp	ax, es:[bx+0Ah]
		jge	short loc_110FE
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 1
		jmp	short loc_11107
; ---------------------------------------------------------------------------

loc_110FE::				; CODE XREF: seg0b2c:3C51j
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 0FFFFh

loc_11107::				; CODE XREF: seg0b2c:loc_110CFj
					; seg0b2c:3C36j ...
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+38h], 0
		jnz	short loc_11123
		push	9
		push	8
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8

loc_11123::				; CODE XREF: seg0b2c:3C6Fj
		push	12Ch
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_11146
		push	0Ch
		push	ds
		push	offset aBadgrunt_2 ; "badgrunt"
		push	word_2B8BC
		push	_the_game
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah

loc_11146::				; CODE XREF: seg0b2c:loc_11063j
					; seg0b2c:3C8Ej
		jmp	loc_111C4
; ---------------------------------------------------------------------------

loc_11148::				; CODE XREF: seg0b2c:3C2Dj
		les	bx, [bp+6]
		mov	word ptr es:[bx+24h], 0Ah
		les	bx, [bp+6]
		mov	dx, 8
		mov	ax, es:[bx+14h]
		imul	dx
		mov	es:[bx+14h], ax
		les	bx, [bp+6]
		mov	dx, 2
		mov	ax, es:[bx+16h]
		imul	dx
		mov	es:[bx+16h], ax
		push	4
		push	1
		jmp	loc_111B6
; ---------------------------------------------------------------------------

loc_11177::				; CODE XREF: seg0b2c:3B66j
		push	2
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jz	loc_1118B
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 40h

loc_1118B::				; CODE XREF: seg0b2c:3CE1j
		les	bx, [bp+6]
		mov	ax, es:[bx+14h]
		mov	bx, 8
		cwd
		idiv	bx
		les	bx, [bp+6]
		mov	es:[bx+14h], ax
		les	bx, [bp+6]
		mov	ax, es:[bx+16h]
		cwd
		sub	ax, dx
		sar	ax, 1
		les	bx, [bp+6]
		mov	es:[bx+16h], ax
		push	5
		push	0

loc_111B6::				; CODE XREF: seg0b2c:3CD5j
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8

loc_111C4::				; CODE XREF: seg0b2c:loc_10E26j
					; seg0b2c:loc_10E77j ...
		pop	bp
		retf
; ---------------------------------------------------------------------------

; do_bs2tn(m_actor *)
@do_bs2tn$qn7m_actor:			; DATA XREF: seg03f9:6CEEo
					; seg03f9:6D95o ...
		push	bp
		mov	bp, sp
		push	14h
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @check_for_hit$qn7m_actoruc ; check_for_hit(m_actor *,uchar)
		add	sp, 6
		cmp	al, 2
		jnz	loc_1121B
		push	0FA0h
		les	bx, [bp+6]
		push	word ptr es:[bx+0Ah]
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		call	@score_at$qiii	; score_at(int,int,int)
		add	sp, 6
		les	bx, [bp+6]
		les	bx, es:[bx+2Ch]
		inc	word ptr es:[bx+24h]
		les	bx, [bp+6]
		les	bx, es:[bx+2Ch]
		cmp	word ptr es:[bx+24h], 4
		jnz	loc_1121B
		les	bx, [bp+6]
		les	bx, es:[bx+2Ch]
		mov	word ptr es:[bx+28h], 0

loc_1121B::				; CODE XREF: seg0b2c:3D3Aj
					; seg0b2c:3D6Cj
		les	bx, _cur_sub
		mov	al, es:[bx+36h]
		mov	ah, 0
		or	ax, ax
		jnz	loc_11257
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@touching$qn7m_actort1 ; touching(m_actor *,m_actor *)
		add	sp, 8
		or	al, al
		jz	loc_11257
		les	bx, [bp+6]
		les	bx, es:[bx+2Ch]
		push	word ptr es:[bx+14h]
		push	1
		push	cs
		call	near ptr @hit_cur_sub$qii ; hit_cur_sub(int,int)
		add	sp, 4

loc_11257::				; CODE XREF: seg0b2c:3D87j
					; seg0b2c:3DA1j
		pop	bp
		retf
; ---------------------------------------------------------------------------

; do_bs2_eyes(m_actor *)
@do_bs2_eyes$qn7m_actor:		; DATA XREF: seg03f9:6C50o
		push	bp
		mov	bp, sp
		les	bx, [bp+6]
		les	bx, es:[bx+2Ch]
		mov	al, es:[bx+36h]
		les	bx, [bp+6]
		mov	es:[bx+36h], al
		les	bx, [bp+6]
		les	bx, es:[bx+2Ch]
		cmp	byte ptr es:[bx+3Dh], 2
		jnz	loc_11286
		les	bx, [bp+6]
		mov	byte ptr es:[bx+3Ch], 3
		jmp	loc_112B3
; ---------------------------------------------------------------------------

loc_11286::				; CODE XREF: seg0b2c:3DDAj
		les	bx, [bp+6]
		cmp	word ptr es:[bx+26h], 0
		jnz	loc_112AA
		push	3
		call	@random$qi	; random(int)
		pop	cx
		les	bx, [bp+6]
		mov	es:[bx+3Ch], al
		les	bx, [bp+6]
		mov	word ptr es:[bx+26h], 14h
		jmp	loc_112B3
; ---------------------------------------------------------------------------

loc_112AA::				; CODE XREF: seg0b2c:3DEEj
		les	bx, [bp+6]
		dec	word ptr es:[bx+26h]
		jmp	$+2
; ---------------------------------------------------------------------------

loc_112B3::				; CODE XREF: seg0b2c:3DE4j
					; seg0b2c:3E08j ...
		pop	bp
		retf
; ---------------------------------------------------------------------------

; do_bs2(m_actor *)
@do_bs2$qn7m_actor:			; DATA XREF: seg03f9:6BCBo
		push	bp
		mov	bp, sp
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+3Dh], 2
		jz	loc_112C5
		jmp	loc_11386
; ---------------------------------------------------------------------------

loc_112C5::				; CODE XREF: seg0b2c:3E20j
		les	bx, [bp+6]
		cmp	word ptr es:[bx+16h], 0
		jz	loc_11345
		push	0
		push	0
		push	0
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@tile_collision$qiii ; m_actor::tile_collision(int,int,int)
		add	sp, 0Ah
		or	al, al
		jz	loc_112FC
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 0
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 20h
		inc	_enemies_killed

loc_112FC::				; CODE XREF: seg0b2c:3E45j
		push	3
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_11343
		push	0
		push	0
		push	1
		les	bx, [bp+6]
		push	word ptr es:[bx+12h]
		call	@random$qi	; random(int)
		pop	cx
		les	bx, [bp+6]
		mov	dx, es:[bx+2]
		add	dx, ax
		push	dx
		les	bx, [bp+6]
		push	word ptr es:[bx+10h]
		call	@random$qi	; random(int)
		pop	cx
		les	bx, [bp+6]
		mov	dx, es:[bx]
		add	dx, ax
		push	dx
		call	@add_explosion$qiiucnuc	; add_explosion(int,int,uchar,uchar *)
		add	sp, 0Ah

loc_11343::				; CODE XREF: seg0b2c:3E66j
		jmp	loc_11383
; ---------------------------------------------------------------------------

loc_11345::				; CODE XREF: seg0b2c:3E2Dj
		push	6
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_11383
		push	0
		push	14h
		call	@random$qi	; random(int)
		pop	cx
		les	bx, [bp+6]
		mov	dx, es:[bx+2]
		add	dx, ax
		push	dx
		les	bx, [bp+6]
		push	word ptr es:[bx+10h]
		call	@random$qi	; random(int)
		pop	cx
		les	bx, [bp+6]
		mov	dx, es:[bx]
		add	dx, ax
		push	dx
		call	@add_bubble$qiii ; add_bubble(int,int,int)
		add	sp, 6

loc_11383::				; CODE XREF: seg0b2c:loc_11343j
					; seg0b2c:3EAFj
		jmp	loc_1154A
; ---------------------------------------------------------------------------

loc_11386::				; CODE XREF: seg0b2c:3E22j
		les	bx, [bp+6]
		cmp	word ptr es:[bx+22h], 0
		jz	loc_11399
		les	bx, [bp+6]
		dec	word ptr es:[bx+22h]
		jmp	loc_113DD
; ---------------------------------------------------------------------------

loc_11399::				; CODE XREF: seg0b2c:3EEEj
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 6
		and	ax, 1
		cmp	ax, 1
		jnz	loc_113DD
		push	14h
		call	@random$qi	; random(int)
		pop	cx
		add	ax, 0Ah
		les	bx, [bp+6]
		mov	es:[bx+22h], ax
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 0BFh
		les	bx, [bp+6]
		mov	ax, es:[bx+14h]
		neg	ax
		les	bx, [bp+6]
		mov	es:[bx+14h], ax
		les	bx, [bp+6]
		xor	byte ptr es:[bx+34h], 1

loc_113DD::				; CODE XREF: seg0b2c:3EF7j
					; seg0b2c:3F09j
		les	bx, [bp+6]
		cmp	word ptr es:[bx+24h], 4
		jnz	loc_1140B
		les	bx, [bp+6]
		cmp	word ptr es:[bx+16h], 0
		jz	loc_1140B
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 0
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 0F7h
		les	bx, [bp+6]
		mov	word ptr es:[bx+28h], 0

loc_1140B::				; CODE XREF: seg0b2c:3F45j
					; seg0b2c:3F4Fj
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@facing_actor$qn7m_actor ; m_actor::facing_actor(m_actor *)
		add	sp, 8
		mov	ah, 0
		or	ax, ax
		jnz	loc_1142F
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 40h

loc_1142F::				; CODE XREF: seg0b2c:3F85j
		les	bx, [bp+6]
		cmp	word ptr es:[bx+24h], 4
		jnz	loc_114AF
		push	3Ch ; '<'
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @check_for_hit$qn7m_actoruc ; check_for_hit(m_actor *,uchar)
		add	sp, 6
		cmp	al, 2
		jnz	loc_1148F
		les	bx, [bp+6]
		les	bx, es:[bx+2Ch]
		or	byte ptr es:[bx+52h], 40h
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 0FEh
		les	bx, [bp+6]
		mov	word ptr es:[bx+14h], 0
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 1
		les	bx, [bp+6]
		mov	dword ptr es:[bx+42h], 0
		les	bx, [bp+6]
		mov	byte ptr es:[bx+3Dh], 2
		add	_score,	75000

loc_1148F::				; CODE XREF: seg0b2c:3FAAj
		push	1Eh
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_114AD
		push	23h ; '#'
		push	0Bh
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@add_missile$qn7m_actoruci ; add_missile(m_actor *,uchar,int)
		add	sp, 8

loc_114AD::				; CODE XREF: seg0b2c:3FF9j
		jmp	loc_11512
; ---------------------------------------------------------------------------

loc_114AF::				; CODE XREF: seg0b2c:3F97j
		les	bx, [bp+6]
		mov	ax, es:[bx+0Ah]
		les	bx, _cur_sub
		sub	ax, es:[bx+0Ah]
		push	ax
		call	@abs$qi		; abs(int)
		pop	cx
		mov	_diff_y, ax
		cmp	_diff_y, 28h ; '('
		jnb	loc_114ED
		push	14h
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_114ED
		push	23h ; '#'
		push	0Bh
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@add_missile$qn7m_actoruci ; add_missile(m_actor *,uchar,int)
		add	sp, 8

loc_114ED::				; CODE XREF: seg0b2c:402Dj
					; seg0b2c:4039j
		les	bx, _cur_sub
		mov	ax, es:[bx+0Ah]
		les	bx, [bp+6]
		cmp	ax, es:[bx+6]
		jge	loc_11509
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 0FFFFh
		jmp	loc_11512
; ---------------------------------------------------------------------------

loc_11509::				; CODE XREF: seg0b2c:405Cj
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 1

loc_11512::				; CODE XREF: seg0b2c:loc_114ADj
					; seg0b2c:4067j
		les	bx, _cur_sub
		mov	al, es:[bx+36h]
		mov	ah, 0
		or	ax, ax
		jnz	loc_1154A
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@touching$qn7m_actort1 ; touching(m_actor *,m_actor *)
		add	sp, 8
		or	al, al
		jz	loc_1154A
		les	bx, [bp+6]
		push	word ptr es:[bx+14h]
		push	1
		push	cs
		call	near ptr @hit_cur_sub$qii ; hit_cur_sub(int,int)
		add	sp, 4

loc_1154A::				; CODE XREF: seg0b2c:loc_11383j
					; seg0b2c:407Ej ...
		pop	bp
		retf
; ---------------------------------------------------------------------------

; do_bs3(m_actor *)
@do_bs3$qn7m_actor:			; DATA XREF: seg03f9:6F94o
		enter	8, 0
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+3Dh], 2
		jz	loc_1155D
		jmp	loc_1171A
; ---------------------------------------------------------------------------

loc_1155D::				; CODE XREF: seg0b2c:40B8j
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 5
		and	ax, 1
		or	ax, ax
		jz	loc_11571
		jmp	loc_11611
; ---------------------------------------------------------------------------

loc_11571::				; CODE XREF: seg0b2c:40CCj
		push	0
		push	0
		push	0
		push	word ptr [bp+8]
		push	word ptr [bp+6]

loc_1157D::				; m_actor::tile_collision(int,int,int)
		call	@m_actor@tile_collision$qiii
		add	sp, 0Ah
		or	al, al
		jnz	loc_1158C
		jmp	loc_1160F
; ---------------------------------------------------------------------------

loc_1158C::				; CODE XREF: seg0b2c:40E7j
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 0
		les	bx, [bp+6]
		les	bx, es:[bx+30h]
		or	byte ptr es:[bx+52h], 40h
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 20h
		inc	_enemies_killed
		mov	_control, 0
		les	bx, _ego
		xor	ax, ax
		mov	es:[bx+16h], ax
		les	bx, _ego
		mov	es:[bx+14h], ax
		les	bx, _ego
		mov	dword ptr es:[bx+42h], 0
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	word ptr _ego+2
		push	word ptr _ego
		call	@m_actor@facing_actor$qn7m_actor ; m_actor::facing_actor(m_actor *)
		add	sp, 8
		mov	ah, 0
		or	ax, ax
		jnz	loc_115F2
		call	@turn_ego$qv	; turn_ego(void)

loc_115F2::				; CODE XREF: seg0b2c:414Bj
		push	1
		push	0
		push	word ptr _ego+2
		push	word ptr _ego
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		les	bx, dword ptr _the_game
		mov	byte ptr es:[bx+0Fh], 1

loc_1160F::				; CODE XREF: seg0b2c:40E9j
		jmp	loc_1164F
; ---------------------------------------------------------------------------

loc_11611::				; CODE XREF: seg0b2c:40CEj
		push	6
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_1164F
		push	0
		push	14h
		call	@random$qi	; random(int)
		pop	cx
		les	bx, [bp+6]
		mov	dx, es:[bx+2]
		add	dx, ax
		push	dx
		les	bx, [bp+6]
		push	word ptr es:[bx+10h]
		call	@random$qi	; random(int)
		pop	cx
		les	bx, [bp+6]
		mov	dx, es:[bx]
		add	dx, ax
		push	dx
		call	@add_bubble$qiii ; add_bubble(int,int,int)
		add	sp, 6

loc_1164F::				; CODE XREF: seg0b2c:loc_1160Fj
					; seg0b2c:417Bj
		push	2
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jz	loc_1165E
		jmp	loc_11717
; ---------------------------------------------------------------------------

loc_1165E::				; CODE XREF: seg0b2c:41B9j
		les	bx, [bp+6]
		push	word ptr es:[bx+10h]
		call	@random$qi	; random(int)
		pop	cx
		les	bx, [bp+6]
		mov	dx, es:[bx]
		add	dx, ax
		mov	[bp-6],	dx
		les	bx, [bp+6]
		push	word ptr es:[bx+12h]
		call	@random$qi	; random(int)
		pop	cx
		les	bx, [bp+6]
		mov	dx, es:[bx+2]
		add	dx, ax
		add	dx, 0FFF6h
		mov	[bp-8],	dx
		push	3
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jz	loc_116AA
		cmp	ax, 1
		jz	loc_116C0
		cmp	ax, 2
		jz	loc_116C8
		jmp	loc_11717
; ---------------------------------------------------------------------------

loc_116AA::				; CODE XREF: seg0b2c:41FCj
		push	0
		push	0
		push	1

loc_116B0::				; CODE XREF: seg0b2c:4226j
		push	word ptr [bp-8]
		push	word ptr [bp-6]
		call	@add_explosion$qiiucnuc	; add_explosion(int,int,uchar,uchar *)
		add	sp, 0Ah
		jmp	loc_11717
; ---------------------------------------------------------------------------

loc_116C0::				; CODE XREF: seg0b2c:4201j
		push	0
		push	0
		push	2
		jmp	loc_116B0
; ---------------------------------------------------------------------------

loc_116C8::				; CODE XREF: seg0b2c:4206j
		push	0
		push	0
		push	0
		push	0
		push	ds
		push	offset aExp3_l_1 ; "exp3.l"
		push	word ptr _the_cast+2
		push	word ptr _the_cast
		call	@game_cast@add$qnucnvt2	; game_cast::add(uchar *,void *,void *)
		add	sp, 10h
		mov	word ptr _act+2, dx
		mov	word ptr _act, ax
		push	word ptr [bp-8]
		push	word ptr [bp-6]
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_xy$qii ; m_actor::set_xy(int,int)
		add	sp, 8
		push	2
		push	0
		push	word ptr _act+2
		push	word ptr _act
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		jmp	$+2
; ---------------------------------------------------------------------------

loc_11717::				; CODE XREF: seg0b2c:41BBj
					; seg0b2c:4208j ...
		jmp	locret_11A0D
; ---------------------------------------------------------------------------

loc_1171A::				; CODE XREF: seg0b2c:40BAj
		les	bx, [bp+6]
		cmp	dword ptr es:[bx+2Ch], 0
		jz	loc_11728
		jmp	loc_11838
; ---------------------------------------------------------------------------

loc_11728::				; CODE XREF: seg0b2c:4283j
		push	5Ah ; 'Z'
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @check_for_hit$qn7m_actoruc ; check_for_hit(m_actor *,uchar)
		add	sp, 6
		mov	ah, 0
		mov	[bp-4],	ax
		cmp	word ptr [bp-4], 2
		jnz	loc_1178E
		push	ds
		push	offset aBs3_dthr_l_1 ; "bs3_dthr.l"
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8
		les	bx, [bp+6]
		mov	byte ptr es:[bx+3Dh], 2
		les	bx, [bp+6]
		mov	word ptr es:[bx+14h], 0
		les	bx, [bp+6]
		mov	word ptr es:[bx+16h], 1
		les	bx, [bp+6]
		mov	dword ptr es:[bx+42h], 0
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 0FEh
		add	_score,	100000
		jmp	locret_11A0D
; ---------------------------------------------------------------------------

loc_1178E::				; CODE XREF: seg0b2c:42A0j
		cmp	word ptr [bp-4], 1
		jnz	loc_117CE
		mov	al, _shot_size
		mov	ah, 0
		mov	dx, 3
		sub	dx, ax
		inc	dx
		push	dx
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_117CE
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@facing_actor$qn7m_actor ; m_actor::facing_actor(m_actor *)
		add	sp, 8
		mov	ah, 0
		or	ax, ax
		jnz	loc_117CE
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 40h

loc_117CE::				; CODE XREF: seg0b2c:42F2j
					; seg0b2c:4308j ...
		les	bx, [bp+6]
		cmp	word ptr es:[bx+24h], 0
		jz	loc_117E1
		les	bx, [bp+6]
		dec	word ptr es:[bx+24h]
		jmp	loc_11836
; ---------------------------------------------------------------------------

loc_117E1::				; CODE XREF: seg0b2c:4336j
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@facing_actor$qn7m_actor ; m_actor::facing_actor(m_actor *)
		add	sp, 8
		or	al, al
		jz	loc_11836
		les	bx, [bp+6]
		mov	ax, es:[bx+0Ah]
		les	bx, _cur_sub
		sub	ax, es:[bx+0Ah]
		push	ax
		call	@abs$qi		; abs(int)
		pop	cx
		mov	_diff_y, ax
		cmp	_diff_y, 28h ; '('
		jnb	loc_11836
		les	bx, [bp+6]
		mov	word ptr es:[bx+24h], 5
		push	20h ; ' '
		push	2
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@add_missile$qn7m_actoruci ; add_missile(m_actor *,uchar,int)
		add	sp, 8

loc_11836::				; CODE XREF: seg0b2c:433Fj
					; seg0b2c:4359j ...
		jmp	loc_11867
; ---------------------------------------------------------------------------

loc_11838::				; CODE XREF: seg0b2c:4285j
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 3
		and	ax, 1
		or	ax, ax
		jz	loc_11867
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 0F7h
		push	8
		push	ds
		push	offset aDirhit_3 ; "dirhit"
		push	word_2B8BC
		push	_the_game
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah

loc_11867::				; CODE XREF: seg0b2c:loc_11836j
					; seg0b2c:43A7j
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@facing_actor$qn7m_actor ; m_actor::facing_actor(m_actor *)
		add	sp, 8
		mov	ah, 0
		or	ax, ax
		jnz	loc_11897
		push	5
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_11897
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 40h

loc_11897::				; CODE XREF: seg0b2c:43E1j
					; seg0b2c:43EDj
		les	bx, [bp+6]
		cmp	word ptr es:[bx+22h], 0
		jz	loc_118B3
		les	bx, [bp+6]
		dec	word ptr es:[bx+22h]
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 0BFh
		jmp	loc_119DA
; ---------------------------------------------------------------------------

loc_118B3::				; CODE XREF: seg0b2c:43FFj
		les	bx, [bp+6]
		cmp	dword ptr es:[bx+2Ch], 0
		jnz	loc_118C7
		les	bx, [bp+6]
		mov	ax, es:[bx+6]
		jmp	loc_118D1
; ---------------------------------------------------------------------------

loc_118C7::				; CODE XREF: seg0b2c:441Cj
		les	bx, [bp+6]
		mov	ax, es:[bx+6]
		add	ax, 0Fh

loc_118D1::				; CODE XREF: seg0b2c:4425j
		mov	[bp-2],	ax
		les	bx, _cur_sub
		mov	ax, es:[bx+0Ah]
		cmp	ax, [bp-2]
		jge	loc_118EC
		les	bx, [bp+6]
		mov	ax, es:[bx+26h]
		neg	ax
		jmp	loc_118F3
; ---------------------------------------------------------------------------

loc_118EC::				; CODE XREF: seg0b2c:443Fj
		les	bx, [bp+6]
		mov	ax, es:[bx+26h]

loc_118F3::				; CODE XREF: seg0b2c:444Aj
		les	bx, [bp+6]
		mov	es:[bx+16h], ax
		les	bx, [bp+6]
		mov	word ptr es:[bx+22h], 0Ah
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 6
		and	ax, 1
		cmp	ax, 1
		jz	loc_11918
		jmp	loc_119DA
; ---------------------------------------------------------------------------

loc_11918::				; CODE XREF: seg0b2c:4473j
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 0BFh
		les	bx, [bp+6]
		mov	ax, es:[bx+14h]
		neg	ax
		les	bx, [bp+6]
		mov	es:[bx+14h], ax
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+34h], 1
		jnz	loc_11970
		push	ds
		push	offset aBs3_bdr_l_1 ; "bs3_bdr.l"
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8
		les	bx, [bp+6]
		cmp	dword ptr es:[bx+2Ch], 0
		jz	loc_1196E
		push	ds
		push	offset aBs3_arr_l_2 ; "bs3_arr.l"
		les	bx, [bp+6]
		push	word ptr es:[bx+2Eh]
		push	word ptr es:[bx+2Ch]
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8

loc_1196E::				; CODE XREF: seg0b2c:44B5j
		jmp	loc_119A4
; ---------------------------------------------------------------------------

loc_11970::				; CODE XREF: seg0b2c:4498j
		push	ds
		push	offset aBs3_bdl_l_2 ; "bs3_bdl.l"
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8
		les	bx, [bp+6]
		cmp	dword ptr es:[bx+2Ch], 0
		jz	loc_119A4
		push	ds
		push	offset aBs3_arl_l_2 ; "bs3_arl.l"
		les	bx, [bp+6]
		push	word ptr es:[bx+2Eh]
		push	word ptr es:[bx+2Ch]
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8

loc_119A4::				; CODE XREF: seg0b2c:loc_1196Ej
					; seg0b2c:44EBj
		les	bx, [bp+6]
		xor	byte ptr es:[bx+34h], 1
		les	bx, [bp+6]
		cmp	dword ptr es:[bx+2Ch], 0
		jz	loc_119DA
		les	bx, [bp+6]
		les	bx, es:[bx+2Ch]
		xor	byte ptr es:[bx+34h], 1
		push	0
		push	0
		les	bx, [bp+6]
		push	word ptr es:[bx+2Eh]
		push	word ptr es:[bx+2Ch]
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8

loc_119DA::				; CODE XREF: seg0b2c:4410j
					; seg0b2c:4475j ...
		les	bx, _cur_sub
		mov	al, es:[bx+36h]
		mov	ah, 0
		or	ax, ax
		jnz	locret_11A0D
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@touching$qn7m_actort1 ; touching(m_actor *,m_actor *)
		add	sp, 8
		or	al, al
		jz	locret_11A0D
		push	0
		push	1
		push	cs
		call	near ptr @hit_cur_sub$qii ; hit_cur_sub(int,int)
		add	sp, 4

locret_11A0D::				; CODE XREF: seg0b2c:loc_11717j
					; seg0b2c:42EBj ...
		leave
		retf
; ---------------------------------------------------------------------------

; do_bs3a(m_actor *)
@do_bs3a$qn7m_actor:			; DATA XREF: seg03f9:700Fo
		enter	2, 0
		push	28h ; '('
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @check_for_hit$qn7m_actoruc ; check_for_hit(m_actor *,uchar)
		add	sp, 6
		mov	[bp-1],	al
		cmp	byte ptr [bp-1], 2
		jz	loc_11A2E
		jmp	loc_11AAF
; ---------------------------------------------------------------------------

loc_11A2E::				; CODE XREF: seg0b2c:4589j
		les	bx, [bp+6]
		les	bx, es:[bx+2Ch]
		mov	word ptr es:[bx+2Eh], 0
		mov	word ptr es:[bx+2Ch], 0
		les	bx, [bp+6]
		les	bx, es:[bx+2Ch]
		and	byte ptr es:[bx+52h], 0F7h
		les	bx, [bp+6]
		les	bx, es:[bx+2Ch]
		mov	word ptr es:[bx+28h], 0
		push	0
		push	0
		push	1
		les	bx, [bp+6]
		push	word ptr es:[bx+2]
		les	bx, [bp+6]
		push	word ptr es:[bx]
		call	@add_explosion$qiiucnuc	; add_explosion(int,int,uchar,uchar *)
		add	sp, 0Ah
		push	0
		push	0
		push	1
		les	bx, [bp+6]
		push	word ptr es:[bx+2]
		les	bx, [bp+6]
		push	word ptr es:[bx+4]
		call	@add_explosion$qiiucnuc	; add_explosion(int,int,uchar,uchar *)
		add	sp, 0Ah
		push	0
		push	0
		push	2
		les	bx, [bp+6]
		push	word ptr es:[bx+0Ah]
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		call	@add_explosion$qiiucnuc	; add_explosion(int,int,uchar,uchar *)
		add	sp, 0Ah
		jmp	loc_11AE9
; ---------------------------------------------------------------------------

loc_11AAF::				; CODE XREF: seg0b2c:458Bj
		cmp	byte ptr [bp-1], 1
		jnz	loc_11AE9
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@facing_actor$qn7m_actor ; m_actor::facing_actor(m_actor *)
		add	sp, 8
		mov	ah, 0
		or	ax, ax
		jnz	loc_11AE9
		push	4
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_11AE9
		les	bx, [bp+6]
		les	bx, es:[bx+2Ch]
		or	byte ptr es:[bx+52h], 40h

loc_11AE9::				; CODE XREF: seg0b2c:460Dj
					; seg0b2c:4613j ...
		les	bx, [bp+6]
		mov	al, es:[bx+52h]
		shr	ax, 7
		and	ax, 1
		or	ax, ax
		jnz	loc_11B0A
		push	0Ah
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	loc_11B08
		jmp	loc_11B21
; ---------------------------------------------------------------------------

loc_11B08::				; CODE XREF: seg0b2c:4664j
		jmp	loc_11B1F
; ---------------------------------------------------------------------------

loc_11B0A::				; CODE XREF: seg0b2c:4658j
		les	bx, [bp+6]
		mov	al, es:[bx+38h]
		mov	ah, 0
		or	ax, ax
		jnz	loc_11B1F
		les	bx, [bp+6]
		and	byte ptr es:[bx+52h], 7Fh

loc_11B1F::				; CODE XREF: seg0b2c:loc_11B08j
					; seg0b2c:4675j
		jmp	locret_11B67
; ---------------------------------------------------------------------------

loc_11B21::				; CODE XREF: seg0b2c:4666j
		push	word ptr _cur_sub+2
		push	word ptr _cur_sub
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@facing_actor$qn7m_actor ; m_actor::facing_actor(m_actor *)
		add	sp, 8
		or	al, al
		jz	locret_11B67
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 80h
		push	3
		push	2
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@set_cycle$qucuc ; m_actor::set_cycle(uchar,uchar)
		add	sp, 8
		push	12h
		push	0Ah
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@add_missile$qn7m_actoruci ; add_missile(m_actor *,uchar,int)
		add	sp, 8

locret_11B67::				; CODE XREF: seg0b2c:loc_11B1Fj
					; seg0b2c:4699j
		leave
		retf
; ---------------------------------------------------------------------------

; do_bs3_prop(m_actor *)
@do_bs3_prop$qn7m_actor:		; DATA XREF: seg03f9:70F1o
		enter	4, 0
		les	bx, [bp+6]
		les	bx, es:[bx+2Ch]
		cmp	byte ptr es:[bx+3Dh], 2
		jnz	loc_11B83
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 1

loc_11B83::				; CODE XREF: seg0b2c:46D9j
		les	bx, [bp+6]
		les	bx, es:[bx+2Ch]
		mov	al, es:[bx+34h]
		les	bx, [bp+6]
		cmp	al, es:[bx+34h]
		jz	loc_11BC1
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+34h], 0
		jnz	loc_11BA7
		push	ds
		push	offset aBs3_prpl_l_2 ; "bs3_prpl.l"
		jmp	loc_11BAB
; ---------------------------------------------------------------------------

loc_11BA7::				; CODE XREF: seg0b2c:46FFj
		push	ds
		push	offset aBs3_prpr_l_2 ; "bs3_prpr.l"

loc_11BAB::				; CODE XREF: seg0b2c:4705j
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8
		les	bx, [bp+6]
		xor	byte ptr es:[bx+34h], 1

loc_11BC1::				; CODE XREF: seg0b2c:46F5j
		push	2
		call	@random$qi	; random(int)
		pop	cx
		or	ax, ax
		jnz	locret_11C16
		les	bx, [bp+6]
		mov	ax, es:[bx]
		mov	[bp-2],	ax
		push	0Fh
		call	@random$qi	; random(int)
		pop	cx
		les	bx, [bp+6]
		mov	dx, es:[bx+2]
		add	dx, ax
		mov	[bp-4],	dx
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+34h], 0
		jnz	loc_11BFE
		push	0FFF8h
		push	word ptr [bp-4]
		push	word ptr [bp-2]
		jmp	loc_11C0E
; ---------------------------------------------------------------------------

loc_11BFE::				; CODE XREF: seg0b2c:4752j
		push	8
		push	word ptr [bp-4]
		les	bx, [bp+6]
		mov	ax, [bp-2]
		add	ax, es:[bx+10h]
		push	ax

loc_11C0E::				; CODE XREF: seg0b2c:475Cj
		call	@add_bubble$qiii ; add_bubble(int,int,int)
		add	sp, 6

locret_11C16::				; CODE XREF: seg0b2c:472Bj
		leave
		retf
; ---------------------------------------------------------------------------

; do_bs3_face(m_actor *)
@do_bs3_face$qn7m_actor:		; DATA XREF: seg03f9:71B9o
		push	bp
		mov	bp, sp
		les	bx, [bp+6]
		les	bx, es:[bx+2Ch]
		cmp	byte ptr es:[bx+3Dh], 2
		jnz	loc_11C31
		les	bx, [bp+6]
		or	byte ptr es:[bx+52h], 1

loc_11C31::				; CODE XREF: seg0b2c:4787j
		les	bx, [bp+6]
		les	bx, es:[bx+2Ch]
		mov	al, es:[bx+34h]
		les	bx, [bp+6]
		cmp	al, es:[bx+34h]
		jz	loc_11C6F
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+34h], 0
		jnz	loc_11C55
		push	ds
		push	offset aBs3_facl_l_2 ; "bs3_facl.l"
		jmp	loc_11C59
; ---------------------------------------------------------------------------

loc_11C55::				; CODE XREF: seg0b2c:47ADj
		push	ds
		push	offset aBs3_facr_l_2 ; "bs3_facr.l"

loc_11C59::				; CODE XREF: seg0b2c:47B3j
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@m_actor@new_loop$qnuc ; m_actor::new_loop(uchar *)
		add	sp, 8

loc_11C67::
		les	bx, [bp+6]
		xor	byte ptr es:[bx+34h], 1

loc_11C6F::				; CODE XREF: seg0b2c:47A3j
		pop	bp

locret_11C70::
		retf
seg0b2c		ends

; ===========================================================================

; Segment type:	Pure code
seg0fa9		segment	byte public 'CODE' use16
		assume cs:seg0fa9
		;org 1
		assume es:nothing, ss:nothing, ds:seg2608, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; prepare_new_screen(void)
@prepare_new_screen$qv proc far		; CODE XREF: seg0fa9:020Cp
					; seg0fa9:0615p ...
		push	bp
		mov	bp, sp
		push	word ptr _the_menu_bar+2
		push	word ptr _the_menu_bar
		les	bx, _the_menu_bar
		assume es:nothing
		mov	bx, es:[bx]
		call	dword ptr [bx+4]
		add	sp, 4
		push	word ptr _mouse+2
		push	word ptr _mouse
		call	@ms_mouse@hide$qv ; ms_mouse::hide(void)
		assume es:nothing
		add	sp, 4
		push	0

loc_11C9B::
		push	1
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@copy_page$qucuc ; vga_display::copy_page(uchar,uchar)
		assume es:nothing
		add	sp, 8
		pop	bp
		retf
@prepare_new_screen$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; restore_old_screen(void)
@restore_old_screen$qv proc far		; CODE XREF: seg0fa9:loc_121D8p
					; seg0fa9:0647p ...
		push	bp
		mov	bp, sp
		push	1
		push	0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@copy_page$qucuc ; vga_display::copy_page(uchar,uchar)
		assume es:nothing
		add	sp, 8
		push	word ptr _the_menu_bar+2
		push	word ptr _the_menu_bar
		les	bx, _the_menu_bar
		assume es:nothing
		mov	bx, es:[bx]
		call	dword ptr [bx]
		add	sp, 4
		push	word ptr _mouse+2
		push	word ptr _mouse
		call	@ms_mouse@show$qv ; ms_mouse::show(void)
		assume es:nothing
		add	sp, 4
		pop	bp
		retf
@restore_old_screen$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far print_form(char *path_3, char)
@print_form$qnucuc proc	far		; CODE XREF: seg0fa9:0AC0p

buf		= byte ptr -3
var_2		= word ptr -2
path_3		= dword	ptr  6
arg_4		= byte ptr  0Ah

		enter	14h, 0

loc_11CF0::				; g_close_element(void)
		call	@g_close_element$qv
		push	190h		; n
		push	0		; c
		push	ds
		push	offset _tmp	; s
		call	_memset
		add	sp, 8
		push	word ptr [bp+path_3+2]
		push	word ptr [bp+path_3] ; path
		call	@g_open_element$qnuc ; g_open_element(uchar *)
		push	dx
		push	ax
		pop	eax
		add	sp, 4
		cmp	eax, 0FFFFFFFFh
		jnz	loc_11D2C
		push	word ptr [bp+path_3+2]
		push	word ptr [bp+path_3]
		call	@read_error$qnuc ; read_error(uchar *)
; ---------------------------------------------------------------------------
		add	sp, 4

loc_11D2C::				; CODE XREF: print_form(uchar *,uchar)+30j
		cmp	[bp+arg_4], 0
		jnz	loc_11D44
		push	4		; newcolor
		call	_textbackground
		pop	cx
		push	0Fh		; newcolor
		call	_textcolor
		pop	cx
		jmp	loc_11D7C
; ---------------------------------------------------------------------------

loc_11D44::				; CODE XREF: print_form(uchar *,uchar)+44j
		mov	byte ptr [bp-13h], 2
		mov	word ptr [bp-0Eh], 0
		push	ss
		lea	ax, [bp-14h]
		push	ax		; outregs
		push	ss
		lea	ax, [bp-14h]
		push	ax		; inregs
		push	17h		; intno
		call	_int86
		add	sp, 0Ah
		cmp	byte ptr [bp-13h], 0
		jz	loc_11D7C
		push	0		; char
		push	ds
		push	offset aPrinterError_C ; "Printer error.  Continue?"
		call	@i_yes_cancel$qnucuc ; i_yes_cancel(uchar *,uchar)
		add	sp, 6
		or	al, al
		jz	loc_11D7C
		jmp	loc_11E60
; ---------------------------------------------------------------------------

loc_11D7C::				; CODE XREF: print_form(uchar *,uchar)+56j
					; print_form(uchar *,uchar)+79j ...
		mov	[bp+buf], 1
		jmp	loc_11E33
; ---------------------------------------------------------------------------

loc_11D83::				; CODE XREF: print_form(uchar *,uchar)+14Dj
		push	50h ; 'P'       ; length_
		push	0		; char
		push	ds
		push	offset _tmp	; dest
		call	_strnset
		add	sp, 8
		mov	[bp+var_2], 0

loc_11D98::				; CODE XREF: print_form(uchar *,uchar)+F9j
		push	1		; len
		push	ss
		lea	ax, [bp+buf]
		push	ax		; buf
		call	@g_element_read$qnvui ;	g_element_read(void *,uint)
		push	dx
		push	ax
		pop	eax
		add	sp, 6
		cmp	eax, 1
		jz	loc_11DB4
		jmp	loc_11E3C
; ---------------------------------------------------------------------------

loc_11DB4::				; CODE XREF: print_form(uchar *,uchar)+C3j
		cmp	[bp+buf], 9
		jnz	loc_11DD4
		push	ds
		push	offset asc_29EFE ; "	    "
		mov	ax, [bp+var_2]
		add	ax, offset _tmp
		push	ds
		push	ax		; dest
		call	_strcat
		add	sp, 8
		add	[bp+var_2], 6
		jmp	loc_11DE1
; ---------------------------------------------------------------------------

loc_11DD4::				; CODE XREF: print_form(uchar *,uchar)+CCj
		mov	bx, [bp+var_2]
		mov	al, [bp+buf]
		mov	_tmp[bx], al
		inc	[bp+var_2]

loc_11DE1::				; CODE XREF: print_form(uchar *,uchar)+E6j
		cmp	[bp+buf], 0Ah
		jnz	loc_11D98
		cmp	[bp+arg_4], 0
		jnz	loc_11E1F
		mov	al, byte ptr [bp+var_2]
		add	al, 0FEh ; 'þ'
		mov	[bp+buf], al
		jmp	loc_11E06
; ---------------------------------------------------------------------------

loc_11DF7::				; CODE XREF: print_form(uchar *,uchar)+11Ej
		mov	al, [bp+buf]
		mov	ah, 0
		mov	bx, ax
		mov	_tmp[bx], 20h ;	' '
		inc	[bp+buf]

loc_11E06::				; CODE XREF: print_form(uchar *,uchar)+109j
		cmp	[bp+buf], 50h ;	'P'
		jb	loc_11DF7
		mov	byte_2D47C, 0Dh
		push	ds
		push	offset _tmp	; str
		call	_cputs
		add	sp, 4
		jmp	loc_11E33
; ---------------------------------------------------------------------------

loc_11E1F::				; CODE XREF: print_form(uchar *,uchar)+FFj
		push	0
		push	0		; arglist
		push	ds
		push	offset _tmp	; format
		push	ds
		push	offset _stream	; stream
		call	_vfprintf
		add	sp, 0Ch

loc_11E33::				; CODE XREF: print_form(uchar *,uchar)+94j
					; print_form(uchar *,uchar)+131j
		cmp	[bp+buf], 0
		jz	loc_11E3C
		jmp	loc_11D83
; ---------------------------------------------------------------------------

loc_11E3C::				; CODE XREF: print_form(uchar *,uchar)+C5j
					; print_form(uchar *,uchar)+14Bj
		cmp	[bp+arg_4], 1
		jnz	loc_11E60
		mov	_tmp, 0Ch
		mov	byte_2D42D, 0
		push	0
		push	0		; arglist
		push	ds
		push	offset _tmp	; format
		push	ds
		push	offset _stream	; stream
		call	_vfprintf
		add	sp, 0Ch

loc_11E60::				; CODE XREF: print_form(uchar *,uchar)+8Dj
					; print_form(uchar *,uchar)+154j
		call	@g_close_element$qv ; g_close_element(void)
		leave
		retf
@print_form$qnucuc endp

; ---------------------------------------------------------------------------

; cb_about_de(void)
@cb_about_de$qv:			; DATA XREF: setup_options(void)+26o
		enter	6, 0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@blank_palette$qv ;	vga_display::blank_palette(void)
		add	sp, 4
		push	cs
		call	near ptr @prepare_new_screen$qv	; prepare_new_screen(void)
		push	0
		push	0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@cls$qucuc ; vga_display::cls(uchar,uchar)
		add	sp, 8
		mov	word ptr [bp-2], 0
		jmp	loc_11EE9
; ---------------------------------------------------------------------------

loc_11E9A::				; CODE XREF: seg0fa9:027Ej
		push	13Eh
		call	@random$qi	; random(int)
		pop	cx
		mov	[bp-4],	ax
		push	0C6h ; 'Æ'
		call	@random$qi	; random(int)
		pop	cx
		mov	[bp-6],	ax
		push	0
		push	0FFFFh
		push	6
		call	@random$qi	; random(int)
		pop	cx
		add	ax, 2Ah	; '*'
		push	ax
		mov	ax, [bp-6]
		add	ax, 2
		push	ax
		mov	ax, [bp-4]
		add	ax, 2
		push	ax
		push	word ptr [bp-6]
		push	word ptr [bp-4]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fill_rect$qiiiiiiuc ; vga_display::fill_rect(int,int,int,int,int,int,uchar)
		add	sp, 12h
		inc	word ptr [bp-2]

loc_11EE9::				; CODE XREF: seg0fa9:0228j
		cmp	word ptr [bp-2], 5000
		jl	loc_11E9A
		push	0
		push	0
		push	3Ch ; '<'
		push	14h
		push	ds
		push	offset aTurn_l_2 ; "turn.l"
		call	@show_loop$qnuciiucui ;	show_loop(uchar	*,int,int,uchar,uint)
		add	sp, 0Ch
		push	0
		push	0
		push	78h ; 'x'
		push	46h ; 'F'
		push	ds
		push	offset aFish1r_l_2 ; "fish1r.l"
		call	@show_loop$qnuciiucui ;	show_loop(uchar	*,int,int,uchar,uint)
		add	sp, 0Ch
		push	0
		push	1
		push	5Fh ; '_'
		push	0E6h ; 'æ'
		push	ds
		push	offset aBs1_bdl_l_3 ; "bs1_bdl.l"
		call	@show_loop$qnuciiucui ;	show_loop(uchar	*,int,int,uchar,uint)
		add	sp, 0Ch
		push	9Fh ; ''
		push	1Ch
		push	2
		push	10h
		call	@i_set_text$qucucucuc ;	i_set_text(uchar,uchar,uchar,uchar)
		add	sp, 8
		push	1
		push	ds
		push	offset aInSearchOfDr_R ; "In Search of Dr. Riptide"
		push	0Ah
		push	14h
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		push	1
		push	ds
		push	offset aREGISTERED ; "R	E G I S	T E R E	D"
		push	14h
		push	14h
		push	word ptr _display+2

loc_11F66::
		push	word ptr _display
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		push	9Fh ; ''
		push	87h ; ''
		push	2
		push	80h ; ''
		call	@i_set_text$qucucucuc ;	i_set_text(uchar,uchar,uchar,uchar)
		add	sp, 8
		push	1
		push	ds
		push	offset aDesignAndProgr ; "Design and Programming:"
		push	32h ; '2'
		push	14h
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		push	1Dh
		push	18h
		push	2
		push	30h ; '0'
		call	@i_set_text$qucucucuc ;	i_set_text(uchar,uchar,uchar,uchar)
		add	sp, 8
		push	1
		push	ds
		push	offset aRaoulSaid ; "Raoul Said"
		push	3Ch ; '<'
		push	14h
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		push	9Fh ; ''
		push	87h ; ''
		push	2
		push	80h ; ''
		call	@i_set_text$qucucucuc ;	i_set_text(uchar,uchar,uchar,uchar)
		add	sp, 8
		push	1
		push	ds
		push	offset aProducer ; "Producer:"
		push	5Ah ; 'Z'
		push	14h
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		push	1Dh
		push	18h
		push	2
		push	30h ; '0'
		call	@i_set_text$qucucucuc ;	i_set_text(uchar,uchar,uchar,uchar)
		add	sp, 8
		push	1
		push	ds
		push	offset aAveryPack ; "Avery Pack"
		push	64h ; 'd'
		push	14h
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		push	9Fh ; ''
		push	87h ; ''
		push	2
		push	80h ; ''
		call	@i_set_text$qucucucuc ;	i_set_text(uchar,uchar,uchar,uchar)
		add	sp, 8
		push	1
		push	ds
		push	offset aArtwork	; "Artwork:"
		push	78h ; 'x'
		push	14h
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		push	1Dh
		push	18h
		push	2
		push	30h ; '0'
		call	@i_set_text$qucucucuc ;	i_set_text(uchar,uchar,uchar,uchar)
		add	sp, 8
		push	1
		push	ds
		push	offset aMelGuymon ; "Mel Guymon"
		push	82h ; ''
		push	14h
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		push	9Fh ; ''
		push	87h ; ''
		push	2
		push	80h ; ''
		call	@i_set_text$qucucucuc ;	i_set_text(uchar,uchar,uchar,uchar)
		add	sp, 8
		push	1
		push	ds
		push	offset aComposerSoundE ; "Composer/Sound Effects:"
		push	96h ; ''
		push	14h
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		push	1Dh
		push	18h
		push	2
		push	30h ; '0'
		call	@i_set_text$qucucucuc ;	i_set_text(uchar,uchar,uchar,uchar)
		add	sp, 8
		push	1
		push	ds
		push	offset aDanFroelich ; "Dan Froelich"
		push	0A0h ; ' '
		push	14h
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		push	9Bh ; ''
		push	1Ch
		push	3
		push	68h ; 'h'
		call	@i_set_text$qucucucuc ;	i_set_text(uchar,uchar,uchar,uchar)

loc_120DF::				; DATA XREF: sub_24D9+5Fo
		add	sp, 8
		push	1
		push	ds
		push	offset aCopyrightC1994 ; "Copyright (C)	1994 MindStorm Software"
		push	0B4h ; '´'
		push	14h
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		push	1
		push	ds
		push	offset aAndPackMediaCo ; "and Pack Media Company, Inc."
		push	0BEh ; '¾'
		push	14h
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@set_palette$qv ; vga_display::set_palette(void)
		add	sp, 4
		push	ds
		push	offset aScream	; "scream"
		push	word_2B8BC
		push	_the_game
		call	@game_manager@play_sound_file$qnuc ; game_manager::play_sound_file(uchar *)
		add	sp, 8
		jmp	loc_1214E
; ---------------------------------------------------------------------------

loc_1213E::				; CODE XREF: seg0fa9:04E7j
					; seg0fa9:04F1j
		push	word_2B8BC
		push	_the_game
		call	@game_manager@doit$qv ;	game_manager::doit(void)
		add	sp, 4

loc_1214E::				; CODE XREF: seg0fa9:04CCj
		les	bx, dword ptr _the_game
		assume es:nothing
		cmp	byte ptr es:[bx+2Bh], 0
		jnz	loc_1213E
		les	bx, _mouse
		cmp	byte ptr es:[bx], 0
		jnz	loc_1213E
		jmp	loc_12175
; ---------------------------------------------------------------------------

loc_12165::				; CODE XREF: seg0fa9:051Ej
		push	word_2B8BC
		push	_the_game
		call	@game_manager@doit$qv ;	game_manager::doit(void)
		add	sp, 4

loc_12175::				; CODE XREF: seg0fa9:04F3j
		les	bx, dword ptr _the_game
		mov	al, es:[bx+2Bh]
		mov	ah, 0
		or	ax, ax
		jnz	loc_12190
		les	bx, _mouse
		mov	al, es:[bx]
		mov	ah, 0
		or	ax, ax
		jz	loc_12165

loc_12190::				; CODE XREF: seg0fa9:0511j
		jmp	loc_121A2
; ---------------------------------------------------------------------------

loc_12192::				; CODE XREF: seg0fa9:053Bj
					; seg0fa9:0545j
		push	word_2B8BC
		push	_the_game
		call	@game_manager@doit$qv ;	game_manager::doit(void)
		add	sp, 4

loc_121A2::				; CODE XREF: seg0fa9:loc_12190j
		les	bx, dword ptr _the_game
		cmp	byte ptr es:[bx+2Bh], 0
		jnz	loc_12192
		les	bx, _mouse
		cmp	byte ptr es:[bx], 0
		jnz	loc_12192
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@blank_palette$qv ;	vga_display::blank_palette(void)
		add	sp, 4
		push	1Dh
		push	18h
		push	2
		push	30h ; '0'
		call	@i_set_text$qucucucuc ;	i_set_text(uchar,uchar,uchar,uchar)
		add	sp, 8
		push	cs

loc_121D8::				; restore_old_screen(void)
		call	near ptr @restore_old_screen$qv
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@set_palette$qv ; vga_display::set_palette(void)
		add	sp, 4
		leave
		retf
; ---------------------------------------------------------------------------

; catalogue_call_up(unsigned char)
@catalogue_call_up$quc:			; DATA XREF: seg0fa9:061Bo
		enter	6, 0
		push	0
		push	0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@cls$qucuc ; vga_display::cls(uchar,uchar)
		add	sp, 8
		mov	word ptr [bp-2], 0
		jmp	loc_12277
; ---------------------------------------------------------------------------

loc_1220C::				; CODE XREF: seg0fa9:060Cj
		push	13Eh
		call	@random$qi	; random(int)
		pop	cx
		mov	[bp-4],	ax
		push	0C6h ; 'Æ'
		call	@random$qi	; random(int)
		pop	cx
		mov	[bp-6],	ax
		push	1Bh
		push	word ptr [bp-6]
		push	word ptr [bp-4]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@set_pix$qiiuc ; vga_display::set_pix(int,int,uchar)
		add	sp, 0Ah
		push	1Dh
		mov	ax, [bp-6]
		inc	ax
		push	ax
		mov	ax, [bp-4]
		inc	ax
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@set_pix$qiiuc ; vga_display::set_pix(int,int,uchar)
		add	sp, 0Ah
		push	1Fh
		mov	ax, [bp-6]
		add	ax, 2
		push	ax
		push	word ptr [bp-4]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@set_pix$qiiuc ; vga_display::set_pix(int,int,uchar)
		add	sp, 0Ah
		inc	word ptr [bp-2]

loc_12277::				; CODE XREF: seg0fa9:059Aj
		cmp	word ptr [bp-2], 5000
		jl	loc_1220C
		leave
		retf
; ---------------------------------------------------------------------------

; cb_catalogue(void)
@cb_catalogue$qv:			; DATA XREF: setup_options(void)+3Eo
		enter	4, 0
		push	cs
		call	near ptr @prepare_new_screen$qv	; prepare_new_screen(void)
		push	seg seg0fa9
		push	offset @catalogue_call_up$quc ;	catalogue_call_up(uchar)
		push	0
		push	ds
		push	offset aT_cat_txt ; "t_cat.txt"
		push	0
		push	0
		call	@text_pager@$bctr$qnucucnquc$v ; text_pager::text_pager(uchar *,uchar,void (*)(uchar))
		add	sp, 0Eh
		mov	[bp-2],	dx
		mov	[bp-4],	ax
		push	3
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	@text_pager@$bdtr$qv ; text_pager::~text_pager(void)
		add	sp, 6
		push	cs
		call	near ptr @restore_old_screen$qv	; restore_old_screen(void)
		leave
		retf
; ---------------------------------------------------------------------------
		assume es:nothing

; cb_start(void)
@cb_start$qv:				; DATA XREF: setup_options(void)+9Ao
		push	bp
		mov	bp, sp
		cmp	_game_in_progress, 0
		jz	loc_122DF
		push	0
		push	ds
		push	offset aStartGameFromB ; "Start	game from begining?"
		call	@i_yes_cancel$qnucuc ; i_yes_cancel(uchar *,uchar)
		add	sp, 6
		mov	ah, 0
		or	ax, ax
		jnz	loc_122DF
		mov	_stop_room, 2

loc_122DF::				; CODE XREF: seg0fa9:0654j
					; seg0fa9:0668j
		mov	_zoom_to_map, 0
		mov	_resume, 1
		pop	bp
		retf
; ---------------------------------------------------------------------------

; cb_start_act_2(void)
@cb_start_act_2$qv:			; DATA XREF: setup_options(void)+B2o
		push	bp
		mov	bp, sp
		cmp	_game_in_progress, 0
		jz	loc_1230E
		push	0
		push	ds
		push	offset aEndCurrentGame ; "End current game?"
		call	@i_yes_cancel$qnucuc ; i_yes_cancel(uchar *,uchar)
		add	sp, 6
		mov	ah, 0
		or	ax, ax
		jnz	loc_1230E
		mov	_stop_room, 2

loc_1230E::				; CODE XREF: seg0fa9:0683j
					; seg0fa9:0697j
		mov	_zoom_to_map, 7
		mov	_resume, 1
		pop	bp
		retf
; ---------------------------------------------------------------------------

; cb_password(void)
@cb_password$qv:			; DATA XREF: setup_options(void)+E2o
		enter	6, 0
		push	word ptr _mouse+2
		push	word ptr _mouse
		call	@ms_mouse@hide$qv ; ms_mouse::hide(void)
		add	sp, 4
		push	ds
		push	offset aEnterPasswordB ; "Enter	password below:"
		push	ds
		push	offset aPassword_0 ; "Password"
		call	@i_get_string$qnuct1 ; i_get_string(uchar *,uchar *)
		add	sp, 8
		mov	[bp-2],	dx
		mov	[bp-4],	ax
		push	word ptr _mouse+2
		push	word ptr _mouse
		call	@ms_mouse@show$qv ; ms_mouse::show(void)
		add	sp, 4
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	_strupr
		add	sp, 4
		mov	byte ptr [bp-5], 0
		jmp	loc_123B5
; ---------------------------------------------------------------------------

loc_12368::				; CODE XREF: seg0fa9:0749j
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		mov	al, [bp-5]
		mov	ah, 0
		imul	ax, 14h
		mov	bx, ax
		push	word ptr [bx+232h]
		push	word ptr [bx+230h]
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jnz	loc_123B2
		push	ds
		push	offset aCharge	; "charge"
		push	word_2B8BC
		push	_the_game
		call	@game_manager@play_sound_file$qnuc ; game_manager::play_sound_file(uchar *)
		add	sp, 8
		mov	_stop_room, 2
		mov	al, [bp-5]
		mov	_zoom_to_map, al
		mov	_resume, 1
		jmp	loc_123BB
; ---------------------------------------------------------------------------

loc_123B2::				; CODE XREF: seg0fa9:071Aj
		inc	byte ptr [bp-5]

loc_123B5::				; CODE XREF: seg0fa9:06F6j
		cmp	byte ptr [bp-5], 18h
		jb	loc_12368

loc_123BB::				; CODE XREF: seg0fa9:0740j
		push	ds
		push	offset aLetsrip	; "LETSRIP!"
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jnz	loc_12400
		push	0Fh
		push	ds
		push	offset aDrillhi_7 ; "drillhi"
		push	word_2B8BC
		push	_the_game
		call	@game_manager@play_sound$qnucuc	; game_manager::play_sound(uchar *,uchar)
		add	sp, 0Ah
		push	0
		push	0
		push	0
		push	ds
		push	offset aCheatModeOnLet ; "Cheat	mode ON!\nLet's Rip!"
		call	@i_inform$qnucuct1 ; i_inform(uchar *,uchar,uchar *)
		add	sp, 0Ah
		mov	_cheat_mode, 1
		jmp	loc_12418
; ---------------------------------------------------------------------------

loc_12400::				; CODE XREF: seg0fa9:075Fj
		cmp	byte ptr [bp-5], 18h
		jnz	loc_12418
		push	0
		push	0
		push	0
		push	ds
		push	offset aThatIsNotAVali ; "That is not a	valid\npassword."
		call	@i_inform$qnucuct1 ; i_inform(uchar *,uchar,uchar *)
		add	sp, 0Ah

loc_12418::				; CODE XREF: seg0fa9:078Ej
					; seg0fa9:0794j
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4
		cmp	_game_in_progress, 0
		jz	locret_12432
		mov	_resume, 1

locret_12432::				; CODE XREF: seg0fa9:07BBj
		leave
		retf
; ---------------------------------------------------------------------------
		assume es:nothing

; instructions_call_up(unsigned	char)
@instructions_call_up$quc:		; DATA XREF: seg0fa9:08B6o
		enter	0Ah, 0
		push	0
		push	0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@cls$qucuc ; vga_display::cls(uchar,uchar)
		assume es:nothing
		add	sp, 8
		les	bx, _display
		assume es:nothing
		mov	byte ptr es:[bx+7], 1
		mov	word ptr [bp-0Ah], 0
		jmp	loc_12493
; ---------------------------------------------------------------------------

loc_1245C::				; CODE XREF: seg0fa9:0828j
		mov	ax, [bp-0Ah]
		mov	bx, 14h
		cwd
		idiv	bx
		shl	dx, 4
		mov	[bp-6],	dx
		mov	ax, [bp-0Ah]
		mov	bx, 14h
		cwd
		idiv	bx
		imul	ax, 14h
		mov	[bp-8],	ax
		push	0
		push	0
		push	word ptr [bp-8]
		push	word ptr [bp-6]
		push	ds
		push	offset aPat1_l_0 ; "pat1.l"
		call	@show_loop$qnuciiucui ;	show_loop(uchar	*,int,int,uchar,uint)
		add	sp, 0Ch
		inc	word ptr [bp-0Ah]

loc_12493::				; CODE XREF: seg0fa9:07EAj
		cmp	word ptr [bp-0Ah], 0C8h	; 'È'
		jl	loc_1245C
		les	bx, _display
		mov	byte ptr es:[bx+7], 0
		cmp	byte ptr [bp+6], 1
		jz	loc_124AB
		jmp	locret_12519
; ---------------------------------------------------------------------------

loc_124AB::				; CODE XREF: seg0fa9:0837j
		mov	word ptr [bp-2], 33h ; '3'
		mov	word ptr [bp-4], 36h ; '6'
		push	0
		push	0
		push	word ptr [bp-4]
		push	word ptr [bp-2]
		push	ds
		push	offset aPu_shld_l_1 ; "pu_shld.l"
		call	@show_loop$qnuciiucui ;	show_loop(uchar	*,int,int,uchar,uint)
		add	sp, 0Ch
		add	word ptr [bp-4], 1Eh
		push	0
		push	0
		push	word ptr [bp-4]
		push	word ptr [bp-2]
		push	ds
		push	offset aPu_auto_l_1 ; "pu_auto.l"
		call	@show_loop$qnuciiucui ;	show_loop(uchar	*,int,int,uchar,uint)
		add	sp, 0Ch
		add	word ptr [bp-4], 1Eh
		push	0
		push	0
		push	word ptr [bp-4]
		push	word ptr [bp-2]
		push	ds
		push	offset aPu_fire_l_1 ; "pu_fire.l"
		call	@show_loop$qnuciiucui ;	show_loop(uchar	*,int,int,uchar,uint)
		add	sp, 0Ch
		add	word ptr [bp-4], 1Eh
		push	0
		push	0
		push	word ptr [bp-4]
		push	word ptr [bp-2]
		push	ds
		push	offset aPu_jason_l_1 ; "pu_jason.l"
		call	@show_loop$qnuciiucui ;	show_loop(uchar	*,int,int,uchar,uint)
		add	sp, 0Ch

locret_12519::				; CODE XREF: seg0fa9:0839j
		leave
		retf
; ---------------------------------------------------------------------------
		assume es:nothing

; cb_instructions(void)
@cb_instructions$qv:			; DATA XREF: setup_options(void)+112o
		enter	4, 0
		push	cs
		call	near ptr @prepare_new_screen$qv	; prepare_new_screen(void)
		assume es:nothing
		push	seg seg0fa9
		push	offset @instructions_call_up$quc ; instructions_call_up(uchar)
		push	0
		push	ds
		push	offset aT_inst_txt ; "t_inst.txt"
		push	0
		push	0
		call	@text_pager@$bctr$qnucucnquc$v ; text_pager::text_pager(uchar *,uchar,void (*)(uchar))
		assume es:nothing
		add	sp, 0Eh
		mov	[bp-2],	dx
		mov	[bp-4],	ax
		push	3
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	@text_pager@$bdtr$qv ; text_pager::~text_pager(void)
		assume es:nothing
		add	sp, 6
		push	cs
		call	near ptr @restore_old_screen$qv	; restore_old_screen(void)
		assume es:nothing
		cmp	_game_in_progress, 0
		jz	locret_12561
		mov	_resume, 1

locret_12561::				; CODE XREF: seg0fa9:08EAj
		leave
		retf
; ---------------------------------------------------------------------------

; story_call_up(unsigned char)
@story_call_up$quc:			; DATA XREF: seg0fa9:0977o
		enter	6, 0
		push	0
		push	0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@cls$qucuc ; vga_display::cls(uchar,uchar)
		add	sp, 8
		xor	ax, ax
		mov	[bp-4],	ax
		mov	[bp-2],	ax
		les	bx, _display
		assume es:nothing
		mov	byte ptr es:[bx+7], 1
		mov	word ptr [bp-6], 0
		jmp	loc_125CA
; ---------------------------------------------------------------------------

loc_12593::				; CODE XREF: seg0fa9:095Fj
		mov	ax, [bp-6]
		mov	bx, 14h
		cwd
		idiv	bx
		shl	dx, 4
		mov	[bp-2],	dx
		mov	ax, [bp-6]
		mov	bx, 14h
		cwd
		idiv	bx
		imul	ax, 14h
		mov	[bp-4],	ax
		push	0
		push	0
		push	word ptr [bp-4]
		push	word ptr [bp-2]
		push	ds
		push	offset aPat1_l_1 ; "pat1.l"
		call	@show_loop$qnuciiucui ;	show_loop(uchar	*,int,int,uchar,uint)
		add	sp, 0Ch
		inc	word ptr [bp-6]

loc_125CA::				; CODE XREF: seg0fa9:0921j
		cmp	word ptr [bp-6], 0C8h ;	'È'
		jl	loc_12593
		les	bx, _display
		mov	byte ptr es:[bx+7], 0
		leave
		retf
; ---------------------------------------------------------------------------

; cb_story(void)
@cb_story$qv:				; DATA XREF: setup_options(void)+FAo
		enter	4, 0
		push	cs
		call	near ptr @prepare_new_screen$qv	; prepare_new_screen(void)
		push	seg seg0fa9
		push	offset @story_call_up$quc ; story_call_up(uchar)
		push	0
		push	ds
		push	offset aT_story_txt ; "t_story.txt"
		push	0
		push	0
		call	@text_pager@$bctr$qnucucnquc$v ; text_pager::text_pager(uchar *,uchar,void (*)(uchar))
		add	sp, 0Eh
		mov	[bp-2],	dx
		mov	[bp-4],	ax
		push	3
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	@text_pager@$bdtr$qv ; text_pager::~text_pager(void)
		add	sp, 6
		push	cs
		call	near ptr @restore_old_screen$qv	; restore_old_screen(void)
		cmp	_game_in_progress, 0
		jz	locret_12622
		mov	_resume, 1

locret_12622::				; CODE XREF: seg0fa9:09ABj
		leave
		retf
; ---------------------------------------------------------------------------

; cb_high_scores(void)
@cb_high_scores$qv:			; DATA XREF: setup_options(void)+12Ao
		push	bp
		mov	bp, sp
		push	cs
		call	near ptr @prepare_new_screen$qv	; prepare_new_screen(void)
		push	0
		call	@show_high_scores$quc ;	show_high_scores(uchar)
		pop	cx
		push	cs
		call	near ptr @restore_old_screen$qv	; restore_old_screen(void)
		cmp	_game_in_progress, 0
		jz	loc_12643
		mov	_resume, 1

loc_12643::				; CODE XREF: seg0fa9:09CCj
		pop	bp
		retf
; ---------------------------------------------------------------------------

; cb_resume(void)
@cb_resume$qv:				; DATA XREF: setup_options(void)+CAo
		push	bp
		mov	bp, sp
		mov	_resume, 1
		pop	bp
		retf
; ---------------------------------------------------------------------------

; cb_quit(void)
@cb_quit$qv:				; DATA XREF: init_game(void)+35Do
					; setup_options(void)+142o
		enter	4, 0
		mov	al, byte_2D3EF
		mov	ah, 0
		or	ax, ax
		jnz	loc_12671
		push	0
		push	ds
		push	offset aAreYouSureYo_0 ; "Are you sure you want	to\nleave?"
		call	@i_yes_cancel$qnucuc ; i_yes_cancel(uchar *,uchar)
		add	sp, 6
		or	al, al
		jz	loc_12671
		jmp	locret_12750
; ---------------------------------------------------------------------------

loc_12671::				; CODE XREF: seg0fa9:09EAj
					; seg0fa9:09FCj
		push	word_2B8BC
		push	_the_game
		call	@game_manager@reset_sound$qv ; game_manager::reset_sound(void)
		add	sp, 4
		push	3
		push	word ptr _mouse+2
		push	word ptr _mouse
		call	@ms_mouse@$bdtr$qv ; ms_mouse::~ms_mouse(void)
		add	sp, 6
		push	3
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@$bdtr$qv ;	vga_display::~vga_display(void)
		add	sp, 6
		call	_gr_end_kbd_grab
		push	ds
		push	offset aWb	; "wb+"
		push	ds
		push	offset aConfig_rip ; "config.rip"
		call	_fopen
		add	sp, 8
		mov	[bp-2],	dx
		mov	[bp-4],	ax
		or	ax, dx
		jz	loc_12729
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		les	bx, dword ptr _the_game
		mov	al, es:[bx+1Ch]
		mov	ah, 0
		push	ax
		call	_fputc
		add	sp, 6
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		les	bx, dword ptr _the_game
		mov	al, es:[bx+22h]
		mov	ah, 0
		push	ax
		call	_fputc
		add	sp, 6
		les	bx, dword ptr _the_game
		cmp	byte ptr es:[bx+24h], 1
		jnz	loc_1270B
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		push	1
		jmp	loc_12713
; ---------------------------------------------------------------------------

loc_1270B::				; CODE XREF: seg0fa9:0A8Fj
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		push	0

loc_12713::				; CODE XREF: seg0fa9:0A99j
		call	_fputc
		add	sp, 6
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	_fclose
		add	sp, 4

loc_12729::				; CODE XREF: seg0fa9:0A52j
		push	0
		push	ds
		push	offset aT_exit_txt ; "t_exit.txt"
		push	cs
		call	near ptr @print_form$qnucuc ; print_form(uchar *,uchar)
		add	sp, 6
		push	3
		push	word_2B8BC
		push	_the_game
		call	@game_manager@$bdtr$qv ; game_manager::~game_manager(void)
		add	sp, 6
		push	0
		call	_exit
; ---------------------------------------------------------------------------
		db  59h	; Y
; ---------------------------------------------------------------------------

locret_12750::				; CODE XREF: seg0fa9:09FEj
		leave
		retf
; ---------------------------------------------------------------------------

; cb_sound(void)
@cb_sound$qv:				; DATA XREF: setup_options(void)+186o
		enter	4, 0
		push	ds
		push	offset aGameSound ; "Game Sound"
		push	0
		push	0
		call	@text_box@$bctr$qnuc ; text_box::text_box(uchar	*)
		add	sp, 8
		mov	[bp-2],	dx
		mov	[bp-4],	ax
		push	ds
		push	offset aGameSoundsAreC ; "Game sounds are currently "
		push	ds
		push	offset _tmp
		call	_strcpy
		add	sp, 8
		les	bx, dword ptr _the_game
		cmp	byte ptr es:[bx+1Ch], 0
		jz	loc_1278D
		push	ds
		push	offset aOn_	; "ON."
		jmp	loc_12791
; ---------------------------------------------------------------------------

loc_1278D::				; CODE XREF: seg0fa9:0B15j
		push	ds
		push	offset aOff_	; "OFF."

loc_12791::				; CODE XREF: seg0fa9:0B1Bj
		push	ds
		push	offset _tmp
		call	_strcat
		add	sp, 8
		push	ds
		push	offset _tmp
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	@text_box@add_string$qnuc ; text_box::add_string(uchar *)
		add	sp, 8
		push	ds
		push	offset aNewSetting? ; "New setting?"
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	@text_box@add_string$qnuc ; text_box::add_string(uchar *)
		add	sp, 8
		push	0
		push	0
		push	ds
		push	offset aOff	; "Off"
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	@text_box@add_button$qnucnv ; text_box::add_button(uchar *,void	*)
		add	sp, 0Ch
		push	0
		push	0
		push	ds
		push	offset aOn	; "On"
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	@text_box@add_button$qnucnv ; text_box::add_button(uchar *,void	*)
		add	sp, 0Ch
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		les	bx, [bp-4]
		mov	bx, es:[bx]
		call	dword ptr [bx]
		add	sp, 4
		jmp	$+2
; ---------------------------------------------------------------------------

loc_12800::				; CODE XREF: seg0fa9:0B8Ej
					; seg0fa9:0BA6j
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		les	bx, [bp-4]
		mov	bx, es:[bx]
		call	dword ptr [bx+8]
		add	sp, 4
		mov	ah, 0
		or	ax, ax
		jz	loc_12800
		les	bx, [bp-4]
		les	bx, es:[bx+7Ah]
		cmp	word ptr es:[bx+20h], 0
		jz	loc_1283A
		push	0
		push	word_2B8BC
		push	_the_game
		call	@game_manager@turn_sound$quc ; game_manager::turn_sound(uchar)
		add	sp, 6
		jmp	loc_1285A
; ---------------------------------------------------------------------------

loc_1283A::				; CODE XREF: seg0fa9:0BB4j
		les	bx, [bp-4]
		les	bx, es:[bx+7Eh]
		cmp	word ptr es:[bx+20h], 0
		jz	loc_1285A
		push	1
		push	word_2B8BC
		push	_the_game
		call	@game_manager@turn_sound$quc ; game_manager::turn_sound(uchar)
		add	sp, 6

loc_1285A::				; CODE XREF: seg0fa9:0BC8j
					; seg0fa9:0BD6j
		push	3
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	@text_box@$bdtr$qv ; text_box::~text_box(void)
		add	sp, 6
		cmp	_game_in_progress, 0
		jz	locret_12876
		mov	_resume, 1

locret_12876::				; CODE XREF: seg0fa9:0BFFj
		leave
		retf
; ---------------------------------------------------------------------------

; cb_control(void)
@cb_control$qv:				; DATA XREF: setup_options(void)+19Eo
		enter	4, 0
		push	ds
		push	offset aGameControl ; "Game Control"
		push	0
		push	0
		call	@text_box@$bctr$qnuc ; text_box::text_box(uchar	*)
		add	sp, 8
		mov	[bp-2],	dx
		mov	[bp-4],	ax
		push	ds
		push	offset aGameControlIsC ; "Game control is currently set	to:"
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	@text_box@add_string$qnuc ; text_box::add_string(uchar *)
		add	sp, 8
		les	bx, dword ptr _the_game
		mov	al, es:[bx+24h]
		mov	ah, 0
		or	ax, ax
		jz	loc_128B9
		cmp	ax, 1
		jz	loc_128CD
		jmp	loc_128D3
; ---------------------------------------------------------------------------

loc_128B9::				; CODE XREF: seg0fa9:0C40j
		push	ds
		push	offset aKeyboard ; "KEYBOARD"

loc_128BD::				; CODE XREF: seg0fa9:0C61j
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	@text_box@add_string$qnuc ; text_box::add_string(uchar *)
		add	sp, 8
		jmp	loc_128D3
; ---------------------------------------------------------------------------

loc_128CD::				; CODE XREF: seg0fa9:0C45j
		push	ds
		push	offset aJoystick ; "JOYSTICK"
		jmp	loc_128BD
; ---------------------------------------------------------------------------

loc_128D3::				; CODE XREF: seg0fa9:0C47j
					; seg0fa9:0C5Bj
		push	0
		push	0
		push	ds
		push	offset aJoy	; "Joy"
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	@text_box@add_button$qnucnv ; text_box::add_button(uchar *,void	*)
		add	sp, 0Ch
		push	0
		push	0
		push	ds
		push	offset aKey	; "Key"
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	@text_box@add_button$qnucnv ; text_box::add_button(uchar *,void	*)
		add	sp, 0Ch
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		les	bx, [bp-4]
		mov	bx, es:[bx]
		call	dword ptr [bx]
		add	sp, 4
		jmp	$+2
; ---------------------------------------------------------------------------

loc_12912::				; CODE XREF: seg0fa9:0CA0j
					; seg0fa9:0CB8j
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		les	bx, [bp-4]
		mov	bx, es:[bx]
		call	dword ptr [bx+8]
		add	sp, 4
		mov	ah, 0
		or	ax, ax
		jz	loc_12912
		push	3
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	@text_box@$bdtr$qv ; text_box::~text_box(void)
		add	sp, 6
		les	bx, [bp-4]
		les	bx, es:[bx+7Ah]
		cmp	word ptr es:[bx+20h], 0
		jz	loc_129C5
		push	word_2B8BC
		push	_the_game
		call	@game_manager@joy_update$qv ; game_manager::joy_update(void)
		add	sp, 4
		push	0
		push	0
		push	0
		push	0
		push	0
		push	0
		push	ds
		push	offset aCenterJoystick ; "Center joystick and press\nfire button."...
		call	@i_show_box$qnuciit1t1 ; i_show_box(uchar *,int,int,uchar *,uchar *)
		add	sp, 10h
		jmp	loc_12982
; ---------------------------------------------------------------------------

loc_12972::				; CODE XREF: seg0fa9:0D25j
		push	word_2B8BC
		push	_the_game
		call	@game_manager@joy_update$qv ; game_manager::joy_update(void)
		add	sp, 4

loc_12982::				; CODE XREF: seg0fa9:0D00j
		push	0
		call	_joystickbutton
		pop	cx
		or	ax, ax
		jnz	loc_12997
		mov	al, byte_2D3AC
		mov	ah, 0
		or	ax, ax
		jz	loc_12972

loc_12997::				; CODE XREF: seg0fa9:0D1Cj
		push	0
		call	@i_hide_box$quc	; i_hide_box(uchar)
		pop	cx
		cmp	byte_2D3AC, 0
		jz	loc_129BA
		push	0
		push	0
		push	0
		push	ds
		push	offset aJoystickCalibr ; "Joystick calibration aborted."
		call	@i_inform$qnucuct1 ; i_inform(uchar *,uchar,uchar *)
		add	sp, 0Ah
		jmp	loc_129C3
; ---------------------------------------------------------------------------

loc_129BA::				; CODE XREF: seg0fa9:0D34j
		les	bx, dword ptr _the_game
		mov	byte ptr es:[bx+24h], 1

loc_129C3::				; CODE XREF: seg0fa9:0D48j
		jmp	loc_129DC
; ---------------------------------------------------------------------------

loc_129C5::				; CODE XREF: seg0fa9:0CD6j
		les	bx, [bp-4]
		les	bx, es:[bx+7Eh]
		cmp	word ptr es:[bx+20h], 0
		jz	loc_129DC
		les	bx, dword ptr _the_game
		mov	byte ptr es:[bx+24h], 0

loc_129DC::				; CODE XREF: seg0fa9:loc_129C3j
					; seg0fa9:0D61j
		cmp	_game_in_progress, 0
		jz	locret_129E8
		mov	_resume, 1

locret_129E8::				; CODE XREF: seg0fa9:0D71j
		leave
		retf
; ---------------------------------------------------------------------------

; cb_game_speed(void)
@cb_game_speed$qv:			; DATA XREF: setup_options(void)+1B6o
		enter	4, 0
		push	ds
		push	offset aGameSpeed_0 ; "Game Speed"
		push	0
		push	0
		call	@text_box@$bctr$qnuc ; text_box::text_box(uchar	*)
		add	sp, 8
		mov	[bp-2],	dx
		mov	[bp-4],	ax
		push	ds
		push	offset aGameSpeedIsCur ; "Game speed is	currently set to:"
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	@text_box@add_string$qnuc ; text_box::add_string(uchar *)
		add	sp, 8
		les	bx, dword ptr _the_game
		mov	al, es:[bx+22h]
		mov	ah, 0
		cmp	ax, 1
		jz	loc_12A2C
		cmp	ax, 2
		jz	loc_12A40
		jmp	loc_12A46
; ---------------------------------------------------------------------------

loc_12A2C::				; CODE XREF: seg0fa9:0DB3j
		push	ds
		push	offset aFast	; "FAST"

loc_12A30::				; CODE XREF: seg0fa9:0DD4j
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	@text_box@add_string$qnuc ; text_box::add_string(uchar *)
		add	sp, 8
		jmp	loc_12A46
; ---------------------------------------------------------------------------

loc_12A40::				; CODE XREF: seg0fa9:0DB8j
		push	ds
		push	offset aSlow	; "SLOW"
		jmp	loc_12A30
; ---------------------------------------------------------------------------

loc_12A46::				; CODE XREF: seg0fa9:0DBAj
					; seg0fa9:0DCEj
		push	0
		push	0
		push	ds
		push	offset aSlow_0	; "Slow"
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	@text_box@add_button$qnucnv ; text_box::add_button(uchar *,void	*)
		add	sp, 0Ch
		push	0
		push	0
		push	ds
		push	offset aFast_0	; "Fast"
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	@text_box@add_button$qnucnv ; text_box::add_button(uchar *,void	*)
		add	sp, 0Ch
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		les	bx, [bp-4]
		mov	bx, es:[bx]
		call	dword ptr [bx]
		add	sp, 4
		jmp	$+2
; ---------------------------------------------------------------------------

loc_12A85::				; CODE XREF: seg0fa9:0E13j
					; seg0fa9:0E2Bj
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		les	bx, [bp-4]
		mov	bx, es:[bx]
		call	dword ptr [bx+8]
		add	sp, 4
		mov	ah, 0
		or	ax, ax
		jz	loc_12A85
		les	bx, [bp-4]
		les	bx, es:[bx+7Ah]
		cmp	word ptr es:[bx+20h], 0
		jz	loc_12AB6
		les	bx, dword ptr _the_game
		mov	byte ptr es:[bx+22h], 2
		jmp	loc_12ACD
; ---------------------------------------------------------------------------

loc_12AB6::				; CODE XREF: seg0fa9:0E39j
		les	bx, [bp-4]
		les	bx, es:[bx+7Eh]
		cmp	word ptr es:[bx+20h], 0
		jz	loc_12ACD
		les	bx, dword ptr _the_game
		mov	byte ptr es:[bx+22h], 1

loc_12ACD::				; CODE XREF: seg0fa9:0E44j
					; seg0fa9:0E52j
		cmp	_the_map, 0
		jz	loc_12AE6
		les	bx, dword ptr _the_game
		mov	al, es:[bx+22h]
		les	bx, _the_map
		mov	es:[bx+39Ch], al

loc_12AE6::				; CODE XREF: seg0fa9:0E63j
		push	3
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	@text_box@$bdtr$qv ; text_box::~text_box(void)
		add	sp, 6
		cmp	_game_in_progress, 0
		jz	locret_12B02
		mov	_resume, 1

locret_12B02::				; CODE XREF: seg0fa9:0E8Bj
		leave
		retf
; ---------------------------------------------------------------------------

; help_call_up(unsigned	char)
@help_call_up$quc:			; DATA XREF: seg0fa9:0F18o
		enter	6, 0
		push	0
		push	0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@cls$qucuc ; vga_display::cls(uchar,uchar)
		add	sp, 8
		mov	word ptr [bp-2], 0
		jmp	loc_12B74
; ---------------------------------------------------------------------------

loc_12B23::				; CODE XREF: seg0fa9:0F09j
		push	13Eh
		call	@random$qi	; random(int)
		pop	cx
		mov	[bp-4],	ax
		push	0C6h ; 'Æ'
		call	@random$qi	; random(int)
		pop	cx
		mov	[bp-6],	ax
		push	97h ; ''
		push	word ptr [bp-6]
		push	word ptr [bp-4]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@set_pix$qiiuc ; vga_display::set_pix(int,int,uchar)
		add	sp, 0Ah
		push	99h ; ''
		mov	ax, [bp-6]
		inc	ax
		push	ax
		mov	ax, [bp-4]
		inc	ax
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@set_pix$qiiuc ; vga_display::set_pix(int,int,uchar)
		add	sp, 0Ah
		inc	word ptr [bp-2]

loc_12B74::				; CODE XREF: seg0fa9:0EB1j
		cmp	word ptr [bp-2], 7D0h
		jl	loc_12B23
		leave
		retf
; ---------------------------------------------------------------------------

; cb_help(void)
@cb_help$qv:				; DATA XREF: setup_options(void)+56o
		enter	4, 0
		push	cs
		call	near ptr @prepare_new_screen$qv	; prepare_new_screen(void)
		push	seg seg0fa9
		push	offset @help_call_up$quc ; help_call_up(uchar)
		push	0
		push	ds
		push	offset aT_help_txt ; "t_help.txt"
		push	0
		push	0
		call	@text_pager@$bctr$qnucucnquc$v ; text_pager::text_pager(uchar *,uchar,void (*)(uchar))
		add	sp, 0Eh
		mov	[bp-2],	dx
		mov	[bp-4],	ax
		push	3
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	@text_pager@$bdtr$qv ; text_pager::~text_pager(void)
		add	sp, 6
		push	cs
		call	near ptr @restore_old_screen$qv	; restore_old_screen(void)
		cmp	_game_in_progress, 0
		jz	locret_12BC3
		mov	_resume, 1

locret_12BC3::				; CODE XREF: seg0fa9:0F4Cj
		leave
		retf
; ---------------------------------------------------------------------------

; cb_debug_info(void)
@cb_debug_info$qv:			; DATA XREF: setup_options(void)+204o
		push	bp
		mov	bp, sp
		push	0
		push	ds
		push	offset _tmp

loc_12BCE::
		call	_strset
		add	sp, 6
		push	ds
		push	offset aBytesFree ; "Bytes free	 : "
		push	ds
		push	offset _tmp
		call	_strcpy
		add	sp, 8
		push	0Ah
		push	ds
		push	offset _tmp2
		call	_farcoreleft
		push	dx
		push	ax
		call	_ltoa
		add	sp, 0Ah
		push	dx
		push	ax
		push	ds
		push	offset _tmp
		call	_strcat
		add	sp, 8
		push	ds
		push	offset asc_2A262 ; "\n"
		push	ds
		push	offset _tmp
		call	_strcat
		add	sp, 8
		push	ds
		push	offset aMapWidth ; "\nMap width	  : "
		push	ds
		push	offset _tmp
		call	_strcat
		add	sp, 8
		push	0Ah
		push	ds
		push	offset _tmp2
		les	bx, _the_map
		push	word ptr es:[bx+8Eh]
		call	_itoa
		add	sp, 8
		push	dx
		push	ax
		push	ds
		push	offset _tmp
		call	_strcat
		add	sp, 8
		push	ds
		push	offset aMapHeight ; "\nMap height  : "
		push	ds
		push	offset _tmp
		call	_strcat
		add	sp, 8
		push	0Ah
		push	ds
		push	offset _tmp2
		les	bx, _the_map
		push	word ptr es:[bx+90h]
		call	_itoa
		add	sp, 8
		push	dx
		push	ax
		push	ds
		push	offset _tmp
		call	_strcat
		add	sp, 8
		push	ds
		push	offset aCastSize ; "\nCast size	  : "
		push	ds
		push	offset _tmp
		call	_strcat
		add	sp, 8
		push	0Ah
		push	ds
		push	offset _tmp2
		les	bx, _the_cast
		mov	al, es:[bx]
		mov	ah, 0
		push	ax
		call	_itoa
		add	sp, 8
		push	dx
		push	ax
		push	ds
		push	offset _tmp

loc_12CB1::
		call	_strcat
		add	sp, 8
		push	ds
		push	offset aSprtStorage ; "\nSprt storage: "
		push	ds
		push	offset _tmp
		call	_strcat
		add	sp, 8
		push	0Ah
		push	ds
		push	offset _tmp2
		les	bx, dword ptr _the_game
		movzx	eax, word ptr es:[bx+4]
		push	eax
		call	_ultoa
		add	sp, 0Ah
		push	dx
		push	ax
		push	ds
		push	offset _tmp
		call	_strcat
		add	sp, 8
		push	ds
		push	offset aEgoXY	; "\nEgo X,Y	 : "
		push	ds
		push	offset _tmp
		call	_strcat
		add	sp, 8
		push	0Ah
		push	ds
		push	offset _tmp2
		les	bx, _ego
		push	word ptr es:[bx]
		call	_itoa
		add	sp, 8
		push	dx
		push	ax
		push	ds
		push	offset _tmp
		call	_strcat
		add	sp, 8
		push	ds
		push	offset asc_2A2B4 ; " "
		push	ds
		push	offset _tmp
		call	_strcat
		add	sp, 8
		push	0Ah
		push	ds
		push	offset _tmp2
		les	bx, _ego
		push	word ptr es:[bx+2]
		call	_itoa
		add	sp, 8
		push	dx
		push	ax
		push	ds
		push	offset _tmp
		call	_strcat
		add	sp, 8
		push	ds
		push	offset aSystemBench ; "\nSystem	Bench: "
		push	ds
		push	offset _tmp
		call	_strcat
		add	sp, 8
		push	0Ah
		push	ds
		push	offset _tmp2
		mov	al, _system_bench
		mov	ah, 0
		push	ax
		call	_itoa
		add	sp, 8
		push	dx
		push	ax
		push	ds
		push	offset _tmp
		call	_strcat
		add	sp, 8
		push	0
		push	0
		push	1
		push	ds
		push	offset _tmp
		call	@i_inform$qnucuct1 ; i_inform(uchar *,uchar,uchar *)
		add	sp, 0Ah
		pop	bp
		retf
; ---------------------------------------------------------------------------

; cb_run_benchmark(void)
@cb_run_benchmark$qv:			; DATA XREF: setup_options(void)+21Co
		enter	12h, 0
		push	word ptr _the_menu_bar+2
		push	word ptr _the_menu_bar
		les	bx, _the_menu_bar
		mov	bx, es:[bx]
		call	dword ptr [bx+4]
		add	sp, 4
		push	word ptr _mouse+2
		push	word ptr _mouse
		call	@ms_mouse@hide$qv ; ms_mouse::hide(void)
		add	sp, 4
		les	bx, _the_map
		mov	al, es:[bx+39Ch]
		mov	ah, 0
		mov	[bp-6],	ax
		les	bx, _the_map
		mov	byte ptr es:[bx+39Ch], 1
		mov	word ptr [bp-4], 600
		call	_clock
		push	dx
		push	ax
		pop	eax
		mov	[bp-0Ah], eax
		jmp	loc_12DF8
; ---------------------------------------------------------------------------

loc_12DF3::				; CODE XREF: seg0fa9:1190j
		call	@de_doit$qv	; de_doit(void)

loc_12DF8::				; CODE XREF: seg0fa9:1181j
		mov	ax, [bp-4]
		dec	word ptr [bp-4]
		or	ax, ax
		jnz	loc_12DF3
		call	_clock
		push	dx
		push	ax
		pop	eax
		mov	[bp-0Eh], eax
		mov	eax, [bp-0Eh]
		sub	eax, [bp-0Ah]
		mov	[bp-12h], eax
		fild	dword ptr [bp-12h] ; (emulator call)
		fdiv	dbl_2A2C6	; (emulator call)
		fdivr	flt_2A2CE	; (emulator call)
		call	ftol@
		mov	[bp-2],	ax
		les	bx, _the_map
		mov	al, [bp-6]
		mov	es:[bx+39Ch], al
		push	ds
		push	offset aFramesPerSecon ; "Frames per second: "
		push	ds
		push	offset _tmp
		call	_strcpy
		add	sp, 8
		push	0Ah
		push	ds
		push	offset _tmp2
		push	word ptr [bp-2]
		call	_itoa
		add	sp, 8
		push	dx
		push	ax
		push	ds
		push	offset _tmp
		call	_strcat
		add	sp, 8
		push	word ptr _the_menu_bar+2
		push	word ptr _the_menu_bar
		les	bx, _the_menu_bar
		mov	bx, es:[bx]
		call	dword ptr [bx]
		add	sp, 4
		push	word ptr _mouse+2
		push	word ptr _mouse
		call	@ms_mouse@show$qv ; ms_mouse::show(void)
		add	sp, 4
		push	0
		push	0
		push	0
		push	ds
		push	offset _tmp
		call	@i_inform$qnucuct1 ; i_inform(uchar *,uchar,uchar *)
		add	sp, 0Ah
		leave
		retf
; ---------------------------------------------------------------------------

; cb_debug_shot_size(void)
@cb_debug_shot_size$qv:			; DATA XREF: setup_options(void)+234o
		enter	6, 0
		push	ds
		push	offset aShotSize ; "Shot size"
		push	0
		push	0
		call	@text_box@$bctr$qnuc ; text_box::text_box(uchar	*)
		add	sp, 8
		mov	[bp-2],	dx
		mov	[bp-4],	ax
		push	ds
		push	offset aEnterNewShotSi ; "  Enter new shot size:  "
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	@text_box@add_string$qnuc ; text_box::add_string(uchar *)
		add	sp, 8
		push	0
		push	0
		push	ds
		push	offset aSmall	; "Small"
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	@text_box@add_button$qnucnv ; text_box::add_button(uchar *,void	*)
		add	sp, 0Ch
		push	0
		push	0
		push	ds
		push	offset aMedium	; "Medium"
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	@text_box@add_button$qnucnv ; text_box::add_button(uchar *,void	*)
		add	sp, 0Ch
		push	0
		push	0
		push	ds
		push	offset aHuge	; "Huge"
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	@text_box@add_button$qnucnv ; text_box::add_button(uchar *,void	*)
		add	sp, 0Ch
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		les	bx, [bp-4]
		mov	bx, es:[bx]
		call	dword ptr [bx]
		add	sp, 4
		jmp	$+2
; ---------------------------------------------------------------------------

loc_12F25::				; CODE XREF: seg0fa9:12B3j
					; seg0fa9:12CBj
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		les	bx, [bp-4]
		mov	bx, es:[bx]
		call	dword ptr [bx+8]
		add	sp, 4
		mov	ah, 0
		or	ax, ax
		jz	loc_12F25
		mov	byte ptr [bp-5], 0
		jmp	loc_12F66
; ---------------------------------------------------------------------------

loc_12F43::				; CODE XREF: seg0fa9:12FAj
		mov	al, [bp-5]
		mov	ah, 0
		shl	ax, 2
		les	bx, [bp-4]
		add	bx, ax
		les	bx, es:[bx+7Ah]
		cmp	word ptr es:[bx+20h], 0
		jz	loc_12F63
		mov	al, [bp-5]
		mov	_shot_size, al
		jmp	loc_12F6C
; ---------------------------------------------------------------------------

loc_12F63::				; CODE XREF: seg0fa9:12E9j
		inc	byte ptr [bp-5]

loc_12F66::				; CODE XREF: seg0fa9:12D1j
		cmp	byte ptr [bp-5], 3
		jb	loc_12F43

loc_12F6C::				; CODE XREF: seg0fa9:12F1j
		push	3
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	@text_box@$bdtr$qv ; text_box::~text_box(void)
		add	sp, 6
		leave
		retf
; ---------------------------------------------------------------------------

; cb_play_song(void)
@cb_play_song$qv:			; DATA XREF: setup_options(void)+24Co
		push	bp
		mov	bp, sp
		les	bx, dword ptr _the_game
		mov	al, es:[bx+7]
		cbw
		or	ax, ax
		jnz	loc_12FA2
		push	0
		push	0
		push	0
		push	ds
		push	offset aAdlibCardNotPr ; "Adlib	card not present."
		call	@i_inform$qnucuct1 ; i_inform(uchar *,uchar,uchar *)
		add	sp, 0Ah
		jmp	loc_12FD1
; ---------------------------------------------------------------------------

loc_12FA2::				; CODE XREF: seg0fa9:131Cj
		push	ds
		push	offset _tmp
		push	ds
		push	offset a_cmf	; "*.cmf"
		call	@i_load_file$qnuct1 ; i_load_file(uchar	*,uchar	*)
		add	sp, 8
		mov	ax, ds
		mov	dx, offset _tmp
		or	dx, ax
		jnz	loc_12FBD
		jmp	loc_12FD1
; ---------------------------------------------------------------------------

loc_12FBD::				; CODE XREF: seg0fa9:1349j
		push	ds
		push	offset _tmp
		push	word_2B8BC
		push	_the_game
		call	@game_manager@play_song$qnuc ; game_manager::play_song(uchar *)
		add	sp, 8

loc_12FD1::				; CODE XREF: seg0fa9:1330j
					; seg0fa9:134Bj
		pop	bp
		retf
; ---------------------------------------------------------------------------

; cb_stop_song(void)
@cb_stop_song$qv:			; DATA XREF: setup_options(void)+264o
		push	bp
		mov	bp, sp
		les	bx, dword ptr _the_game
		mov	al, es:[bx+7]
		cbw
		or	ax, ax
		jnz	loc_12FF7
		push	0
		push	0
		push	0
		push	ds
		push	offset aAdlibCardNot_0 ; "Adlib	card not present."
		call	@i_inform$qnucuct1 ; i_inform(uchar *,uchar,uchar *)
		add	sp, 0Ah
		jmp	short loc_13007
; ---------------------------------------------------------------------------

loc_12FF7::				; CODE XREF: seg0fa9:1371j
		push	word_2B8BC
		push	_the_game
		call	@game_manager@stop_song$qv ; game_manager::stop_song(void)
		add	sp, 4

loc_13007::				; CODE XREF: seg0fa9:1385j
		pop	bp
		retf
; ---------------------------------------------------------------------------

; cb_god_mode(void)
@cb_god_mode$qv:			; DATA XREF: setup_options(void)+27Co
		push	bp
		mov	bp, sp
		push	0
		push	0
		push	0
		push	ds
		push	offset aGodModeNowOn ; "God mode now on!"
		call	@i_inform$qnucuct1 ; i_inform(uchar *,uchar,uchar *)
		add	sp, 0Ah
		mov	_god_mode, 1
		pop	bp
		retf
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; setup_options(void)
@setup_options$qv proc far		; CODE XREF: init_game(void)+1DBP

var_4		= dword	ptr -4

		enter	4, 0
		les	bx, _the_menu_bar
		assume es:nothing
		mov	byte ptr es:[bx+13h], 1
		push	ds
		push	offset a?
		push	0
		push	0
		call	@pull_down@$bctr$qnuc ;	pull_down::pull_down(uchar *)
		assume es:nothing
		add	sp, 8
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		push	seg seg0fa9
		push	offset @cb_about_de$qv ; __int32
		push	ds
		push	offset AboutRiptide ; "About Riptide..."
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4] ; __int32
		call	@pull_down@add_item$qnucnv ; pull_down::add_item(uchar *,void *)
		add	sp, 0Ch
		push	seg seg0fa9
		push	offset @cb_catalogue$qv	; __int32
		push	ds
		push	offset aCatalog___ ; "Catalog..."
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4] ; __int32
		call	@pull_down@add_item$qnucnv ; pull_down::add_item(uchar *,void *)
		add	sp, 0Ch
		push	seg seg0fa9
		push	offset @cb_help$qv ; __int32
		push	ds
		push	offset aHelp	; "Help"
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4] ; __int32
		call	@pull_down@add_item$qnucnv ; pull_down::add_item(uchar *,void *)
		add	sp, 0Ch
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4]
		push	word ptr _the_menu_bar+2
		push	word ptr _the_menu_bar
		call	@menu_bar@add_item$qn9pull_down	; menu_bar::add_item(pull_down *)
		assume es:nothing
		add	sp, 8
		push	ds
		push	offset aGame_1	; "Game"
		push	0
		push	0
		call	@pull_down@$bctr$qnuc ;	pull_down::pull_down(uchar *)
		assume es:nothing
		add	sp, 8
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		push	seg seg0fa9
		push	offset @cb_start$qv ; __int32
		push	ds
		push	offset aStart_0	; "Start"
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4] ; __int32
		call	@pull_down@add_item$qnucnv ; pull_down::add_item(uchar *,void *)
		add	sp, 0Ch
		push	seg seg0fa9
		push	offset @cb_start_act_2$qv ; __int32
		push	ds
		push	offset aStartActIi ; "Start Act	II"
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4] ; __int32
		call	@pull_down@add_item$qnucnv ; pull_down::add_item(uchar *,void *)
		add	sp, 0Ch
		push	seg seg0fa9
		push	offset @cb_resume$qv ; __int32
		push	ds
		push	offset aResume_1 ; "Resume"
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4] ; __int32
		call	@pull_down@add_item$qnucnv ; pull_down::add_item(uchar *,void *)
		add	sp, 0Ch
		push	seg seg0fa9
		push	offset @cb_password$qv ; __int32
		push	ds
		push	offset aPassword ; "Password"
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4] ; __int32
		call	@pull_down@add_item$qnucnv ; pull_down::add_item(uchar *,void *)
		add	sp, 0Ch
		push	seg seg0fa9
		push	offset @cb_story$qv ; __int32
		push	ds
		push	offset aStory___ ; "Story..."
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4] ; __int32
		call	@pull_down@add_item$qnucnv ; pull_down::add_item(uchar *,void *)
		add	sp, 0Ch
		push	seg seg0fa9
		push	offset @cb_instructions$qv ; __int32
		push	ds
		push	offset aInstructions__ ; "Instructions..."
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4] ; __int32
		call	@pull_down@add_item$qnucnv ; pull_down::add_item(uchar *,void *)
		add	sp, 0Ch
		push	seg seg0fa9
		push	offset @cb_high_scores$qv ; __int32
		push	ds
		push	offset aHighScores___ ;	"High scores..."
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4] ; __int32
		call	@pull_down@add_item$qnucnv ; pull_down::add_item(uchar *,void *)
		add	sp, 0Ch
		push	seg seg0fa9
		push	offset @cb_quit$qv ; __int32
		push	ds
		push	offset aQuit	; "Quit"
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4] ; __int32
		call	@pull_down@add_item$qnucnv ; pull_down::add_item(uchar *,void *)
		add	sp, 0Ch
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4]
		push	word ptr _the_menu_bar+2
		push	word ptr _the_menu_bar
		call	@menu_bar@add_item$qn9pull_down	; menu_bar::add_item(pull_down *)
		assume es:nothing
		add	sp, 8
		push	ds
		push	offset aSetup	; "Setup"
		push	0
		push	0
		call	@pull_down@$bctr$qnuc ;	pull_down::pull_down(uchar *)
		assume es:nothing
		add	sp, 8
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		push	seg seg0fa9
		push	offset @cb_sound$qv ; __int32
		push	ds
		push	offset aSound	; "Sound"
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4] ; __int32
		call	@pull_down@add_item$qnucnv ; pull_down::add_item(uchar *,void *)
		add	sp, 0Ch
		push	seg seg0fa9
		push	offset @cb_control$qv ;	__int32
		push	ds
		push	offset aControl	; "Control"
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4] ; __int32
		call	@pull_down@add_item$qnucnv ; pull_down::add_item(uchar *,void *)
		add	sp, 0Ch
		push	seg seg0fa9
		push	offset @cb_game_speed$qv ; __int32
		push	ds
		push	offset aGameSpeed ; "Game speed"
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4] ; __int32
		call	@pull_down@add_item$qnucnv ; pull_down::add_item(uchar *,void *)
		add	sp, 0Ch
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4]
		push	word ptr _the_menu_bar+2
		push	word ptr _the_menu_bar
		call	@menu_bar@add_item$qn9pull_down	; menu_bar::add_item(pull_down *)
		assume es:nothing
		add	sp, 8
		cmp	_debug_mode, 1
		jz	loc_13210
		jmp	locret_132CC
; ---------------------------------------------------------------------------

loc_13210::				; CODE XREF: setup_options(void)+1E6j
		push	ds
		push	offset aDebug_1	; "Debug"
		push	0
		push	0
		call	@pull_down@$bctr$qnuc ;	pull_down::pull_down(uchar *)
		add	sp, 8
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		push	seg seg0fa9
		push	offset @cb_debug_info$qv ; __int32
		push	ds
		push	offset aInfo	; "Info"
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4] ; __int32
		call	@pull_down@add_item$qnucnv ; pull_down::add_item(uchar *,void *)
		add	sp, 0Ch
		push	seg seg0fa9
		push	offset @cb_run_benchmark$qv ; __int32
		push	ds
		push	offset aRunBenchmark_1 ; "Run benchmark"
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4] ; __int32
		call	@pull_down@add_item$qnucnv ; pull_down::add_item(uchar *,void *)
		add	sp, 0Ch
		push	seg seg0fa9
		push	offset @cb_debug_shot_size$qv ;	__int32
		push	ds
		push	offset aShotSize___ ; "Shot size..."
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4] ; __int32
		call	@pull_down@add_item$qnucnv ; pull_down::add_item(uchar *,void *)
		add	sp, 0Ch
		push	seg seg0fa9
		push	offset @cb_play_song$qv	; __int32
		push	ds
		push	offset aPlaySong___ ; "Play song..."
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4] ; __int32
		call	@pull_down@add_item$qnucnv ; pull_down::add_item(uchar *,void *)
		add	sp, 0Ch
		push	seg seg0fa9
		push	offset @cb_stop_song$qv	; __int32
		push	ds
		push	offset aStopSong ; "Stop song"
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4] ; __int32
		call	@pull_down@add_item$qnucnv ; pull_down::add_item(uchar *,void *)
		add	sp, 0Ch
		push	seg seg0fa9
		push	offset @cb_god_mode$qv ; __int32
		push	ds
		push	offset aGodMode	; "God mode"
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4] ; __int32
		call	@pull_down@add_item$qnucnv ; pull_down::add_item(uchar *,void *)
		add	sp, 0Ch

loc_132B6::
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4]
		push	word ptr _the_menu_bar+2

loc_132C0::
		push	word ptr _the_menu_bar
		call	@menu_bar@add_item$qn9pull_down	; menu_bar::add_item(pull_down *)
		add	sp, 8

locret_132CC::				; CODE XREF: setup_options(void)+1E8j
		leave
		retf
@setup_options$qv endp

seg0fa9		ends

; ---------------------------------------------------------------------------
; ===========================================================================

; Segment type:	Pure code
seg110e		segment	byte public 'CODE' use16
		assume cs:seg110e
		;org 0Eh
		assume es:nothing, ss:nothing, ds:seg2608, fs:nothing, gs:nothing

; gm_open(unsigned char	*)
@gm_open$qnuc:				; DATA XREF: game_manager::game_manager(uchar *)+47o
		push	bp
		mov	bp, sp
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	_openelement
		add	sp, 4
		jmp	$+2
; ---------------------------------------------------------------------------

loc_132E1::				; CODE XREF: seg110e:001Fj
		pop	bp
		retf
; ---------------------------------------------------------------------------
		assume es:nothing

; gm_read(void *, unsigned int)
@gm_read$qnvui:				; DATA XREF: game_manager::game_manager(uchar *)+55o
		push	bp
		mov	bp, sp
		push	word ptr [bp+0Ah]
		push	word ptr [bp+8]

loc_132EC::
		push	word ptr [bp+6]
		call	_elementread
		add	sp, 6
		movzx	eax, ax
		shld	edx, eax, 10h
		jmp	$+2
; ---------------------------------------------------------------------------

loc_13302::				; CODE XREF: seg110e:0040j
		pop	bp
		retf
		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; game_manager::game_manager(unsigned char *)
@game_manager@$bctr$qnuc proc far	; CODE XREF: init_game(void)+4CP

var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= dword	ptr  0Ah

		enter	6, 0
		cmp	[bp+arg_0], 0
		jnz	loc_13325
		push	818		; unsigned int
		call	@$bnew$qui	; operator new(uint)
		assume es:nothing
		pop	cx
		mov	word ptr [bp+arg_0+2], dx
		mov	word ptr [bp+arg_0], ax
		or	ax, dx
		jnz	loc_13325
		jmp	loc_134E8
; ---------------------------------------------------------------------------

loc_13325::				; CODE XREF: game_manager::game_manager(uchar *)+9j
					; game_manager::game_manager(uchar *)+1Cj
		call	_startworx
		cmp	[bp+arg_4], 0
		jz	loc_13376
		push	word ptr [bp+arg_4+2]
		push	word ptr [bp+arg_4]
		call	_startresource
		add	sp, 4

loc_1333F::
		mov	[bp+var_4], ax
		cmp	[bp+var_4], 2
		jle	loc_13364
		push	seg seg110e
		push	offset @gm_open$qnuc ; gm_open(uchar *)
		call	@set_external_open$qnv ; set_external_open(void	*)
		add	sp, 4
		push	seg seg110e
		push	offset @gm_read$qnvui ;	gm_read(void *,uint)
		call	@set_external_read$qnv ; set_external_read(void	*)
		add	sp, 4

loc_13364::				; CODE XREF: game_manager::game_manager(uchar *)+42j
		cmp	[bp+var_4], 0FFFFh
		jnz	loc_13376
		push	ds
		push	offset aRscFile_ ; "RSC	file."
		call	@read_error$qnuc ; read_error(uchar *)
; ---------------------------------------------------------------------------
		add	sp, 4

loc_13376::				; CODE XREF: game_manager::game_manager(uchar *)+2Bj
					; game_manager::game_manager(uchar *)+64j
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	word ptr es:[bx+4], 0
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+1Ch], 1
		push	0
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @game_manager@reset_player$quc	; game_manager::reset_player(uchar)
		add	sp, 6
		push	1
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @game_manager@reset_player$quc	; game_manager::reset_player(uchar)
		add	sp, 6
		les	bx, [bp+arg_0]
		mov	al, 0
		mov	es:[bx+2Eh], al
		les	bx, [bp+arg_0]
		mov	es:[bx+24h], al
		les	bx, [bp+arg_0]
		mov	al, 0
		mov	es:[bx+30h], al
		les	bx, [bp+arg_0]
		mov	es:[bx+26h], al
		les	bx, [bp+arg_0]
		mov	es:[bx+2Fh], al
		les	bx, [bp+arg_0]
		mov	es:[bx+25h], al
		les	bx, [bp+arg_0]
		mov	dword ptr es:[bx], 0
		les	bx, [bp+arg_0]
		mov	al, 0
		mov	es:[bx+6], al
		les	bx, [bp+arg_0]
		mov	es:[bx+7], al
		call	_adlibdetect
		les	bx, [bp+arg_0]
		mov	es:[bx+7], al
		call	_dspreset
		mov	[bp+var_2], ax
		cmp	[bp+var_2], 0FFFFh
		jz	loc_13411
		cmp	_force_pc_sound, 0
		jz	loc_1341B

loc_13411::				; CODE XREF: game_manager::game_manager(uchar *)+104j
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	byte ptr es:[bx+6], 0
		jmp	loc_13423
; ---------------------------------------------------------------------------
		assume es:nothing

loc_1341B::				; CODE XREF: game_manager::game_manager(uchar *)+10Bj
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+6], 1

loc_13423::				; CODE XREF: game_manager::game_manager(uchar *)+115j
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx+6], 0
		jz	loc_13478
		push	1
		call	_vochooksetting
		pop	cx
		push	8
		push	8
		call	_setfmvolume
		add	sp, 4
		push	8
		push	8
		call	_setvocvolume
		add	sp, 4
		mov	[bp+var_6], 0
		jmp	loc_13464
; ---------------------------------------------------------------------------

loc_13454::				; CODE XREF: game_manager::game_manager(uchar *)+164j
		push	6Eh ; 'n'
		push	[bp+var_6]
		call	_setchannelvolume
		add	sp, 4
		inc	[bp+var_6]

loc_13464::				; CODE XREF: game_manager::game_manager(uchar *)+14Ej
		cmp	[bp+var_6], 10h
		jl	loc_13454
		push	ds
		push	offset aSoundblasterDe ; "SoundBlaster detected.\n"
		call	_printf
		add	sp, 4
		jmp	loc_134AD
; ---------------------------------------------------------------------------

loc_13478::				; CODE XREF: game_manager::game_manager(uchar *)+127j
		mov	ah, 2Eh	; '.'
		int	63h		; reserved for user interrupt
		push	8		; interruptno
		call	_getvect
		pop	cx
		mov	word ptr _theirhandler+2, dx
		mov	word ptr _theirhandler,	ax
		push	seg seg110e
		push	offset @pc_sound_doit$qve ; isr
		push	8		; interruptno
		call	_setvect
		add	sp, 6
		mov	dx, 43h	; 'C'
		mov	al, 34h	; '4'
		out	dx, al		; Timer	8253-5 (AT: 8254.2).
		mov	dx, 40h	; '@'
		mov	al, 0C3h ; 'Ã'
		out	dx, al		; Timer	8253-5 (AT: 8254.2).
		mov	dx, 40h	; '@'
		mov	al, 2Ah	; '*'
		out	dx, al		; Timer	8253-5 (AT: 8254.2).

loc_134AD::				; CODE XREF: game_manager::game_manager(uchar *)+172j
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @game_manager@clear_flags$qv ;	game_manager::clear_flags(void)
		add	sp, 4
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+22h], 0
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+38h], 0
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+39h], 0
		les	bx, [bp+arg_0]
		mov	dword ptr es:[bx+1Eh], 0
		mov	_cur_sound, 0

loc_134E8::				; CODE XREF: game_manager::game_manager(uchar *)+1Ej
		mov	dx, word ptr [bp+arg_0+2]
		mov	ax, word ptr [bp+arg_0]
		jmp	$+2
; ---------------------------------------------------------------------------

locret_134F0::				; CODE XREF: game_manager::game_manager(uchar *)+1EAj
		leave
		retf
@game_manager@$bctr$qnuc endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far game_manager::~game_manager(void far *block, int)
@game_manager@$bdtr$qv proc far		; CODE XREF: init_game(void)+B6P
					; seg0fa9:0AD0P

block		= dword	ptr  6
arg_4		= word ptr  0Ah

		push	bp
		mov	bp, sp
		cmp	[bp+block], 0
		jz	loc_13550
		les	bx, [bp+block]
		assume es:nothing
		cmp	byte ptr es:[bx+6], 0
		jz	loc_1350D
		call	_dspclose
		jmp	loc_13531
; ---------------------------------------------------------------------------

loc_1350D::				; CODE XREF: game_manager::~game_manager(void)+12j
		mov	dx, 43h	; 'C'
		mov	al, 34h	; '4'
		out	dx, al		; Timer	8253-5 (AT: 8254.2).
		mov	dx, 40h	; '@'
		mov	al, 0
		out	dx, al		; Timer	8253-5 (AT: 8254.2).
		mov	dx, 40h	; '@'
		mov	al, 0
		out	dx, al		; Timer	8253-5 (AT: 8254.2).
		push	word ptr _theirhandler+2
		push	word ptr _theirhandler ; isr
		push	8		; interruptno
		call	_setvect
		add	sp, 6

loc_13531::				; CODE XREF: game_manager::~game_manager(void)+19j
		call	_closeworx
		call	_nosound
		test	[bp+arg_4], 1
		jz	loc_13550
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4

loc_13550::				; CODE XREF: game_manager::~game_manager(void)+8j
					; game_manager::~game_manager(void)+4Ej
		pop	bp
		retf
@game_manager@$bdtr$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; game_manager::doit(void)
@game_manager@doit$qv proc far		; CODE XREF: de_doit(void)+21CP
					; post_message(uchar)+84P ...

var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6

		enter	4, 0
		cmp	_cur_sound, 0
		jz	loc_1357A
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx+6], 0
		jz	loc_1357A
		call	_vocplaying
		or	ax, ax
		jnz	loc_1357A
		mov	_cur_sound, 0

loc_1357A::				; CODE XREF: game_manager::doit(void)+Aj
					; game_manager::doit(void)+14j	...
		push	0
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @game_manager@reset_player$quc	; game_manager::reset_player(uchar)
		add	sp, 6
		cmp	byte_2D3F8, 0
		jz	loc_13599
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+2Ah], 1

loc_13599::				; CODE XREF: game_manager::doit(void)+3Dj
		cmp	byte_2D3F6, 0
		jz	loc_135A8
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+29h], 1

loc_135A8::				; CODE XREF: game_manager::doit(void)+4Cj
		cmp	byte_2D3FB, 0
		jz	loc_135B7
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+28h], 1

loc_135B7::				; CODE XREF: game_manager::doit(void)+5Bj
		cmp	byte_2D3F3, 0
		jz	loc_135C6
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+27h], 1

loc_135C6::				; CODE XREF: game_manager::doit(void)+6Aj
		cmp	byte_2D3E4, 0
		jz	loc_135D5
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+2Bh], 1

loc_135D5::				; CODE XREF: game_manager::doit(void)+79j
		cmp	byte_2D3E3, 0
		jnz	loc_135E3
		cmp	byte_2D3C8, 0
		jz	loc_135EB

loc_135E3::				; CODE XREF: game_manager::doit(void)+88j
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+2Ch], 1

loc_135EB::				; CODE XREF: game_manager::doit(void)+8Fj
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx+24h], 1
		jnz	loc_13670
		cli
		call	_joystickupdate
		call	_joystickx
		mov	[bp+var_2], ax
		call	_joysticky
		mov	[bp+var_4], ax
		sti
		cmp	[bp+var_2], 1Dh
		jg	loc_1361C
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	byte ptr es:[bx+29h], 1
		jmp	loc_1362A
; ---------------------------------------------------------------------------

loc_1361C::				; CODE XREF: game_manager::doit(void)+BEj
		cmp	[bp+var_2], 63h	; 'c'
		jl	loc_1362A
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+2Ah], 1

loc_1362A::				; CODE XREF: game_manager::doit(void)+C8j
					; game_manager::doit(void)+CEj
		cmp	[bp+var_4], 54h	; 'T'
		jl	loc_1363A
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+28h], 1
		jmp	loc_13648
; ---------------------------------------------------------------------------

loc_1363A::				; CODE XREF: game_manager::doit(void)+DCj
		cmp	[bp+var_4], 2Ch	; ','
		jg	loc_13648
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+27h], 1

loc_13648::				; CODE XREF: game_manager::doit(void)+E6j
					; game_manager::doit(void)+ECj
		push	0
		call	_joystickbutton
		pop	cx
		or	ax, ax
		jz	loc_1365C
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+2Bh], 1

loc_1365C::				; CODE XREF: game_manager::doit(void)+100j
		push	1
		call	_joystickbutton
		pop	cx
		or	ax, ax
		jz	loc_13670
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+2Ch], 1
		assume es:nothing

loc_13670::				; CODE XREF: game_manager::doit(void)+A1j
					; game_manager::doit(void)+114j
		les	bx, [bp+arg_0]
		cmp	dword ptr es:[bx], 0
		jz	locret_13690
		push	1
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @game_manager@reset_player$quc	; game_manager::reset_player(uchar)
		add	sp, 6
		les	bx, [bp+arg_0]
		assume es:nothing
		call	dword ptr es:[bx]
		assume es:nothing

locret_13690::				; CODE XREF: game_manager::doit(void)+126j
		leave
		retf
@game_manager@doit$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; void __interrupt pc_sound_doit()
@pc_sound_doit$qve proc	far		; DATA XREF: game_manager::game_manager(uchar *)+18Ao
		push	ax
		push	bx
		push	cx
		push	dx
		push	es
		push	ds
		push	si
		push	di
		push	bp
		mov	bp, seg	seg2608
		mov	ds, bp
		mov	bp, sp
		mov	al, ticks18_2
		inc	al
		mov	ticks18_2, al
		cmp	al, 6
		jb	loc_136B8
		mov	ticks18_2, 0
		pushf
		call	_theirhandler

loc_136B8::				; CODE XREF: @pc_sound_doit$qve+1Aj
		les	bx, dword ptr _the_game
		assume es:nothing
		cmp	byte ptr es:[bx+1Ch], 0
		jnz	loc_136C5
		jmp	loc_13730
; ---------------------------------------------------------------------------

loc_136C5::				; CODE XREF: @pc_sound_doit$qve+2Fj
		cmp	_cur_sound, 0
		jnz	loc_136CF
		jmp	loc_13730
; ---------------------------------------------------------------------------

loc_136CF::				; CODE XREF: @pc_sound_doit$qve+39j
		les	bx, _cur_sound
		cmp	dword ptr es:[bx+6], 0
		jnz	loc_136DD
		jmp	loc_13730
; ---------------------------------------------------------------------------

loc_136DD::				; CODE XREF: @pc_sound_doit$qve+47j
		les	bx, _cur_sound
		mov	al, es:[bx+5]
		mov	ah, 0
		les	bx, _cur_sound
		les	bx, es:[bx+6]
		cmp	ax, es:[bx+8]
		jz	loc_13722
		les	bx, _cur_sound
		mov	al, es:[bx+5]
		mov	ah, 0
		shl	ax, 1
		les	bx, _cur_sound
		les	bx, es:[bx+6]
		les	bx, es:[bx+4]
		add	bx, ax
		push	word ptr es:[bx] ; frequency
		call	_sound
		pop	cx
		les	bx, _cur_sound
		inc	byte ptr es:[bx+5]
		jmp	loc_13730
; ---------------------------------------------------------------------------

loc_13722::				; CODE XREF: @pc_sound_doit$qve+61j
		mov	_cur_sound, 0
		call	_nosound

loc_13730::				; CODE XREF: @pc_sound_doit$qve+31j
					; @pc_sound_doit$qve+3Bj ...
		mov	dx, 20h	; ' '
		mov	al, 20h	; ' '
		out	dx, al		; Interrupt controller,	8259A.
		pop	bp
		pop	di
		pop	si
		pop	ds
		pop	es
		pop	dx
		pop	cx
		pop	bx
		pop	ax
		iret
@pc_sound_doit$qve endp	; sp-analysis failed

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; game_manager::clear_flags(void)
@game_manager@clear_flags$qv proc far	; CODE XREF: play_game(uchar)+D8P
					; game_manager::game_manager(uchar *)+1B1p

var_2		= word ptr -2
arg_0		= dword	ptr  6

		enter	2, 0
		mov	[bp+var_2], 0
		jmp	loc_13759
; ---------------------------------------------------------------------------

loc_1374B::				; CODE XREF: game_manager::clear_flags(void)+1Dj
		les	bx, [bp+arg_0]
		add	bx, [bp+var_2]
		mov	byte ptr es:[bx+8], 0
		inc	[bp+var_2]

loc_13759::				; CODE XREF: game_manager::clear_flags(void)+9j
		cmp	[bp+var_2], 14h
		jl	loc_1374B
		leave
		retf
@game_manager@clear_flags$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; game_manager::joy_update(void)
@game_manager@joy_update$qv proc far	; CODE XREF: init_game(void)+344P
					; seg0fa9:0CE0P ...
		push	bp
		mov	bp, sp
		call	_joystickupdate
		pop	bp
		retf
@game_manager@joy_update$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; game_manager::reset_player(unsigned char)
@game_manager@reset_player$quc proc far	; CODE XREF: start_room(uchar *)+41P
					; show_stats(void)+38P	...

arg_0		= dword	ptr  6
arg_4		= byte ptr  0Ah

		push	bp
		mov	bp, sp
		mov	al, [bp+arg_4]
		mov	ah, 0
		imul	ax, 0Ah
		les	bx, [bp+arg_0]
		add	bx, ax
		mov	al, 0
		mov	es:[bx+2Ch], al
		mov	dl, [bp+arg_4]
		mov	dh, 0
		imul	dx, 0Ah
		les	bx, [bp+arg_0]
		add	bx, dx
		mov	es:[bx+2Bh], al
		mov	dl, [bp+arg_4]
		mov	dh, 0
		imul	dx, 0Ah
		les	bx, [bp+arg_0]
		add	bx, dx
		mov	es:[bx+28h], al
		mov	dl, [bp+arg_4]
		mov	dh, 0
		imul	dx, 0Ah
		les	bx, [bp+arg_0]
		add	bx, dx
		mov	es:[bx+27h], al
		mov	dl, [bp+arg_4]
		mov	dh, 0
		imul	dx, 0Ah
		les	bx, [bp+arg_0]
		add	bx, dx
		mov	es:[bx+2Ah], al
		mov	dl, [bp+arg_4]
		mov	dh, 0
		imul	dx, 0Ah
		les	bx, [bp+arg_0]
		add	bx, dx
		mov	es:[bx+29h], al
		pop	bp
		retf
@game_manager@reset_player$quc endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; game_manager::turn_sound(unsigned char)
@game_manager@turn_sound$quc proc far	; CODE XREF: seg0fa9:0BC0P
					; seg0fa9:0BE2P

arg_0		= dword	ptr  6
arg_4		= byte ptr  0Ah

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	al, es:[bx+1Ch]
		cmp	al, [bp+arg_4]
		jnz	loc_137E9
		jmp	loc_13837
; ---------------------------------------------------------------------------

loc_137E9::				; CODE XREF: game_manager::turn_sound(uchar)+Dj
		les	bx, [bp+arg_0]
		mov	al, [bp+arg_4]
		mov	es:[bx+1Ch], al
		cmp	[bp+arg_4], 1
		jnz	loc_13819
		les	bx, [bp+arg_0]
		cmp	dword ptr es:[bx+1Eh], 0
		jz	loc_13817
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+20h]
		push	word ptr es:[bx+1Eh]
		call	_playcmfblock
		add	sp, 4

loc_13817::				; CODE XREF: game_manager::turn_sound(uchar)+2Aj
		jmp	loc_13837
; ---------------------------------------------------------------------------

loc_13819::				; CODE XREF: game_manager::turn_sound(uchar)+1Fj
		les	bx, [bp+arg_0]
		cmp	dword ptr es:[bx+1Eh], 0
		jz	loc_13829
		call	_stopsequence

loc_13829::				; CODE XREF: game_manager::turn_sound(uchar)+4Aj
		call	_vocplaying
		or	ax, ax
		jz	loc_13837
		call	_stopvoc

loc_13837::				; CODE XREF: game_manager::turn_sound(uchar)+Fj
					; game_manager::turn_sound(uchar):loc_13817j ...
		pop	bp
		retf
@game_manager@turn_sound$quc endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far game_manager::remove_sound(__int32,	char *s1)
@game_manager@remove_sound$qnuc	proc far ; CODE	XREF: play_game(uchar)+449P
					; play_game(uchar)+5D9P ...

var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
s1		= dword	ptr  0Ah

		enter	4, 0
		push	si
		call	_vocplaying
		or	ax, ax
		jz	loc_1384C
		call	_stopvoc

loc_1384C::				; CODE XREF: game_manager::remove_sound(uchar *)+Cj
		mov	[bp+var_2], 0
		jmp	loc_13881
; ---------------------------------------------------------------------------

loc_13853::				; CODE XREF: game_manager::remove_sound(uchar *)+54j
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+292h]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; s2
		push	word ptr [bp+s1+2]
		push	word ptr [bp+s1] ; s1
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jnz	loc_1387E
		jmp	loc_1388F
; ---------------------------------------------------------------------------

loc_1387E::				; CODE XREF: game_manager::remove_sound(uchar *)+41j
		inc	[bp+var_2]

loc_13881::				; CODE XREF: game_manager::remove_sound(uchar *)+18j
		les	bx, [bp+arg_0]
		mov	al, es:[bx+39h]
		mov	ah, 0
		cmp	ax, [bp+var_2]
		jg	loc_13853

loc_1388F::				; CODE XREF: game_manager::remove_sound(uchar *)+43j
		les	bx, [bp+arg_0]
		mov	al, es:[bx+39h]
		mov	ah, 0
		cmp	ax, [bp+var_2]
		jnz	loc_138A0
		jmp	loc_139FE
; ---------------------------------------------------------------------------

loc_138A0::				; CODE XREF: game_manager::remove_sound(uchar *)+62j
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx+6], 0
		jz	loc_13914
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+292h]
		les	bx, es:[bx+0Ah]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; block
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+292h]
		les	bx, es:[bx+0Ah]
		push	word ptr es:[bx+6]
		push	word ptr es:[bx+4] ; block
		call	_farfree
		add	sp, 4
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+292h]
		push	word ptr es:[bx+0Ch]
		push	word ptr es:[bx+0Ah] ; block
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4
		jmp	loc_13995
; ---------------------------------------------------------------------------

loc_13914::				; CODE XREF: game_manager::remove_sound(uchar *)+6Fj
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+292h]
		mov	ax, es:[bx+6]
		or	ax, es:[bx+8]
		jz	loc_13995
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+292h]
		les	bx, es:[bx+6]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; block
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+292h]
		les	bx, es:[bx+6]
		push	word ptr es:[bx+6]
		push	word ptr es:[bx+4] ; block
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+292h]
		push	word ptr es:[bx+8]
		push	word ptr es:[bx+6] ; block
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4

loc_13995::				; CODE XREF: game_manager::remove_sound(uchar *)+D8j
					; game_manager::remove_sound(uchar *)+F3j
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		push	word ptr es:[bx+294h]
		push	word ptr es:[bx+292h] ;	block
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4
		mov	ax, [bp+var_2]
		inc	ax
		mov	[bp+var_4], ax
		jmp	loc_139E9
; ---------------------------------------------------------------------------

loc_139BB::				; CODE XREF: game_manager::remove_sound(uchar *)+1BCj
		mov	ax, [bp+var_4]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		mov	ax, es:[bx+294h]
		mov	dx, es:[bx+292h]
		mov	bx, [bp+var_4]
		dec	bx
		shl	bx, 2
		les	si, [bp+arg_0]
		add	si, bx
		mov	es:[si+294h], ax
		mov	es:[si+292h], dx
		inc	[bp+var_4]

loc_139E9::				; CODE XREF: game_manager::remove_sound(uchar *)+180j
		les	bx, [bp+arg_0]
		mov	al, es:[bx+39h]
		mov	ah, 0
		cmp	ax, [bp+var_4]
		jg	loc_139BB
		les	bx, [bp+arg_0]
		dec	byte ptr es:[bx+39h]

loc_139FE::				; CODE XREF: game_manager::remove_sound(uchar *)+64j
		pop	si
		leave
		retf
@game_manager@remove_sound$qnuc	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far game_manager::define_sound(int, int, char *src)
@game_manager@define_sound$qnucuc proc far ; CODE XREF:	play_game(uchar)+19FP
					; load_resources(void)+921P ...

var_4		= dword	ptr -4
arg_0		= word ptr  6
src		= dword	ptr  0Ah

		enter	4, 0
		les	bx, dword ptr [bp+arg_0]
		cmp	byte ptr es:[bx+39h], 27h ; '''
		jnz	loc_13A1F
		push	0
		push	0
		push	ds
		push	offset aSoundStorageFu ; "Sound	storage	full."
		call	@terminate$qnuct1 ; terminate(uchar *,uchar *)
; ---------------------------------------------------------------------------
		add	sp, 8

loc_13A1F::				; CODE XREF: game_manager::define_sound(uchar *,uchar)+Cj
		push	0Eh		; unsigned int
		call	@$bnew$qui	; operator new(uint)
		assume es:nothing
		pop	cx
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		les	bx, [bp+var_4]
		assume es:nothing
		mov	eax, [bp+src]
		mov	es:[bx], eax
		les	bx, dword ptr [bp+arg_0]
		assume es:nothing
		cmp	byte ptr es:[bx+6], 0
		jz	loc_13A63
		push	word ptr [bp+src+2]
		push	word ptr [bp+src] ; src
		push	word ptr [bp+8]	; int
		push	[bp+arg_0]	; int
		nop
		push	cs
		call	near ptr @game_manager@load_voc$qnuc ; game_manager::load_voc(uchar *)
		assume es:nothing
		add	sp, 8
		les	bx, [bp+var_4]
		assume es:nothing
		mov	es:[bx+0Ch], dx
		mov	es:[bx+0Ah], ax
		jmp	loc_13A82
; ---------------------------------------------------------------------------

loc_13A63::				; CODE XREF: game_manager::define_sound(uchar *,uchar)+3Fj
		push	word ptr [bp+src+2]
		push	word ptr [bp+src] ; src
		push	word ptr [bp+8]	; int
		push	[bp+arg_0]	; int
		nop
		push	cs
		call	near ptr @game_manager@load_pcs$qnuc ; game_manager::load_pcs(uchar *)
		add	sp, 8
		les	bx, [bp+var_4]
		assume es:nothing
		mov	es:[bx+8], dx
		mov	es:[bx+6], ax
		assume es:nothing

loc_13A82::				; CODE XREF: game_manager::define_sound(uchar *,uchar)+60j
		les	bx, dword ptr [bp+arg_0]
		assume es:nothing
		mov	al, es:[bx+39h]
		inc	byte ptr es:[bx+39h]
		mov	ah, 0
		shl	ax, 2
		les	bx, dword ptr [bp+arg_0]
		add	bx, ax
		mov	ax, word ptr [bp+var_4+2]
		mov	dx, word ptr [bp+var_4]
		mov	es:[bx+294h], ax
		mov	es:[bx+292h], dx
		leave
		retf
@game_manager@define_sound$qnucuc endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far game_manager::get_sound(__int32, char *s2)
@game_manager@get_sound$qnuc proc far	; CODE XREF: game_manager::play_sound(uchar *,uchar)+19p
					; game_manager::play_sound(uchar *,uchar)+9Bp

var_2		= word ptr -2
arg_0		= dword	ptr  6
s2		= dword	ptr  0Ah

		enter	2, 0
		mov	[bp+var_2], 0
		jmp	loc_13AF7
; ---------------------------------------------------------------------------
		assume es:nothing

loc_13AB4::				; CODE XREF: game_manager::get_sound(uchar *)+5Aj
		push	word ptr [bp+s2+2]
		push	word ptr [bp+s2] ; s2
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+292h]
		assume es:nothing
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; s1
		call	_strcmp
		assume es:seg2608
		add	sp, 8
		or	ax, ax
		jnz	loc_13AF4
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		mov	dx, es:[bx+294h]
		mov	ax, es:[bx+292h]

loc_13AF2::				; CODE XREF: game_manager::get_sound(uchar *)+72j
		jmp	locret_13B1D
; ---------------------------------------------------------------------------
		assume es:seg2608

loc_13AF4::				; CODE XREF: game_manager::get_sound(uchar *)+32j
		inc	[bp+var_2]
		assume es:nothing

loc_13AF7::				; CODE XREF: game_manager::get_sound(uchar *)+9j
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	al, es:[bx+39h]
		mov	ah, 0
		cmp	ax, [bp+var_2]
		jg	loc_13AB4
		push	word ptr [bp+s2+2]
		push	word ptr [bp+s2]
		push	ds
		push	offset aSndNotInStorag ; "Snd not in storage."
		call	@terminate$qnuct1 ; terminate(uchar *,uchar *)
; ---------------------------------------------------------------------------
		add	sp, 8
		xor	dx, dx
		xor	ax, ax
		jmp	loc_13AF2
; ---------------------------------------------------------------------------

locret_13B1D::				; CODE XREF: game_manager::get_sound(uchar *):loc_13AF2j
		leave
		retf
@game_manager@get_sound$qnuc endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far game_manager::play_sound_file(__int32, char	*src)
@game_manager@play_sound_file$qnuc proc	far ; CODE XREF: end_game(void)+8FP
					; kill_ego(int,int)+241P ...

arg_0		= dword	ptr  6
src		= dword	ptr  0Ah

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx+1Ch], 0
		jnz	loc_13B2E
		jmp	loc_13B5F
; ---------------------------------------------------------------------------

loc_13B2E::				; CODE XREF: game_manager::play_sound_file(uchar *)+Bj
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx+6], 0
		jz	loc_13B4B
		push	word ptr [bp+src+2]
		push	word ptr [bp+src] ; src
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0] ; __int32
		nop
		push	cs
		call	near ptr @game_manager@play_voc_file$qnuc ; game_manager::play_voc_file(uchar *)
		assume es:seg2608
		jmp	loc_13B5C
; ---------------------------------------------------------------------------

loc_13B4B::				; CODE XREF: game_manager::play_sound_file(uchar *)+17j
		push	word ptr [bp+src+2]
		push	word ptr [bp+src] ; src
		push	word ptr [bp+arg_0+2] ;	int
		push	word ptr [bp+arg_0] ; int
		nop
		push	cs
		call	near ptr @game_manager@play_pcs_file$qnuc ; game_manager::play_pcs_file(uchar *)

loc_13B5C::				; CODE XREF: game_manager::play_sound_file(uchar *)+2Aj
		add	sp, 8

loc_13B5F::				; CODE XREF: game_manager::play_sound_file(uchar *)+Dj
		pop	bp
		retf
@game_manager@play_sound_file$qnuc endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far game_manager::play_sound(__int32, char *s2,	char)
@game_manager@play_sound$qnucuc	proc far ; CODE	XREF: de_doit(void)+38BP
					; de_doit(void)+676P ...

var_4		= dword	ptr -4
arg_0		= dword	ptr  6
s2		= dword	ptr  0Ah
arg_8		= byte ptr  0Eh

		enter	4, 0
		cmp	_cur_sound, 0
		jnz	loc_13BE2
		push	word ptr [bp+s2+2]
		push	word ptr [bp+s2] ; s2
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0] ; __int32
		push	cs
		call	near ptr @game_manager@get_sound$qnuc ;	game_manager::get_sound(uchar *)
		assume es:nothing
		add	sp, 8
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx+6], 0
		jnz	loc_13B9B
		les	bx, [bp+var_4]
		assume es:nothing
		cmp	dword ptr es:[bx+6], 0
		jz	loc_13BDF
		assume es:nothing

loc_13B9B::				; CODE XREF: game_manager::play_sound(uchar *,uchar)+2Dj
		mov	eax, [bp+var_4]
		mov	_cur_sound, eax
		les	bx, _cur_sound
		assume es:nothing
		mov	al, [bp+arg_8]
		mov	es:[bx+4], al
		les	bx, _cur_sound
		mov	byte ptr es:[bx+5], 0
		les	bx, [bp+arg_0]
		assume es:nothing
		cmp	byte ptr es:[bx+6], 0
		jz	loc_13BDF
		les	bx, _cur_sound
		assume es:nothing
		les	bx, es:[bx+0Ah]
		assume es:nothing
		push	word ptr es:[bx+6]
		push	word ptr es:[bx+4]
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @game_manager@play_voc$qnuc ; game_manager::play_voc(uchar *)
		assume es:nothing
		add	sp, 8

loc_13BDF::				; CODE XREF: game_manager::play_sound(uchar *,uchar)+38j
					; game_manager::play_sound(uchar *,uchar)+5Ej
		jmp	locret_13C6C
; ---------------------------------------------------------------------------
		assume es:nothing

loc_13BE2::				; CODE XREF: game_manager::play_sound(uchar *,uchar)+Aj
		les	bx, _cur_sound
		assume es:nothing
		mov	al, es:[bx+4]
		cmp	al, [bp+arg_8]
		ja	locret_13C6C
		push	word ptr [bp+s2+2]
		push	word ptr [bp+s2] ; s2
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0] ; __int32
		push	cs
		call	near ptr @game_manager@get_sound$qnuc ;	game_manager::get_sound(uchar *)
		assume es:nothing
		add	sp, 8
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx+6], 0
		jz	loc_13C45
		mov	eax, [bp+var_4]
		mov	_cur_sound, eax
		les	bx, _cur_sound
		assume es:nothing
		mov	al, [bp+arg_8]
		mov	es:[bx+4], al
		les	bx, _cur_sound
		les	bx, es:[bx+0Ah]
		assume es:nothing
		push	word ptr es:[bx+6]
		push	word ptr es:[bx+4]
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @game_manager@play_voc$qnuc ; game_manager::play_voc(uchar *)
		assume es:nothing
		add	sp, 8
		jmp	locret_13C6C
; ---------------------------------------------------------------------------

loc_13C45::				; CODE XREF: game_manager::play_sound(uchar *,uchar)+AFj
		les	bx, [bp+var_4]
		assume es:nothing
		cmp	dword ptr es:[bx+6], 0
		jz	locret_13C6C
		mov	eax, [bp+var_4]
		mov	_cur_sound, eax
		les	bx, _cur_sound
		mov	al, [bp+arg_8]
		mov	es:[bx+4], al
		les	bx, _cur_sound
		mov	byte ptr es:[bx+5], 0
		assume es:nothing

locret_13C6C::				; CODE XREF: game_manager::play_sound(uchar *,uchar):loc_13BDFj
					; game_manager::play_sound(uchar *,uchar)+8Cj ...
		leave
		retf
@game_manager@play_sound$qnucuc	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; game_manager::reset_sound(void)
@game_manager@reset_sound$qv proc far	; CODE XREF: end_game(void)+CP
					; kill_ego(int,int)+217P ...

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx+6], 0
		jz	loc_13C97
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @game_manager@stop_song$qv ; game_manager::stop_song(void)
		add	sp, 4
		call	_vocplaying
		or	ax, ax
		jz	loc_13C97
		call	_stopvoc

loc_13C97::				; CODE XREF: game_manager::reset_sound(void)+Bj
					; game_manager::reset_sound(void)+22j
		mov	_cur_sound, 0
		call	_nosound
		pop	bp
		retf
@game_manager@reset_sound$qv endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; game_manager::play_song(unsigned char	*)
@game_manager@play_song$qnuc proc far	; CODE XREF: play_game(uchar)+114P
					; start_title_loop(void)+10P ...

arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		assume es:nothing
		cmp	byte ptr es:[bx+6], 0
		jnz	loc_13CB6
		jmp	loc_13D17
; ---------------------------------------------------------------------------

loc_13CB6::				; CODE XREF: game_manager::play_song(uchar *)+Bj
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @game_manager@stop_song$qv ; game_manager::stop_song(void)
		add	sp, 4
		push	[bp+arg_6]
		push	[bp+arg_4]
		call	_getsequence
		assume es:nothing
		add	sp, 4
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	es:[bx+20h], dx
		mov	es:[bx+1Eh], ax
		les	bx, [bp+arg_0]
		cmp	dword ptr es:[bx+1Eh], 0
		jnz	loc_13CFA
		push	[bp+arg_6]
		push	[bp+arg_4]
		push	ds
		push	offset aCanTFindSong ; "Can't find song "
		call	@terminate$qnuct1 ; terminate(uchar *,uchar *)
; ---------------------------------------------------------------------------
		add	sp, 8

loc_13CFA::				; CODE XREF: game_manager::play_song(uchar *)+3Fj
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx+1Ch], 0
		jz	loc_13D17
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+20h]
		push	word ptr es:[bx+1Eh]
		call	_playcmfblock
		add	sp, 4

loc_13D17::				; CODE XREF: game_manager::play_song(uchar *)+Dj
					; game_manager::play_song(uchar	*)+5Bj
		pop	bp
		retf
@game_manager@play_song$qnuc endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; game_manager::stop_song(void)
@game_manager@stop_song$qv proc	far	; CODE XREF: seg0fa9:138FP
					; game_manager::reset_sound(void)+15p ...

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx+6], 0
		jnz	loc_13D28
		jmp	loc_13D57
; ---------------------------------------------------------------------------

loc_13D28::				; CODE XREF: game_manager::stop_song(void)+Bj
		les	bx, [bp+arg_0]

loc_13D2B::
		cmp	dword ptr es:[bx+1Eh], 0
		jz	loc_13D57
		call	_stopsequence
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+20h]
		push	word ptr es:[bx+1Eh] ; block
		call	_farfree
		assume es:nothing
		add	sp, 4
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	dword ptr es:[bx+1Eh], 0

loc_13D57::				; CODE XREF: game_manager::stop_song(void)+Dj
					; game_manager::stop_song(void)+18j
		pop	bp
		retf
@game_manager@stop_song$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; game_manager::pause_song(void)
@game_manager@pause_song$qv proc far	; CODE XREF: activate_menu_bar(void)+56P

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		assume es:nothing
		cmp	byte ptr es:[bx+6], 0
		jnz	loc_13D68
		jmp	loc_13D78
; ---------------------------------------------------------------------------

loc_13D68::				; CODE XREF: game_manager::pause_song(void)+Bj
		les	bx, [bp+arg_0]
		cmp	dword ptr es:[bx+1Eh], 0
		jz	loc_13D78
		call	_stopsequence

loc_13D78::				; CODE XREF: game_manager::pause_song(void)+Dj
					; game_manager::pause_song(void)+18j
		pop	bp
		retf
@game_manager@pause_song$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; game_manager::continue_song(void)
@game_manager@continue_song$qv proc far	; CODE XREF: activate_menu_bar(void)+176P

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx+6], 0
		jnz	loc_13D89
		jmp	loc_13D99
; ---------------------------------------------------------------------------

loc_13D89::				; CODE XREF: game_manager::continue_song(void)+Bj
		les	bx, [bp+arg_0]
		cmp	dword ptr es:[bx+1Eh], 0
		jz	loc_13D99
		call	_continuesequence

loc_13D99::				; CODE XREF: game_manager::continue_song(void)+Dj
					; game_manager::continue_song(void)+18j
		pop	bp
		retf
@game_manager@continue_song$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; game_manager::play_voc(unsigned char *)
@game_manager@play_voc$qnuc proc far	; CODE XREF: game_manager::play_sound(uchar *,uchar)+78p
					; game_manager::play_sound(uchar *,uchar)+DCp

arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	al, es:[bx+1Ch]
		mov	ah, 0
		or	ax, ax
		jz	loc_13DB7
		les	bx, [bp+arg_0]
		mov	al, es:[bx+6]
		cbw
		or	ax, ax
		jnz	loc_13DB9

loc_13DB7::				; CODE XREF: game_manager::play_voc(uchar *)+Ej
		jmp	loc_13DC7
; ---------------------------------------------------------------------------

loc_13DB9::				; CODE XREF: game_manager::play_voc(uchar *)+1Aj
		push	[bp+arg_6]
		push	[bp+arg_4]
		call	_playvocblock
		add	sp, 4

loc_13DC7::				; CODE XREF: game_manager::play_voc(uchar *):loc_13DB7j
		pop	bp
		retf
@game_manager@play_voc$qnuc endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far game_manager::play_voc_file(__int32, char *src)
@game_manager@play_voc_file$qnuc proc far
					; CODE XREF: game_manager::play_sound_file(uchar *)+27p

arg_0		= dword	ptr  6
src		= dword	ptr  0Ah

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx+6], 0
		jnz	loc_13DD8
		jmp	loc_13E1F
; ---------------------------------------------------------------------------

loc_13DD8::				; CODE XREF: game_manager::play_voc_file(uchar *)+Bj
		call	_vocplaying
		or	ax, ax
		jz	loc_13DE6
		call	_stopvoc

loc_13DE6::				; CODE XREF: game_manager::play_voc_file(uchar *)+16j
		push	word ptr [bp+src+2]
		push	word ptr [bp+src] ; src
		push	ds
		push	offset _tmp	; dest
		call	_strcpy
		assume es:seg2608
		add	sp, 8
		push	ds
		push	offset a_voc	; ".voc"
		push	ds
		push	offset _tmp	; dest
		call	_strcat
		add	sp, 8
		push	ds
		push	offset _tmp
		call	_playvocfile
		add	sp, 4
		jmp	$+2
; ---------------------------------------------------------------------------

loc_13E16::				; CODE XREF: game_manager::play_voc_file(uchar *)+4Bj
					; game_manager::play_voc_file(uchar *)+54j
		call	_vocplaying
		or	ax, ax
		jnz	loc_13E16

loc_13E1F::				; CODE XREF: game_manager::play_voc_file(uchar *)+Dj
		pop	bp
		retf
@game_manager@play_voc_file$qnuc endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; game_manager::voc_playing(void)
@game_manager@voc_playing$qv proc far	; CODE XREF: show_stats(void)+665P
					; show_prelude(void)+23DP

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		assume es:nothing
		cmp	byte ptr es:[bx+6], 0
		jz	loc_13E37
		call	_vocplaying

loc_13E33::				; CODE XREF: game_manager::voc_playing(void)+18j
		jmp	loc_13E3B
; ---------------------------------------------------------------------------
		jmp	loc_13E3B
; ---------------------------------------------------------------------------

loc_13E37::				; CODE XREF: game_manager::voc_playing(void)+Bj
		mov	al, 0
		jmp	loc_13E33
; ---------------------------------------------------------------------------

loc_13E3B::				; CODE XREF: game_manager::voc_playing(void):loc_13E33j
					; game_manager::voc_playing(void)+14j
		pop	bp
		retf
@game_manager@voc_playing$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far game_manager::load_voc(int,	int, char *src)
@game_manager@load_voc$qnuc proc far	; CODE XREF: game_manager::define_sound(uchar *,uchar)+4Fp

var_8		= dword	ptr -8
var_4		= dword	ptr -4
src		= dword	ptr  0Ah

		enter	8, 0
		push	word ptr [bp+src+2]
		push	word ptr [bp+src] ; src
		push	ds
		push	offset _tmp	; dest
		call	_strcpy
		assume es:seg2608
		add	sp, 8
		push	ds
		push	offset a_voc_0	; ".voc"
		push	ds
		push	offset _tmp	; dest
		call	_strcat
		add	sp, 8
		push	8		; unsigned int
		call	@$bnew$qui	; operator new(uint)
		assume es:nothing
		pop	cx
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		push	ds
		push	offset _tmp
		call	_getsequence
		assume es:nothing
		add	sp, 4
		mov	word ptr [bp+var_8+2], dx
		mov	word ptr [bp+var_8], ax
		cmp	[bp+var_8], 0
		jnz	loc_13E9A
		push	ds
		push	offset _tmp
		push	ds
		push	offset aVocNotFound ; "Voc not found: "
		call	@terminate$qnuct1 ; terminate(uchar *,uchar *)
; ---------------------------------------------------------------------------
		add	sp, 8

loc_13E9A::				; CODE XREF: game_manager::load_voc(uchar *)+4Bj
		push	ds
		push	offset _tmp	; s
		call	_strdup
		assume es:nothing
		add	sp, 4
		les	bx, [bp+var_4]
		assume es:nothing
		mov	es:[bx+2], dx
		mov	es:[bx], ax
		les	bx, [bp+var_4]
		mov	eax, [bp+var_8]
		mov	es:[bx+4], eax
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		jmp	$+2
; ---------------------------------------------------------------------------

locret_13EC4::				; CODE XREF: game_manager::load_voc(uchar *)+85j
		leave
		retf
@game_manager@load_voc$qnuc endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far game_manager::load_pcs(int,	int, char *src)
@game_manager@load_pcs$qnuc proc far	; CODE XREF: game_manager::define_sound(uchar *,uchar)+70p
					; game_manager::play_pcs_file(uchar *)+11p

var_6		= dword	ptr -6
len		= word ptr -2
src		= dword	ptr  0Ah

		enter	6, 0
		push	word ptr [bp+src+2]
		push	word ptr [bp+src] ; src
		push	ds
		push	offset _tmp	; dest
		call	_strcpy
		add	sp, 8
		push	ds
		push	offset a_pcs	; ".pcs"
		push	ds
		push	offset _tmp	; dest
		call	_strcat
		add	sp, 8
		push	ds
		push	offset _tmp	; path
		call	@g_open_element$qnuc ; g_open_element(uchar *)
		push	dx
		push	ax
		pop	eax
		add	sp, 4
		cmp	eax, 0FFFFFFFFh
		jnz	loc_13F05
		jmp	loc_13FA3
; ---------------------------------------------------------------------------

loc_13F05::				; CODE XREF: game_manager::load_pcs(uchar *)+3Aj
		push	0Ah		; unsigned int
		call	@$bnew$qui	; operator new(uint)
		pop	cx
		mov	word ptr [bp+var_6+2], dx
		mov	word ptr [bp+var_6], ax
		push	ds
		push	offset _tmp	; s
		call	_strdup
		add	sp, 4
		les	bx, [bp+var_6]
		assume es:nothing
		mov	es:[bx+2], dx
		mov	es:[bx], ax
		push	2		; len
		mov	ax, word ptr [bp+var_6]
		add	ax, 8
		push	word ptr [bp+var_6+2]
		push	ax		; buf
		call	@g_element_read$qnvui ;	g_element_read(void *,uint)
		push	dx
		push	ax
		pop	eax
		add	sp, 6
		cmp	eax, 2
		jz	loc_13F49
		jmp	loc_13FAA
; ---------------------------------------------------------------------------

loc_13F49::				; CODE XREF: game_manager::load_pcs(uchar *)+7Fj
		les	bx, [bp+var_6]
		mov	ax, es:[bx+8]
		shl	ax, 1
		push	ax		; unsigned int
		call	@$bnew$qui	; operator new(uint)
		pop	cx
		les	bx, [bp+var_6]
		mov	es:[bx+6], dx
		mov	es:[bx+4], ax
		les	bx, [bp+var_6]
		mov	ax, es:[bx+8]
		shl	ax, 1
		mov	[bp+len], ax
		push	[bp+len]	; len
		les	bx, [bp+var_6]
		push	word ptr es:[bx+6]
		push	word ptr es:[bx+4] ; buf
		call	@g_element_read$qnvui ;	g_element_read(void *,uint)
		push	dx
		push	ax
		pop	eax
		add	sp, 6
		movsx	edx, [bp+len]
		cmp	eax, edx
		jz	loc_13F96
		jmp	loc_13FAA
; ---------------------------------------------------------------------------

loc_13F96::				; CODE XREF: game_manager::load_pcs(uchar *)+CCj
		call	@g_close_element$qv ; g_close_element(void)
		mov	dx, word ptr [bp+var_6+2]
		mov	ax, word ptr [bp+var_6]

loc_13FA1::				; CODE XREF: game_manager::load_pcs(uchar *)+FFj
		jmp	locret_13FC7
; ---------------------------------------------------------------------------

loc_13FA3::				; CODE XREF: game_manager::load_pcs(uchar *)+3Cj
		call	@g_close_element$qv ; g_close_element(void)
		jmp	loc_13FC1
; ---------------------------------------------------------------------------

loc_13FAA::				; CODE XREF: game_manager::load_pcs(uchar *)+81j
					; game_manager::load_pcs(uchar *)+CEj
		call	@g_close_element$qv ; g_close_element(void)
		push	word ptr [bp+src+2]
		push	word ptr [bp+src]
		push	ds
		push	offset aErrorLoadingPc ; "Error	loading	pcs:"
		call	@terminate$qnuct1 ; terminate(uchar *,uchar *)
; ---------------------------------------------------------------------------
		add	sp, 8

loc_13FC1::				; CODE XREF: game_manager::load_pcs(uchar *)+E2j
		xor	dx, dx
		xor	ax, ax
		jmp	loc_13FA1
; ---------------------------------------------------------------------------

locret_13FC7::				; CODE XREF: game_manager::load_pcs(uchar *):loc_13FA1j
		leave
		retf
@game_manager@load_pcs$qnuc endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far game_manager::play_pcs_file(int, int, char *src)
@game_manager@play_pcs_file$qnuc proc far
					; CODE XREF: game_manager::play_sound_file(uchar *)+3Ap

var_8		= dword	ptr -8
block		= dword	ptr -4
arg_0		= word ptr  6
arg_2		= word ptr  8
src		= dword	ptr  0Ah

		enter	8, 0
		push	word ptr [bp+src+2]
		push	word ptr [bp+src] ; src
		push	[bp+arg_2]	; int
		push	[bp+arg_0]	; int
		push	cs
		call	near ptr @game_manager@load_pcs$qnuc ; game_manager::load_pcs(uchar *)
		add	sp, 8
		mov	word ptr [bp+block+2], dx
		mov	word ptr [bp+block], ax
		cmp	[bp+block], 0
		jnz	loc_13FEF
		jmp	locret_14065
; ---------------------------------------------------------------------------

loc_13FEF::				; CODE XREF: game_manager::play_pcs_file(uchar *)+22j
		push	0Eh		; unsigned int
		call	@$bnew$qui	; operator new(uint)
		pop	cx
		mov	word ptr [bp+var_8+2], dx
		mov	word ptr [bp+var_8], ax
		les	bx, [bp+var_8]
		mov	eax, [bp+block]
		mov	es:[bx+6], eax
		mov	eax, [bp+var_8]
		mov	_cur_sound, eax
		les	bx, _cur_sound
		mov	byte ptr es:[bx+5], 0
		jmp	$+2
; ---------------------------------------------------------------------------

loc_1401C::				; CODE XREF: game_manager::play_pcs_file(uchar *)+51j
					; game_manager::play_pcs_file(uchar *)+59j
		cmp	_cur_sound, 0
		jnz	loc_1401C
		les	bx, [bp+block]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; block
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4
		les	bx, [bp+block]
		push	word ptr es:[bx+6]
		push	word ptr es:[bx+4] ; block
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4
		push	word ptr [bp+var_8+2]
		push	word ptr [bp+var_8] ; block
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4

locret_14065::				; CODE XREF: game_manager::play_pcs_file(uchar *)+24j
		leave
		retf
@game_manager@play_pcs_file$qnuc endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far game_manager::load_loop(__int32, char *src)
@game_manager@load_loop$qnuc proc far	; CODE XREF: play_game(uchar)+14DP
					; play_game(uchar)+161P ...

buf		= dword	ptr -0Ah
var_6		= byte ptr -6
var_5		= byte ptr -5
len		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
src		= dword	ptr  0Ah

		enter	0Ah, 0
		push	si
		les	bx, [bp+arg_0]
		assume es:nothing
		cmp	byte ptr es:[bx+38h], 96h ; ''
		jnz	loc_14086
		push	0
		push	0
		push	ds
		push	offset aLoopStorageFul ; "Loop storage full!"
		call	@terminate$qnuct1 ; terminate(uchar *,uchar *)
; ---------------------------------------------------------------------------
		add	sp, 8

loc_14086::				; CODE XREF: game_manager::load_loop(uchar *)+Dj
		push	46h ; 'F'       ; unsigned int
		call	@$bnew$qui	; operator new(uint)
		assume es:nothing
		pop	cx
		mov	word ptr [bp+buf+2], dx
		mov	word ptr [bp+buf], ax
		cmp	[bp+buf], 0
		jnz	loc_140A7
		push	ds
		push	offset aAddingALoopToG ; "Adding a loop	to game_manager."
		call	@no_heap$qnuc	; no_heap(uchar	*)
; ---------------------------------------------------------------------------
		add	sp, 4

loc_140A7::				; CODE XREF: game_manager::load_loop(uchar *)+32j
		push	word ptr [bp+src+2]
		push	word ptr [bp+src] ; s
		call	_strdup
		assume es:nothing
		add	sp, 4
		les	bx, [bp+buf]
		assume es:nothing
		mov	es:[bx+4], dx
		mov	es:[bx+2], ax
		push	word ptr [bp+src+2]
		push	word ptr [bp+src] ; src
		push	ds
		push	offset _tmp	; dest
		call	_strcpy
		assume es:seg2608
		add	sp, 8
		push	ds
		push	offset _tmp	; s
		call	_strupr
		add	sp, 4
		push	ds
		push	offset _tmp	; path
		call	@g_open_element$qnuc ; g_open_element(uchar *)
		push	dx
		push	ax
		pop	eax
		add	sp, 4
		cmp	eax, 0FFFFFFFFh
		jnz	loc_140F7
		jmp	loc_1427D
; ---------------------------------------------------------------------------

loc_140F7::				; CODE XREF: game_manager::load_loop(uchar *)+8Bj
		push	1		; len
		push	word ptr [bp+buf+2]
		push	word ptr [bp+buf] ; buf
		call	@g_element_read$qnvui ;	g_element_read(void *,uint)
		push	dx
		push	ax
		pop	eax
		add	sp, 6
		cmp	eax, 1
		jz	loc_14114
		jmp	loc_1427D
; ---------------------------------------------------------------------------

loc_14114::				; CODE XREF: game_manager::load_loop(uchar *)+A8j
		mov	[bp+var_2], 0
		jmp	loc_1423D
; ---------------------------------------------------------------------------
		assume es:nothing

loc_1411C::				; CODE XREF: game_manager::load_loop(uchar *)+1E3j
		push	8		; unsigned int
		call	@$bnew$qui	; operator new(uint)
		assume es:nothing
		pop	cx
		mov	bx, [bp+var_2]
		shl	bx, 2
		les	si, [bp+buf]
		assume es:nothing
		add	si, bx
		mov	es:[si+8], dx
		mov	es:[si+6], ax
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+buf]
		add	bx, ax
		mov	ax, es:[bx+6]
		or	ax, es:[bx+8]
		jnz	loc_1414F
		jmp	loc_1427F
; ---------------------------------------------------------------------------

loc_1414F::				; CODE XREF: game_manager::load_loop(uchar *)+E3j
		push	1		; len
		push	ss
		lea	ax, [bp+var_5]
		push	ax		; buf
		call	@g_element_read$qnvui ;	g_element_read(void *,uint)
		push	dx
		push	ax
		pop	eax
		add	sp, 6
		cmp	eax, 1
		jz	loc_1416B
		jmp	loc_1427D
; ---------------------------------------------------------------------------

loc_1416B::				; CODE XREF: game_manager::load_loop(uchar *)+FFj
		push	1		; len
		push	ss
		lea	ax, [bp+var_6]
		push	ax		; buf
		call	@g_element_read$qnvui ;	g_element_read(void *,uint)
		push	dx
		push	ax
		pop	eax
		add	sp, 6
		cmp	eax, 1
		jz	loc_14187
		jmp	loc_1427D
; ---------------------------------------------------------------------------

loc_14187::				; CODE XREF: game_manager::load_loop(uchar *)+11Bj
		mov	al, [bp+var_5]
		mov	ah, 0
		mov	dx, [bp+var_2]
		shl	dx, 2
		les	bx, [bp+buf]
		add	bx, dx
		les	bx, es:[bx+6]
		assume es:nothing
		mov	es:[bx+6], ax
		mov	al, [bp+var_6]
		mov	ah, 0
		mov	dx, [bp+var_2]
		shl	dx, 2
		les	bx, [bp+buf]
		assume es:nothing
		add	bx, dx
		les	bx, es:[bx+6]
		assume es:nothing
		mov	es:[bx+4], ax
		mov	al, [bp+var_5]
		mov	ah, 0
		mov	dl, [bp+var_6]
		mov	dh, 0
		imul	dx
		mov	[bp+len], ax
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, [bp+len]
		add	es:[bx+4], ax
		push	[bp+len]	; unsigned int
		call	@$bnew$qui	; operator new(uint)
		assume es:nothing
		pop	cx
		mov	bx, [bp+var_2]
		shl	bx, 2
		les	si, [bp+buf]
		assume es:nothing
		add	si, bx
		les	bx, es:[si+6]
		assume es:nothing
		mov	es:[bx+2], dx
		mov	es:[bx], ax
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+buf]
		assume es:nothing
		add	bx, ax
		les	bx, es:[bx+6]
		assume es:nothing
		mov	ax, es:[bx]
		or	ax, es:[bx+2]
		jnz	loc_14209
		jmp	loc_1427F
; ---------------------------------------------------------------------------

loc_14209::				; CODE XREF: game_manager::load_loop(uchar *)+19Ej
		push	[bp+len]	; len
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+buf]
		assume es:nothing
		add	bx, ax
		les	bx, es:[bx+6]
		assume es:nothing
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; buf
		call	@g_element_read$qnvui ;	g_element_read(void *,uint)
		push	dx
		push	ax
		pop	eax
		add	sp, 6
		movsx	edx, [bp+len]
		cmp	eax, edx
		jz	loc_1423A
		jmp	loc_1427D
; ---------------------------------------------------------------------------

loc_1423A::				; CODE XREF: game_manager::load_loop(uchar *)+1CFj
		inc	[bp+var_2]
		assume es:seg2608

loc_1423D::				; CODE XREF: game_manager::load_loop(uchar *)+B2j
		les	bx, [bp+buf]
		assume es:nothing
		mov	al, es:[bx]
		mov	ah, 0
		cmp	ax, [bp+var_2]
		jle	loc_1424D
		jmp	loc_1411C
; ---------------------------------------------------------------------------

loc_1424D::				; CODE XREF: game_manager::load_loop(uchar *)+1E1j
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	al, es:[bx+38h]
		inc	byte ptr es:[bx+38h]
		mov	ah, 0
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		mov	ax, word ptr [bp+buf+2]
		mov	dx, word ptr [bp+buf]
		mov	es:[bx+3Ch], ax
		mov	es:[bx+3Ah], dx
		call	@g_close_element$qv ; g_close_element(void)
		mov	dx, word ptr [bp+buf+2]
		mov	ax, word ptr [bp+buf]

loc_1427B::				; CODE XREF: game_manager::load_loop(uchar *)+22Dj
		jmp	loc_14296
; ---------------------------------------------------------------------------
		assume es:seg2608

loc_1427D::				; CODE XREF: game_manager::load_loop(uchar *)+8Dj
					; game_manager::load_loop(uchar	*)+AAj	...
		jmp	loc_14290
; ---------------------------------------------------------------------------

loc_1427F::				; CODE XREF: game_manager::load_loop(uchar *)+E5j
					; game_manager::load_loop(uchar	*)+1A0j
		push	ds
		push	offset aLoadingLoop_ ; "Loading	loop."
		call	@no_heap$qnuc	; no_heap(uchar	*)
; ---------------------------------------------------------------------------
		add	sp, 4
		call	@g_close_element$qv ; g_close_element(void)

loc_14290::				; CODE XREF: game_manager::load_loop(uchar *):loc_1427Dj
		xor	dx, dx
		xor	ax, ax
		jmp	loc_1427B
; ---------------------------------------------------------------------------
		assume es:nothing

loc_14296::				; CODE XREF: game_manager::load_loop(uchar *):loc_1427Bj
		pop	si
		leave
		retf
@game_manager@load_loop$qnuc endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far game_manager::get_loop(__int32, char *s2)
@game_manager@get_loop$qnuc proc far	; CODE XREF: init_game(void)+184P
					; update_gun(void)+86P	...

var_2		= word ptr -2
arg_0		= dword	ptr  6
s2		= dword	ptr  0Ah

		enter	2, 0
		mov	[bp+var_2], 0
		jmp	loc_142E5
; ---------------------------------------------------------------------------
		assume es:nothing

loc_142A4::				; CODE XREF: game_manager::get_loop(uchar *)+58j
		push	word ptr [bp+s2+2]
		push	word ptr [bp+s2] ; s2
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+3Ah]
		assume es:nothing
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2] ; s1
		call	_strcmp
		assume es:seg2608
		add	sp, 8
		or	ax, ax
		jnz	loc_142E2
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		mov	dx, es:[bx+3Ch]
		mov	ax, es:[bx+3Ah]

loc_142E0::				; CODE XREF: game_manager::get_loop(uchar *)+5Ej
		jmp	locret_142F9
; ---------------------------------------------------------------------------
		assume es:seg2608

loc_142E2::				; CODE XREF: game_manager::get_loop(uchar *)+32j
		inc	[bp+var_2]
		assume es:nothing

loc_142E5::				; CODE XREF: game_manager::get_loop(uchar *)+9j
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	al, es:[bx+38h]
		mov	ah, 0
		cmp	ax, [bp+var_2]
		jg	loc_142A4
		xor	dx, dx
		xor	ax, ax
		jmp	loc_142E0
; ---------------------------------------------------------------------------

locret_142F9::				; CODE XREF: game_manager::get_loop(uchar *):loc_142E0j
		leave
		retf
@game_manager@get_loop$qnuc endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far game_manager::remove_loop(__int32, char *s2)
@game_manager@remove_loop$qnuc proc far	; CODE XREF: play_game(uchar)+3F9P
					; play_game(uchar)+40DP ...

block		= dword	ptr -8
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
s2		= dword	ptr  0Ah

		enter	8, 0

loc_142FF::
		mov	[bp+var_2], 0
		jmp	loc_14334
; ---------------------------------------------------------------------------
		assume es:nothing

loc_14306::				; CODE XREF: game_manager::remove_loop(uchar *)+45j
		push	word ptr [bp+s2+2]
		push	word ptr [bp+s2] ; s2
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+3Ah]
		assume es:nothing
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2] ; s1
		call	_strcmp
		assume es:seg2608
		add	sp, 8
		or	ax, ax
		jnz	loc_14331
		jmp	loc_14342
; ---------------------------------------------------------------------------

loc_14331::				; CODE XREF: game_manager::remove_loop(uchar *)+32j
		inc	[bp+var_2]
		assume es:nothing

loc_14334::				; CODE XREF: game_manager::remove_loop(uchar *)+9j
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	al, es:[bx+38h]
		mov	ah, 0
		cmp	ax, [bp+var_2]
		jg	loc_14306
		assume es:seg2608

loc_14342::				; CODE XREF: game_manager::remove_loop(uchar *)+34j
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	al, es:[bx+38h]
		mov	ah, 0
		cmp	ax, [bp+var_2]
		jnz	loc_14353
		jmp	locret_14424
; ---------------------------------------------------------------------------

loc_14353::				; CODE XREF: game_manager::remove_loop(uchar *)+53j
		mov	ax, [bp+var_2]
		mov	[bp+var_4], ax
		mov	ax, [bp+var_4]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		mov	ax, es:[bx+3Ch]
		mov	dx, es:[bx+3Ah]
		mov	word ptr [bp+block+2], ax
		mov	word ptr [bp+block], dx
		les	bx, [bp+block]
		assume es:nothing
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2] ; block
		call	@$bdele$qnv	; operator delete(void *)
		assume es:nothing
		add	sp, 4
		mov	[bp+var_2], 0
		jmp	loc_143C8
; ---------------------------------------------------------------------------
		assume es:nothing

loc_1438C::				; CODE XREF: game_manager::remove_loop(uchar *)+D8j
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+block]
		add	bx, ax
		les	bx, es:[bx+6]
		assume es:nothing
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; block
		call	@$bdele$qnv	; operator delete(void *)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+block]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+8]
		push	word ptr es:[bx+6] ; block
		call	@$bdele$qnv	; operator delete(void *)
		assume es:nothing
		add	sp, 4
		inc	[bp+var_2]
		assume es:nothing

loc_143C8::				; CODE XREF: game_manager::remove_loop(uchar *)+8Fj
		les	bx, [bp+block]
		assume es:nothing
		mov	al, es:[bx]
		mov	ah, 0
		cmp	ax, [bp+var_2]
		jg	loc_1438C
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	@$bdele$qnv	; operator delete(void *)
		assume es:nothing
		add	sp, 4
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	al, es:[bx+38h]
		mov	ah, 0
		sub	ax, [bp+var_4]
		push	ax
		mov	ax, [bp+var_4]
		inc	ax
		shl	ax, 2
		mov	dx, word ptr [bp+arg_0]
		add	dx, ax
		add	dx, 3Ah	; ':'
		push	word ptr [bp+arg_0+2]
		push	dx
		mov	ax, [bp+var_4]
		shl	ax, 2
		mov	dx, word ptr [bp+arg_0]
		add	dx, ax
		add	dx, 3Ah	; ':'
		push	word ptr [bp+arg_0+2]
		push	dx

loc_14415::
		call	_my_movsd
		add	sp, 0Ah
		les	bx, [bp+arg_0]

loc_14420::
		dec	byte ptr es:[bx+38h]

locret_14424::				; CODE XREF: game_manager::remove_loop(uchar *)+55j
		leave
		retf
@game_manager@remove_loop$qnuc endp

seg110e		ends

; ===========================================================================

; Segment type:	Pure code
seg1224		segment	byte public 'CODE' use16
		assume cs:seg1224
		;org 6
		assume es:nothing, ss:nothing, ds:seg2608, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far m_actor::m_actor(__int32, char *s2,	__int32, __int32)
@m_actor@$bctr$qnucnvt2	proc far	; CODE XREF: game_cast::add(uchar *,void *,void	*)+2Ap

arg_0		= dword	ptr  6
s2		= dword	ptr  0Ah
arg_8		= dword	ptr  0Eh
arg_C		= dword	ptr  12h

		push	bp
		mov	bp, sp
		cmp	[bp+arg_0], 0
		jnz	loc_14445
		push	54h ; 'T'       ; unsigned int
		call	@$bnew$qui	; operator new(uint)
		pop	cx
		mov	word ptr [bp+arg_0+2], dx
		mov	word ptr [bp+arg_0], ax
		or	ax, dx
		jnz	loc_14445
		jmp	loc_145D3
; ---------------------------------------------------------------------------

loc_14445::				; CODE XREF: m_actor::m_actor(uchar *,void *,void *)+8j
					; m_actor::m_actor(uchar *,void	*,void *)+1Aj
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	eax, [bp+arg_C]

loc_1444C::
		mov	es:[bx+3Eh], eax
		les	bx, [bp+arg_0]
		mov	eax, [bp+arg_8]
		mov	es:[bx+42h], eax
		les	bx, [bp+arg_0]
		xor	ax, ax
		mov	es:[bx+2Ah], ax
		les	bx, [bp+arg_0]
		mov	es:[bx+20h], ax
		les	bx, [bp+arg_0]
		mov	es:[bx+1Eh], ax
		les	bx, [bp+arg_0]
		mov	es:[bx+26h], ax
		les	bx, [bp+arg_0]
		mov	es:[bx+24h], ax
		les	bx, [bp+arg_0]
		mov	es:[bx+22h], ax
		les	bx, [bp+arg_0]
		mov	es:[bx+28h], ax
		les	bx, [bp+arg_0]
		mov	es:[bx+37h], al
		mov	ah, 0
		les	bx, [bp+arg_0]
		mov	es:[bx+16h], ax

loc_144A0::
		les	bx, [bp+arg_0]
		mov	es:[bx+14h], ax
		les	bx, [bp+arg_0]
		mov	es:[bx+2], ax
		les	bx, [bp+arg_0]
		mov	es:[bx], ax
		les	bx, [bp+arg_0]
		mov	al, 0
		mov	es:[bx+3Dh], al
		les	bx, [bp+arg_0]
		mov	es:[bx+35h], al
		les	bx, [bp+arg_0]
		mov	es:[bx+36h], al
		les	bx, [bp+arg_0]
		mov	es:[bx+3Ah], al
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx+3Bh], 1
		jnz	loc_144E6
		assume es:nothing
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+38h], 0
		jmp	loc_144EE
; ---------------------------------------------------------------------------
		assume es:nothing

loc_144E6::				; CODE XREF: m_actor::m_actor(uchar *,void *,void *)+B4j
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+38h], 1

loc_144EE::				; CODE XREF: m_actor::m_actor(uchar *,void *,void *)+BEj
		les	bx, [bp+arg_0]
		and	word ptr es:[bx+52h], 0FEFFh
		mov	al, 0
		les	bx, [bp+arg_0]
		and	byte ptr es:[bx+52h], 7Fh
		mov	dx, ax
		shl	al, 7
		or	es:[bx+52h], al
		and	dx, 1
		les	bx, [bp+arg_0]
		and	byte ptr es:[bx+52h], 0BFh
		mov	ax, dx
		shl	dl, 6
		or	es:[bx+52h], dl
		and	ax, 1
		les	bx, [bp+arg_0]
		and	byte ptr es:[bx+52h], 0DFh
		mov	dx, ax
		shl	al, 5
		or	es:[bx+52h], al
		and	dx, 1
		les	bx, [bp+arg_0]
		and	byte ptr es:[bx+52h], 0EFh
		mov	ax, dx
		shl	dl, 4
		or	es:[bx+52h], dl
		and	ax, 1
		les	bx, [bp+arg_0]
		and	byte ptr es:[bx+52h], 0F7h
		mov	dx, ax
		shl	al, 3
		or	es:[bx+52h], al
		and	dx, 1
		les	bx, [bp+arg_0]
		and	byte ptr es:[bx+52h], 0FBh
		mov	ax, dx
		shl	dl, 2
		or	es:[bx+52h], dl
		and	ax, 1
		les	bx, [bp+arg_0]
		and	byte ptr es:[bx+52h], 0FDh
		mov	dx, ax
		shl	al, 1
		or	es:[bx+52h], al
		and	dx, 1
		les	bx, [bp+arg_0]
		and	byte ptr es:[bx+52h], 0FEh
		or	es:[bx+52h], dl
		les	bx, [bp+arg_0]
		xor	ax, ax
		mov	es:[bx+10h], ax
		les	bx, [bp+arg_0]
		mov	es:[bx+12h], ax
		push	word ptr [bp+s2+2]
		push	word ptr [bp+s2] ; s2
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0] ; __int32
		nop
		push	cs
		call	near ptr @m_actor@new_loop$qnuc	; m_actor::new_loop(uchar *)
		add	sp, 8
		les	bx, [bp+arg_0]
		xor	eax, eax
		mov	es:[bx+30h], eax
		les	bx, [bp+arg_0]
		mov	es:[bx+2Ch], eax
		les	bx, [bp+arg_0]
		mov	dword ptr es:[bx+4Eh], 0

loc_145D3::				; CODE XREF: m_actor::m_actor(uchar *,void *,void *)+1Cj
		mov	dx, word ptr [bp+arg_0+2]
		mov	ax, word ptr [bp+arg_0]
		jmp	$+2
; ---------------------------------------------------------------------------

loc_145DB::				; CODE XREF: m_actor::m_actor(uchar *,void *,void *)+1B3j
		pop	bp
		retf
@m_actor@$bctr$qnucnvt2	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far m_actor::~m_actor(void far *block, int)
@m_actor@$bdtr$qv proc far		; CODE XREF: game_cast::kill_all(void)+52p
					; game_cast::remove(uchar)+1Bp

block		= dword	ptr  6
arg_4		= word ptr  0Ah

		push	bp
		mov	bp, sp
		cmp	[bp+block], 0
		jz	loc_145FC
		test	[bp+arg_4], 1
		jz	loc_145FC
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	@$bdele$qnv	; operator delete(void *)
		assume es:nothing
		add	sp, 4

loc_145FC::				; CODE XREF: m_actor::~m_actor(void)+8j
					; m_actor::~m_actor(void)+Fj
		pop	bp
		retf
@m_actor@$bdtr$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; m_actor::facing_actor(m_actor	*)
@m_actor@facing_actor$qn7m_actor proc far ; CODE XREF: seg0b2c:18F6P
					; seg0b2c:1B19P ...

arg_0		= dword	ptr  6
arg_4		= dword	ptr  0Ah

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+8]
		les	bx, [bp+arg_4]
		assume es:nothing
		cmp	ax, es:[bx+8]
		jge	loc_1461F
		les	bx, [bp+arg_0]
		assume es:nothing
		cmp	byte ptr es:[bx+34h], 0
		jnz	loc_1461F

loc_1461B::				; CODE XREF: m_actor::facing_actor(m_actor *)+3Bj
		mov	al, 1

loc_1461D::				; CODE XREF: m_actor::facing_actor(m_actor *)+3Fj
		jmp	loc_1463F
; ---------------------------------------------------------------------------

loc_1461F::				; CODE XREF: m_actor::facing_actor(m_actor *)+11j
					; m_actor::facing_actor(m_actor	*)+1Bj
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+8]
		les	bx, [bp+arg_4]
		assume es:nothing
		cmp	ax, es:[bx+8]
		jle	loc_1463B
		les	bx, [bp+arg_0]
		assume es:nothing
		cmp	byte ptr es:[bx+34h], 1
		jnz	loc_1463B
		jmp	loc_1461B
; ---------------------------------------------------------------------------
		assume es:nothing

loc_1463B::				; CODE XREF: m_actor::facing_actor(m_actor *)+2Fj
					; m_actor::facing_actor(m_actor	*)+39j
		mov	al, 0
		jmp	loc_1461D
; ---------------------------------------------------------------------------
		assume es:nothing

loc_1463F::				; CODE XREF: m_actor::facing_actor(m_actor *):loc_1461Dj
		pop	bp
		retf
@m_actor@facing_actor$qn7m_actor endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; m_actor::check_in_window(void)
@m_actor@check_in_window$qv proc far	; CODE XREF: m_actor::set_xy(int,int)+7Ap
					; m_actor::move(void)+12Ep

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+4]
		les	bx, _the_map
		assume es:nothing
		cmp	ax, es:[bx+0Ch]
		jl	loc_146A1
		les	bx, _the_map
		mov	ax, es:[bx+0Ch]
		les	bx, _the_map
		add	ax, es:[bx+18h]
		les	bx, [bp+arg_0]
		assume es:nothing
		cmp	ax, es:[bx]
		jl	loc_146A1
		assume es:nothing
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+6]
		les	bx, _the_map
		assume es:nothing
		cmp	ax, es:[bx+0Eh]
		jl	loc_146A1
		les	bx, _the_map
		mov	ax, es:[bx+0Eh]
		les	bx, _the_map
		add	ax, es:[bx+1Ah]
		les	bx, [bp+arg_0]
		assume es:nothing
		cmp	ax, es:[bx+2]
		jl	loc_146A1
		assume es:nothing
		les	bx, [bp+arg_0]
		or	byte ptr es:[bx+52h], 2
		jmp	loc_146A9
; ---------------------------------------------------------------------------
		assume es:nothing

loc_146A1::				; CODE XREF: m_actor::check_in_window(void)+12j
					; m_actor::check_in_window(void)+2Aj ...
		les	bx, [bp+arg_0]
		and	byte ptr es:[bx+52h], 0FDh

loc_146A9::				; CODE XREF: m_actor::check_in_window(void)+5Ej
		pop	bp
		retf
@m_actor@check_in_window$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; m_actor::set_xy(int, int)
@m_actor@set_xy$qii proc far		; CODE XREF: start_room(uchar *)+358P
					; de_doit(void)+61BP ...

arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch

		push	bp
		mov	bp, sp
		push	si
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_4]
		mov	es:[bx], ax
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_6]
		mov	es:[bx+2], ax
		les	bx, [bp+arg_0]
		push	es
		les	si, [bp+arg_0]
		mov	ax, es:[si]
		pop	es
		add	ax, es:[bx+10h]
		les	bx, [bp+arg_0]
		mov	es:[bx+4], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2]
		les	bx, [bp+arg_0]
		add	ax, es:[bx+12h]
		les	bx, [bp+arg_0]
		mov	es:[bx+6], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+10h]
		sar	ax, 1
		les	bx, [bp+arg_0]
		mov	dx, es:[bx]
		add	dx, ax
		les	bx, [bp+arg_0]
		mov	es:[bx+8], dx
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2]
		les	bx, [bp+arg_0]
		mov	dx, es:[bx+12h]
		sar	dx, 1
		add	ax, dx

loc_14717::
		les	bx, [bp+arg_0]
		mov	es:[bx+0Ah], ax
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		push	cs
		call	near ptr @m_actor@check_in_window$qv ; m_actor::check_in_window(void)
		add	sp, 4
		les	bx, [bp+arg_0]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jz	loc_1476E
		assume es:nothing
		cmp	_ed_list_size, 63h ; 'c'
		jb	loc_14752
		push	0
		push	0
		push	ds
		push	offset aTooManyActorsI ; "Too many actors in ed_list."
		call	@terminate$qnuct1 ; terminate(uchar *,uchar *)
; ---------------------------------------------------------------------------
		add	sp, 8

loc_14752::				; CODE XREF: m_actor::set_xy(int,int)+95j
		mov	al, _ed_list_size
		mov	ah, 0
		shl	ax, 2
		mov	dx, word ptr [bp+arg_0+2]
		mov	bx, word ptr [bp+arg_0]
		mov	si, ax
		mov	word_2B8CC[si],	dx
		mov	_ed_list[si], bx
		inc	_ed_list_size
		assume es:nothing

loc_1476E::				; CODE XREF: m_actor::set_xy(int,int)+8Ej
		les	bx, [bp+arg_0]
		mov	ax, es:[bx]
		sar	ax, 3
		les	bx, [bp+arg_0]
		mov	bx, es:[bx+2]
		sar	bx, 3
		shl	bx, 1
		mov	dx, word ptr _tbl_mul_tw[bx]
		add	dx, ax
		les	bx, [bp+arg_0]
		mov	es:[bx+18h], dx
		pop	si
		pop	bp
		retf
@m_actor@set_xy$qii endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; m_actor::set_cycle(unsigned char, unsigned char)
@m_actor@set_cycle$qucuc proc far	; CODE XREF: start_room(uchar *)+337P
					; de_doit(void)+62FP ...

arg_0		= dword	ptr  6
arg_4		= byte ptr  0Ah
arg_6		= byte ptr  0Ch

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		mov	al, [bp+arg_6]
		mov	es:[bx+38h], al
		les	bx, [bp+arg_0]
		mov	al, [bp+arg_4]
		mov	es:[bx+3Ah], al
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+39h], 0
		cmp	[bp+arg_6], 5
		jz	loc_147BE
		cmp	[bp+arg_6], 8
		jnz	loc_1483A

loc_147BE::				; CODE XREF: m_actor::set_cycle(uchar,uchar)+23j
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	al, es:[bx+3Bh]
		add	al, 0FFh
		les	bx, [bp+arg_0]
		mov	es:[bx+3Ch], al
		les	bx, [bp+arg_0]
		mov	al, es:[bx+3Ch]
		mov	ah, 0
		shl	ax, 2
		les	bx, [bp+arg_0]
		les	bx, es:[bx+46h]
		add	bx, ax
		les	bx, es:[bx+6]
		mov	ax, es:[bx+6]
		les	bx, [bp+arg_0]
		mov	es:[bx+10h], ax
		les	bx, [bp+arg_0]
		mov	al, es:[bx+3Ch]
		mov	ah, 0
		shl	ax, 2
		les	bx, [bp+arg_0]
		les	bx, es:[bx+46h]
		add	bx, ax
		les	bx, es:[bx+6]
		mov	ax, es:[bx+4]
		les	bx, [bp+arg_0]
		mov	es:[bx+12h], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+10h]
		sar	ax, 3
		inc	ax
		les	bx, [bp+arg_0]
		mov	es:[bx+1Ah], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+12h]
		sar	ax, 3
		inc	ax
		les	bx, [bp+arg_0]
		mov	es:[bx+1Ch], ax
		assume es:nothing

loc_1483A::				; CODE XREF: m_actor::set_cycle(uchar,uchar)+29j
		pop	bp
		retf
@m_actor@set_cycle$qucuc endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far m_actor::new_loop(__int32, char *s2)
@m_actor@new_loop$qnuc proc far		; CODE XREF: de_doit(void)+5C3P
					; kill_ego(int,int)+60P ...

arg_0		= dword	ptr  6
s2		= dword	ptr  0Ah

		push	bp
		mov	bp, sp
		push	si
		les	bx, [bp+arg_0]
		mov	eax, [bp+s2]
		mov	es:[bx+4Ah], eax
		les	bx, [bp+arg_0]
		or	byte ptr es:[bx+52h], 10h
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+10h]
		les	bx, [bp+arg_0]
		mov	es:[bx+0Ch], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+12h]
		les	bx, [bp+arg_0]
		mov	es:[bx+0Eh], ax
		push	word ptr [bp+s2+2]
		push	word ptr [bp+s2] ; s2
		push	word_2B8BC
		push	_the_game	; __int32
		call	@game_manager@get_loop$qnuc ; game_manager::get_loop(uchar *)
		assume es:nothing
		add	sp, 8
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	es:[bx+48h], dx
		mov	es:[bx+46h], ax
		les	bx, [bp+arg_0]
		cmp	dword ptr es:[bx+46h], 0
		jnz	loc_148AE
		push	word ptr [bp+s2+2]
		push	word ptr [bp+s2]
		push	ds
		push	offset aErrorLookingFo ; "Error	looking	for loop : "
		call	@terminate$qnuct1 ; terminate(uchar *,uchar *)
; ---------------------------------------------------------------------------
		add	sp, 8

loc_148AE::				; CODE XREF: m_actor::new_loop(uchar *)+5Ej
		les	bx, [bp+arg_0]
		les	bx, es:[bx+46h]
		assume es:nothing
		les	bx, es:[bx+6]
		assume es:nothing
		mov	ax, es:[bx+6]
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	es:[bx+10h], ax
		les	bx, [bp+arg_0]
		les	bx, es:[bx+46h]
		assume es:nothing
		les	bx, es:[bx+6]
		assume es:nothing
		mov	ax, es:[bx+4]
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	es:[bx+12h], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+10h]
		sar	ax, 3
		inc	ax
		les	bx, [bp+arg_0]
		mov	es:[bx+1Ah], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+12h]
		sar	ax, 3
		inc	ax
		les	bx, [bp+arg_0]
		mov	es:[bx+1Ch], ax
		les	bx, [bp+arg_0]
		push	es
		les	si, [bp+arg_0]
		mov	ax, es:[si]
		pop	es
		add	ax, es:[bx+10h]
		les	bx, [bp+arg_0]
		mov	es:[bx+4], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2]
		les	bx, [bp+arg_0]
		add	ax, es:[bx+12h]
		les	bx, [bp+arg_0]
		mov	es:[bx+6], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+10h]
		sar	ax, 1
		les	bx, [bp+arg_0]
		mov	dx, es:[bx]
		add	dx, ax
		les	bx, [bp+arg_0]
		mov	es:[bx+8], dx
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2]
		les	bx, [bp+arg_0]
		mov	dx, es:[bx+12h]
		sar	dx, 1
		add	ax, dx
		les	bx, [bp+arg_0]
		mov	es:[bx+0Ah], ax
		les	bx, [bp+arg_0]
		mov	al, 0
		mov	es:[bx+39h], al
		les	bx, [bp+arg_0]
		mov	es:[bx+3Ch], al
		les	bx, [bp+arg_0]
		les	bx, es:[bx+46h]
		assume es:nothing
		mov	al, es:[bx]
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	es:[bx+3Bh], al
		pop	si
		pop	bp
		retf
@m_actor@new_loop$qnuc endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; m_actor::erase(void)
@m_actor@erase$qv proc far		; CODE XREF: kill_ego(int,int)+31P
					; game_cast::update(uchar)+13p	...

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		push	si
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jnz	loc_14995
		jmp	loc_14A46
; ---------------------------------------------------------------------------

loc_14995::				; CODE XREF: m_actor::erase(void)+12j
		les	bx, [bp+arg_0]
		mov	al, es:[bx+52h]
		shr	ax, 2
		and	ax, 1
		or	ax, ax
		jz	loc_149A9
		jmp	loc_14A3E
; ---------------------------------------------------------------------------

loc_149A9::				; CODE XREF: m_actor::erase(void)+26j
		les	bx, [bp+arg_0]
		mov	al, es:[bx+52h]
		shr	ax, 4
		and	ax, 1
		or	ax, ax
		jz	loc_14A00
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2]
		les	bx, [bp+arg_0]
		add	ax, es:[bx+0Eh]
		push	ax
		les	bx, [bp+arg_0]
		push	es
		les	si, [bp+arg_0]
		mov	ax, es:[si]
		pop	es
		add	ax, es:[bx+0Ch]
		push	ax
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+2]
		les	bx, [bp+arg_0]
		push	word ptr es:[bx]
		push	word ptr _the_map+2
		push	word ptr _the_map
		call	@tilemap@erase_bits$qiiii ; tilemap::erase_bits(int,int,int,int)
		assume es:nothing
		add	sp, 0Ch
		les	bx, [bp+arg_0]
		assume es:nothing
		and	byte ptr es:[bx+52h], 0EFh
		jmp	loc_14A3C
; ---------------------------------------------------------------------------

loc_14A00::				; CODE XREF: m_actor::erase(void)+3Aj
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2]
		les	bx, [bp+arg_0]
		add	ax, es:[bx+12h]
		push	ax
		les	bx, [bp+arg_0]
		push	es
		les	si, [bp+arg_0]
		mov	ax, es:[si]
		pop	es
		add	ax, es:[bx+10h]
		push	ax
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+2]
		les	bx, [bp+arg_0]
		push	word ptr es:[bx]
		push	word ptr _the_map+2
		push	word ptr _the_map
		call	@tilemap@erase_bits$qiiii ; tilemap::erase_bits(int,int,int,int)
		assume es:nothing
		add	sp, 0Ch
		assume es:nothing

loc_14A3C::				; CODE XREF: m_actor::erase(void)+80j
		jmp	loc_14A46
; ---------------------------------------------------------------------------

loc_14A3E::				; CODE XREF: m_actor::erase(void)+28j
		les	bx, [bp+arg_0]
		assume es:nothing
		and	byte ptr es:[bx+52h], 0FBh
		assume es:nothing

loc_14A46::				; CODE XREF: m_actor::erase(void)+14j
					; m_actor::erase(void):loc_14A3Cj
		pop	si
		pop	bp
		retf
@m_actor@erase$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; m_actor::cycle(void)
@m_actor@cycle$qv proc far		; CODE XREF: game_cast::update(uchar)+112p
					; game_cast::update(uchar)+147p ...

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		assume es:nothing
		cmp	byte ptr es:[bx+38h], 0
		jnz	loc_14A59
		assume es:nothing
		jmp	loc_14C7B
; ---------------------------------------------------------------------------
		assume es:nothing

loc_14A59::				; CODE XREF: m_actor::cycle(void)+Bj
		les	bx, [bp+arg_0]
		mov	al, es:[bx+52h]
		shr	ax, 5
		and	ax, 1
		or	ax, ax
		jz	loc_14A6D
		jmp	loc_14C7B
; ---------------------------------------------------------------------------

loc_14A6D::				; CODE XREF: m_actor::cycle(void)+1Fj
		les	bx, [bp+arg_0]
		mov	al, es:[bx+39h]
		inc	byte ptr es:[bx+39h]
		les	bx, [bp+arg_0]
		cmp	al, es:[bx+3Ah]
		jz	loc_14A84
		assume es:nothing
		jmp	loc_14C7B
; ---------------------------------------------------------------------------
		assume es:nothing

loc_14A84::				; CODE XREF: m_actor::cycle(void)+36j
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+39h], 0
		les	bx, [bp+arg_0]
		mov	al, es:[bx+38h]
		mov	ah, 0
		dec	ax
		mov	bx, ax
		cmp	bx, 9		; switch 10 cases
		jbe	loc_14AA0
		jmp	loc_14C0F	; jumptable 000228C2 default case
; ---------------------------------------------------------------------------

loc_14AA0::				; CODE XREF: m_actor::cycle(void)+52j
		shl	bx, 1
		jmp	cs:off_14C7E[bx] ; switch jump
; ---------------------------------------------------------------------------

loc_14AA7::				; CODE XREF: m_actor::cycle(void)+59j
					; DATA XREF: seg1224:off_14C7Eo
		les	bx, [bp+arg_0]	; jumptable 000228C2 case 0
		mov	al, es:[bx+3Ch]
		inc	al
		les	bx, [bp+arg_0]
		mov	es:[bx+3Ch], al
		les	bx, [bp+arg_0]
		cmp	al, es:[bx+3Bh]
		jnz	loc_14AC8
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+3Ch], 0

loc_14AC8::				; CODE XREF: m_actor::cycle(void)+75j
		jmp	loc_14C0F	; jumptable 000228C2 default case
; ---------------------------------------------------------------------------
		assume es:nothing

loc_14ACB::				; CODE XREF: m_actor::cycle(void)+59j
					; DATA XREF: seg1224:0860o
		les	bx, [bp+arg_0]	; jumptable 000228C2 case 1
		mov	al, es:[bx+3Ch]
		inc	byte ptr es:[bx+3Ch]
		mov	ah, 0
		les	bx, [bp+arg_0]
		mov	dl, es:[bx+3Bh]
		mov	dh, 0
		add	dx, 0FFFEh
		cmp	ax, dx
		jnz	loc_14AF0
		les	bx, [bp+arg_0]
		or	byte ptr es:[bx+52h], 1

loc_14AF0::				; CODE XREF: m_actor::cycle(void)+9Dj
		jmp	loc_14C0F	; jumptable 000228C2 default case
; ---------------------------------------------------------------------------
		assume es:nothing

loc_14AF3::				; CODE XREF: m_actor::cycle(void)+59j
		les	bx, [bp+arg_0]	; jumptable 000228C2 cases 2,3
		mov	al, es:[bx+3Ch]
		inc	al
		les	bx, [bp+arg_0]
		mov	es:[bx+3Ch], al
		les	bx, [bp+arg_0]
		cmp	al, es:[bx+3Bh]
		jnz	loc_14B38
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx+38h], 4
		jnz	loc_14B28
		les	bx, [bp+arg_0]
		mov	al, es:[bx+3Bh]
		add	al, 0FFh
		les	bx, [bp+arg_0]
		mov	es:[bx+3Ch], al
		jmp	loc_14B30
; ---------------------------------------------------------------------------

loc_14B28::				; CODE XREF: m_actor::cycle(void)+CBj
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	byte ptr es:[bx+3Ch], 0
		assume es:nothing

loc_14B30::				; CODE XREF: m_actor::cycle(void)+DDj
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+38h], 0

loc_14B38::				; CODE XREF: m_actor::cycle(void)+C1j
		jmp	loc_14C0F	; jumptable 000228C2 default case
; ---------------------------------------------------------------------------

loc_14B3B::				; CODE XREF: m_actor::cycle(void)+59j
		les	bx, [bp+arg_0]	; jumptable 000228C2 case 5
		assume es:nothing
		mov	al, es:[bx+3Ch]
		inc	al
		les	bx, [bp+arg_0]
		mov	es:[bx+3Ch], al
		les	bx, [bp+arg_0]
		cmp	al, es:[bx+3Bh]
		jnz	loc_14B6C
		les	bx, [bp+arg_0]
		mov	al, es:[bx+3Bh]
		add	al, 0FEh ; 'þ'
		les	bx, [bp+arg_0]
		mov	es:[bx+3Ch], al
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+38h], 7

loc_14B6C::				; CODE XREF: m_actor::cycle(void)+109j
		jmp	loc_14C0F	; jumptable 000228C2 default case
; ---------------------------------------------------------------------------

loc_14B6F::				; CODE XREF: m_actor::cycle(void)+59j
		les	bx, [bp+arg_0]	; jumptable 000228C2 case 8
		mov	al, es:[bx+3Ch]
		inc	al
		les	bx, [bp+arg_0]
		mov	es:[bx+3Ch], al
		cmp	al, 2
		jnz	loc_14B8B
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+3Ch], 0

loc_14B8B::				; CODE XREF: m_actor::cycle(void)+138j
		jmp	loc_14C0F	; jumptable 000228C2 default case
; ---------------------------------------------------------------------------

loc_14B8E::				; CODE XREF: m_actor::cycle(void)+59j
		les	bx, [bp+arg_0]	; jumptable 000228C2 case 7
		mov	al, es:[bx+3Ch]
		add	al, 0FFh
		les	bx, [bp+arg_0]
		mov	es:[bx+3Ch], al
		cmp	al, 0FFh
		jnz	loc_14BB2
		les	bx, [bp+arg_0]
		mov	al, es:[bx+3Bh]
		add	al, 0FFh
		les	bx, [bp+arg_0]
		mov	es:[bx+3Ch], al

loc_14BB2::				; CODE XREF: m_actor::cycle(void)+157j
		jmp	loc_14C0F	; jumptable 000228C2 default case
; ---------------------------------------------------------------------------

loc_14BB4::				; CODE XREF: m_actor::cycle(void)+59j
		les	bx, [bp+arg_0]	; jumptable 000228C2 case 6
		mov	al, es:[bx+3Ch]
		dec	byte ptr es:[bx+3Ch]
		or	al, al
		jnz	loc_14BD3
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+3Ch], 1
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+38h], 6

loc_14BD3::				; CODE XREF: m_actor::cycle(void)+178j
		jmp	loc_14C0F	; jumptable 000228C2 default case
; ---------------------------------------------------------------------------

loc_14BD5::				; CODE XREF: m_actor::cycle(void)+59j
		les	bx, [bp+arg_0]	; jumptable 000228C2 case 4
		mov	al, es:[bx+3Ch]
		dec	byte ptr es:[bx+3Ch]
		or	al, al
		jnz	loc_14BF4
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+3Ch], 0
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+38h], 0

loc_14BF4::				; CODE XREF: m_actor::cycle(void)+199j
		jmp	loc_14C0F	; jumptable 000228C2 default case
; ---------------------------------------------------------------------------

loc_14BF6::				; CODE XREF: m_actor::cycle(void)+59j
		les	bx, [bp+arg_0]	; jumptable 000228C2 case 9
		mov	al, es:[bx+3Bh]
		mov	ah, 0
		push	ax
		call	@random$qi	; random(int)
		pop	cx
		les	bx, [bp+arg_0]
		mov	es:[bx+3Ch], al
		jmp	$+2	; jumptable 000228C2 default case
; ---------------------------------------------------------------------------
		assume es:nothing

loc_14C0F::				; CODE XREF: m_actor::cycle(void)+54j
					; m_actor::cycle(void):loc_14AC8j ...
		les	bx, [bp+arg_0]	; jumptable 000228C2 default case
		mov	al, es:[bx+3Ch]
		mov	ah, 0
		shl	ax, 2
		les	bx, [bp+arg_0]
		les	bx, es:[bx+46h]
		assume es:nothing
		add	bx, ax
		les	bx, es:[bx+6]
		assume es:nothing
		mov	ax, es:[bx+6]
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	es:[bx+10h], ax
		les	bx, [bp+arg_0]
		mov	al, es:[bx+3Ch]
		mov	ah, 0
		shl	ax, 2
		les	bx, [bp+arg_0]
		les	bx, es:[bx+46h]
		assume es:nothing
		add	bx, ax
		les	bx, es:[bx+6]
		assume es:nothing
		mov	ax, es:[bx+4]
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	es:[bx+12h], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+10h]
		sar	ax, 3
		inc	ax
		les	bx, [bp+arg_0]
		mov	es:[bx+1Ah], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+12h]
		sar	ax, 3
		inc	ax
		les	bx, [bp+arg_0]
		mov	es:[bx+1Ch], ax

loc_14C7B::				; CODE XREF: m_actor::cycle(void)+Dj
					; m_actor::cycle(void)+21j ...
		pop	bp
		retf
@m_actor@cycle$qv endp

; ---------------------------------------------------------------------------
		db 0
off_14C7E	dw offset loc_14AA7	; DATA XREF: m_actor::cycle(void)+59r
					; jump table for switch	statement
		dw offset loc_14ACB	; jumptable 000228C2 case 1
		db 0D3h	; Ó
		db    6
		db 0D3h	; Ó
		db    6
		db 0B5h	; µ
		db    7
		db  1Bh
		db    7
		db  94h	; 
		db    7
		db  6Eh	; n
		db    7
		db  4Fh	; O
		db    7
		db 0D6h	; Ö
		db    7
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; m_actor::move(void)
@m_actor@move$qv proc far		; CODE XREF: game_cast::update(uchar)+12Cp
					; game_cast::update(uchar)+162p ...

var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6

		enter	4, 0
		push	si
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	al, es:[bx+52h]
		and	ax, 1
		or	ax, ax
		jz	loc_14CA8
		assume es:nothing
		jmp	loc_14E14
; ---------------------------------------------------------------------------
		assume es:nothing

loc_14CA8::				; CODE XREF: m_actor::move(void)+11j
		les	bx, [bp+arg_0]
		cmp	dword ptr es:[bx+3Eh], 0
		jz	loc_14CC3
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		les	bx, [bp+arg_0]
		call	dword ptr es:[bx+3Eh]
		add	sp, 4

loc_14CC3::				; CODE XREF: m_actor::move(void)+1Fj
		les	bx, [bp+arg_0]
		cmp	dword ptr es:[bx+42h], 0
		jz	loc_14D20
		les	bx, [bp+arg_0]
		push	es
		les	si, [bp+arg_0]
		mov	ax, es:[si]
		pop	es
		add	ax, es:[bx+14h]
		mov	[bp+var_2], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2]
		les	bx, [bp+arg_0]
		add	ax, es:[bx+16h]
		mov	[bp+var_4], ax
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		push	ss
		lea	ax, [bp+var_2]
		push	ax
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		les	bx, [bp+arg_0]
		call	dword ptr es:[bx+42h]
		add	sp, 0Ch
		les	bx, [bp+arg_0]
		mov	ax, [bp+var_2]
		mov	es:[bx], ax
		les	bx, [bp+arg_0]
		mov	ax, [bp+var_4]
		mov	es:[bx+2], ax
		jmp	loc_14D3B
; ---------------------------------------------------------------------------
		assume es:nothing

loc_14D20::				; CODE XREF: m_actor::move(void)+3Aj
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+14h]
		les	bx, [bp+arg_0]
		add	es:[bx], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+16h]
		les	bx, [bp+arg_0]
		add	es:[bx+2], ax
		assume es:nothing

loc_14D3B::				; CODE XREF: m_actor::move(void)+8Cj
		les	bx, [bp+arg_0]
		push	es
		les	si, [bp+arg_0]
		mov	ax, es:[si]
		pop	es
		add	ax, es:[bx+10h]
		les	bx, [bp+arg_0]
		mov	es:[bx+4], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2]
		les	bx, [bp+arg_0]
		add	ax, es:[bx+12h]
		les	bx, [bp+arg_0]
		mov	es:[bx+6], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+10h]
		sar	ax, 1
		les	bx, [bp+arg_0]
		mov	dx, es:[bx]
		add	dx, ax
		les	bx, [bp+arg_0]
		mov	es:[bx+8], dx
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2]
		les	bx, [bp+arg_0]
		mov	dx, es:[bx+12h]
		sar	dx, 1
		add	ax, dx
		les	bx, [bp+arg_0]
		mov	es:[bx+0Ah], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx]
		sar	ax, 3
		les	bx, [bp+arg_0]
		mov	bx, es:[bx+2]
		sar	bx, 3
		shl	bx, 1
		mov	dx, word ptr _tbl_mul_tw[bx]
		add	dx, ax
		les	bx, [bp+arg_0]
		mov	es:[bx+18h], dx
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		push	cs
		call	near ptr @m_actor@check_in_window$qv ; m_actor::check_in_window(void)
		add	sp, 4
		les	bx, [bp+arg_0]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jz	loc_14E14
		assume es:nothing
		mov	eax, [bp+arg_0]
		cmp	eax, _ego
		jz	loc_14E14
		cmp	_ed_list_size, 63h ; 'c'
		jb	loc_14DF8
		push	0
		push	0
		push	ds
		push	offset aTooManyActorsT ; "Too many actors to draw."
		call	@terminate$qnuct1 ; terminate(uchar *,uchar *)
; ---------------------------------------------------------------------------
		add	sp, 8

loc_14DF8::				; CODE XREF: m_actor::move(void)+154j
		mov	al, _ed_list_size
		mov	ah, 0
		shl	ax, 2
		mov	dx, word ptr [bp+arg_0+2]
		mov	bx, word ptr [bp+arg_0]
		mov	si, ax
		mov	word_2B8CC[si],	dx
		mov	_ed_list[si], bx
		inc	_ed_list_size
		assume es:nothing

loc_14E14::				; CODE XREF: m_actor::move(void)+13j
					; m_actor::move(void)+142j ...
		pop	si
		leave
		retf
@m_actor@move$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; m_actor::draw(void)
@m_actor@draw$qv proc far		; CODE XREF: game_cast::update(uchar)+4F2p
					; game_cast::update(uchar)+50Ep

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	al, es:[bx+52h]
		shr	ax, 4
		and	ax, 1
		cmp	ax, 1
		jnz	loc_14E34
		assume es:nothing
		les	bx, [bp+arg_0]
		and	byte ptr es:[bx+52h], 0EFh
		assume es:nothing

loc_14E34::				; CODE XREF: m_actor::draw(void)+13j
		les	bx, [bp+arg_0]
		mov	al, es:[bx+52h]
		shr	ax, 1
		and	ax, 1
		or	ax, ax
		jnz	loc_14E47
		jmp	loc_14ED6
; ---------------------------------------------------------------------------

loc_14E47::				; CODE XREF: m_actor::draw(void)+2Bj
		les	bx, [bp+arg_0]
		mov	al, es:[bx+52h]
		and	ax, 1
		cmp	ax, 1
		jnz	loc_14E58
		assume es:nothing
		jmp	loc_14ED6
; ---------------------------------------------------------------------------
		assume es:nothing

loc_14E58::				; CODE XREF: m_actor::draw(void)+3Dj
		les	bx, [bp+arg_0]
		mov	al, es:[bx+36h]
		push	ax
		push	0
		les	bx, [bp+arg_0]
		mov	al, es:[bx+3Ch]
		mov	ah, 0
		shl	ax, 2
		les	bx, [bp+arg_0]
		les	bx, es:[bx+46h]
		assume es:nothing
		add	bx, ax
		les	bx, es:[bx+6]
		assume es:nothing
		push	word ptr es:[bx+2]
		push	word ptr es:[bx]
		les	bx, [bp+arg_0]
		assume es:nothing
		push	word ptr es:[bx+12h]
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+10h]
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+2]
		les	bx, [bp+arg_0]
		push	word ptr es:[bx]
		push	word ptr _the_map+2
		push	word ptr _the_map
		call	@tilemap@put_bits_masked$qiiiinucuiuc ;	tilemap::put_bits_masked(int,int,int,int,uchar *,uint,uchar)
		assume es:nothing
		add	sp, 14h
		les	bx, [bp+arg_0]
		assume es:nothing
		cmp	byte ptr es:[bx+36h], 0
		jz	loc_14ED6
		assume es:nothing
		les	bx, [bp+arg_0]
		mov	al, es:[bx+37h]
		inc	byte ptr es:[bx+37h]
		cmp	al, 1
		jnz	loc_14ED6
		les	bx, [bp+arg_0]
		mov	al, 0
		mov	es:[bx+36h], al
		les	bx, [bp+arg_0]
		mov	es:[bx+37h], al
		assume es:nothing

loc_14ED6::				; CODE XREF: m_actor::draw(void)+2Dj
					; m_actor::draw(void)+3Fj ...
		pop	bp
		retf
@m_actor@draw$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; m_actor::tile_collision(int, int, int)
@m_actor@tile_collision$qiii proc far	; CODE XREF: check_new_pos(m_actor *,int,int,int *,int *,int,int,int)+79P
					; seg0b2c:114CP ...

var_B		= byte ptr -0Bh
var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh

		enter	0Ch, 0
		mov	[bp+var_B], 0
		cmp	[bp+arg_4], 0
		jnz	loc_14EF9
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+1Ah]
		mov	[bp+var_8], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+1Ch]
		jmp	loc_14F05
; ---------------------------------------------------------------------------
		assume es:nothing

loc_14EF9::				; CODE XREF: m_actor::tile_collision(int,int,int)+Cj
		mov	ax, [bp+arg_4]
		sub	ax, [bp+arg_8]
		mov	[bp+var_8], ax
		mov	ax, [bp+arg_6]
		assume es:nothing

loc_14F05::				; CODE XREF: m_actor::tile_collision(int,int,int)+1Fj
		mov	[bp+var_A], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+18h]
		add	ax, [bp+arg_8]
		mov	[bp+var_4], ax
		mov	bx, [bp+var_A]
		dec	bx
		shl	bx, 1
		mov	ax, [bp+var_4]
		add	ax, word ptr _tbl_mul_tw[bx]
		mov	[bp+var_6], ax
		mov	[bp+var_2], 0
		jmp	loc_14F6D
; ---------------------------------------------------------------------------

loc_14F2C::				; CODE XREF: m_actor::tile_collision(int,int,int)+9Bj
		les	bx, _the_map
		assume es:nothing
		les	bx, es:[bx+39Eh]
		assume es:nothing
		mov	ax, [bp+var_4]
		shl	ax, 2
		add	bx, ax
		cmp	word ptr es:[bx], 100h
		jnb	loc_14F48
		or	[bp+var_B], 1

loc_14F48::				; CODE XREF: m_actor::tile_collision(int,int,int)+6Aj
		les	bx, _the_map
		assume es:nothing
		les	bx, es:[bx+39Eh]
		assume es:nothing
		mov	ax, [bp+var_6]
		shl	ax, 2
		add	bx, ax
		cmp	word ptr es:[bx], 100h
		jnb	loc_14F64
		or	[bp+var_B], 4

loc_14F64::				; CODE XREF: m_actor::tile_collision(int,int,int)+86j
		inc	[bp+var_4]
		inc	[bp+var_6]
		inc	[bp+var_2]
		assume es:nothing

loc_14F6D::				; CODE XREF: m_actor::tile_collision(int,int,int)+52j
		mov	ax, [bp+var_2]
		cmp	ax, [bp+var_8]
		jb	loc_14F2C
		assume es:nothing
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+18h]
		add	ax, [bp+arg_8]
		mov	[bp+var_4], ax
		mov	ax, [bp+var_4]
		add	ax, [bp+var_8]
		dec	ax
		mov	[bp+var_6], ax
		mov	[bp+var_2], 0
		jmp	loc_14FE6
; ---------------------------------------------------------------------------

loc_14F93::				; CODE XREF: m_actor::tile_collision(int,int,int)+114j
		les	bx, _the_map
		assume es:nothing
		les	bx, es:[bx+39Eh]
		assume es:nothing
		mov	ax, [bp+var_4]
		shl	ax, 2
		add	bx, ax
		cmp	word ptr es:[bx], 100h
		jnb	loc_14FAF
		or	[bp+var_B], 2

loc_14FAF::				; CODE XREF: m_actor::tile_collision(int,int,int)+D1j
		les	bx, _the_map
		assume es:nothing
		les	bx, es:[bx+39Eh]
		assume es:nothing
		mov	ax, [bp+var_6]
		shl	ax, 2
		add	bx, ax
		cmp	word ptr es:[bx], 100h
		jnb	loc_14FCB
		or	[bp+var_B], 8

loc_14FCB::				; CODE XREF: m_actor::tile_collision(int,int,int)+EDj
		les	bx, _the_map
		assume es:nothing
		mov	ax, es:[bx+8Eh]
		add	[bp+var_4], ax
		les	bx, _the_map
		mov	ax, es:[bx+8Eh]
		add	[bp+var_6], ax
		inc	[bp+var_2]
		assume es:nothing

loc_14FE6::				; CODE XREF: m_actor::tile_collision(int,int,int)+B9j
		mov	ax, [bp+var_2]
		cmp	ax, [bp+var_A]
		jb	loc_14F93
		assume es:nothing
		mov	al, [bp+var_B]
		jmp	$+2
; ---------------------------------------------------------------------------

locret_14FF3::				; CODE XREF: m_actor::tile_collision(int,int,int)+119j
		leave
		retf
@m_actor@tile_collision$qiii endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; m_actor::on_tile(int)
@m_actor@on_tile$qi proc far		; CODE XREF: add_missile(m_actor *,uchar,int)+29P
					; seg0b2c:094CP ...

var_6		= byte ptr -6
var_5		= byte ptr -5
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah

		enter	6, 0
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+18h]
		mov	[bp+var_2], ax
		les	bx, _the_map
		assume es:nothing
		mov	ax, es:[bx+8Eh]
		les	bx, [bp+arg_0]
		assume es:nothing
		sub	ax, es:[bx+1Ah]
		mov	[bp+var_4], ax
		mov	[bp+var_6], 0
		jmp	loc_1505F
; ---------------------------------------------------------------------------

loc_1501C::				; CODE XREF: m_actor::on_tile(int)+76j
		mov	[bp+var_5], 0
		jmp	loc_15048
; ---------------------------------------------------------------------------

loc_15022::				; CODE XREF: m_actor::on_tile(int)+5Fj
		mov	ax, [bp+var_2]
		inc	[bp+var_2]
		shl	ax, 2
		les	bx, _the_map
		assume es:nothing
		les	bx, es:[bx+39Eh]
		assume es:nothing
		add	bx, ax
		mov	ax, es:[bx]
		cmp	ax, [bp+arg_4]
		jnz	loc_15045
		mov	al, [bp+var_6]
		inc	al
		assume es:nothing

loc_15043::				; CODE XREF: m_actor::on_tile(int)+7Aj
		jmp	locret_15071
; ---------------------------------------------------------------------------
		assume es:nothing

loc_15045::				; CODE XREF: m_actor::on_tile(int)+47j
		inc	[bp+var_5]
		assume es:nothing

loc_15048::				; CODE XREF: m_actor::on_tile(int)+2Bj
		mov	al, [bp+var_5]
		mov	ah, 0
		les	bx, [bp+arg_0]
		cmp	ax, es:[bx+1Ah]
		jl	loc_15022
		mov	ax, [bp+var_4]
		add	[bp+var_2], ax
		inc	[bp+var_6]

loc_1505F::				; CODE XREF: m_actor::on_tile(int)+25j
		mov	al, [bp+var_6]
		mov	ah, 0
		les	bx, [bp+arg_0]
		cmp	ax, es:[bx+1Ch]
		jl	loc_1501C
		mov	al, 0
		jmp	loc_15043
; ---------------------------------------------------------------------------

locret_15071::				; CODE XREF: m_actor::on_tile(int):loc_15043j
		leave
		retf
@m_actor@on_tile$qi endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; m_actor::on_pos(unsigned int)
@m_actor@on_pos$qui proc far		; CODE XREF: de_doit(void)+244P
					; de_doit(void)+268P ...

var_6		= byte ptr -6
var_5		= byte ptr -5
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah

		enter	6, 0
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+18h]
		mov	[bp+var_2], ax
		les	bx, _the_map
		assume es:nothing
		mov	ax, es:[bx+8Eh]
		les	bx, [bp+arg_0]
		assume es:nothing
		sub	ax, es:[bx+1Ah]
		mov	[bp+var_4], ax
		mov	[bp+var_6], 0
		jmp	loc_150C9
; ---------------------------------------------------------------------------

loc_1509A::				; CODE XREF: m_actor::on_pos(uint)+62j
		mov	[bp+var_5], 0
		jmp	loc_150B2
; ---------------------------------------------------------------------------

loc_150A0::				; CODE XREF: m_actor::on_pos(uint)+4Bj
		mov	ax, [bp+var_2]
		inc	[bp+var_2]
		cmp	ax, [bp+arg_4]
		jnz	loc_150AF
		assume es:nothing
		mov	al, 1
		assume es:nothing

loc_150AD::				; CODE XREF: m_actor::on_pos(uint)+66j
		jmp	locret_150DB
; ---------------------------------------------------------------------------

loc_150AF::				; CODE XREF: m_actor::on_pos(uint)+36j
		inc	[bp+var_5]

loc_150B2::				; CODE XREF: m_actor::on_pos(uint)+2Bj
		mov	al, [bp+var_5]
		mov	ah, 0
		les	bx, [bp+arg_0]
		cmp	ax, es:[bx+1Ah]
		jl	loc_150A0
		mov	ax, [bp+var_4]
		add	[bp+var_2], ax
		inc	[bp+var_6]

loc_150C9::				; CODE XREF: m_actor::on_pos(uint)+25j
		mov	al, [bp+var_6]
		mov	ah, 0
		les	bx, [bp+arg_0]
		cmp	ax, es:[bx+1Ch]
		jl	loc_1509A
		mov	al, 0
		jmp	loc_150AD
; ---------------------------------------------------------------------------

locret_150DB::				; CODE XREF: m_actor::on_pos(uint):loc_150ADj
		leave
		retf
@m_actor@on_pos$qui endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; touching(m_actor *, m_actor *)
@touching$qn7m_actort1 proc far		; CODE XREF: teleport_to(uint)+D3P
					; check_new_pos(m_actor	*,int,int,int *,int *,int,int,int)+CAP	...

var_30		= word ptr -30h
var_2E		= word ptr -2Eh
var_2C		= word ptr -2Ch
var_2A		= word ptr -2Ah
var_28		= word ptr -28h
var_26		= word ptr -26h
var_24		= word ptr -24h
var_22		= word ptr -22h
var_20		= word ptr -20h
var_1E		= word ptr -1Eh
var_1C		= dword	ptr -1Ch
var_18		= dword	ptr -18h
var_14		= dword	ptr -14h
var_10		= word ptr -10h
var_E		= word ptr -0Eh
var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= dword	ptr  0Ah

		enter	30h, 0
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	al, es:[bx+52h]
		and	ax, 1
		or	ax, ax
		jnz	loc_150FD
		les	bx, [bp+arg_4]
		assume es:nothing
		mov	al, es:[bx+52h]
		and	ax, 1
		or	ax, ax
		jz	loc_15102

loc_150FD::				; CODE XREF: touching(m_actor *,m_actor	*)+10j
					; touching(m_actor *,m_actor *):loc_15124j ...
		mov	al, 0

loc_150FF::				; CODE XREF: touching(m_actor *,m_actor	*)+20Dj
		jmp	locret_1531B
; ---------------------------------------------------------------------------

loc_15102::				; CODE XREF: touching(m_actor *,m_actor	*)+1Ej
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	al, es:[bx+52h]
		shr	ax, 5
		and	ax, 1
		or	ax, ax
		jnz	loc_15124
		les	bx, [bp+arg_4]
		assume es:nothing
		mov	al, es:[bx+52h]
		shr	ax, 5
		and	ax, 1
		or	ax, ax
		jz	loc_15126

loc_15124::				; CODE XREF: touching(m_actor *,m_actor	*)+34j
		jmp	loc_150FD
; ---------------------------------------------------------------------------

loc_15126::				; CODE XREF: touching(m_actor *,m_actor	*)+45j
		les	bx, [bp+arg_4]
		mov	ax, es:[bx+2]
		les	bx, [bp+arg_0]
		assume es:nothing
		cmp	ax, es:[bx+2]
		jge	loc_1514E
		assume es:nothing
		mov	eax, [bp+arg_0]
		mov	[bp+var_14], eax
		mov	eax, [bp+arg_4]
		mov	[bp+arg_0], eax
		mov	eax, [bp+var_14]
		mov	[bp+arg_4], eax
		assume es:nothing

loc_1514E::				; CODE XREF: touching(m_actor *,m_actor	*)+57j
		les	bx, [bp+arg_0]
		mov	ax, es:[bx]
		mov	[bp+var_2], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2]
		mov	[bp+var_4], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+10h]
		mov	[bp+var_6], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+12h]
		mov	[bp+var_8], ax
		les	bx, [bp+arg_4]
		assume es:nothing
		mov	ax, es:[bx]
		mov	[bp+var_A], ax
		les	bx, [bp+arg_4]
		mov	ax, es:[bx+2]
		mov	[bp+var_C], ax
		les	bx, [bp+arg_4]
		mov	ax, es:[bx+10h]
		mov	[bp+var_E], ax
		les	bx, [bp+arg_4]
		mov	ax, es:[bx+12h]
		mov	[bp+var_10], ax
		mov	ax, [bp+var_2]
		add	ax, [bp+var_6]
		cmp	ax, [bp+var_A]
		jg	loc_151AA
		assume es:nothing
		jmp	loc_15318
; ---------------------------------------------------------------------------
		assume es:nothing

loc_151AA::				; CODE XREF: touching(m_actor *,m_actor	*)+C8j
		mov	ax, [bp+var_A]
		add	ax, [bp+var_E]
		cmp	ax, [bp+var_2]
		jg	loc_151B8
		assume es:nothing
		jmp	loc_15318
; ---------------------------------------------------------------------------
		assume es:nothing

loc_151B8::				; CODE XREF: touching(m_actor *,m_actor	*)+D6j
		mov	ax, [bp+var_4]
		add	ax, [bp+var_8]
		cmp	ax, [bp+var_C]
		jg	loc_151C6
		jmp	loc_15318
; ---------------------------------------------------------------------------

loc_151C6::				; CODE XREF: touching(m_actor *,m_actor	*)+E4j
		mov	ax, [bp+var_C]
		add	ax, [bp+var_10]
		cmp	ax, [bp+var_4]
		jg	loc_151D4
		jmp	loc_15318
; ---------------------------------------------------------------------------

loc_151D4::				; CODE XREF: touching(m_actor *,m_actor	*)+F2j
		mov	ax, [bp+var_C]
		sub	ax, [bp+var_4]
		mov	[bp+var_24], ax
		mov	ax, [bp+var_2]
		cmp	ax, [bp+var_A]
		jge	loc_15218
		assume es:nothing
		mov	ax, [bp+var_A]
		sub	ax, [bp+var_2]
		mov	[bp+var_22], ax
		mov	ax, [bp+var_6]
		sub	ax, [bp+var_22]
		mov	[bp+var_1E], ax
		mov	ax, [bp+var_1E]
		cmp	ax, [bp+var_E]
		jle	loc_15205
		mov	ax, [bp+var_E]
		mov	[bp+var_1E], ax

loc_15205::				; CODE XREF: touching(m_actor *,m_actor	*)+120j
		mov	ax, [bp+var_6]
		imul	[bp+var_24]
		add	ax, [bp+var_22]
		mov	[bp+var_26], ax
		mov	[bp+var_28], 0
		jmp	loc_15247
; ---------------------------------------------------------------------------
		assume es:nothing

loc_15218::				; CODE XREF: touching(m_actor *,m_actor	*)+106j
		mov	ax, [bp+var_2]
		sub	ax, [bp+var_A]
		mov	[bp+var_22], ax
		mov	ax, [bp+var_E]
		sub	ax, [bp+var_22]
		mov	[bp+var_1E], ax
		mov	ax, [bp+var_1E]
		cmp	ax, [bp+var_6]
		jle	loc_15238
		mov	ax, [bp+var_6]
		mov	[bp+var_1E], ax

loc_15238::				; CODE XREF: touching(m_actor *,m_actor	*)+153j
		mov	ax, [bp+var_6]
		imul	[bp+var_24]
		mov	[bp+var_26], ax
		mov	ax, [bp+var_22]
		mov	[bp+var_28], ax

loc_15247::				; CODE XREF: touching(m_actor *,m_actor	*)+139j
		mov	ax, [bp+var_C]
		add	ax, [bp+var_10]
		mov	dx, [bp+var_4]
		add	dx, [bp+var_8]
		cmp	ax, dx
		jg	loc_1525C
		assume es:nothing
		mov	ax, [bp+var_10]
		jmp	loc_15262
; ---------------------------------------------------------------------------
		assume es:nothing

loc_1525C::				; CODE XREF: touching(m_actor *,m_actor	*)+178j
		mov	ax, [bp+var_8]
		sub	ax, [bp+var_24]

loc_15262::				; CODE XREF: touching(m_actor *,m_actor	*)+17Dj
		mov	[bp+var_20], ax
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	al, es:[bx+3Ch]
		mov	ah, 0
		shl	ax, 2
		les	bx, [bp+arg_0]
		les	bx, es:[bx+46h]
		assume es:nothing
		add	bx, ax
		les	bx, es:[bx+6]
		assume es:nothing
		mov	ax, es:[bx+2]
		mov	dx, es:[bx]
		mov	word ptr [bp+var_18+2],	ax
		mov	word ptr [bp+var_18], dx
		les	bx, [bp+arg_4]
		assume es:nothing
		mov	al, es:[bx+3Ch]
		mov	ah, 0
		shl	ax, 2
		les	bx, [bp+arg_4]
		les	bx, es:[bx+46h]
		assume es:nothing
		add	bx, ax
		les	bx, es:[bx+6]
		assume es:nothing
		mov	ax, es:[bx+2]
		mov	dx, es:[bx]
		mov	word ptr [bp+var_1C+2],	ax
		mov	word ptr [bp+var_1C], dx
		mov	ax, [bp+var_6]
		sub	ax, [bp+var_1E]
		mov	[bp+var_2E], ax
		mov	ax, [bp+var_E]
		sub	ax, [bp+var_1E]
		mov	[bp+var_30], ax
		mov	[bp+var_2A], 0
		mov	ax, [bp+var_20]
		mov	[bp+var_2C], ax
		jmp	loc_15312
; ---------------------------------------------------------------------------

loc_152D0::				; CODE XREF: touching(m_actor *,m_actor	*)+239j
		les	bx, [bp+var_18]
		assume es:nothing
		add	bx, [bp+var_26]
		cmp	byte ptr es:[bx], 0
		jz	loc_152ED
		les	bx, [bp+var_1C]
		assume es:nothing

loc_152DF::
		add	bx, [bp+var_28]
		cmp	byte ptr es:[bx], 0
		jz	loc_152ED
		mov	al, 1
		jmp	loc_150FF
; ---------------------------------------------------------------------------

loc_152ED::				; CODE XREF: touching(m_actor *,m_actor	*)+1FDj
					; touching(m_actor *,m_actor *)+209j
		inc	[bp+var_26]
		inc	[bp+var_28]
		inc	[bp+var_2A]
		mov	ax, [bp+var_2A]
		cmp	ax, [bp+var_1E]
		jnz	loc_15312
		mov	ax, [bp+var_2E]
		add	[bp+var_26], ax
		mov	ax, [bp+var_30]
		add	[bp+var_28], ax
		dec	[bp+var_2C]
		mov	[bp+var_2A], 0
		assume es:nothing

loc_15312::				; CODE XREF: touching(m_actor *,m_actor	*)+1F1j
					; touching(m_actor *,m_actor *)+21Fj
		cmp	[bp+var_2C], 0
		jnz	loc_152D0
		assume es:nothing

loc_15318::				; CODE XREF: touching(m_actor *,m_actor	*)+CAj
					; touching(m_actor *,m_actor *)+D8j ...
		jmp	loc_150FD
; ---------------------------------------------------------------------------

locret_1531B::				; CODE XREF: touching(m_actor *,m_actor	*):loc_150FFj
		leave
		retf
@touching$qn7m_actort1 endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; game_cast::game_cast(void)
@game_cast@$bctr$qv proc far		; CODE XREF: init_game(void)+5FP

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		cmp	[bp+arg_0], 0
		jnz	loc_1533A
		push	322h		; unsigned int
		call	@$bnew$qui	; operator new(uint)
		assume es:nothing
		pop	cx
		mov	word ptr [bp+arg_0+2], dx
		mov	word ptr [bp+arg_0], ax
		or	ax, dx
		jz	loc_15345

loc_1533A::				; CODE XREF: game_cast::game_cast(void)+8j
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	al, 0
		mov	es:[bx], al
		mov	_ed_list_size, al

loc_15345::				; CODE XREF: game_cast::game_cast(void)+1Bj
		mov	dx, word ptr [bp+arg_0+2]
		mov	ax, word ptr [bp+arg_0]
		jmp	$+2
; ---------------------------------------------------------------------------

loc_1534D::				; CODE XREF: game_cast::game_cast(void)+2Ej
		pop	bp
		retf
@game_cast@$bctr$qv endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far game_cast::add(__int32, char *s2, __int32, __int32)
@game_cast@add$qnucnvt2	proc far	; CODE XREF: start_room(uchar *)+2E1P
					; start_room(uchar *)+313P ...

arg_0		= dword	ptr  6
s2		= dword	ptr  0Ah
arg_8		= dword	ptr  0Eh
arg_C		= dword	ptr  12h

		push	bp
		mov	bp, sp
		push	si
		les	bx, [bp+arg_0]
		assume es:nothing
		cmp	byte ptr es:[bx], 0C8h ; 'È'
		jnz	loc_15362
		xor	dx, dx
		xor	ax, ax

loc_15360::				; CODE XREF: game_cast::add(uchar *,void *,void	*)+89j
		jmp	loc_153DA
; ---------------------------------------------------------------------------

loc_15362::				; CODE XREF: game_cast::add(uchar *,void *,void	*)+Bj
		push	word ptr [bp+arg_C+2]
		push	word ptr [bp+arg_C] ; __int32
		push	word ptr [bp+arg_8+2]
		push	word ptr [bp+arg_8] ; __int32
		push	word ptr [bp+s2+2]
		push	word ptr [bp+s2] ; s2
		push	0
		push	0		; __int32
		push	cs
		call	near ptr @m_actor@$bctr$qnucnvt2 ; m_actor::m_actor(uchar *,void *,void	*)
		assume es:nothing
		add	sp, 10h
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	bl, es:[bx]
		mov	bh, 0
		shl	bx, 2
		les	si, [bp+arg_0]
		add	si, bx
		mov	es:[si+4], dx
		mov	es:[si+2], ax
		les	bx, [bp+arg_0]
		mov	al, es:[bx]
		mov	ah, 0
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		mov	ax, es:[bx+2]
		or	ax, es:[bx+4]
		jnz	loc_153BD
		push	ds
		push	offset aAddingActorToC ; "Adding actor to cast."
		call	@no_heap$qnuc	; no_heap(uchar	*)
; ---------------------------------------------------------------------------
		add	sp, 4

loc_153BD::				; CODE XREF: game_cast::add(uchar *,void *,void	*)+60j
		les	bx, [bp+arg_0]
		mov	al, es:[bx]
		inc	byte ptr es:[bx]
		mov	ah, 0
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		mov	dx, es:[bx+4]
		mov	ax, es:[bx+2]
		jmp	loc_15360
; ---------------------------------------------------------------------------

loc_153DA::				; CODE XREF: game_cast::add(uchar *,void *,void	*):loc_15360j
		pop	si
		pop	bp
		retf
@game_cast@add$qnucnvt2	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; game_cast::update(unsigned char)
@game_cast@update$quc proc far		; CODE XREF: de_doit(void)+158P
					; scroll_to(m_actor *)+CEP ...

var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= byte ptr  0Ah

		enter	0Ch, 0
		cmp	[bp+arg_4], 0
		jnz	loc_15421
		push	word ptr _ego+2
		push	word ptr _ego
		push	cs
		call	near ptr @m_actor@erase$qv ; m_actor::erase(void)
		assume es:nothing
		add	sp, 4
		mov	[bp+var_2], 0
		jmp	loc_15415
; ---------------------------------------------------------------------------

loc_153FD::				; CODE XREF: game_cast::update(uchar)+40j
		mov	bx, [bp+var_2]
		shl	bx, 2
		push	word_2B8CC[bx]
		push	_ed_list[bx]
		push	cs
		call	near ptr @m_actor@erase$qv ; m_actor::erase(void)
		assume es:nothing
		add	sp, 4
		inc	[bp+var_2]
		assume es:nothing

loc_15415::				; CODE XREF: game_cast::update(uchar)+1Ej
		mov	al, _ed_list_size
		mov	ah, 0
		cmp	ax, [bp+var_2]
		jg	loc_153FD
		assume es:nothing
		jmp	loc_15453
; ---------------------------------------------------------------------------
		assume es:nothing

loc_15421::				; CODE XREF: game_cast::update(uchar)+8j
		mov	[bp+var_2], 0
		jmp	loc_15449
; ---------------------------------------------------------------------------

loc_15428::				; CODE XREF: game_cast::update(uchar)+74j
		mov	bx, [bp+var_2]
		shl	bx, 2
		les	bx, dword ptr _ed_list[bx]
		assume es:nothing
		and	byte ptr es:[bx+52h], 0EFh
		mov	bx, [bp+var_2]
		shl	bx, 2
		les	bx, dword ptr _ed_list[bx]
		and	byte ptr es:[bx+52h], 0FBh
		inc	[bp+var_2]
		assume es:nothing

loc_15449::				; CODE XREF: game_cast::update(uchar)+49j
		mov	al, _ed_list_size
		mov	ah, 0
		cmp	ax, [bp+var_2]
		jg	loc_15428
		assume es:nothing

loc_15453::				; CODE XREF: game_cast::update(uchar)+42j
		mov	_ed_list_size, 0
		mov	[bp+var_2], 0
		jmp	loc_1548F
; ---------------------------------------------------------------------------
		assume es:nothing

loc_1545F::				; CODE XREF: game_cast::update(uchar)+BDj
		mov	ax, [bp+var_2]

loc_15462::
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+2]
		assume es:nothing
		mov	al, es:[bx+52h]
		and	ax, 1
		cmp	ax, 1
		jnz	loc_1548C
		assume es:nothing
		mov	al, byte ptr [bp+var_2]
		push	ax
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @game_cast@remove$quc ; game_cast::remove(uchar)
		assume es:nothing
		add	sp, 6
		assume es:nothing

loc_1548C::				; CODE XREF: game_cast::update(uchar)+9Bj
		inc	[bp+var_2]
		assume es:nothing

loc_1548F::				; CODE XREF: game_cast::update(uchar)+80j
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	al, es:[bx]
		mov	ah, 0
		cmp	ax, [bp+var_2]
		jg	loc_1545F
		les	bx, [bp+arg_0]
		mov	al, es:[bx]
		mov	ah, 0
		and	ax, 0Fh
		mov	[bp+var_6], ax
		les	bx, [bp+arg_0]
		mov	al, es:[bx]
		mov	ah, 0
		sar	ax, 4
		mov	[bp+var_8], ax
		mov	ax, [bp+var_8]
		shl	ax, 4
		mov	[bp+var_A], ax
		mov	ax, [bp+var_A]
		add	ax, [bp+var_6]
		mov	[bp+var_C], ax
		mov	[bp+var_4], 0
		jmp	loc_15874
; ---------------------------------------------------------------------------

loc_154D2::				; CODE XREF: game_cast::update(uchar)+49Fj
		mov	ax, [bp+var_4]
		shl	ax, 4
		mov	[bp+var_2], ax
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@cycle$qv ; m_actor::cycle(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@move$qv ; m_actor::move(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		inc	ax
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@cycle$qv ; m_actor::cycle(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		inc	ax
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@move$qv ; m_actor::move(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		add	ax, 2
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@cycle$qv ; m_actor::cycle(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		add	ax, 2
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@move$qv ; m_actor::move(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		add	ax, 3
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@cycle$qv ; m_actor::cycle(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		add	ax, 3
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@move$qv ; m_actor::move(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		add	ax, 4
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@cycle$qv ; m_actor::cycle(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		add	ax, 4
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@move$qv ; m_actor::move(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		add	ax, 5
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@cycle$qv ; m_actor::cycle(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		add	ax, 5
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@move$qv ; m_actor::move(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		add	ax, 6
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@cycle$qv ; m_actor::cycle(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		add	ax, 6
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@move$qv ; m_actor::move(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		add	ax, 7
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@cycle$qv ; m_actor::cycle(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		add	ax, 7
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@move$qv ; m_actor::move(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		add	ax, 8
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@cycle$qv ; m_actor::cycle(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		add	ax, 8
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@move$qv ; m_actor::move(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		add	ax, 9
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@cycle$qv ; m_actor::cycle(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		add	ax, 9
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@move$qv ; m_actor::move(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		add	ax, 0Ah
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@cycle$qv ; m_actor::cycle(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		add	ax, 0Ah
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@move$qv ; m_actor::move(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		add	ax, 0Bh
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@cycle$qv ; m_actor::cycle(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		add	ax, 0Bh
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@move$qv ; m_actor::move(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		add	ax, 0Ch
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@cycle$qv ; m_actor::cycle(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		add	ax, 0Ch
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@move$qv ; m_actor::move(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		add	ax, 0Dh
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@cycle$qv ; m_actor::cycle(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		add	ax, 0Dh
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@move$qv ; m_actor::move(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		add	ax, 0Eh
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@cycle$qv ; m_actor::cycle(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		add	ax, 0Eh
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@move$qv ; m_actor::move(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		add	ax, 0Fh
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@cycle$qv ; m_actor::cycle(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		add	ax, 0Fh
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@move$qv ; m_actor::move(void)
		assume es:nothing
		add	sp, 4
		inc	[bp+var_4]
		assume es:nothing

loc_15874::				; CODE XREF: game_cast::update(uchar)+F2j
		mov	ax, [bp+var_4]
		cmp	ax, [bp+var_8]
		jge	loc_1587F
		jmp	loc_154D2
; ---------------------------------------------------------------------------
		assume es:nothing

loc_1587F::				; CODE XREF: game_cast::update(uchar)+49Dj
		mov	ax, [bp+var_A]
		mov	[bp+var_2], ax
		jmp	loc_158BE
; ---------------------------------------------------------------------------

loc_15887::				; CODE XREF: game_cast::update(uchar)+4E7j
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@cycle$qv ; m_actor::cycle(void)
		assume es:nothing
		add	sp, 4
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@move$qv ; m_actor::move(void)
		assume es:nothing
		add	sp, 4
		inc	[bp+var_2]
		assume es:nothing

loc_158BE::				; CODE XREF: game_cast::update(uchar)+4A8j
		mov	ax, [bp+var_2]
		cmp	ax, [bp+var_C]
		jl	loc_15887
		assume es:nothing
		push	word ptr _ego+2
		push	word ptr _ego
		push	cs
		call	near ptr @m_actor@draw$qv ; m_actor::draw(void)
		assume es:nothing
		add	sp, 4
		mov	[bp+var_2], 0
		jmp	loc_158F4
; ---------------------------------------------------------------------------

loc_158DC::				; CODE XREF: game_cast::update(uchar)+51Fj
		mov	bx, [bp+var_2]
		shl	bx, 2
		push	word_2B8CC[bx]
		push	_ed_list[bx]
		push	cs
		call	near ptr @m_actor@draw$qv ; m_actor::draw(void)
		assume es:nothing
		add	sp, 4
		inc	[bp+var_2]
		assume es:nothing

loc_158F4::				; CODE XREF: game_cast::update(uchar)+4FDj
		mov	al, _ed_list_size
		mov	ah, 0
		cmp	ax, [bp+var_2]
		jg	loc_158DC
		assume es:nothing
		leave
		retf
@game_cast@update$quc endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; game_cast::kill_all(void)
@game_cast@kill_all$qv proc far		; CODE XREF: play_game(uchar)+63FP

var_1		= byte ptr -1
arg_0		= dword	ptr  6

		enter	2, 0
		mov	[bp+var_1], 0
		jmp	loc_15929
; ---------------------------------------------------------------------------

loc_1590A::				; CODE XREF: game_cast::kill_all(void)+32j
		mov	al, [bp+var_1]
		mov	ah, 0
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @m_actor@erase$qv ; m_actor::erase(void)
		add	sp, 4
		inc	[bp+var_1]

loc_15929::				; CODE XREF: game_cast::kill_all(void)+8j
		les	bx, [bp+arg_0]
		mov	al, es:[bx]
		cmp	al, [bp+var_1]
		ja	loc_1590A
		mov	[bp+var_1], 0
		jmp	loc_1595B
; ---------------------------------------------------------------------------

loc_1593A::				; CODE XREF: game_cast::kill_all(void)+64j
		push	3		; int
		mov	al, [bp+var_1]
		mov	ah, 0
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2] ; block
		push	cs
		call	near ptr @m_actor@$bdtr$qv ; m_actor::~m_actor(void)
		add	sp, 6
		inc	[bp+var_1]

loc_1595B::				; CODE XREF: game_cast::kill_all(void)+38j
		les	bx, [bp+arg_0]
		mov	al, es:[bx]
		cmp	al, [bp+var_1]
		ja	loc_1593A
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx], 0
		mov	_ed_list_size, 0
		leave
		retf
@game_cast@kill_all$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; game_cast::remove(unsigned char)
@game_cast@remove$quc proc far		; CODE XREF: game_cast::update(uchar)+A9p

arg_0		= dword	ptr  6
arg_4		= byte ptr  0Ah

		push	bp
		mov	bp, sp
		push	3		; int
		mov	al, [bp+arg_4]
		mov	ah, 0
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+2] ; block
		push	cs
		call	near ptr @m_actor@$bdtr$qv ; m_actor::~m_actor(void)
		assume es:nothing
		add	sp, 6
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	al, es:[bx]
		mov	ah, 0
		mov	dl, [bp+arg_4]
		mov	dh, 0
		sub	ax, dx
		push	ax
		mov	al, [bp+arg_4]
		mov	ah, 0
		inc	ax
		shl	ax, 2
		mov	dx, word ptr [bp+arg_0]
		add	dx, ax
		add	dx, 2
		push	word ptr [bp+arg_0+2]
		push	dx
		mov	al, [bp+arg_4]
		mov	ah, 0
		shl	ax, 2
		mov	dx, word ptr [bp+arg_0]
		add	dx, ax

loc_159C7::
		add	dx, 2
		push	word ptr [bp+arg_0+2]
		push	dx

loc_159CE::				; DATA XREF: seg2608:_i_external_lefto
					; seg2608:_i_external_righto ...
		call	_my_movsd
		add	sp, 0Ah
		les	bx, [bp+arg_0]
		dec	byte ptr es:[bx]
		pop	bp
		retf
@game_cast@remove$quc endp

seg1224		ends

; ===========================================================================

; Segment type:	Pure code
seg137f		segment	byte public 'CODE' use16
		assume cs:seg137f
		;org 0Eh
		assume es:nothing, ss:nothing, ds:seg2608, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; i_init_interface(void	*, void	*, void	*, void	*, void	*)
@i_init_interface$qnvt1t1t1t1 proc far	; CODE XREF: init_game(void)+170P

arg_0		= dword	ptr  6
arg_4		= dword	ptr  0Ah
arg_8		= dword	ptr  0Eh
arg_C		= dword	ptr  12h
arg_10		= dword	ptr  16h

		push	bp
		mov	bp, sp
		push	0
		push	0
		nop
		push	cs
		call	near ptr @ms_mouse@$bctr$qv ; ms_mouse::ms_mouse(void)
		assume es:nothing
		add	sp, 4
		mov	word ptr _mouse+2, dx
		mov	word ptr _mouse, ax
		push	0
		push	0
		nop
		push	cs

loc_159FA::				; menu_bar::menu_bar(void)
		call	near ptr @menu_bar@$bctr$qv
		assume es:nothing
		add	sp, 4
		mov	word ptr _the_menu_bar+2, dx
		mov	word ptr _the_menu_bar,	ax
		mov	_pd_redraws, 0
		mov	_show_box_on, 0
		mov	_menu_bar_height, 9
		mov	_maximum_text_length, 8
		mov	eax, [bp+arg_0]
		mov	_i_external_left, eax
		mov	eax, [bp+arg_4]
		mov	_i_external_right, eax
		mov	eax, [bp+arg_8]
		mov	_i_external_up,	eax
		mov	eax, [bp+arg_C]
		mov	_i_external_down, eax
		mov	eax, [bp+arg_10]
		mov	_i_external_button, eax
		pop	bp
		retf
@i_init_interface$qnvt1t1t1t1 endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; i_poll_interface(void)
@i_poll_interface$qv proc far		; CODE XREF: activate_menu_bar(void):loc_ADCDP
		push	bp
		mov	bp, sp
		push	word ptr _the_menu_bar+2
		push	word ptr _the_menu_bar

loc_15A50::
		les	bx, _the_menu_bar
		mov	bx, es:[bx]
		call	dword ptr [bx+8]
		add	sp, 4
		pop	bp
		retf
@i_poll_interface$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; i_set_text(unsigned char, unsigned char, unsigned char, unsigned char)
@i_set_text$qucucucuc proc far		; CODE XREF: init_game(void)+1D3P
					; activate_menu_bar(void)+BP ...

arg_0		= byte ptr  6
arg_2		= byte ptr  8
arg_4		= byte ptr  0Ah
arg_6		= byte ptr  0Ch

		push	bp
		mov	bp, sp
		les	bx, _display
		assume es:nothing
		mov	al, [bp+arg_2]
		mov	es:[bx+1], al
		les	bx, _display
		mov	al, [bp+arg_0]
		mov	es:[bx+4], al
		les	bx, _display
		mov	al, [bp+arg_6]
		mov	es:[bx+2], al
		les	bx, _display
		mov	al, [bp+arg_4]
		mov	es:[bx+3], al
		cmp	[bp+arg_2], 0
		jz	loc_15A99
		mov	ax, 1
		jmp	loc_15A9B
; ---------------------------------------------------------------------------

loc_15A99::				; CODE XREF: i_set_text(uchar,uchar,uchar,uchar)+33j
		xor	ax, ax

loc_15A9B::				; CODE XREF: i_set_text(uchar,uchar,uchar,uchar)+38j
		add	al, 9
		mov	_menu_bar_height, al
		pop	bp
		retf
@i_set_text$qucucucuc endp

; ---------------------------------------------------------------------------

; i_no_imp(void)
@i_no_imp$qv:
		push	bp
		mov	bp, sp
		push	0
		push	0
		push	0
		push	ds
		push	offset aThisFeatureHas ; "This feature has not\nbeen implemented "...
		nop
		push	cs
		call	near ptr @i_inform$qnucuct1 ; i_inform(uchar *,uchar,uchar *)
		add	sp, 0Ah
		pop	bp
		retf
; ---------------------------------------------------------------------------

; i_get_int(unsigned char *, unsigned char *)
@i_get_int$qnuct1:
		enter	6, 0
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	0
		push	0
		nop
		push	cs
		call	near ptr @prompt_box@$bctr$qnuc	; prompt_box::prompt_box(uchar *)
		add	sp, 8
		mov	[bp-2],	dx
		mov	[bp-4],	ax
		les	bx, [bp-4]
		assume es:nothing
		mov	eax, [bp+0Ah]
		mov	es:[bx+14h], eax
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		les	bx, [bp-4]
		mov	bx, es:[bx]
		call	dword ptr [bx]
		add	sp, 4
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		les	bx, [bp-4]
		mov	bx, es:[bx]
		call	dword ptr [bx+8]
		add	sp, 4
		les	bx, [bp-4]
		cmp	byte ptr es:[bx+1Dh], 0
		jz	loc_15B23
		push	3
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		nop
		push	cs
		call	near ptr @prompt_box@$bdtr$qv ;	prompt_box::~prompt_box(void)
		add	sp, 6
		mov	ax, 0FFFFh

loc_15B21::				; CODE XREF: seg137f:0170j
		jmp	locret_15B42
; ---------------------------------------------------------------------------

loc_15B23::				; CODE XREF: seg137f:013Cj
		les	bx, [bp-4]
		mov	ax, es:[bx+24h]
		mov	[bp-6],	ax
		push	3
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		nop
		push	cs
		call	near ptr @prompt_box@$bdtr$qv ;	prompt_box::~prompt_box(void)
		add	sp, 6
		mov	ax, [bp-6]
		jmp	loc_15B21
; ---------------------------------------------------------------------------

locret_15B42::				; CODE XREF: seg137f:loc_15B21j
		leave
		retf

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; i_get_string(unsigned	char *,	unsigned char *)
@i_get_string$qnuct1 proc far		; CODE XREF: end_game(void)+11AP
					; seg0fa9:06C6P ...

var_8		= word ptr -8
var_6		= word ptr -6
block		= dword	ptr -4
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= dword	ptr  0Ah

		enter	8, 0
		push	[bp+arg_2]
		push	[bp+arg_0]
		push	0
		push	0
		nop
		push	cs
		call	near ptr @prompt_box@$bctr$qnuc	; prompt_box::prompt_box(uchar *)
		add	sp, 8
		mov	word ptr [bp+block+2], dx
		mov	word ptr [bp+block], ax
		les	bx, [bp+block]
		mov	eax, [bp+arg_4]
		mov	es:[bx+14h], eax
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		les	bx, [bp+block]
		mov	bx, es:[bx]
		call	dword ptr [bx]
		add	sp, 4
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		les	bx, [bp+block]
		mov	bx, es:[bx]
		call	dword ptr [bx+8]
		add	sp, 4
		les	bx, [bp+block]
		cmp	byte ptr es:[bx+1Dh], 0
		jz	loc_15BAF
		push	3		; int
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		nop
		push	cs
		call	near ptr @prompt_box@$bdtr$qv ;	prompt_box::~prompt_box(void)
		add	sp, 6
		xor	dx, dx
		xor	ax, ax

loc_15BAD::				; CODE XREF: i_get_string(uchar	*,uchar	*)+9Aj
		jmp	locret_15BE0
; ---------------------------------------------------------------------------

loc_15BAF::				; CODE XREF: i_get_string(uchar	*,uchar	*)+53j
		les	bx, [bp+block]
		push	word ptr es:[bx+20h]
		push	word ptr es:[bx+1Eh] ; s
		call	_strdup
		add	sp, 4
		mov	[bp+var_6], dx
		mov	[bp+var_8], ax
		push	3		; int
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		nop
		push	cs
		call	near ptr @prompt_box@$bdtr$qv ;	prompt_box::~prompt_box(void)
		add	sp, 6
		mov	dx, [bp+var_6]
		mov	ax, [bp+var_8]
		jmp	loc_15BAD
; ---------------------------------------------------------------------------

locret_15BE0::				; CODE XREF: i_get_string(uchar	*,uchar	*):loc_15BADj
		leave
		retf
@i_get_string$qnuct1 endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far i_load_file(char *src, char	*dest)
@i_load_file$qnuct1 proc far		; CODE XREF: seg0fa9:133AP

path_4		= dword	ptr -8
block		= dword	ptr -4
src		= dword	ptr  6
dest		= dword	ptr  0Ah

		enter	8, 0

loc_15BE6::				; CODE XREF: i_load_file(uchar *,uchar *)+FDj
		push	ds
		push	offset aOpenFile ; "Open File"
		push	0
		push	0
		nop
		push	cs
		call	near ptr @text_box@$bctr$qnuc ;	text_box::text_box(uchar *)
		add	sp, 8
		mov	word ptr [bp+block+2], dx
		mov	word ptr [bp+block], ax
		push	word ptr [bp+src+2]
		push	word ptr [bp+src] ; src
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; __int32
		nop
		push	cs
		call	near ptr @text_box@add_file_box$qnuc ; text_box::add_file_box(uchar *)
		add	sp, 8
		push	0
		push	0
		push	ds
		push	offset aCancel	; "Cancel"
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		nop
		push	cs
		call	near ptr @text_box@add_button$qnucnv ; text_box::add_button(uchar *,void *)
		add	sp, 0Ch
		push	0
		push	0
		push	ds
		push	offset aOk_0	; "Ok"
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		nop
		push	cs
		call	near ptr @text_box@add_button$qnucnv ; text_box::add_button(uchar *,void *)
		add	sp, 0Ch
		push	0
		push	0
		push	ds
		push	offset aCd	; "Cd"
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		nop
		push	cs
		call	near ptr @text_box@add_button$qnucnv ; text_box::add_button(uchar *,void *)
		add	sp, 0Ch
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		les	bx, [bp+block]
		mov	bx, es:[bx]
		call	dword ptr [bx]
		add	sp, 4
		jmp	$+2
; ---------------------------------------------------------------------------

loc_15C65::				; CODE XREF: i_load_file(uchar *,uchar *)+81j
					; i_load_file(uchar *,uchar *)+99j
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		les	bx, [bp+block]
		mov	bx, es:[bx]
		call	dword ptr [bx+8]
		add	sp, 4
		mov	ah, 0
		or	ax, ax
		jz	loc_15C65
		les	bx, [bp+block]
		les	bx, es:[bx+82h]
		cmp	word ptr es:[bx+20h], 0
		jz	loc_15CE2

loc_15C8C::				; CODE XREF: i_load_file(uchar *,uchar *)+EBj
		push	ds
		push	offset aEnterNewPath ; "Enter new path:"
		push	ds
		push	offset aChangeDirector ; "Change Directory"
		push	cs
		call	near ptr @i_get_string$qnuct1 ;	i_get_string(uchar *,uchar *)
		add	sp, 8
		mov	word ptr [bp+path_4+2],	dx
		mov	word ptr [bp+path_4], ax
		cmp	[bp+path_4], 0
		jz	loc_15CCF
		push	word ptr [bp+path_4+2]
		push	word ptr [bp+path_4] ; path
		call	_chdir
		add	sp, 4
		cmp	ax, 0FFFFh
		jnz	loc_15CCF
		push	0		; int
		push	0		; int
		push	0		; char
		push	ds
		push	offset aNotAValidPath_ ; "Not a	valid path."
		nop
		push	cs

loc_15CC7::				; i_inform(uchar *,uchar,uchar *)
		call	near ptr @i_inform$qnucuct1
		add	sp, 0Ah
		jmp	loc_15C8C
; ---------------------------------------------------------------------------

loc_15CCF::				; CODE XREF: i_load_file(uchar *,uchar *)+C4j
					; i_load_file(uchar *,uchar *)+D7j
		push	3		; int
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		nop
		push	cs
		call	near ptr @text_box@$bdtr$qv ; text_box::~text_box(void)
		add	sp, 6
		jmp	loc_15BE6
; ---------------------------------------------------------------------------

loc_15CE2::				; CODE XREF: i_load_file(uchar *,uchar *)+A8j
		les	bx, [bp+block]
		les	bx, es:[bx+18h]
		mov	ax, es:[bx+36h]
		or	ax, es:[bx+38h]
		jz	loc_15D20
		les	bx, [bp+block]
		les	bx, es:[bx+7Ah]
		cmp	word ptr es:[bx+20h], 0
		jnz	loc_15D20
		les	bx, [bp+block]
		les	bx, es:[bx+18h]
		push	word ptr es:[bx+38h]
		push	word ptr es:[bx+36h] ; src
		push	word ptr [bp+dest+2]
		push	word ptr [bp+dest] ; dest
		call	_strcpy
		add	sp, 8
		jmp	loc_15D28
; ---------------------------------------------------------------------------

loc_15D20::				; CODE XREF: i_load_file(uchar *,uchar *)+10Fj
					; i_load_file(uchar *,uchar *)+11Dj
		mov	[bp+dest], 0

loc_15D28::				; CODE XREF: i_load_file(uchar *,uchar *)+13Cj
		push	3		; int
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		nop
		push	cs
		call	near ptr @text_box@$bdtr$qv ; text_box::~text_box(void)
		add	sp, 6
		push	word ptr _mouse+2
		push	word ptr _mouse
		nop
		push	cs
		call	near ptr @ms_mouse@get_event$qv	; ms_mouse::get_event(void)
		add	sp, 4
		mov	dx, word ptr [bp+dest+2]
		mov	ax, word ptr [bp+dest]
		jmp	$+2
; ---------------------------------------------------------------------------

locret_15D50::				; CODE XREF: i_load_file(uchar *,uchar *)+16Cj
		leave
		retf
@i_load_file$qnuct1 endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far i_yes_cancel(char *s, char)
@i_yes_cancel$qnucuc proc far		; CODE XREF: show_high_scores(uchar)+338P
					; print_form(uchar *,uchar)+81P ...

var_5		= byte ptr -5
block		= dword	ptr -4
s		= dword	ptr  6
arg_4		= byte ptr  0Ah

		enter	6, 0
		push	0
		push	0
		push	0
		push	0
		nop
		push	cs
		call	near ptr @text_box@$bctr$qnuc ;	text_box::text_box(uchar *)
		add	sp, 8
		mov	word ptr [bp+block+2], dx
		mov	word ptr [bp+block], ax
		push	word ptr [bp+s+2]
		push	word ptr [bp+s]	; s
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; __int32
		nop
		push	cs
		call	near ptr @parse_box_string$qn8text_boxnuc ; parse_box_string(text_box *,uchar *)
		add	sp, 8
		cmp	[bp+arg_4], 0
		jz	loc_15DA6
		push	0
		push	0
		push	ds
		push	offset aNo	; "No"
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		nop
		push	cs
		call	near ptr @text_box@add_button$qnucnv ; text_box::add_button(uchar *,void *)
		add	sp, 0Ch
		push	0
		push	0
		push	ds
		push	offset aYes	; "Yes"
		jmp	loc_15DC4
; ---------------------------------------------------------------------------

loc_15DA6::				; CODE XREF: i_yes_cancel(uchar	*,uchar)+32j
		push	0
		push	0
		push	ds
		push	offset aCancel_0 ; "Cancel"
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		nop
		push	cs
		call	near ptr @text_box@add_button$qnucnv ; text_box::add_button(uchar *,void *)
		add	sp, 0Ch
		push	0
		push	0
		push	ds
		push	offset aOk_1	; "Ok"

loc_15DC4::				; CODE XREF: i_yes_cancel(uchar	*,uchar)+52j
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		nop
		push	cs
		call	near ptr @text_box@add_button$qnucnv ; text_box::add_button(uchar *,void *)
		add	sp, 0Ch
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		les	bx, [bp+block]
		mov	bx, es:[bx]
		call	dword ptr [bx]
		add	sp, 4
		jmp	$+2
; ---------------------------------------------------------------------------

loc_15DE5::				; CODE XREF: i_yes_cancel(uchar	*,uchar)+91j
					; i_yes_cancel(uchar *,uchar)+A9j
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		les	bx, [bp+block]
		mov	bx, es:[bx]
		call	dword ptr [bx+8]
		add	sp, 4
		mov	ah, 0
		or	ax, ax
		jz	loc_15DE5
		les	bx, [bp+block]
		les	bx, es:[bx+7Ah]
		cmp	word ptr es:[bx+20h], 0
		jz	loc_15E11
		mov	[bp+var_5], 1
		jmp	loc_15E15
; ---------------------------------------------------------------------------

loc_15E11::				; CODE XREF: i_yes_cancel(uchar	*,uchar)+B7j
		mov	[bp+var_5], 0

loc_15E15::				; CODE XREF: i_yes_cancel(uchar	*,uchar)+BDj
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		nop
		push	cs
		call	near ptr @release_box_strings$qn8text_box ; release_box_strings(text_box *)
		add	sp, 4
		push	3		; int
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		nop
		push	cs
		call	near ptr @text_box@$bdtr$qv ; text_box::~text_box(void)
		add	sp, 6
		mov	al, [bp+var_5]
		jmp	$+2
; ---------------------------------------------------------------------------

locret_15E38::				; CODE XREF: i_yes_cancel(uchar	*,uchar)+E4j
		leave
		retf
@i_yes_cancel$qnucuc endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far i_inform(char *s, char, int, int)
@i_inform$qnucuct1 proc	far		; CODE XREF: play_game(uchar)+6F1P
					; end_game(void)+104P ...

var_5		= byte ptr -5
block		= dword	ptr -4
s		= dword	ptr  6
arg_4		= byte ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh

		enter	6, 0
		push	[bp+arg_8]
		push	[bp+arg_6]
		push	0
		push	0
		nop
		push	cs
		call	near ptr @text_box@$bctr$qnuc ;	text_box::text_box(uchar *)
		add	sp, 8
		mov	word ptr [bp+block+2], dx
		mov	word ptr [bp+block], ax
		push	word ptr [bp+s+2]
		push	word ptr [bp+s]	; s
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; __int32
		nop
		push	cs
		call	near ptr @parse_box_string$qn8text_boxnuc ; parse_box_string(text_box *,uchar *)
		add	sp, 8
		push	0
		push	0
		push	ds
		push	offset aOk_2	; "Ok"
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		nop
		push	cs
		call	near ptr @text_box@add_button$qnucnv ; text_box::add_button(uchar *,void *)
		add	sp, 0Ch
		les	bx, [bp+block]
		mov	al, [bp+arg_4]
		mov	es:[bx+6Ch], al
		les	bx, _mouse
		cmp	byte ptr es:[bx+2], 0
		jz	loc_15E9B
		mov	[bp+var_5], 1
		jmp	loc_15EAF
; ---------------------------------------------------------------------------

loc_15E9B::				; CODE XREF: i_inform(uchar *,uchar,uchar *)+59j
		mov	[bp+var_5], 0
		push	word ptr _mouse+2
		push	word ptr _mouse
		nop
		push	cs
		call	near ptr @ms_mouse@show$qv ; ms_mouse::show(void)
		add	sp, 4

loc_15EAF::				; CODE XREF: i_inform(uchar *,uchar,uchar *)+5Fj
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		les	bx, [bp+block]
		mov	bx, es:[bx]
		call	dword ptr [bx]
		add	sp, 4
		jmp	$+2
; ---------------------------------------------------------------------------

loc_15EC2::				; CODE XREF: i_inform(uchar *,uchar,uchar *)+86j
					; i_inform(uchar *,uchar,uchar *)+9Ej
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		les	bx, [bp+block]
		mov	bx, es:[bx]
		call	dword ptr [bx+8]
		add	sp, 4
		mov	ah, 0
		or	ax, ax
		jz	loc_15EC2
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		nop
		push	cs
		call	near ptr @release_box_strings$qn8text_box ; release_box_strings(text_box *)
		add	sp, 4
		push	3		; int
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		nop
		push	cs
		call	near ptr @text_box@$bdtr$qv ; text_box::~text_box(void)
		add	sp, 6
		cmp	[bp+var_5], 0
		jnz	locret_15F0E
		push	word ptr _mouse+2
		push	word ptr _mouse
		nop
		push	cs
		call	near ptr @ms_mouse@hide$qv ; ms_mouse::hide(void)
		add	sp, 4

locret_15F0E::				; CODE XREF: i_inform(uchar *,uchar,uchar *)+C2j
		leave
		retf
@i_inform$qnucuct1 endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far i_show_box(char *s,	int, int, __int32, int,	int)
@i_show_box$qnuciit1t1 proc far		; CODE XREF: seg0fa9:0CF8P

s		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= dword	ptr  0Eh
arg_C		= word ptr  12h
arg_E		= word ptr  14h

		push	bp
		mov	bp, sp
		mov	al, _show_box_on
		mov	ah, 0
		or	ax, ax
		jnz	loc_15F90
		push	[bp+arg_E]
		push	[bp+arg_C]
		push	0
		push	0
		nop
		push	cs
		call	near ptr @text_box@$bctr$qnuc ;	text_box::text_box(uchar *)
		add	sp, 8
		mov	word ptr _show_box+2, dx
		mov	word ptr _show_box, ax
		push	word ptr [bp+s+2]
		push	word ptr [bp+s]	; s
		push	word ptr _show_box+2
		push	word ptr _show_box ; __int32
		nop
		push	cs
		call	near ptr @parse_box_string$qn8text_boxnuc ; parse_box_string(text_box *,uchar *)
		add	sp, 8
		cmp	[bp+arg_8], 0
		jz	loc_15F6E
		push	word ptr [bp+arg_8+2]
		push	word ptr [bp+arg_8]
		push	[bp+arg_6]
		push	[bp+arg_4]
		push	word ptr _show_box+2
		push	word ptr _show_box
		nop
		push	cs
		call	near ptr @text_box@add_bitmap$qiinuc ; text_box::add_bitmap(int,int,uchar *)
		add	sp, 0Ch

loc_15F6E::				; CODE XREF: i_show_box(uchar *,int,int,uchar *,uchar *)+40j
		les	bx, _show_box
		sub	word ptr es:[bx+6], 14h
		push	word ptr _show_box+2
		push	word ptr _show_box
		les	bx, _show_box
		mov	bx, es:[bx]
		call	dword ptr [bx]
		add	sp, 4
		mov	_show_box_on, 1

loc_15F90::				; CODE XREF: i_show_box(uchar *,int,int,uchar *,uchar *)+Aj
		pop	bp
		retf
@i_show_box$qnuciit1t1 endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; i_hide_box(unsigned char)
@i_hide_box$quc	proc far		; CODE XREF: seg0fa9:0D29P

arg_0		= byte ptr  6

		push	bp
		mov	bp, sp
		cmp	_show_box_on, 0
		jz	loc_15FD2
		mov	_show_box_on, 0
		cmp	[bp+arg_0], 0
		jz	loc_15FB0
		les	bx, _show_box
		mov	byte ptr es:[bx+77h], 1

loc_15FB0::				; CODE XREF: i_hide_box(uchar)+13j
		push	word ptr _show_box+2
		push	word ptr _show_box
		nop
		push	cs
		call	near ptr @release_box_strings$qn8text_box ; release_box_strings(text_box *)
		add	sp, 4
		push	3		; int
		push	word ptr _show_box+2
		push	word ptr _show_box ; block
		nop
		push	cs
		call	near ptr @text_box@$bdtr$qv ; text_box::~text_box(void)
		add	sp, 6

loc_15FD2::				; CODE XREF: i_hide_box(uchar)+8j
		pop	bp
		retf
@i_hide_box$quc	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far parse_box_string(__int32, char *s)
@parse_box_string$qn8text_boxnuc proc far ; CODE XREF: i_yes_cancel(uchar *,uchar)+28p
					; i_inform(uchar *,uchar,uchar *)+2Ap ...

dest		= dword	ptr -0Eh
src		= dword	ptr -0Ah
var_6		= dword	ptr -6
var_2		= word ptr -2
arg_0		= dword	ptr  6
s		= dword	ptr  0Ah

		enter	0Eh, 0
		mov	eax, [bp+s]
		mov	[bp+src], eax
		mov	[bp+var_6], eax
		mov	[bp+var_2], 0
		jmp	loc_16093
; ---------------------------------------------------------------------------

loc_15FEC::				; CODE XREF: parse_box_string(text_box *,uchar *)+D2j
		les	bx, [bp+s]
		add	bx, [bp+var_2]
		cmp	byte ptr es:[bx], 0Ah
		jz	loc_16007
		les	bx, [bp+s]
		add	bx, [bp+var_2]
		cmp	byte ptr es:[bx], 0
		jz	loc_16007
		jmp	loc_16090
; ---------------------------------------------------------------------------

loc_16007::				; CODE XREF: parse_box_string(text_box *,uchar *)+22j
					; parse_box_string(text_box *,uchar *)+2Ej
		mov	ax, word ptr [bp+s+2]
		mov	dx, word ptr [bp+s]
		add	dx, [bp+var_2]
		mov	word ptr [bp+var_6+2], ax
		mov	word ptr [bp+var_6], dx
		mov	ax, word ptr [bp+var_6]
		xor	dx, dx
		sub	ax, word ptr [bp+src]
		sbb	dx, 0
		push	dx
		push	ax
		pop	eax
		inc	ax
		push	ax		; unsigned int
		call	@$bnew$qui	; operator new(uint)
		pop	cx
		mov	word ptr [bp+dest+2], dx
		mov	word ptr [bp+dest], ax
		mov	ax, word ptr [bp+var_6]
		xor	dx, dx
		sub	ax, word ptr [bp+src]
		sbb	dx, 0
		push	dx
		push	ax
		pop	eax
		push	ax		; maxlen
		push	word ptr [bp+src+2]
		push	word ptr [bp+src] ; src
		push	word ptr [bp+dest+2]
		push	word ptr [bp+dest] ; dest
		call	_strncpy
		add	sp, 0Ah
		mov	ax, word ptr [bp+var_6]
		xor	dx, dx
		sub	ax, word ptr [bp+src]
		sbb	dx, 0
		push	dx
		push	ax
		pop	eax
		les	bx, [bp+dest]
		add	bx, ax
		mov	byte ptr es:[bx], 0
		push	word ptr [bp+dest+2]
		push	word ptr [bp+dest] ; s
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0] ; __int32
		nop
		push	cs
		call	near ptr @text_box@add_string$qnuc ; text_box::add_string(uchar	*)
		add	sp, 8
		mov	ax, word ptr [bp+var_6+2]
		mov	dx, word ptr [bp+var_6]
		inc	dx
		mov	word ptr [bp+src+2], ax
		mov	word ptr [bp+src], dx

loc_16090::				; CODE XREF: parse_box_string(text_box *,uchar *)+30j
		inc	[bp+var_2]

loc_16093::				; CODE XREF: parse_box_string(text_box *,uchar *)+15j
		push	word ptr [bp+s+2]
		push	word ptr [bp+s]	; s
		call	_strlen
		add	sp, 4
		cmp	ax, [bp+var_2]
		jb	locret_160A9
		jmp	loc_15FEC
; ---------------------------------------------------------------------------

locret_160A9::				; CODE XREF: parse_box_string(text_box *,uchar *)+D0j
		leave
		retf
@parse_box_string$qn8text_boxnuc endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; release_box_strings(text_box *)
@release_box_strings$qn8text_box proc far ; CODE XREF: i_yes_cancel(uchar *,uchar)+CBp
					; i_inform(uchar *,uchar,uchar *)+A8p ...

var_2		= word ptr -2
arg_0		= dword	ptr  6

		enter	2, 0
		mov	[bp+var_2], 0
		jmp	loc_160D4
; ---------------------------------------------------------------------------

loc_160B6::				; CODE XREF: release_box_strings(text_box *)+33j
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		push	word ptr es:[bx+1Eh]
		push	word ptr es:[bx+1Ch] ; block
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4
		inc	[bp+var_2]

loc_160D4::				; CODE XREF: release_box_strings(text_box *)+9j
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+0Ah]
		cmp	ax, [bp+var_2]
		ja	loc_160B6
		leave
		retf
@release_box_strings$qn8text_box endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; draw_shadow_box(int, int, int, int)
@draw_shadow_box$qiiii proc far		; CODE XREF: pull_down::activate(void)+D1p
					; seg137f:1E73p ...

arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch

		push	bp
		mov	bp, sp
		push	0
		les	bx, _display
		assume es:nothing
		mov	al, es:[bx+3]
		mov	ah, 0
		push	ax
		les	bx, _display
		mov	al, es:[bx+2]
		mov	ah, 0
		push	ax
		push	[bp+arg_6]
		push	[bp+arg_4]
		push	[bp+arg_2]
		push	[bp+arg_0]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fill_rect$qiiiiiiuc ; vga_display::fill_rect(int,int,int,int,int,int,uchar)
		assume es:nothing
		add	sp, 12h
		push	0
		push	0FFFFh
		push	0
		mov	ax, [bp+arg_6]
		inc	ax
		push	ax
		mov	ax, [bp+arg_4]
		inc	ax
		push	ax
		push	[bp+arg_6]
		mov	ax, [bp+arg_0]
		add	ax, 2
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fill_rect$qiiiiiiuc ; vga_display::fill_rect(int,int,int,int,int,int,uchar)
		add	sp, 12h
		push	0
		push	0FFFFh
		push	0
		push	[bp+arg_6]
		mov	ax, [bp+arg_4]
		inc	ax
		push	ax
		mov	ax, [bp+arg_2]
		add	ax, 2
		push	ax
		push	[bp+arg_4]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fill_rect$qiiiiiiuc ; vga_display::fill_rect(int,int,int,int,int,int,uchar)
		add	sp, 12h
		pop	bp
		retf
@draw_shadow_box$qiiii endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far high_light(int, int, int, int, char	*s, int, int, char)
@high_light$qiiiinuciiuc proc far	; CODE XREF: pull_down::activate(void)+A3p
					; pull_down::update_cur_selection(void)+88p ...

arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
s		= dword	ptr  0Eh
arg_C		= word ptr  12h
arg_E		= word ptr  14h
arg_10		= byte ptr  16h

		push	bp
		mov	bp, sp
		cmp	[bp+arg_10], 0
		jz	loc_16184
		assume es:nothing
		push	0
		push	0FFFFh
		les	bx, _display
		assume es:nothing
		mov	al, es:[bx+2]
		jmp	loc_16190
; ---------------------------------------------------------------------------
		assume es:nothing

loc_16184::				; CODE XREF: high_light(int,int,int,int,uchar *,int,int,uchar)+7j
		push	0
		push	0FFFFh
		les	bx, _display
		assume es:nothing
		mov	al, es:[bx+3]

loc_16190::				; CODE XREF: high_light(int,int,int,int,uchar *,int,int,uchar)+15j
		mov	ah, 0
		push	ax
		push	[bp+arg_6]
		push	[bp+arg_4]
		push	[bp+arg_2]
		push	[bp+arg_0]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fill_rect$qiiiiiiuc ; vga_display::fill_rect(int,int,int,int,int,int,uchar)
		assume es:nothing
		add	sp, 12h
		push	0		; char
		push	word ptr [bp+s+2]
		push	word ptr [bp+s]	; s
		mov	ax, [bp+arg_2]
		add	ax, [bp+arg_E]
		push	ax		; int
		mov	ax, [bp+arg_0]
		add	ax, [bp+arg_C]
		push	ax		; int
		push	word ptr _display+2 ; int
		push	word ptr _display ; int
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		assume es:seg2608
		add	sp, 0Eh
		pop	bp
		retf
@high_light$qiiiinuciiuc endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; ms_mouse::ms_mouse(void)
@ms_mouse@$bctr$qv proc	far		; CODE XREF: i_init_interface(void *,void *,void *,void	*,void *)+9p

preg		= REGPACK ptr -14h
arg_0		= dword	ptr  6

		enter	14h, 0
		cmp	[bp+arg_0], 0
		jnz	loc_161F7
		push	30h ; '0'       ; unsigned int
		call	@$bnew$qui	; operator new(uint)
		assume es:nothing
		pop	cx
		mov	word ptr [bp+arg_0+2], dx
		mov	word ptr [bp+arg_0], ax
		or	ax, dx
		jnz	loc_161F7
		jmp	loc_162D9
; ---------------------------------------------------------------------------

loc_161F7::				; CODE XREF: ms_mouse::ms_mouse(void)+9j
					; ms_mouse::ms_mouse(void)+1Bj
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	byte ptr es:[bx+1], 1
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx], 0
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+2], 0
		les	bx, [bp+arg_0]
		mov	al, 0
		mov	es:[bx+2Dh], al
		les	bx, [bp+arg_0]
		mov	es:[bx+2Ch], al
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+14h], 0
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+16h], 0
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+1Ch], 0
		mov	ax, word ptr [bp+arg_0]
		add	ax, 1Ch
		push	word ptr [bp+arg_0+2]
		push	ax		; outregs
		mov	ax, word ptr [bp+arg_0]
		add	ax, 1Ch
		push	word ptr [bp+arg_0+2]
		push	ax		; inregs
		push	33h ; '3'       ; intno
		call	_int86
		add	sp, 0Ah
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx+1Ch], 0
		jnz	loc_1626B
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	byte ptr es:[bx+2Eh], 0
		jmp	loc_16273
; ---------------------------------------------------------------------------
		assume es:nothing

loc_1626B::				; CODE XREF: ms_mouse::ms_mouse(void)+88j
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+2Eh], 1

loc_16273::				; CODE XREF: ms_mouse::ms_mouse(void)+92j
		les	bx, _display
		assume es:nothing
		cmp	byte ptr es:[bx], 0
		jnz	loc_162C2
		push	5
		push	5
		push	ds
		push	offset _default_mouse
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @ms_mouse@set_cursor$qnucii ; ms_mouse::set_cursor(uchar *,int,int)
		assume es:nothing
		add	sp, 0Ch
		mov	(REGPACK ptr [bp+preg]).r_ax,	0Ch
		mov	(REGPACK ptr [bp+preg]).r_cx,	1Fh
		mov	(REGPACK ptr [bp+preg]).r_dx,	0C1Dh
		mov	(REGPACK ptr [bp+preg]).r_es,	seg seg137f
		push	ss
		lea	ax, [bp+preg]
		push	ax		; preg
		push	33h ; '3'       ; intno
		call	_intr
		assume es:seg137f
		add	sp, 6
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	dword ptr es:[bx+8], 0

loc_162C2::				; CODE XREF: ms_mouse::ms_mouse(void)+A4j
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+0Ch], 0A0h ; ' '
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+0Eh], 64h ; 'd'
		mov	_m_dont_handle,	0

loc_162D9::				; CODE XREF: ms_mouse::ms_mouse(void)+1Dj
		mov	dx, word ptr [bp+arg_0+2]
		mov	ax, word ptr [bp+arg_0]
		jmp	$+2
; ---------------------------------------------------------------------------

locret_162E1::				; CODE XREF: ms_mouse::ms_mouse(void)+108j
		leave
		retf
@ms_mouse@$bctr$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far ms_mouse::~ms_mouse(void far *block, int)
@ms_mouse@$bdtr$qv proc	far		; CODE XREF: seg0fa9:0A1BP

block		= dword	ptr  6
arg_4		= word ptr  0Ah

		push	bp
		mov	bp, sp
		cmp	[bp+block], 0
		jz	loc_16337
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		nop
		push	cs
		call	near ptr @ms_mouse@hide$qv ; ms_mouse::hide(void)
		add	sp, 4
		les	bx, [bp+block]
		assume es:nothing
		mov	word ptr es:[bx+1Ch], 0
		mov	ax, word ptr [bp+block]
		add	ax, 1Ch
		push	word ptr [bp+block+2]
		push	ax		; outregs
		mov	ax, word ptr [bp+block]
		add	ax, 1Ch
		push	word ptr [bp+block+2]
		push	ax		; inregs
		push	33h ; '3'       ; intno
		call	_int86
		add	sp, 0Ah
		test	[bp+arg_4], 1
		jz	loc_16337
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4

loc_16337::				; CODE XREF: ms_mouse::~ms_mouse(void)+8j
					; ms_mouse::~ms_mouse(void)+44j
		pop	bp
		retf
@ms_mouse@$bdtr$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; ms_mouse::set_cursor(unsigned	char *,	int, int)
@ms_mouse@set_cursor$qnucii proc far	; CODE XREF: init_game(void)+1BEP
					; ms_mouse::ms_mouse(void)+B6p

arg_0		= dword	ptr  6
arg_4		= dword	ptr  0Ah
arg_8		= word ptr  0Eh
arg_A		= word ptr  10h

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	eax, [bp+arg_4]
		mov	es:[bx+4], eax
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_8]
		mov	es:[bx+10h], ax
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_A]
		mov	es:[bx+12h], ax
		pop	bp
		retf
@ms_mouse@set_cursor$qnucii endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; ms_mouse::get_event(void)
@ms_mouse@get_event$qv proc far		; CODE XREF: i_load_file(uchar *,uchar *)+160p

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	byte ptr es:[bx+1], 0
		jmp	$+2
; ---------------------------------------------------------------------------

loc_1636B::				; CODE XREF: ms_mouse::get_event(void)+Bj
					; ms_mouse::get_event(void)+2Aj
		les	bx, [bp+arg_0]
		mov	al, es:[bx+1]
		mov	ah, 0
		or	ax, ax
		jnz	loc_1638A
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @ms_mouse@doit$qv ; ms_mouse::doit(void)
		add	sp, 4
		or	al, al
		jnz	loc_1636B

loc_1638A::				; CODE XREF: ms_mouse::get_event(void)+18j
		pop	bp
		retf
@ms_mouse@get_event$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; ms_mouse::set_coords(int, int)
@ms_mouse@set_coords$qii proc far	; CODE XREF: button::mouse_to_me(void)+54p

arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	word ptr es:[bx+1Ch], 4
		mov	ax, [bp+arg_4]
		shl	ax, 1
		les	bx, [bp+arg_0]
		mov	es:[bx+20h], ax
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_6]
		mov	es:[bx+22h], ax
		mov	ax, word ptr [bp+arg_0]
		add	ax, 1Ch
		push	word ptr [bp+arg_0+2]
		push	ax		; outregs
		mov	ax, word ptr [bp+arg_0]
		add	ax, 1Ch
		push	word ptr [bp+arg_0+2]
		push	ax		; inregs
		push	33h ; '3'       ; intno
		call	_int86
		add	sp, 0Ah
		les	bx, _mouse
		mov	ax, [bp+arg_4]
		mov	es:[bx+0Ch], ax
		les	bx, _mouse
		mov	ax, [bp+arg_6]
		mov	es:[bx+0Eh], ax
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @ms_mouse@get_status$qv ; ms_mouse::get_status(void)
		assume es:nothing
		add	sp, 4
		pop	bp
		retf
@ms_mouse@set_coords$qii endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; ms_mouse::show(void)
@ms_mouse@show$qv proc far		; CODE XREF: activate_menu_bar(void)+F5P
					; show_high_scores(uchar)+2A7P	...

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		assume es:nothing
		cmp	byte ptr es:[bx+2], 0
		jz	loc_16401
		jmp	loc_1647A
; ---------------------------------------------------------------------------

loc_16401::				; CODE XREF: ms_mouse::show(void)+Bj
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+2], 1
		les	bx, _display
		assume es:nothing
		mov	ax, es:[bx+8]
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	es:[bx+14h], ax
		les	bx, _display
		assume es:nothing
		mov	ax, es:[bx+0Ah]
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	es:[bx+16h], ax
		les	bx, _display
		assume es:nothing
		mov	word ptr es:[bx+8], 140h
		les	bx, _display
		mov	word ptr es:[bx+0Ah], 0C8h ; 'È'
		les	bx, _display
		mov	al, es:[bx]
		mov	ah, 0
		or	ax, ax
		jz	loc_1644A
		jmp	loc_16451
; ---------------------------------------------------------------------------

loc_1644A::				; CODE XREF: ms_mouse::show(void)+54j
		nop
		push	cs
		call	near ptr @draw_mouse$qv	; draw_mouse(void)
		assume es:nothing
		jmp	loc_1647A
; ---------------------------------------------------------------------------

loc_16451::				; CODE XREF: ms_mouse::show(void)+56j
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	word ptr es:[bx+1Ch], 1
		mov	ax, word ptr [bp+arg_0]
		add	ax, 1Ch
		push	word ptr [bp+arg_0+2]
		push	ax		; outregs
		mov	ax, word ptr [bp+arg_0]
		add	ax, 1Ch
		push	word ptr [bp+arg_0+2]
		push	ax		; inregs
		push	33h ; '3'       ; intno
		call	_int86
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------
		assume es:nothing

loc_1647A::				; CODE XREF: ms_mouse::show(void)+Dj
					; ms_mouse::show(void)+5Dj ...
		pop	bp
		retf
@ms_mouse@show$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; ms_mouse::hide(void)
@ms_mouse@hide$qv proc far		; CODE XREF: activate_menu_bar(void)+136P
					; show_high_scores(uchar)+373P	...

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	al, es:[bx+2]
		mov	ah, 0
		or	ax, ax
		jnz	loc_1648E
		jmp	loc_164F3
; ---------------------------------------------------------------------------

loc_1648E::				; CODE XREF: ms_mouse::hide(void)+Ej
		les	bx, _display
		assume es:nothing
		mov	al, es:[bx]
		mov	ah, 0
		or	ax, ax
		jz	loc_1649D
		jmp	loc_164A4
; ---------------------------------------------------------------------------

loc_1649D::				; CODE XREF: ms_mouse::hide(void)+1Dj
		nop
		push	cs
		call	near ptr @erase_mouse$qv ; erase_mouse(void)
		assume es:nothing
		jmp	loc_164CD
; ---------------------------------------------------------------------------

loc_164A4::				; CODE XREF: ms_mouse::hide(void)+1Fj
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	word ptr es:[bx+1Ch], 2
		mov	ax, word ptr [bp+arg_0]
		add	ax, 1Ch
		push	word ptr [bp+arg_0+2]
		push	ax		; outregs
		mov	ax, word ptr [bp+arg_0]
		add	ax, 1Ch
		push	word ptr [bp+arg_0+2]
		push	ax		; inregs
		push	33h ; '3'       ; intno
		call	_int86
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------
		assume es:nothing

loc_164CD::				; CODE XREF: ms_mouse::hide(void)+26j
					; ms_mouse::hide(void)+4Fj
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+14h]
		les	bx, _display
		assume es:nothing
		mov	es:[bx+8], ax
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+16h]
		les	bx, _display
		assume es:nothing
		mov	es:[bx+0Ah], ax
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	byte ptr es:[bx+2], 0

loc_164F3::				; CODE XREF: ms_mouse::hide(void)+10j
		pop	bp
		retf
@ms_mouse@hide$qv endp

; ---------------------------------------------------------------------------

; ms_mouse::button_press(unsigned char)
@ms_mouse@button_press$quc:
		push	bp
		mov	bp, sp
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		nop
		push	cs
		call	near ptr @ms_mouse@get_status$qv ; ms_mouse::get_status(void)
		add	sp, 4
		mov	al, [bp+0Ah]
		mov	ah, 0
		or	ax, ax
		jnz	loc_1651C
		les	bx, [bp+6]
		assume es:nothing
		cmp	byte ptr es:[bx], 0
		jz	loc_1651C

loc_16518::				; CODE XREF: seg137f:0B5Cj
					; seg137f:0B6Ej
		mov	al, 1

loc_1651A::				; CODE XREF: seg137f:0B72j
		jmp	loc_16544
; ---------------------------------------------------------------------------

loc_1651C::				; CODE XREF: seg137f:0B3Dj
					; seg137f:0B46j
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+2Ch], 0
		jz	loc_1652E
		cmp	byte ptr [bp+0Ah], 1
		jnz	loc_1652E
		jmp	loc_16518
; ---------------------------------------------------------------------------

loc_1652E::				; CODE XREF: seg137f:0B54j
					; seg137f:0B5Aj
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+2Dh], 0
		jz	loc_16540
		cmp	byte ptr [bp+0Ah], 3
		jnz	loc_16540
		jmp	loc_16518
; ---------------------------------------------------------------------------

loc_16540::				; CODE XREF: seg137f:0B66j
					; seg137f:0B6Cj
		mov	al, 0
		jmp	loc_1651A
; ---------------------------------------------------------------------------

loc_16544::				; CODE XREF: seg137f:loc_1651Aj
		pop	bp
		retf
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; ms_mouse::in_box(int,	int, int, int)
@ms_mouse@in_box$qiiii proc far		; CODE XREF: ms_mouse::pressed_in_box(int,int,int,int)+24p
					; seg137f:156Ap ...

arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh
arg_A		= word ptr  10h

		push	bp
		mov	bp, sp
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @ms_mouse@get_status$qv ; ms_mouse::get_status(void)
		assume es:nothing
		add	sp, 4
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+0Ch]
		cmp	ax, [bp+arg_4]
		jl	loc_1656F
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+0Ch]
		cmp	ax, [bp+arg_8]
		jle	loc_16573

loc_1656F::				; CODE XREF: ms_mouse::in_box(int,int,int,int)+1Bj
					; ms_mouse::in_box(int,int,int,int):loc_1658Bj
		mov	al, 0

loc_16571::				; CODE XREF: ms_mouse::in_box(int,int,int,int)+49j
		jmp	loc_16591
; ---------------------------------------------------------------------------

loc_16573::				; CODE XREF: ms_mouse::in_box(int,int,int,int)+27j
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+0Eh]
		cmp	ax, [bp+arg_6]
		jl	loc_1658B
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+0Eh]
		cmp	ax, [bp+arg_A]
		jle	loc_1658D

loc_1658B::				; CODE XREF: ms_mouse::in_box(int,int,int,int)+37j
		jmp	loc_1656F
; ---------------------------------------------------------------------------

loc_1658D::				; CODE XREF: ms_mouse::in_box(int,int,int,int)+43j
		mov	al, 1
		jmp	loc_16571
; ---------------------------------------------------------------------------

loc_16591::				; CODE XREF: ms_mouse::in_box(int,int,int,int):loc_16571j
		pop	bp
		retf
@ms_mouse@in_box$qiiii endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; ms_mouse::pressed_in_box(int,	int, int, int)
@ms_mouse@pressed_in_box$qiiii proc far	; CODE XREF: seg137f:1BC0p
					; seg137f:2072p ...

arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh
arg_A		= word ptr  10h

		push	bp
		mov	bp, sp
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @ms_mouse@get_status$qv ; ms_mouse::get_status(void)
		assume es:nothing
		add	sp, 4
		push	[bp+arg_A]
		push	[bp+arg_8]
		push	[bp+arg_6]
		push	[bp+arg_4]
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		push	cs
		call	near ptr @ms_mouse@in_box$qiiii	; ms_mouse::in_box(int,int,int,int)
		assume es:nothing
		add	sp, 0Ch
		or	al, al
		jz	loc_165D0
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx], 0
		jz	loc_165D0
		mov	al, 1

loc_165CC::				; CODE XREF: ms_mouse::pressed_in_box(int,int,int,int)+3Fj
		jmp	loc_165D4
; ---------------------------------------------------------------------------
		jmp	loc_165D4
; ---------------------------------------------------------------------------

loc_165D0::				; CODE XREF: ms_mouse::pressed_in_box(int,int,int,int)+2Cj
					; ms_mouse::pressed_in_box(int,int,int,int)+35j
		mov	al, 0
		jmp	loc_165CC
; ---------------------------------------------------------------------------

loc_165D4::				; CODE XREF: ms_mouse::pressed_in_box(int,int,int,int):loc_165CCj
					; ms_mouse::pressed_in_box(int,int,int,int)+3Bj
		pop	bp
		retf
@ms_mouse@pressed_in_box$qiiii endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; ms_mouse::doit(void)
@ms_mouse@doit$qv proc far		; CODE XREF: ms_mouse::get_event(void)+22p

arg_0		= word ptr  6
arg_2		= word ptr  8

		push	bp
		mov	bp, sp
		push	[bp+arg_2]
		push	[bp+arg_0]
		nop
		push	cs
		call	near ptr @ms_mouse@get_status$qv ; ms_mouse::get_status(void)
		add	sp, 4
		mov	al, 1
		jmp	$+2
; ---------------------------------------------------------------------------

loc_165EB::				; CODE XREF: ms_mouse::doit(void)+13j
		pop	bp
		retf
@ms_mouse@doit$qv endp

; ---------------------------------------------------------------------------
		assume es:seg2608

; mouse_handler(void)
@mouse_handler$qv:
		enter	6, 0
		push	ds
		mov	ax, seg	seg2608
		mov	ds, ax
		cmp	_m_dont_handle,	0
		jz	loc_16601
		assume es:nothing
		jmp	loc_16691
; ---------------------------------------------------------------------------
		assume es:seg2608

loc_16601::				; CODE XREF: seg137f:0C2Cj
		mov	[bp-2],	bx
		mov	ax, cx
		shr	ax, 1
		mov	[bp-4],	ax
		mov	[bp-6],	dx
		les	bx, _mouse
		assume es:nothing
		cmp	byte ptr es:[bx+2], 1
		jnz	loc_1661E
		nop
		push	cs
		call	near ptr @erase_mouse$qv ; erase_mouse(void)

loc_1661E::				; CODE XREF: seg137f:0C47j
		les	bx, _mouse
		mov	ax, [bp-4]
		mov	es:[bx+0Ch], ax
		les	bx, _mouse
		mov	ax, [bp-6]
		mov	es:[bx+0Eh], ax
		les	bx, _mouse
		mov	al, [bp-2]
		and	al, 1
		mov	es:[bx+2Ch], al
		les	bx, _mouse
		mov	al, [bp-2]
		and	al, 2
		mov	es:[bx+2Dh], al
		les	bx, _mouse
		mov	al, es:[bx+2Ch]
		les	bx, _mouse
		mov	es:[bx], al
		les	bx, _mouse
		mov	al, es:[bx+1]
		mov	ah, 0
		or	ax, ax
		jnz	loc_16681
		les	bx, _mouse
		assume es:nothing
		mov	al, es:[bx]
		mov	ah, 0
		or	ax, ax
		jnz	loc_16681
		les	bx, _mouse
		mov	byte ptr es:[bx+1], 1
		assume es:nothing

loc_16681::				; CODE XREF: seg137f:0C99j
					; seg137f:0CA6j
		les	bx, _mouse
		cmp	byte ptr es:[bx+2], 1
		jnz	loc_16691
		nop
		push	cs
		call	near ptr @draw_mouse$qv	; draw_mouse(void)

loc_16691::				; CODE XREF: seg137f:0C2Ej
					; seg137f:0CBAj
		pop	ds
		leave
		retf
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; draw_mouse(void)
@draw_mouse$qv	proc far		; CODE XREF: ms_mouse::show(void)+5Ap
					; seg137f:0CBEp
		push	bp
		mov	bp, sp
		les	bx, _mouse
		assume es:nothing
		mov	ax, es:[bx+0Ch]
		and	ax, 0FFFCh
		les	bx, _mouse
		mov	es:[bx+18h], ax
		les	bx, _mouse
		mov	ax, es:[bx+10h]
		and	ax, 0FFFCh
		add	ax, 4
		les	bx, _mouse
		mov	es:[bx+1Ah], ax
		mov	_m_dont_handle,	1
		les	bx, _mouse
		push	word ptr es:[bx+1Ah]
		push	140h
		push	0CAD0h
		push	0
		push	0
		push	0
		les	bx, _mouse
		mov	ax, es:[bx+0Eh]
		les	bx, _mouse
		add	ax, es:[bx+12h]
		push	ax
		les	bx, _mouse
		mov	ax, es:[bx+18h]
		les	bx, _mouse
		add	ax, es:[bx+1Ah]
		push	ax
		les	bx, _mouse
		push	word ptr es:[bx+0Eh]
		les	bx, _mouse
		push	word ptr es:[bx+18h]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@copy_bits$qiiiiiiuiuiuiui ; vga_display::copy_bits(int,int,int,int,int,int,uint,uint,uint,uint)
		assume es:nothing
		add	sp, 18h
		push	0
		push	0
		push	0
		les	bx, _mouse
		assume es:nothing
		push	word ptr es:[bx+6]
		push	word ptr es:[bx+4]
		les	bx, _mouse
		mov	ax, es:[bx+0Eh]
		les	bx, _mouse
		add	ax, es:[bx+12h]
		push	ax
		les	bx, _mouse
		mov	ax, es:[bx+0Ch]
		les	bx, _mouse
		add	ax, es:[bx+10h]
		push	ax
		les	bx, _mouse
		push	word ptr es:[bx+0Eh]
		les	bx, _mouse
		push	word ptr es:[bx+0Ch]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@put_bits_masked$qiiiinucuiuiuc ; vga_display::put_bits_masked(int,int,int,int,uchar *,uint,uint,uchar)
		assume es:nothing
		add	sp, 16h
		mov	_m_dont_handle,	0
		pop	bp
		retf
@draw_mouse$qv	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; erase_mouse(void)
@erase_mouse$qv	proc far		; CODE XREF: ms_mouse::hide(void)+23p
					; seg137f:0C4Bp
		push	bp
		mov	bp, sp
		mov	_m_dont_handle,	1
		push	140h
		les	bx, _mouse
		assume es:nothing
		push	word ptr es:[bx+1Ah]
		push	0
		push	0CAD0h
		les	bx, _mouse
		push	word ptr es:[bx+0Eh]
		les	bx, _mouse
		push	word ptr es:[bx+18h]
		les	bx, _mouse
		push	word ptr es:[bx+12h]
		les	bx, _mouse
		push	word ptr es:[bx+1Ah]
		push	0
		push	0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@copy_bits$qiiiiiiuiuiuiui ; vga_display::copy_bits(int,int,int,int,int,int,uint,uint,uint,uint)
		assume es:nothing
		add	sp, 18h
		mov	_m_dont_handle,	0
		pop	bp
		retf
@erase_mouse$qv	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; ms_mouse::get_status(void)
@ms_mouse@get_status$qv	proc far	; CODE XREF: ms_mouse::set_coords(int,int)+5Ep
					; seg137f:0B30p ...

var_2		= word ptr -2
arg_0		= dword	ptr  6

		enter	2, 0
		les	bx, _display
		assume es:nothing
		cmp	byte ptr es:[bx], 0
		jnz	loc_167DA
		jmp	locret_16893
; ---------------------------------------------------------------------------

loc_167DA::				; CODE XREF: ms_mouse::get_status(void)+Cj
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	word ptr es:[bx+1Ch], 3
		mov	ax, word ptr [bp+arg_0]
		add	ax, 1Ch
		push	word ptr [bp+arg_0+2]
		push	ax		; outregs
		mov	ax, word ptr [bp+arg_0]
		add	ax, 1Ch
		push	word ptr [bp+arg_0+2]
		push	ax		; inregs
		push	33h ; '3'       ; intno
		call	_int86
		add	sp, 0Ah
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+20h]
		shr	ax, 1
		les	bx, [bp+arg_0]
		mov	es:[bx+0Ch], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+22h]
		les	bx, [bp+arg_0]
		mov	es:[bx+0Eh], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+1Eh]
		and	ax, 7
		mov	[bp+var_2], ax
		cmp	[bp+var_2], 0
		jz	loc_1683B
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx], 1
		jmp	loc_16842
; ---------------------------------------------------------------------------

loc_1683B::				; CODE XREF: ms_mouse::get_status(void)+67j
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx], 0

loc_16842::				; CODE XREF: ms_mouse::get_status(void)+70j
		cmp	[bp+var_2], 1
		jnz	loc_16852
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+2Ch], 1
		jmp	loc_1685A
; ---------------------------------------------------------------------------

loc_16852::				; CODE XREF: ms_mouse::get_status(void)+7Dj
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+2Ch], 0

loc_1685A::				; CODE XREF: ms_mouse::get_status(void)+87j
		cmp	[bp+var_2], 2
		jnz	loc_1686A
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+2Dh], 1
		jmp	loc_16872
; ---------------------------------------------------------------------------

loc_1686A::				; CODE XREF: ms_mouse::get_status(void)+95j
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+2Dh], 0

loc_16872::				; CODE XREF: ms_mouse::get_status(void)+9Fj
		les	bx, [bp+arg_0]
		mov	al, es:[bx+1]
		mov	ah, 0
		or	ax, ax
		jnz	locret_16893
		les	bx, [bp+arg_0]
		mov	al, es:[bx]
		mov	ah, 0
		or	ax, ax
		jnz	locret_16893
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+1], 1
		assume es:nothing

locret_16893::				; CODE XREF: ms_mouse::get_status(void)+Ej
					; ms_mouse::get_status(void)+B4j ...
		leave
		retf
@ms_mouse@get_status$qv	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; gui_item::gui_item(void)
@gui_item@$bctr$qv proc	far		; CODE XREF: pull_down::pull_down(uchar	*)+23p
					; menu_bar::menu_bar(void)+23p	...

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		cmp	[bp+arg_0], 0
		jnz	loc_168B1
		push	14h		; unsigned int
		call	@$bnew$qui	; operator new(uint)
		pop	cx
		mov	word ptr [bp+arg_0+2], dx
		mov	word ptr [bp+arg_0], ax
		or	ax, dx
		jz	loc_168F3

loc_168B1::				; CODE XREF: gui_item::gui_item(void)+8j
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	word ptr es:[bx], offset @gui_item@ ; `__vtable__'[gui_item]
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+0Ch], 0
		les	bx, [bp+arg_0]
		mov	dword ptr es:[bx+0Eh], 0
		les	bx, [bp+arg_0]
		xor	ax, ax
		mov	es:[bx+0Ah], ax
		les	bx, [bp+arg_0]
		mov	es:[bx+8], ax
		les	bx, [bp+arg_0]
		mov	es:[bx+6], ax
		les	bx, [bp+arg_0]
		mov	es:[bx+4], ax
		les	bx, [bp+arg_0]
		mov	es:[bx+2], ax

loc_168F3::				; CODE XREF: gui_item::gui_item(void)+1Aj
		mov	dx, word ptr [bp+arg_0+2]
		mov	ax, word ptr [bp+arg_0]
		jmp	$+2
; ---------------------------------------------------------------------------

loc_168FB::				; CODE XREF: gui_item::gui_item(void)+64j
		pop	bp
		retf
@gui_item@$bctr$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; pull_down::pull_down(unsigned	char *)
@pull_down@$bctr$qnuc proc far		; CODE XREF: setup_options(void)+15P
					; setup_options(void)+89P ...

arg_0		= dword	ptr  6
arg_4		= dword	ptr  0Ah

		push	bp
		mov	bp, sp
		cmp	[bp+arg_0], 0
		jnz	loc_16919
		push	6Eh ; 'n'       ; unsigned int
		call	@$bnew$qui	; operator new(uint)
		assume es:nothing
		pop	cx
		mov	word ptr [bp+arg_0+2], dx
		mov	word ptr [bp+arg_0], ax
		or	ax, dx
		jz	loc_16962

loc_16919::				; CODE XREF: pull_down::pull_down(uchar	*)+8j
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		push	cs
		call	near ptr @gui_item@$bctr$qv ; gui_item::gui_item(void)
		assume es:nothing
		add	sp, 4
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx], offset @pull_down@ ; `__vtable__'[pull_down]
		les	bx, [bp+arg_0]
		mov	eax, [bp+arg_4]
		mov	es:[bx+64h], eax
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+66h]
		push	word ptr es:[bx+64h] ; s
		call	_strlen
		assume es:seg2608
		add	sp, 4
		shl	al, 3
		inc	al
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	es:[bx+68h], al
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+6Ah], 0FFFFh

loc_16962::				; CODE XREF: pull_down::pull_down(uchar	*)+1Aj
		mov	dx, word ptr [bp+arg_0+2]
		mov	ax, word ptr [bp+arg_0]
		jmp	$+2
; ---------------------------------------------------------------------------

loc_1696A::				; CODE XREF: pull_down::pull_down(uchar	*)+6Bj
		pop	bp
		retf
@pull_down@$bctr$qnuc endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far pull_down::add_item(__int32, char *s, __int32)
@pull_down@add_item$qnucnv proc	far	; CODE XREF: setup_options(void)+33P
					; setup_options(void)+4BP ...

var_4		= dword	ptr -4
arg_0		= dword	ptr  6
s		= dword	ptr  0Ah
arg_8		= dword	ptr  0Eh

		enter	4, 0
		push	0Ah		; unsigned int
		call	@$bnew$qui	; operator new(uint)
		assume es:nothing
		pop	cx
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		les	bx, [bp+var_4]
		assume es:nothing
		mov	byte ptr es:[bx+4], 1
		les	bx, [bp+var_4]
		mov	eax, [bp+s]
		mov	es:[bx], eax
		les	bx, [bp+var_4]
		mov	eax, [bp+arg_8]
		mov	es:[bx+6], eax
		push	word ptr [bp+s+2]
		push	word ptr [bp+s]	; s
		call	_strlen
		assume es:seg2608
		add	sp, 4
		shl	ax, 3
		add	ax, 18h
		les	bx, [bp+arg_0]
		assume es:nothing
		cmp	ax, es:[bx+8]
		jbe	loc_169D5
		push	word ptr [bp+s+2]
		push	word ptr [bp+s]	; s
		call	_strlen
		assume es:seg2608
		add	sp, 4
		shl	ax, 3
		add	ax, 18h
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	es:[bx+8], ax

loc_169D5::				; CODE XREF: pull_down::add_item(uchar *,void *)+4Cj
		les	bx, [bp+arg_0]
		add	word ptr es:[bx+6], 0Ch
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+0Ah]
		inc	word ptr es:[bx+0Ah]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		mov	ax, word ptr [bp+var_4+2]
		mov	dx, word ptr [bp+var_4]
		mov	es:[bx+16h], ax
		mov	es:[bx+14h], dx
		leave
		retf
@pull_down@add_item$qnucnv endp

; ---------------------------------------------------------------------------

; pull_down::draw(void)
@pull_down@draw$qv:			; DATA XREF: seg2608:`__vtable__'[pull_down]o
		push	bp
		mov	bp, sp
		push	0
		les	bx, [bp+6]
		push	word ptr es:[bx+66h]
		push	word ptr es:[bx+64h]

loc_16A10::
		les	bx, [bp+6]
		push	word ptr es:[bx+4]
		les	bx, [bp+6]
		mov	ax, es:[bx+2]
		add	ax, 8
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		assume es:seg2608
		add	sp, 0Eh
		pop	bp
		retf
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; pull_down::activate(void)
@pull_down@activate$qv proc far		; CODE XREF: seg137f:1AEAp
					; seg137f:1B2Ap ...

var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= byte ptr -2
var_1		= byte ptr -1
arg_0		= dword	ptr  6

		enter	0Ah, 0
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+2]
		mov	[bp+var_4], ax
		les	bx, [bp+arg_0]
		mov	al, es:[bx+68h]
		mov	ah, 0
		les	bx, [bp+arg_0]
		mov	dx, es:[bx+2]
		add	dx, ax
		add	dx, 12h
		mov	[bp+var_6], dx
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@hide$qv ; ms_mouse::hide(void)
		assume es:nothing
		add	sp, 4
		mov	al, _menu_bar_height
		mov	ah, 0
		inc	ax
		les	bx, [bp+arg_0]
		assume es:nothing
		add	ax, es:[bx+6]
		add	ax, 2
		push	ax
		les	bx, [bp+arg_0]
		mov	ax, [bp+var_4]
		add	ax, es:[bx+8]
		push	ax
		push	0
		push	[bp+var_4]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@get_bits$qiiii ; vga_display::get_bits(int,int,int,int)
		assume es:nothing
		add	sp, 0Ch
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	es:[bx+10h], dx
		mov	es:[bx+0Eh], ax
		push	1
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@pause$qui ; vga_display::pause(uint)
		add	sp, 6
		push	0		; char
		push	1		; int
		push	8		; int
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+66h]
		push	word ptr es:[bx+64h] ; s
		mov	al, _menu_bar_height
		mov	ah, 0
		push	ax		; int
		push	[bp+var_6]	; int
		push	0		; int
		push	[bp+var_4]	; int
		push	cs
		call	near ptr @high_light$qiiiinuciiuc ; high_light(int,int,int,int,uchar *,int,int,uchar)
		assume es:seg2608
		add	sp, 12h
		mov	al, _menu_bar_height
		mov	ah, 0
		les	bx, [bp+arg_0]
		assume es:nothing
		add	ax, es:[bx+6]
		add	ax, 2
		push	ax
		mov	ax, [bp+var_4]
		add	ax, 0FFFEh
		les	bx, [bp+arg_0]
		add	ax, es:[bx+8]
		push	ax
		mov	al, _menu_bar_height
		mov	ah, 0
		push	ax
		push	[bp+var_4]
		push	cs
		call	near ptr @draw_shadow_box$qiiii	; draw_shadow_box(int,int,int,int)
		assume es:nothing
		add	sp, 8
		mov	al, _menu_bar_height
		mov	ah, 0
		add	ax, 3
		mov	[bp+var_A], ax
		mov	[bp+var_8], 0
		jmp	loc_16BEC
; ---------------------------------------------------------------------------
		assume es:nothing

loc_16B1E::				; CODE XREF: pull_down::activate(void)+1C4j
		mov	ax, [bp+var_8]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+14h]
		assume es:nothing
		cmp	byte ptr es:[bx+4], 1
		jnz	loc_16B68
		push	0		; char
		mov	ax, [bp+var_8]
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		les	bx, es:[bx+14h]
		assume es:nothing
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; s
		push	[bp+var_A]	; int
		mov	ax, [bp+var_4]
		add	ax, 8
		push	ax		; int
		push	word ptr _display+2 ; int
		push	word ptr _display ; int
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		assume es:seg2608
		add	sp, 0Eh
		jmp	loc_16BE5
; ---------------------------------------------------------------------------
		assume es:nothing

loc_16B68::				; CODE XREF: pull_down::activate(void)+FEj
		les	bx, _display
		assume es:nothing
		mov	al, es:[bx+1]
		mov	[bp+var_1], al
		les	bx, _display
		mov	al, es:[bx+4]
		mov	[bp+var_2], al
		les	bx, _display
		mov	al, es:[bx+3]
		les	bx, _display
		mov	es:[bx+4], al
		cmp	[bp+var_1], 0
		jz	loc_16B9D
		les	bx, _display
		mov	byte ptr es:[bx+1], 1

loc_16B9D::				; CODE XREF: pull_down::activate(void)+15Ej
		push	0		; char
		mov	ax, [bp+var_8]
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		les	bx, es:[bx+14h]
		assume es:nothing
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; s
		push	[bp+var_A]	; int
		mov	ax, [bp+var_4]
		add	ax, 8
		push	ax		; int
		push	word ptr _display+2 ; int
		push	word ptr _display ; int
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		assume es:seg2608
		add	sp, 0Eh
		les	bx, _display
		assume es:nothing
		mov	al, [bp+var_2]
		mov	es:[bx+4], al
		les	bx, _display
		mov	al, [bp+var_1]
		mov	es:[bx+1], al
		assume es:seg2608

loc_16BE5::				; CODE XREF: pull_down::activate(void)+132j
		add	[bp+var_A], 0Ch
		inc	[bp+var_8]
		assume es:nothing

loc_16BEC::				; CODE XREF: pull_down::activate(void)+E7j
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+0Ah]
		cmp	ax, [bp+var_8]
		jbe	loc_16BFB
		jmp	loc_16B1E
; ---------------------------------------------------------------------------

loc_16BFB::				; CODE XREF: pull_down::activate(void)+1C2j
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+6Ah], 0
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @pull_down@update_cur_selection$qv ; pull_down::update_cur_selection(void)
		assume es:seg2608
		add	sp, 4
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@show$qv ; ms_mouse::show(void)
		assume es:nothing
		add	sp, 4
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	bx, es:[bx]
		call	dword ptr [bx+8]
		add	sp, 4
		jmp	$+2
; ---------------------------------------------------------------------------

locret_16C35::				; CODE XREF: pull_down::activate(void)+1FFj
		leave
		retf
@pull_down@activate$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; pull_down::update_cur_selection(void)
@pull_down@update_cur_selection$qv proc	far ; CODE XREF: pull_down::activate(void)+1D8p
					; pull_down::increase_cur_selection(void)+4Cp ...

var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6

		enter	8, 0
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+6Ah]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+14h]
		assume es:nothing
		cmp	byte ptr es:[bx+4], 1
		jnz	locret_16CC5
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+2]
		inc	ax
		mov	[bp+var_2], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2]
		les	bx, [bp+arg_0]
		add	ax, es:[bx+8]
		sub	ax, 3
		mov	[bp+var_4], ax
		mov	al, _menu_bar_height
		mov	ah, 0
		les	bx, [bp+arg_0]
		mov	dx, es:[bx+6Ah]
		imul	dx, 0Ch
		add	ax, dx
		inc	ax
		mov	[bp+var_6], ax
		mov	ax, [bp+var_6]
		add	ax, 0Ch
		mov	[bp+var_8], ax
		push	0		; char
		push	2		; int
		push	7		; int
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+6Ah]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+14h]
		assume es:nothing
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; s
		push	[bp+var_8]	; int
		push	[bp+var_4]	; int
		push	[bp+var_6]	; int
		push	[bp+var_2]	; int
		push	cs
		call	near ptr @high_light$qiiiinuciiuc ; high_light(int,int,int,int,uchar *,int,int,uchar)
		assume es:seg2608
		add	sp, 12h

locret_16CC5::				; CODE XREF: pull_down::update_cur_selection(void)+1Cj
		leave
		retf
@pull_down@update_cur_selection$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; pull_down::erase_cur_selection(void)
@pull_down@erase_cur_selection$qv proc far
					; CODE XREF: pull_down::increase_cur_selection(void)+1Ap
					; pull_down::decrease_cur_selection(void)+19p ...

var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6

		enter	8, 0
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+6Ah]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+14h]
		assume es:nothing
		cmp	byte ptr es:[bx+4], 1
		jnz	locret_16D55
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+2]
		inc	ax
		mov	[bp+var_2], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2]
		les	bx, [bp+arg_0]
		add	ax, es:[bx+8]
		sub	ax, 3
		mov	[bp+var_4], ax
		mov	al, _menu_bar_height
		mov	ah, 0
		les	bx, [bp+arg_0]
		mov	dx, es:[bx+6Ah]
		imul	dx, 0Ch
		add	ax, dx
		inc	ax
		mov	[bp+var_6], ax
		mov	ax, [bp+var_6]
		add	ax, 0Ch
		mov	[bp+var_8], ax
		push	1		; char
		push	2		; int
		push	7		; int
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+6Ah]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+14h]
		assume es:nothing
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; s
		push	[bp+var_8]	; int
		push	[bp+var_4]	; int
		push	[bp+var_6]	; int
		push	[bp+var_2]	; int
		push	cs
		call	near ptr @high_light$qiiiinuciiuc ; high_light(int,int,int,int,uchar *,int,int,uchar)
		assume es:seg2608
		add	sp, 12h

locret_16D55::				; CODE XREF: pull_down::erase_cur_selection(void)+1Cj
		leave
		retf
@pull_down@erase_cur_selection$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; pull_down::get_mouse_sel_location(void)
@pull_down@get_mouse_sel_location$qv proc far ;	CODE XREF: seg137f:1685p

var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6

		enter	6, 0
		mov	al, _menu_bar_height
		mov	ah, 0
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	dx, es:[bx+6Ah]
		imul	dx, 0Ch
		add	ax, dx
		inc	ax
		mov	[bp+var_2], ax
		mov	ax, [bp+var_2]
		add	ax, 0Ch
		mov	[bp+var_4], ax
		mov	al, _menu_bar_height
		mov	ah, 0
		les	bx, _mouse
		assume es:nothing
		push	ax
		mov	ax, es:[bx+0Eh]
		pop	dx
		sub	ax, dx
		mov	bx, 0Ch
		cwd
		idiv	bx
		mov	[bp+var_6], ax
		mov	ax, [bp+var_6]
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		les	bx, es:[bx+14h]
		assume es:nothing
		cmp	byte ptr es:[bx+4], 0
		jnz	loc_16DAD
		assume es:nothing

loc_16DA9::				; CODE XREF: pull_down::get_mouse_sel_location(void):loc_16DCFj
		mov	al, 2

loc_16DAB::				; CODE XREF: pull_down::get_mouse_sel_location(void)+65j
					; pull_down::get_mouse_sel_location(void)+76j
		jmp	locret_16DD1
; ---------------------------------------------------------------------------
		assume es:nothing

loc_16DAD::				; CODE XREF: pull_down::get_mouse_sel_location(void)+50j
		les	bx, _mouse
		assume es:nothing
		mov	ax, es:[bx+0Eh]
		cmp	ax, [bp+var_2]
		jge	loc_16DBE
		mov	al, 0
		jmp	loc_16DAB
; ---------------------------------------------------------------------------

loc_16DBE::				; CODE XREF: pull_down::get_mouse_sel_location(void)+61j
		les	bx, _mouse
		mov	ax, es:[bx+0Eh]
		cmp	ax, [bp+var_4]
		jle	loc_16DCF
		mov	al, 1
		jmp	loc_16DAB
; ---------------------------------------------------------------------------

loc_16DCF::				; CODE XREF: pull_down::get_mouse_sel_location(void)+72j
		jmp	loc_16DA9
; ---------------------------------------------------------------------------

locret_16DD1::				; CODE XREF: pull_down::get_mouse_sel_location(void):loc_16DABj
		leave
		retf
@pull_down@get_mouse_sel_location$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; pull_down::increase_cur_selection(void)
@pull_down@increase_cur_selection$qv proc far
					; CODE XREF: pull_down::increase_cur_selection(void)+82p
					; seg137f:16B0p ...

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		push	si
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@hide$qv ; ms_mouse::hide(void)
		assume es:nothing
		add	sp, 4
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		push	cs
		call	near ptr @pull_down@erase_cur_selection$qv ; pull_down::erase_cur_selection(void)
		assume es:seg2608
		add	sp, 4
		les	bx, [bp+arg_0]
		assume es:nothing
		push	es
		les	si, [bp+arg_0]
		mov	ax, es:[si+0Ah]
		dec	ax
		pop	es
		cmp	es:[bx+6Ah], ax
		jnz	loc_16E11
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	word ptr es:[bx+6Ah], 0
		jmp	loc_16E18
; ---------------------------------------------------------------------------
		assume es:nothing

loc_16E11::				; CODE XREF: pull_down::increase_cur_selection(void)+31j
		les	bx, [bp+arg_0]
		inc	word ptr es:[bx+6Ah]

loc_16E18::				; CODE XREF: pull_down::increase_cur_selection(void)+3Cj
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		push	cs
		call	near ptr @pull_down@update_cur_selection$qv ; pull_down::update_cur_selection(void)
		assume es:seg2608
		add	sp, 4
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@show$qv ; ms_mouse::show(void)
		assume es:nothing
		add	sp, 4
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+6Ah]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+14h]
		assume es:nothing
		cmp	byte ptr es:[bx+4], 0
		jnz	loc_16E5B
		assume es:nothing
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		push	cs
		call	near ptr @pull_down@increase_cur_selection$qv ;	pull_down::increase_cur_selection(void)
		assume es:nothing
		add	sp, 4
		assume es:nothing

loc_16E5B::				; CODE XREF: pull_down::increase_cur_selection(void)+79j
		pop	si
		pop	bp
		retf
@pull_down@increase_cur_selection$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; pull_down::decrease_cur_selection(void)
@pull_down@decrease_cur_selection$qv proc far
					; CODE XREF: pull_down::decrease_cur_selection(void)+7Ep
					; seg137f:169Dp ...

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@hide$qv ; ms_mouse::hide(void)
		assume es:nothing
		add	sp, 4
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		push	cs
		call	near ptr @pull_down@erase_cur_selection$qv ; pull_down::erase_cur_selection(void)
		assume es:seg2608
		add	sp, 4
		les	bx, [bp+arg_0]
		assume es:nothing
		cmp	word ptr es:[bx+6Ah], 0
		jnz	loc_16E98
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+0Ah]
		dec	ax
		les	bx, [bp+arg_0]
		mov	es:[bx+6Ah], ax
		jmp	loc_16E9F
; ---------------------------------------------------------------------------
		assume es:nothing

loc_16E98::				; CODE XREF: pull_down::decrease_cur_selection(void)+27j
		les	bx, [bp+arg_0]
		dec	word ptr es:[bx+6Ah]

loc_16E9F::				; CODE XREF: pull_down::decrease_cur_selection(void)+38j
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		push	cs
		call	near ptr @pull_down@update_cur_selection$qv ; pull_down::update_cur_selection(void)
		assume es:seg2608
		add	sp, 4
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@show$qv ; ms_mouse::show(void)
		assume es:nothing
		add	sp, 4
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+6Ah]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+14h]
		assume es:nothing
		cmp	byte ptr es:[bx+4], 0
		jnz	loc_16EE2
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		push	cs
		call	near ptr @pull_down@decrease_cur_selection$qv ;	pull_down::decrease_cur_selection(void)
		add	sp, 4

loc_16EE2::				; CODE XREF: pull_down::decrease_cur_selection(void)+75j
		pop	bp
		retf
@pull_down@decrease_cur_selection$qv endp

; ---------------------------------------------------------------------------
		assume es:nothing

; pull_down::poll(void)
@pull_down@poll$qv:			; DATA XREF: seg2608:241Do
		enter	0Ch, 0
		mov	word ptr [bp-2], 0
		mov	word ptr [bp-6], 0
		mov	byte ptr [bp-9], 0
		jmp	loc_17139
; ---------------------------------------------------------------------------

loc_16EF9::				; CODE XREF: seg137f:176Fj
		cmp	byte_2D3AC, 0
		jz	loc_16F0C
		les	bx, [bp+6]
		assume es:nothing
		mov	word ptr es:[bx+6Ah], 0FFFFh
		inc	word ptr [bp-2]
		assume es:nothing

loc_16F0C::				; CODE XREF: seg137f:152Ej
		mov	al, _menu_bar_height
		mov	ah, 0
		push	ax
		les	bx, [bp+6]
		mov	al, es:[bx+68h]
		mov	ah, 0
		les	bx, [bp+6]
		mov	dx, es:[bx+2]
		add	dx, ax
		add	dx, 12h
		push	dx
		push	0
		les	bx, [bp+6]
		push	word ptr es:[bx+2]
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@in_box$qiiii	; ms_mouse::in_box(int,int,int,int)
		assume es:nothing
		add	sp, 0Ch
		mov	[bp-0Ah], al
		mov	al, _menu_bar_height
		mov	ah, 0
		inc	ax
		les	bx, [bp+6]
		assume es:nothing
		add	ax, es:[bx+6]
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+2]
		les	bx, [bp+6]
		add	ax, es:[bx+8]
		dec	ax
		push	ax
		mov	al, _menu_bar_height
		mov	ah, 0
		inc	ax
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+2]
		inc	ax
		push	ax
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@in_box$qiiii	; ms_mouse::in_box(int,int,int,int)
		assume es:nothing
		add	sp, 0Ch
		mov	[bp-0Bh], al
		les	bx, _mouse
		cmp	byte ptr es:[bx], 0
		jnz	loc_16F90
		jmp	loc_17089
; ---------------------------------------------------------------------------

loc_16F90::				; CODE XREF: seg137f:15BBj
		cmp	byte ptr [bp-0Ah], 0
		jz	loc_16F99
		jmp	loc_17086
; ---------------------------------------------------------------------------

loc_16F99::				; CODE XREF: seg137f:15C4j
		mov	al, [bp-0Bh]
		mov	ah, 0
		or	ax, ax
		jnz	loc_16FC0
		mov	al, _menu_bar_height
		mov	ah, 0
		les	bx, _mouse
		assume es:nothing
		cmp	ax, es:[bx+0Eh]
		jle	loc_16FC0
		les	bx, [bp+6]
		mov	word ptr es:[bx+6Ah], 0FFFFh
		inc	word ptr [bp-2]
		jmp	loc_17086
; ---------------------------------------------------------------------------
		assume es:nothing

loc_16FC0::				; CODE XREF: seg137f:15D0j
					; seg137f:15DFj
		cmp	word ptr [bp-6], 0
		jz	loc_16FC9
		jmp	loc_17048
; ---------------------------------------------------------------------------

loc_16FC9::				; CODE XREF: seg137f:15F4j
		cmp	byte ptr [bp-0Bh], 0
		jz	loc_17048
		mov	al, _menu_bar_height
		mov	ah, 0
		les	bx, _mouse
		push	ax
		mov	ax, es:[bx+0Eh]
		pop	dx
		sub	ax, dx
		mov	bx, 0Ch
		cwd
		idiv	bx
		mov	[bp-8],	ax
		mov	ax, [bp-8]
		shl	ax, 2
		les	bx, [bp+6]
		assume es:nothing
		add	bx, ax
		les	bx, es:[bx+14h]
		assume es:nothing
		cmp	byte ptr es:[bx+4], 1
		jnz	loc_17046
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@hide$qv ; ms_mouse::hide(void)
		assume es:nothing
		add	sp, 4
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @pull_down@erase_cur_selection$qv ; pull_down::erase_cur_selection(void)
		assume es:seg2608
		add	sp, 4
		les	bx, [bp+6]
		assume es:nothing
		mov	ax, [bp-8]
		mov	es:[bx+6Ah], ax
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @pull_down@update_cur_selection$qv ; pull_down::update_cur_selection(void)
		assume es:seg2608
		add	sp, 4
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@show$qv ; ms_mouse::show(void)
		assume es:nothing
		add	sp, 4
		mov	word ptr [bp-6], 1

loc_17046::				; CODE XREF: seg137f:162Dj
		jmp	loc_17086
; ---------------------------------------------------------------------------
		assume es:nothing

loc_17048::				; CODE XREF: seg137f:15F6j
					; seg137f:15FDj
		cmp	byte ptr [bp-0Bh], 0
		jz	loc_17086
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @pull_down@get_mouse_sel_location$qv ;	pull_down::get_mouse_sel_location(void)
		add	sp, 4
		mov	ah, 0
		mov	[bp-4],	ax
		cmp	word ptr [bp-4], 0
		jnz	loc_17073
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @pull_down@decrease_cur_selection$qv ;	pull_down::decrease_cur_selection(void)
		add	sp, 4

loc_17073::				; CODE XREF: seg137f:1694j
		cmp	word ptr [bp-4], 1
		jnz	loc_17086
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @pull_down@increase_cur_selection$qv ;	pull_down::increase_cur_selection(void)
		add	sp, 4
		assume es:nothing

loc_17086::				; CODE XREF: seg137f:15C6j
					; seg137f:15EDj ...
		jmp	loc_17139
; ---------------------------------------------------------------------------
		assume es:nothing

loc_17089::				; CODE XREF: seg137f:15BDj
		cmp	word ptr [bp-6], 0
		jz	loc_1709A
		cmp	byte ptr [bp-0Bh], 0
		jz	loc_1709A
		inc	word ptr [bp-2]
		jmp	loc_1709F
; ---------------------------------------------------------------------------

loc_1709A::				; CODE XREF: seg137f:16BDj
					; seg137f:16C3j
		mov	word ptr [bp-6], 0

loc_1709F::				; CODE XREF: seg137f:16C8j
		cmp	_i_external_left, 0
		jnz	loc_170AA
		jmp	loc_17139
; ---------------------------------------------------------------------------

loc_170AA::				; CODE XREF: seg137f:16D5j
		call	_i_external_left
		assume es:nothing
		or	al, al
		jz	loc_170C4
		mov	byte ptr [bp-9], 1
		les	bx, [bp+6]
		assume es:nothing
		mov	word ptr es:[bx+6Ah], 0FFFFh
		inc	word ptr [bp-2]
		jmp	loc_1712E
; ---------------------------------------------------------------------------
		assume es:nothing

loc_170C4::				; CODE XREF: seg137f:16E0j
		call	_i_external_right
		or	al, al
		jz	loc_170DE
		mov	byte ptr [bp-9], 2
		les	bx, [bp+6]
		assume es:nothing
		mov	word ptr es:[bx+6Ah], 0FFFFh
		inc	word ptr [bp-2]
		jmp	loc_1712E
; ---------------------------------------------------------------------------
		assume es:nothing

loc_170DE::				; CODE XREF: seg137f:16FAj
		call	_i_external_up
		or	al, al
		jz	loc_17107
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @pull_down@decrease_cur_selection$qv ;	pull_down::decrease_cur_selection(void)
		assume es:nothing
		add	sp, 4
		push	0Fh
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@pause$qui ; vga_display::pause(uint)
		add	sp, 6
		jmp	loc_1712E
; ---------------------------------------------------------------------------
		assume es:nothing

loc_17107::				; CODE XREF: seg137f:1714j
		call	_i_external_down
		or	al, al
		jz	loc_1712E
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @pull_down@increase_cur_selection$qv ;	pull_down::increase_cur_selection(void)
		assume es:nothing
		add	sp, 4
		push	0Fh
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@pause$qui ; vga_display::pause(uint)
		add	sp, 6
		assume es:nothing

loc_1712E::				; CODE XREF: seg137f:16F2j
					; seg137f:170Cj ...
		call	_i_external_button
		or	al, al
		jz	loc_17139
		inc	word ptr [bp-2]
		assume es:nothing

loc_17139::				; CODE XREF: seg137f:1526j
					; seg137f:loc_17086j ...
		cmp	word ptr [bp-2], 0
		jnz	loc_17142
		jmp	loc_16EF9
; ---------------------------------------------------------------------------
		assume es:nothing

loc_17142::				; CODE XREF: seg137f:176Dj
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@hide$qv ; ms_mouse::hide(void)
		assume es:nothing
		add	sp, 4
		push	0
		push	0
		les	bx, [bp+6]
		assume es:nothing
		push	word ptr es:[bx+10h]
		push	word ptr es:[bx+0Eh]
		mov	al, _menu_bar_height
		mov	ah, 0
		inc	ax
		les	bx, [bp+6]
		add	ax, es:[bx+6]
		add	ax, 2
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+2]
		les	bx, [bp+6]
		add	ax, es:[bx+8]
		push	ax
		push	0
		les	bx, [bp+6]
		push	word ptr es:[bx+2]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@put_bits$qiiiinucuiui ; vga_display::put_bits(int,int,int,int,uchar *,uint,uint)
		assume es:nothing
		add	sp, 14h
		les	bx, [bp+6]
		assume es:nothing
		push	word ptr es:[bx+10h]
		push	word ptr es:[bx+0Eh]
		call	@$bdele$qnv	; operator delete(void *)
		assume es:nothing
		add	sp, 4
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@show$qv ; ms_mouse::show(void)
		assume es:nothing
		add	sp, 4
		les	bx, [bp+6]
		assume es:nothing
		cmp	word ptr es:[bx+6Ah], 0FFFFh
		jz	loc_1721E
		les	bx, [bp+6]
		mov	ax, es:[bx+6Ah]
		shl	ax, 2
		les	bx, [bp+6]
		add	bx, ax
		les	bx, es:[bx+14h]
		assume es:nothing
		cmp	byte ptr es:[bx+4], 0
		jz	loc_1721E
		les	bx, [bp+6]
		assume es:nothing
		mov	ax, es:[bx+6Ah]
		shl	ax, 2
		les	bx, [bp+6]
		add	bx, ax
		les	bx, es:[bx+14h]
		assume es:nothing
		mov	ax, es:[bx+6]
		or	ax, es:[bx+8]
		jz	loc_1721E
		les	bx, [bp+6]
		assume es:nothing
		mov	ax, es:[bx+6Ah]
		shl	ax, 2
		les	bx, [bp+6]
		add	bx, ax
		les	bx, es:[bx+14h]
		assume es:nothing
		call	dword ptr es:[bx+6]
		assume es:nothing
		cmp	_pd_redraws, 1
		jnz	loc_1721E
		or	byte ptr [bp-9], 80h

loc_1721E::				; CODE XREF: seg137f:17F3j
					; seg137f:180Dj ...
		les	bx, [bp+6]
		assume es:nothing
		mov	word ptr es:[bx+6Ah], 0FFFFh
		mov	al, [bp-9]
		jmp	$+2
; ---------------------------------------------------------------------------

locret_1722C::				; CODE XREF: seg137f:185Aj
		leave
		retf
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; menu_bar::menu_bar(void)
@menu_bar@$bctr$qv proc	far		; CODE XREF: i_init_interface(void *,void *,void *,void	*,void *):loc_159FAp

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		cmp	[bp+arg_0], 0
		jnz	loc_1724A
		push	6Ah ; 'j'       ; unsigned int
		call	@$bnew$qui	; operator new(uint)
		assume es:nothing
		pop	cx
		mov	word ptr [bp+arg_0+2], dx
		mov	word ptr [bp+arg_0], ax
		or	ax, dx
		jz	loc_17281

loc_1724A::				; CODE XREF: menu_bar::menu_bar(void)+8j
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		push	cs
		call	near ptr @gui_item@$bctr$qv ; gui_item::gui_item(void)
		assume es:nothing
		add	sp, 4
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx], offset @menu_bar@ ; `__vtable__'[menu_bar]
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+2], 1
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+4], 1
		les	bx, [bp+arg_0]
		mov	al, 0
		mov	es:[bx+13h], al
		les	bx, [bp+arg_0]
		mov	es:[bx+68h], al

loc_17281::				; CODE XREF: menu_bar::menu_bar(void)+1Aj
		mov	dx, word ptr [bp+arg_0+2]
		mov	ax, word ptr [bp+arg_0]
		jmp	$+2
; ---------------------------------------------------------------------------

loc_17289::				; CODE XREF: menu_bar::menu_bar(void)+59j
		pop	bp
		retf
@menu_bar@$bctr$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; menu_bar::add_item(pull_down *)
@menu_bar@add_item$qn9pull_down	proc far ; CODE	XREF: setup_options(void)+79P
					; setup_options(void)+165P ...

arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+0Ah]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		mov	ax, [bp+arg_6]
		mov	dx, [bp+arg_4]
		mov	es:[bx+1Ah], ax
		mov	es:[bx+18h], dx
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx+0Ah], 0
		jbe	loc_17314
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+0Ah]
		dec	ax
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+18h]
		assume es:nothing
		mov	ax, es:[bx+2]
		push	ax
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+0Ah]
		dec	ax
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+18h]
		assume es:nothing
		push	word ptr es:[bx+66h]
		push	word ptr es:[bx+64h] ; s
		call	_strlen
		assume es:seg2608
		add	sp, 4
		shl	ax, 3
		pop	dx
		add	dx, ax
		add	dx, 0Ch
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+0Ah]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+18h]
		assume es:nothing
		mov	es:[bx+2], dx
		jmp	loc_1732D
; ---------------------------------------------------------------------------
		assume es:nothing

loc_17314::				; CODE XREF: menu_bar::add_item(pull_down *)+28j
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+0Ah]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+18h]
		assume es:nothing
		mov	word ptr es:[bx+2], 0

loc_1732D::				; CODE XREF: menu_bar::add_item(pull_down *)+87j
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+0Ah]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+18h]
		assume es:nothing
		mov	word ptr es:[bx+4], 1
		les	bx, [bp+arg_0]
		assume es:nothing
		inc	word ptr es:[bx+0Ah]
		pop	bp
		retf
@menu_bar@add_item$qn9pull_down	endp

; ---------------------------------------------------------------------------

; menu_bar::draw(void)
@menu_bar@draw$qv:			; DATA XREF: seg2608:`__vtable__'[menu_bar]o
		enter	2, 0
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+68h], 0
		jz	loc_17360
		jmp	locret_1742F
; ---------------------------------------------------------------------------

loc_17360::				; CODE XREF: seg137f:198Bj
		les	bx, [bp+6]
		mov	byte ptr es:[bx+68h], 1
		mov	al, _menu_bar_height
		mov	ah, 0
		inc	ax
		push	ax
		push	140h
		push	0
		push	0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@get_bits$qiiii ; vga_display::get_bits(int,int,int,int)
		assume es:nothing
		add	sp, 0Ch
		les	bx, [bp+6]
		assume es:nothing
		mov	es:[bx+10h], dx
		mov	es:[bx+0Eh], ax
		push	0
		push	0FFFFh
		les	bx, _display
		assume es:nothing
		mov	al, es:[bx+2]
		mov	ah, 0
		push	ax
		mov	al, _menu_bar_height
		mov	ah, 0
		inc	ax
		push	ax
		push	140h
		push	0
		push	0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fill_rect$qiiiiiiuc ; vga_display::fill_rect(int,int,int,int,int,int,uchar)
		assume es:nothing
		add	sp, 12h
		push	0
		push	0FFFFh
		les	bx, _display
		assume es:nothing
		mov	al, es:[bx+3]
		mov	ah, 0
		push	ax
		mov	al, _menu_bar_height
		mov	ah, 0
		inc	ax
		push	ax
		push	140h
		mov	al, _menu_bar_height
		mov	ah, 0
		push	ax
		push	0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fill_rect$qiiiiiiuc ; vga_display::fill_rect(int,int,int,int,int,int,uchar)
		assume es:nothing
		add	sp, 12h
		mov	word ptr [bp-2], 0
		jmp	loc_17423
; ---------------------------------------------------------------------------
		assume es:nothing

loc_173F6::				; CODE XREF: seg137f:1A5Dj
		mov	ax, [bp-2]
		shl	ax, 2
		les	bx, [bp+6]
		add	bx, ax
		push	word ptr es:[bx+1Ah]
		push	word ptr es:[bx+18h]
		mov	ax, [bp-2]
		shl	ax, 2
		les	bx, [bp+6]
		add	bx, ax
		les	bx, es:[bx+18h]
		assume es:nothing
		mov	bx, es:[bx]
		call	dword ptr [bx]
		assume es:seg2608
		add	sp, 4

loc_17420::
		inc	word ptr [bp-2]
		assume es:nothing

loc_17423::				; CODE XREF: seg137f:1A24j
		les	bx, [bp+6]
		assume es:nothing

loc_17426::
		mov	ax, es:[bx+0Ah]
		cmp	ax, [bp-2]
		ja	loc_173F6

locret_1742F::				; CODE XREF: seg137f:198Dj
		leave
		retf
; ---------------------------------------------------------------------------

; menu_bar::erase(void)
@menu_bar@erase$qv:			; DATA XREF: seg2608:240Do
		push	bp
		mov	bp, sp
		les	bx, [bp+6]
		mov	al, es:[bx+68h]
		mov	ah, 0
		or	ax, ax
		jnz	loc_17443
		jmp	loc_1748B
; ---------------------------------------------------------------------------

loc_17443::				; CODE XREF: seg137f:1A6Fj
		push	0
		push	0
		les	bx, [bp+6]
		push	word ptr es:[bx+10h]
		push	word ptr es:[bx+0Eh]
		mov	al, _menu_bar_height
		mov	ah, 0
		inc	ax
		push	ax
		push	140h
		push	0
		push	0
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@put_bits$qiiiinucuiui ; vga_display::put_bits(int,int,int,int,uchar *,uint,uint)
		assume es:nothing
		add	sp, 14h
		les	bx, [bp+6]
		assume es:nothing
		push	word ptr es:[bx+10h]
		push	word ptr es:[bx+0Eh]
		call	@$bdele$qnv	; operator delete(void *)
		assume es:nothing
		add	sp, 4
		les	bx, [bp+6]
		assume es:nothing
		mov	byte ptr es:[bx+68h], 0

loc_1748B::				; CODE XREF: seg137f:1A71j
		pop	bp
		retf
; ---------------------------------------------------------------------------

; menu_bar::poll(void)
@menu_bar@poll$qv:			; DATA XREF: seg2608:2411o
		enter	0Ah, 0
		cmp	_i_external_button, 0
		jz	short loc_174A3
		jmp	short $+2
; ---------------------------------------------------------------------------

loc_1749B::				; CODE XREF: seg137f:1AC9j
					; seg137f:1AD1j
		call	_i_external_button
		assume es:nothing
		or	al, al
		jnz	short loc_1749B

loc_174A3::				; CODE XREF: seg137f:1AC7j
		les	bx, _mouse
		assume es:nothing
		cmp	byte ptr es:[bx+2Eh], 0
		jnz	short loc_174CA
		les	bx, [bp+6]
		assume es:nothing
		push	word ptr es:[bx+1Ah]
		push	word ptr es:[bx+18h]
		push	cs
		call	near ptr @pull_down@activate$qv	; pull_down::activate(void)
		add	sp, 4
		les	bx, [bp+6]
		mov	es:[bx+14h], al
		jmp	loc_175E0
; ---------------------------------------------------------------------------
		assume es:nothing

loc_174CA::				; CODE XREF: seg137f:1ADCj
		les	bx, [bp+6]
		assume es:nothing
		cmp	word ptr es:[bx+16h], 0FFFFh
		jz	loc_17521
		les	bx, [bp+6]
		mov	al, es:[bx+16h]
		les	bx, [bp+6]
		mov	es:[bx+13h], al
		les	bx, [bp+6]
		mov	ax, es:[bx+16h]
		shl	ax, 2
		les	bx, [bp+6]
		add	bx, ax
		push	word ptr es:[bx+1Ah]
		push	word ptr es:[bx+18h]
		push	cs
		call	near ptr @pull_down@activate$qv	; pull_down::activate(void)
		assume es:nothing
		add	sp, 4
		les	bx, [bp+6]
		assume es:nothing
		mov	es:[bx+14h], al
		les	bx, [bp+6]
		mov	al, es:[bx+14h]
		mov	ah, 0
		test	ax, 80h
		jnz	loc_1751E
		les	bx, [bp+6]
		assume es:nothing
		mov	word ptr es:[bx+16h], 0FFFFh
		assume es:nothing

loc_1751E::				; CODE XREF: seg137f:1B43j
		jmp	loc_175E0
; ---------------------------------------------------------------------------

loc_17521::				; CODE XREF: seg137f:1B02j
		les	bx, [bp+6]
		assume es:nothing
		mov	byte ptr es:[bx+14h], 0
		mov	word ptr [bp-2], 0
		jmp	loc_175BD
; ---------------------------------------------------------------------------

loc_17531::				; CODE XREF: seg137f:1BF9j
		mov	ax, [bp-2]
		shl	ax, 2
		les	bx, [bp+6]
		add	bx, ax
		mov	ax, es:[bx+1Ah]
		mov	dx, es:[bx+18h]
		mov	[bp-8],	ax
		mov	[bp-0Ah], dx
		les	bx, [bp-0Ah]
		mov	ax, es:[bx+2]
		mov	[bp-4],	ax
		les	bx, [bp-0Ah]
		push	word ptr es:[bx+66h]
		push	word ptr es:[bx+64h]
		call	_strlen
		add	sp, 4
		shl	ax, 3
		les	bx, [bp-0Ah]
		mov	dx, es:[bx+2]
		add	dx, ax
		add	dx, 0Ah
		mov	[bp-6],	dx
		mov	al, _menu_bar_height
		mov	ah, 0
		push	ax
		push	word ptr [bp-6]
		push	0
		push	word ptr [bp-4]
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@pressed_in_box$qiiii	; ms_mouse::pressed_in_box(int,int,int,int)
		add	sp, 0Ch
		or	al, al
		jz	loc_175BA
		push	word ptr [bp-8]
		push	word ptr [bp-0Ah]
		push	cs
		call	near ptr @pull_down@activate$qv	; pull_down::activate(void)
		add	sp, 4
		les	bx, [bp+6]
		mov	es:[bx+14h], al
		les	bx, [bp+6]
		mov	al, [bp-2]
		mov	es:[bx+13h], al
		jmp	loc_175CC
; ---------------------------------------------------------------------------

loc_175BA::				; CODE XREF: seg137f:1BC8j
		inc	word ptr [bp-2]

loc_175BD::				; CODE XREF: seg137f:1B5Ej
		les	bx, [bp+6]
		mov	ax, es:[bx+0Ah]
		cmp	ax, [bp-2]
		jbe	loc_175CC
		jmp	loc_17531
; ---------------------------------------------------------------------------

loc_175CC::				; CODE XREF: seg137f:1BE8j
					; seg137f:1BF7j
		les	bx, [bp+6]
		test	byte ptr es:[bx+14h], 80h
		jz	loc_175E0
		les	bx, [bp+6]
		mov	ax, [bp-2]
		mov	es:[bx+16h], ax
		assume es:nothing

loc_175E0::				; CODE XREF: seg137f:1AF7j
					; seg137f:loc_1751Ej ...
		jmp	loc_17689
; ---------------------------------------------------------------------------

loc_175E3::				; CODE XREF: seg137f:1CC7j
		les	bx, [bp+6]
		assume es:nothing
		cmp	byte ptr es:[bx+14h], 1
		jnz	loc_17613
		les	bx, [bp+6]
		mov	al, es:[bx+13h]
		add	al, 0FFh
		les	bx, [bp+6]
		mov	es:[bx+13h], al
		cmp	al, 0FFh
		jnz	loc_17611
		les	bx, [bp+6]
		mov	al, es:[bx+0Ah]
		dec	al
		les	bx, [bp+6]
		mov	es:[bx+13h], al

loc_17611::				; CODE XREF: seg137f:1C2Fj
		jmp	loc_17636
; ---------------------------------------------------------------------------

loc_17613::				; CODE XREF: seg137f:1C1Bj
		les	bx, [bp+6]
		mov	al, es:[bx+13h]
		inc	al
		les	bx, [bp+6]
		mov	es:[bx+13h], al
		mov	ah, 0
		les	bx, [bp+6]
		cmp	ax, es:[bx+0Ah]
		jnz	loc_17636
		les	bx, [bp+6]
		mov	byte ptr es:[bx+13h], 0

loc_17636::				; CODE XREF: seg137f:loc_17611j
					; seg137f:1C5Cj
		push	0Fh
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@pause$qui ; vga_display::pause(uint)
		add	sp, 6
		les	bx, [bp+6]
		mov	al, es:[bx+13h]
		mov	ah, 0
		shl	ax, 2
		les	bx, [bp+6]
		add	bx, ax
		push	word ptr es:[bx+1Ah]
		push	word ptr es:[bx+18h]
		push	cs
		call	near ptr @pull_down@activate$qv	; pull_down::activate(void)
		add	sp, 4
		les	bx, [bp+6]
		mov	es:[bx+14h], al
		les	bx, [bp+6]
		test	byte ptr es:[bx+14h], 80h
		jz	loc_17689
		les	bx, [bp+6]
		mov	al, es:[bx+13h]
		mov	ah, 0
		les	bx, [bp+6]
		mov	es:[bx+16h], ax
		assume es:nothing

loc_17689::				; CODE XREF: seg137f:loc_175E0j
					; seg137f:1CA7j
		les	bx, [bp+6]
		mov	al, es:[bx+14h]
		mov	ah, 0
		test	ax, 3
		jz	loc_1769A
		jmp	loc_175E3
; ---------------------------------------------------------------------------

loc_1769A::				; CODE XREF: seg137f:1CC5j
		mov	al, 0
		jmp	$+2
; ---------------------------------------------------------------------------

locret_1769E::				; CODE XREF: seg137f:1CCCj
		leave
		retf
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far menu_bar::toggle_item(__int32, char	*s1, char *s2, char)
@menu_bar@toggle_item$qnuct1uc proc far	; CODE XREF: activate_menu_bar(void)+2CP
					; activate_menu_bar(void)+46P ...

var_3		= byte ptr -3
var_2		= byte ptr -2
var_1		= byte ptr -1
arg_0		= dword	ptr  6
s1		= dword	ptr  0Ah
s2		= dword	ptr  0Eh
arg_C		= byte ptr  12h

		enter	4, 0
		mov	[bp+var_3], 0
		mov	[bp+var_1], 0
		jmp	loc_17774
; ---------------------------------------------------------------------------
		assume es:nothing

loc_176AF::				; CODE XREF: menu_bar::toggle_item(uchar *,uchar *,uchar)+E2j
		mov	al, [bp+var_1]
		mov	ah, 0
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+18h]
		assume es:nothing
		push	word ptr es:[bx+66h]
		push	word ptr es:[bx+64h] ; s2
		push	word ptr [bp+s1+2]
		push	word ptr [bp+s1] ; s1
		call	_strcmp
		assume es:seg2608
		add	sp, 8
		or	ax, ax
		jz	loc_176DD
		jmp	loc_17769
; ---------------------------------------------------------------------------

loc_176DD::				; CODE XREF: menu_bar::toggle_item(uchar *,uchar *,uchar)+38j
		mov	[bp+var_2], 0
		jmp	loc_1774A
; ---------------------------------------------------------------------------
		assume es:nothing

loc_176E3::				; CODE XREF: menu_bar::toggle_item(uchar *,uchar *,uchar)+C6j
		push	word ptr [bp+s2+2]
		push	word ptr [bp+s2] ; s2
		mov	al, [bp+var_1]
		mov	ah, 0
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		les	bx, es:[bx+18h]
		assume es:nothing
		mov	al, [bp+var_2]
		mov	ah, 0
		shl	ax, 2
		add	bx, ax
		les	bx, es:[bx+14h]
		assume es:nothing
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; s1
		call	_strcmp
		assume es:seg2608
		add	sp, 8
		or	ax, ax
		jnz	loc_17747
		mov	al, [bp+var_1]
		mov	ah, 0
		shl	ax, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, ax
		les	bx, es:[bx+18h]
		assume es:nothing
		mov	al, [bp+var_2]
		mov	ah, 0
		shl	ax, 2
		add	bx, ax
		les	bx, es:[bx+14h]
		assume es:nothing
		mov	al, [bp+arg_C]
		mov	es:[bx+4], al
		mov	[bp+var_3], 1
		jmp	loc_17769
; ---------------------------------------------------------------------------
		assume es:seg2608

loc_17747::				; CODE XREF: menu_bar::toggle_item(uchar *,uchar *,uchar)+79j
		inc	[bp+var_2]

loc_1774A::				; CODE XREF: menu_bar::toggle_item(uchar *,uchar *,uchar)+41j
		mov	al, [bp+var_2]
		mov	ah, 0
		mov	dl, [bp+var_1]
		mov	dh, 0
		shl	dx, 2
		les	bx, [bp+arg_0]
		assume es:nothing
		add	bx, dx
		les	bx, es:[bx+18h]
		assume es:nothing
		cmp	ax, es:[bx+0Ah]
		jnb	loc_17769
		jmp	loc_176E3
; ---------------------------------------------------------------------------
		assume es:seg2608

loc_17769::				; CODE XREF: menu_bar::toggle_item(uchar *,uchar *,uchar)+3Aj
					; menu_bar::toggle_item(uchar *,uchar *,uchar)+A5j ...
		cmp	[bp+var_3], 0
		jz	loc_17771
		assume es:nothing
		jmp	locret_17785
; ---------------------------------------------------------------------------
		assume es:seg2608

loc_17771::				; CODE XREF: menu_bar::toggle_item(uchar *,uchar *,uchar)+CDj
		inc	[bp+var_1]
		assume es:nothing

loc_17774::				; CODE XREF: menu_bar::toggle_item(uchar *,uchar *,uchar)+Cj
		mov	al, [bp+var_1]
		mov	ah, 0
		les	bx, [bp+arg_0]
		assume es:nothing
		cmp	ax, es:[bx+0Ah]
		jnb	locret_17785
		jmp	loc_176AF
; ---------------------------------------------------------------------------

locret_17785::				; CODE XREF: menu_bar::toggle_item(uchar *,uchar *,uchar)+CFj
					; menu_bar::toggle_item(uchar *,uchar *,uchar)+E0j
		leave
		retf
@menu_bar@toggle_item$qnuct1uc endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; button::button(unsigned char *, void *, unsigned char)
@button@$bctr$qnucnvuc proc far		; CODE XREF: show_high_scores(uchar)+211P
					; show_high_scores(uchar)+22DP	...

arg_0		= dword	ptr  6
arg_4		= dword	ptr  0Ah
arg_8		= dword	ptr  0Eh
arg_C		= byte ptr  12h

		push	bp
		mov	bp, sp
		cmp	[bp+arg_0], 0
		jnz	loc_177A3
		push	26h ; '&'       ; unsigned int
		call	@$bnew$qui	; operator new(uint)
		assume es:nothing
		pop	cx
		mov	word ptr [bp+arg_0+2], dx
		mov	word ptr [bp+arg_0], ax
		or	ax, dx
		jz	loc_177F5

loc_177A3::				; CODE XREF: button::button(uchar *,void *,uchar)+8j
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		push	cs
		call	near ptr @gui_item@$bctr$qv ; gui_item::gui_item(void)
		assume es:nothing
		add	sp, 4
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx], offset @button@ ; `__vtable__'[button]
		les	bx, [bp+arg_0]
		mov	eax, [bp+arg_4]
		mov	es:[bx+14h], eax
		les	bx, [bp+arg_0]
		mov	eax, [bp+arg_8]
		mov	es:[bx+22h], eax
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+8], 40h	; '@'
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+6], 0Bh
		les	bx, [bp+arg_0]
		mov	al, [bp+arg_C]
		mov	es:[bx+13h], al
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+20h], 0

loc_177F5::				; CODE XREF: button::button(uchar *,void *,uchar)+1Aj
		mov	dx, word ptr [bp+arg_0+2]
		mov	ax, word ptr [bp+arg_0]
		jmp	$+2
; ---------------------------------------------------------------------------

loc_177FD::				; CODE XREF: button::button(uchar *,void *,uchar)+74j
		pop	bp
		retf
@button@$bctr$qnucnvuc endp

; ---------------------------------------------------------------------------

; button::draw(void)
@button@draw$qv:			; DATA XREF: seg2608:`__vtable__'[button]o
		push	bp
		mov	bp, sp
		les	bx, _display
		assume es:nothing
		cmp	byte ptr es:[bx+1], 0
		jz	loc_17812
		mov	ax, 1
		jmp	loc_17814
; ---------------------------------------------------------------------------

loc_17812::				; CODE XREF: seg137f:1E3Bj
		xor	ax, ax

loc_17814::				; CODE XREF: seg137f:1E40j
		les	bx, [bp+6]
		assume es:nothing
		mov	dx, es:[bx+1Ah]
		les	bx, [bp+6]
		add	dx, es:[bx+6]
		add	dx, ax
		push	dx
		les	bx, [bp+6]
		mov	ax, es:[bx+18h]
		les	bx, [bp+6]
		add	ax, es:[bx+8]
		push	ax
		les	bx, [bp+6]
		push	word ptr es:[bx+1Ah]
		les	bx, [bp+6]
		push	word ptr es:[bx+18h]
		push	cs
		call	near ptr @draw_shadow_box$qiiii	; draw_shadow_box(int,int,int,int)
		assume es:nothing
		add	sp, 8
		les	bx, [bp+6]
		assume es:nothing
		push	word ptr es:[bx+16h]
		push	word ptr es:[bx+14h]
		call	_strlen
		assume es:seg2608
		add	sp, 4
		shl	ax, 3
		shr	ax, 1
		les	bx, [bp+6]
		assume es:nothing
		mov	dx, es:[bx+18h]
		les	bx, [bp+6]
		mov	bx, es:[bx+8]
		shr	bx, 1
		add	dx, bx
		sub	dx, ax
		les	bx, [bp+6]
		mov	es:[bx+1Ch], dx
		les	bx, [bp+6]
		mov	ax, es:[bx+1Ah]
		add	ax, 2
		les	bx, [bp+6]
		mov	es:[bx+1Eh], ax
		push	0
		les	bx, [bp+6]
		push	word ptr es:[bx+16h]
		push	word ptr es:[bx+14h]
		les	bx, [bp+6]
		push	word ptr es:[bx+1Eh]
		les	bx, [bp+6]
		push	word ptr es:[bx+1Ch]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		assume es:seg2608
		add	sp, 0Eh
		pop	bp
		retf
; ---------------------------------------------------------------------------
		assume es:nothing

; button::poll(void)
@button@poll$qv:			; DATA XREF: seg2608:1A2Eo
		enter	2, 0
		les	bx, [bp+6]
		mov	ax, es:[bx+1Ch]
		les	bx, [bp+6]
		sub	ax, es:[bx+18h]
		mov	[bp-2],	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+1Ah]
		les	bx, [bp+6]
		add	ax, es:[bx+6]
		inc	ax
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+18h]
		les	bx, [bp+6]
		add	ax, es:[bx+8]
		inc	ax
		push	ax
		les	bx, [bp+6]
		push	word ptr es:[bx+1Ah]
		les	bx, [bp+6]
		push	word ptr es:[bx+18h]
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@in_box$qiiii	; ms_mouse::in_box(int,int,int,int)
		assume es:nothing
		add	sp, 0Ch
		or	al, al
		jnz	loc_17913
		jmp	loc_17A0B
; ---------------------------------------------------------------------------

loc_17913::				; CODE XREF: seg137f:1F3Ej
		cmp	_i_external_button, 0
		jnz	loc_1791E
		jmp	loc_17A0B
; ---------------------------------------------------------------------------

loc_1791E::				; CODE XREF: seg137f:1F49j
		call	_i_external_button
		assume es:nothing
		or	al, al
		jnz	loc_17929
		jmp	loc_17A0B
; ---------------------------------------------------------------------------

loc_17929::				; CODE XREF: seg137f:1F54j
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@hide$qv ; ms_mouse::hide(void)
		add	sp, 4
		push	0
		push	2
		push	word ptr [bp-2]
		les	bx, [bp+6]
		assume es:nothing
		push	word ptr es:[bx+16h]
		push	word ptr es:[bx+14h]
		les	bx, [bp+6]
		mov	ax, es:[bx+1Ah]
		les	bx, [bp+6]
		add	ax, es:[bx+6]
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+18h]
		les	bx, [bp+6]
		add	ax, es:[bx+8]
		dec	ax
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+1Ah]
		inc	ax
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+18h]
		inc	ax
		push	ax
		push	cs
		call	near ptr @high_light$qiiiinuciiuc ; high_light(int,int,int,int,uchar *,int,int,uchar)
		add	sp, 12h
		push	2
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@pause$qui ; vga_display::pause(uint)
		add	sp, 6
		push	1
		push	1
		push	word ptr [bp-2]
		les	bx, [bp+6]
		push	word ptr es:[bx+16h]
		push	word ptr es:[bx+14h]
		les	bx, [bp+6]
		mov	ax, es:[bx+1Ah]
		les	bx, [bp+6]
		add	ax, es:[bx+6]
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+18h]
		les	bx, [bp+6]
		add	ax, es:[bx+8]
		dec	ax
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+1Ah]
		inc	ax
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+18h]
		inc	ax
		push	ax
		push	cs
		call	near ptr @high_light$qiiiinuciiuc ; high_light(int,int,int,int,uchar *,int,int,uchar)
		add	sp, 12h
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@show$qv ; ms_mouse::show(void)
		add	sp, 4
		les	bx, [bp+6]
		mov	word ptr es:[bx+20h], 1
		les	bx, [bp+6]
		cmp	dword ptr es:[bx+22h], 0
		jnz	loc_17A08
		assume es:nothing

loc_17A01::				; CODE XREF: seg137f:218Aj
		mov	al, 1
		assume es:nothing

loc_17A03::				; CODE XREF: seg137f:219Fj
					; seg137f:2229j
		jmp	locret_17BFC
; ---------------------------------------------------------------------------
		jmp	loc_17A0B
; ---------------------------------------------------------------------------

loc_17A08::				; CODE XREF: seg137f:202Fj
		jmp	loc_17B5F
; ---------------------------------------------------------------------------
		assume es:nothing

loc_17A0B::				; CODE XREF: seg137f:1F40j
					; seg137f:1F4Bj ...
		les	bx, [bp+6]
		assume es:nothing
		mov	ax, es:[bx+1Ah]
		les	bx, [bp+6]
		add	ax, es:[bx+6]
		inc	ax
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+18h]
		les	bx, [bp+6]
		add	ax, es:[bx+8]
		inc	ax
		push	ax
		les	bx, [bp+6]
		push	word ptr es:[bx+1Ah]
		les	bx, [bp+6]
		push	word ptr es:[bx+18h]
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@pressed_in_box$qiiii	; ms_mouse::pressed_in_box(int,int,int,int)
		assume es:nothing
		add	sp, 0Ch
		or	al, al
		jz	loc_17ACA
		les	bx, [bp+6]
		assume es:nothing
		cmp	word ptr es:[bx+20h], 1
		jz	loc_17AC7
		les	bx, [bp+6]
		mov	word ptr es:[bx+20h], 1
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@hide$qv ; ms_mouse::hide(void)
		assume es:nothing
		add	sp, 4
		push	0
		push	2
		push	word ptr [bp-2]
		les	bx, [bp+6]
		assume es:nothing
		push	word ptr es:[bx+16h]
		push	word ptr es:[bx+14h]
		les	bx, [bp+6]
		mov	ax, es:[bx+1Ah]
		les	bx, [bp+6]
		add	ax, es:[bx+6]
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+18h]
		les	bx, [bp+6]
		add	ax, es:[bx+8]
		dec	ax
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+1Ah]
		inc	ax
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+18h]
		inc	ax
		push	ax
		push	cs
		call	near ptr @high_light$qiiiinuciiuc ; high_light(int,int,int,int,uchar *,int,int,uchar)
		assume es:seg2608
		add	sp, 12h
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@show$qv ; ms_mouse::show(void)
		assume es:nothing
		add	sp, 4

loc_17AC7::				; CODE XREF: seg137f:2084j
		jmp	loc_17BF7
; ---------------------------------------------------------------------------
		assume es:nothing

loc_17ACA::				; CODE XREF: seg137f:207Aj
		les	bx, [bp+6]
		assume es:nothing
		cmp	word ptr es:[bx+20h], 1
		jz	loc_17AD7
		jmp	loc_17B72
; ---------------------------------------------------------------------------
		assume es:nothing

loc_17AD7::				; CODE XREF: seg137f:2102j
		les	bx, _mouse
		assume es:nothing
		mov	al, es:[bx]
		mov	ah, 0
		or	ax, ax
		jz	loc_17AE7
		jmp	loc_17B72
; ---------------------------------------------------------------------------

loc_17AE7::				; CODE XREF: seg137f:2112j
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@hide$qv ; ms_mouse::hide(void)
		add	sp, 4
		push	1
		push	1
		push	word ptr [bp-2]
		les	bx, [bp+6]
		assume es:nothing
		push	word ptr es:[bx+16h]
		push	word ptr es:[bx+14h]
		les	bx, [bp+6]
		mov	ax, es:[bx+1Ah]
		les	bx, [bp+6]
		add	ax, es:[bx+6]
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+18h]
		les	bx, [bp+6]
		add	ax, es:[bx+8]
		dec	ax
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+1Ah]
		inc	ax
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+18h]
		inc	ax
		push	ax
		push	cs
		call	near ptr @high_light$qiiiinuciiuc ; high_light(int,int,int,int,uchar *,int,int,uchar)
		assume es:seg2608
		add	sp, 12h
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@show$qv ; ms_mouse::show(void)
		assume es:nothing
		add	sp, 4
		les	bx, [bp+6]
		assume es:nothing
		cmp	dword ptr es:[bx+22h], 0
		jnz	loc_17B5F
		jmp	loc_17A01
; ---------------------------------------------------------------------------
		jmp	loc_17B72
; ---------------------------------------------------------------------------

loc_17B5F::				; CODE XREF: seg137f:loc_17A08j
					; seg137f:2188j
		les	bx, [bp+6]
		assume es:nothing
		mov	word ptr es:[bx+20h], 0
		les	bx, [bp+6]
		call	dword ptr es:[bx+22h]
		jmp	loc_17A03
; ---------------------------------------------------------------------------
		assume es:nothing

loc_17B72::				; CODE XREF: seg137f:2104j
					; seg137f:2114j ...
		les	bx, [bp+6]
		cmp	word ptr es:[bx+20h], 1
		jnz	loc_17BF7
		les	bx, _mouse
		assume es:nothing
		cmp	byte ptr es:[bx], 0
		jz	loc_17BF7
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@hide$qv ; ms_mouse::hide(void)
		add	sp, 4
		push	1
		push	1
		push	word ptr [bp-2]
		les	bx, [bp+6]
		push	word ptr es:[bx+16h]
		push	word ptr es:[bx+14h]
		les	bx, [bp+6]
		mov	ax, es:[bx+1Ah]
		les	bx, [bp+6]
		add	ax, es:[bx+6]
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+18h]
		les	bx, [bp+6]
		add	ax, es:[bx+8]
		dec	ax
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+1Ah]
		inc	ax
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+18h]
		inc	ax
		push	ax
		push	cs
		call	near ptr @high_light$qiiiinuciiuc ; high_light(int,int,int,int,uchar *,int,int,uchar)
		add	sp, 12h
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@show$qv ; ms_mouse::show(void)
		add	sp, 4
		les	bx, [bp+6]
		mov	word ptr es:[bx+20h], 0
		assume es:nothing

loc_17BF7::				; CODE XREF: seg137f:loc_17AC7j
					; seg137f:21AAj ...
		mov	al, 0
		jmp	loc_17A03
; ---------------------------------------------------------------------------

locret_17BFC::				; CODE XREF: seg137f:loc_17A03j
		leave
		retf
		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; button::mouse_to_me(void)
@button@mouse_to_me$qv proc far		; CODE XREF: show_high_scores(uchar)+287P
					; show_high_scores(uchar)+302P	...

var_1		= byte ptr -1
arg_0		= dword	ptr  6

		enter	2, 0
		les	bx, _mouse
		assume es:nothing
		cmp	byte ptr es:[bx+2], 0
		jz	loc_17C22
		mov	[bp+var_1], 1
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@hide$qv ; ms_mouse::hide(void)
		add	sp, 4
		jmp	loc_17C26
; ---------------------------------------------------------------------------

loc_17C22::				; CODE XREF: button::mouse_to_me(void)+Dj
		mov	[bp+var_1], 0

loc_17C26::				; CODE XREF: button::mouse_to_me(void)+22j
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+1Ah]
		les	bx, [bp+arg_0]
		add	ax, es:[bx+6]
		dec	ax
		push	ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+18h]
		les	bx, [bp+arg_0]
		mov	dx, es:[bx+8]
		shr	dx, 1
		add	ax, dx
		push	ax
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@set_coords$qii ; ms_mouse::set_coords(int,int)
		assume es:nothing
		add	sp, 8
		cmp	[bp+var_1], 0
		jz	locret_17C6D
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@show$qv ; ms_mouse::show(void)
		add	sp, 4

locret_17C6D::				; CODE XREF: button::mouse_to_me(void)+5Ej
		leave
		retf
@button@mouse_to_me$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; text_box::text_box(unsigned char *)
@text_box@$bctr$qnuc proc far		; CODE XREF: seg0fa9:0AEEP
					; seg0fa9:0C14P ...

arg_0		= dword	ptr  6
arg_4		= dword	ptr  0Ah

		push	bp
		mov	bp, sp
		cmp	[bp+arg_0], 0
		jnz	loc_17C8F
		push	8Eh ; ''       ; unsigned int
		call	@$bnew$qui	; operator new(uint)
		pop	cx
		mov	word ptr [bp+arg_0+2], dx
		mov	word ptr [bp+arg_0], ax
		or	ax, dx
		jnz	loc_17C8F
		jmp	loc_17D3C
; ---------------------------------------------------------------------------

loc_17C8F::				; CODE XREF: text_box::text_box(uchar *)+8j
					; text_box::text_box(uchar *)+1Bj
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		push	cs
		call	near ptr @gui_item@$bctr$qv ; gui_item::gui_item(void)
		add	sp, 4
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	word ptr es:[bx], offset @text_box@ ; `__vtable__'[text_box]
		les	bx, [bp+arg_0]
		mov	eax, [bp+arg_4]
		mov	es:[bx+72h], eax
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+6], 24h	; '$'
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+8], 64h	; 'd'
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+8]
		shr	ax, 1
		mov	dx, 0A0h ; ' '
		sub	dx, ax
		les	bx, [bp+arg_0]
		mov	es:[bx+2], dx
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+6]
		shr	ax, 1
		mov	dx, 64h	; 'd'
		sub	dx, ax
		les	bx, [bp+arg_0]
		mov	es:[bx+4], dx
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+6Ch], 0
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+6Dh], 0
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+76h], 0
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+77h], 0
		les	bx, [bp+arg_0]
		mov	dword ptr es:[bx+18h], 0
		les	bx, [bp+arg_0]
		mov	dword ptr es:[bx+6Eh], 0
		les	bx, [bp+arg_0]
		xor	ax, ax
		mov	es:[bx+16h], ax
		les	bx, [bp+arg_0]
		mov	es:[bx+14h], ax
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+78h], 0

loc_17D3C::				; CODE XREF: text_box::text_box(uchar *)+1Dj
		mov	dx, word ptr [bp+arg_0+2]
		mov	ax, word ptr [bp+arg_0]
		jmp	$+2
; ---------------------------------------------------------------------------

loc_17D44::				; CODE XREF: text_box::text_box(uchar *)+D3j
		pop	bp
		retf
@text_box@$bctr$qnuc endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far text_box::~text_box(void far *block, int)
@text_box@$bdtr$qv proc	far		; CODE XREF: seg0fa9:0BF2P
					; seg0fa9:0CC2P ...

var_2		= word ptr -2
block		= dword	ptr  6
arg_4		= word ptr  0Ah

		enter	2, 0
		cmp	[bp+block], 0
		jnz	loc_17D54
		jmp	locret_17DE8
; ---------------------------------------------------------------------------

loc_17D54::				; CODE XREF: text_box::~text_box(void)+9j
		les	bx, [bp+block]
		mov	word ptr es:[bx], offset @text_box@ ; `__vtable__'[text_box]
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		les	bx, [bp+block]
		mov	bx, es:[bx]
		call	dword ptr [bx+4]
		add	sp, 4
		mov	[bp+var_2], 0
		jmp	short loc_17D95
; ---------------------------------------------------------------------------

loc_17D75::				; CODE XREF: text_box::~text_box(void)+5Bj
		push	3		; int
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+block]
		add	bx, ax
		push	word ptr es:[bx+7Ch]
		push	word ptr es:[bx+7Ah] ; block
		call	@button@$bdtr$qv ; button::~button(void)
		add	sp, 6
		inc	[bp+var_2]

loc_17D95::				; CODE XREF: text_box::~text_box(void)+2Dj
		les	bx, [bp+block]
		mov	al, es:[bx+76h]
		mov	ah, 0
		cmp	ax, [bp+var_2]
		jg	loc_17D75
		les	bx, [bp+block]
		cmp	dword ptr es:[bx+18h], 0
		jz	loc_17DC3
		push	3		; int
		les	bx, [bp+block]
		push	word ptr es:[bx+1Ah]
		push	word ptr es:[bx+18h] ; block
		nop
		push	cs
		call	near ptr @file_box@$bdtr$qv ; file_box::~file_box(void)
		add	sp, 6

loc_17DC3::				; CODE XREF: text_box::~text_box(void)+66j
		push	0		; int
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	@gui_item@$bdtr$qv ; gui_item::~gui_item(void)
		add	sp, 6
		test	[bp+arg_4], 1
		jz	short locret_17DE8
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4

locret_17DE8::				; CODE XREF: text_box::~text_box(void)+Bj
					; text_box::~text_box(void)+92j
		leave
		retf
@text_box@$bdtr$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; text_box::add_bitmap(int, int, unsigned char *)
@text_box@add_bitmap$qiinuc proc far	; CODE XREF: i_show_box(uchar *,int,int,uchar *,uchar *)+58p

arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= dword	ptr  0Eh

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_6]
		add	es:[bx+6], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+6]
		shr	ax, 1
		mov	dx, 64h	; 'd'
		sub	dx, ax
		les	bx, [bp+arg_0]
		mov	es:[bx+4], dx
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_4]
		mov	es:[bx+14h], ax
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_6]
		mov	es:[bx+16h], ax
		les	bx, [bp+arg_0]
		mov	eax, [bp+arg_8]
		mov	es:[bx+6Eh], eax
		pop	bp
		retf
@text_box@add_bitmap$qiinuc endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far text_box::add_string(__int32, char *s)
@text_box@add_string$qnuc proc far	; CODE XREF: seg0fa9:0B37P
					; seg0fa9:0B49P ...

var_2		= word ptr -2
arg_0		= dword	ptr  6
s		= dword	ptr  0Ah

		enter	2, 0
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+0Ah]
		inc	word ptr es:[bx+0Ah]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		mov	ax, word ptr [bp+s+2]
		mov	dx, word ptr [bp+s]
		mov	es:[bx+1Eh], ax
		mov	es:[bx+1Ch], dx
		push	word ptr [bp+s+2]
		push	word ptr [bp+s]	; s
		call	_strlen
		add	sp, 4
		shl	ax, 3
		add	ax, 20h	; ' '
		mov	[bp+var_2], ax
		les	bx, [bp+arg_0]
		add	word ptr es:[bx+6], 0Ch
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+8]
		cmp	ax, [bp+var_2]
		jnb	loc_17E88
		les	bx, [bp+arg_0]
		mov	ax, [bp+var_2]
		mov	es:[bx+8], ax

loc_17E88::				; CODE XREF: text_box::add_string(uchar	*)+4Ej
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+8]
		shr	ax, 1
		mov	dx, 0A0h ; ' '
		sub	dx, ax
		les	bx, [bp+arg_0]
		mov	es:[bx+2], dx
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+6]
		shr	ax, 1
		mov	dx, 64h	; 'd'
		sub	dx, ax
		les	bx, [bp+arg_0]
		mov	es:[bx+4], dx
		leave
		retf
@text_box@add_string$qnuc endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far text_box::add_file_box(__int32, char *src)
@text_box@add_file_box$qnuc proc far	; CODE XREF: i_load_file(uchar *,uchar *)+28p

arg_0		= dword	ptr  6
src		= dword	ptr  0Ah

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		add	word ptr es:[bx+6], 84h	; ''
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+8], 0E0h ; 'à'
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+8]
		shr	ax, 1
		mov	dx, 0A0h ; ' '
		sub	dx, ax
		les	bx, [bp+arg_0]
		mov	es:[bx+2], dx
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+6]
		shr	ax, 1
		mov	dx, 64h	; 'd'
		sub	dx, ax
		les	bx, [bp+arg_0]
		mov	es:[bx+4], dx
		push	word ptr [bp+src+2]
		push	word ptr [bp+src] ; src
		push	0		; int
		push	0		; int
		nop
		push	cs
		call	near ptr @file_box@$bctr$qnuc ;	file_box::file_box(uchar *)
		add	sp, 8
		les	bx, [bp+arg_0]
		mov	es:[bx+1Ah], dx
		mov	es:[bx+18h], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2]
		add	ax, 2
		les	bx, [bp+arg_0]
		les	bx, es:[bx+18h]
		mov	es:[bx+2], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+4]
		add	ax, 1Ah
		les	bx, [bp+arg_0]
		les	bx, es:[bx+18h]
		mov	es:[bx+4], ax
		pop	bp
		retf
@text_box@add_file_box$qnuc endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; text_box::add_button(unsigned	char *,	void *)
@text_box@add_button$qnucnv proc far	; CODE XREF: seg0fa9:0B5FP
					; seg0fa9:0B75P ...

var_4		= dword	ptr -4
arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh
arg_A		= word ptr  10h

		enter	4, 0
		push	0
		push	[bp+arg_A]
		push	[bp+arg_8]
		push	[bp+arg_6]
		push	[bp+arg_4]
		push	0
		push	0
		push	cs
		call	near ptr @button@$bctr$qnucnvuc	; button::button(uchar *,void *,uchar)
		add	sp, 0Eh
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		les	bx, [bp+arg_0]
		cmp	dword ptr es:[bx+18h], 0
		jnz	loc_17FAB
		les	bx, [bp+arg_0]
		mov	al, es:[bx+76h]
		mov	ah, 0
		inc	ax
		imul	ax, 44h
		les	bx, [bp+arg_0]
		mov	dx, es:[bx+2]
		les	bx, [bp+arg_0]
		add	dx, es:[bx+8]
		sub	dx, 4
		sub	dx, ax
		les	bx, [bp+var_4]
		mov	es:[bx+18h], dx
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+4]
		les	bx, [bp+arg_0]
		add	ax, es:[bx+6]
		sub	ax, 0Fh
		les	bx, [bp+var_4]
		mov	es:[bx+1Ah], ax
		jmp	loc_17FEC
; ---------------------------------------------------------------------------

loc_17FAB::				; CODE XREF: text_box::add_button(uchar	*,void *)+2Cj
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2]
		les	bx, [bp+arg_0]
		add	ax, es:[bx+8]
		sub	ax, 40h	; '@'
		sub	ax, 8
		les	bx, [bp+var_4]
		mov	es:[bx+18h], ax
		les	bx, [bp+arg_0]
		mov	al, es:[bx+76h]
		mov	ah, 0
		imul	ax, 0Fh
		les	bx, [bp+arg_0]
		mov	dx, es:[bx+4]
		les	bx, [bp+arg_0]
		add	dx, es:[bx+6]
		sub	dx, ax
		sub	dx, 0Fh
		les	bx, [bp+var_4]
		mov	es:[bx+1Ah], dx

loc_17FEC::				; CODE XREF: text_box::add_button(uchar	*,void *)+6Dj
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx+76h], 0
		jnz	loc_18003
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4]
		push	cs
		call	near ptr @button@mouse_to_me$qv	; button::mouse_to_me(void)
		add	sp, 4

loc_18003::				; CODE XREF: text_box::add_button(uchar	*,void *)+B8j
		les	bx, [bp+arg_0]
		mov	al, es:[bx+76h]
		inc	byte ptr es:[bx+76h]
		mov	ah, 0
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		mov	ax, word ptr [bp+var_4+2]
		mov	dx, word ptr [bp+var_4]
		mov	es:[bx+7Ch], ax
		mov	es:[bx+7Ah], dx
		leave
		retf
@text_box@add_button$qnucnv endp

; ---------------------------------------------------------------------------

; text_box::draw(void)
@text_box@draw$qv:			; DATA XREF: seg2608:`__vtable__'[text_box]o
		enter	10h, 0
		les	bx, _mouse
		cmp	byte ptr es:[bx+2], 0
		jz	loc_1804D
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@hide$qv ; ms_mouse::hide(void)
		add	sp, 4
		mov	word ptr [bp-0Ch], 1
		jmp	loc_18052
; ---------------------------------------------------------------------------

loc_1804D::				; CODE XREF: seg137f:2665j
		mov	word ptr [bp-0Ch], 0

loc_18052::				; CODE XREF: seg137f:267Bj
		les	bx, [bp+6]
		mov	ax, es:[bx+4]
		les	bx, [bp+6]
		add	ax, es:[bx+6]
		inc	ax
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+2]
		les	bx, [bp+6]
		add	ax, es:[bx+8]
		inc	ax
		push	ax
		les	bx, [bp+6]
		push	word ptr es:[bx+4]
		les	bx, [bp+6]
		push	word ptr es:[bx+2]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@get_bits$qiiii ; vga_display::get_bits(int,int,int,int)
		add	sp, 0Ch
		les	bx, [bp+6]
		mov	es:[bx+10h], dx
		mov	es:[bx+0Eh], ax
		les	bx, [bp+6]
		cmp	dword ptr es:[bx+0Eh], 0
		jnz	loc_180B2
		push	ds
		push	offset aTextBox	; "Text	Box"
		call	@no_heap$qnuc	; no_heap(uchar	*)
; ---------------------------------------------------------------------------
		add	sp, 4

loc_180B2::				; CODE XREF: seg137f:26D4j
		les	bx, [bp+6]
		mov	ax, es:[bx+4]
		les	bx, [bp+6]
		add	ax, es:[bx+6]
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+2]
		les	bx, [bp+6]
		add	ax, es:[bx+8]
		push	ax
		les	bx, [bp+6]
		push	word ptr es:[bx+4]
		les	bx, [bp+6]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @draw_shadow_box$qiiii	; draw_shadow_box(int,int,int,int)
		add	sp, 8
		les	bx, [bp+6]
		cmp	dword ptr es:[bx+72h], 0
		jnz	loc_1813A
		push	0
		push	0FFFFh
		les	bx, _display
		mov	al, es:[bx+3]
		mov	ah, 0
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+4]
		add	ax, 0Ah
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+2]
		les	bx, [bp+6]
		add	ax, es:[bx+8]
		push	ax
		les	bx, [bp+6]
		push	word ptr es:[bx+4]
		les	bx, [bp+6]
		push	word ptr es:[bx+2]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fill_rect$qiiiiiiuc ; vga_display::fill_rect(int,int,int,int,int,int,uchar)
		add	sp, 12h
		jmp	loc_181CF
; ---------------------------------------------------------------------------

loc_1813A::				; CODE XREF: seg137f:271Ej
		les	bx, [bp+6]
		push	word ptr es:[bx+74h]
		push	word ptr es:[bx+72h]
		call	_strlen
		add	sp, 4
		shl	ax, 3
		shr	ax, 1
		mov	dx, 0A0h ; ' '
		sub	dx, ax
		mov	[bp-8],	dx
		les	bx, [bp+6]
		mov	ax, es:[bx+4]
		inc	ax
		mov	[bp-0Ah], ax
		push	0
		push	0FFFFh
		les	bx, _display
		mov	al, es:[bx+3]
		mov	ah, 0
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+4]
		add	ax, 0Ah
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+2]
		les	bx, [bp+6]
		add	ax, es:[bx+8]
		push	ax
		les	bx, [bp+6]
		push	word ptr es:[bx+4]
		les	bx, [bp+6]
		push	word ptr es:[bx+2]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fill_rect$qiiiiiiuc ; vga_display::fill_rect(int,int,int,int,int,int,uchar)
		add	sp, 12h
		push	0
		les	bx, [bp+6]
		push	word ptr es:[bx+74h]
		push	word ptr es:[bx+72h]
		push	word ptr [bp-0Ah]
		push	word ptr [bp-8]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh

loc_181CF::				; CODE XREF: seg137f:2767j
		les	bx, [bp+6]
		mov	ax, es:[bx+4]
		add	ax, 0Ch
		mov	[bp-6],	ax
		mov	word ptr [bp-2], 0
		jmp	loc_18263
; ---------------------------------------------------------------------------

loc_181E4::				; CODE XREF: seg137f:289Fj
		les	bx, [bp+6]
		mov	al, es:[bx+6Ch]
		mov	ah, 0
		or	ax, ax
		jz	loc_181F8
		cmp	ax, 1
		jz	loc_18222
		jmp	loc_18231
; ---------------------------------------------------------------------------

loc_181F8::				; CODE XREF: seg137f:281Fj
		mov	ax, [bp-2]
		shl	ax, 2
		les	bx, [bp+6]
		add	bx, ax
		push	word ptr es:[bx+1Eh]
		push	word ptr es:[bx+1Ch]
		call	_strlen
		add	sp, 4
		shl	ax, 3
		shr	ax, 1
		mov	dx, 0A0h ; ' '
		sub	dx, ax
		mov	[bp-4],	dx
		jmp	loc_18231
; ---------------------------------------------------------------------------

loc_18222::				; CODE XREF: seg137f:2824j
		les	bx, [bp+6]
		mov	ax, es:[bx+2]
		add	ax, 4
		mov	[bp-4],	ax
		jmp	$+2
; ---------------------------------------------------------------------------

loc_18231::				; CODE XREF: seg137f:2826j
					; seg137f:2850j ...
		push	0
		mov	ax, [bp-2]
		shl	ax, 2
		les	bx, [bp+6]
		add	bx, ax
		push	word ptr es:[bx+1Eh]
		push	word ptr es:[bx+1Ch]
		push	word ptr [bp-6]
		push	word ptr [bp-4]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		add	word ptr [bp-6], 0Ch
		inc	word ptr [bp-2]

loc_18263::				; CODE XREF: seg137f:2811j
		les	bx, [bp+6]
		mov	ax, es:[bx+0Ah]
		cmp	ax, [bp-2]
		jbe	loc_18272
		jmp	loc_181E4
; ---------------------------------------------------------------------------

loc_18272::				; CODE XREF: seg137f:289Dj
		mov	word ptr [bp-2], 0
		jmp	loc_182A6
; ---------------------------------------------------------------------------

loc_18279::				; CODE XREF: seg137f:28E2j
		mov	ax, [bp-2]
		shl	ax, 2
		les	bx, [bp+6]
		add	bx, ax
		push	word ptr es:[bx+7Ch]
		push	word ptr es:[bx+7Ah]
		mov	ax, [bp-2]
		shl	ax, 2
		les	bx, [bp+6]
		add	bx, ax
		les	bx, es:[bx+7Ah]
		mov	bx, es:[bx]
		call	dword ptr [bx]
		add	sp, 4
		inc	word ptr [bp-2]

loc_182A6::				; CODE XREF: seg137f:28A7j
		les	bx, [bp+6]
		mov	al, es:[bx+76h]
		mov	ah, 0
		cmp	ax, [bp-2]
		jg	loc_18279
		les	bx, [bp+6]
		cmp	dword ptr es:[bx+18h], 0
		jz	loc_182D9
		les	bx, [bp+6]
		push	word ptr es:[bx+1Ah]
		push	word ptr es:[bx+18h]
		les	bx, [bp+6]
		les	bx, es:[bx+18h]
		mov	bx, es:[bx]
		call	dword ptr [bx]
		add	sp, 4

loc_182D9::				; CODE XREF: seg137f:28EDj
		les	bx, [bp+6]
		cmp	dword ptr es:[bx+6Eh], 0
		jz	loc_1834C
		les	bx, [bp+6]
		mov	ax, es:[bx+14h]
		cwd
		sub	ax, dx
		sar	ax, 1
		mov	dx, 0A0h ; ' '
		sub	dx, ax
		mov	[bp-0Eh], dx
		les	bx, [bp+6]
		mov	ax, es:[bx+4]
		les	bx, [bp+6]
		mov	dx, es:[bx+0Ah]
		imul	dx, 0Ch
		add	ax, dx
		add	ax, 0Ch
		mov	[bp-10h], ax
		push	0
		push	0
		les	bx, [bp+6]
		push	word ptr es:[bx+70h]
		push	word ptr es:[bx+6Eh]
		les	bx, [bp+6]
		mov	ax, [bp-10h]
		add	ax, es:[bx+16h]
		push	ax
		les	bx, [bp+6]
		mov	ax, [bp-0Eh]
		add	ax, es:[bx+14h]
		push	ax
		push	word ptr [bp-10h]
		push	word ptr [bp-0Eh]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@put_bits$qiiiinucuiui ; vga_display::put_bits(int,int,int,int,uchar *,uint,uint)
		add	sp, 14h

loc_1834C::				; CODE XREF: seg137f:2912j
		cmp	word ptr [bp-0Ch], 0
		jz	loc_18361
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@show$qv ; ms_mouse::show(void)
		add	sp, 4

loc_18361::				; CODE XREF: seg137f:2980j
		cmp	_i_external_button, 0
		jz	locret_18373
		jmp	$+2
; ---------------------------------------------------------------------------

loc_1836B::				; CODE XREF: seg137f:2999j
					; seg137f:29A1j
		call	_i_external_button
		or	al, al
		jnz	loc_1836B

locret_18373::				; CODE XREF: seg137f:2997j
		leave
		retf
; ---------------------------------------------------------------------------

; text_box::poll(void)
@text_box@poll$qv:			; DATA XREF: seg2608:2405o
		enter	2, 0
		mov	word ptr [bp-2], 0
		jmp	loc_183E3
; ---------------------------------------------------------------------------

loc_18380::				; CODE XREF: seg137f:2A1Fj
		les	bx, [bp+6]
		cmp	dword ptr es:[bx+18h], 0
		jz	loc_183AF
		les	bx, [bp+6]
		push	word ptr es:[bx+1Ah]
		push	word ptr es:[bx+18h]
		les	bx, [bp+6]
		les	bx, es:[bx+18h]
		mov	bx, es:[bx]
		call	dword ptr [bx+8]
		add	sp, 4
		or	al, al
		jz	loc_183AF

loc_183AA::				; CODE XREF: seg137f:2A0Ej
		mov	al, 1

loc_183AC::				; CODE XREF: seg137f:2AD1j
		jmp	locret_184A4
; ---------------------------------------------------------------------------

loc_183AF::				; CODE XREF: seg137f:29B9j
					; seg137f:29D8j
		mov	ax, [bp-2]
		shl	ax, 2
		les	bx, [bp+6]
		add	bx, ax
		push	word ptr es:[bx+7Ch]
		push	word ptr es:[bx+7Ah]
		mov	ax, [bp-2]
		shl	ax, 2
		les	bx, [bp+6]
		add	bx, ax
		les	bx, es:[bx+7Ah]
		mov	bx, es:[bx]
		call	dword ptr [bx+8]
		add	sp, 4
		or	al, al
		jz	loc_183E0
		jmp	loc_183AA
; ---------------------------------------------------------------------------

loc_183E0::				; CODE XREF: seg137f:2A0Cj
		inc	word ptr [bp-2]

loc_183E3::				; CODE XREF: seg137f:29AEj
		les	bx, [bp+6]
		mov	al, es:[bx+76h]
		mov	ah, 0
		cmp	ax, [bp-2]
		jg	loc_18380
		cmp	_i_external_left, 0
		jnz	loc_183FC
		jmp	loc_1849F
; ---------------------------------------------------------------------------

loc_183FC::				; CODE XREF: seg137f:2A27j
		call	_i_external_left
		or	al, al
		jz	loc_18454
		les	bx, [bp+6]
		mov	al, es:[bx+78h]
		mov	ah, 0
		les	bx, [bp+6]
		mov	dl, es:[bx+76h]
		mov	dh, 0
		dec	dx
		cmp	ax, dx
		jz	loc_18454
		les	bx, [bp+6]
		inc	byte ptr es:[bx+78h]
		les	bx, [bp+6]
		mov	al, es:[bx+78h]
		mov	ah, 0
		shl	ax, 2
		les	bx, [bp+6]
		add	bx, ax
		push	word ptr es:[bx+7Ch]
		push	word ptr es:[bx+7Ah]
		push	cs
		call	near ptr @button@mouse_to_me$qv	; button::mouse_to_me(void)
		add	sp, 4
		push	0Fh
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@pause$qui ; vga_display::pause(uint)
		add	sp, 6

loc_18454::				; CODE XREF: seg137f:2A32j
					; seg137f:2A49j
		call	_i_external_right
		or	al, al
		jz	loc_1849F
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+78h], 0
		jz	loc_1849F
		les	bx, [bp+6]
		dec	byte ptr es:[bx+78h]
		les	bx, [bp+6]
		mov	al, es:[bx+78h]
		mov	ah, 0
		shl	ax, 2
		les	bx, [bp+6]
		add	bx, ax
		push	word ptr es:[bx+7Ch]
		push	word ptr es:[bx+7Ah]
		push	cs
		call	near ptr @button@mouse_to_me$qv	; button::mouse_to_me(void)
		add	sp, 4
		push	0Fh
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@pause$qui ; vga_display::pause(uint)
		add	sp, 6

loc_1849F::				; CODE XREF: seg137f:2A29j
					; seg137f:2A8Aj ...
		mov	al, 0
		jmp	loc_183AC
; ---------------------------------------------------------------------------

locret_184A4::				; CODE XREF: seg137f:loc_183ACj
		leave
		retf
; ---------------------------------------------------------------------------

; text_box::erase(void)
@text_box@erase$qv:			; DATA XREF: seg2608:2401o
		enter	2, 0
		les	bx, [bp+6]
		mov	al, es:[bx+77h]
		mov	ah, 0
		or	ax, ax
		jz	loc_184BA
		jmp	loc_18540
; ---------------------------------------------------------------------------

loc_184BA::				; CODE XREF: seg137f:2AE5j
		les	bx, _mouse
		cmp	byte ptr es:[bx+2], 0
		jz	loc_184DA
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@hide$qv ; ms_mouse::hide(void)
		add	sp, 4
		mov	byte ptr [bp-1], 1
		jmp	loc_184DE
; ---------------------------------------------------------------------------

loc_184DA::				; CODE XREF: seg137f:2AF3j
		mov	byte ptr [bp-1], 0

loc_184DE::				; CODE XREF: seg137f:2B08j
		push	0
		push	0
		les	bx, [bp+6]
		push	word ptr es:[bx+10h]
		push	word ptr es:[bx+0Eh]
		les	bx, [bp+6]
		mov	ax, es:[bx+4]
		les	bx, [bp+6]
		add	ax, es:[bx+6]
		inc	ax
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+2]
		les	bx, [bp+6]
		add	ax, es:[bx+8]
		inc	ax
		push	ax
		les	bx, [bp+6]
		push	word ptr es:[bx+4]
		les	bx, [bp+6]
		push	word ptr es:[bx+2]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@put_bits$qiiiinucuiui ; vga_display::put_bits(int,int,int,int,uchar *,uint,uint)
		add	sp, 14h
		cmp	byte ptr [bp-1], 0
		jz	loc_18540
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@show$qv ; ms_mouse::show(void)
		add	sp, 4

loc_18540::				; CODE XREF: seg137f:2AE7j
					; seg137f:2B5Fj
		les	bx, [bp+6]
		push	word ptr es:[bx+10h]
		push	word ptr es:[bx+0Eh]
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4
		leave
		retf

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; prompt_box::prompt_box(unsigned char *)
@prompt_box@$bctr$qnuc proc far		; CODE XREF: seg137f:00F9p
					; i_get_string(uchar *,uchar *)+10p

arg_0		= dword	ptr  6
arg_4		= dword	ptr  0Ah

		push	bp
		mov	bp, sp
		cmp	[bp+arg_0], 0
		jnz	loc_18571
		push	2Ah ; '*'       ; unsigned int
		call	@$bnew$qui	; operator new(uint)
		pop	cx
		mov	word ptr [bp+arg_0+2], dx
		mov	word ptr [bp+arg_0], ax
		or	ax, dx
		jz	loc_185DF

loc_18571::				; CODE XREF: prompt_box::prompt_box(uchar *)+8j
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		push	cs
		call	near ptr @gui_item@$bctr$qv ; gui_item::gui_item(void)
		add	sp, 4
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx], offset @prompt_box@ ;	`__vtable__'[prompt_box]
		les	bx, [bp+arg_0]
		mov	eax, [bp+arg_4]
		mov	es:[bx+18h], eax
		les	bx, [bp+arg_0]
		mov	al, 0
		mov	es:[bx+1Ch], al
		les	bx, [bp+arg_0]
		mov	es:[bx+1Dh], al
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+24h], 0
		les	bx, [bp+arg_0]
		mov	al, _maximum_text_length
		mov	es:[bx+22h], al
		push	1Eh		; unsigned int
		call	@$bnew$qui	; operator new(uint)
		pop	cx
		les	bx, [bp+arg_0]
		mov	es:[bx+20h], dx
		mov	es:[bx+1Eh], ax
		push	1Eh		; n
		push	0		; c
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+20h]
		push	word ptr es:[bx+1Eh] ; s
		call	_memset
		add	sp, 8

loc_185DF::				; CODE XREF: prompt_box::prompt_box(uchar *)+1Aj
		mov	dx, word ptr [bp+arg_0+2]
		mov	ax, word ptr [bp+arg_0]
		jmp	$+2
; ---------------------------------------------------------------------------

loc_185E7::				; CODE XREF: prompt_box::prompt_box(uchar *)+90j
		pop	bp
		retf
@prompt_box@$bctr$qnuc endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far prompt_box::~prompt_box(void far *block, int)
@prompt_box@$bdtr$qv proc far		; CODE XREF: seg137f:0148p
					; seg137f:0167p ...

var_2		= word ptr -2
block		= dword	ptr  6
arg_4		= word ptr  0Ah

		enter	2, 0
		cmp	[bp+block], 0
		jnz	loc_185F7
		jmp	locret_186C8
; ---------------------------------------------------------------------------

loc_185F7::				; CODE XREF: prompt_box::~prompt_box(void)+9j
		les	bx, [bp+block]
		mov	word ptr es:[bx], offset @prompt_box@ ;	`__vtable__'[prompt_box]
		les	bx, _mouse
		mov	al, es:[bx+2]
		mov	ah, 0
		mov	[bp+var_2], ax
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@hide$qv ; ms_mouse::hide(void)
		add	sp, 4
		push	0
		push	0
		les	bx, [bp+block]
		push	word ptr es:[bx+10h]
		push	word ptr es:[bx+0Eh]
		les	bx, [bp+block]
		mov	ax, es:[bx+4]
		les	bx, [bp+block]
		add	ax, es:[bx+6]
		inc	ax
		push	ax
		les	bx, [bp+block]
		mov	ax, es:[bx+2]
		les	bx, [bp+block]
		add	ax, es:[bx+8]
		inc	ax
		push	ax
		les	bx, [bp+block]
		push	word ptr es:[bx+4]
		les	bx, [bp+block]
		push	word ptr es:[bx+2]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@put_bits$qiiiinucuiui ; vga_display::put_bits(int,int,int,int,uchar *,uint,uint)
		add	sp, 14h
		les	bx, [bp+block]
		push	word ptr es:[bx+10h]
		push	word ptr es:[bx+0Eh] ; block
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4
		cmp	[bp+var_2], 0
		jz	loc_18690
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@show$qv ; ms_mouse::show(void)
		add	sp, 4

loc_18690::				; CODE XREF: prompt_box::~prompt_box(void)+96j
		les	bx, [bp+block]
		push	word ptr es:[bx+20h]
		push	word ptr es:[bx+1Eh] ; block
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4
		push	0		; int
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	@gui_item@$bdtr$qv ; gui_item::~gui_item(void)
		add	sp, 6
		test	[bp+arg_4], 1
		jz	locret_186C8
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4

locret_186C8::				; CODE XREF: prompt_box::~prompt_box(void)+Bj
					; prompt_box::~prompt_box(void)+CFj
		leave
		retf
@prompt_box@$bdtr$qv endp

; ---------------------------------------------------------------------------

; prompt_box::draw(void)
@prompt_box@draw$qv:			; DATA XREF: seg2608:`__vtable__'[prompt_box]o
		enter	6, 0
		les	bx, [bp+6]
		push	word ptr es:[bx+16h]
		push	word ptr es:[bx+14h]
		call	_strlen
		add	sp, 4
		shl	ax, 3
		add	ax, 20h	; ' '
		les	bx, [bp+6]
		mov	es:[bx+8], ax
		mov	al, _maximum_text_length
		mov	ah, 0
		shl	ax, 3
		les	bx, [bp+6]
		cmp	ax, es:[bx+8]
		jbe	loc_1870E
		mov	al, _maximum_text_length
		mov	ah, 0
		shl	ax, 3
		les	bx, [bp+6]
		mov	es:[bx+8], ax

loc_1870E::				; CODE XREF: seg137f:2D2Dj
		les	bx, [bp+6]
		mov	word ptr es:[bx+6], 24h	; '$'
		les	bx, [bp+6]
		mov	ax, es:[bx+8]
		shr	ax, 1
		mov	dx, 0A0h ; ' '
		sub	dx, ax
		les	bx, [bp+6]
		mov	es:[bx+2], dx
		les	bx, [bp+6]
		mov	ax, es:[bx+6]
		shr	ax, 1
		mov	dx, 64h	; 'd'
		sub	dx, ax
		les	bx, [bp+6]
		mov	es:[bx+4], dx
		les	bx, [bp+6]
		mov	ax, es:[bx+2]
		add	ax, 8
		les	bx, [bp+6]
		mov	es:[bx+26h], ax
		les	bx, [bp+6]
		mov	ax, es:[bx+4]
		les	bx, [bp+6]
		add	ax, es:[bx+6]

loc_18760::
		sub	ax, 0Eh
		les	bx, [bp+6]
		mov	es:[bx+28h], ax
		les	bx, _mouse
		mov	al, es:[bx+2]
		mov	ah, 0
		mov	[bp-6],	ax
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@hide$qv ; ms_mouse::hide(void)
		add	sp, 4
		les	bx, [bp+6]
		mov	ax, es:[bx+4]
		les	bx, [bp+6]
		add	ax, es:[bx+6]
		inc	ax
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+2]
		les	bx, [bp+6]
		add	ax, es:[bx+8]
		inc	ax
		push	ax
		les	bx, [bp+6]
		push	word ptr es:[bx+4]
		les	bx, [bp+6]
		push	word ptr es:[bx+2]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@get_bits$qiiii ; vga_display::get_bits(int,int,int,int)
		add	sp, 0Ch
		les	bx, [bp+6]
		mov	es:[bx+10h], dx
		mov	es:[bx+0Eh], ax
		les	bx, [bp+6]
		mov	ax, es:[bx+4]
		les	bx, [bp+6]
		add	ax, es:[bx+6]
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+2]
		les	bx, [bp+6]
		add	ax, es:[bx+8]
		push	ax
		les	bx, [bp+6]
		push	word ptr es:[bx+4]
		les	bx, [bp+6]
		push	word ptr es:[bx+2]
		push	cs
		call	near ptr @draw_shadow_box$qiiii	; draw_shadow_box(int,int,int,int)
		add	sp, 8
		push	0
		push	0FFFFh
		les	bx, _display
		mov	al, es:[bx+3]
		mov	ah, 0
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+4]
		add	ax, 0Ah
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+2]
		les	bx, [bp+6]
		add	ax, es:[bx+8]
		push	ax
		les	bx, [bp+6]
		push	word ptr es:[bx+4]
		les	bx, [bp+6]
		push	word ptr es:[bx+2]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fill_rect$qiiiiiiuc ; vga_display::fill_rect(int,int,int,int,int,int,uchar)
		add	sp, 12h
		les	bx, [bp+6]
		push	word ptr es:[bx+1Ah]
		push	word ptr es:[bx+18h]
		call	_strlen
		add	sp, 4
		shl	ax, 3
		shr	ax, 1
		mov	dx, 0A0h ; ' '
		sub	dx, ax
		mov	[bp-2],	dx
		les	bx, [bp+6]
		mov	ax, es:[bx+4]
		inc	ax
		mov	[bp-4],	ax
		push	0
		les	bx, [bp+6]
		push	word ptr es:[bx+1Ah]
		push	word ptr es:[bx+18h]
		push	word ptr [bp-4]
		push	word ptr [bp-2]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		push	0
		les	bx, [bp+6]
		push	word ptr es:[bx+16h]
		push	word ptr es:[bx+14h]
		les	bx, [bp+6]
		mov	ax, es:[bx+4]
		add	ax, 0Ch
		push	ax
		les	bx, [bp+6]
		push	word ptr es:[bx+16h]
		push	word ptr es:[bx+14h]
		call	_strlen
		add	sp, 4
		shl	ax, 3
		shr	ax, 1
		mov	dx, 0A0h ; ' '
		sub	dx, ax
		push	dx
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		push	0
		les	bx, _display
		mov	al, es:[bx+3]
		mov	ah, 0
		push	ax
		les	bx, _display
		mov	al, es:[bx+2]
		mov	ah, 0
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+28h]
		add	ax, 0Ch
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+26h]
		les	bx, [bp+6]
		mov	dx, es:[bx+8]
		sub	dx, 10h
		add	ax, dx
		push	ax
		les	bx, [bp+6]
		push	word ptr es:[bx+28h]
		les	bx, [bp+6]
		push	word ptr es:[bx+26h]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fill_rect$qiiiiiiuc ; vga_display::fill_rect(int,int,int,int,int,int,uchar)
		add	sp, 12h
		cmp	word ptr [bp-6], 1
		jnz	locret_18947
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@show$qv ; ms_mouse::show(void)
		add	sp, 4

locret_18947::				; CODE XREF: seg137f:2F66j
		leave
		retf
; ---------------------------------------------------------------------------

; prompt_box::poll(void)
@prompt_box@poll$qv:			; DATA XREF: seg2608:off_2A659o
		enter	4, 0
		mov	byte ptr [bp-2], 0
		mov	byte ptr [bp-3], 0
		mov	_disable_exit_routine, 1
		les	bx, [bp+6]
		push	word ptr es:[bx+20h]
		push	word ptr es:[bx+1Eh]
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		nop
		push	cs
		call	near ptr @prompt_box@update_text$qnuc ;	prompt_box::update_text(uchar *)
		add	sp, 8
		jmp	loc_1897A
; ---------------------------------------------------------------------------

loc_18975::				; CODE XREF: seg137f:2FB1j
		call	_getch

loc_1897A::				; CODE XREF: seg137f:2FA3j
		call	_kbhit
		or	ax, ax
		jnz	loc_18975
		jmp	loc_18A20
; ---------------------------------------------------------------------------

loc_18986::				; CODE XREF: seg137f:3059j
		call	_getch
		mov	[bp-1],	al
		mov	al, [bp-1]
		mov	ah, 0
		cmp	ax, 8
		jz	loc_189AA
		cmp	ax, 0Dh
		jz	loc_189A4
		cmp	ax, 1Bh
		jz	loc_189A4
		jmp	loc_189E2
; ---------------------------------------------------------------------------

loc_189A4::				; CODE XREF: seg137f:2FCBj
					; seg137f:2FD0j
		mov	byte ptr [bp-3], 1
		jmp	loc_18A20
; ---------------------------------------------------------------------------

loc_189AA::				; CODE XREF: seg137f:2FC6j
		cmp	byte ptr [bp-2], 0
		jbe	loc_189E0
		mov	al, [bp-2]
		add	al, 0FFh
		mov	[bp-2],	al
		mov	ah, 0
		les	bx, [bp+6]
		les	bx, es:[bx+1Eh]
		add	bx, ax
		mov	byte ptr es:[bx], 0
		les	bx, [bp+6]
		push	word ptr es:[bx+20h]
		push	word ptr es:[bx+1Eh]
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		nop
		push	cs
		call	near ptr @prompt_box@update_text$qnuc ;	prompt_box::update_text(uchar *)
		add	sp, 8

loc_189E0::				; CODE XREF: seg137f:2FDEj
		jmp	loc_18A20
; ---------------------------------------------------------------------------

loc_189E2::				; CODE XREF: seg137f:2FD2j
		les	bx, [bp+6]
		mov	al, es:[bx+22h]
		cmp	al, [bp-2]
		jbe	loc_18A1E
		mov	al, [bp-2]
		mov	ah, 0
		les	bx, [bp+6]
		les	bx, es:[bx+1Eh]
		add	bx, ax
		mov	al, [bp-1]
		mov	es:[bx], al
		inc	byte ptr [bp-2]
		les	bx, [bp+6]
		push	word ptr es:[bx+20h]
		push	word ptr es:[bx+1Eh]
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		nop
		push	cs
		call	near ptr @prompt_box@update_text$qnuc ;	prompt_box::update_text(uchar *)
		add	sp, 8

loc_18A1E::				; CODE XREF: seg137f:301Cj
		jmp	$+2
; ---------------------------------------------------------------------------

loc_18A20::				; CODE XREF: seg137f:2FB3j
					; seg137f:2FD8j ...
		mov	al, [bp-3]
		mov	ah, 0
		or	ax, ax
		jnz	loc_18A2C
		jmp	loc_18986
; ---------------------------------------------------------------------------

loc_18A2C::				; CODE XREF: seg137f:3057j
		cmp	byte ptr [bp-1], 1Bh
		jz	loc_18A9D
		mov	byte ptr [bp-4], 0
		jmp	loc_18A6C
; ---------------------------------------------------------------------------

loc_18A38::				; CODE XREF: seg137f:30A2j
		mov	al, [bp-4]
		mov	ah, 0
		les	bx, [bp+6]
		les	bx, es:[bx+1Eh]
		add	bx, ax
		cmp	byte ptr es:[bx], 30h ;	'0'
		jb	loc_18A60
		mov	al, [bp-4]
		mov	ah, 0
		les	bx, [bp+6]
		les	bx, es:[bx+1Eh]
		add	bx, ax
		cmp	byte ptr es:[bx], 39h ;	'9'
		jbe	loc_18A69

loc_18A60::				; CODE XREF: seg137f:307Aj
		les	bx, [bp+6]
		inc	byte ptr es:[bx+1Ch]
		jmp	loc_18A74
; ---------------------------------------------------------------------------

loc_18A69::				; CODE XREF: seg137f:308Ej
		inc	byte ptr [bp-4]

loc_18A6C::				; CODE XREF: seg137f:3066j
		mov	al, [bp-4]
		cmp	al, [bp-2]
		jb	loc_18A38

loc_18A74::				; CODE XREF: seg137f:3097j
		les	bx, [bp+6]
		mov	al, es:[bx+1Ch]
		mov	ah, 0
		or	ax, ax
		jnz	loc_18A9B
		les	bx, [bp+6]
		push	word ptr es:[bx+20h]
		push	word ptr es:[bx+1Eh]
		call	@atoi$qnxuc	; atoi(uchar *)
		add	sp, 4
		les	bx, [bp+6]
		mov	es:[bx+24h], ax

loc_18A9B::				; CODE XREF: seg137f:30AFj
		jmp	loc_18AA4
; ---------------------------------------------------------------------------

loc_18A9D::				; CODE XREF: seg137f:3060j
		les	bx, [bp+6]
		inc	byte ptr es:[bx+1Dh]

loc_18AA4::				; CODE XREF: seg137f:loc_18A9Bj
		mov	_disable_exit_routine, 0
		mov	al, 0
		jmp	$+2
; ---------------------------------------------------------------------------

locret_18AAD::				; CODE XREF: seg137f:30DBj
		leave
		retf

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far prompt_box::update_text(__int32, char *s)
@prompt_box@update_text$qnuc proc far	; CODE XREF: seg137f:2F9Dp
					; seg137f:300Ap ...

var_2		= word ptr -2
arg_0		= dword	ptr  6
s		= dword	ptr  0Ah

		enter	2, 0
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+26h]
		add	ax, 2
		push	ax
		push	word ptr [bp+s+2]
		push	word ptr [bp+s]	; s
		call	_strlen
		add	sp, 4
		shl	ax, 3
		pop	dx
		add	dx, ax
		mov	[bp+var_2], dx
		push	0
		les	bx, _display
		mov	al, es:[bx+3]
		mov	ah, 0
		push	ax
		les	bx, _display
		mov	al, es:[bx+2]
		mov	ah, 0
		push	ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+28h]
		add	ax, 0Ch
		push	ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+26h]
		les	bx, [bp+arg_0]
		mov	dx, es:[bx+8]
		sub	dx, 10h
		add	ax, dx
		push	ax
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+28h]
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+26h]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fill_rect$qiiiiiiuc ; vga_display::fill_rect(int,int,int,int,int,int,uchar)
		add	sp, 12h
		push	0		; char
		push	word ptr [bp+s+2]
		push	word ptr [bp+s]	; s
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+28h]
		add	ax, 2
		push	ax		; int
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+26h]
		inc	ax
		push	ax		; int
		push	word ptr _display+2 ; int
		push	word ptr _display ; int
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)

loc_18B53::
		add	sp, 0Eh
		push	0		; char
		push	ds
		push	offset a_	; "_"
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+28h]
		add	ax, 2
		push	ax		; int
		push	[bp+var_2]	; int
		push	word ptr _display+2 ; int
		push	word ptr _display ; int
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		leave
		retf
@prompt_box@update_text$qnuc endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far file_box::file_box(int, int, char *src)
@file_box@$bctr$qnuc proc far		; CODE XREF: text_box::add_file_box(uchar *)+4Bp

ffblk____	= ffblk	ptr -2Eh
var_2		= word ptr -2
arg_0		= word ptr  6
src		= dword	ptr  0Ah

		enter	2Eh, 0
		push	si
		cmp	dword ptr [bp+arg_0], 0
		jnz	loc_18B9E
		push	456h		; unsigned int
		call	@$bnew$qui	; operator new(uint)
		pop	cx
		mov	[bp+8],	dx
		mov	[bp+arg_0], ax
		or	ax, dx
		jnz	loc_18B9E
		jmp	loc_18CB5
; ---------------------------------------------------------------------------

loc_18B9E::				; CODE XREF: file_box::file_box(uchar *)+Aj
					; file_box::file_box(uchar *)+1Dj
		push	word ptr [bp+8]
		push	[bp+arg_0]
		push	cs
		call	near ptr @gui_item@$bctr$qv ; gui_item::gui_item(void)
		add	sp, 4
		les	bx, dword ptr [bp+arg_0]
		mov	word ptr es:[bx], offset @file_box@ ; `__vtable__'[file_box]
		les	bx, dword ptr [bp+arg_0]
		mov	byte ptr es:[bx+450h], 0
		les	bx, dword ptr [bp+arg_0]
		mov	byte ptr es:[bx+451h], 0
		les	bx, dword ptr [bp+arg_0]
		mov	byte ptr es:[bx+452h], 0
		les	bx, dword ptr [bp+arg_0]
		mov	eax, [bp+src]
		mov	es:[bx+14h], eax
		mov	ax, [bp+arg_0]
		add	ax, 18h
		push	word ptr [bp+8]
		push	ax		; dest
		push	word ptr [bp+8]	; int
		push	[bp+arg_0]	; int
		nop
		push	cs
		call	near ptr @file_box@current_directory$qnuc ; file_box::current_directory(uchar *)
		add	sp, 8
		push	ds
		push	offset asc_2A621 ; "\\"
		mov	ax, [bp+arg_0]
		add	ax, 18h
		push	word ptr [bp+8]
		push	ax		; dest
		call	_strcat
		add	sp, 8
		push	word ptr [bp+src+2]
		push	word ptr [bp+src] ; src
		mov	ax, [bp+arg_0]
		add	ax, 18h
		push	word ptr [bp+8]
		push	ax		; dest
		call	_strcat
		add	sp, 8
		les	bx, dword ptr [bp+arg_0]
		mov	word ptr es:[bx+8], 68h	; 'h'
		les	bx, dword ptr [bp+arg_0]
		mov	word ptr es:[bx+6], 7Ah	; 'z'
		les	bx, dword ptr [bp+arg_0]
		mov	word ptr es:[bx+3Eh], 0FFFFh
		les	bx, dword ptr [bp+arg_0]
		mov	byte ptr es:[bx+3Ch], 1Eh
		les	bx, dword ptr [bp+arg_0]
		mov	byte ptr es:[bx+3Dh], 0
		les	bx, dword ptr [bp+arg_0]
		mov	byte ptr es:[bx+3Ah], 1Fh
		les	bx, dword ptr [bp+arg_0]
		mov	byte ptr es:[bx+3Bh], 0
		push	0		; attrib
		push	ss
		lea	ax, [bp+ffblk____]
		push	ax		; ffblk
		les	bx, dword ptr [bp+arg_0]
		push	word ptr es:[bx+16h]
		push	word ptr es:[bx+14h] ; path
		call	_findfirst
		add	sp, 0Ah
		jmp	loc_18CAC
; ---------------------------------------------------------------------------

loc_18C77::				; CODE XREF: file_box::file_box(uchar *)+137j
		push	ss
		lea	ax, (ffblk ptr [bp+ffblk____]).ff_name
		push	ax		; s
		call	_strdup
		add	sp, 4
		les	bx, dword ptr [bp+arg_0]
		mov	si, es:[bx+0Ah]
		inc	word ptr es:[bx+0Ah]
		shl	si, 2
		les	bx, dword ptr [bp+arg_0]
		add	bx, si
		mov	es:[bx+52h], dx
		mov	es:[bx+50h], ax
		push	ss
		lea	ax, [bp+ffblk____]
		push	ax		; ffblk
		call	_findnext
		add	sp, 4

loc_18CAC::				; CODE XREF: file_box::file_box(uchar *)+F9j
		mov	[bp+var_2], ax
		cmp	[bp+var_2], 0
		jz	loc_18C77

loc_18CB5::				; CODE XREF: file_box::file_box(uchar *)+1Fj
		mov	dx, [bp+8]
		mov	ax, [bp+arg_0]
		jmp	$+2
; ---------------------------------------------------------------------------

loc_18CBD::				; CODE XREF: file_box::file_box(uchar *)+13Fj
		pop	si
		leave
		retf
@file_box@$bctr$qnuc endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far file_box::~file_box(void far *block, int)
@file_box@$bdtr$qv proc	far		; CODE XREF: text_box::~text_box(void)+77p

var_2		= word ptr -2
block		= dword	ptr  6
arg_4		= word ptr  0Ah

		enter	2, 0
		cmp	[bp+block], 0
		jz	locret_18D29
		les	bx, [bp+block]
		mov	word ptr es:[bx], offset @file_box@ ; `__vtable__'[file_box]
		mov	[bp+var_2], 0
		jmp	loc_18CF8
; ---------------------------------------------------------------------------

loc_18CDA::				; CODE XREF: file_box::~file_box(void)+42j
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+block]
		add	bx, ax
		push	word ptr es:[bx+52h]
		push	word ptr es:[bx+50h] ; block
		call	_farfree
		add	sp, 4
		inc	[bp+var_2]

loc_18CF8::				; CODE XREF: file_box::~file_box(void)+18j
		les	bx, [bp+block]
		mov	ax, es:[bx+0Ah]
		cmp	ax, [bp+var_2]
		ja	loc_18CDA
		push	0		; int
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	@gui_item@$bdtr$qv ; gui_item::~gui_item(void)
		add	sp, 6
		test	[bp+arg_4], 1
		jz	locret_18D29
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4

locret_18D29::				; CODE XREF: file_box::~file_box(void)+9j
					; file_box::~file_box(void)+59j
		leave
		retf
@file_box@$bdtr$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far file_box::current_directory(int, int, char *dest)
@file_box@current_directory$qnuc proc far ; CODE XREF: file_box::file_box(uchar	*)+70p

dest		= dword	ptr  0Ah

		push	bp
		mov	bp, sp
		push	ds
		push	offset asc_2A623 ; "X:\\"
		push	word ptr [bp+dest+2]
		push	word ptr [bp+dest] ; dest
		call	_strcpy
		add	sp, 8
		call	_getdisk
		add	al, 41h	; 'A'
		les	bx, [bp+dest]
		mov	es:[bx], al
		mov	ax, word ptr [bp+dest]
		add	ax, 3
		push	word ptr [bp+dest+2]
		push	ax		; directory
		push	0		; drive
		call	_getcurdir
		add	sp, 6
		mov	dx, word ptr [bp+dest+2]
		mov	ax, word ptr [bp+dest]
		jmp	$+2
; ---------------------------------------------------------------------------

loc_18D69::				; CODE XREF: file_box::current_directory(uchar *)+3Cj
		pop	bp
		retf
@file_box@current_directory$qnuc endp

; ---------------------------------------------------------------------------

; file_box::draw(void)
@file_box@draw$qv:			; DATA XREF: seg2608:`__vtable__'[file_box]o
		push	bp
		mov	bp, sp
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@hide$qv ; ms_mouse::hide(void)
		add	sp, 4
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		nop
		push	cs
		call	near ptr @file_box@update$qv ; file_box::update(void)
		add	sp, 4
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		nop
		push	cs
		call	near ptr @file_box@draw_arrows$qv ; file_box::draw_arrows(void)
		add	sp, 4
		push	0
		mov	ax, [bp+6]
		add	ax, 18h
		push	word ptr [bp+8]
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+4]
		sub	ax, 0Ch
		push	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+2]
		add	ax, 2
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@show$qv ; ms_mouse::show(void)
		add	sp, 4
		les	bx, [bp+6]
		mov	byte ptr es:[bx+454h], 0
		pop	bp
		retf

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; file_box::update(void)
@file_box@update$qv proc far		; CODE XREF: seg137f:33B5p
					; file_box::poll_arrows(void)+BDp ...

dest		= dword	ptr -8
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6

		enter	8, 0
		push	0
		les	bx, _display
		mov	al, es:[bx+3]
		mov	ah, 0
		push	ax
		les	bx, _display
		mov	al, es:[bx+2]
		mov	ah, 0
		push	ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+4]
		les	bx, [bp+arg_0]
		add	ax, es:[bx+6]
		push	ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2]
		les	bx, [bp+arg_0]
		add	ax, es:[bx+8]
		push	ax
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+4]
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+2]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fill_rect$qiiiiiiuc ; vga_display::fill_rect(int,int,int,int,int,int,uchar)
		add	sp, 12h
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+4]
		add	ax, 3
		mov	[bp+var_4], ax
		les	bx, [bp+arg_0]
		mov	al, es:[bx+450h]
		mov	ah, 0
		mov	[bp+var_2], ax
		jmp	loc_18EE2
; ---------------------------------------------------------------------------

loc_18E5A::				; CODE XREF: file_box::update(void)+10Fj
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+0Ah]
		cmp	ax, [bp+var_2]
		jbe	loc_18EDF
		push	0Fh		; unsigned int
		call	@$bnew$qui	; operator new(uint)
		pop	cx
		mov	word ptr [bp+dest+2], dx
		mov	word ptr [bp+dest], ax
		push	0Eh		; length_
		push	0		; char
		push	word ptr [bp+dest+2]
		push	word ptr [bp+dest] ; dest
		call	_strnset
		add	sp, 8
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		push	word ptr es:[bx+52h]
		push	word ptr es:[bx+50h] ; src
		push	word ptr [bp+dest+2]
		push	word ptr [bp+dest] ; dest
		call	_strcpy
		add	sp, 8
		push	0		; char
		push	word ptr [bp+dest+2]
		push	word ptr [bp+dest] ; s
		push	[bp+var_4]	; int
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2]
		add	ax, 2
		push	ax		; int
		push	word ptr _display+2 ; int
		push	word ptr _display ; int
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		add	[bp+var_4], 0Ch
		push	word ptr [bp+dest+2]
		push	word ptr [bp+dest] ; block
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4

loc_18EDF::				; CODE XREF: file_box::update(void)+7Fj
		inc	[bp+var_2]

loc_18EE2::				; CODE XREF: file_box::update(void)+72j
		les	bx, [bp+arg_0]
		mov	al, es:[bx+450h]
		mov	ah, 0
		add	ax, 0Ah
		cmp	ax, [bp+var_2]
		jle	locret_18EF7
		jmp	loc_18E5A
; ---------------------------------------------------------------------------

locret_18EF7::				; CODE XREF: file_box::update(void)+10Dj
		leave
		retf
@file_box@update$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; file_box::draw_arrows(void)
@file_box@draw_arrows$qv proc far	; CODE XREF: seg137f:33C3p

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2]
		les	bx, [bp+arg_0]
		add	ax, es:[bx+8]
		les	bx, [bp+arg_0]
		mov	es:[bx+40h], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+40h]
		add	ax, 8
		les	bx, [bp+arg_0]
		mov	es:[bx+42h], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+4]
		inc	ax
		les	bx, [bp+arg_0]
		mov	es:[bx+44h], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+44h]
		add	ax, 8
		les	bx, [bp+arg_0]
		mov	es:[bx+46h], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2]
		les	bx, [bp+arg_0]
		add	ax, es:[bx+8]
		les	bx, [bp+arg_0]
		mov	es:[bx+48h], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+48h]
		add	ax, 8
		les	bx, [bp+arg_0]
		mov	es:[bx+4Ah], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+4]
		les	bx, [bp+arg_0]
		add	ax, es:[bx+6]
		sub	ax, 8
		les	bx, [bp+arg_0]
		mov	es:[bx+4Ch], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+4Ch]
		add	ax, 7
		les	bx, [bp+arg_0]
		mov	es:[bx+4Eh], ax
		push	0
		les	bx, _display
		mov	al, es:[bx+3]
		mov	ah, 0
		push	ax
		les	bx, _display
		mov	al, es:[bx+2]
		mov	ah, 0
		push	ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+4]
		les	bx, [bp+arg_0]
		add	ax, es:[bx+6]
		push	ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2]
		les	bx, [bp+arg_0]
		add	ax, es:[bx+8]
		add	ax, 9
		push	ax
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+4]
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2]
		les	bx, [bp+arg_0]
		add	ax, es:[bx+8]
		dec	ax
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fill_rect$qiiiiiiuc ; vga_display::fill_rect(int,int,int,int,int,int,uchar)
		add	sp, 12h
		push	0		; char
		mov	ax, word ptr [bp+arg_0]
		add	ax, 3Ch	; '<'
		push	word ptr [bp+arg_0+2]
		push	ax		; s
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+44h] ; int
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+40h] ; int
		push	word ptr _display+2 ; int
		push	word ptr _display ; int
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		push	0		; char
		mov	ax, word ptr [bp+arg_0]
		add	ax, 3Ah	; ':'
		push	word ptr [bp+arg_0+2]
		push	ax		; s
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+4Ch] ; int
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+48h] ; int
		push	word ptr _display+2 ; int
		push	word ptr _display ; int
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		pop	bp
		retf
@file_box@draw_arrows$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; file_box::poll_arrows(void)
@file_box@poll_arrows$qv proc far	; CODE XREF: seg137f:3941p

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+46h]
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+42h]
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+44h]
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+40h]
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@pressed_in_box$qiiii	; ms_mouse::pressed_in_box(int,int,int,int)
		add	sp, 0Ch
		or	al, al
		jnz	loc_1907C
		jmp	loc_19130
; ---------------------------------------------------------------------------

loc_1907C::				; CODE XREF: file_box::poll_arrows(void)+30j
		les	bx, [bp+arg_0]
		mov	al, es:[bx+450h]
		mov	ah, 0
		dec	ax
		jg	loc_1908C
		jmp	loc_1912E
; ---------------------------------------------------------------------------

loc_1908C::				; CODE XREF: file_box::poll_arrows(void)+40j
		les	bx, [bp+arg_0]
		mov	al, es:[bx+451h]
		mov	ah, 0
		or	ax, ax
		jnz	loc_190EB
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@hide$qv ; ms_mouse::hide(void)
		add	sp, 4
		push	0		; char
		push	0		; int
		push	0		; int
		mov	ax, word ptr [bp+arg_0]
		add	ax, 3Ch	; '<'
		push	word ptr [bp+arg_0+2]
		push	ax		; s
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+46h] ; int
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+42h] ; int
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+44h] ; int
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+40h] ; int
		push	cs
		call	near ptr @high_light$qiiiinuciiuc ; high_light(int,int,int,int,uchar *,int,int,uchar)
		add	sp, 12h
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@show$qv ; ms_mouse::show(void)
		add	sp, 4

loc_190EB::				; CODE XREF: file_box::poll_arrows(void)+51j
		les	bx, [bp+arg_0]
		mov	al, es:[bx+450h]
		add	al, 0FEh ; 'þ'
		les	bx, [bp+arg_0]
		mov	es:[bx+450h], al
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		push	cs
		call	near ptr @file_box@update$qv ; file_box::update(void)
		add	sp, 4
		push	5
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@pause$qui ; vga_display::pause(uint)
		add	sp, 6
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+451h], 1
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+3Eh], 0FFFFh

loc_1912E::				; CODE XREF: file_box::poll_arrows(void)+42j
		jmp	loc_19195
; ---------------------------------------------------------------------------

loc_19130::				; CODE XREF: file_box::poll_arrows(void)+32j
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx+451h], 0
		jz	loc_19195
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@hide$qv ; ms_mouse::hide(void)
		add	sp, 4
		push	1		; char
		push	0		; int
		push	0		; int
		mov	ax, word ptr [bp+arg_0]
		add	ax, 3Ch	; '<'
		push	word ptr [bp+arg_0+2]
		push	ax		; s
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+46h] ; int
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+42h] ; int
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+44h] ; int
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+40h] ; int
		push	cs
		call	near ptr @high_light$qiiiinuciiuc ; high_light(int,int,int,int,uchar *,int,int,uchar)
		add	sp, 12h
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@show$qv ; ms_mouse::show(void)
		add	sp, 4
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+451h], 0

loc_19195::				; CODE XREF: file_box::poll_arrows(void):loc_1912Ej
					; file_box::poll_arrows(void)+F2j
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+4Eh]
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+4Ah]
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+4Ch]
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+48h]
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@pressed_in_box$qiiii	; ms_mouse::pressed_in_box(int,int,int,int)
		add	sp, 0Ch
		or	al, al
		jnz	loc_191C7
		jmp	loc_19284
; ---------------------------------------------------------------------------

loc_191C7::				; CODE XREF: file_box::poll_arrows(void)+17Bj
		les	bx, [bp+arg_0]
		mov	al, es:[bx+450h]
		mov	ah, 0
		add	ax, 0Bh
		les	bx, [bp+arg_0]
		cmp	ax, es:[bx+0Ah]
		jb	loc_191E0
		jmp	loc_19282
; ---------------------------------------------------------------------------

loc_191E0::				; CODE XREF: file_box::poll_arrows(void)+194j
		les	bx, [bp+arg_0]
		mov	al, es:[bx+452h]
		mov	ah, 0
		or	ax, ax
		jnz	loc_1923F
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@hide$qv ; ms_mouse::hide(void)
		add	sp, 4
		push	0		; char
		push	0		; int
		push	0		; int
		mov	ax, word ptr [bp+arg_0]
		add	ax, 3Ah	; ':'
		push	word ptr [bp+arg_0+2]
		push	ax		; s
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+4Eh] ; int
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+4Ah] ; int
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+4Ch] ; int
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+48h] ; int
		push	cs
		call	near ptr @high_light$qiiiinuciiuc ; high_light(int,int,int,int,uchar *,int,int,uchar)
		add	sp, 12h
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@show$qv ; ms_mouse::show(void)
		add	sp, 4

loc_1923F::				; CODE XREF: file_box::poll_arrows(void)+1A5j
		les	bx, [bp+arg_0]
		mov	al, es:[bx+450h]
		add	al, 2
		les	bx, [bp+arg_0]
		mov	es:[bx+450h], al
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		push	cs
		call	near ptr @file_box@update$qv ; file_box::update(void)
		add	sp, 4
		push	5
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@pause$qui ; vga_display::pause(uint)
		add	sp, 6
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+452h], 1
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+3Eh], 0FFFFh

loc_19282::				; CODE XREF: file_box::poll_arrows(void)+196j
		jmp	loc_192E9
; ---------------------------------------------------------------------------

loc_19284::				; CODE XREF: file_box::poll_arrows(void)+17Dj
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx+452h], 0
		jz	loc_192E9
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+452h], 0
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@hide$qv ; ms_mouse::hide(void)
		add	sp, 4
		push	1		; char
		push	0		; int
		push	0		; int
		mov	ax, word ptr [bp+arg_0]
		add	ax, 3Ah	; ':'
		push	word ptr [bp+arg_0+2]
		push	ax		; s
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+4Eh] ; int
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+4Ah] ; int
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+4Ch] ; int
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+48h] ; int
		push	cs
		call	near ptr @high_light$qiiiinuciiuc ; high_light(int,int,int,int,uchar *,int,int,uchar)
		add	sp, 12h
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@show$qv ; ms_mouse::show(void)
		add	sp, 4

loc_192E9::				; CODE XREF: file_box::poll_arrows(void):loc_19282j
					; file_box::poll_arrows(void)+246j
		pop	bp
		retf
@file_box@poll_arrows$qv endp

; ---------------------------------------------------------------------------

; file_box::poll(void)
@file_box@poll$qv:			; DATA XREF: seg2608:23EDo
		enter	12h, 0
		les	bx, [bp+6]
		cmp	word ptr es:[bx+0Ah], 0
		jnz	loc_1930A
		les	bx, [bp+6]
		mov	dword ptr es:[bx+36h], 0

loc_19305::				; CODE XREF: seg137f:loc_19583j
		mov	al, 0

loc_19307::				; CODE XREF: seg137f:3B4Cj
		jmp	locret_19586
; ---------------------------------------------------------------------------

loc_1930A::				; CODE XREF: seg137f:3927j
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @file_box@poll_arrows$qv ; file_box::poll_arrows(void)
		add	sp, 4
		push	1
		push	word ptr _display+2

loc_1931D::
		push	word ptr _display
		call	@vga_display@pause$qui ; vga_display::pause(uint)
		add	sp, 6
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+453h], 0
		jbe	loc_1933C
		les	bx, [bp+6]
		dec	byte ptr es:[bx+453h]

loc_1933C::				; CODE XREF: seg137f:3962j
		mov	word ptr [bp-2], 0
		jmp	loc_19536
; ---------------------------------------------------------------------------

loc_19344::				; CODE XREF: seg137f:3B6Cj
		cmp	word ptr [bp-2], 0Ah
		jg	loc_19356
		les	bx, [bp+6]
		mov	ax, es:[bx+0Ah]
		cmp	ax, [bp-2]
		jnb	loc_19359

loc_19356::				; CODE XREF: seg137f:3978j
		jmp	loc_1953F
; ---------------------------------------------------------------------------

loc_19359::				; CODE XREF: seg137f:3984j
		les	bx, [bp+6]
		mov	ax, es:[bx+2]
		inc	ax
		mov	[bp-4],	ax
		les	bx, [bp+6]
		mov	ax, es:[bx+2]
		les	bx, [bp+6]
		add	ax, es:[bx+8]
		dec	ax
		mov	[bp-8],	ax
		mov	ax, [bp-2]
		imul	ax, 0Ch
		les	bx, [bp+6]
		mov	dx, es:[bx+4]
		add	dx, ax
		inc	dx
		mov	[bp-6],	dx
		mov	ax, [bp-6]
		add	ax, 0Ch
		mov	[bp-0Ah], ax
		push	word ptr [bp-0Ah]
		push	word ptr [bp-8]
		push	word ptr [bp-6]
		push	word ptr [bp-4]
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@pressed_in_box$qiiii	; ms_mouse::pressed_in_box(int,int,int,int)
		add	sp, 0Ch
		or	al, al
		jnz	loc_193B4
		jmp	loc_19533
; ---------------------------------------------------------------------------

loc_193B4::				; CODE XREF: seg137f:39DFj
		les	bx, [bp+6]
		cmp	word ptr es:[bx+3Eh], 0FFFFh
		jnz	loc_193C1
		jmp	loc_19465
; ---------------------------------------------------------------------------

loc_193C1::				; CODE XREF: seg137f:39ECj
		les	bx, [bp+6]
		mov	ax, es:[bx+3Eh]
		cmp	ax, [bp-2]
		jnz	loc_193D0
		jmp	loc_19465
; ---------------------------------------------------------------------------

loc_193D0::				; CODE XREF: seg137f:39FBj
		les	bx, [bp+6]
		mov	ax, es:[bx+0Ah]
		cmp	ax, [bp-2]
		ja	loc_193DF
		jmp	loc_19465
; ---------------------------------------------------------------------------

loc_193DF::				; CODE XREF: seg137f:3A0Aj
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@hide$qv ; ms_mouse::hide(void)
		add	sp, 4
		mov	ax, [bp-4]
		mov	[bp-0Ch], ax
		mov	ax, [bp-8]
		mov	[bp-10h], ax
		les	bx, [bp+6]
		mov	ax, es:[bx+3Eh]
		imul	ax, 0Ch
		les	bx, [bp+6]
		mov	dx, es:[bx+4]
		add	dx, ax
		inc	dx
		mov	[bp-0Eh], dx
		mov	ax, [bp-0Eh]
		add	ax, 0Ch
		mov	[bp-12h], ax
		push	1
		push	2
		push	1
		les	bx, [bp+6]
		mov	al, es:[bx+450h]
		mov	ah, 0
		les	bx, [bp+6]
		mov	dx, es:[bx+3Eh]
		add	dx, ax
		shl	dx, 2
		les	bx, [bp+6]
		add	bx, dx
		push	word ptr es:[bx+52h]
		push	word ptr es:[bx+50h]
		push	word ptr [bp-12h]
		push	word ptr [bp-10h]
		push	word ptr [bp-0Eh]
		push	word ptr [bp-0Ch]
		push	cs
		call	near ptr @high_light$qiiiinuciiuc ; high_light(int,int,int,int,uchar *,int,int,uchar)
		add	sp, 12h
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@show$qv ; ms_mouse::show(void)
		add	sp, 4

loc_19465::				; CODE XREF: seg137f:39EEj
					; seg137f:39FDj ...
		les	bx, [bp+6]
		mov	ax, es:[bx+3Eh]
		cmp	ax, [bp-2]
		jz	loc_194EF
		les	bx, [bp+6]
		mov	ax, es:[bx+0Ah]
		cmp	ax, [bp-2]
		jbe	loc_194EF
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@hide$qv ; ms_mouse::hide(void)
		add	sp, 4
		les	bx, [bp+6]
		mov	ax, [bp-2]
		mov	es:[bx+3Eh], ax
		push	0
		push	2
		push	1
		les	bx, [bp+6]
		mov	al, es:[bx+450h]
		mov	ah, 0
		mov	dx, [bp-2]
		add	dx, ax
		shl	dx, 2
		les	bx, [bp+6]
		add	bx, dx
		push	word ptr es:[bx+52h]
		push	word ptr es:[bx+50h]
		push	word ptr [bp-0Ah]
		push	word ptr [bp-8]
		push	word ptr [bp-6]
		push	word ptr [bp-4]
		push	cs
		call	near ptr @high_light$qiiiinuciiuc ; high_light(int,int,int,int,uchar *,int,int,uchar)
		add	sp, 12h
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@show$qv ; ms_mouse::show(void)
		add	sp, 4
		les	bx, _mouse
		mov	byte ptr es:[bx+1], 0
		les	bx, [bp+6]
		mov	byte ptr es:[bx+453h], 19h

loc_194EF::				; CODE XREF: seg137f:3A9Fj
					; seg137f:3AABj
		les	bx, [bp+6]
		mov	ax, es:[bx+3Eh]
		cmp	ax, [bp-2]
		jnz	loc_19533
		les	bx, _mouse
		cmp	byte ptr es:[bx+1], 0
		jz	loc_19533
		les	bx, [bp+6]
		cmp	byte ptr es:[bx+453h], 0
		jz	loc_19521
		les	bx, [bp+6]
		mov	byte ptr es:[bx+454h], 1
		mov	al, 1
		jmp	loc_19307
; ---------------------------------------------------------------------------
		jmp	loc_19533
; ---------------------------------------------------------------------------

loc_19521::				; CODE XREF: seg137f:3B3Fj
		les	bx, _mouse
		mov	byte ptr es:[bx+1], 0
		les	bx, [bp+6]
		mov	byte ptr es:[bx+453h], 19h

loc_19533::				; CODE XREF: seg137f:39E1j
					; seg137f:3B29j ...
		inc	word ptr [bp-2]

loc_19536::				; CODE XREF: seg137f:3971j
		cmp	word ptr [bp-2], 0Ah
		jge	loc_1953F
		jmp	loc_19344
; ---------------------------------------------------------------------------

loc_1953F::				; CODE XREF: seg137f:loc_19356j
					; seg137f:3B6Aj
		les	bx, [bp+6]
		cmp	word ptr es:[bx+3Eh], 0FFFFh
		jnz	loc_19557
		les	bx, [bp+6]
		mov	dword ptr es:[bx+36h], 0
		jmp	loc_19583
; ---------------------------------------------------------------------------

loc_19557::				; CODE XREF: seg137f:3B77j
		les	bx, [bp+6]
		mov	al, es:[bx+450h]
		mov	ah, 0
		les	bx, [bp+6]
		add	ax, es:[bx+3Eh]
		shl	ax, 2
		les	bx, [bp+6]
		add	bx, ax
		mov	ax, es:[bx+52h]
		mov	dx, es:[bx+50h]
		les	bx, [bp+6]
		mov	es:[bx+38h], ax
		mov	es:[bx+36h], dx

loc_19583::				; CODE XREF: seg137f:3B85j
		jmp	loc_19305
; ---------------------------------------------------------------------------

locret_19586::				; CODE XREF: seg137f:loc_19307j
		leave
		retf
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far text_pager::text_pager(__int32, char *path,	char, __int32)
@text_pager@$bctr$qnucucnquc$v proc far	; CODE XREF: seg0fa9:0628P
					; seg0fa9:08C3P ...

block		= dword	ptr -12h
var_E		= dword	ptr -0Eh
var_A		= byte ptr -0Ah
buf		= byte ptr -9
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
path		= dword	ptr  0Ah
arg_8		= byte ptr  0Eh
arg_A		= dword	ptr  10h

		enter	12h, 0
		cmp	[bp+arg_0], 0
		jnz	loc_195A8
		push	14h		; unsigned int
		call	@$bnew$qui	; operator new(uint)
		assume es:nothing
		pop	cx
		mov	word ptr [bp+arg_0+2], dx
		mov	word ptr [bp+arg_0], ax
		or	ax, dx
		jnz	loc_195A8
		jmp	loc_199D3
; ---------------------------------------------------------------------------

loc_195A8::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+9j
					; text_pager::text_pager(uchar *,uchar,void (*)(uchar))+1Bj
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		push	cs
		call	near ptr @gui_item@$bctr$qv ; gui_item::gui_item(void)
		assume es:nothing
		add	sp, 4
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx], offset @text_pager@ ;	`__vtable__'[text_pager]
		push	word ptr [bp+path+2]
		push	word ptr [bp+path] ; path
		call	@g_open_element$qnuc ; g_open_element(uchar *)
		push	dx
		push	ax
		pop	eax
		add	sp, 4
		cmp	eax, 0FFFFFFFFh
		jnz	loc_195E3
		push	word ptr [bp+path+2]
		push	word ptr [bp+path]
		call	@read_error$qnuc ; read_error(uchar *)
; ---------------------------------------------------------------------------
		add	sp, 4

loc_195E3::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+4Bj
		mov	[bp+var_6], 0
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+13h], 0

loc_195F0::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+37Ej
		cmp	[bp+arg_8], 0
		jnz	loc_19605
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@blank_palette$qv ;	vga_display::blank_palette(void)
		jmp	loc_19612
; ---------------------------------------------------------------------------

loc_19605::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+6Cj
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fade_down$qv ; vga_display::fade_down(void)

loc_19612::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+7Bj
		add	sp, 4
		mov	ax, 5
		mov	[bp+var_4], ax
		mov	[bp+var_2], ax
		cmp	[bp+arg_A], 0
		jz	loc_1962F
		mov	al, byte ptr [bp+var_6]
		push	ax
		call	[bp+arg_A]
		assume es:nothing
		pop	cx
		jmp	loc_1964A
; ---------------------------------------------------------------------------

loc_1962F::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+9Bj
		push	0
		les	bx, _display
		assume es:nothing
		mov	al, es:[bx+2]
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@cls$qucuc ; vga_display::cls(uchar,uchar)
		add	sp, 8
		assume es:nothing

loc_1964A::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+A5j
		mov	[bp+var_8], 0
		jmp	loc_196EE
; ---------------------------------------------------------------------------

loc_19652::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+16Cj
		push	64h ; 'd'       ; n
		push	0		; c
		push	ds
		push	offset _tmp	; s
		call	_memset
		assume es:seg2608
		add	sp, 8
		mov	[bp+var_A], 0
		push	1		; len
		push	ss
		lea	ax, [bp+buf]
		push	ax		; buf
		call	@g_element_read$qnvui ;	g_element_read(void *,uint)
		push	dx
		push	ax
		pop	eax
		add	sp, 6
		cmp	eax, 1
		jz	loc_19682
		jmp	loc_19909
; ---------------------------------------------------------------------------

loc_19682::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+F5j
		jmp	loc_196B1
; ---------------------------------------------------------------------------

loc_19684::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+12Dj
		mov	al, [bp+var_A]
		mov	ah, 0
		mov	dl, [bp+buf]
		mov	bx, ax
		mov	_tmp[bx], dl
		inc	[bp+var_A]
		push	1		; len
		push	ss
		lea	ax, [bp+buf]
		push	ax		; buf
		call	@g_element_read$qnvui ;	g_element_read(void *,uint)
		push	dx
		push	ax
		pop	eax
		add	sp, 6
		cmp	eax, 1
		jz	loc_196B1
		jmp	loc_19909
; ---------------------------------------------------------------------------

loc_196B1::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar)):loc_19682j
					; text_pager::text_pager(uchar *,uchar,void (*)(uchar))+124j
		cmp	[bp+buf], 0Ah
		jnz	loc_19684
		push	ds
		push	offset _tmp	; s
		call	_strlen
		add	sp, 4
		dec	ax
		mov	bx, ax
		mov	_tmp[bx], 0
		push	0		; char
		push	ds
		push	offset _tmp	; s
		push	[bp+var_4]	; int
		push	[bp+var_2]	; int
		push	word ptr _display+2 ; int
		push	word ptr _display ; int
		call	@vga_display@print_at_xy$qiinucuc ; vga_display::print_at_xy(int,int,uchar *,uchar)
		add	sp, 0Eh
		add	[bp+var_4], 0Ah
		inc	[bp+var_8]
		assume es:nothing

loc_196EE::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+C7j
		cmp	[bp+var_8], 13h
		jge	loc_196F7
		jmp	loc_19652
; ---------------------------------------------------------------------------
		assume es:seg2608

loc_196F7::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+16Aj
		push	0
		push	0
		push	0
		push	ds
		push	offset aMore	; "More	>>"
		push	0
		push	0
		push	cs
		call	near ptr @button@$bctr$qnucnvuc	; button::button(uchar *,void *,uchar)
		assume es:nothing
		add	sp, 0Eh
		mov	word ptr [bp+block+2], dx
		mov	word ptr [bp+block], ax
		push	0
		push	0
		push	0
		push	ds
		push	offset aExit	; "Exit"
		push	0
		push	0
		push	cs
		call	near ptr @button@$bctr$qnucnvuc	; button::button(uchar *,void *,uchar)
		assume es:nothing
		add	sp, 0Eh
		mov	word ptr [bp+var_E+2], dx
		mov	word ptr [bp+var_E], ax
		les	bx, [bp+block]
		assume es:nothing
		mov	word ptr es:[bx+18h], 0E6h ; 'æ'
		les	bx, [bp+var_E]
		assume es:nothing
		mov	word ptr es:[bx+18h], 0A0h ; ' '
		les	bx, [bp+var_E]
		mov	ax, 0B7h ; '·'
		mov	es:[bx+1Ah], ax
		les	bx, [bp+block]
		assume es:nothing
		mov	es:[bx+1Ah], ax
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		les	bx, [bp+block]
		mov	bx, es:[bx]
		call	dword ptr [bx]
		assume es:seg2608
		add	sp, 4
		push	word ptr [bp+var_E+2]
		push	word ptr [bp+var_E]
		les	bx, [bp+var_E]
		assume es:nothing
		mov	bx, es:[bx]
		call	dword ptr [bx]
		assume es:seg2608
		add	sp, 4
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		push	cs
		call	near ptr @button@mouse_to_me$qv	; button::mouse_to_me(void)
		assume es:nothing
		add	sp, 4
		cmp	[bp+arg_8], 0
		jnz	loc_19794
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@set_palette$qv ; vga_display::set_palette(void)
		jmp	loc_197A1
; ---------------------------------------------------------------------------

loc_19794::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+1FBj
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fade_up$qv	; vga_display::fade_up(void)

loc_197A1::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+20Aj
		add	sp, 4
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@show$qv ; ms_mouse::show(void)
		assume es:nothing
		add	sp, 4
		jmp	$+2
; ---------------------------------------------------------------------------

loc_197B5::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+22Bj
					; text_pager::text_pager(uchar *,uchar,void (*)(uchar))+235j ...
		les	bx, _mouse
		assume es:nothing
		cmp	byte ptr es:[bx], 0
		jnz	loc_197B5
		cmp	byte_2D3E4, 0
		jnz	loc_197B5
		cmp	byte_2D3C7, 0
		jnz	loc_197B5

loc_197CD::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar)):loc_198D1j
		push	word ptr [bp+var_E+2]
		push	word ptr [bp+var_E]
		les	bx, [bp+var_E]
		assume es:nothing
		mov	bx, es:[bx]
		call	dword ptr [bx+8]
		add	sp, 4
		or	al, al
		jz	loc_19815
		push	3		; int
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	@button@$bdtr$qv ; button::~button(void)
		assume es:nothing
		add	sp, 6
		push	3		; int
		push	word ptr [bp+var_E+2]
		push	word ptr [bp+var_E] ; block
		call	@button@$bdtr$qv ; button::~button(void)
		assume es:nothing
		add	sp, 6
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@hide$qv ; ms_mouse::hide(void)
		assume es:nothing
		add	sp, 4
		jmp	loc_199CE
; ---------------------------------------------------------------------------
		assume es:nothing

loc_19815::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+259j
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		les	bx, [bp+block]
		assume es:nothing
		mov	bx, es:[bx]
		call	dword ptr [bx+8]
		add	sp, 4
		or	al, al
		jz	loc_1982E
		jmp	loc_198D4
; ---------------------------------------------------------------------------

loc_1982E::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+2A1j
		cmp	_i_external_left, 0
		jnz	loc_19839
		jmp	loc_198D1
; ---------------------------------------------------------------------------

loc_19839::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+2ACj
		call	_i_external_left
		assume es:nothing
		or	al, al
		jz	loc_19885
		les	bx, [bp+arg_0]
		assume es:nothing
		cmp	byte ptr es:[bx+13h], 1
		jz	loc_19885
		les	bx, [bp+arg_0]
		inc	byte ptr es:[bx+13h]
		les	bx, [bp+arg_0]
		mov	al, es:[bx+13h]
		mov	ah, 0
		shl	ax, 2
		lea	dx, [bp+block]
		add	ax, dx
		mov	bx, ax
		push	word ptr ss:[bx+2]
		push	word ptr ss:[bx]
		push	cs
		call	near ptr @button@mouse_to_me$qv	; button::mouse_to_me(void)
		add	sp, 4
		push	0Fh
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@pause$qui ; vga_display::pause(uint)
		add	sp, 6
		assume es:nothing

loc_19885::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+2B7j
					; text_pager::text_pager(uchar *,uchar,void (*)(uchar))+2C1j
		call	_i_external_right
		or	al, al
		jz	loc_198D1
		les	bx, [bp+arg_0]
		assume es:nothing
		cmp	byte ptr es:[bx+13h], 0
		jz	loc_198D1
		les	bx, [bp+arg_0]
		dec	byte ptr es:[bx+13h]
		les	bx, [bp+arg_0]
		mov	al, es:[bx+13h]
		mov	ah, 0
		shl	ax, 2
		lea	dx, [bp+block]
		add	ax, dx
		mov	bx, ax
		push	word ptr ss:[bx+2]
		push	word ptr ss:[bx]
		push	cs
		call	near ptr @button@mouse_to_me$qv	; button::mouse_to_me(void)
		add	sp, 4
		push	0Fh
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@pause$qui ; vga_display::pause(uint)
		add	sp, 6
		assume es:nothing

loc_198D1::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+2AEj
					; text_pager::text_pager(uchar *,uchar,void (*)(uchar))+303j ...
		jmp	loc_197CD
; ---------------------------------------------------------------------------
		assume es:nothing

loc_198D4::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+2A3j
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@hide$qv ; ms_mouse::hide(void)
		assume es:nothing
		add	sp, 4
		push	3		; int
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	@button@$bdtr$qv ; button::~button(void)
		assume es:nothing
		add	sp, 6
		push	3		; int
		push	word ptr [bp+var_E+2]
		push	word ptr [bp+var_E] ; block
		call	@button@$bdtr$qv ; button::~button(void)
		assume es:nothing
		add	sp, 6
		inc	[bp+var_6]
		jmp	loc_195F0
; ---------------------------------------------------------------------------

loc_19909::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+F7j
					; text_pager::text_pager(uchar *,uchar,void (*)(uchar))+126j
		push	0
		push	0
		push	0
		push	ds
		push	offset aDone	; "Done"
		push	0
		push	0
		push	cs
		call	near ptr @button@$bctr$qnucnvuc	; button::button(uchar *,void *,uchar)
		add	sp, 0Eh
		mov	word ptr [bp+block+2], dx
		mov	word ptr [bp+block], ax
		les	bx, [bp+block]
		assume es:nothing
		mov	word ptr es:[bx+18h], 0E6h ; 'æ'
		les	bx, [bp+block]
		mov	word ptr es:[bx+1Ah], 0B8h ; '¸'
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		les	bx, [bp+block]
		mov	bx, es:[bx]
		call	dword ptr [bx]
		add	sp, 4
		cmp	[bp+arg_8], 0
		jnz	loc_1995C
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@set_palette$qv ; vga_display::set_palette(void)
		jmp	loc_19969
; ---------------------------------------------------------------------------

loc_1995C::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+3C3j
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@fade_up$qv	; vga_display::fade_up(void)

loc_19969::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+3D2j
		add	sp, 4
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@show$qv ; ms_mouse::show(void)
		add	sp, 4
		jmp	$+2
; ---------------------------------------------------------------------------

loc_1997D::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+3F3j
					; text_pager::text_pager(uchar *,uchar,void (*)(uchar))+3FDj ...
		les	bx, _mouse
		cmp	byte ptr es:[bx], 0
		jnz	loc_1997D
		cmp	byte_2D3E4, 0
		jnz	loc_1997D
		cmp	byte_2D3C7, 0
		jnz	loc_1997D
		jmp	$+2
; ---------------------------------------------------------------------------

loc_19997::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+40Dj
					; text_pager::text_pager(uchar *,uchar,void (*)(uchar))+425j
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		les	bx, [bp+block]
		mov	bx, es:[bx]
		call	dword ptr [bx+8]
		add	sp, 4
		mov	ah, 0
		or	ax, ax
		jz	loc_19997
		push	word ptr _mouse+2
		push	word ptr _mouse
		push	cs
		call	near ptr @ms_mouse@hide$qv ; ms_mouse::hide(void)
		add	sp, 4
		push	3		; int
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	@button@$bdtr$qv ; button::~button(void)
		add	sp, 6
		assume es:nothing

loc_199CE::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+28Aj
		call	@g_close_element$qv ; g_close_element(void)

loc_199D3::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+1Dj
		mov	dx, word ptr [bp+arg_0+2]
		mov	ax, word ptr [bp+arg_0]
		jmp	$+2
; ---------------------------------------------------------------------------

locret_199DB::				; CODE XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+451j
		leave
		retf
@text_pager@$bctr$qnucucnquc$v endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far text_pager::~text_pager(void far *block, int)
@text_pager@$bdtr$qv proc far		; CODE XREF: seg0fa9:063EP
					; seg0fa9:08D9P ...

block		= dword	ptr  6
arg_4		= word ptr  0Ah

		push	bp
		mov	bp, sp
		cmp	[bp+block], 0
		jz	loc_19A14
		les	bx, [bp+block]
		assume es:nothing
		mov	word ptr es:[bx], offset @text_pager@ ;	`__vtable__'[text_pager]
		push	0		; int
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	@gui_item@$bdtr$qv ; gui_item::~gui_item(void)
		add	sp, 6
		test	[bp+arg_4], 1
		jz	loc_19A14

loc_19A06::
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block

loc_19A0C::				; operator delete(void *)
		call	@$bdele$qnv
		add	sp, 4

loc_19A14::				; CODE XREF: text_pager::~text_pager(void)+8j
					; text_pager::~text_pager(void)+27j
		pop	bp
		retf
@text_pager@$bdtr$qv endp

seg137f		ends

; ===========================================================================

; Segment type:	Pure code
seg1783		segment	byte public 'CODE' use16
		assume cs:seg1783
		;org 6
		assume es:nothing, ss:nothing, ds:seg2608, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far tilemap::tilemap(__int32, char *path, int, int)
@tilemap@$bctr$qnucii proc far		; CODE XREF: start_room(uchar *)+12CP

arg_0		= dword	ptr  6
path		= dword	ptr  0Ah
arg_8		= word ptr  0Eh
arg_A		= word ptr  10h

		push	bp
		mov	bp, sp
		cmp	[bp+arg_0], 0
		jnz	loc_19A36
		push	3A2h		; unsigned int
		call	@$bnew$qui	; operator new(uint)
		pop	cx
		mov	word ptr [bp+arg_0+2], dx
		mov	word ptr [bp+arg_0], ax
		or	ax, dx
		jnz	loc_19A36
		jmp	loc_19B35
; ---------------------------------------------------------------------------

loc_19A36::				; CODE XREF: tilemap::tilemap(uchar *,int,int)+8j
					; tilemap::tilemap(uchar *,int,int)+1Bj
		push	8000h		; unsigned int

loc_19A39::				; operator new(uint)
		call	@$bnew$qui
		assume es:nothing
		pop	cx
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	es:[bx+9Ah], dx
		mov	es:[bx+98h], ax
		les	bx, [bp+arg_0]
		cmp	dword ptr es:[bx+98h], 0
		jnz	loc_19A64
		push	ds
		push	offset aTiles_	; "Tiles."
		call	@no_heap$qnuc	; no_heap(uchar	*)
; ---------------------------------------------------------------------------
		add	sp, 4

loc_19A64::				; CODE XREF: tilemap::tilemap(uchar *,int,int)+40j
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+39Ch], 2
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @tilemap@init_work_vars$qv ; tilemap::init_work_vars(void)
		add	sp, 4
		cmp	[bp+path], 0
		jz	loc_19A85
		jmp	loc_19B11
; ---------------------------------------------------------------------------

loc_19A85::				; CODE XREF: tilemap::tilemap(uchar *,int,int)+6Aj
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, [bp+arg_8]
		mov	es:[bx+8Eh], ax

loc_19A90::
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_A]
		mov	es:[bx+90h], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+8Eh]
		shl	ax, 3
		les	bx, [bp+arg_0]
		mov	es:[bx+14h], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+90h]
		shl	ax, 3
		les	bx, [bp+arg_0]
		mov	es:[bx+16h], ax
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @tilemap@init_tables$qv ; tilemap::init_tables(void)
		add	sp, 4
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @tilemap@reset_map$qv ; tilemap::reset_map(void)
		add	sp, 4
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@get_palette$qv ; vga_display::get_palette(void)
		add	sp, 4
		push	300h		; n
		push	ds
		push	offset _palette	; src
		mov	ax, word ptr [bp+arg_0]
		add	ax, 9Ch	; ''
		push	word ptr [bp+arg_0+2]
		push	ax		; dest
		call	_memcpy
		add	sp, 0Ah
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @tilemap@download_tiles$qv ; tilemap::download_tiles(void)
		jmp	loc_19B32
; ---------------------------------------------------------------------------
		assume es:nothing

loc_19B11::				; CODE XREF: tilemap::tilemap(uchar *,int,int)+6Cj
		push	0		; char
		push	word ptr [bp+path+2]
		push	word ptr [bp+path] ; path
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0] ; __int32
		nop
		push	cs
		call	near ptr @tilemap@load$qnucuc ;	tilemap::load(uchar *,uchar)
		assume es:nothing
		add	sp, 0Ah
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @tilemap@init_tables$qv ; tilemap::init_tables(void)
		assume es:nothing

loc_19B32::				; CODE XREF: tilemap::tilemap(uchar *,int,int)+F9j
		add	sp, 4

loc_19B35::				; CODE XREF: tilemap::tilemap(uchar *,int,int)+1Dj
		mov	dx, word ptr [bp+arg_0+2]
		mov	ax, word ptr [bp+arg_0]
		jmp	$+2
; ---------------------------------------------------------------------------

loc_19B3D::				; CODE XREF: tilemap::tilemap(uchar *,int,int)+125j
		pop	bp
		retf
@tilemap@$bctr$qnucii endp

; ---------------------------------------------------------------------------

; tilemap::~tilemap(void)
@tilemap@$bdtr$qv:
		push	bp
		mov	bp, sp
		cmp	dword ptr [bp+6], 0
		jz	loc_19B8D
		call	@beep$qv	; beep(void)
		les	bx, [bp+6]
		assume es:nothing
		push	word ptr es:[bx+9Ah]
		push	word ptr es:[bx+98h]
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4
		les	bx, [bp+6]
		push	word ptr es:[bx+3A0h]
		push	word ptr es:[bx+39Eh]
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4
		test	word ptr [bp+0Ah], 1
		jz	loc_19B8D
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4

loc_19B8D::				; CODE XREF: seg1783:0137j
					; seg1783:016Dj
		pop	bp
		retf
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; tilemap::init_tables(void)
@tilemap@init_tables$qv	proc far	; CODE XREF: tilemap::tilemap(uchar *,int,int)+B1p
					; tilemap::tilemap(uchar *,int,int)+119p ...

var_2		= word ptr -2
arg_0		= dword	ptr  6

		enter	2, 0
		mov	[bp+var_2], 0
		jmp	loc_19BB1
; ---------------------------------------------------------------------------

loc_19B9A::				; CODE XREF: tilemap::init_tables(void)+27j
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, [bp+var_2]
		imul	word ptr es:[bx+8Eh]
		mov	bx, [bp+var_2]
		shl	bx, 1
		mov	word ptr _tbl_mul_tw[bx], ax
		inc	[bp+var_2]
		assume es:nothing

loc_19BB1::				; CODE XREF: tilemap::init_tables(void)+9j
		cmp	[bp+var_2], 0C8h ; 'È'
		jb	loc_19B9A
		assume es:nothing
		mov	[bp+var_2], 0
		jmp	loc_19BF9
; ---------------------------------------------------------------------------

loc_19BBF::				; CODE XREF: tilemap::init_tables(void)+6Fj
		mov	bx, [bp+var_2]
		shl	bx, 1
		mov	_tbl_tile_src[bx], 0D980h
		mov	ax, [bp+var_2]
		mov	bx, 28h	; '('
		xor	dx, dx
		div	bx
		imul	ax, 280h
		mov	bx, [bp+var_2]
		shl	bx, 1
		add	_tbl_tile_src[bx], ax
		mov	ax, [bp+var_2]
		mov	bx, 28h	; '('
		xor	dx, dx
		div	bx
		shl	dx, 1
		mov	bx, [bp+var_2]
		shl	bx, 1
		add	_tbl_tile_src[bx], dx
		inc	[bp+var_2]

loc_19BF9::				; CODE XREF: tilemap::init_tables(void)+2Ej
		cmp	[bp+var_2], 200h
		jb	loc_19BBF
		mov	[bp+var_2], 0
		jmp	loc_19C19
; ---------------------------------------------------------------------------

loc_19C07::				; CODE XREF: tilemap::init_tables(void)+8Fj
		mov	ax, [bp+var_2]
		imul	ax, 50h
		mov	bx, [bp+var_2]
		shl	bx, 1
		mov	_tbl_mul80[bx],	ax
		inc	[bp+var_2]

loc_19C19::				; CODE XREF: tilemap::init_tables(void)+76j
		cmp	[bp+var_2], 100h
		jb	loc_19C07
		leave
		retf
@tilemap@init_tables$qv	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; tilemap::init_work_vars(void)
@tilemap@init_work_vars$qv proc	far	; CODE XREF: tilemap::tilemap(uchar *,int,int)+5Fp
					; tilemap::new_map(uchar *,int,int)+1Fp

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		mov	_map_exploded, 0
		les	bx, [bp+arg_0]
		xor	ax, ax
		mov	es:[bx+12h], ax
		les	bx, [bp+arg_0]
		mov	es:[bx+10h], ax
		les	bx, [bp+arg_0]
		mov	es:[bx+0Eh], ax
		les	bx, [bp+arg_0]
		mov	es:[bx+0Ch], ax
		les	bx, [bp+arg_0]
		mov	es:[bx+0Ah], ax
		les	bx, [bp+arg_0]
		mov	es:[bx+8], ax
		les	bx, [bp+arg_0]
		mov	es:[bx+92h], ax
		pop	bp
		retf
@tilemap@init_work_vars$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; tilemap::set_viewport(int, int, int, int)
@tilemap@set_viewport$qiiii proc far	; CODE XREF: start_room(uchar *)+14DP

var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh
arg_A		= word ptr  10h

		enter	2, 0
		push	1
		push	1
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@cls$qucuc ; vga_display::cls(uchar,uchar)
		assume es:nothing
		add	sp, 8
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, [bp+arg_4]
		mov	es:[bx], ax
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_6]
		mov	es:[bx+2], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2]
		imul	ax, 50h
		les	bx, [bp+arg_0]
		push	ax
		mov	ax, es:[bx]
		mov	bx, 4
		cwd
		idiv	bx
		pop	dx
		add	dx, ax
		les	bx, [bp+arg_0]
		mov	es:[bx+22h], dx
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_8]
		mov	es:[bx+4], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+4]
		mov	bx, 4
		cwd
		idiv	bx
		les	bx, [bp+arg_0]
		mov	es:[bx+20h], ax
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_A]
		mov	es:[bx+6], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+4]
		add	ax, 20h	; ' '
		sar	ax, 3
		les	bx, [bp+arg_0]
		mov	es:[bx+1Ch], ax
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx+1Ch], 28h ; '('
		jle	loc_19D02
		push	0
		push	0
		push	ds
		push	offset aViewportWidthT ; "Viewport width too big."
		call	@terminate$qnuct1 ; terminate(uchar *,uchar *)
; ---------------------------------------------------------------------------
		add	sp, 8

loc_19D02::				; CODE XREF: tilemap::set_viewport(int,int,int,int)+90j
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+6]

loc_19D09::
		add	ax, 20h	; ' '
		sar	ax, 3
		les	bx, [bp+arg_0]
		mov	es:[bx+1Eh], ax
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx+1Eh], 19h
		jle	loc_19D30
		push	0
		push	0
		push	ds
		push	offset aViewportHeight ; "Viewport height too big."
		call	@terminate$qnuct1 ; terminate(uchar *,uchar *)
; ---------------------------------------------------------------------------
		add	sp, 8

loc_19D30::				; CODE XREF: tilemap::set_viewport(int,int,int,int)+BEj
		mov	[bp+var_2], 0
		jmp	loc_19D6F
; ---------------------------------------------------------------------------

loc_19D37::				; CODE XREF: tilemap::set_viewport(int,int,int,int)+114j
		mov	bx, [bp+var_2]
		shl	bx, 1
		mov	_tbl_tile_dst[bx], 7D00h
		mov	ax, [bp+var_2]
		mov	bx, 28h	; '('
		cwd
		idiv	bx
		imul	ax, 280h
		mov	bx, [bp+var_2]
		shl	bx, 1
		add	_tbl_tile_dst[bx], ax
		mov	ax, [bp+var_2]
		mov	bx, 28h	; '('
		cwd
		idiv	bx
		shl	dx, 1
		mov	bx, [bp+var_2]
		shl	bx, 1
		add	_tbl_tile_dst[bx], dx
		inc	[bp+var_2]

loc_19D6F::				; CODE XREF: tilemap::set_viewport(int,int,int,int)+D5j
		cmp	[bp+var_2], 3E8h
		jl	loc_19D37
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+1Ch]
		shl	ax, 3
		les	bx, [bp+arg_0]
		mov	es:[bx+18h], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+1Eh]
		shl	ax, 3
		les	bx, [bp+arg_0]
		mov	es:[bx+1Ah], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+1Ah]
		les	bx, _display
		assume es:nothing
		mov	es:[bx+0Ah], ax
		les	bx, _display
		mov	byte ptr es:[bx+7], 0
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @tilemap@explode$qv ; tilemap::explode(void)
		assume es:nothing
		add	sp, 4
		leave
		retf
@tilemap@set_viewport$qiiii endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; tilemap::get_map_pos(int, int)
@tilemap@get_map_pos$qii proc far	; CODE XREF: tilemap::erase_bits(int,int,int,int)+ABp

var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch

		enter	2, 0
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+92h]
		mov	[bp+var_2], ax
		mov	bx, [bp+arg_6]
		sar	bx, 3
		shl	bx, 1
		mov	ax, [bp+var_2]
		add	ax, word ptr _tbl_mul_tw[bx]
		mov	[bp+var_2], ax
		mov	ax, [bp+arg_4]
		sar	ax, 3
		les	bx, [bp+arg_0]
		xor	dx, dx
		div	word ptr es:[bx+8Eh]
		mov	ax, [bp+var_2]
		add	ax, dx
		mov	[bp+var_2], ax
		mov	ax, [bp+var_2]
		jmp	$+2
; ---------------------------------------------------------------------------

locret_19DFE::				; CODE XREF: tilemap::get_map_pos(int,int)+3Cj
		leave
		retf
@tilemap@get_map_pos$qii endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far tilemap::new_map(__int32, char *path, int, int)
@tilemap@new_map$qnucii	proc far	; CODE XREF: start_room(uchar *)+166P

arg_0		= dword	ptr  6
path		= dword	ptr  0Ah
arg_8		= word ptr  0Eh
arg_A		= word ptr  10h

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		assume es:nothing
		push	word ptr es:[bx+3A0h]
		push	word ptr es:[bx+39Eh] ;	block
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		push	cs
		call	near ptr @tilemap@init_work_vars$qv ; tilemap::init_work_vars(void)
		add	sp, 4
		cmp	[bp+path], 0
		jz	loc_19E4E
		push	0		; char
		push	word ptr [bp+path+2]
		push	word ptr [bp+path] ; path
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0] ; __int32
		nop
		push	cs
		call	near ptr @tilemap@load$qnucuc ;	tilemap::load(uchar *,uchar)
		add	sp, 0Ah
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		push	cs
		call	near ptr @tilemap@init_tables$qv ; tilemap::init_tables(void)
		jmp	loc_19E96
; ---------------------------------------------------------------------------

loc_19E4E::				; CODE XREF: tilemap::new_map(uchar *,int,int)+2Aj
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_8]
		mov	es:[bx+8Eh], ax
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_A]
		mov	es:[bx+90h], ax
		mov	ax, [bp+arg_8]
		shl	ax, 3
		les	bx, [bp+arg_0]
		mov	es:[bx+14h], ax
		mov	ax, [bp+arg_A]
		shl	ax, 3
		les	bx, [bp+arg_0]
		mov	es:[bx+16h], ax
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		push	cs
		call	near ptr @tilemap@init_tables$qv ; tilemap::init_tables(void)
		add	sp, 4
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @tilemap@reset_map$qv ; tilemap::reset_map(void)

loc_19E96::				; CODE XREF: tilemap::new_map(uchar *,int,int)+4Cj
		add	sp, 4
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @tilemap@explode$qv ; tilemap::explode(void)
		add	sp, 4
		pop	bp
		retf
@tilemap@new_map$qnucii	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; tilemap::reset_map(void)
@tilemap@reset_map$qv proc far		; CODE XREF: tilemap::tilemap(uchar *,int,int)+BFp
					; tilemap::new_map(uchar *,int,int)+93p

var_2		= word ptr -2
arg_0		= dword	ptr  6

		enter	2, 0
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+8Eh]
		les	bx, [bp+arg_0]
		imul	word ptr es:[bx+90h]
		movzx	eax, ax
		les	bx, [bp+arg_0]
		mov	es:[bx+94h], eax
		mov	[bp+var_2], 0
		jmp	loc_19EE8
; ---------------------------------------------------------------------------

loc_19ED1::				; CODE XREF: tilemap::reset_map(void)+44j
		mov	ax, [bp+var_2]
		shr	ax, 7
		les	bx, [bp+arg_0]
		les	bx, es:[bx+98h]
		add	bx, [bp+var_2]
		mov	es:[bx], al
		inc	[bp+var_2]

loc_19EE8::				; CODE XREF: tilemap::reset_map(void)+26j
		cmp	[bp+var_2], 8000h
		jb	loc_19ED1
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+94h]
		shl	ax, 2
		push	ax		; unsigned int
		call	@$bnew$qui	; operator new(uint)
		pop	cx
		les	bx, [bp+arg_0]
		mov	es:[bx+3A0h], dx
		mov	es:[bx+39Eh], ax
		les	bx, [bp+arg_0]
		cmp	dword ptr es:[bx+39Eh],	0
		jnz	loc_19F26
		push	ds
		push	offset aInitMap_ ; "Init map."
		call	@no_heap$qnuc	; no_heap(uchar	*)
; ---------------------------------------------------------------------------
		add	sp, 4

loc_19F26::				; CODE XREF: tilemap::reset_map(void)+6Fj
		mov	[bp+var_2], 0
		jmp	loc_19F5B
; ---------------------------------------------------------------------------

loc_19F2D::				; CODE XREF: tilemap::reset_map(void)+C0j
		les	bx, [bp+arg_0]
		les	bx, es:[bx+39Eh]
		mov	ax, [bp+var_2]
		shl	ax, 2
		add	bx, ax
		mov	word ptr es:[bx], 2
		les	bx, [bp+arg_0]
		les	bx, es:[bx+39Eh]
		mov	ax, [bp+var_2]
		shl	ax, 2
		add	bx, ax
		mov	word ptr es:[bx+2], 0
		inc	[bp+var_2]

loc_19F5B::				; CODE XREF: tilemap::reset_map(void)+82j
		movzx	eax, [bp+var_2]
		les	bx, [bp+arg_0]
		cmp	eax, es:[bx+94h]
		jb	loc_19F2D
		mov	[bp+var_2], 0
		jmp	loc_19F85
; ---------------------------------------------------------------------------

loc_19F72::				; CODE XREF: tilemap::reset_map(void)+E0j
		mov	ax, [bp+var_2]
		shl	ax, 1
		les	bx, [bp+arg_0]
		add	bx, ax
		mov	word ptr es:[bx+24h], 0
		inc	[bp+var_2]

loc_19F85::				; CODE XREF: tilemap::reset_map(void)+C7j
		cmp	[bp+var_2], 32h	; '2'
		jb	loc_19F72
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+88h], 0
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+89h], 0
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+8Ah], 0
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+8Ch], 0
		leave
		retf
@tilemap@reset_map$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; tilemap::download_tiles(void)
@tilemap@download_tiles$qv proc	far	; CODE XREF: tilemap::tilemap(uchar *,int,int)+F6p
					; tilemap::load(uchar *,uchar)+223p

var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6

		enter	0Ah, 0
		mov	[bp+var_6], 0
		mov	[bp+var_4], 0
		jmp	loc_1A03F
; ---------------------------------------------------------------------------

loc_19FC1::				; CODE XREF: tilemap::download_tiles(void)+94j
		mov	[bp+var_2], 0
		jmp	loc_1A022
; ---------------------------------------------------------------------------

loc_19FC8::				; CODE XREF: tilemap::download_tiles(void)+89j
		mov	ax, [bp+var_2]
		shl	ax, 3
		mov	[bp+var_8], ax
		mov	ax, [bp+var_4]
		shl	ax, 3
		add	ax, 60h	; '`'
		mov	[bp+var_A], ax
		push	0BB80h
		push	0
		mov	ax, [bp+var_6]
		shl	ax, 6
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	dx, es:[bx+98h]
		add	dx, ax
		push	word ptr es:[bx+9Ah]
		push	dx
		mov	ax, [bp+var_A]
		add	ax, 8
		push	ax
		mov	ax, [bp+var_8]
		add	ax, 8
		push	ax
		push	[bp+var_A]
		push	[bp+var_8]
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@put_bits$qiiiinucuiui ; vga_display::put_bits(int,int,int,int,uchar *,uint,uint)
		assume es:nothing
		add	sp, 14h
		inc	[bp+var_6]
		inc	[bp+var_2]
		assume es:nothing

loc_1A022::				; CODE XREF: tilemap::download_tiles(void)+15j
		cmp	[bp+var_4], 0Ch
		jnz	loc_1A02D
		assume es:nothing
		mov	ax, 1
		jmp	loc_1A02F
; ---------------------------------------------------------------------------
		assume es:nothing

loc_1A02D::				; CODE XREF: tilemap::download_tiles(void)+75j
		xor	ax, ax

loc_1A02F::				; CODE XREF: tilemap::download_tiles(void)+7Aj
		shl	ax, 3
		mov	dx, 28h	; '('
		sub	dx, ax
		cmp	dx, [bp+var_2]
		ja	loc_19FC8
		assume es:nothing
		inc	[bp+var_4]
		assume es:nothing

loc_1A03F::				; CODE XREF: tilemap::download_tiles(void)+Ej
		cmp	[bp+var_4], 0Dh
		jnb	locret_1A048
		jmp	loc_19FC1
; ---------------------------------------------------------------------------
		assume es:nothing

locret_1A048::				; CODE XREF: tilemap::download_tiles(void)+92j
		leave
		retf
@tilemap@download_tiles$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; tilemap::update(unsigned int)
@tilemap@update$qui proc far		; CODE XREF: de_doit(void)+175P
					; scroll_to(m_actor *)+EBP ...

var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah

		enter	2, 0
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+10h]
		sar	ax, 2
		add	ax, 7D00h
		les	bx, [bp+arg_0]
		mov	bx, es:[bx+12h]
		shl	bx, 1
		add	ax, _tbl_mul80[bx]
		mov	[bp+var_2], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+22h]
		add	ax, [bp+arg_4]
		push	ax
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+6]
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+20h]
		push	[bp+var_2]
		call	_x_update_map
		assume es:nothing
		add	sp, 8
		leave
		retf
@tilemap@update$qui endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; tilemap::explode(void)
@tilemap@explode$qv proc far		; CODE XREF: tilemap::set_viewport(int,int,int,int)+158p
					; tilemap::new_map(uchar *,int,int)+A1p ...

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		push	ds
		push	offset _tbl_tile_dst
		push	ds
		push	offset _tbl_tile_src
		les	bx, [bp+arg_0]
		assume es:nothing
		push	word ptr es:[bx+92h]
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+3A0h]
		push	word ptr es:[bx+39Eh]
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+1Eh]
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+8Eh]
		call	_x_explode_map
		assume es:nothing
		add	sp, 12h
		inc	_map_exploded
		pop	bp
		retf
@tilemap@explode$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; tilemap::center_on(unsigned int, unsigned int)
@tilemap@center_on$quiui proc far	; CODE XREF: start_room(uchar *)+1D2P
					; de_doit(void)+13BP ...

var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch

		enter	4, 0
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+4]
		sar	ax, 1
		mov	dx, [bp+arg_4]
		sub	dx, ax
		mov	[bp+var_2], dx
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+6]
		sar	ax, 1
		mov	dx, [bp+arg_6]
		sub	dx, ax
		mov	[bp+var_4], dx
		push	[bp+var_4]
		push	[bp+var_2]
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @tilemap@set_position$qii ; tilemap::set_position(int,int)
		add	sp, 8
		cmp	_map_exploded, 0
		jz	loc_1A11A
		mov	_map_exploded, 0
		mov	al, 1

loc_1A116::				; CODE XREF: tilemap::center_on(uint,uint)+4Ej
		jmp	locret_1A11E
; ---------------------------------------------------------------------------
		jmp	locret_1A11E
; ---------------------------------------------------------------------------

loc_1A11A::				; CODE XREF: tilemap::center_on(uint,uint)+3Fj
		mov	al, 0
		jmp	loc_1A116
; ---------------------------------------------------------------------------

locret_1A11E::				; CODE XREF: tilemap::center_on(uint,uint):loc_1A116j
					; tilemap::center_on(uint,uint)+4Aj
		leave
		retf
@tilemap@center_on$quiui endp

; ---------------------------------------------------------------------------

; tilemap::scroll(unsigned char)
@tilemap@scroll$quc:
		push	bp
		mov	bp, sp
		mov	al, [bp+0Ah]
		mov	ah, 0
		mov	bx, ax
		cmp	bx, 3		; switch 4 cases
		ja	loc_1A187	; jumptable 00027F51 default case
		shl	bx, 1
		jmp	cs:off_1A189[bx] ; switch jump
; ---------------------------------------------------------------------------

loc_1A136::				; CODE XREF: seg1783:0721j
					; DATA XREF: seg1783:off_1A189o
		les	bx, [bp+6]	; jumptable 00027F51 case 0
		assume es:nothing
		push	word ptr es:[bx+0Ah]
		les	bx, [bp+6]
		mov	ax, es:[bx+8]
		add	ax, 4

loc_1A147::				; CODE XREF: seg1783:0759j
		push	ax

loc_1A148::				; CODE XREF: seg1783:0775j
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		nop
		push	cs
		call	near ptr @tilemap@set_position$qii ; tilemap::set_position(int,int)
		add	sp, 8
		jmp	loc_1A187	; jumptable 00027F51 default case
; ---------------------------------------------------------------------------

loc_1A158::				; CODE XREF: seg1783:0721j
					; DATA XREF: seg1783:off_1A189o
		les	bx, [bp+6]	; jumptable 00027F51 case 1
		push	word ptr es:[bx+0Ah]
		les	bx, [bp+6]
		mov	ax, es:[bx+8]
		add	ax, 0FFFCh
		jmp	loc_1A147
; ---------------------------------------------------------------------------

loc_1A16B::				; CODE XREF: seg1783:0721j
					; DATA XREF: seg1783:off_1A189o
		les	bx, [bp+6]	; jumptable 00027F51 case 2
		mov	ax, es:[bx+0Ah]
		dec	ax
		jmp	loc_1A17D
; ---------------------------------------------------------------------------

loc_1A175::				; CODE XREF: seg1783:0721j
					; DATA XREF: seg1783:off_1A189o
		les	bx, [bp+6]	; jumptable 00027F51 case 3
		mov	ax, es:[bx+0Ah]
		inc	ax

loc_1A17D::				; CODE XREF: seg1783:0763j
		push	ax
		les	bx, [bp+6]
		push	word ptr es:[bx+8]
		jmp	loc_1A148
; ---------------------------------------------------------------------------

loc_1A187::				; CODE XREF: seg1783:071Dj
					; seg1783:0746j
		pop	bp		; jumptable 00027F51 default case
		retf
; ---------------------------------------------------------------------------
off_1A189	dw offset loc_1A136	; DATA XREF: seg1783:0721r
		dw offset loc_1A158	; jump table for switch	statement
		dw offset loc_1A16B
		dw offset loc_1A175
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; tilemap::set_position(int, int)
@tilemap@set_position$qii proc far	; CODE XREF: tilemap::center_on(uint,uint)+34p
					; seg1783:0740p

arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch

		push	bp
		mov	bp, sp
		cmp	[bp+arg_4], 0
		jge	loc_1A19F
		mov	[bp+arg_4], 0

loc_1A19F::				; CODE XREF: tilemap::set_position(int,int)+7j
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_4]
		add	ax, es:[bx+4]
		les	bx, [bp+arg_0]
		cmp	ax, es:[bx+14h]
		jle	loc_1A1C3
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+14h]
		les	bx, [bp+arg_0]
		sub	ax, es:[bx+4]
		mov	[bp+arg_4], ax
		assume es:nothing

loc_1A1C3::				; CODE XREF: tilemap::set_position(int,int)+1Fj
		cmp	[bp+arg_6], 0
		jge	loc_1A1CE
		mov	[bp+arg_6], 0

loc_1A1CE::				; CODE XREF: tilemap::set_position(int,int)+36j
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_6]
		add	ax, es:[bx+6]
		les	bx, [bp+arg_0]
		cmp	ax, es:[bx+16h]
		jle	loc_1A1F2
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+16h]
		les	bx, [bp+arg_0]
		sub	ax, es:[bx+6]
		mov	[bp+arg_6], ax
		assume es:nothing

loc_1A1F2::				; CODE XREF: tilemap::set_position(int,int)+4Ej
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_4]
		mov	es:[bx+8], ax
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_6]
		mov	es:[bx+0Ah], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+8]
		les	bx, [bp+arg_0]
		cmp	ax, es:[bx+0Ch]
		jg	loc_1A223
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx+0Ch], 0
		jz	loc_1A223
		jmp	loc_1A2B0
; ---------------------------------------------------------------------------

loc_1A223::				; CODE XREF: tilemap::set_position(int,int)+83j
					; tilemap::set_position(int,int)+8Dj
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+8]
		les	bx, [bp+arg_0]
		add	ax, es:[bx+4]
		les	bx, [bp+arg_0]
		mov	dx, es:[bx+0Ch]
		les	bx, [bp+arg_0]
		add	dx, es:[bx+18h]
		cmp	ax, dx
		jl	loc_1A245
		jmp	loc_1A2B0
; ---------------------------------------------------------------------------

loc_1A245::				; CODE XREF: tilemap::set_position(int,int)+B0j
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+0Ah]
		les	bx, [bp+arg_0]
		cmp	ax, es:[bx+0Eh]
		jg	loc_1A261
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx+0Eh], 0
		jz	loc_1A261
		jmp	loc_1A2B0
; ---------------------------------------------------------------------------

loc_1A261::				; CODE XREF: tilemap::set_position(int,int)+C2j
					; tilemap::set_position(int,int)+CCj
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+0Ah]
		les	bx, [bp+arg_0]
		add	ax, es:[bx+6]
		les	bx, [bp+arg_0]
		mov	dx, es:[bx+0Eh]
		les	bx, [bp+arg_0]
		add	dx, es:[bx+1Ah]
		cmp	ax, dx
		jl	loc_1A283
		jmp	loc_1A2B0
; ---------------------------------------------------------------------------

loc_1A283::				; CODE XREF: tilemap::set_position(int,int)+EEj
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+8]
		les	bx, [bp+arg_0]
		sub	ax, es:[bx+0Ch]
		les	bx, [bp+arg_0]
		mov	es:[bx+10h], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+0Ah]
		les	bx, [bp+arg_0]
		sub	ax, es:[bx+0Eh]
		les	bx, [bp+arg_0]
		mov	es:[bx+12h], ax
		jmp	loc_1A3A5
; ---------------------------------------------------------------------------

loc_1A2B0::				; CODE XREF: tilemap::set_position(int,int)+8Fj
					; tilemap::set_position(int,int)+B2j ...
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+8]
		add	ax, 0FFF0h
		sar	ax, 3
		shl	ax, 3
		les	bx, [bp+arg_0]
		mov	es:[bx+0Ch], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+0Ah]
		add	ax, 0FFF0h
		sar	ax, 3
		shl	ax, 3
		les	bx, [bp+arg_0]
		mov	es:[bx+0Eh], ax
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx+0Ch], 0
		jge	loc_1A2F1
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	word ptr es:[bx+0Ch], 0
		assume es:nothing

loc_1A2F1::				; CODE XREF: tilemap::set_position(int,int)+155j
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx+0Eh], 0
		jge	loc_1A304
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+0Eh], 0

loc_1A304::				; CODE XREF: tilemap::set_position(int,int)+168j
		les	bx, [bp+arg_0]
		mov	bx, es:[bx+0Eh]
		sar	bx, 3
		shl	bx, 1
		mov	ax, word ptr _tbl_mul_tw[bx]
		les	bx, [bp+arg_0]
		mov	es:[bx+92h], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+0Ch]
		sar	ax, 3
		les	bx, [bp+arg_0]
		xor	dx, dx
		div	word ptr es:[bx+8Eh]
		les	bx, [bp+arg_0]
		add	es:[bx+92h], dx
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx+8], 10h
		jge	loc_1A351
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+8]
		mov	bx, 10h
		cwd
		idiv	bx
		jmp	loc_1A361
; ---------------------------------------------------------------------------
		assume es:nothing

loc_1A351::				; CODE XREF: tilemap::set_position(int,int)+1AFj
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+8]
		mov	bx, 8
		cwd
		idiv	bx
		add	dx, 10h

loc_1A361::				; CODE XREF: tilemap::set_position(int,int)+1BEj
		les	bx, [bp+arg_0]
		mov	es:[bx+10h], dx
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx+0Ah], 10h
		jge	loc_1A381
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+0Ah]
		mov	bx, 10h
		cwd
		idiv	bx
		jmp	loc_1A391
; ---------------------------------------------------------------------------

loc_1A381::				; CODE XREF: tilemap::set_position(int,int)+1DFj
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+0Ah]
		mov	bx, 8
		cwd
		idiv	bx
		add	dx, 10h

loc_1A391::				; CODE XREF: tilemap::set_position(int,int)+1EEj
		les	bx, [bp+arg_0]
		mov	es:[bx+12h], dx
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		push	cs
		call	near ptr @tilemap@explode$qv ; tilemap::explode(void)
		assume es:nothing
		add	sp, 4
		assume es:nothing

loc_1A3A5::				; CODE XREF: tilemap::set_position(int,int)+11Cj
		pop	bp
		retf
@tilemap@set_position$qii endp

; ---------------------------------------------------------------------------

; tilemap::save(unsigned char *)
@tilemap@save$qnuc:
		enter	4, 0
		push	180h
		push	8304h
		push	word ptr [bp+0Ch]
		push	word ptr [bp+0Ah]
		call	_open
		add	sp, 8
		mov	[bp-2],	ax
		cmp	ax, 0FFFFh
		jnz	loc_1A3CA
		jmp	loc_1A4C7
; ---------------------------------------------------------------------------

loc_1A3CA::				; CODE XREF: seg1783:09B5j
		push	2
		mov	ax, [bp+6]
		add	ax, 8Eh	; ''
		push	word ptr [bp+8]
		push	ax
		push	word ptr [bp-2]
		call	_write
		add	sp, 8
		cmp	ax, 2
		jz	loc_1A3E9
		jmp	loc_1A4C7
; ---------------------------------------------------------------------------

loc_1A3E9::				; CODE XREF: seg1783:09D4j
		push	2
		mov	ax, [bp+6]
		add	ax, 90h	; ''
		push	word ptr [bp+8]
		push	ax
		push	word ptr [bp-2]
		call	_write
		add	sp, 8

loc_1A400::
		cmp	ax, 2
		jz	loc_1A408
		jmp	loc_1A4C7
; ---------------------------------------------------------------------------

loc_1A408::				; CODE XREF: seg1783:09F3j
		les	bx, [bp+6]
		assume es:nothing
		mov	ax, es:[bx+94h]
		shl	ax, 2
		mov	[bp-4],	ax
		push	word ptr [bp-4]
		les	bx, [bp+6]
		push	word ptr es:[bx+3A0h]
		push	word ptr es:[bx+39Eh]
		push	word ptr [bp-2]
		call	_write
		add	sp, 8
		cmp	ax, [bp-4]
		jz	loc_1A439
		jmp	loc_1A4C7
; ---------------------------------------------------------------------------

loc_1A439::				; CODE XREF: seg1783:0A24j
		push	8000h
		les	bx, [bp+6]
		push	word ptr es:[bx+9Ah]
		push	word ptr es:[bx+98h]
		push	word ptr [bp-2]
		call	_write
		add	sp, 8
		cmp	ax, 8000h
		jz	loc_1A45B
		jmp	loc_1A4C7
; ---------------------------------------------------------------------------

loc_1A45B::				; CODE XREF: seg1783:0A47j
		push	300h
		mov	ax, [bp+6]
		add	ax, 9Ch	; ''
		push	word ptr [bp+8]
		push	ax
		push	word ptr [bp-2]
		call	_write
		add	sp, 8
		cmp	ax, 300h
		jz	loc_1A47A
		jmp	loc_1A4C7
; ---------------------------------------------------------------------------

loc_1A47A::				; CODE XREF: seg1783:0A66j
		push	64h ; 'd'
		mov	ax, [bp+6]
		add	ax, 24h	; '$'
		push	word ptr [bp+8]
		push	ax
		push	word ptr [bp-2]
		call	_write
		add	sp, 8
		cmp	ax, 64h	; 'd'
		jz	loc_1A498
		jmp	loc_1A4C7
; ---------------------------------------------------------------------------

loc_1A498::				; CODE XREF: seg1783:0A84j
		mov	word ptr [bp-4], 4
		push	word ptr [bp-4]
		mov	ax, [bp+6]
		add	ax, 88h	; ''
		push	word ptr [bp+8]
		push	ax
		push	word ptr [bp-2]
		call	_write
		add	sp, 8
		cmp	ax, [bp-4]
		jz	loc_1A4BC
		jmp	loc_1A4C7
; ---------------------------------------------------------------------------

loc_1A4BC::				; CODE XREF: seg1783:0AA8j
		push	word ptr [bp-2]
		call	_close
		pop	cx
		jmp	locret_1A4DC
; ---------------------------------------------------------------------------

loc_1A4C7::				; CODE XREF: seg1783:09B7j
					; seg1783:09D6j ...
		push	word ptr [bp-2]
		call	_close
		pop	cx
		push	ds
		push	offset aSavingMap_ ; "Saving map."
		call	@write_error$qnuc ; write_error(uchar *)
; ---------------------------------------------------------------------------
		add	sp, 4

locret_1A4DC::				; CODE XREF: seg1783:0AB5j
		leave
		retf
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far tilemap::load(__int32, char	*path, char)
@tilemap@load$qnucuc proc far		; CODE XREF: tilemap::tilemap(uchar *,int,int)+10Bp
					; tilemap::new_map(uchar *,int,int)+3Cp

len		= word ptr -2
arg_0		= dword	ptr  6
path		= dword	ptr  0Ah
arg_8		= byte ptr  0Eh

		enter	2, 0
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx+8Ch], 0
		jz	loc_1A4FF
		les	bx, _display
		assume es:nothing
		mov	byte ptr es:[bx+5], 0
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+8Ch], 0
		assume es:nothing

loc_1A4FF::				; CODE XREF: tilemap::load(uchar *,uchar)+Dj
		push	word ptr [bp+path+2]
		push	word ptr [bp+path] ; path
		call	@g_open_element$qnuc ; g_open_element(uchar *)
		push	dx
		push	ax
		pop	eax
		add	sp, 4
		cmp	eax, 0FFFFFFFFh
		jnz	loc_1A51A
		jmp	loc_1A706
; ---------------------------------------------------------------------------

loc_1A51A::				; CODE XREF: tilemap::load(uchar *,uchar)+37j
		push	2		; len
		mov	ax, word ptr [bp+arg_0]
		add	ax, 8Eh	; ''
		push	word ptr [bp+arg_0+2]
		push	ax		; buf
		call	@g_element_read$qnvui ;	g_element_read(void *,uint)
		push	dx
		push	ax
		pop	eax
		add	sp, 6
		cmp	eax, 2
		jz	loc_1A53B
		jmp	loc_1A706
; ---------------------------------------------------------------------------

loc_1A53B::				; CODE XREF: tilemap::load(uchar *,uchar)+58j
		push	2		; len
		mov	ax, word ptr [bp+arg_0]
		add	ax, 90h	; ''
		push	word ptr [bp+arg_0+2]
		push	ax		; buf
		call	@g_element_read$qnvui ;	g_element_read(void *,uint)
		push	dx
		push	ax
		pop	eax
		add	sp, 6
		cmp	eax, 2
		jz	loc_1A55C
		jmp	loc_1A706
; ---------------------------------------------------------------------------

loc_1A55C::				; CODE XREF: tilemap::load(uchar *,uchar)+79j
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+8Eh]
		les	bx, [bp+arg_0]
		imul	word ptr es:[bx+90h]
		movzx	eax, ax
		les	bx, [bp+arg_0]
		mov	es:[bx+94h], eax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+8Eh]
		shl	ax, 3
		les	bx, [bp+arg_0]
		mov	es:[bx+14h], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+90h]
		shl	ax, 3
		les	bx, [bp+arg_0]
		mov	es:[bx+16h], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+94h]
		shl	ax, 2
		push	ax		; unsigned int
		call	@$bnew$qui	; operator new(uint)
		assume es:nothing
		pop	cx
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	es:[bx+3A0h], dx
		mov	es:[bx+39Eh], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+94h]
		shl	ax, 2
		mov	[bp+len], ax
		push	[bp+len]	; len
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+3A0h]
		push	word ptr es:[bx+39Eh] ;	buf
		call	@g_element_read$qnvui ;	g_element_read(void *,uint)
		add	sp, 6
		cmp	ax, [bp+len]
		jz	loc_1A5EA
		jmp	loc_1A706
; ---------------------------------------------------------------------------

loc_1A5EA::				; CODE XREF: tilemap::load(uchar *,uchar)+107j
		les	bx, [bp+arg_0]
		cmp	dword ptr es:[bx+98h], 0
		jnz	loc_1A624
		push	8000h		; unsigned int
		call	@$bnew$qui	; operator new(uint)
		pop	cx
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	es:[bx+9Ah], dx
		mov	es:[bx+98h], ax
		les	bx, [bp+arg_0]
		cmp	dword ptr es:[bx+98h], 0
		jnz	loc_1A624
		push	ds
		push	offset aTiles__0 ; "Tiles."
		call	@no_heap$qnuc	; no_heap(uchar	*)
; ---------------------------------------------------------------------------
		add	sp, 4
		assume es:nothing

loc_1A624::				; CODE XREF: tilemap::load(uchar *,uchar)+116j
					; tilemap::load(uchar *,uchar)+138j
		push	4000h		; len
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+9Ah]
		push	word ptr es:[bx+98h] ; buf
		call	@g_element_read$qnvui ;	g_element_read(void *,uint)
		push	dx
		push	ax
		pop	eax
		add	sp, 6
		cmp	eax, 4000h
		jz	loc_1A64B
		jmp	loc_1A706
; ---------------------------------------------------------------------------

loc_1A64B::				; CODE XREF: tilemap::load(uchar *,uchar)+168j
		push	4000h		; len
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+98h]
		add	ax, 4000h
		push	word ptr es:[bx+9Ah]
		push	ax		; buf
		call	@g_element_read$qnvui ;	g_element_read(void *,uint)
		push	dx
		push	ax
		pop	eax
		add	sp, 6
		cmp	eax, 4000h
		jz	loc_1A676
		jmp	loc_1A706
; ---------------------------------------------------------------------------

loc_1A676::				; CODE XREF: tilemap::load(uchar *,uchar)+193j
		push	300h		; len
		mov	ax, word ptr [bp+arg_0]
		add	ax, 9Ch	; ''
		push	word ptr [bp+arg_0+2]
		push	ax		; buf
		call	@g_element_read$qnvui ;	g_element_read(void *,uint)
		push	dx
		push	ax
		pop	eax
		add	sp, 6
		cmp	eax, 300h
		jz	loc_1A699
		jmp	loc_1A706
; ---------------------------------------------------------------------------

loc_1A699::				; CODE XREF: tilemap::load(uchar *,uchar)+1B7j
		push	64h ; 'd'       ; len
		mov	ax, word ptr [bp+arg_0]
		add	ax, 24h	; '$'
		push	word ptr [bp+arg_0+2]
		push	ax		; buf
		call	@g_element_read$qnvui ;	g_element_read(void *,uint)
		push	dx
		push	ax
		pop	eax
		add	sp, 6
		cmp	eax, 64h ; 'd'
		jz	loc_1A6B9
		jmp	loc_1A706
; ---------------------------------------------------------------------------

loc_1A6B9::				; CODE XREF: tilemap::load(uchar *,uchar)+1D7j
		mov	[bp+len], 4
		push	[bp+len]	; len
		mov	ax, word ptr [bp+arg_0]
		add	ax, 88h	; ''
		push	word ptr [bp+arg_0+2]
		push	ax		; buf
		call	@g_element_read$qnvui ;	g_element_read(void *,uint)
		push	dx
		push	ax
		pop	eax
		add	sp, 6
		movzx	edx, [bp+len]
		cmp	eax, edx
		jz	loc_1A6E3
		jmp	loc_1A706
; ---------------------------------------------------------------------------

loc_1A6E3::				; CODE XREF: tilemap::load(uchar *,uchar)+201j
		call	@g_close_element$qv ; g_close_element(void)
		mov	al, [bp+arg_8]
		push	ax
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @tilemap@reset_palette$quc ; tilemap::reset_palette(uchar)
		assume es:nothing
		add	sp, 6
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		push	cs
		call	near ptr @tilemap@download_tiles$qv ; tilemap::download_tiles(void)
		assume es:nothing
		jmp	loc_1A714
; ---------------------------------------------------------------------------

loc_1A706::				; CODE XREF: tilemap::load(uchar *,uchar)+39j
					; tilemap::load(uchar *,uchar)+5Aj ...
		call	@g_close_element$qv ; g_close_element(void)
		push	ds
		push	offset aLoadingMap_ ; "Loading map."
		call	@read_error$qnuc ; read_error(uchar *)
; ---------------------------------------------------------------------------

loc_1A714::				; CODE XREF: tilemap::load(uchar *,uchar)+226j
		add	sp, 4
		leave
		retf
@tilemap@load$qnucuc endp

; ---------------------------------------------------------------------------

; tilemap::change_tile(unsigned	long, unsigned int)
@tilemap@change_tile$qului:
		push	bp
		mov	bp, sp
		les	bx, [bp+6]
		assume es:nothing
		mov	eax, es:[bx+94h]
		cmp	eax, [bp+0Ah]
		jnb	loc_1A740
		call	@beep$qv	; beep(void)
		push	0
		push	0
		push	ds
		push	offset aTileChangeOutO ; "Tile change out of range."
		call	@terminate$qnuct1 ; terminate(uchar *,uchar *)
; ---------------------------------------------------------------------------
		add	sp, 8

loc_1A740::				; CODE XREF: seg1783:0D19j
		les	bx, [bp+6]
		les	bx, es:[bx+39Eh]
		mov	ax, [bp+0Ah]
		shl	ax, 2
		add	bx, ax
		mov	ax, [bp+0Eh]
		mov	es:[bx], ax
		pop	bp
		retf
; ---------------------------------------------------------------------------

; tilemap::add_cycle(unsigned char, unsigned char, unsigned char)
@tilemap@add_cycle$qucucuc:
		push	bp
		mov	bp, sp
		les	bx, [bp+6]
		mov	al, [bp+0Ah]
		mov	es:[bx+88h], al
		les	bx, [bp+6]
		mov	al, [bp+0Ch]
		mov	es:[bx+89h], al
		les	bx, [bp+6]
		mov	al, [bp+0Eh]
		mov	es:[bx+8Ah], al
		mov	al, [bp+0Eh]
		push	ax
		mov	al, [bp+0Ch]
		push	ax
		mov	al, [bp+0Ah]
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@setup_cycle$qucucuc ; vga_display::setup_cycle(uchar,uchar,uchar)
		add	sp, 0Ah
		pop	bp
		retf
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; tilemap::turn_cycling(unsigned char)
@tilemap@turn_cycling$quc proc far	; CODE XREF: tilemap::reset_palette(uchar)+71p

arg_0		= dword	ptr  6
arg_4		= byte ptr  0Ah

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	al, [bp+arg_4]
		mov	es:[bx+8Ch], al
		mov	al, [bp+arg_4]
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@turn_cycling$quc ;	vga_display::turn_cycling(uchar)
		assume es:nothing
		add	sp, 6
		cmp	[bp+arg_4], 0
		jnz	loc_1A7CB
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	byte ptr es:[bx+88h], 0
		assume es:nothing

loc_1A7CB::				; CODE XREF: tilemap::turn_cycling(uchar)+26j
		pop	bp
		retf
@tilemap@turn_cycling$quc endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; tilemap::reset_palette(unsigned char)
@tilemap@reset_palette$quc proc	far	; CODE XREF: tilemap::load(uchar *,uchar)+216p

arg_0		= dword	ptr  6
arg_4		= byte ptr  0Ah

		push	bp
		mov	bp, sp
		push	300h		; n
		mov	ax, word ptr [bp+arg_0]
		add	ax, 9Ch	; ''
		push	word ptr [bp+arg_0+2]
		push	ax		; src
		push	ds
		push	offset _palette	; dest
		call	_memcpy
		assume es:seg2608
		add	sp, 0Ah
		cmp	[bp+arg_4], 0
		jz	loc_1A7FF
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@set_palette$qv ; vga_display::set_palette(void)
		add	sp, 4

loc_1A7FF::				; CODE XREF: tilemap::reset_palette(uchar)+20j
		les	bx, [bp+arg_0]
		assume es:nothing
		cmp	byte ptr es:[bx+88h], 0
		jz	loc_1A844
		les	bx, [bp+arg_0]
		mov	al, es:[bx+8Ah]
		push	ax
		les	bx, [bp+arg_0]
		mov	al, es:[bx+89h]
		push	ax
		les	bx, [bp+arg_0]
		mov	al, es:[bx+88h]
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		call	@vga_display@setup_cycle$qucucuc ; vga_display::setup_cycle(uchar,uchar,uchar)
		assume es:nothing
		add	sp, 0Ah
		push	1
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		push	cs
		call	near ptr @tilemap@turn_cycling$quc ; tilemap::turn_cycling(uchar)
		add	sp, 6

loc_1A844::				; CODE XREF: tilemap::reset_palette(uchar)+3Bj
		pop	bp
		retf
@tilemap@reset_palette$quc endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; tilemap::purge_tiles(void)
@tilemap@purge_tiles$qv	proc far	; CODE XREF: start_room(uchar *)+187P

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		cmp	dword ptr es:[bx+98h], 0
		jnz	loc_1A857
		jmp	loc_1A879
; ---------------------------------------------------------------------------

loc_1A857::				; CODE XREF: tilemap::purge_tiles(void)+Dj
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+9Ah]
		push	word ptr es:[bx+98h] ; block
		call	@$bdele$qnv	; operator delete(void *)
		assume es:nothing
		add	sp, 4
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	dword ptr es:[bx+98h], 0

loc_1A879::				; CODE XREF: tilemap::purge_tiles(void)+Fj
		pop	bp
		retf
@tilemap@purge_tiles$qv	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; tilemap::check_bounds(int *, int *, int *, int *)
@tilemap@check_bounds$qnit1t1t1	proc far
					; CODE XREF: tilemap::erase_bits(int,int,int,int)+37p
					; tilemap::put_bits_masked(int,int,int,int,uchar *,uint,uchar)+31p

arg_0		= dword	ptr  6
arg_4		= dword	ptr  0Ah
arg_8		= dword	ptr  0Eh
arg_C		= dword	ptr  12h
arg_10		= dword	ptr  16h

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+0Ch]
		les	bx, [bp+arg_C]
		assume es:seg2b53
		cmp	ax, es:[bx]
		jle	loc_1A891

loc_1A88D::				; CODE XREF: tilemap::check_bounds(int *,int *,int *,int *)+2Cj
					; tilemap::check_bounds(int *,int *,int	*,int *)+3Dj ...
		mov	al, 0

loc_1A88F::				; CODE XREF: tilemap::check_bounds(int *,int *,int *,int *)+8Dj
		jmp	loc_1A90A
; ---------------------------------------------------------------------------

loc_1A891::				; CODE XREF: tilemap::check_bounds(int *,int *,int *,int *)+10j
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+0Ch]
		les	bx, [bp+arg_0]
		add	ax, es:[bx+18h]
		les	bx, [bp+arg_4]
		assume es:seg2b53
		cmp	ax, es:[bx]
		jge	loc_1A8A9
		jmp	loc_1A88D
; ---------------------------------------------------------------------------

loc_1A8A9::				; CODE XREF: tilemap::check_bounds(int *,int *,int *,int *)+2Aj
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+0Eh]
		les	bx, [bp+arg_10]
		assume es:seg2b53
		cmp	ax, es:[bx]
		jle	loc_1A8BA
		jmp	loc_1A88D
; ---------------------------------------------------------------------------

loc_1A8BA::				; CODE XREF: tilemap::check_bounds(int *,int *,int *,int *)+3Bj
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+0Eh]
		les	bx, [bp+arg_0]
		add	ax, es:[bx+1Ah]
		les	bx, [bp+arg_8]
		assume es:seg2b53
		cmp	ax, es:[bx]
		jge	loc_1A8D2
		jmp	loc_1A88D
; ---------------------------------------------------------------------------

loc_1A8D2::				; CODE XREF: tilemap::check_bounds(int *,int *,int *,int *)+53j
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+0Ch]
		les	bx, [bp+arg_4]
		assume es:seg2b53
		sub	es:[bx], ax
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+0Ch]
		les	bx, [bp+arg_C]
		assume es:seg2b53
		sub	es:[bx], ax
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+0Eh]
		les	bx, [bp+arg_8]
		assume es:seg2b53
		sub	es:[bx], ax
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+0Eh]
		les	bx, [bp+arg_10]
		assume es:seg2b53
		sub	es:[bx], ax
		mov	al, 1
		jmp	loc_1A88F
; ---------------------------------------------------------------------------

loc_1A90A::				; CODE XREF: tilemap::check_bounds(int *,int *,int *,int *):loc_1A88Fj
		pop	bp
		retf
@tilemap@check_bounds$qnit1t1t1	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; tilemap::erase_bits(int, int,	int, int)
@tilemap@erase_bits$qiiii proc far	; CODE XREF: m_actor::erase(void)+70P
					; m_actor::erase(void)+B6P

var_16		= word ptr -16h
var_14		= word ptr -14h
var_12		= word ptr -12h
var_10		= word ptr -10h
var_E		= word ptr -0Eh
var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh
arg_A		= word ptr  10h

		enter	16h, 0
		mov	ax, [bp+arg_4]
		sar	ax, 3
		shl	ax, 3
		mov	[bp+arg_4], ax
		mov	ax, [bp+arg_6]
		sar	ax, 3
		shl	ax, 3
		mov	[bp+arg_6], ax
		push	ss
		lea	ax, [bp+arg_A]
		push	ax
		push	ss
		lea	ax, [bp+arg_8]
		push	ax
		push	ss
		lea	ax, [bp+arg_6]
		push	ax
		push	ss
		lea	ax, [bp+arg_4]
		push	ax
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		push	cs
		call	near ptr @tilemap@check_bounds$qnit1t1t1 ; tilemap::check_bounds(int *,int *,int *,int *)
		assume es:seg2b53
		add	sp, 14h
		mov	ah, 0
		or	ax, ax
		jnz	loc_1A952
		jmp	locret_1AA8B
; ---------------------------------------------------------------------------

loc_1A952::				; CODE XREF: tilemap::erase_bits(int,int,int,int)+41j
		cmp	[bp+arg_4], 0
		jge	loc_1A95D
		mov	[bp+arg_4], 0

loc_1A95D::				; CODE XREF: tilemap::erase_bits(int,int,int,int)+4Aj
		cmp	[bp+arg_6], 0
		jge	loc_1A968
		mov	[bp+arg_6], 0

loc_1A968::				; CODE XREF: tilemap::erase_bits(int,int,int,int)+55j
		cmp	[bp+arg_8], 138h
		jle	loc_1A974
		mov	[bp+arg_8], 138h

loc_1A974::				; CODE XREF: tilemap::erase_bits(int,int,int,int)+61j
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx+1Ah]
		add	ax, 0FFF8h
		cmp	ax, [bp+arg_A]
		jge	loc_1A990
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+1Ah]
		add	ax, 0FFF8h
		mov	[bp+arg_A], ax

loc_1A990::				; CODE XREF: tilemap::erase_bits(int,int,int,int)+75j
		mov	ax, [bp+arg_8]
		sub	ax, [bp+arg_4]
		sar	ax, 3
		inc	ax
		mov	[bp+var_14], ax
		mov	ax, [bp+arg_A]
		sub	ax, [bp+arg_6]
		sar	ax, 3
		inc	ax
		mov	[bp+var_16], ax
		push	[bp+arg_6]
		push	[bp+arg_4]
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		push	cs
		call	near ptr @tilemap@get_map_pos$qii ; tilemap::get_map_pos(int,int)
		add	sp, 8
		mov	[bp+var_10], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+8Eh]
		sub	ax, [bp+var_14]
		mov	[bp+var_12], ax
		mov	ax, [bp+arg_4]
		mov	[bp+var_6], ax
		mov	ax, [bp+arg_6]
		mov	[bp+var_8], ax
		mov	[bp+var_4], 0
		jmp	loc_1AA80
; ---------------------------------------------------------------------------

loc_1A9E2::				; CODE XREF: tilemap::erase_bits(int,int,int,int)+17Cj
		mov	[bp+var_2], 0
		jmp	loc_1AA62
; ---------------------------------------------------------------------------

loc_1A9E9::				; CODE XREF: tilemap::erase_bits(int,int,int,int)+15Ej
		les	bx, [bp+arg_0]
		les	bx, es:[bx+39Eh]
		assume es:nothing
		mov	ax, [bp+var_10]
		shl	ax, 2
		add	bx, ax
		mov	ax, es:[bx]
		mov	[bp+var_E], ax
		mov	ax, [bp+var_E]
		mov	bx, 28h	; '('
		xor	dx, dx
		div	bx
		shl	dx, 3
		mov	[bp+var_A], dx
		mov	ax, [bp+var_E]
		mov	bx, 28h	; '('
		xor	dx, dx
		div	bx
		shl	ax, 3
		add	ax, 60h	; '`'
		mov	[bp+var_C], ax
		push	140h
		push	140h
		push	7D00h
		push	0BB80h
		push	[bp+var_8]
		push	[bp+var_6]
		mov	ax, [bp+var_C]
		add	ax, 8
		push	ax
		mov	ax, [bp+var_A]
		add	ax, 8
		push	ax
		push	[bp+var_C]
		push	[bp+var_A]
		push	word ptr _display+2
		push	word ptr _display

loc_1AA50::				; vga_display::copy_bits(int,int,int,int,int,int,uint,uint,uint,uint)
		call	@vga_display@copy_bits$qiiiiiiuiuiuiui
		assume es:nothing
		add	sp, 18h
		add	[bp+var_6], 8
		inc	[bp+var_10]
		inc	[bp+var_2]
		assume es:nothing

loc_1AA62::				; CODE XREF: tilemap::erase_bits(int,int,int,int)+DBj
		mov	ax, [bp+var_2]
		cmp	ax, [bp+var_14]
		jnb	loc_1AA6D
		jmp	loc_1A9E9
; ---------------------------------------------------------------------------
		assume es:nothing

loc_1AA6D::				; CODE XREF: tilemap::erase_bits(int,int,int,int)+15Cj
		mov	ax, [bp+arg_4]
		mov	[bp+var_6], ax
		add	[bp+var_8], 8
		mov	ax, [bp+var_12]
		add	[bp+var_10], ax
		inc	[bp+var_4]
		assume es:nothing

loc_1AA80::				; CODE XREF: tilemap::erase_bits(int,int,int,int)+D3j
		mov	ax, [bp+var_4]
		cmp	ax, [bp+var_16]
		jnb	locret_1AA8B
		jmp	loc_1A9E2
; ---------------------------------------------------------------------------
		assume es:nothing

locret_1AA8B::				; CODE XREF: tilemap::erase_bits(int,int,int,int)+43j
					; tilemap::erase_bits(int,int,int,int)+17Aj
		leave
		retf
@tilemap@erase_bits$qiiii endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; tilemap::put_bits_masked(int,	int, int, int, unsigned	char *,	unsigned int, unsigned char)
@tilemap@put_bits_masked$qiiiinucuiuc proc far ; CODE XREF: m_actor::draw(void)+8EP

var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh
arg_A		= word ptr  10h
arg_C		= word ptr  12h
arg_E		= word ptr  14h
arg_10		= word ptr  16h
arg_12		= byte ptr  18h

		enter	4, 0
		mov	ax, [bp+arg_4]
		add	ax, [bp+arg_8]
		mov	[bp+var_2], ax
		mov	ax, [bp+arg_6]
		add	ax, [bp+arg_A]
		mov	[bp+var_4], ax
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		push	ss
		lea	ax, [bp+var_2]
		push	ax
		push	ss
		lea	ax, [bp+arg_6]
		push	ax
		push	ss
		lea	ax, [bp+arg_4]
		push	ax
		push	[bp+arg_2]
		push	[bp+arg_0]
		push	cs
		call	near ptr @tilemap@check_bounds$qnit1t1t1 ; tilemap::check_bounds(int *,int *,int *,int *)
		assume es:seg2b53
		add	sp, 14h
		mov	ah, 0
		or	ax, ax
		jnz	loc_1AACC
		jmp	locret_1AAF8
; ---------------------------------------------------------------------------

loc_1AACC::				; CODE XREF: tilemap::put_bits_masked(int,int,int,int,uchar *,uint,uchar)+3Bj
		mov	al, [bp+arg_12]
		push	ax
		push	7D00h
		push	[bp+arg_10]
		push	[bp+arg_E]
		push	[bp+arg_C]
		push	[bp+var_4]
		push	[bp+var_2]
		push	[bp+arg_6]
		push	[bp+arg_4]

loc_1AAE8::
		push	word ptr _display+2
		push	word ptr _display

loc_1AAF0::				; vga_display::put_bits_masked(int,int,int,int,uchar *,uint,uint,uchar)
		call	@vga_display@put_bits_masked$qiiiinucuiuiuc
		assume es:nothing
		add	sp, 16h

locret_1AAF8::				; CODE XREF: tilemap::put_bits_masked(int,int,int,int,uchar *,uint,uchar)+3Dj
		leave
		retf
@tilemap@put_bits_masked$qiiiinucuiuc endp

seg1783		ends

; ===========================================================================

; Segment type:	Pure code
seg1891		segment	byte public 'CODE' use16
		assume cs:seg1891
		;org 0Ah
		assume es:nothing, ss:nothing, ds:seg2608, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; init_display(unsigned	char)
@init_display$quc proc far		; CODE XREF: init_game(void)+E5P
					; init_game(void)+143P

arg_0		= byte ptr  6

		push	bp
		mov	bp, sp
		mov	al, [bp+arg_0]
		push	ax
		push	0
		push	0
		nop
		push	cs
		call	near ptr @vga_display@$bctr$quc	; vga_display::vga_display(uchar)
		assume es:nothing
		add	sp, 6
		mov	word ptr _display+2, dx
		mov	word ptr _display, ax
		mov	_download_pos, 2EE0h
		pop	bp
		retf
@init_display$quc endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far vga_text(int, int, char *s,	char, char)
@vga_text$qiinucucuc proc far		; CODE XREF: post_message(uchar)+157P
					; update_men(void)+4AP	...

var_F		= byte ptr -0Fh
var_E		= dword	ptr -0Eh
var_A		= byte ptr -0Ah
var_9		= byte ptr -9
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8
s		= dword	ptr  0Ah
arg_8		= byte ptr  0Eh
arg_A		= byte ptr  10h

		enter	10h, 0
		mov	eax, [bp+s]
		mov	[bp+var_E], eax
		mov	ax, [bp+arg_0]
		mov	[bp+var_8], ax
		cmp	[bp+arg_A], 0
		jz	loc_1AB37
		jmp	loc_1AD73
; ---------------------------------------------------------------------------

loc_1AB37::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+16j
		mov	[bp+var_4], 0
		jmp	loc_1AD5A
; ---------------------------------------------------------------------------
		assume es:seg2608

loc_1AB3F::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+251j
		les	bx, [bp+var_E]
		mov	al, es:[bx]
		mov	[bp+var_A], al
		inc	word ptr [bp+var_E]
		mov	ax, [bp+arg_2]
		mov	[bp+var_6], ax
		mov	[bp+var_2], 0
		jmp	loc_1AD4A
; ---------------------------------------------------------------------------

loc_1AB59::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+234j
		mov	[bp+var_9], 80h	; ''
		mov	al, [bp+var_A]
		mov	ah, 0
		shl	ax, 3
		add	ax, [bp+var_2]
		mov	es, word ptr _system_font_ptr+2
		assume es:nothing
		add	ax, word ptr _system_font_ptr

loc_1AB70::
		mov	dl, [bp+var_9]
		mov	bx, ax
		test	es:[bx], dl
		jz	loc_1AB94
		mov	al, [bp+arg_8]
		push	ax
		push	[bp+var_6]
		push	[bp+var_8]
		push	word ptr _display+2
		push	word ptr _display
		nop
		push	cs
		call	near ptr @vga_display@set_pix$qiiuc ; vga_display::set_pix(int,int,uchar)
		assume es:nothing
		add	sp, 0Ah
		assume es:nothing

loc_1AB94::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+5Cj
		shr	[bp+var_9], 1
		mov	al, [bp+var_A]
		mov	ah, 0
		shl	ax, 3
		add	ax, [bp+var_2]
		mov	es, word ptr _system_font_ptr+2
		add	ax, word ptr _system_font_ptr
		mov	dl, [bp+var_9]
		mov	bx, ax
		test	es:[bx], dl
		jz	loc_1ABD0
		mov	al, [bp+arg_8]
		push	ax
		push	[bp+var_6]
		mov	ax, [bp+var_8]
		inc	ax
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		nop
		push	cs
		call	near ptr @vga_display@set_pix$qiiuc ; vga_display::set_pix(int,int,uchar)
		assume es:nothing
		add	sp, 0Ah

loc_1ABD0::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+96j
		shr	[bp+var_9], 1
		mov	al, [bp+var_A]
		mov	ah, 0
		shl	ax, 3
		add	ax, [bp+var_2]
		mov	es, word ptr _system_font_ptr+2
		assume es:nothing
		add	ax, word ptr _system_font_ptr
		mov	dl, [bp+var_9]
		mov	bx, ax
		test	es:[bx], dl
		jz	loc_1AC0E
		mov	al, [bp+arg_8]
		push	ax
		push	[bp+var_6]
		mov	ax, [bp+var_8]
		add	ax, 2
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		nop
		push	cs
		call	near ptr @vga_display@set_pix$qiiuc ; vga_display::set_pix(int,int,uchar)
		assume es:nothing
		add	sp, 0Ah

loc_1AC0E::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+D2j
		shr	[bp+var_9], 1
		mov	al, [bp+var_A]
		mov	ah, 0
		shl	ax, 3
		add	ax, [bp+var_2]
		mov	es, word ptr _system_font_ptr+2
		assume es:nothing
		add	ax, word ptr _system_font_ptr
		mov	dl, [bp+var_9]
		mov	bx, ax
		test	es:[bx], dl
		jz	loc_1AC4C
		mov	al, [bp+arg_8]
		push	ax
		push	[bp+var_6]
		mov	ax, [bp+var_8]
		add	ax, 3
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		nop
		push	cs
		call	near ptr @vga_display@set_pix$qiiuc ; vga_display::set_pix(int,int,uchar)
		assume es:nothing
		add	sp, 0Ah

loc_1AC4C::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+110j
		shr	[bp+var_9], 1
		mov	al, [bp+var_A]
		mov	ah, 0
		shl	ax, 3
		add	ax, [bp+var_2]
		mov	es, word ptr _system_font_ptr+2
		assume es:nothing
		add	ax, word ptr _system_font_ptr
		mov	dl, [bp+var_9]
		mov	bx, ax
		test	es:[bx], dl
		jz	loc_1AC8A
		mov	al, [bp+arg_8]
		push	ax
		push	[bp+var_6]
		mov	ax, [bp+var_8]
		add	ax, 4
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		nop
		push	cs
		call	near ptr @vga_display@set_pix$qiiuc ; vga_display::set_pix(int,int,uchar)
		assume es:nothing
		add	sp, 0Ah

loc_1AC8A::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+14Ej
		shr	[bp+var_9], 1
		mov	al, [bp+var_A]
		mov	ah, 0
		shl	ax, 3
		add	ax, [bp+var_2]
		mov	es, word ptr _system_font_ptr+2
		assume es:nothing
		add	ax, word ptr _system_font_ptr
		mov	dl, [bp+var_9]
		mov	bx, ax
		test	es:[bx], dl
		jz	loc_1ACC8
		mov	al, [bp+arg_8]
		push	ax
		push	[bp+var_6]
		mov	ax, [bp+var_8]
		add	ax, 5
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		nop
		push	cs
		call	near ptr @vga_display@set_pix$qiiuc ; vga_display::set_pix(int,int,uchar)
		assume es:nothing
		add	sp, 0Ah
		assume es:nothing

loc_1ACC8::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+18Cj
		shr	[bp+var_9], 1
		mov	al, [bp+var_A]
		mov	ah, 0
		shl	ax, 3
		add	ax, [bp+var_2]
		mov	es, word ptr _system_font_ptr+2
		add	ax, word ptr _system_font_ptr
		mov	dl, [bp+var_9]
		mov	bx, ax
		test	es:[bx], dl
		jz	loc_1AD06
		mov	al, [bp+arg_8]
		push	ax
		push	[bp+var_6]
		mov	ax, [bp+var_8]
		add	ax, 6
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		nop
		push	cs
		call	near ptr @vga_display@set_pix$qiiuc ; vga_display::set_pix(int,int,uchar)
		assume es:nothing
		add	sp, 0Ah
		assume es:nothing

loc_1AD06::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+1CAj
		shr	[bp+var_9], 1
		mov	al, [bp+var_A]
		mov	ah, 0
		shl	ax, 3
		add	ax, [bp+var_2]
		mov	es, word ptr _system_font_ptr+2
		add	ax, word ptr _system_font_ptr
		mov	dl, [bp+var_9]
		mov	bx, ax
		test	es:[bx], dl
		jz	loc_1AD44
		mov	al, [bp+arg_8]
		push	ax
		push	[bp+var_6]
		mov	ax, [bp+var_8]
		add	ax, 7
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		nop
		push	cs
		call	near ptr @vga_display@set_pix$qiiuc ; vga_display::set_pix(int,int,uchar)
		add	sp, 0Ah

loc_1AD44::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+208j
		inc	[bp+var_6]
		inc	[bp+var_2]
		assume es:seg2608

loc_1AD4A::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+3Aj
		cmp	[bp+var_2], 8
		jge	loc_1AD53
		jmp	loc_1AB59
; ---------------------------------------------------------------------------
		assume es:nothing

loc_1AD53::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+232j
		add	[bp+var_8], 8
		inc	[bp+var_4]
		assume es:nothing

loc_1AD5A::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+20j
		push	word ptr [bp+s+2]
		push	word ptr [bp+s]	; s
		call	_strlen
		assume es:seg2608
		add	sp, 4
		cmp	ax, [bp+var_4]
		jbe	loc_1AD70
		jmp	loc_1AB3F
; ---------------------------------------------------------------------------

loc_1AD70::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+24Fj
		jmp	locret_1AFD3
; ---------------------------------------------------------------------------
		assume es:nothing

loc_1AD73::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+18j
		mov	[bp+var_4], 0
		jmp	loc_1AFBD
; ---------------------------------------------------------------------------
		assume es:seg2608

loc_1AD7B::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+4B4j
		les	bx, [bp+var_E]
		mov	al, es:[bx]
		mov	[bp+var_A], al
		inc	word ptr [bp+var_E]
		mov	ax, [bp+arg_2]
		mov	[bp+var_6], ax
		mov	al, [bp+arg_8]
		mov	[bp+var_F], al
		mov	[bp+var_2], 0
		jmp	loc_1AFAD
; ---------------------------------------------------------------------------

loc_1AD9B::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+497j
		mov	[bp+var_9], 80h	; ''
		mov	al, [bp+var_A]
		mov	ah, 0
		shl	ax, 3
		add	ax, [bp+var_2]
		mov	es, word ptr _system_font_ptr+2
		assume es:nothing
		add	ax, word ptr _system_font_ptr
		mov	dl, [bp+var_9]
		mov	bx, ax
		test	es:[bx], dl
		jz	loc_1ADD6
		mov	al, [bp+var_F]
		push	ax
		push	[bp+var_6]
		push	[bp+var_8]
		push	word ptr _display+2
		push	word ptr _display
		nop
		push	cs
		call	near ptr @vga_display@set_pix$qiiuc ; vga_display::set_pix(int,int,uchar)
		assume es:nothing
		add	sp, 0Ah
		assume es:nothing

loc_1ADD6::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+29Ej
		shr	[bp+var_9], 1
		mov	al, [bp+var_A]
		mov	ah, 0
		shl	ax, 3
		add	ax, [bp+var_2]
		mov	es, word ptr _system_font_ptr+2

loc_1ADE8::
		add	ax, word ptr _system_font_ptr
		mov	dl, [bp+var_9]
		mov	bx, ax
		test	es:[bx], dl
		jz	loc_1AE12
		mov	al, [bp+var_F]
		push	ax
		push	[bp+var_6]
		mov	ax, [bp+var_8]
		inc	ax
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		nop
		push	cs
		call	near ptr @vga_display@set_pix$qiiuc ; vga_display::set_pix(int,int,uchar)
		assume es:nothing
		add	sp, 0Ah

loc_1AE12::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+2D8j
		shr	[bp+var_9], 1
		mov	al, [bp+var_A]
		mov	ah, 0
		shl	ax, 3
		add	ax, [bp+var_2]
		mov	es, word ptr _system_font_ptr+2
		assume es:nothing
		add	ax, word ptr _system_font_ptr
		mov	dl, [bp+var_9]
		mov	bx, ax
		test	es:[bx], dl
		jz	loc_1AE50
		mov	al, [bp+var_F]
		push	ax
		push	[bp+var_6]
		mov	ax, [bp+var_8]
		add	ax, 2
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		nop
		push	cs
		call	near ptr @vga_display@set_pix$qiiuc ; vga_display::set_pix(int,int,uchar)
		assume es:nothing
		add	sp, 0Ah

loc_1AE50::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+314j
		shr	[bp+var_9], 1
		mov	al, [bp+var_A]
		mov	ah, 0
		shl	ax, 3
		add	ax, [bp+var_2]
		mov	es, word ptr _system_font_ptr+2
		assume es:nothing
		add	ax, word ptr _system_font_ptr
		mov	dl, [bp+var_9]
		mov	bx, ax
		test	es:[bx], dl
		jz	loc_1AE8E
		mov	al, [bp+var_F]
		push	ax
		push	[bp+var_6]
		mov	ax, [bp+var_8]
		add	ax, 3
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		nop
		push	cs
		call	near ptr @vga_display@set_pix$qiiuc ; vga_display::set_pix(int,int,uchar)
		assume es:nothing
		add	sp, 0Ah

loc_1AE8E::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+352j
		shr	[bp+var_9], 1
		mov	al, [bp+var_A]
		mov	ah, 0
		shl	ax, 3
		add	ax, [bp+var_2]
		mov	es, word ptr _system_font_ptr+2
		assume es:nothing
		add	ax, word ptr _system_font_ptr
		mov	dl, [bp+var_9]
		mov	bx, ax
		test	es:[bx], dl
		jz	loc_1AECC
		mov	al, [bp+var_F]
		push	ax
		push	[bp+var_6]
		mov	ax, [bp+var_8]
		add	ax, 4
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		nop
		push	cs
		call	near ptr @vga_display@set_pix$qiiuc ; vga_display::set_pix(int,int,uchar)
		assume es:nothing
		add	sp, 0Ah

loc_1AECC::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+390j
		shr	[bp+var_9], 1
		mov	al, [bp+var_A]
		mov	ah, 0
		shl	ax, 3
		add	ax, [bp+var_2]
		mov	es, word ptr _system_font_ptr+2
		assume es:nothing
		add	ax, word ptr _system_font_ptr
		mov	dl, [bp+var_9]
		mov	bx, ax
		test	es:[bx], dl
		jz	loc_1AF0A
		mov	al, [bp+var_F]
		push	ax
		push	[bp+var_6]
		mov	ax, [bp+var_8]
		add	ax, 5
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		nop
		push	cs
		call	near ptr @vga_display@set_pix$qiiuc ; vga_display::set_pix(int,int,uchar)
		assume es:nothing
		add	sp, 0Ah
		assume es:nothing

loc_1AF0A::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+3CEj
		shr	[bp+var_9], 1
		mov	al, [bp+var_A]
		mov	ah, 0
		shl	ax, 3
		add	ax, [bp+var_2]
		mov	es, word ptr _system_font_ptr+2
		add	ax, word ptr _system_font_ptr
		mov	dl, [bp+var_9]
		mov	bx, ax
		test	es:[bx], dl
		jz	loc_1AF48
		mov	al, [bp+var_F]
		push	ax
		push	[bp+var_6]
		mov	ax, [bp+var_8]
		add	ax, 6
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		nop
		push	cs
		call	near ptr @vga_display@set_pix$qiiuc ; vga_display::set_pix(int,int,uchar)
		assume es:nothing
		add	sp, 0Ah
		assume es:nothing

loc_1AF48::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+40Cj
		shr	[bp+var_9], 1
		mov	al, [bp+var_A]
		mov	ah, 0
		shl	ax, 3
		add	ax, [bp+var_2]
		mov	es, word ptr _system_font_ptr+2
		add	ax, word ptr _system_font_ptr
		mov	dl, [bp+var_9]
		mov	bx, ax
		test	es:[bx], dl
		jz	loc_1AF86
		mov	al, [bp+var_F]
		push	ax
		push	[bp+var_6]
		mov	ax, [bp+var_8]
		add	ax, 7
		push	ax
		push	word ptr _display+2
		push	word ptr _display
		nop
		push	cs
		call	near ptr @vga_display@set_pix$qiiuc ; vga_display::set_pix(int,int,uchar)
		add	sp, 0Ah

loc_1AF86::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+44Aj
		inc	[bp+var_6]
		mov	al, [bp+arg_A]
		mov	ah, 0
		mov	bx, ax
		cmp	bx, 3		; switch 4 cases
		ja	loc_1AFAA	; jumptable 00028DB7 default case
		shl	bx, 1
		jmp	cs:off_1AFD5[bx] ; switch jump
; ---------------------------------------------------------------------------

loc_1AF9C::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+47Bj
					; DATA XREF: seg1891:off_1AFD5o
		jmp	loc_1AFAA	; jumptable 00028DB7 case 0
; ---------------------------------------------------------------------------

loc_1AF9E::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+47Bj
					; DATA XREF: seg1891:off_1AFD5o
		jmp	loc_1AFAA	; jumptable 00028DB7 case 1
; ---------------------------------------------------------------------------

loc_1AFA0::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+47Bj
					; DATA XREF: seg1891:off_1AFD5o
		inc	[bp+var_F]	; jumptable 00028DB7 case 2
		jmp	loc_1AFAA	; jumptable 00028DB7 default case
; ---------------------------------------------------------------------------

loc_1AFA5::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+47Bj
					; DATA XREF: seg1891:off_1AFD5o
		dec	[bp+var_F]	; jumptable 00028DB7 case 3
		jmp	$+2	; jumptable 00028DB7 default case
; ---------------------------------------------------------------------------

loc_1AFAA::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+477j
					; vga_text(int,int,uchar *,uchar,uchar):loc_1AF9Cj ...
		inc	[bp+var_2]	; jumptable 00028DB7 default case
		assume es:seg2608

loc_1AFAD::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+27Cj
		cmp	[bp+var_2], 8
		jge	loc_1AFB6
		jmp	loc_1AD9B
; ---------------------------------------------------------------------------
		assume es:nothing

loc_1AFB6::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+495j
		add	[bp+var_8], 8
		inc	[bp+var_4]
		assume es:nothing

loc_1AFBD::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar)+25Cj
		push	word ptr [bp+s+2]
		push	word ptr [bp+s]	; s
		call	_strlen
		assume es:seg2608
		add	sp, 4
		cmp	ax, [bp+var_4]
		jbe	locret_1AFD3
		jmp	loc_1AD7B
; ---------------------------------------------------------------------------

locret_1AFD3::				; CODE XREF: vga_text(int,int,uchar *,uchar,uchar):loc_1AD70j
					; vga_text(int,int,uchar *,uchar,uchar)+4B2j
		leave
		retf
@vga_text$qiinucucuc endp

; ---------------------------------------------------------------------------
off_1AFD5	dw offset loc_1AF9C	; DATA XREF: vga_text(int,int,uchar *,uchar,uchar)+47Br
		dw offset loc_1AF9E	; jump table for switch	statement
		dw offset loc_1AFA0
		dw offset loc_1AFA5
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; vga_display::vga_display(unsigned char)
@vga_display@$bctr$quc proc far		; CODE XREF: init_display(uchar)+Dp

preg		= REGPACK ptr -14h
arg_0		= dword	ptr  6
arg_4		= byte ptr  0Ah

		enter	14h, 0
		cmp	[bp+arg_0], 0
		jnz	loc_1AFFB
		push	318h		; unsigned int
		call	@$bnew$qui	; operator new(uint)
		assume es:nothing
		pop	cx
		mov	word ptr [bp+arg_0+2], dx
		mov	word ptr [bp+arg_0], ax
		or	ax, dx
		jz	loc_1B06E

loc_1AFFB::				; CODE XREF: vga_display::vga_display(uchar)+9j
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	al, [bp+arg_4]
		mov	es:[bx], al
		les	bx, [bp+arg_0]
		mov	al, 0
		mov	es:[bx+6], al
		les	bx, [bp+arg_0]
		mov	es:[bx+5], al
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+8], 140h
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+0Ah], 0C8h ; 'È'
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+7], 1
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+1], 0
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @vga_display@get_palette$qv ; vga_display::get_palette(void)
		assume es:seg2608
		add	sp, 4
		call	_x_set320x200
		assume es:nothing
		mov	(REGPACK ptr [bp+preg]).r_ax,	1130h
		mov	(REGPACK ptr [bp+preg]).r_bx,	300h
		push	ss
		lea	ax, [bp+preg]
		push	ax		; preg
		push	10h		; intno
		call	_intr
		assume es:nothing
		add	sp, 6
		mov	ax, (REGPACK ptr [bp+preg]).r_es
		mov	word ptr _system_font_ptr+2, ax
		mov	ax, (REGPACK ptr [bp+preg]).r_bp
		mov	word ptr _system_font_ptr, ax

loc_1B06E::				; CODE XREF: vga_display::vga_display(uchar)+1Cj
		mov	dx, word ptr [bp+arg_0+2]
		mov	ax, word ptr [bp+arg_0]
		jmp	$+2
; ---------------------------------------------------------------------------

locret_1B076::				; CODE XREF: vga_display::vga_display(uchar)+97j
		leave
		retf
@vga_display@$bctr$quc endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far vga_display::~vga_display(void far *block, int)
@vga_display@$bdtr$qv proc far		; CODE XREF: seg0fa9:0A2DP

block		= dword	ptr  6
arg_4		= word ptr  0Ah

		push	bp
		mov	bp, sp
		cmp	[bp+block], 0
		jz	loc_1B0A5
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		nop
		push	cs
		call	near ptr @vga_display@set_text_mode$qv ; vga_display::set_text_mode(void)
		add	sp, 4
		test	[bp+arg_4], 1
		jz	loc_1B0A5
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4

loc_1B0A5::				; CODE XREF: vga_display::~vga_display(void)+8j
					; vga_display::~vga_display(void)+1Dj
		pop	bp
		retf
@vga_display@$bdtr$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; vga_display::set_text_mode(void)
@vga_display@set_text_mode$qv proc far	; CODE XREF: vga_display::~vga_display(void)+12p
		enter	10h, 0
		mov	word ptr [bp-10h], 3
		push	ss
		lea	ax, [bp-10h]
		push	ax		; outregs
		push	ss
		lea	ax, [bp-10h]
		push	ax		; inregs
		push	10h		; intno
		call	_int86
		add	sp, 0Ah
		leave
		retf
@vga_display@set_text_mode$qv endp

; ---------------------------------------------------------------------------

; vga_display::set_mode_x(void)
@vga_display@set_mode_x$qv:
		push	bp
		mov	bp, sp
		call	_x_set320x200
		pop	bp
		retf
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; vga_display::doit(void)
@vga_display@doit$qv proc far		; CODE XREF: de_doit(void)+19FP

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		assume es:nothing
		cmp	byte ptr es:[bx+5], 0
		jz	loc_1B0F7
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx+6], 0
		jnz	loc_1B0F7
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @vga_display@cycle$qv ; vga_display::cycle(void)
		add	sp, 4

loc_1B0F5::				; CODE XREF: vga_display::doit(void)+29j
		jmp	loc_1B0FB
; ---------------------------------------------------------------------------

loc_1B0F7::				; CODE XREF: vga_display::doit(void)+Bj
					; vga_display::doit(void)+15j
		mov	al, 0
		jmp	loc_1B0F5
; ---------------------------------------------------------------------------

loc_1B0FB::				; CODE XREF: vga_display::doit(void):loc_1B0F5j
		pop	bp
		retf
@vga_display@doit$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; vga_display::copy_page(unsigned char,	unsigned char)
@vga_display@copy_page$qucuc proc far	; CODE XREF: init_game(void)+294P
					; play_game(uchar)+7EP	...

arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= byte ptr  0Ah
arg_6		= byte ptr  0Ch

		push	bp
		mov	bp, sp
		push	140h
		push	140h
		mov	al, [bp+arg_4]
		mov	ah, 0
		shl	ax, 1
		mov	bx, ax
		push	_page_offsets[bx]
		mov	al, [bp+arg_6]
		mov	ah, 0
		shl	ax, 1
		mov	bx, ax
		push	_page_offsets[bx]
		push	0
		push	0
		push	0C8h ; 'È'
		push	140h
		push	0
		push	0
		push	[bp+arg_2]
		push	[bp+arg_0]
		nop
		push	cs
		call	near ptr @vga_display@copy_bits$qiiiiiiuiuiuiui	; vga_display::copy_bits(int,int,int,int,int,int,uint,uint,uint,uint)
		add	sp, 18h
		pop	bp
		retf
@vga_display@copy_page$qucuc endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; vga_display::turn_cycling(unsigned char)
@vga_display@turn_cycling$quc proc far	; CODE XREF: tilemap::turn_cycling(uchar)+1AP

arg_0		= dword	ptr  6
arg_4		= byte ptr  0Ah

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	al, es:[bx+5]
		cmp	al, [bp+arg_4]
		jnz	loc_1B14F
		jmp	loc_1B180
; ---------------------------------------------------------------------------

loc_1B14F::				; CODE XREF: vga_display::turn_cycling(uchar)+Dj
		les	bx, [bp+arg_0]
		mov	al, [bp+arg_4]
		mov	es:[bx+5], al
		cmp	[bp+arg_4], 0
		jnz	loc_1B180
		push	300h		; n
		push	ds
		push	offset _old_palette ; src
		push	ds
		push	offset _palette	; dest
		call	_memcpy
		add	sp, 0Ah
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @vga_display@set_palette$qv ; vga_display::set_palette(void)
		add	sp, 4

loc_1B180::				; CODE XREF: vga_display::turn_cycling(uchar)+Fj
					; vga_display::turn_cycling(uchar)+1Fj
		pop	bp
		retf
@vga_display@turn_cycling$quc endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; vga_display::cycle(void)
@vga_display@cycle$qv proc far		; CODE XREF: vga_display::doit(void)+1Fp

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		mov	al, es:[bx+0Eh]
		inc	byte ptr es:[bx+0Eh]
		les	bx, [bp+arg_0]
		cmp	al, es:[bx+0Ch]
		jnz	loc_1B1FB
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+0Eh], 0
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+316h]
		les	bx, [bp+arg_0]
		mov	al, es:[bx+0Dh]
		mov	ah, 0
		imul	ax, 30h
		mov	dx, word ptr [bp+arg_0]
		add	dx, ax
		add	dx, 10h
		push	word ptr [bp+arg_0+2]
		push	dx
		push	ds
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+310h]
		add	ax, offset _palette
		push	ax
		call	_my_movsd
		assume es:seg2608
		add	sp, 0Ah
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	al, es:[bx+0Dh]
		inc	al
		les	bx, [bp+arg_0]
		mov	es:[bx+0Dh], al
		les	bx, [bp+arg_0]
		cmp	al, es:[bx+0Fh]
		jnz	loc_1B1F7
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+0Dh], 0

loc_1B1F7::				; CODE XREF: vga_display::cycle(void)+6Bj
		mov	al, 1

loc_1B1F9::				; CODE XREF: vga_display::cycle(void)+7Bj
		jmp	loc_1B1FF
; ---------------------------------------------------------------------------

loc_1B1FB::				; CODE XREF: vga_display::cycle(void)+15j
		mov	al, 0
		jmp	loc_1B1F9
; ---------------------------------------------------------------------------

loc_1B1FF::				; CODE XREF: vga_display::cycle(void):loc_1B1F9j
		pop	bp
		retf
@vga_display@cycle$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; vga_display::setup_cycle(unsigned char, unsigned char, unsigned char)
@vga_display@setup_cycle$qucucuc proc far ; CODE XREF: seg1783:0D80P
					; tilemap::reset_palette(uchar)+60P

var_3B		= byte ptr -3Bh
var_3A		= byte ptr -3Ah
var_39		= byte ptr -39h
dest		= byte ptr -38h
var_37		= byte ptr -37h
var_36		= byte ptr -36h
var_7		= byte ptr -7
var_6		= byte ptr -6
var_5		= byte ptr -5
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= byte ptr  0Ah
arg_6		= byte ptr  0Ch
arg_8		= byte ptr  0Eh

		enter	38h, 0
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	byte ptr es:[bx+0Dh], 0
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+0Eh], 0
		les	bx, [bp+arg_0]
		mov	al, [bp+arg_6]
		sub	al, [bp+arg_4]
		mov	es:[bx+0Fh], al
		les	bx, [bp+arg_0]
		mov	al, [bp+arg_8]
		mov	es:[bx+0Ch], al
		mov	al, [bp+arg_4]
		mov	ah, 0
		imul	ax, 3
		les	bx, [bp+arg_0]
		mov	es:[bx+310h], ax
		mov	al, [bp+arg_6]
		mov	ah, 0
		imul	ax, 3
		les	bx, [bp+arg_0]
		mov	es:[bx+312h], ax
		push	300h		; n
		push	ds
		push	offset _palette	; src
		push	ds
		push	offset _old_palette ; dest
		call	_memcpy
		assume es:seg2608
		add	sp, 0Ah
		mov	al, [bp+arg_6]
		mov	ah, 0
		mov	dl, [bp+arg_4]
		mov	dh, 0
		sub	ax, dx
		imul	ax, 3
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	es:[bx+314h], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+314h]
		mov	bx, 4
		cwd
		idiv	bx
		or	dx, dx
		jz	loc_1B298
		push	0
		push	0
		push	ds
		push	offset aPaletteCycleNo ; "Palette cycle	not a multiple of 4."
		call	@terminate$qnuct1 ; terminate(uchar *,uchar *)
; ---------------------------------------------------------------------------
		add	sp, 8

loc_1B298::				; CODE XREF: vga_display::setup_cycle(uchar,uchar,uchar)+85j
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+314h]
		mov	bx, 4
		cwd
		idiv	bx
		les	bx, [bp+arg_0]
		mov	es:[bx+316h], ax
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+314h] ;	n
		push	ds
		mov	al, [bp+arg_4]
		mov	ah, 0
		imul	ax, 3
		add	ax, offset _palette
		push	ax		; src
		push	ss
		lea	ax, [bp+dest]
		push	ax		; dest
		call	_memcpy
		assume es:seg2b53
		add	sp, 0Ah
		mov	[bp+var_2], 0
		jmp	loc_1B379
; ---------------------------------------------------------------------------
		assume es:nothing

loc_1B2D8::				; CODE XREF: vga_display::setup_cycle(uchar,uchar,uchar)+186j
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+314h] ;	n
		push	ss
		lea	ax, [bp+dest]
		push	ax		; src
		mov	ax, [bp+var_2]
		imul	ax, 30h
		mov	dx, word ptr [bp+arg_0]
		add	dx, ax
		add	dx, 10h
		push	word ptr [bp+arg_0+2]
		push	dx		; dest
		call	_memcpy
		add	sp, 0Ah
		les	bx, [bp+arg_0]
		mov	bx, es:[bx+314h]
		lea	ax, [bp+var_3B]
		add	bx, ax
		mov	al, ss:[bx]
		mov	[bp+var_5], al
		les	bx, [bp+arg_0]
		mov	bx, es:[bx+314h]
		lea	ax, [bp+var_3A]
		add	bx, ax
		mov	al, ss:[bx]
		mov	[bp+var_6], al
		les	bx, [bp+arg_0]
		mov	bx, es:[bx+314h]
		lea	ax, [bp+var_39]
		add	bx, ax
		mov	al, ss:[bx]
		mov	[bp+var_7], al
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+314h]
		mov	[bp+var_4], ax
		jmp	loc_1B35E
; ---------------------------------------------------------------------------

loc_1B345::				; CODE XREF: vga_display::setup_cycle(uchar,uchar,uchar)+161j
		lea	ax, [bp+var_3B]
		mov	bx, [bp+var_4]
		add	bx, ax
		mov	al, ss:[bx]
		lea	dx, [bp+dest]
		mov	bx, [bp+var_4]
		add	bx, dx
		mov	ss:[bx], al
		dec	[bp+var_4]

loc_1B35E::				; CODE XREF: vga_display::setup_cycle(uchar,uchar,uchar)+142j
		cmp	[bp+var_4], 2
		jg	loc_1B345
		mov	al, [bp+var_5]
		mov	[bp+dest], al
		mov	al, [bp+var_6]
		mov	[bp+var_37], al
		mov	al, [bp+var_7]
		mov	[bp+var_36], al
		inc	[bp+var_2]
		assume es:seg2b53

loc_1B379::				; CODE XREF: vga_display::setup_cycle(uchar,uchar,uchar)+D4j
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	al, es:[bx+0Fh]
		mov	ah, 0
		cmp	ax, [bp+var_2]
		jle	locret_1B38A
		jmp	loc_1B2D8
; ---------------------------------------------------------------------------

locret_1B38A::				; CODE XREF: vga_display::setup_cycle(uchar,uchar,uchar)+184j
		leave
		retf
@vga_display@setup_cycle$qucucuc endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; vga_display::set_pix(int, int, unsigned char)
@vga_display@set_pix$qiiuc proc	far	; CODE XREF: update_air_guage(int,int,int)+151P
					; update_shld_guage(int,int,int)+151P ...

arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= byte ptr  0Eh

		push	bp
		mov	bp, sp
		mov	al, [bp+arg_8]
		mov	ah, 0
		push	ax
		push	0
		push	[bp+arg_6]
		push	[bp+arg_4]
		call	_x_set_pix
		assume es:nothing
		add	sp, 8
		pop	bp
		retf
@vga_display@set_pix$qiiuc endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; vga_display::read_pix(int, int)
@vga_display@read_pix$qii proc far	; CODE XREF: vga_display::dump_pcx(void)+112p
					; vga_display::dump_pcx(void)+131p

arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch

		push	bp
		mov	bp, sp
		push	0
		push	[bp+arg_6]
		push	[bp+arg_4]
		call	_x_read_pix
		add	sp, 6
		jmp	$+2
; ---------------------------------------------------------------------------

loc_1B3BC::				; CODE XREF: vga_display::read_pix(int,int)+13j
		pop	bp
		retf
@vga_display@read_pix$qii endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; vga_display::draw_span(int, int, unsigned char, int, unsigned	int)
@vga_display@draw_span$qiiuciui	proc far ; CODE	XREF: update_boss_guage(void)+122P
					; update_boss_guage(void)+14AP	...

arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= byte ptr  0Eh
arg_A		= word ptr  10h
arg_C		= word ptr  12h

		push	bp
		mov	bp, sp
		mov	al, [bp+arg_8]
		mov	ah, 0
		push	ax
		push	[bp+arg_C]
		push	[bp+arg_A]
		push	[bp+arg_6]
		push	[bp+arg_4]
		call	_x_draw_span
		assume es:nothing
		add	sp, 0Ah
		pop	bp
		retf
@vga_display@draw_span$qiiuciui	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; vga_display::pause(unsigned int)
@vga_display@pause$qui proc far		; CODE XREF: de_doit(void)+201P
					; end_game(void)+A1P ...

arg_4		= word ptr  0Ah

		push	bp
		mov	bp, sp
		jmp	loc_1B3F6
; ---------------------------------------------------------------------------

loc_1B3E2::				; CODE XREF: vga_display::pause(uint)+21j
		jmp	$+2
; ---------------------------------------------------------------------------

loc_1B3E4::				; CODE XREF: vga_display::pause(uint):loc_1B3E2j
					; vga_display::pause(uint)+Dj
		mov	dx, 3DAh
		in	al, dx		; Video	status bits:
					; 0: retrace.  1=display is in vert or horiz retrace.
					; 1: 1=light pen is triggered; 0=armed
					; 2: 1=light pen switch	is open; 0=closed
					; 3: 1=vertical	sync pulse is occurring.
		test	al, 8
		jnz	loc_1B3E4
		jmp	$+2
; ---------------------------------------------------------------------------

loc_1B3EE::				; CODE XREF: vga_display::pause(uint)+Fj
					; vga_display::pause(uint)+17j
		mov	dx, 3DAh
		in	al, dx		; Video	status bits:
					; 0: retrace.  1=display is in vert or horiz retrace.
					; 1: 1=light pen is triggered; 0=armed
					; 2: 1=light pen switch	is open; 0=closed
					; 3: 1=vertical	sync pulse is occurring.
		test	al, 8
		jz	loc_1B3EE

loc_1B3F6::				; CODE XREF: vga_display::pause(uint)+3j
		mov	ax, [bp+arg_4]
		dec	[bp+arg_4]
		or	ax, ax
		jnz	loc_1B3E2
		pop	bp
		retf
@vga_display@pause$qui endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; vga_display::blank_palette(void)
@vga_display@blank_palette$qv proc far	; CODE XREF: init_game(void)+F3P
					; init_game(void)+225P	...
		push	bp
		mov	bp, sp
		call	_nullpal
		pop	bp
		retf
@vga_display@blank_palette$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; vga_display::fade_up(void)
@vga_display@fade_up$qv	proc far	; CODE XREF: start_room(uchar *)+524P
					; end_game(void)+6AP ...
		push	bp
		mov	bp, sp
		push	ds
		push	offset _palette
		call	_palup
		add	sp, 4
		pop	bp
		retf
@vga_display@fade_up$qv	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; vga_display::fade_down(void)
@vga_display@fade_down$qv proc far	; CODE XREF: init_game(void)+122P
					; play_game(uchar)+713P ...
		push	bp
		mov	bp, sp
		push	ds
		push	offset _palette
		call	_paldown
		add	sp, 4
		pop	bp
		retf
@vga_display@fade_down$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; vga_display::set_palette(void)
@vga_display@set_palette$qv proc far	; CODE XREF: end_game(void)+D5P
					; start_title_loop(void)+4AP ...
		push	bp
		mov	bp, sp
		push	0
		push	ds
		push	offset _palette
		call	_forcepal
		add	sp, 6
		pop	bp
		retf
@vga_display@set_palette$qv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; vga_display::get_palette(void)
@vga_display@get_palette$qv proc far	; CODE XREF: tilemap::tilemap(uchar *,int,int)+CDP
					; vga_display::vga_display(uchar)+61p

segregs		= SREGS	ptr -8
arg_0		= word ptr  6
arg_2		= word ptr  8

		enter	18h, 0
		mov	word ptr [bp-18h], 1017h
		mov	word ptr [bp-16h], 0
		mov	word ptr [bp-14h], 100h
		mov	word ptr [bp-12h], offset _palette
		mov	(SREGS ptr [bp+segregs])._es, ds
		push	1
		push	[bp+arg_2]
		push	[bp+arg_0]
		push	cs
		call	near ptr @vga_display@pause$qui	; vga_display::pause(uint)
		add	sp, 6
		push	ss
		lea	ax, [bp+segregs]
		push	ax		; segregs
		push	ss
		lea	ax, [bp-18h]
		push	ax		; outregs
		push	ss
		lea	ax, [bp-18h]
		push	ax		; inregs
		push	10h		; intno
		call	_int86x
		assume es:seg2608
		add	sp, 0Eh
		leave
		retf
@vga_display@get_palette$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; vga_display::save_palette(void)
@vga_display@save_palette$qv proc far	; CODE XREF: show_high_scores(uchar)+CP
		push	bp
		mov	bp, sp
		push	300h		; n
		push	ds
		push	offset _palette	; src
		push	ds
		push	offset _spare_palette ;	dest
		call	_memcpy
		add	sp, 0Ah
		pop	bp
		retf
@vga_display@save_palette$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; vga_display::restore_palette(void)
@vga_display@restore_palette$qv	proc far ; CODE	XREF: show_high_scores(uchar)+409P
		push	bp
		mov	bp, sp
		push	300h		; n
		push	ds
		push	offset _spare_palette ;	src
		push	ds
		push	offset _palette	; dest
		call	_memcpy
		add	sp, 0Ah
		pop	bp
		retf
@vga_display@restore_palette$qv	endp

; ---------------------------------------------------------------------------

; vga_display::print_at(int, int, unsigned char	*)
@vga_display@print_at$qiinuc:
		push	bp
		mov	bp, sp
		cmp	word ptr [bp+0Ah], 0FFFFh
		jnz	loc_1B4D7
		push	word ptr [bp+10h]
		push	word ptr [bp+0Eh]
		call	_strlen
		add	sp, 4
		shr	ax, 1
		mov	dx, 14h
		sub	dx, ax
		mov	[bp+0Ah], dx

loc_1B4D7::				; CODE XREF: seg1891:09CDj
		cmp	word ptr [bp+0Ch], 0FFFFh
		jnz	loc_1B4E2
		mov	word ptr [bp+0Ch], 0Ch

loc_1B4E2::				; CODE XREF: seg1891:09EBj
		les	bx, _display
		assume es:nothing
		mov	al, es:[bx+1]
		push	ax
		les	bx, _display
		mov	al, es:[bx+4]
		push	ax
		push	word ptr [bp+10h]
		push	word ptr [bp+0Eh]
		mov	ax, [bp+0Ch]
		shl	ax, 3
		push	ax
		mov	ax, [bp+0Ah]
		shl	ax, 3
		push	ax
		push	cs
		call	near ptr @vga_text$qiinucucuc ;	vga_text(int,int,uchar *,uchar,uchar)
		add	sp, 0Ch
		pop	bp
		retf
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far vga_display::print_at_xy(int, int, int, int, char *s, char)
@vga_display@print_at_xy$qiinucuc proc far ; CODE XREF:	activate_menu_bar(void)+E5P
					; show_high_scores(uchar)+F0P ...

arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
s		= dword	ptr  0Eh
arg_C		= byte ptr  12h

		push	bp
		mov	bp, sp
		cmp	[bp+arg_C], 0
		jz	loc_1B535
		assume es:nothing
		push	word ptr [bp+s+2]
		push	word ptr [bp+s]	; s
		call	_strlen
		assume es:seg2608
		add	sp, 4
		shl	ax, 3
		shr	ax, 1
		mov	dx, 0A0h ; ' '
		sub	dx, ax
		mov	[bp+arg_4], dx
		assume es:nothing

loc_1B535::				; CODE XREF: vga_display::print_at_xy(int,int,uchar *,uchar)+7j
		les	bx, _display
		assume es:nothing
		cmp	byte ptr es:[bx+1], 0
		jz	loc_1B55B
		push	0		; char
		push	0		; char
		push	word ptr [bp+s+2]
		push	word ptr [bp+s]	; s
		mov	ax, [bp+arg_6]
		inc	ax
		push	ax		; int
		mov	ax, [bp+arg_4]
		inc	ax
		push	ax		; int
		push	cs
		call	near ptr @vga_text$qiinucucuc ;	vga_text(int,int,uchar *,uchar,uchar)
		assume es:seg2608
		add	sp, 0Ch

loc_1B55B::				; CODE XREF: vga_display::print_at_xy(int,int,uchar *,uchar)+2Dj
		les	bx, _display
		assume es:nothing
		mov	al, es:[bx+1]
		push	ax		; char
		les	bx, _display
		mov	al, es:[bx+4]
		push	ax		; char
		push	word ptr [bp+s+2]
		push	word ptr [bp+s]	; s
		push	[bp+arg_6]	; int
		push	[bp+arg_4]	; int
		push	cs
		call	near ptr @vga_text$qiinucucuc ;	vga_text(int,int,uchar *,uchar,uchar)
		assume es:seg2608
		add	sp, 0Ch
		pop	bp
		retf
@vga_display@print_at_xy$qiinucuc endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; vga_display::fill_rect(int, int, int,	int, int, int, unsigned	char)
@vga_display@fill_rect$qiiiiiiuc proc far ; CODE XREF: de_doit(void)+75CP
					; post_message(uchar)+133P ...

arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh
arg_A		= word ptr  10h
arg_C		= word ptr  12h
arg_E		= word ptr  14h
arg_10		= byte ptr  16h

		push	bp
		mov	bp, sp
		cmp	[bp+arg_E], 0FFFFh
		jz	loc_1B5D5
		push	[bp+arg_E]
		mov	al, [bp+arg_10]
		mov	ah, 0
		shl	ax, 1
		mov	bx, ax
		push	_page_offsets[bx]
		push	[bp+arg_A]
		push	[bp+arg_8]
		push	[bp+arg_6]
		push	[bp+arg_4]
		call	_x_fill_rect
		assume es:nothing
		add	sp, 0Ch
		push	[bp+arg_C]
		mov	al, [bp+arg_10]
		mov	ah, 0
		shl	ax, 1
		mov	bx, ax
		push	_page_offsets[bx]
		mov	ax, [bp+arg_A]
		dec	ax
		push	ax
		mov	ax, [bp+arg_8]
		dec	ax
		push	ax
		mov	ax, [bp+arg_6]
		inc	ax
		push	ax
		mov	ax, [bp+arg_4]
		inc	ax
		push	ax
		jmp	loc_1B5F1
; ---------------------------------------------------------------------------
		assume es:nothing

loc_1B5D5::				; CODE XREF: vga_display::fill_rect(int,int,int,int,int,int,uchar)+7j
		push	[bp+arg_C]
		mov	al, [bp+arg_10]
		mov	ah, 0
		shl	ax, 1
		mov	bx, ax
		push	_page_offsets[bx]
		push	[bp+arg_A]
		push	[bp+arg_8]
		push	[bp+arg_6]
		push	[bp+arg_4]

loc_1B5F1::				; CODE XREF: vga_display::fill_rect(int,int,int,int,int,int,uchar)+51j
		call	_x_fill_rect
		assume es:nothing
		add	sp, 0Ch
		pop	bp
		retf
@vga_display@fill_rect$qiiiiiiuc endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; vga_display::show_offset(unsigned int)
@vga_display@show_offset$qui proc far	; CODE XREF: de_doit(void)+1C1P
					; end_game(void)+1EP ...

arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		assume es:nothing
		cmp	byte ptr es:[bx], 0
		jz	loc_1B617
		push	0
		push	0
		push	ds
		push	offset aNotInModeXAbor ; "Not in Mode X	- aborted."
		call	@terminate$qnuct1 ; terminate(uchar *,uchar *)
; ---------------------------------------------------------------------------
		add	sp, 8

loc_1B617::				; CODE XREF: vga_display::show_offset(uint)+Aj
		push	[bp+arg_4]
		call	_x_show_offset
		pop	cx
		pop	bp
		retf
@vga_display@show_offset$qui endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; vga_display::cls(unsigned char, unsigned char)
@vga_display@cls$qucuc proc far		; CODE XREF: end_game(void)+C5P
					; show_high_scores(uchar)+3F9P	...

arg_4		= byte ptr  0Ah
arg_6		= byte ptr  0Ch

		push	bp
		mov	bp, sp
		mov	al, [bp+arg_4]
		mov	ah, 0
		push	ax
		mov	al, [bp+arg_6]
		mov	ah, 0
		shl	ax, 1
		mov	bx, ax
		push	_page_offsets[bx]
		push	0C8h ; 'È'
		push	140h
		push	0
		push	0
		call	_x_fill_rect
		assume es:nothing
		add	sp, 0Ch
		pop	bp
		retf
@vga_display@cls$qucuc endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; vga_display::get_bits(int, int, int, int)
@vga_display@get_bits$qiiii proc far	; CODE XREF: play_game(uchar)+42P
					; play_game(uchar)+63P	...

var_6		= dword	ptr -6
var_2		= word ptr -2
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh
arg_A		= word ptr  10h

		enter	6, 0
		mov	ax, [bp+arg_8]
		sub	ax, [bp+arg_4]
		mov	dx, [bp+arg_A]
		sub	dx, [bp+arg_6]
		imul	dx
		mov	[bp+var_2], ax
		push	[bp+var_2]	; unsigned int
		call	@$bnew$qui	; operator new(uint)
		assume es:nothing
		pop	cx
		mov	word ptr [bp+var_6+2], dx
		mov	word ptr [bp+var_6], ax
		cmp	[bp+var_6], 0
		jnz	loc_1B683
		push	ds
		push	offset aGettingScreenB ; "Getting screen bits."
		call	@no_heap$qnuc	; no_heap(uchar	*)
; ---------------------------------------------------------------------------
		add	sp, 4

loc_1B683::				; CODE XREF: vga_display::get_bits(int,int,int,int)+29j
		push	word ptr [bp+var_6+2]
		push	word ptr [bp+var_6]
		push	0
		push	[bp+arg_A]
		push	[bp+arg_8]
		push	[bp+arg_6]
		push	[bp+arg_4]
		call	_x_get_bits
		assume es:nothing
		add	sp, 0Eh
		mov	dx, word ptr [bp+var_6+2]
		mov	ax, word ptr [bp+var_6]
		jmp	$+2
; ---------------------------------------------------------------------------

locret_1B6A7::				; CODE XREF: vga_display::get_bits(int,int,int,int)+59j
		leave
		retf
@vga_display@get_bits$qiiii endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; vga_display::copy_bits(int, int, int,	int, int, int, unsigned	int, unsigned int, unsigned int, unsigned int)
@vga_display@copy_bits$qiiiiiiuiuiuiui proc far	; CODE XREF: de_doit(void)+34BP
					; post_message(uchar)+185P ...

arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh
arg_A		= word ptr  10h
arg_C		= word ptr  12h
arg_E		= word ptr  14h
arg_10		= word ptr  16h
arg_12		= word ptr  18h
arg_14		= word ptr  1Ah
arg_16		= word ptr  1Ch

		push	bp
		mov	bp, sp
		push	[bp+arg_16]
		push	[bp+arg_14]
		push	[bp+arg_12]
		push	[bp+arg_10]
		push	[bp+arg_E]
		push	[bp+arg_C]
		push	[bp+arg_A]
		push	[bp+arg_8]
		push	[bp+arg_6]
		push	[bp+arg_4]
		call	_x_vid2vid
		add	sp, 14h
		pop	bp
		retf
@vga_display@copy_bits$qiiiiiiuiuiuiui endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; vga_display::put_bits(int, int, int, int, unsigned char *, unsigned int, unsigned int)
@vga_display@put_bits$qiiiinucuiui proc	far ; CODE XREF: init_game(void)+268P
					; start_room(uchar *)+514P ...

var_2		= word ptr -2
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh
arg_A		= word ptr  10h
arg_C		= word ptr  12h
arg_E		= word ptr  14h
arg_10		= word ptr  16h
arg_12		= word ptr  18h

		enter	2, 0
		mov	ax, [bp+arg_8]
		sub	ax, [bp+arg_4]
		mov	[bp+var_2], ax
		cmp	[bp+arg_10], 0
		jnz	loc_1B6ED
		mov	ax, [bp+var_2]
		mov	[bp+arg_10], ax

loc_1B6ED::				; CODE XREF: vga_display::put_bits(int,int,int,int,uchar *,uint,uint)+11j
		push	140h
		push	[bp+arg_10]
		push	[bp+arg_12]
		push	[bp+arg_E]
		push	[bp+arg_C]
		push	0
		push	0
		push	[bp+arg_A]
		push	[bp+arg_8]
		push	[bp+arg_6]
		push	[bp+arg_4]
		call	_x_put_bits
		assume es:nothing
		add	sp, 16h
		leave
		retf
@vga_display@put_bits$qiiiinucuiui endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; vga_display::put_bits_masked(int, int, int, int, unsigned char *, unsigned int, unsigned int,	unsigned char)
@vga_display@put_bits_masked$qiiiinucuiuiuc proc far ; CODE XREF: update_gun(void)+D4P
					; show_loop(uchar *,int,int,uchar,uint)+D2P ...

var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh
arg_A		= word ptr  10h
arg_C		= word ptr  12h
arg_E		= word ptr  14h
arg_10		= word ptr  16h
arg_12		= word ptr  18h
arg_14		= byte ptr  1Ah

		enter	0Ch, 0
		mov	ax, [bp+arg_8]
		sub	ax, [bp+arg_4]
		mov	[bp+var_2], ax
		mov	ax, [bp+arg_A]
		sub	ax, [bp+arg_6]
		mov	[bp+var_4], ax
		cmp	[bp+arg_10], 0
		jnz	loc_1B738
		mov	ax, [bp+var_2]
		mov	[bp+arg_10], ax

loc_1B738::				; CODE XREF: vga_display::put_bits_masked(int,int,int,int,uchar	*,uint,uint,uchar)+1Aj
		les	bx, [bp+arg_0]
		assume es:nothing
		cmp	byte ptr es:[bx+7], 0
		jz	loc_1B75B
		mov	ax, [bp+var_2]
		mov	[bp+var_A], ax
		mov	ax, [bp+var_4]
		mov	[bp+var_C], ax
		mov	[bp+var_6], 0
		mov	[bp+var_8], 0
		jmp	loc_1B7ED
; ---------------------------------------------------------------------------

loc_1B75B::				; CODE XREF: vga_display::put_bits_masked(int,int,int,int,uchar	*,uint,uint,uchar)+2Aj
		mov	ax, [bp+var_4]
		mov	[bp+var_C], ax
		cmp	[bp+arg_6], 0
		jl	loc_1B78F
		mov	[bp+var_8], 0
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+0Ah]
		cmp	ax, [bp+arg_A]
		jge	loc_1B78D
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_6]
		add	ax, [bp+var_4]
		sub	ax, es:[bx+0Ah]
		mov	dx, [bp+var_4]
		sub	dx, ax
		mov	[bp+var_C], dx

loc_1B78D::				; CODE XREF: vga_display::put_bits_masked(int,int,int,int,uchar	*,uint,uint,uchar)+60j
		jmp	loc_1B7A4
; ---------------------------------------------------------------------------

loc_1B78F::				; CODE XREF: vga_display::put_bits_masked(int,int,int,int,uchar	*,uint,uint,uchar)+4Fj
		push	[bp+arg_6]
		call	@abs$qi		; abs(int)
		pop	cx
		mov	[bp+var_8], ax
		mov	ax, [bp+var_4]
		sub	ax, [bp+var_8]
		mov	[bp+var_C], ax

loc_1B7A4::				; CODE XREF: vga_display::put_bits_masked(int,int,int,int,uchar	*,uint,uint,uchar):loc_1B78Dj
		mov	ax, [bp+var_2]
		mov	[bp+var_A], ax
		cmp	[bp+arg_4], 0
		jl	loc_1B7D8
		mov	[bp+var_6], 0
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+8]
		cmp	ax, [bp+arg_8]
		jge	loc_1B7D6
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_4]
		add	ax, [bp+var_2]
		sub	ax, es:[bx+8]
		mov	dx, [bp+var_2]
		sub	dx, ax
		mov	[bp+var_A], dx

loc_1B7D6::				; CODE XREF: vga_display::put_bits_masked(int,int,int,int,uchar	*,uint,uint,uchar)+A9j
		jmp	loc_1B7ED
; ---------------------------------------------------------------------------

loc_1B7D8::				; CODE XREF: vga_display::put_bits_masked(int,int,int,int,uchar	*,uint,uint,uchar)+98j
		push	[bp+arg_4]
		call	@abs$qi		; abs(int)
		pop	cx
		mov	[bp+var_6], ax
		mov	ax, [bp+var_2]
		sub	ax, [bp+var_6]
		mov	[bp+var_A], ax

loc_1B7ED::				; CODE XREF: vga_display::put_bits_masked(int,int,int,int,uchar	*,uint,uint,uchar)+42j
					; vga_display::put_bits_masked(int,int,int,int,uchar *,uint,uint,uchar):loc_1B7D6j
		cmp	[bp+arg_14], 0
		jz	loc_1B839
		mov	al, [bp+arg_14]
		mov	ah, 0
		push	ax
		push	140h
		mov	ax, [bp+var_2]
		sub	ax, [bp+var_A]
		push	ax
		push	[bp+arg_12]
		push	[bp+arg_E]
		push	[bp+arg_C]
		mov	ax, [bp+arg_6]
		add	ax, [bp+var_8]
		push	ax
		mov	ax, [bp+arg_4]
		add	ax, [bp+var_6]
		push	ax
		mov	ax, [bp+var_8]
		add	ax, [bp+var_C]
		push	ax
		mov	ax, [bp+var_6]
		add	ax, [bp+var_A]
		push	ax
		push	[bp+var_8]
		push	[bp+var_6]
		call	_x_put_bits_masked_color
		assume es:nothing
		add	sp, 18h
		jmp	locret_1B8B8
; ---------------------------------------------------------------------------
		assume es:nothing

loc_1B839::				; CODE XREF: vga_display::put_bits_masked(int,int,int,int,uchar	*,uint,uint,uchar)+DBj
		cmp	[bp+var_A], 4
		jle	loc_1B87B
		push	140h
		mov	ax, [bp+var_2]
		sub	ax, [bp+var_A]
		push	ax
		push	[bp+arg_12]
		push	[bp+arg_E]
		push	[bp+arg_C]
		mov	ax, [bp+arg_6]
		add	ax, [bp+var_8]
		push	ax
		mov	ax, [bp+arg_4]
		add	ax, [bp+var_6]
		push	ax
		mov	ax, [bp+var_8]
		add	ax, [bp+var_C]
		push	ax
		mov	ax, [bp+var_6]
		add	ax, [bp+var_A]
		push	ax
		push	[bp+var_8]
		push	[bp+var_6]
		call	_x_put_bits_masked2
		assume es:nothing
		jmp	loc_1B8B5
; ---------------------------------------------------------------------------
		assume es:nothing

loc_1B87B::				; CODE XREF: vga_display::put_bits_masked(int,int,int,int,uchar	*,uint,uint,uchar)+127j
		push	140h
		mov	ax, [bp+var_2]
		sub	ax, [bp+var_A]
		push	ax
		push	[bp+arg_12]
		push	[bp+arg_E]
		push	[bp+arg_C]
		mov	ax, [bp+arg_6]
		add	ax, [bp+var_8]
		push	ax
		mov	ax, [bp+arg_4]
		add	ax, [bp+var_6]
		push	ax
		mov	ax, [bp+var_8]
		add	ax, [bp+var_C]
		push	ax
		mov	ax, [bp+var_6]
		add	ax, [bp+var_A]
		push	ax
		push	[bp+var_8]
		push	[bp+var_6]
		call	_x_put_bits_masked
		assume es:nothing

loc_1B8B5::				; CODE XREF: vga_display::put_bits_masked(int,int,int,int,uchar	*,uint,uint,uchar)+163j
		add	sp, 16h

locret_1B8B8::				; CODE XREF: vga_display::put_bits_masked(int,int,int,int,uchar	*,uint,uint,uchar)+120j
		leave
		retf
@vga_display@put_bits_masked$qiiiinucuiuiuc endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far vga_display::show_pcx(int, int, char *path,	char, int, int)
@vga_display@show_pcx$qnucucuii	proc far ; CODE	XREF: init_game(void)+10DP
					; play_game(uchar)+26P	...

var_1A		= word ptr -1Ah
dest		= dword	ptr -16h
var_12		= word ptr -12h
var_10		= word ptr -10h
var_E		= word ptr -0Eh
var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= word ptr -8
src		= dword	ptr -6
var_1		= byte ptr -1
arg_0		= word ptr  6
arg_2		= word ptr  8
path		= dword	ptr  0Ah
arg_8		= byte ptr  0Eh
arg_A		= word ptr  10h
arg_C		= word ptr  12h

		enter	1Ah, 0
		mov	ax, [bp+arg_A]
		mov	bx, 50h	; 'P'
		xor	dx, dx
		div	bx
		mov	[bp+arg_A], ax
		push	word ptr [bp+path+2]
		push	word ptr [bp+path] ; path
		call	@g_open_element$qnuc ; g_open_element(uchar *)
		push	dx
		push	ax
		pop	eax
		add	sp, 4

loc_1B8DD::
		mov	dword ptr [bp+var_1A], eax
		cmp	dword ptr [bp+var_1A], 0FFFFFFFFh
		jnz	loc_1B8EB
		jmp	loc_1BA99
; ---------------------------------------------------------------------------

loc_1B8EB::				; CODE XREF: vga_display::show_pcx(uchar *,uchar,uint,int)+2Cj
		push	[bp+var_1A]	; unsigned int
		call	@$bnew$qui	; operator new(uint)
		assume es:nothing
		pop	cx
		mov	word ptr [bp+src+2], dx
		mov	word ptr [bp+src], ax
		cmp	[bp+src], 0
		jnz	loc_1B90D
		push	ds
		push	offset aLoadingPcxFile ; "Loading pcx file."
		call	@no_heap$qnuc	; no_heap(uchar	*)
; ---------------------------------------------------------------------------
		add	sp, 4

loc_1B90D::				; CODE XREF: vga_display::show_pcx(uchar *,uchar,uint,int)+45j
		push	[bp+var_1A]	; len
		push	word ptr [bp+src+2]
		push	word ptr [bp+src] ; buf
		call	@g_element_read$qnvui ;	g_element_read(void *,uint)
		push	dx
		push	ax
		pop	eax
		add	sp, 6
		cmp	eax, dword ptr [bp+var_1A]
		jz	loc_1B92B
		jmp	loc_1BA8C
; ---------------------------------------------------------------------------

loc_1B92B::				; CODE XREF: vga_display::show_pcx(uchar *,uchar,uint,int)+6Cj
		call	@g_close_element$qv ; g_close_element(void)
		push	80h ; ''       ; unsigned int
		call	@$bnew$qui	; operator new(uint)
		assume es:nothing
		pop	cx
		mov	word ptr [bp+dest+2], dx
		mov	word ptr [bp+dest], ax
		cmp	[bp+dest], 0
		jnz	loc_1B952
		push	ds
		push	offset aCreatingPcxHea ; "Creating PCX header."
		call	@no_heap$qnuc	; no_heap(uchar	*)
; ---------------------------------------------------------------------------
		add	sp, 4

loc_1B952::				; CODE XREF: vga_display::show_pcx(uchar *,uchar,uint,int)+8Aj
		push	80h ; ''       ; n
		push	word ptr [bp+src+2]
		push	word ptr [bp+src] ; src
		push	word ptr [bp+dest+2]
		push	word ptr [bp+dest] ; dest
		call	_memcpy
		assume es:nothing
		add	sp, 0Ah
		cmp	[bp+arg_C], 0FFFFh
		jnz	loc_1B980
		les	bx, [bp+dest]
		mov	ax, es:[bx+0Ah]
		les	bx, [bp+dest]
		sub	ax, es:[bx+6]
		inc	ax
		jmp	loc_1B983
; ---------------------------------------------------------------------------

loc_1B980::				; CODE XREF: vga_display::show_pcx(uchar *,uchar,uint,int)+B3j
		mov	ax, [bp+arg_C]

loc_1B983::				; CODE XREF: vga_display::show_pcx(uchar *,uchar,uint,int)+C4j
		mov	[bp+var_E], ax
		les	bx, [bp+dest]
		mov	ax, es:[bx+42h]
		mov	[bp+var_10], ax
		mov	[bp+var_12], 80h ; ''
		mov	ax, [bp+arg_A]
		mov	[bp+var_8], ax
		jmp	loc_1BA21
; ---------------------------------------------------------------------------

loc_1B99E::				; CODE XREF: vga_display::show_pcx(uchar *,uchar,uint,int)+172j
		mov	[bp+var_A], 0
		jmp	loc_1BA16
; ---------------------------------------------------------------------------

loc_1B9A5::				; CODE XREF: vga_display::show_pcx(uchar *,uchar,uint,int)+162j
		les	bx, [bp+src]
		assume es:nothing
		add	bx, [bp+var_12]
		mov	al, es:[bx]
		mov	[bp+var_1], al
		inc	[bp+var_12]
		mov	al, [bp+var_1]
		mov	ah, 0
		and	ax, 0C0h
		cmp	ax, 0C0h ; 'À'
		jnz	loc_1B9FB
		mov	al, [bp+var_1]
		mov	ah, 0
		and	ax, 3Fh
		mov	[bp+var_C], ax
		push	0
		push	[bp+var_C]
		mov	ax, [bp+var_12]
		inc	[bp+var_12]
		les	bx, [bp+src]
		add	bx, ax
		mov	al, es:[bx]
		push	ax
		push	[bp+var_8]
		push	[bp+var_A]
		push	[bp+arg_2]
		push	[bp+arg_0]
		push	cs
		call	near ptr @vga_display@draw_span$qiiuciui ; vga_display::draw_span(int,int,uchar,int,uint)
		assume es:nothing
		add	sp, 0Eh
		mov	ax, [bp+var_C]
		add	[bp+var_A], ax
		jmp	loc_1BA16
; ---------------------------------------------------------------------------
		assume es:nothing

loc_1B9FB::				; CODE XREF: vga_display::show_pcx(uchar *,uchar,uint,int)+105j
		mov	al, [bp+var_1]
		push	ax
		push	[bp+var_8]
		mov	ax, [bp+var_A]
		inc	[bp+var_A]
		push	ax
		push	[bp+arg_2]
		push	[bp+arg_0]
		push	cs
		call	near ptr @vga_display@set_pix$qiiuc ; vga_display::set_pix(int,int,uchar)
		assume es:nothing
		add	sp, 0Ah
		assume es:nothing

loc_1BA16::				; CODE XREF: vga_display::show_pcx(uchar *,uchar,uint,int)+E9j
					; vga_display::show_pcx(uchar *,uchar,uint,int)+13Fj
		mov	ax, [bp+var_A]
		cmp	ax, [bp+var_10]
		jb	loc_1B9A5
		assume es:nothing
		inc	[bp+var_8]
		assume es:nothing

loc_1BA21::				; CODE XREF: vga_display::show_pcx(uchar *,uchar,uint,int)+E1j
		mov	ax, [bp+arg_A]
		add	ax, [bp+var_E]
		cmp	ax, [bp+var_8]
		jbe	loc_1BA2F
		jmp	loc_1B99E
; ---------------------------------------------------------------------------
		assume es:nothing

loc_1BA2F::				; CODE XREF: vga_display::show_pcx(uchar *,uchar,uint,int)+170j
		inc	[bp+var_12]
		mov	[bp+var_8], 0
		jmp	loc_1BA54
; ---------------------------------------------------------------------------

loc_1BA39::				; CODE XREF: vga_display::show_pcx(uchar *,uchar,uint,int)+19Fj
		les	bx, [bp+src]
		assume es:nothing
		add	bx, [bp+var_12]
		mov	al, es:[bx]
		mov	ah, 0
		sar	ax, 2
		mov	bx, [bp+var_8]
		mov	_palette[bx], al
		inc	[bp+var_12]
		inc	[bp+var_8]
		assume es:nothing

loc_1BA54::				; CODE XREF: vga_display::show_pcx(uchar *,uchar,uint,int)+17Dj
		cmp	[bp+var_8], 300h
		jb	loc_1BA39
		assume es:nothing
		cmp	[bp+arg_8], 0
		jz	loc_1BA6E
		push	[bp+arg_2]
		push	[bp+arg_0]
		push	cs
		call	near ptr @vga_display@set_palette$qv ; vga_display::set_palette(void)
		add	sp, 4

loc_1BA6E::				; CODE XREF: vga_display::show_pcx(uchar *,uchar,uint,int)+1A5j
		push	word ptr [bp+dest+2]
		push	word ptr [bp+dest] ; block
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4
		push	word ptr [bp+src+2]
		push	word ptr [bp+src] ; block
		call	@$bdele$qnv	; operator delete(void *)
		assume es:nothing

loc_1BA87::				; CODE XREF: vga_display::show_pcx(uchar *,uchar,uint,int)+1DDj
		add	sp, 4
		jmp	locret_1BAAB
; ---------------------------------------------------------------------------

loc_1BA8C::				; CODE XREF: vga_display::show_pcx(uchar *,uchar,uint,int)+6Ej
		push	word ptr [bp+path+2]
		push	word ptr [bp+path]
		call	@read_error$qnuc ; read_error(uchar *)
; ---------------------------------------------------------------------------
		jmp	loc_1BA87
; ---------------------------------------------------------------------------

loc_1BA99::				; CODE XREF: vga_display::show_pcx(uchar *,uchar,uint,int)+2Ej
		push	word ptr [bp+path+2]
		push	word ptr [bp+path]
		push	ds
		push	offset aCouldnTOpen ; "Couldn't open"
		call	@terminate$qnuct1 ; terminate(uchar *,uchar *)
; ---------------------------------------------------------------------------
		add	sp, 8

locret_1BAAB::				; CODE XREF: vga_display::show_pcx(uchar *,uchar,uint,int)+1D0j
		leave
		retf
@vga_display@show_pcx$qnucucuii	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; vga_display::dump_pcx(void)
@vga_display@dump_pcx$qv proc far	; CODE XREF: check_user(void)+406P

block		= dword	ptr -14h
var_10		= word ptr -10h
var_E		= word ptr -0Eh
buf		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
handle		= word ptr -4
var_1		= byte ptr -1
arg_0		= word ptr  6
arg_2		= word ptr  8

		enter	14h, 0
		push	180h
		push	8304h		; access
		push	ds
		push	offset aRiptide_pcx ; "riptide.pcx"
		call	_open
		add	sp, 8
		mov	[bp+handle], ax
		cmp	ax, 0FFFFh
		jnz	loc_1BACE
		jmp	loc_1BD0E
; ---------------------------------------------------------------------------

loc_1BACE::				; CODE XREF: vga_display::dump_pcx(void)+1Cj
		push	80h ; ''       ; unsigned int
		call	@$bnew$qui	; operator new(uint)
		pop	cx
		mov	word ptr [bp+block+2], dx
		mov	word ptr [bp+block], ax
		cmp	[bp+block], 0
		jnz	loc_1BAF0
		push	ds
		push	offset aCreatingPcxH_0 ; "Creating PCX header."
		call	@no_heap$qnuc	; no_heap(uchar	*)
; ---------------------------------------------------------------------------
		add	sp, 4

loc_1BAF0::				; CODE XREF: vga_display::dump_pcx(void)+35j
		les	bx, [bp+block]
		assume es:nothing
		mov	byte ptr es:[bx], 0Ah
		les	bx, [bp+block]
		mov	byte ptr es:[bx+1], 5
		les	bx, [bp+block]
		mov	byte ptr es:[bx+2], 1
		les	bx, [bp+block]
		mov	byte ptr es:[bx+3], 8
		les	bx, [bp+block]
		mov	word ptr es:[bx+4], 0
		les	bx, [bp+block]
		mov	word ptr es:[bx+6], 0
		les	bx, [bp+block]
		mov	word ptr es:[bx+8], 13Fh
		les	bx, [bp+block]

loc_1BB2D::
		mov	word ptr es:[bx+0Ah], 0C7h ; 'Ç'
		les	bx, [bp+block]
		mov	word ptr es:[bx+0Ch], 140h
		les	bx, [bp+block]
		mov	word ptr es:[bx+0Eh], 0C8h ; 'È'
		les	bx, [bp+block]
		mov	byte ptr es:[bx+41h], 1
		les	bx, [bp+block]
		mov	word ptr es:[bx+44h], 0
		les	bx, [bp+block]
		mov	word ptr es:[bx+42h], 140h
		push	80h ; ''       ; len
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; buf
		push	[bp+handle]	; handle
		call	_write
		add	sp, 8
		cmp	ax, 80h	; ''
		jz	loc_1BB7B
		jmp	loc_1BD0E
; ---------------------------------------------------------------------------

loc_1BB7B::				; CODE XREF: vga_display::dump_pcx(void)+C9j
		les	bx, [bp+block]
		mov	ax, es:[bx+0Ah]
		les	bx, [bp+block]
		sub	ax, es:[bx+6]
		inc	ax
		mov	[bp+var_E], ax
		les	bx, [bp+block]
		mov	ax, es:[bx+42h]
		mov	[bp+var_10], ax
		mov	[bp+var_6], 0
		mov	ax, [bp+var_6]
		mov	[bp+var_8], ax
		jmp	loc_1BC93
; ---------------------------------------------------------------------------

loc_1BBA5::				; CODE XREF: vga_display::dump_pcx(void)+1F1j
		mov	[bp+var_A], 0
		jmp	loc_1BC85
; ---------------------------------------------------------------------------

loc_1BBAD::				; CODE XREF: vga_display::dump_pcx(void)+1E0j
		mov	[bp+buf], 0
		push	[bp+var_8]
		push	[bp+var_A]
		push	[bp+arg_2]
		push	[bp+arg_0]
		push	cs
		call	near ptr @vga_display@read_pix$qii ; vga_display::read_pix(int,int)
		add	sp, 8
		mov	[bp+var_1], al
		jmp	loc_1BBCD
; ---------------------------------------------------------------------------

loc_1BBCA::				; CODE XREF: vga_display::dump_pcx(void)+14Bj
		inc	[bp+buf]

loc_1BBCD::				; CODE XREF: vga_display::dump_pcx(void)+11Bj
		push	[bp+var_8]
		mov	ax, [bp+var_A]
		add	ax, [bp+buf]
		push	ax
		push	[bp+arg_2]
		push	[bp+arg_0]
		push	cs
		call	near ptr @vga_display@read_pix$qii ; vga_display::read_pix(int,int)
		add	sp, 8
		cmp	al, [bp+var_1]
		jnz	loc_1BBFA
		cmp	[bp+buf], 3Fh ;	'?'
		jnb	loc_1BBFA
		mov	ax, [bp+var_A]
		add	ax, [bp+buf]
		cmp	ax, [bp+var_10]
		jb	loc_1BBCA

loc_1BBFA::				; CODE XREF: vga_display::dump_pcx(void)+13Aj
					; vga_display::dump_pcx(void)+140j
		cmp	[bp+buf], 0
		jbe	loc_1BC41
		mov	ax, [bp+buf]
		add	[bp+var_A], ax
		or	[bp+buf], 0C0h
		push	1		; len
		push	ss
		lea	ax, [bp+buf]
		push	ax		; buf
		push	[bp+handle]	; handle
		call	_write
		add	sp, 8
		cmp	ax, 1
		jz	loc_1BC25
		jmp	loc_1BD0E
; ---------------------------------------------------------------------------

loc_1BC25::				; CODE XREF: vga_display::dump_pcx(void)+173j
		push	1		; len
		push	ss
		lea	ax, [bp+var_1]
		push	ax		; buf
		push	[bp+handle]	; handle
		call	_write
		add	sp, 8
		cmp	ax, 1
		jz	loc_1BC3F
		jmp	loc_1BD0E
; ---------------------------------------------------------------------------

loc_1BC3F::				; CODE XREF: vga_display::dump_pcx(void)+18Dj
		jmp	loc_1BC85
; ---------------------------------------------------------------------------

loc_1BC41::				; CODE XREF: vga_display::dump_pcx(void)+151j
		mov	al, [bp+var_1]
		mov	ah, 0
		and	ax, 0C0h
		cmp	ax, 0C0h ; 'À'
		jnz	loc_1BC68
		push	1		; len
		push	0
		push	0C1h ; 'Á'      ; buf
		push	[bp+handle]	; handle
		call	_write
		add	sp, 8
		cmp	ax, 1
		jz	loc_1BC68
		jmp	loc_1BD0E
; ---------------------------------------------------------------------------

loc_1BC68::				; CODE XREF: vga_display::dump_pcx(void)+19Fj
					; vga_display::dump_pcx(void)+1B6j
		push	1		; len
		push	ss
		lea	ax, [bp+var_1]
		push	ax		; buf
		push	[bp+handle]	; handle
		call	_write
		add	sp, 8
		cmp	ax, 1
		jz	loc_1BC82
		jmp	loc_1BD0E
; ---------------------------------------------------------------------------

loc_1BC82::				; CODE XREF: vga_display::dump_pcx(void)+1D0j
		inc	[bp+var_A]

loc_1BC85::				; CODE XREF: vga_display::dump_pcx(void)+FDj
					; vga_display::dump_pcx(void):loc_1BC3Fj
		mov	ax, [bp+var_A]
		cmp	ax, [bp+var_10]
		jnb	loc_1BC90
		jmp	loc_1BBAD
; ---------------------------------------------------------------------------

loc_1BC90::				; CODE XREF: vga_display::dump_pcx(void)+1DEj
		inc	[bp+var_8]

loc_1BC93::				; CODE XREF: vga_display::dump_pcx(void)+F5j
		mov	ax, [bp+var_6]
		add	ax, [bp+var_E]
		cmp	ax, [bp+var_8]
		jbe	loc_1BCA1
		jmp	loc_1BBA5
; ---------------------------------------------------------------------------

loc_1BCA1::				; CODE XREF: vga_display::dump_pcx(void)+1EFj
		mov	[bp+var_1], 0Ch
		push	1		; len
		push	ss
		lea	ax, [bp+var_1]
		push	ax		; buf
		push	[bp+handle]	; handle
		call	_write
		add	sp, 8
		cmp	ax, 0FFFFh
		jnz	loc_1BCBE
		jmp	loc_1BD0E
; ---------------------------------------------------------------------------

loc_1BCBE::				; CODE XREF: vga_display::dump_pcx(void)+20Dj
		mov	[bp+var_8], 0
		jmp	loc_1BCEE
; ---------------------------------------------------------------------------

loc_1BCC5::				; CODE XREF: vga_display::dump_pcx(void)+246j
		mov	bx, [bp+var_8]
		mov	al, _palette[bx]
		shl	al, 2
		mov	[bp+var_1], al
		push	1		; len
		push	ss
		lea	ax, [bp+var_1]
		push	ax		; buf
		push	[bp+handle]	; handle
		call	_write
		add	sp, 8
		cmp	ax, 0FFFFh
		jnz	loc_1BCEB
		jmp	loc_1BD0E
; ---------------------------------------------------------------------------

loc_1BCEB::				; CODE XREF: vga_display::dump_pcx(void)+23Aj
		inc	[bp+var_8]

loc_1BCEE::				; CODE XREF: vga_display::dump_pcx(void)+216j
		cmp	[bp+var_8], 300h
		jb	loc_1BCC5
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4
		push	[bp+handle]	; handle
		call	_close
		pop	cx
		jmp	locret_1BD3E
; ---------------------------------------------------------------------------

loc_1BD0E::				; CODE XREF: vga_display::dump_pcx(void)+1Ej
					; vga_display::dump_pcx(void)+CBj ...
		push	[bp+handle]	; handle
		call	_close
		pop	cx
		push	ds
		push	offset aRiptide_pcx_0 ;	"riptide.pcx"
		call	@write_error$qnuc ; write_error(uchar *)
; ---------------------------------------------------------------------------
		add	sp, 4
		jmp	locret_1BD3E
; ---------------------------------------------------------------------------
		push	[bp+handle]	; handle
		call	_close
		pop	cx
		push	0
		push	0
		push	ds
		push	offset aCouldnTOpenRip ; "Couldn't open riptide.pcx"
		call	@terminate$qnuct1 ; terminate(uchar *,uchar *)
; ---------------------------------------------------------------------------
		add	sp, 8

locret_1BD3E::				; CODE XREF: vga_display::dump_pcx(void)+25Fj
					; vga_display::dump_pcx(void)+276j
		leave
		retf
@vga_display@dump_pcx$qv endp

; ---------------------------------------------------------------------------

; vga_display::load_pcx(unsigned char *, unsigned int *)
@vga_display@load_pcx$qnucnui:
		enter	36h, 0
		push	0
		push	ss
		lea	ax, [bp-36h]
		push	ax
		push	ds
		push	offset a_pcx	; "*.pcx"
		call	_findfirst
		add	sp, 0Ah
		jmp	loc_1BD85
; ---------------------------------------------------------------------------

loc_1BD59::				; CODE XREF: seg1891:129Cj
		push	ss
		lea	ax, [bp-18h]
		push	ax
		push	word ptr [bp+0Ch]
		push	word ptr [bp+0Ah]
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jnz	loc_1BD78
		mov	ax, [bp-1Ch]
		mov	[bp-6],	ax
		jmp	loc_1BD8E
; ---------------------------------------------------------------------------

loc_1BD78::				; CODE XREF: seg1891:127Ej
		push	ss
		lea	ax, [bp-36h]
		push	ax
		call	_findnext
		add	sp, 4

loc_1BD85::				; CODE XREF: seg1891:1267j
		mov	[bp-4],	ax
		cmp	word ptr [bp-4], 0
		jz	loc_1BD59

loc_1BD8E::				; CODE XREF: seg1891:1286j
		cmp	word ptr [bp-4], 0
		jz	loc_1BD9B

loc_1BD94::				; CODE XREF: seg1891:1334j
		xor	dx, dx
		xor	ax, ax

loc_1BD98::				; CODE XREF: seg1891:131Bj
		jmp	locret_1BE27
; ---------------------------------------------------------------------------

loc_1BD9B::				; CODE XREF: seg1891:12A2j
		push	word ptr [bp-6]
		call	@$bnew$qui	; operator new(uint)
		pop	cx
		mov	[bp-8],	dx
		mov	[bp-0Ah], ax
		cmp	dword ptr [bp-0Ah], 0
		jnz	loc_1BDBD
		push	ds
		push	offset aLoadingPcxFi_0 ; "Loading pcx file."
		call	@no_heap$qnuc	; no_heap(uchar	*)
; ---------------------------------------------------------------------------
		add	sp, 4

loc_1BDBD::				; CODE XREF: seg1891:12BFj
		push	8001h
		push	word ptr [bp+0Ch]
		push	word ptr [bp+0Ah]
		call	_open
		add	sp, 6
		mov	[bp-2],	ax
		cmp	ax, 0FFFFh
		jnz	loc_1BDD8
		jmp	loc_1BE0D
; ---------------------------------------------------------------------------

loc_1BDD8::				; CODE XREF: seg1891:12E4j
		push	word ptr [bp-6]
		push	word ptr [bp-8]
		push	word ptr [bp-0Ah]
		push	word ptr [bp-2]
		call	_read
		add	sp, 8
		cmp	ax, [bp-6]
		jz	loc_1BDF3
		jmp	loc_1BE0D
; ---------------------------------------------------------------------------

loc_1BDF3::				; CODE XREF: seg1891:12FFj
		push	word ptr [bp-2]
		call	_close
		pop	cx
		les	bx, [bp+0Eh]
		mov	ax, [bp-6]
		mov	es:[bx], ax
		mov	dx, [bp-8]
		mov	ax, [bp-0Ah]
		jmp	loc_1BD98
; ---------------------------------------------------------------------------

loc_1BE0D::				; CODE XREF: seg1891:12E6j
					; seg1891:1301j
		push	word ptr [bp-2]
		call	_close
		pop	cx
		push	word ptr [bp+0Ch]
		push	word ptr [bp+0Ah]
		call	@read_error$qnuc ; read_error(uchar *)
; ---------------------------------------------------------------------------
		add	sp, 4
		jmp	loc_1BD94
; ---------------------------------------------------------------------------

locret_1BE27::				; CODE XREF: seg1891:loc_1BD98j
		leave
		retf
; ---------------------------------------------------------------------------

; vga_display::explode_pcx(unsigned char *, unsigned int, int)
@vga_display@explode_pcx$qnucuii:
		enter	1Ah, 0
		mov	word ptr [bp-0Ah], 0
		jmp	loc_1BE51
; ---------------------------------------------------------------------------

loc_1BE34::				; CODE XREF: seg1891:1366j
		les	bx, [bp+0Ah]
		add	bx, [bp+0Eh]
		add	bx, [bp-0Ah]
		mov	al, es:[bx-300h]
		mov	ah, 0
		sar	ax, 2
		mov	bx, [bp-0Ah]
		mov	_palette[bx], al
		inc	word ptr [bp-0Ah]

loc_1BE51::				; CODE XREF: seg1891:1342j
		cmp	word ptr [bp-0Ah], 300h
		jb	loc_1BE34
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr @vga_display@set_palette$qv ; vga_display::set_palette(void)
		add	sp, 4
		push	80h ; ''
		call	@$bnew$qui	; operator new(uint)
		pop	cx
		mov	[bp-2],	dx
		mov	[bp-4],	ax
		push	80h ; ''
		push	word ptr [bp+0Ch]
		push	word ptr [bp+0Ah]
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	_memcpy
		add	sp, 0Ah
		les	bx, [bp-4]
		mov	ax, es:[bx+8]
		les	bx, [bp-4]
		sub	ax, es:[bx+4]
		inc	ax
		mov	[bp-6],	ax
		les	bx, [bp-4]
		mov	ax, es:[bx+42h]
		mov	[bp-8],	ax
		mov	ax, [bp-6]
		imul	word ptr [bp+10h]
		push	ax
		call	@$bnew$qui	; operator new(uint)
		pop	cx
		mov	[bp-12h], dx
		mov	[bp-14h], ax
		cmp	dword ptr [bp-14h], 0
		jnz	loc_1BEC8
		xor	dx, dx
		xor	ax, ax

loc_1BEC5::				; CODE XREF: seg1891:149Aj
		jmp	locret_1BF8D
; ---------------------------------------------------------------------------

loc_1BEC8::				; CODE XREF: seg1891:13CFj
		mov	ax, [bp+0Ch]
		mov	dx, [bp+0Ah]
		add	dx, 80h	; ''
		mov	[bp-16h], ax
		mov	[bp-18h], dx
		mov	word ptr [bp-10h], 0
		mov	word ptr [bp-0Ah], 0
		jmp	loc_1BF6B
; ---------------------------------------------------------------------------

loc_1BEE5::				; CODE XREF: seg1891:1483j
		mov	word ptr [bp-0Ch], 0

loc_1BEEA::				; CODE XREF: seg1891:1476j
		les	bx, [bp-18h]
		add	bx, [bp-10h]
		mov	al, es:[bx]
		and	al, 0FFh
		mov	[bp-19h], al
		inc	word ptr [bp-10h]
		mov	al, [bp-19h]
		mov	ah, 0
		and	ax, 0C0h
		cmp	ax, 0C0h ; 'À'
		jnz	loc_1BF48
		mov	al, [bp-19h]
		mov	ah, 0
		and	ax, 3Fh
		mov	[bp-0Eh], ax
		les	bx, [bp-18h]
		add	bx, [bp-10h]
		mov	al, es:[bx]
		mov	[bp-19h], al
		inc	word ptr [bp-10h]
		jmp	loc_1BF3C
; ---------------------------------------------------------------------------

loc_1BF24::				; CODE XREF: seg1891:1454j
		mov	ax, [bp-0Ah]
		imul	ax, 140h
		add	ax, [bp-0Ch]
		les	bx, [bp-14h]
		add	bx, ax
		mov	al, [bp-19h]
		mov	es:[bx], al
		inc	word ptr [bp-0Ch]

loc_1BF3C::				; CODE XREF: seg1891:1432j
		mov	ax, [bp-0Eh]
		dec	word ptr [bp-0Eh]
		or	ax, ax
		jnz	loc_1BF24
		jmp	loc_1BF60
; ---------------------------------------------------------------------------

loc_1BF48::				; CODE XREF: seg1891:1416j
		mov	ax, [bp-0Ah]
		imul	ax, 140h
		add	ax, [bp-0Ch]
		les	bx, [bp-14h]
		add	bx, ax
		mov	al, [bp-19h]
		mov	es:[bx], al
		inc	word ptr [bp-0Ch]

loc_1BF60::				; CODE XREF: seg1891:1456j
		mov	ax, [bp-0Ch]
		cmp	ax, [bp-8]
		jb	loc_1BEEA
		inc	word ptr [bp-0Ah]

loc_1BF6B::				; CODE XREF: seg1891:13F2j
		mov	ax, [bp-0Ah]
		cmp	ax, [bp+10h]
		jnb	loc_1BF76
		jmp	loc_1BEE5
; ---------------------------------------------------------------------------

loc_1BF76::				; CODE XREF: seg1891:1481j
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	@$bdele$qnv	; operator delete(void *)
		add	sp, 4
		mov	dx, [bp-12h]
		mov	ax, [bp-14h]
		jmp	loc_1BEC5
; ---------------------------------------------------------------------------

locret_1BF8D::				; CODE XREF: seg1891:loc_1BEC5j
		leave
		retf
; ---------------------------------------------------------------------------

; vga_display::import_palette(unsigned char *, unsigned	int)
@vga_display@import_palette$qnucui:
		enter	6, 0
		mov	word ptr [bp-2], 0
		mov	ax, [bp+0Eh]
		sub	ax, 300h
		mov	dx, [bp+0Ch]
		mov	bx, [bp+0Ah]
		add	bx, ax
		mov	[bp-4],	dx
		mov	[bp-6],	bx
		jmp	loc_1BFC6
; ---------------------------------------------------------------------------

loc_1BFAE::				; CODE XREF: seg1891:14DBj
		les	bx, [bp-6]
		mov	al, es:[bx]
		mov	ah, 0
		sar	ax, 2
		mov	bx, [bp-2]
		mov	_palette[bx], al
		inc	word ptr [bp-6]
		inc	word ptr [bp-2]

loc_1BFC6::				; CODE XREF: seg1891:14BCj
		cmp	word ptr [bp-2], 300h
		jnz	loc_1BFAE
		push	word ptr [bp+8]

loc_1BFD0::
		push	word ptr [bp+6]
		push	cs
		call	near ptr @vga_display@set_palette$qv ; vga_display::set_palette(void)
		add	sp, 4
		leave
		retf
seg1891		ends

; ===========================================================================

; Segment type:	Pure code
seg19df		segment	byte public 'CODE' use16
		assume cs:seg19df
		;org 0Ch
		assume es:nothing, ss:nothing, ds:seg2608, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; init_scores_array(void)
@init_scores_array$qv proc far		; CODE XREF: init_game(void)+1E0P

stream		= dword	ptr -4

		enter	4, 0
		push	ds
		push	offset arb	; "rb"
		push	ds
		push	offset aHigh_scr ; "high.scr"
		call	_fopen
		assume es:seg2608
		add	sp, 8
		mov	word ptr [bp+stream+2],	dx
		mov	word ptr [bp+stream], ax
		or	ax, dx
		jnz	loc_1C016

loc_1BFFA::
		cmp	[bp+stream], 0
		jz	loc_1C00F
		push	word ptr [bp+stream+2]
		push	word ptr [bp+stream] ; stream
		call	_fclose
		add	sp, 4

loc_1C00F::				; CODE XREF: init_scores_array(void)+23j
		nop
		push	cs
		call	near ptr @init_scores_file$qv ;	init_scores_file(void)
		jmp	loc_1C029
; ---------------------------------------------------------------------------

loc_1C016::				; CODE XREF: init_scores_array(void)+1Cj
		push	word ptr [bp+stream+2]
		push	word ptr [bp+stream] ; stream
		call	_fclose
		add	sp, 4
		nop
		push	cs
		call	near ptr @load_scores_in$qv ; load_scores_in(void)

loc_1C029::				; CODE XREF: init_scores_array(void)+38j
		mov	eax, dword_2D300
		mov	_high_score, eax
		leave
		retf
@init_scores_array$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; init_scores_file(void)
@init_scores_file$qv proc far		; CODE XREF: show_high_scores(uchar)+346P
					; init_scores_array(void)+35p

var_1		= byte ptr -1

		enter	2, 0
		mov	[bp+var_1], 0
		jmp	loc_1C07B
; ---------------------------------------------------------------------------

loc_1C03D::				; CODE XREF: init_scores_file(void)+4Cj
		push	ds
		push	offset a________ ; "........"
		mov	al, [bp+var_1]
		mov	ah, 0
		shl	ax, 4
		add	ax, offset _game_highs
		push	ds
		push	ax		; dest

loc_1C04E::
		call	_strcpy
		add	sp, 8
		mov	al, [bp+var_1]
		mov	ah, 0
		shl	ax, 4
		mov	bx, ax
		mov	dword_2D300[bx], 0
		mov	al, [bp+var_1]
		mov	ah, 0
		shl	ax, 4
		mov	bx, ax
		mov	byte_2D304[bx],	0
		inc	[bp+var_1]

loc_1C07B::				; CODE XREF: init_scores_file(void)+8j
		cmp	[bp+var_1], 0Ah
		jb	loc_1C03D
		nop
		push	cs
		call	near ptr @save_all_scores$qv ; save_all_scores(void)
		leave
		retf
@init_scores_file$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; save_all_scores(void)
@save_all_scores$qv proc far		; CODE XREF: init_scores_file(void)+50p
					; save_new_score(ulong,uchar *,uchar)+86p

len		= word ptr -4
handle		= word ptr -2

		enter	4, 0
		push	180h
		push	8104h		; access
		push	ds
		push	offset aHigh_scr ; "high.scr"
		call	_open
		add	sp, 8
		mov	[bp+handle], ax
		cmp	ax, 0FFFFh
		jnz	loc_1C0B4
		push	ds
		push	offset aError_	; "Error:"
		call	_perror
		add	sp, 4
		jmp	locret_1C0D4
; ---------------------------------------------------------------------------

loc_1C0B4::				; CODE XREF: save_all_scores(void)+1Cj
		mov	[bp+len], 0A0h ; ' '
		push	[bp+len]	; len
		push	ds
		push	offset _game_highs ; buf
		push	[bp+handle]	; handle
		call	_write
		add	sp, 8
		push	[bp+handle]	; handle
		call	_close
		pop	cx

locret_1C0D4::				; CODE XREF: save_all_scores(void)+2Aj
		leave
		retf
@save_all_scores$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; load_scores_in(void)
@load_scores_in$qv proc	far		; CODE XREF: init_game(void)+1E5P
					; init_scores_array(void)+4Ap

len		= word ptr -4
handle		= word ptr -2

		enter	4, 0
		push	8001h		; access
		push	ds
		push	offset aHigh_scr ; "high.scr"
		call	_open
		add	sp, 6
		mov	[bp+handle], ax
		cmp	ax, 0FFFFh
		jnz	loc_1C0FF
		push	ds
		push	offset aError_	; "Error:"
		call	_perror
		add	sp, 4
		jmp	loc_1C116
; ---------------------------------------------------------------------------

loc_1C0FF::				; CODE XREF: load_scores_in(void)+19j
		mov	[bp+len], 0A0h ; ' '
		push	[bp+len]	; len
		push	ds
		push	offset _game_highs ; buf
		push	[bp+handle]	; handle
		call	_read
		add	sp, 8

loc_1C116::				; CODE XREF: load_scores_in(void)+27j
		push	[bp+handle]	; handle
		call	_close
		pop	cx
		leave
		retf
@load_scores_in$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far save_new_score(__int32, char *src, char)
@save_new_score$qulnucuc proc far	; CODE XREF: end_game(void)+144P

var_3		= byte ptr -3
var_2		= word ptr -2
arg_0		= dword	ptr  6
src		= dword	ptr  0Ah
arg_8		= byte ptr  0Eh

		enter	4, 0
		push	dword ptr [bp+arg_0]
		nop
		push	cs
		call	near ptr @is_record$qul	; is_record(ulong)
		add	sp, 4
		mov	[bp+var_3], al
		mov	[bp+var_2], 9
		jmp	loc_1C15C
; ---------------------------------------------------------------------------

loc_1C13B::				; CODE XREF: save_new_score(ulong,uchar	*,uchar)+44j
		mov	ax, [bp+var_2]
		shl	ax, 4
		add	ax, offset _game_highs
		push	ds
		push	ax
		mov	ax, [bp+var_2]
		shl	ax, 4
		add	ax, offset unk_2D2E6
		push	ds
		push	ax
		mov	cx, 10h
		call	scopy@
		dec	[bp+var_2]

loc_1C15C::				; CODE XREF: save_new_score(ulong,uchar	*,uchar)+18j
		mov	al, [bp+var_3]
		mov	ah, 0
		dec	ax
		cmp	ax, [bp+var_2]
		jl	loc_1C13B
		push	word ptr [bp+src+2]
		push	word ptr [bp+src] ; src
		mov	al, [bp+var_3]
		mov	ah, 0
		shl	ax, 4
		add	ax, offset unk_2D2E6
		push	ds
		push	ax		; dest
		call	_strcpy
		add	sp, 8
		mov	al, [bp+var_3]
		mov	ah, 0
		shl	ax, 4
		mov	edx, [bp+arg_0]
		mov	bx, ax
		mov	dword_2D2F0[bx], edx
		mov	al, [bp+var_3]
		mov	ah, 0
		shl	ax, 4
		mov	dl, [bp+arg_8]
		mov	bx, ax
		mov	byte ptr _download_pos[bx], dl
		push	cs
		call	near ptr @save_all_scores$qv ; save_all_scores(void)
		leave
		retf
@save_new_score$qulnucuc endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; is_record(unsigned long)
@is_record$qul	proc far		; CODE XREF: end_game(void)+E2P
					; save_new_score(ulong,uchar *,uchar)+Ap

var_1		= byte ptr -1
arg_0		= dword	ptr  6

		enter	2, 0
		mov	[bp+var_1], 0
		jmp	loc_1C1D5
; ---------------------------------------------------------------------------

loc_1C1B6::				; CODE XREF: is_record(ulong)+2Dj
		mov	al, [bp+var_1]
		mov	ah, 0
		shl	ax, 4
		mov	bx, ax
		mov	eax, dword_2D300[bx]
		cmp	eax, [bp+arg_0]
		jnb	loc_1C1D2
		mov	al, [bp+var_1]
		inc	al

loc_1C1D0::				; CODE XREF: is_record(ulong)+31j
		jmp	locret_1C1DF
; ---------------------------------------------------------------------------

loc_1C1D2::				; CODE XREF: is_record(ulong)+1Dj
		inc	[bp+var_1]

loc_1C1D5::				; CODE XREF: is_record(ulong)+8j
		cmp	[bp+var_1], 0Ah
		jb	loc_1C1B6
		mov	al, 0
		jmp	loc_1C1D0
; ---------------------------------------------------------------------------

locret_1C1DF::				; CODE XREF: is_record(ulong):loc_1C1D0j
		leave
		retf
@is_record$qul	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; return_element(unsigned char,	unsigned char)
@return_element$qucuc proc far		; CODE XREF: show_high_scores(uchar)+FEP
					; show_high_scores(uchar)+143P

string		= byte ptr -14h
arg_0		= byte ptr  6
arg_2		= byte ptr  8

		enter	14h, 0
		lea	ax, [bp+string]
		push	ss
		push	ax
		push	ds
		push	offset unk_2A7EC
		mov	cx, 14h
		call	scopy@
		mov	al, [bp+arg_2]
		mov	ah, 0
		cmp	ax, 1
		jz	loc_1C20C
		cmp	ax, 2
		jz	loc_1C22C
		cmp	ax, 3
		jz	loc_1C23B
		jmp	loc_1C257
; ---------------------------------------------------------------------------

loc_1C20C::				; CODE XREF: return_element(uchar,uchar)+1Dj
		push	0Ah		; radix
		push	ss
		lea	ax, [bp+string]
		push	ax		; string
		mov	al, [bp+arg_0]
		mov	ah, 0
		shl	ax, 4
		mov	bx, ax
		push	dword ptr dword_2D300[bx] ;	value
		call	_ultoa
		add	sp, 0Ah

loc_1C22A::				; CODE XREF: return_element(uchar,uchar)+58j
					; return_element(uchar,uchar)+70j ...
		jmp	locret_1C25D
; ---------------------------------------------------------------------------

loc_1C22C::				; CODE XREF: return_element(uchar,uchar)+22j
		mov	al, [bp+arg_0]
		mov	ah, 0
		shl	ax, 4
		mov	dx, ds
		add	ax, offset _game_highs
		jmp	loc_1C22A
; ---------------------------------------------------------------------------

loc_1C23B::				; CODE XREF: return_element(uchar,uchar)+27j
		mov	al, [bp+arg_0]
		mov	ah, 0
		shl	ax, 4
		mov	bx, ax

loc_1C245::
		cmp	byte_2D304[bx],	0
		jz	loc_1C255
		mov	dx, ds

loc_1C24E::				; DATA XREF: seg2608:_gr_old_int9o
		mov	ax, offset a1_0	; "1"
		jmp	loc_1C22A
; ---------------------------------------------------------------------------
		jmp	loc_1C257
; ---------------------------------------------------------------------------

loc_1C255::				; CODE XREF: return_element(uchar,uchar)+69j
		jmp	$+2
; ---------------------------------------------------------------------------

loc_1C257::				; CODE XREF: return_element(uchar,uchar)+29j
					; return_element(uchar,uchar)+72j ...
		xor	dx, dx
		xor	ax, ax
		jmp	loc_1C22A
; ---------------------------------------------------------------------------

locret_1C25D::				; CODE XREF: return_element(uchar,uchar):loc_1C22Aj
		leave
		retf
@return_element$qucuc endp

seg19df		ends

; ===========================================================================

; Segment type:	Pure code
seg1a07		segment	byte public 'CODE' use16
		assume cs:seg1a07
		;org 0Fh
		assume es:seg2608, ss:nothing, ds:seg2608, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_set_exit_routine proc far		; CODE XREF: init_game(void)+360P

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		mov	eax, [bp+arg_0]
		mov	_exit_routine, eax
		pop	bp
		retf
_set_exit_routine endp

; ---------------------------------------------------------------------------

_gr_inkey:
		enter	0Ah, 0
		mov	word ptr [bp-0Ah], 0

loc_1C275::
		mov	dword ptr [bp-4], 40001Ah
		mov	dword ptr [bp-8], 40001Ch
		cli
		les	bx, [bp-4]
		assume es:nothing
		mov	ax, es:[bx]
		les	bx, [bp-8]
		cmp	ax, es:[bx]
		jz	loc_1C2B9
		call	_getch
		mov	[bp-0Ah], ax
		cmp	word ptr [bp-0Ah], 0
		jnz	loc_1C2AD
		call	_getch
		shl	ax, 8
		mov	[bp-0Ah], ax

loc_1C2AD::				; CODE XREF: seg1a07:0050j
		les	bx, [bp-8]
		mov	ax, es:[bx]
		les	bx, [bp-4]
		mov	es:[bx], ax

loc_1C2B9::				; CODE XREF: seg1a07:0042j
		sti
		mov	ax, [bp-0Ah]
		jmp	$+2
; ---------------------------------------------------------------------------

locret_1C2BF::				; CODE XREF: seg1a07:006Dj
		leave
		retf

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; void gr_end_kbd_grab(void)
_gr_end_kbd_grab proc far		; CODE XREF: seg0fa9:0A35P
					; terminate(uchar *,uchar *):loc_1C42CP
					; DATA XREF: ...
		push	bp
		mov	bp, sp
		push	word ptr _gr_old_int9+2
		push	word ptr _gr_old_int9 ;	isr
		push	9		; interruptno

loc_1C2CE::
		call	_setvect
		add	sp, 6
		pop	bp
		retf
_gr_end_kbd_grab endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_gr_start_kbd_grab proc	far		; CODE XREF: init_game(void)+4P
		push	bp
		mov	bp, sp
		mov	_disable_exit_routine, 0
		mov	_exit_routine, 0
		push	9		; interruptno
		call	_getvect
		assume es:nothing
		pop	cx
		mov	word ptr _gr_old_int9+2, dx
		mov	word ptr _gr_old_int9, ax
		push	80h ; ''       ; n
		push	0		; c
		push	ds
		push	offset _gr_keys	; s
		call	_memset
		assume es:seg2608
		add	sp, 8
		push	seg seg1a07
		push	offset _gr_int9	; isr
		push	9		; interruptno
		call	_setvect
		add	sp, 6
		cmp	first_time, 0
		jz	loc_1C334
		push	seg seg1a07
		push	offset _gr_end_kbd_grab	; func
		call	_atexit
		add	sp, 4
		mov	first_time, 0

loc_1C334::				; CODE XREF: _gr_start_kbd_grab+46j
		pop	bp
		retf
_gr_start_kbd_grab endp

		assume es:nothing, ds:seg1c75

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; void __interrupt gr_int9()
_gr_int9	proc far		; DATA XREF: _gr_start_kbd_grab+34o

var_1		= byte ptr -1

		push	ax
		push	bx
		push	cx
		push	dx
		push	es
		push	ds
		push	si
		push	di
		push	bp
		mov	bp, seg	seg2608
		mov	ds, bp
		assume ds:seg2608
		mov	bp, sp
		sub	sp, 2
		mov	dx, 60h	; '`'
		in	al, dx		; 8042 keyboard	controller data	register
		mov	[bp+var_1], al
		test	[bp+var_1], 80h
		jz	loc_1C367
		mov	al, [bp+var_1]
		mov	ah, 0
		and	ax, 7Fh
		mov	bx, ax
		mov	_gr_keys[bx], 0
		jmp	loc_1C373
; ---------------------------------------------------------------------------

loc_1C367::				; CODE XREF: _gr_int9+1Ej
		mov	al, [bp+var_1]
		mov	ah, 0
		mov	bx, ax
		mov	_gr_keys[bx], 1

loc_1C373::				; CODE XREF: _gr_int9+2Fj
		mov	fp_kbd_tail, 40001Ah
		mov	fp_kbd_head, 40001Ch
		les	bx, fp_kbd_head
		assume es:nothing
		mov	ax, es:[bx]
		les	bx, fp_kbd_tail
		mov	es:[bx], ax
		pushf
		call	_gr_old_int9
		cmp	[bp+var_1], 44h	; 'D'
		jnz	loc_1C3B1
		cmp	_disable_exit_routine, 0
		jnz	loc_1C3B1
		cmp	_exit_routine, 0
		jz	loc_1C3B1
		call	_exit_routine

loc_1C3B1::				; CODE XREF: _gr_int9+66j _gr_int9+6Dj ...
		mov	dx, 20h	; ' '
		mov	al, 20h	; ' '
		out	dx, al		; Interrupt controller,	8259A.
		leave

loc_1C3B8::
		pop	di
		pop	si
		pop	ds
		assume ds:seg1c75
		pop	es
		assume es:nothing
		pop	dx
		pop	cx
		pop	bx
		pop	ax

locret_1C3C0::				; DATA XREF: seg2608:_external_openo
					; seg2608:_external_reado
		iret
_gr_int9	endp

seg1a07		ends

; ===========================================================================

; Segment type:	Pure code
seg1a1e		segment	byte public 'CODE' use16
		assume cs:seg1a1e
		;org 1
		assume es:nothing, ss:nothing, ds:seg2608, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; beep(void)
@beep$qv	proc far		; CODE XREF: seg1783:0139P
					; seg1783:0D1BP
		push	bp
		mov	bp, sp
		push	400		; frequency
		call	_sound
		pop	cx
		push	100		; milliseconds
		call	_delay
		pop	cx
		call	_nosound
		pop	bp
		retf
@beep$qv	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: noreturn bp-based	frame

; terminate(unsigned char *, unsigned char *)
@terminate$qnuct1 proc far		; CODE XREF: init_game(void):loc_6281P
					; setup_secret_level(void)+3FP	...

arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= dword	ptr  0Ah

		enter	10h, 0
		mov	word ptr [bp-10h], 3
		push	ss
		lea	ax, [bp-10h]
		push	ax		; outregs
		push	ss

loc_1C3EB::
		lea	ax, [bp-10h]
		push	ax		; inregs
		push	10h		; intno
		call	_int86
		add	sp, 0Ah
		cmp	[bp+arg_4], 0
		jz	loc_1C41A
		push	word ptr [bp+arg_4+2]
		push	word ptr [bp+arg_4]
		push	[bp+arg_2]
		push	[bp+arg_0]
		push	ds
		push	offset aSS	; "%s %s\n"
		call	_printf
		add	sp, 0Ch
		jmp	loc_1C42C
; ---------------------------------------------------------------------------

loc_1C41A::				; CODE XREF: terminate(uchar *,uchar *)+22j
		push	[bp+arg_2]
		push	[bp+arg_0]
		push	ds
		push	offset aS	; "%s\n"
		call	_printf
		add	sp, 8

loc_1C42C::				; CODE XREF: terminate(uchar *,uchar *)+3Cj
		call	_gr_end_kbd_grab
		push	1		; status
		call	_exit
@terminate$qnuct1 endp

; ---------------------------------------------------------------------------
		db  59h	; Y
		db 0C9h	; É
		db 0CBh	; Ë

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; pause(unsigned int)
@pause$qui	proc far		; CODE XREF: de_doit(void)+4E7P
					; de_doit(void)+6BCP ...

arg_0		= word ptr  6

		push	bp
		mov	bp, sp
		jmp	loc_1C454
; ---------------------------------------------------------------------------

loc_1C440::				; CODE XREF: pause(uint)+21j
		jmp	$+2
; ---------------------------------------------------------------------------

loc_1C442::				; CODE XREF: pause(uint):loc_1C440j
					; pause(uint)+Dj
		mov	dx, 3DAh
		in	al, dx		; Video	status bits:
					; 0: retrace.  1=display is in vert or horiz retrace.
					; 1: 1=light pen is triggered; 0=armed
					; 2: 1=light pen switch	is open; 0=closed
					; 3: 1=vertical	sync pulse is occurring.
		test	al, 8
		jnz	loc_1C442
		jmp	$+2
; ---------------------------------------------------------------------------

loc_1C44C::				; CODE XREF: pause(uint)+Fj
					; pause(uint)+17j
		mov	dx, 3DAh
		in	al, dx		; Video	status bits:
					; 0: retrace.  1=display is in vert or horiz retrace.
					; 1: 1=light pen is triggered; 0=armed
					; 2: 1=light pen switch	is open; 0=closed
					; 3: 1=vertical	sync pulse is occurring.
		test	al, 8
		jz	loc_1C44C

loc_1C454::				; CODE XREF: pause(uint)+3j
		mov	ax, [bp+arg_0]
		dec	[bp+arg_0]
		or	ax, ax
		jnz	loc_1C440
		pop	bp
		retf
@pause$qui	endp

; ---------------------------------------------------------------------------

; request_mem(unsigned long)
@request_mem$qul:
		enter	4, 0
		call	_coreleft
		push	dx
		push	ax
		pop	eax
		mov	[bp-4],	eax
		mov	eax, [bp+6]
		cmp	eax, [bp-4]
		jbe	loc_1C481
		mov	al, 0

loc_1C47D::				; CODE XREF: seg1a1e:00C3j
		jmp	locret_1C485
; ---------------------------------------------------------------------------
		jmp	locret_1C485
; ---------------------------------------------------------------------------

loc_1C481::				; CODE XREF: seg1a1e:00B9j
		mov	al, 1
		jmp	loc_1C47D
; ---------------------------------------------------------------------------

locret_1C485::				; CODE XREF: seg1a1e:loc_1C47Dj
					; seg1a1e:00BFj
		leave
		retf

; =============== S U B	R O U T	I N E =======================================

; Attributes: noreturn bp-based	frame

; no_heap(unsigned char	*)
@no_heap$qnuc	proc far		; CODE XREF: show_stats(void)+16AP
					; game_manager::load_loop(uchar	*)+38P	...

arg_0		= word ptr  6
arg_2		= word ptr  8

		push	bp
		mov	bp, sp
		push	[bp+arg_2]
		push	[bp+arg_0]
		push	ds
		push	offset aOutOfHeap ; "Out of heap : "
		push	cs
		call	near ptr @terminate$qnuct1 ; terminate(uchar *,uchar *)
@no_heap$qnuc	endp

; ---------------------------------------------------------------------------
		add	sp, 8
		pop	bp
		retf

; =============== S U B	R O U T	I N E =======================================

; Attributes: noreturn bp-based	frame

; read_error(unsigned char *)
@read_error$qnuc proc far		; CODE XREF: print_form(uchar *,uchar)+38P
					; game_manager::game_manager(uchar *)+6AP ...

arg_0		= word ptr  6
arg_2		= word ptr  8

		push	bp
		mov	bp, sp
		push	[bp+arg_2]
		push	[bp+arg_0]
		push	ds
		push	offset aReadError ; "Read error	: "
		push	cs
		call	near ptr @terminate$qnuct1 ; terminate(uchar *,uchar *)
@read_error$qnuc endp

; ---------------------------------------------------------------------------
		add	sp, 8
		pop	bp
		retf

; =============== S U B	R O U T	I N E =======================================

; Attributes: noreturn bp-based	frame

; write_error(unsigned char *)
@write_error$qnuc proc far		; CODE XREF: seg1783:0AC4P
					; vga_display::dump_pcx(void)+26EP

arg_0		= word ptr  6
arg_2		= word ptr  8

		push	bp
		mov	bp, sp
		push	[bp+arg_2]
		push	[bp+arg_0]
		push	ds
		push	offset aWriteError ; "Write error : "
		push	cs
		call	near ptr @terminate$qnuct1 ; terminate(uchar *,uchar *)
@write_error$qnuc endp

; ---------------------------------------------------------------------------
		add	sp, 8
		pop	bp
		retf
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; set_external_open(void *)
@set_external_open$qnv proc far		; CODE XREF: game_manager::game_manager(uchar *)+4AP

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		mov	eax, [bp+arg_0]
		mov	_external_open,	eax
		pop	bp
		retf
@set_external_open$qnv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; set_external_read(void *)
@set_external_read$qnv proc far		; CODE XREF: game_manager::game_manager(uchar *)+58P

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		mov	eax, [bp+arg_0]
		mov	_external_read,	eax
		pop	bp
		retf
@set_external_read$qnv endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far g_open_element(char	*path)
@g_open_element$qnuc proc far		; CODE XREF: print_form(uchar *,uchar)+20P
					; game_manager::load_pcs(uchar *)+2AP ...

var_4		= dword	ptr -4
path		= dword	ptr  6

		enter	4, 0
		cmp	_external_open,	0
		jz	loc_1C500
		push	word ptr [bp+path+2]
		push	word ptr [bp+path]
		call	_external_open
		add	sp, 4
		jmp	locret_1C558
; ---------------------------------------------------------------------------
		jmp	locret_1C558
; ---------------------------------------------------------------------------

loc_1C500::				; CODE XREF: g_open_element(uchar *)+Aj
		cmp	_g_handle, 0FFFFh
		jz	loc_1C516
		push	0
		push	0
		push	ds
		push	offset aRequestToOpenM ; "Request to open more than one	element."
		push	cs
		call	near ptr @terminate$qnuct1 ; terminate(uchar *,uchar *)
; ---------------------------------------------------------------------------
		add	sp, 8

loc_1C516::				; CODE XREF: g_open_element(uchar *)+22j
		push	8001h		; access
		push	word ptr [bp+path+2]
		push	word ptr [bp+path] ; path
		call	_open
		add	sp, 6
		mov	_g_handle, ax
		cmp	_g_handle, 0FFFFh
		jnz	loc_1C53B
		mov	[bp+var_4], 0FFFFFFFFh
		jmp	loc_1C54D
; ---------------------------------------------------------------------------

loc_1C53B::				; CODE XREF: g_open_element(uchar *)+4Cj
		push	_g_handle	; handle
		call	_filelength
		push	dx
		push	ax
		pop	eax
		pop	cx
		mov	[bp+var_4], eax

loc_1C54D::				; CODE XREF: g_open_element(uchar *)+56j
		mov	eax, [bp+var_4]
		shld	edx, eax, 10h
		jmp	$+2
; ---------------------------------------------------------------------------

locret_1C558::				; CODE XREF: g_open_element(uchar *)+19j
					; g_open_element(uchar *)+1Bj ...
		leave
		retf
@g_open_element$qnuc endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far g_element_read(void	*buf, unsigned int len)
@g_element_read$qnvui proc far		; CODE XREF: print_form(uchar *,uchar)+B3P
					; game_manager::load_pcs(uchar *)+6FP ...

var_2		= word ptr -2
buf		= dword	ptr  6
len		= word ptr  0Ah

		enter	2, 0
		cmp	_external_read,	0
		jz	loc_1C57A
		push	[bp+len]
		push	word ptr [bp+buf+2]
		push	word ptr [bp+buf]
		call	_external_read
		add	sp, 6
		jmp	locret_1C5B4
; ---------------------------------------------------------------------------
		jmp	locret_1C5B4
; ---------------------------------------------------------------------------

loc_1C57A::				; CODE XREF: g_element_read(void *,uint)+Aj
		cmp	_g_handle, 0FFFFh
		jnz	loc_1C590
		push	0
		push	0
		push	ds
		push	offset aElementNotOpen ; "Element not open."
		push	cs
		call	near ptr @terminate$qnuct1 ; terminate(uchar *,uchar *)
; ---------------------------------------------------------------------------
		add	sp, 8

loc_1C590::				; CODE XREF: g_element_read(void *,uint)+25j
		push	[bp+len]	; len
		push	word ptr [bp+buf+2]
		push	word ptr [bp+buf] ; buf
		push	_g_handle	; handle
		call	_read
		add	sp, 8
		mov	[bp+var_2], ax
		movzx	eax, [bp+var_2]
		shld	edx, eax, 10h
		jmp	$+2
; ---------------------------------------------------------------------------

locret_1C5B4::				; CODE XREF: g_element_read(void *,uint)+1Cj
					; g_element_read(void *,uint)+1Ej ...
		leave
		retf
@g_element_read$qnvui endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; g_close_element(void)
@g_close_element$qv proc far		; CODE XREF: print_form(uchar *,uchar):loc_11CF0P
					; print_form(uchar *,uchar):loc_11E60P	...
		push	bp
		mov	bp, sp
		cmp	_external_open,	0
		jz	loc_1C5C3
		jmp	loc_1C5DC
; ---------------------------------------------------------------------------

loc_1C5C3::				; CODE XREF: g_close_element(void)+9j
		cmp	_g_handle, 0FFFFh

loc_1C5C8::
		jnz	loc_1C5CC
		jmp	loc_1C5DC
; ---------------------------------------------------------------------------

loc_1C5CC::				; CODE XREF: g_close_element(void):loc_1C5C8j
		push	_g_handle	; handle

loc_1C5D0::
		call	_close
		pop	cx
		mov	_g_handle, 0FFFFh

loc_1C5DC::				; CODE XREF: g_close_element(void)+Bj
					; g_close_element(void)+14j
		pop	bp
		retf
@g_close_element$qv endp

seg1a1e		ends

; ---------------------------------------------------------------------------
; ===========================================================================

; Segment type:	Pure code
seg1a3f		segment	byte public 'CODE' use16
		assume cs:seg1a3f
		;org 0Eh
		assume es:nothing, ss:nothing, ds:seg2608, fs:nothing, gs:nothing

_memput_masked:
		push	bp
		mov	bp, sp
		push	ds
		push	di
		mov	dx, [bp+8]
		mov	bx, [bp+6]
		mov	ax, [bp+0Ah]
		sub	ax, bx
		lds	di, [bp+0Ch]
		les	si, [bp+10h]
		mov	bp, bx
		sub	bx, bx

across:					; CODE XREF: seg1a3f:003Dj
		mov	cx, bp

scan:					; CODE XREF: seg1a3f:0038j
		mov	bl, es:[si]
		cmp	bl, bh
		jz	skip_in
		nop
		nop
		mov	[di], bl

skip_in:				; CODE XREF: seg1a3f:002Fj
		inc	di
		inc	si
		dec	cx
		jnz	scan
		add	di, ax
		dec	dx
		jnz	across
		pop	di
		pop	ds
		pop	bp
		retf
; ---------------------------------------------------------------------------

_flash_masked:
		push	bp
		mov	bp, sp
		push	ds
		push	di
		mov	dx, [bp+8]
		mov	dh, [bp+14h]
		mov	bx, [bp+6]
		mov	ax, [bp+0Ah]
		sub	ax, bx
		lds	di, [bp+0Ch]
		les	si, [bp+10h]
		mov	bp, bx

across1:				; CODE XREF: seg1a3f:0075j
		mov	cx, bp

scan1:					; CODE XREF: seg1a3f:006Fj
		mov	bl, es:[si]
		cmp	bl, 0
		jz	skip_in1
		nop
		nop
		mov	[di], dh

skip_in1:				; CODE XREF: seg1a3f:0066j
		inc	di
		inc	si
		dec	cx
		jnz	scan1
		add	di, ax
		dec	dl
		jnz	across1
		pop	di
		pop	ds
		pop	bp
		retf
; ---------------------------------------------------------------------------

_memput:
		push	bp
		mov	bp, sp
		push	di
		push	ds

loc_1C650::
		sub	cx, cx
		mov	dx, [bp+8]
		mov	bx, [bp+6]
		mov	ax, [bp+0Ah]
		sub	ax, bx
		lds	si, [bp+10h]
		les	di, [bp+0Ch]
		mov	bp, ax
		mov	ax, bx
		and	al, 3
		shr	bx, 2

mov_doubles0:				; CODE XREF: seg1a3f:00A8j
		mov	cl, bl
		rep movsd
		mov	cl, al
		rep movsb
		add	di, bp
		dec	dx
		jnz	mov_doubles0

exit0:
		pop	ds
		pop	di
		pop	bp
		retf
; ---------------------------------------------------------------------------

_memget:
		push	bp
		mov	bp, sp
		push	di
		push	ds
		sub	cx, cx
		mov	dx, [bp+8]
		mov	bx, [bp+6]
		mov	ax, [bp+0Ah]
		sub	ax, bx
		lds	si, [bp+10h]
		les	di, [bp+0Ch]
		mov	bp, ax
		mov	ax, bx
		and	al, 3
		shr	bx, 2

mov_doubles1:				; CODE XREF: seg1a3f:00DBj
		mov	cl, bl
		rep movsd
		mov	cl, al
		rep movsb
		add	si, bp
		dec	dx
		jnz	mov_doubles1

exit1:
		pop	ds
		pop	di
		pop	bp
		retf
; ---------------------------------------------------------------------------

_mem2vga13:
		push	bp
		mov	bp, sp
		push	ds
		mov	bx, [bp+8]
		sub	bx, 140h
		lds	si, [bp+0Ah]
		mov	es, word ptr [bp+6]
		mov	di, 0
		mov	ax, 50h	; 'P'
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax

loc_1C8C9::
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx
		mov	cx, ax
		rep movsd
		add	si, bx

done:
		pop	ds
		pop	bp
		retf
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_my_movsd	proc far		; CODE XREF: game_manager::remove_loop(uchar *):loc_14415P
					; game_cast::remove(uchar):loc_159CEP ...

arg_0		= dword	ptr  6
arg_4		= dword	ptr  0Ah
arg_8		= word ptr  0Eh

		push	bp
		mov	bp, sp
		push	ds
		mov	cx, [bp+arg_8]
		shl	cx, 1
		lds	si, [bp+arg_4]
		assume ds:nothing
		les	di, [bp+arg_0]
		rep movsw
		pop	ds
		assume ds:seg2608
		pop	bp
		retf
_my_movsd	endp

; ---------------------------------------------------------------------------
		db 0
seg1a3f		ends

; ===========================================================================

; Segment type:	Pure code
seg1a88		segment	byte public 'CODE' use16
		assume cs:seg1a88
		assume es:nothing, ss:nothing, ds:seg2608, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_x_set_pix	proc far		; CODE XREF: vga_display::set_pix(int,int,uchar)+11P

arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah
arg_6		= byte ptr  0Ch

		push	bp
		mov	bp, sp
		mov	ax, 50h	; 'P'
		mul	[bp+arg_2]
		mov	bx, [bp+arg_0]
		shr	bx, 1
		shr	bx, 1
		add	bx, ax
		add	bx, [bp+arg_4]
		mov	ax, 0A000h
		mov	es, ax
		assume es:nothing
		mov	cl, byte ptr [bp+arg_0]
		and	cl, 3
		mov	ax, 102h
		shl	ah, cl
		mov	dx, 3C4h
		out	dx, ax		; EGA: sequencer address reg
					; sequencer reset.
					; Bits of data 0-1 indicate asynchronous/synchronous reset.
		mov	al, [bp+arg_6]

loc_1CA8C::
		mov	es:[bx], al
		pop	bp
		retf
_x_set_pix	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_x_read_pix	proc far		; CODE XREF: vga_display::read_pix(int,int)+BP

arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah

		push	bp
		mov	bp, sp
		mov	ax, 50h	; 'P'
		mul	[bp+arg_2]
		mov	bx, [bp+arg_0]
		shr	bx, 2
		add	bx, ax
		add	bx, [bp+arg_4]
		mov	ax, 0A000h
		mov	es, ax
		assume es:nothing
		mov	ah, byte ptr [bp+arg_0]
		and	ah, 3
		mov	al, 4
		mov	dx, 3CEh
		out	dx, ax		; EGA: graph 1 and 2 addr reg:
					; set/reset.
					; Data bits 0-3	select planes for write	mode 00
		mov	al, es:[bx]
		sub	ah, ah
		pop	bp
		retf
_x_read_pix	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_x_show_offset	proc far		; CODE XREF: vga_display::show_offset(uint)+1FP

arg_0		= byte ptr  6
arg_1		= byte ptr  7

		push	bp
		mov	bp, sp
		mov	bl, 0Dh
		mov	bh, [bp+arg_0]
		mov	cl, 0Ch
		mov	ch, [bp+arg_1]
		mov	dx, 3DAh

waitde:					; CODE XREF: _x_show_offset+13j
		in	al, dx		; Video	status bits:
					; 0: retrace.  1=display is in vert or horiz retrace.
					; 1: 1=light pen is triggered; 0=armed
					; 2: 1=light pen switch	is open; 0=closed
					; 3: 1=vertical	sync pulse is occurring.
		test	al, 1
		jnz	waitde
		mov	dx, 3D4h
		mov	ax, bx
		out	dx, ax		; Video: CRT cntrlr addr
					; horizontal total
		mov	ax, cx
		out	dx, ax		; Video: CRT cntrlr addr
					; horizontal total
		mov	dx, 3DAh

waitvs:					; CODE XREF: _x_show_offset+24j
		in	al, dx		; Video	status bits:
					; 0: retrace.  1=display is in vert or horiz retrace.
					; 1: 1=light pen is triggered; 0=armed
					; 2: 1=light pen switch	is open; 0=closed
					; 3: 1=vertical	sync pulse is occurring.

loc_1CADF::
		test	al, 8
		jz	waitvs
		pop	bp
		retf
_x_show_offset	endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================


_x_set320x200	proc far		; CODE XREF: vga_display::vga_display(uchar)+67P
					; seg1891:05D9P
		push	bp
		push	si
		push	di
		mov	ax, 13h
		int	10h		; - VIDEO - SET	VIDEO MODE
					; AL = mode
		mov	dx, 3C4h
		mov	ax, 604h
		out	dx, ax		; EGA: sequencer address reg
					; unknown register
		mov	ax, 0A000h
		mov	es, ax
		assume es:nothing
		sub	di, di
		mov	ah, 0
		mov	al, 0
		mov	cx, 8000h
		rep stosw
		mov	dx, 3D4h
		mov	ax, 14h
		out	dx, ax		; Video: CRT cntrlr addr
					; underline location.  Bits 0-5	are scan line number.
		mov	ax, 0E317h
		out	dx, ax		; Video: CRT cntrlr addr
					;
		pop	di
		pop	si
		pop	bp
		retf
_x_set320x200	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_x_draw_span	proc far		; CODE XREF: vga_display::draw_span(int,int,uchar,int,uint)+15P

arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= byte ptr  0Eh

		push	bp
		mov	bp, sp
		push	di
		cld
		mov	ax, 50h	; 'P'
		mul	[bp+arg_2]
		mov	di, [bp+arg_0]
		shr	di, 2
		add	di, ax
		add	di, [bp+arg_6]
		mov	ax, 0A000h
		mov	es, ax
		assume es:nothing
		mov	dx, 3C4h
		mov	al, 2
		out	dx, al		; EGA: sequencer address reg
					; map mask: data bits 0-3 enable writes	to bit planes 0-3
		inc	dx
		mov	si, [bp+arg_0]
		and	si, 3
		mov	bh, byte ptr leftclipplanemask[si]
		mov	si, [bp+arg_0]
		add	si, [bp+arg_4]
		and	si, 3
		mov	bl, byte ptr rightclipplanemask[si]
		mov	cx, [bp+arg_4]
		mov	si, [bp+arg_0]
		add	cx, si
		dec	cx
		and	si, 0FFFCh
		sub	cx, si
		shr	cx, 2
		jnz	span_ready
		nop
		nop
		and	bh, bl

span_ready:				; CODE XREF: _x_draw_span+4Aj
		mov	ah, [bp+arg_8]

start_span:
		mov	al, bh
		out	dx, al		; EGA port: sequencer data register
		mov	al, ah
		stosb
		dec	cx
		js	span_done
		nop
		nop
		jz	right_edge
		nop
		nop
		mov	al, 0Fh
		out	dx, al		; EGA port: sequencer data register
		mov	al, ah
		rep stosb

right_edge:				; CODE XREF: _x_draw_span+5Ej
		mov	al, bl
		out	dx, al		; EGA port: sequencer data register
		mov	al, ah
		stosb

span_done:				; CODE XREF: _x_draw_span+5Aj
		pop	di
		pop	bp
		retf
_x_draw_span	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_x_fill_rect	proc far		; CODE XREF: vga_display::fill_rect(int,int,int,int,int,int,uchar)+25P
					; vga_display::fill_rect(int,int,int,int,int,int,uchar):loc_1B5F1P ...

arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh
arg_A		= byte ptr  10h

		push	bp
		mov	bp, sp
		push	di
		cld
		mov	ax, 50h	; 'P'
		mul	[bp+arg_2]
		mov	di, [bp+arg_0]
		shr	di, 2
		add	di, ax
		add	di, [bp+arg_8]
		mov	ax, 0A000h
		mov	es, ax
		assume es:nothing
		mov	dx, 3C4h
		mov	al, 2
		out	dx, al		; EGA: sequencer address reg
					; map mask: data bits 0-3 enable writes	to bit planes 0-3
		inc	dx
		mov	si, [bp+arg_0]
		and	si, 3
		mov	bh, byte ptr leftclipplanemask[si]
		mov	si, [bp+arg_4]
		and	si, 3
		mov	bl, byte ptr rightclipplanemask[si]
		mov	cx, [bp+arg_4]
		mov	si, [bp+arg_0]
		cmp	cx, si
		jle	filldone
		nop
		nop
		dec	cx
		and	si, 0FFFCh
		sub	cx, si
		shr	cx, 2
		jnz	masksset
		nop
		nop
		and	bh, bl

masksset:				; CODE XREF: _x_fill_rect+4Bj
		mov	si, [bp+arg_6]
		sub	si, [bp+arg_2]
		jle	filldone
		nop
		nop
		mov	ah, [bp+arg_A]
		mov	bp, 50h	; 'P'
		sub	bp, cx
		dec	bp

fillrowsloop:				; CODE XREF: _x_fill_rect+85j
		push	cx
		mov	al, bh
		out	dx, al		; EGA port: sequencer data register
		mov	al, ah
		stosb
		dec	cx
		js	fillloopbottom
		nop
		nop
		jz	dorightedge
		nop
		nop
		mov	al, 0Fh
		out	dx, al		; EGA port: sequencer data register
		mov	al, ah
		rep stosb

dorightedge:				; CODE XREF: _x_fill_rect+70j
		mov	al, bl
		out	dx, al		; EGA port: sequencer data register
		mov	al, ah
		stosb

fillloopbottom:				; CODE XREF: _x_fill_rect+6Cj
		add	di, bp
		pop	cx
		dec	si
		jnz	fillrowsloop

filldone:				; CODE XREF: _x_fill_rect+3Ej
					; _x_fill_rect+57j
		pop	di
		pop	bp
		retf
_x_fill_rect	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_x_get_bits	proc far		; CODE XREF: vga_display::get_bits(int,int,int,int)+4BP

arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh
arg_A		= dword	ptr  10h

		push	bp
		mov	bp, sp
		push	di
		push	ds
		push	si
		mov	ax, 50h	; 'P'
		mul	[bp+arg_2]
		mov	bx, [bp+arg_0]
		shr	bx, 2
		add	bx, ax
		add	bx, [bp+arg_8]
		mov	ax, 0A000h
		mov	es, ax
		assume es:nothing
		mov	dx, 50h	; 'P'
		mov	ax, [bp+arg_4]
		sub	ax, [bp+arg_0]
		shr	ax, 2
		sub	dx, ax
		lds	di, [bp+arg_A]
		assume ds:nothing
		mov	cx, [bp+arg_2]

get_a_row:				; CODE XREF: _x_get_bits+61j
		push	cx
		mov	cx, [bp+arg_0]

get_row_bits:				; CODE XREF: _x_get_bits+58j
		mov	ah, cl
		and	ah, 3
		mov	al, 4
		push	dx
		mov	dx, 3CEh
		out	dx, ax		; EGA: graph 1 and 2 addr reg:
					; set/reset.
					; Data bits 0-3	select planes for write	mode 00
		pop	dx
		mov	ah, es:[bx]
		mov	[di], ah
		mov	ah, cl
		and	ah, 3
		cmp	ah, 3
		jnz	no_inc
		nop
		nop
		inc	bx

no_inc:					; CODE XREF: _x_get_bits+4Ej
		inc	di
		inc	cx
		cmp	cx, [bp+arg_4]
		jnz	get_row_bits
		add	bx, dx
		pop	cx
		inc	cx
		cmp	cx, [bp+arg_6]
		jnz	get_a_row
		pop	si
		pop	ds
		assume ds:seg2608
		pop	di
		pop	bp
		retf
_x_get_bits	endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_x_put_bits	proc far		; CODE XREF: vga_display::put_bits(int,int,int,int,uchar *,uint,uint)+38P

var_6		= word ptr -6
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh
arg_A		= word ptr  10h
arg_C		= dword	ptr  12h
arg_10		= word ptr  16h
arg_12		= word ptr  18h
arg_14		= word ptr  1Ah

		push	bp
		mov	bp, sp
		sub	sp, 10h
		push	di
		push	ds
		cld
		lds	si, [bp+arg_C]
		mov	ax, 0A000h
		mov	es, ax
		assume es:nothing
		mov	ax, [bp+arg_12]
		mul	[bp+arg_A]
		add	ax, [bp+arg_8]
		add	ax, si
		mov	si, ax
		mov	ax, [bp+arg_14]
		shr	ax, 2
		mov	[bp+arg_14], ax
		mul	[bp+arg_2]
		mov	di, [bp+arg_0]
		mov	cx, di
		shr	di, 2
		add	di, ax
		add	di, [bp+arg_10]
		and	cl, 3
		mov	al, 11h
		shl	al, cl
		mov	byte ptr [bp+var_6], al
		mov	cx, [bp+arg_4]
		sub	cx, [bp+arg_0]
		jle	short copydone
		nop
		nop
		mov	[bp+var_2], cx
		mov	bx, [bp+arg_6]
		sub	bx, [bp+arg_2]
		jle	short copydone
		nop
		nop
		mov	dx, 3C4h
		mov	al, 2
		out	dx, al		; EGA: sequencer address reg
					; map mask: data bits 0-3 enable writes	to bit planes 0-3
		inc	dx

copyrowsloop:				; CODE XREF: _x_put_bits+7Bj
		mov	ax, [bp+var_6]
		mov	cx, [bp+var_2]
		push	si
		push	di

copyscanlineloop:			; CODE XREF: _x_put_bits+70j
		out	dx, al		; EGA port: sequencer data register
		movsb
		rol	al, 1
		cmc
		sbb	di, 0
		dec	cx
		jnz	copyscanlineloop
		pop	di
		add	di, [bp+arg_14]
		pop	si
		add	si, [bp+arg_12]
		dec	bx
		jnz	copyrowsloop

copydone:				; CODE XREF: _x_put_bits+47j
					; _x_put_bits+54j
		pop	ds
		pop	di
		mov	sp, bp
		pop	bp
		retf
_x_put_bits	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_x_put_bits_masked proc	far		; CODE XREF: vga_display::put_bits_masked(int,int,int,int,uchar	*,uint,uint,uchar)+19AP

var_8		= word ptr -8
var_6		= byte ptr -6
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh
arg_A		= word ptr  10h
arg_C		= dword	ptr  12h
arg_10		= word ptr  16h
arg_12		= word ptr  18h
arg_14		= word ptr  1Ah

		push	bp
		mov	bp, sp
		sub	sp, 10h
		push	di
		push	ds
		mov	ax, 0A000h
		mov	es, ax
		assume es:nothing
		mov	ax, [bp+arg_4]
		sub	ax, [bp+arg_0]
		add	ax, [bp+arg_12]
		mul	[bp+arg_2]
		add	ax, [bp+arg_0]
		push	ds
		lds	dx, [bp+arg_C]
		assume ds:nothing
		mov	bx, ds
		add	ax, dx
		mov	si, ax
		pop	ds
		assume ds:seg2608
		mov	ax, [bp+arg_14]
		shr	ax, 2
		mov	[bp+arg_14], ax
		mul	[bp+arg_A]
		mov	di, [bp+arg_8]
		mov	cx, di
		shr	di, 2
		add	di, ax
		add	di, [bp+arg_10]
		and	cl, 3
		mov	al, 11h
		shl	al, cl
		mov	[bp+var_6], al
		mov	ax, [bp+arg_4]
		sub	ax, [bp+arg_0]
		jle	copydn
		nop
		nop
		mov	[bp+var_2], ax
		mov	ax, [bp+arg_6]
		sub	ax, [bp+arg_2]
		jle	copydn

loc_1CD59::
		nop
		nop
		mov	[bp+var_8], ax
		mov	dx, 3C4h
		mov	al, 2
		out	dx, al		; EGA: sequencer address reg
					; map mask: data bits 0-3 enable writes	to bit planes 0-3
		inc	dx

copyrows:				; CODE XREF: _x_put_bits_masked+96j
		mov	al, [bp+var_6]
		mov	cx, [bp+var_2]
		push	ds
		push	di
		mov	ds, bx
		assume ds:nothing

copyscanline:				; CODE XREF: _x_put_bits_masked+89j
		mov	ah, [si]
		cmp	ah, 0
		jz	maskoff
		nop
		nop
		out	dx, al		; EGA port: sequencer data register
		mov	es:[di], ah

maskoff:				; CODE XREF: _x_put_bits_masked+7Aj
		inc	si
		rol	al, 1
		adc	di, 0
		dec	cx
		jnz	copyscanline
		pop	di
		pop	ds
		assume ds:seg2608
		add	di, [bp+arg_14]
		add	si, [bp+arg_12]
		dec	[bp+var_8]
		jnz	copyrows

copydn:					; CODE XREF: _x_put_bits_masked+50j
					; _x_put_bits_masked+5Dj
		pop	ds
		pop	di
		mov	sp, bp
		pop	bp
		retf
_x_put_bits_masked endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_x_put_bits_masked2 proc far		; CODE XREF: vga_display::put_bits_masked(int,int,int,int,uchar	*,uint,uint,uchar)+15EP

var_10		= word ptr -10h
var_E		= word ptr -0Eh
var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh
arg_A		= word ptr  10h
arg_C		= dword	ptr  12h
arg_10		= word ptr  16h
arg_12		= word ptr  18h
arg_14		= word ptr  1Ah

		push	bp
		mov	bp, sp
		sub	sp, 10h
		push	di
		push	ds
		mov	ax, 0A000h
		mov	es, ax
		assume es:nothing
		mov	cx, [bp+arg_8]
		shr	cx, 2
		mov	ax, [bp+arg_14]
		shr	ax, 2
		mov	[bp+arg_14], ax
		mul	[bp+arg_A]
		add	ax, cx
		add	ax, [bp+arg_10]
		mov	[bp+var_C], ax
		mov	ax, [bp+arg_4]
		mov	bx, [bp+arg_0]
		sub	ax, bx
		mov	[bp+var_2], ax
		add	ax, [bp+arg_12]
		mov	cx, [bp+arg_2]
		mul	cx
		add	ax, bx
		lds	si, [bp+arg_C]
		assume ds:nothing
		add	si, ax
		push	si
		mov	ax, [bp+arg_6]
		sub	ax, cx
		cmp	ax, 0
		jle	putm2_done
		mov	[bp+var_8], ax
		mov	di, [bp+arg_8]
		mov	si, di
		mov	bx, 0
		and	si, 3
		mov	bl, byte ptr ds:leftclipplanemask[si]
		mov	[bp+var_6], bx
		mov	[bp+var_E], si
		mov	si, di
		add	si, [bp+var_2]
		dec	si
		and	si, 3
		mov	bl, byte ptr ds:rightclipplanemask[si]
		mov	[bp+var_A], bx
		mov	[bp+var_10], si
		mov	cx, [bp+var_2]
		mov	si, [bp+arg_8]
		add	cx, si
		dec	cx
		and	si, 0FFFCh
		sub	cx, si
		shr	cx, 2
		mov	[bp+var_4], cx
		mov	dx, 3C4h
		mov	al, 2
		out	dx, al		; EGA: sequencer address reg
					; map mask: data bits 0-3 enable writes	to bit planes 0-3
		inc	dx
		mov	cl, 0

put_one_plane:				; CODE XREF: _x_put_bits_masked2+11Fj
		mov	di, [bp+var_C]
		pop	si
		push	si
		mov	ax, 1
		shl	ax, cl
		out	dx, al		; EGA port: sequencer data register
		push	dx
		mov	dx, [bp+var_8]

start_scan_line:			; CODE XREF: _x_put_bits_masked2+117j
		mov	bx, [bp+var_E]
		add	si, cx
		sub	si, bx
		cmp	cx, bx
		jl	le_no_draw
		nop
		nop

do_left_end:
		mov	ah, [si]
		and	ah, ah
		jz	le_no_draw
		nop
		nop
		mov	es:[di], ah

le_no_draw:				; CODE XREF: _x_put_bits_masked2+AEj
					; _x_put_bits_masked2+B6j
		add	si, 4
		inc	di

do_middle:
		mov	bx, [bp+var_4]
		dec	bx
		js	right_not_valid
		nop
		nop
		jz	do_right_end
		nop
		nop

middle_loop:				; CODE XREF: _x_put_bits_masked2+F1j
		mov	ah, [si]
		and	ah, ah
		jz	??0000
		nop
		nop
		mov	es:[di], ah

??0000:					; CODE XREF: _x_put_bits_masked2+D1j
		add	si, 4
		inc	di
		dec	bx
		jz	do_right_end
		nop
		nop
		mov	ah, [si]
		and	ah, ah
		jz	??0001
		nop
		nop
		mov	es:[di], ah

??0001:					; CODE XREF: _x_put_bits_masked2+E5j
		add	si, 4
		inc	di
		dec	bx
		jnz	middle_loop

do_right_end:				; CODE XREF: _x_put_bits_masked2+C9j
					; _x_put_bits_masked2+DDj
		cmp	cx, [bp+var_10]
		jg	right_not_valid
		nop
		nop
		mov	ah, [si]
		and	ah, ah
		jz	right_not_valid
		nop
		nop
		mov	es:[di], ah

right_not_valid:			; CODE XREF: _x_put_bits_masked2+C5j
					; _x_put_bits_masked2+F6j ...
		mov	bx, [bp+arg_12]
		add	si, bx
		add	si, [bp+var_10]
		inc	si
		sub	si, cx
		add	di, [bp+arg_14]
		sub	di, [bp+var_4]
		dec	dx
		jnz	start_scan_line
		pop	dx
		inc	cl
		cmp	cl, 4
		jnz	put_one_plane

putm2_done:				; CODE XREF: _x_put_bits_masked2+4Aj
		pop	si
		pop	ds
		assume ds:seg2608
		pop	di
		mov	sp, bp
		pop	bp
		retf
_x_put_bits_masked2 endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_x_put_bits_masked_color proc far	; CODE XREF: vga_display::put_bits_masked(int,int,int,int,uchar	*,uint,uint,uchar)+118P

var_8		= word ptr -8
var_6		= byte ptr -6
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh
arg_A		= word ptr  10h
arg_C		= dword	ptr  12h
arg_10		= word ptr  16h
arg_12		= word ptr  18h
arg_14		= word ptr  1Ah
arg_16		= byte ptr  1Ch

		push	bp
		mov	bp, sp
		sub	sp, 10h
		push	di
		push	ds
		mov	ax, 0A000h
		mov	es, ax
		assume es:nothing
		mov	ax, [bp+arg_4]
		sub	ax, [bp+arg_0]
		add	ax, [bp+arg_12]
		mul	[bp+arg_2]
		add	ax, [bp+arg_0]
		push	ds
		lds	dx, [bp+arg_C]
		assume ds:nothing
		mov	bx, ds
		add	ax, dx
		mov	si, ax
		pop	ds
		assume ds:seg2608
		mov	ax, [bp+arg_14]
		shr	ax, 2
		mov	[bp+arg_14], ax
		mul	[bp+arg_A]
		mov	di, [bp+arg_8]
		mov	cx, di
		shr	di, 2
		add	di, ax
		add	di, [bp+arg_10]
		and	cl, 3
		mov	al, 11h
		shl	al, cl
		mov	[bp+var_6], al
		mov	ax, [bp+arg_4]
		sub	ax, [bp+arg_0]
		jle	pbmc_copydn
		nop
		nop
		mov	[bp+var_2], ax
		mov	ax, [bp+arg_6]
		sub	ax, [bp+arg_2]
		jle	pbmc_copydn
		nop
		nop
		mov	[bp+var_8], ax
		mov	dx, 3C4h
		mov	al, 2
		out	dx, al		; EGA: sequencer address reg
					; map mask: data bits 0-3 enable writes	to bit planes 0-3
		inc	dx

pbmc_copyrows:				; CODE XREF: _x_put_bits_masked_color+98j
		mov	al, [bp+var_6]
		mov	cx, [bp+var_2]
		push	ds
		push	di
		mov	ds, bx
		assume ds:nothing

pbmc_copyscanline:			; CODE XREF: _x_put_bits_masked_color+8Bj
		mov	ah, [si]
		and	ah, ah
		jz	pbmc_maskoff
		nop
		nop
		out	dx, al		; EGA port: sequencer data register
		mov	ah, [bp+arg_16]
		mov	es:[di], ah

pbmc_maskoff:				; CODE XREF: _x_put_bits_masked_color+79j
		inc	si
		rol	al, 1
		adc	di, 0
		dec	cx
		jnz	pbmc_copyscanline
		pop	di
		pop	ds
		assume ds:seg2608
		add	di, [bp+arg_14]
		add	si, [bp+arg_12]
		dec	[bp+var_8]
		jnz	pbmc_copyrows

pbmc_copydn:				; CODE XREF: _x_put_bits_masked_color+50j
					; _x_put_bits_masked_color+5Dj
		pop	ds
		pop	di
		mov	sp, bp
		pop	bp
		retf
_x_put_bits_masked_color endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_x_vid2vid	proc far		; CODE XREF: vga_display::copy_bits(int,int,int,int,int,int,uint,uint,uint,uint)+21P

var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh
arg_A		= word ptr  10h
arg_C		= word ptr  12h
arg_E		= word ptr  14h
arg_10		= word ptr  16h
arg_12		= word ptr  18h

		push	bp
		mov	bp, sp
		sub	sp, 10h
		push	di
		push	ds
		cld
		mov	dx, 3CEh
		mov	ax, 8
		out	dx, ax		; EGA: graph 1 and 2 addr reg:
					; bit mask
					; Bits 0-7 select bits to be masked in all planes
		mov	ax, 0A000h
		mov	es, ax
		mov	ax, [bp+arg_12]
		shr	ax, 2
		mul	[bp+arg_A]
		mov	di, [bp+arg_8]
		shr	di, 2
		add	di, ax
		add	di, [bp+arg_E]
		mov	ax, [bp+arg_10]
		shr	ax, 2
		mul	[bp+arg_2]
		mov	si, [bp+arg_0]
		mov	bx, si
		shr	si, 2
		add	si, ax
		add	si, [bp+arg_C]
		and	bx, 3
		mov	ah, byte ptr leftclipplanemask[bx]
		mov	bx, [bp+arg_4]
		and	bx, 3
		mov	al, byte ptr rightclipplanemask[bx]
		mov	bx, ax
		mov	cx, [bp+arg_4]
		mov	ax, [bp+arg_0]
		cmp	cx, ax
		jle	vv_done
		nop
		nop
		dec	cx
		and	ax, 0FFFCh
		sub	cx, ax
		shr	cx, 2
		jnz	vv_masksset
		nop
		nop
		and	bh, bl

vv_masksset:				; CODE XREF: _x_vid2vid+67j
		mov	ax, [bp+arg_6]
		sub	ax, [bp+arg_2]
		jle	vv_done
		nop
		nop
		mov	[bp+var_8], ax
		mov	ax, [bp+arg_12]
		shr	ax, 2
		sub	ax, cx
		dec	ax
		mov	[bp+var_4], ax
		mov	ax, [bp+arg_10]
		shr	ax, 2
		sub	ax, cx
		dec	ax
		mov	[bp+var_2], ax
		mov	[bp+var_6], cx
		mov	dx, 3C4h
		mov	al, 2
		out	dx, al		; EGA: sequencer address reg
					; map mask: data bits 0-3 enable writes	to bit planes 0-3
		inc	dx
		mov	ax, es
		mov	ds, ax
		assume ds:nothing

vv_copy_rows:				; CODE XREF: _x_vid2vid+C2j
		mov	cx, [bp+var_6]
		mov	al, bh
		out	dx, al		; EGA port: sequencer data register
		movsb
		dec	cx
		js	copyloopbottom
		nop
		nop
		jz	vv_dorightedge
		nop
		nop
		mov	al, 0Fh
		out	dx, al		; EGA port: sequencer data register
		rep movsb

vv_dorightedge:				; CODE XREF: _x_vid2vid+ACj
		mov	al, bl
		out	dx, al		; EGA port: sequencer data register
		movsb

copyloopbottom:				; CODE XREF: _x_vid2vid+A8j
		add	si, [bp+var_2]
		add	di, [bp+var_4]
		dec	[bp+var_8]
		jnz	vv_copy_rows

vv_done:				; CODE XREF: _x_vid2vid+5Aj
					; _x_vid2vid+73j
		mov	dx, 3CFh
		mov	al, 0FFh
		out	dx, al		; EGA port: graphics controller	data register
		pop	ds
		assume ds:seg2608
		pop	di
		mov	sp, bp
		pop	bp
		retf
_x_vid2vid	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_x_update_map	proc far		; CODE XREF: tilemap::update(uint)+3DP

arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch

		push	bp
		mov	bp, sp
		push	di
		push	ds
		mov	dx, 3CEh
		mov	ax, 8
		out	dx, ax		; EGA: graph 1 and 2 addr reg:
					; bit mask
					; Bits 0-7 select bits to be masked in all planes
		mov	di, [bp+arg_6]
		mov	si, [bp+arg_0]
		mov	cx, [bp+arg_2]
		mov	dx, 3C4h
		mov	al, 2
		out	dx, al		; EGA: sequencer address reg
					; map mask: data bits 0-3 enable writes	to bit planes 0-3
		inc	dx
		mov	al, 0Fh
		out	dx, al		; EGA port: sequencer data register
		push	dx
		mov	ax, 50h	; 'P'
		sub	ax, cx
		mov	dx, ax
		mov	bx, [bp+arg_4]
		mov	bp, cx
		mov	ax, 0A000h
		mov	es, ax
		assume es:nothing
		mov	ds, ax
		assume ds:nothing
		cld
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		sub	bx, 80h	; ''
		jz	vv4_done
		nop
		nop

do_end:					; CODE XREF: _x_update_map+445j
		mov	cx, bp
		rep movsb
		add	si, dx
		add	di, dx
		dec	bx
		jnz	do_end

vv4_done:				; CODE XREF: _x_update_map+438j
		pop	dx
		mov	dx, 3CFh
		mov	al, 0FFh
		out	dx, al		; EGA port: graphics controller	data register
		pop	ds
		assume ds:seg2608
		pop	di
		pop	bp
		retf
_x_update_map	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_x_explode_map	proc far		; CODE XREF: tilemap::explode(void)+2FP

arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= dword	ptr  0Ah
arg_8		= word ptr  0Eh
arg_A		= dword	ptr  10h
arg_E		= word ptr  14h

		push	bp
		mov	bp, sp
		push	di
		push	ds
		cld
		mov	dx, 3CEh
		mov	ax, 8
		out	dx, ax		; EGA: graph 1 and 2 addr reg:
					; bit mask
					; Bits 0-7 select bits to be masked in all planes
		mov	ax, 0A000h
		mov	es, ax
		assume es:nothing
		mov	dx, 3C4h
		mov	al, 2
		out	dx, al		; EGA: sequencer address reg
					; map mask: data bits 0-3 enable writes	to bit planes 0-3
		inc	dx
		mov	al, 0Fh
		out	dx, al		; EGA port: sequencer data register
		push	dx
		mov	bx, [bp+arg_0]
		sub	bx, 28h	; '('
		mov	[bp+arg_0], bx
		mov	ax, [bp+arg_8]
		mov	dx, 0
		mov	cx, [bp+arg_2]
		cld

exp_one_line:				; CODE XREF: _x_explode_map+1396j
		push	cx
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx

loc_1DAA1::
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb

loc_1E12F::
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax

loc_1E4B1::
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax

loc_1E4B6::
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		lds	di, [bp+arg_4]
		assume ds:nothing
		mov	bx, ax
		shl	bx, 2
		add	di, bx
		mov	bx, [di]
		lds	si, [bp+arg_A]
		assume ds:seg2608
		add	si, bx
		add	si, bx
		mov	si, [si]
		mov	di, [bp+arg_E]
		add	di, dx
		add	di, dx
		mov	di, [di]
		mov	cx, es
		mov	ds, cx
		assume ds:nothing
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		mov	cx, 2
		rep movsb
		add	si, 4Eh	; 'N'
		add	di, 4Eh	; 'N'
		inc	dx
		inc	ax
		add	ax, [bp+arg_0]

loc_1E818::
		pop	cx
		dec	cx
		jnz	exp_one_line
		pop	dx

loc_1E81F::
		mov	dx, 3CFh
		mov	al, 0FFh
		out	dx, al		; EGA port: graphics controller	data register
		pop	ds
		assume ds:seg2608
		pop	di
		pop	bp
		retf
_x_explode_map	endp

seg1a88		ends

; ===========================================================================

; Segment type:	Pure code
seg1c64		segment	byte public 'CODE' use16
		assume cs:seg1c64
		;org 9
		assume es:nothing, ss:nothing, ds:seg2608, fs:nothing, gs:nothing
		db 0
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================


_nullpal	proc far		; CODE XREF: vga_display::blank_palette(void)+3P
		mov	bx, offset tmp_rgb
		mov	ax, 0
		mov	cx, 300h

clearout:				; CODE XREF: _nullpal+Dj
		mov	[bx], al
		inc	bx
		dec	cx
		jnz	clearout
		call	waitvblank
		mov	dx, 3C8h
		mov	al, 0
		out	dx, al
		inc	dx
		mov	si, offset tmp_rgb
		mov	cx, 300h
		cld
		rep outsb

locret_1E84C::
		retf
_nullpal	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_forcepal	proc far		; CODE XREF: de_doit(void)+1E3P
					; vga_display::set_palette(void)+9P

arg_0		= word ptr  6
arg_4		= word ptr  0Ah

		push	bp
		mov	bp, sp
		cmp	[bp+arg_4], 1
		jz	no_vblank
		nop
		nop
		call	waitvblank

no_vblank:				; CODE XREF: _forcepal+7j
		mov	dx, 3C8h
		mov	al, 0
		out	dx, al
		inc	dx
		mov	si, [bp+arg_0]
		mov	cx, 300h
		cld
		rep outsb
		pop	bp
		retf
_forcepal	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_palup		proc far		; CODE XREF: vga_display::fade_up(void)+7P

arg_0		= word ptr  6

		push	bp
		mov	bp, sp
		mov	bx, [bp+arg_0]
		mov	si, 0
		mov	ah, 0
		mov	cx, 300h

readinpal:				; CODE XREF: _palup+1Bj
		mov	al, [bx]
		mov	target_rgb[si],	al
		mov	tmp_rgb[si], ah
		inc	si
		inc	bx
		dec	cx
		jnz	readinpal
		mov	cx, 40h	; '@'

inconce:				; CODE XREF: _palup+62j
		mov	bx, 0

incpal:					; CODE XREF: _palup+4Aj
		mov	al, target_rgb[bx]
		mov	dl, tmp_rgb[bx]
		cmp	dl, al
		jz	cont
		nop
		nop
		sub	al, cl

loc_1E8A0::
		cmp	al, 0
		jg	dnt_store
		nop
		nop
		mov	tmp_rgb[bx], 0
		jmp	cont
; ---------------------------------------------------------------------------
		db 90h
; ---------------------------------------------------------------------------

dnt_store:				; CODE XREF: _palup+35j
		mov	tmp_rgb[bx], al

cont:					; CODE XREF: _palup+2Dj _palup+3Ej
		inc	bx
		cmp	bx, 300h
		jl	incpal
		push	cx
		call	waitvblank
		mov	dx, 3C8h
		mov	al, 0
		out	dx, al
		inc	dx
		mov	si, offset tmp_rgb
		mov	cx, 300h
		cld
		rep outsb
		pop	cx
		dec	cx
		jnz	inconce
		pop	bp
		retf
_palup		endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_paldown	proc far		; CODE XREF: vga_display::fade_down(void)+7P

arg_0		= word ptr  6

		push	bp
		mov	bp, sp
		push	si
		mov	bx, [bp+arg_0]
		mov	si, 0
		mov	cx, 300h

readpal:				; CODE XREF: _paldown+16j
		mov	al, [bx]
		mov	tmp_rgb[si], al
		inc	si
		inc	bx
		dec	cx
		jnz	readpal
		mov	cx, 40h	; '@'

onecycle:				; CODE XREF: _paldown+44j
		mov	bx, 300h

decloop:				; CODE XREF: _paldown+2Cj
		cmp	tmp_rgb[bx], 0
		jz	continue
		nop
		nop
		dec	tmp_rgb[bx]

continue:				; CODE XREF: _paldown+23j
		dec	bx
		jnz	decloop
		push	cx
		call	waitvblank
		mov	dx, 3C8h
		mov	al, 0
		out	dx, al
		inc	dx
		mov	si, offset tmp_rgb
		mov	cx, 300h
		cld
		rep outsb
		pop	cx
		dec	cx
		jnz	onecycle
		pop	si
		pop	bp
		retf
_paldown	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================


waitvblank	proc near		; CODE XREF: _nullpal+Fp _forcepal+Bp	...
		push	es
		push	ax
		push	dx
		push	bx
		mov	ax, 40h	; '@'
		mov	es, ax
		assume es:nothing

loc_1E925::
		mov	dx, es:63h
		add	dx, 6

waitvloop:				; CODE XREF: waitvblank:loc_1E930j
		in	al, dx		; Video	status bits:
					; 0: retrace.  1=display is in vert or horiz retrace.
					; 1: 1=light pen is triggered; 0=armed
					; 2: 1=light pen switch	is open; 0=closed
					; 3: 1=vertical	sync pulse is occurring.
		test	al, 8

loc_1E930::				; DATA XREF: seg1c75:off_1E93Ao
		jz	waitvloop
		pop	bx
		pop	dx
		pop	ax
		pop	es
		assume es:nothing
		retn
waitvblank	endp

seg1c64		ends

; ===========================================================================

; Segment type:	Pure code
seg1c75		segment	byte public 'CODE' use16
		assume cs:seg1c75
		;org 7
		assume es:nothing, ss:nothing, ds:seg2608, fs:nothing, gs:nothing
		db 3 dup(0)
off_1E93A	dw offset loc_1E930 - offset loc_1E930 ; DATA XREF: _core_startworx+5Cw
					; _core_closeworx+23r ...
word_1E93C	dw 0			; DATA XREF: _core_startworx+64w
					; _core_closeworx+28r
byte_1E93E	db 2002h dup(																																 80h)
word_20940	dw 0			; DATA XREF: sub_23069+39w
					; sub_23069:loc_230BBw	...
word_20942	dw 0			; DATA XREF: sub_22A90r sub_22AD3+6w ...
word_20944	dw 0			; DATA XREF: sub_22AAAr sub_22AD3+Dw ...
unk_20946	db    0			; DATA XREF: sub_22AC4+1o
					; sub_22AD3+15o
		db    0
		db    0
		db    0
word_2094A	dw 0			; DATA XREF: sub_22A90+Br
					; sub_22AD3+54r ...
word_2094C	dw 0			; DATA XREF: sub_22AAA+Br
					; sub_22AD3+68w
word_2094E	dw 0			; DATA XREF: sub_22744+7w sub_22F47r
word_20950	dw 0			; DATA XREF: sub_219F3+1Dr
		dw offset sub_23069
		dw offset sub_23135
		dw offset sub_2199B
		dw offset sub_242BB
		dw offset sub_246C3
		dw offset sub_24777
		dw offset sub_2301E
		dw offset sub_22EC2
		dw offset sub_219A7
		dw offset sub_219CE
		dw offset sub_219E8
		dw offset sub_22B42
		dw offset sub_22754
		dw offset sub_22EBA
		dw offset sub_2207F
		dw offset sub_2269E
		dw offset sub_226A6
		dw offset sub_22708
		dw offset sub_21911
		dw offset sub_21C0F
		dw offset sub_21FD4
		dw offset sub_21916
		dw offset sub_21AD7
		dw offset sub_21A3B
		dw offset sub_21C65
		dw offset sub_21C85
		dw offset sub_21DCB
		dw offset sub_21CB9
		dw offset sub_22738
		dw offset sub_22C66
		dw offset sub_22ECF
		dw offset sub_2201C
		dw offset sub_2205E
		dw offset sub_2203D
		dw offset sub_2192A
		dw offset sub_2187B
		dw offset sub_218E1
		dw offset sub_217A9
		dw 0
		dw 0
		dw offset sub_22AD3
		dw offset sub_22A90
		dw offset sub_22AAA
		dw offset sub_22AC4
		dw offset sub_22ECA
		dw offset sub_22744
		dw offset sub_22D53
		dw offset sub_22D4D
		dw offset sub_235B6
		dw offset sub_23F4A
		dw offset sub_23FE6
		dw offset sub_23F6F
		dw offset sub_2354A
		dw offset sub_23F39
		dw offset sub_2313B
		dw offset sub_24219
		dw offset sub_24266
		dw offset sub_24619
		dw offset sub_245A0
		dw offset sub_24477
		dw offset sub_2457A
		dw offset sub_227B4
		dw offset sub_2450D
		dw offset sub_21E96
		dw offset sub_24087
		dw offset sub_2469C
		dw offset sub_21DC5
		dw offset sub_23536
		dw offset sub_244C3
		dw offset sub_22187
		dw offset sub_23540
		dw offset sub_20B42
		dw offset sub_20C7D
		dw offset sub_20B32
		dw offset sub_20B06
		dw offset sub_20B16
		dw offset sub_22228
		dw offset sub_23E1E
word_209EE	dw 0			; DATA XREF: sub_20C7D:loc_20C8Cw
					; sub_20C7D+39r ...
word_209F0	dw 0			; DATA XREF: sub_20C7D+42r
					; sub_23FE6+1Fr ...
word_209F2	dw 0			; DATA XREF: sub_20C7D+50r
					; sub_23FE6+28r ...
word_209F4	dw 0			; DATA XREF: sub_20C7D+4Bw
					; sub_20C7D+86w
word_209F6	dw 0			; DATA XREF: sub_20C7D+55w
					; sub_20C7D+8Bw
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
word_20AF0	dw 0FFFFh		; DATA XREF: sub_20B42+29w
					; sub_20C7D+31r ...
dword_20AF2	dd 0			; DATA XREF: sub_20B42+6w
					; sub_20B42+12r ...
word_20AF6	dw 0			; DATA XREF: sub_20C7D+69w
					; sub_20C7D+79r ...
word_20AF8	dw 0			; DATA XREF: sub_20C7D+19w
					; sub_23FE6+40w ...
word_20AFA	dw 0			; DATA XREF: sub_20C7D+20w
					; sub_23FE6+35w ...
word_20AFC	dw 0			; DATA XREF: sub_20C7D+27w
					; sub_23FE6+24w ...
word_20AFE	dw 0			; DATA XREF: sub_20C7D+2Cw
					; sub_23FE6+2Dw ...
word_20B00	dw 0			; DATA XREF: sub_20C7D+35w
					; sub_23FE6+47w ...
word_20B02	dw 0			; DATA XREF: sub_20C7D+47w
					; sub_20C7D+91w ...
word_20B04	dw 0			; DATA XREF: sub_20C7D+5Aw
					; sub_20C7D+96w ...

; =============== S U B	R O U T	I N E =======================================


sub_20B06	proc near		; DATA XREF: seg1c75:20B6o
		mov	dx, cs:word_21723
		add	dx, 4
		mov	al, 0Ch
		out	dx, al
		inc	dx
		mov	al, bl
		out	dx, al
		retn
sub_20B06	endp


; =============== S U B	R O U T	I N E =======================================


sub_20B16	proc near		; DATA XREF: seg1c75:20B8o
		mov	dx, cs:word_21723
		add	dx, 4
		mov	al, 2Eh	; '.'
		out	dx, al
		inc	dx
		mov	bh, bl
		shl	bh, 1
		shl	bh, 1
		shl	bh, 1
		shl	bh, 1
		or	bl, bh
		mov	al, bl
		out	dx, al
		retn
sub_20B16	endp


; =============== S U B	R O U T	I N E =======================================


sub_20B32	proc near		; DATA XREF: seg1c75:20B4o
		mov	dx, cs:word_21723
		add	dx, 4
		mov	al, 0Ah
		out	dx, al
		inc	dx
		mov	al, bl
		out	dx, al
		retn
sub_20B32	endp


; =============== S U B	R O U T	I N E =======================================


sub_20B42	proc near		; DATA XREF: seg1c75:20B0o
		push	bx
		mov	ax, 4310h
		int	2Fh		; - Multiplex -	XMS - GET DRIVER ADDRESS
					; Return: ES:BX	-> driver entry	point
		mov	word ptr cs:dword_20AF2, bx
		mov	word ptr cs:dword_20AF2+2, es
		mov	ah, 0
		call	cs:dword_20AF2
		cmp	ax, 200h
		jb	loc_20B78
		pop	dx
		mov	ah, 9
		call	cs:dword_20AF2
		cmp	ax, 1
		jnz	loc_20B74
		mov	cs:word_20AF0, dx
		mov	ax, 0
		retn
; ---------------------------------------------------------------------------

loc_20B74::				; CODE XREF: sub_20B42+27j
		mov	ax, 0FFFFh
		retn
; ---------------------------------------------------------------------------

loc_20B78::				; CODE XREF: sub_20B42+1Aj
		pop	bx
		mov	ax, 0
		retn
sub_20B42	endp

; ---------------------------------------------------------------------------
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0

; =============== S U B	R O U T	I N E =======================================


sub_20C7D	proc near		; DATA XREF: seg1c75:20B2o
		mov	bx, 0
		call	sub_21AD7
		cmp	dx, 0FFFFh
		jnz	loc_20C8C
		mov	ax, 0FFFFh
		retn
; ---------------------------------------------------------------------------

loc_20C8C::				; CODE XREF: sub_20C7D+9j
		inc	cs:word_209EE
		mov	di, 224Dh
		push	cs
		pop	es
		assume es:seg1c75
		mov	cs:word_20AF8, 0
		mov	cs:word_20AFA, 0
		mov	cs:word_20AFC, di
		mov	cs:word_20AFE, es
		mov	ax, cs:word_20AF0
		mov	cs:word_20B00, ax
		mov	bx, cs:word_209EE
		shl	bx, 1
		shl	bx, 1
		mov	ax, cs:word_209F0[bx]
		mov	cs:word_20B02, ax
		mov	cs:word_209F4[bx], ax
		mov	ax, cs:word_209F2[bx]
		mov	cs:word_209F6[bx], ax
		mov	cs:word_20B04, ax

loc_20CDB::				; CODE XREF: sub_20C7D+9Cj
		mov	bx, 100h
		call	sub_21A3B
		cmp	ax, 0
		jz	loc_20D1B
		mov	cs:word_20AF6, ax
		mov	si, 21C6h
		mov	ah, 0Bh
		call	cs:dword_20AF2
		push	cs
		pop	ds
		assume ds:seg1c75
		mov	ax, cs:word_20AF6
		mov	bx, cs:word_209EE

loc_20CFF::
		shl	bx, 1
		shl	bx, 1
		add	cs:word_209F4[bx], ax
		adc	cs:word_209F6[bx], 0
		add	cs:word_20B02, ax
		adc	cs:word_20B04, 0
		jmp	loc_20CDB
; ---------------------------------------------------------------------------

loc_20D1B::				; CODE XREF: sub_20C7D+67j
		mov	ax, cs:word_209EE
		mov	dx, 0
		retn
sub_20C7D	endp

; ---------------------------------------------------------------------------
		mov	dx, 0
		mov	ax, 0
		retn
; ---------------------------------------------------------------------------
unk_20D2A	db    1			; DATA XREF: sub_21837+6o
		db  11h
		db  4Fh	; O
		db    0
		db 0F1h	; ñ
		db 0F2h	; ò
		db  53h	; S
		db  74h	; t
		db    0
		db    0
unk_20D34	db    8			; DATA XREF: sub_21837+33o
		db    0
		db    8
		db    2
		db    8
		db    4
		db    8
		db  0Bh
		db    8
		db  0Dh
		db    8
		db  0Fh
		db    8
		db  16h
		db    8
		db  18h
		db    8
		db  1Ah
unk_20D46	db    0			; DATA XREF: sub_22448-1Eo
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db  75h	; u
		db 0A6h	; ¦
		db 0B8h	; ¸
		db 0A0h	;  
		db  59h	; Y
		db  96h	; 
		db  3Ch	; <
		db  8Dh	; 
		db  2Ah	; *
		db  85h	; 
		db 0F8h	; ø
		db  7Dh	; }
		db  82h	; 
		db  77h	; w
		db 0ADh	; ­
		db  71h	; q
		db 0EDh	; í
		db  69h	; i
		db  52h	; R
		db  65h	; e
		db  1Eh
		db  5Fh	; _
		db 0A1h	; ¡
		db  59h	; Y
		db 0BEh	; ¾
		db  54h	; T
		db  5Ch	; \
		db  50h	; P
		db  2Ch	; ,
		db  4Bh	; K
		db 0B4h	; ´
		db  47h	; G
		db  8Ch	; 
		db  43h	; C
		db 0D8h	; Ø
		db  3Fh	; ?
		db 0C1h	; Á
		db  3Bh	; ;
		db 0D6h	; Ö
		db  38h	; 8
		db  92h	; 
		db  35h	; 5
		db 0A9h	; ©
		db  32h	; 2
		db  8Fh	; 
		db  2Fh	; /
		db 0D0h	; Ð
		db  2Ch	; ,
		db  5Fh	; _
		db  2Ah	; *
		db 0D6h	; Ö
		db  27h	; '
		db 0E4h	; ä
		db  25h	; %
		db  94h	; 
		db  23h	; #
		db  88h	; 
		db  21h	; !
		db 0B4h	; ´
		db  1Fh
		db 0E0h	; à
		db  1Dh
		db  3Fh	; ?
		db  1Ch
		db 0A2h	; ¢
		db  1Ah
		db  31h	; 1
		db  19h
		db 0C7h	; Ç
		db  17h
		db  68h	; h
		db  16h
		db  2Fh	; /
		db  15h
		db    0
		db  14h
		db 0DEh	; Þ
		db  12h
		db 0CAh	; Ê
		db  11h
		db 0D3h	; Ó
		db  10h
		db 0DAh	; Ú
		db  0Fh
		db 0FCh	; ü
		db  0Eh
		db  1Fh
		db  0Eh
		db  5Ah	; Z
		db  0Dh
		db  98h	; 
		db  0Ch
		db 0E3h	; ã
		db  0Bh
		db  3Bh	; ;
		db  0Bh
		db  97h	; 
		db  0Ah
		db    0
		db  0Ah
		db  6Fh	; o
		db    9
		db 0E9h	; é
		db    8
		db  69h	; i
		db    8
		db 0F0h	; ð
		db    7
		db  7Eh	; ~
		db    7
		db  12h
		db    7
		db 0ADh	; ­
		db    6
		db  4Ch	; L
		db    6
		db 0F1h	; ñ
		db    5
		db  9Bh	; 
		db    5
		db  4Bh	; K
		db    5
		db    0
		db    5
		db 0B7h	; ·
		db    4
		db  73h	; s
		db    4
		db  33h	; 3
		db    4
		db 0F7h	; ÷
		db    3
		db 0BEh	; ¾
		db    3
		db  88h	; 
		db    3
		db  56h	; V
		db    3
		db  26h	; &
		db    3
		db 0F8h	; ø
		db    2
		db 0CEh	; Î
		db    2
		db 0A5h	; ¥
		db    2
		db  7Fh	; 
		db    2
		db  5Bh	; [
		db    2
		db  3Ah	; :
		db    2
		db  1Ah
		db    2
		db 0FBh	; û
		db    1
		db 0DFh	; ß
		db    1
		db 0C4h	; Ä
		db    1
		db 0ABh	; «
		db    1
		db  93h	; 
		db    1
		db  7Ch	; |
		db    1
		db  67h	; g
		db    1
		db  52h	; R
		db    1
		db  3Fh	; ?
		db    1
		db  2Dh	; -
		db    1
		db  1Dh
		db    1
		db  0Dh
		db    1
		db 0FDh	; ý
		db    0
		db 0EFh	; ï
		db    0
		db 0E2h	; â
		db    0
		db 0D5h	; Õ
		db    0
		db 0C9h	; É
		db    0
		db 0BEh	; ¾
		db    0
		db 0B3h	; ³
		db    0
		db 0A9h	; ©
		db    0
		db  9Fh	; 
		db    0
		db  96h	; 
		db    0
		db  8Eh	; 
		db    0
		db  86h	; 
		db    0
		db  7Eh	; ~
		db    0
		db  77h	; w
		db    0
		db  71h	; q
		db    0
		db  6Ah	; j
		db    0
		db  64h	; d
		db    0
		db  5Fh	; _
		db    0
		db  59h	; Y
		db    0
		db  54h	; T
		db    0
		db  4Fh	; O
		db    0
		db  4Bh	; K
		db    0
		db  47h	; G
		db    0
		db  43h	; C
		db    0
		db  3Fh	; ?
		db    0
		db  3Bh	; ;
		db    0
		db  38h	; 8
		db    0
		db  35h	; 5
		db    0
		db  32h	; 2
		db    0
		db  2Fh	; /
		db    0
byte_20E46	db 1			; DATA XREF: sub_2207F:loc_22091o
					; sub_220BE+5o	...
		db 1
		db 4Fh
		db 12h
		db 0F1h
		db 0D3h
		db 50h
		db 7Ch
		db 0
		db 0
		db    6
		db    2
		db    1
		db  50h	; P
		db  12h
		db 0F1h	; ñ
		db 0D2h	; Ò
		db  50h	; P
		db  76h	; v
		db    0
		db    0
		db    6
		db    1
		db    1
		db  4Bh	; K
		db  17h
		db 0F1h	; ñ
		db 0D2h	; Ò
		db  50h	; P
		db  76h	; v
		db    0
		db    0
		db    6
		db  13h
		db    1
		db  50h	; P
		db  11h
		db 0F1h	; ñ
		db 0D2h	; Ò
		db  50h	; P
		db  76h	; v
		db    0
		db    0
		db    6
		db  32h	; 2
		db    1
		db  92h	; 
		db  8Fh	; 
		db 0FFh
		db 0FFh
		db  11h
		db  13h
		db    0
		db    0
		db  0Ah
		db  34h	; 4
		db    3
		db  92h	; 
		db  0Fh
		db 0FFh
		db 0FFh
		db  10h
		db    4
		db    0
		db    0
		db  0Ah
		db  34h	; 4
		db    3
		db  92h	; 
		db  14h
		db 0FFh
		db 0FFh
		db  10h
		db    4
		db    0
		db    0
		db  0Ah
		db  53h	; S
		db  51h	; Q
		db  4Eh	; N
		db    0
		db 0F1h	; ñ
		db 0D2h	; Ò
		db    0
		db  86h	; 
		db    0
		db    0
		db    6
		db  28h	; (
		db  21h	; !
		db 0CFh	; Ï
		db  0Dh
		db 0F8h	; ø
		db 0C0h	; À
		db 0E5h	; å
		db 0FFh
		db    0
		db    0
		db    0
		db 0E2h	; â
		db 0E1h	; á
		db 0CAh	; Ê
		db  15h
		db 0F8h	; ø
		db 0C0h	; À
		db 0E5h	; å
		db  0Eh
		db    0
		db    0
		db    8
		db  2Ch	; ,
		db 0A1h	; ¡
		db 0D4h	; Ô
		db  1Ch
		db 0F9h	; ù
		db 0C0h	; À
		db 0FFh
		db 0FFh
		db    0
		db    0
		db    0
		db  2Bh	; +
		db  21h	; !
		db 0CAh	; Ê
		db  13h
		db 0F8h	; ø
		db 0C0h	; À
		db 0E5h	; å
		db 0FFh
		db    0
		db    0
		db    0
		db  29h	; )
		db  21h	; !
		db 0CDh	; Í
		db  14h
		db 0F0h	; ð
		db 0E0h	; à
		db  91h	; 
		db  86h	; 
		db    0
		db    0
		db    2
		db  24h	; $
		db  21h	; !
		db 0D0h	; Ð
		db  14h
		db 0F0h	; ð
		db 0E0h	; à
		db    1
		db  86h	; 
		db    0
		db    0
		db    2
		db  23h	; #
		db  21h	; !
		db 0C8h	; È
		db  10h
		db 0F0h	; ð
		db 0E0h	; à
		db    1
		db  86h	; 
		db    0
		db    0
		db    2
		db  64h	; d
		db  61h	; a
		db 0C9h	; É
		db  14h
		db 0B0h	; °
		db 0F0h	; ð
		db    1
		db  86h	; 
		db    0
		db    0
		db    2
		db  33h	; 3
		db  15h
		db  85h	; 
		db  94h	; 
		db 0A1h	; ¡
		db  72h	; r
		db  10h
		db  23h	; #
		db    0
		db    0
		db    8
		db  31h	; 1
		db  15h
		db  85h	; 
		db  94h	; 
		db 0A1h	; ¡
		db  73h	; s
		db  10h
		db  33h	; 3
		db    0
		db    0
		db    8
		db  31h	; 1
		db  16h
		db  81h	; 
		db  94h	; 
		db 0A1h	; ¡
		db 0C2h	; Â
		db  30h	; 0
		db  74h	; t
		db    0
		db    0
		db    8
		db    3
		db    2
		db  8Ah	; 
		db  94h	; 
		db 0F0h	; ð
		db 0F4h	; ô
		db  7Bh	; {
		db  7Bh	; {
		db    0
		db    0
		db    8
		db    3
		db    1
		db  8Ah	; 
		db  99h	; 
		db 0F0h	; ð
		db 0F4h	; ô
		db  7Bh	; {
		db  7Bh	; {
		db    0
		db    0
		db    8
		db  23h	; #
		db    1
		db  8Ah	; 
		db  94h	; 
		db 0F2h	; ò
		db 0F4h	; ô
		db  7Bh	; {
		db  7Bh	; {
		db    0
		db    0
		db    8
		db  32h	; 2
		db  12h
		db  80h	; 
		db  95h	; 
		db    1
		db  72h	; r
		db  10h
		db  33h	; 3
		db    0
		db    0
		db    8
		db  32h	; 2
		db  14h
		db  80h	; 
		db  90h	; 
		db    1
		db  73h	; s
		db  10h
		db  33h	; 3
		db    0
		db    0
		db    8
		db  31h	; 1
		db  21h	; !
		db  16h
		db  14h
		db  73h	; s
		db  80h	; 
		db  8Eh	; 
		db  9Eh	; 
		db    0
		db    0
		db  0Eh
		db  30h	; 0
		db  21h	; !
		db  16h
		db  10h
		db  73h	; s
		db  80h	; 
		db  7Eh	; ~
		db  9Eh	; 
		db    0
		db    0
		db  0Eh
		db  31h	; 1
		db  21h	; !
		db  94h	; 
		db  15h
		db  33h	; 3
		db 0A0h	;  
		db  73h	; s
		db  97h	; 
		db    0
		db    0
		db  0Eh
		db  31h	; 1
		db  21h	; !
		db  94h	; 
		db  13h
		db 0D3h	; Ó
		db 0A0h	;  
		db  73h	; s
		db  97h	; 
		db    0
		db    0
		db  0Eh
		db  31h	; 1
		db  32h	; 2
		db  45h	; E
		db  11h
		db 0F1h	; ñ
		db 0F2h	; ò
		db  53h	; S
		db  27h	; '
		db    0
		db    0
		db    6
		db  13h
		db  15h
		db  0Ch
		db  1Ah
		db 0F2h	; ò
		db 0F2h	; ò
		db    1
		db 0B6h	; ¶
		db    0
		db    0
		db    8
		db  11h
		db  11h
		db  0Ch
		db  15h
		db 0F2h	; ò
		db 0F2h	; ò
		db    1
		db 0B6h	; ¶
		db    0
		db    0
		db    8
		db  11h
		db  11h
		db  0Ah
		db  10h
		db 0FEh	; þ
		db 0F2h	; ò
		db    4
		db 0BDh	; ½
		db    0
		db    0
		db    8
		db  16h
		db 0E1h	; á
		db  4Dh	; M
		db  11h
		db 0FAh	; ú
		db 0F1h	; ñ
		db  11h
		db 0F1h	; ñ
		db    0
		db    0
		db    8
		db  16h
		db 0F1h	; ñ
		db  40h	; @
		db  17h
		db 0BAh	; º
		db  24h	; $
		db  11h
		db  31h	; 1
		db    0
		db    0
		db    8
		db  61h	; a
		db 0E1h	; á
		db 0A7h	; §
		db  8Eh	; 
		db  72h	; r
		db  50h	; P
		db  8Eh	; 
		db  1Ah
		db    0
		db    0
		db    2
		db  18h
		db 0E1h	; á
		db  4Dh	; M
		db  13h
		db  32h	; 2
		db  51h	; Q
		db  13h
		db 0E3h	; ã
		db    0
		db    0
		db    8
		db  17h
		db  31h	; 1
		db 0C0h	; À
		db  92h	; 
		db  12h
		db  13h
		db  41h	; A
		db  31h	; 1
		db    0
		db    0
		db    6
		db    3
		db  21h	; !
		db  8Fh	; 
		db  90h	; 
		db 0F5h	; õ
		db 0F3h	; ó
		db  55h	; U
		db  33h	; 3
		db    0
		db    0
		db    0
		db  13h
		db 0E1h	; á
		db  4Dh	; M
		db  12h
		db 0FAh	; ú
		db 0F1h	; ñ
		db  11h
		db 0F1h	; ñ
		db    0
		db    0
		db    8
		db  11h
		db 0F1h	; ñ
		db  43h	; C
		db  10h
		db  20h
		db  31h	; 1
		db  15h
		db 0F8h	; ø
		db    0
		db    0
		db    8
		db  11h
		db 0E4h	; ä
		db    3
		db  52h	; R
		db  82h	; 
		db 0F0h	; ð
		db  97h	; 
		db 0F2h	; ò
		db    0
		db    0
		db    8
		db    5
		db  14h
		db  40h	; @
		db  0Fh
		db 0D1h	; Ñ
		db  51h	; Q
		db  53h	; S
		db  71h	; q
		db    0
		db    0
		db    6
		db 0F1h	; ñ
		db  21h	; !
		db    1
		db  12h
		db  77h	; w
		db  81h	; 
		db  17h
		db  18h
		db    0
		db    0
		db    2
		db 0F1h	; ñ
		db 0E1h	; á
		db  18h
		db  17h
		db  32h	; 2
		db 0F1h	; ñ
		db  11h
		db  13h
		db    0
		db    0
		db    0
		db  73h	; s
		db  71h	; q
		db  48h	; H
		db  13h
		db 0F1h	; ñ
		db 0F1h	; ñ
		db  53h	; S
		db    6
		db    0
		db    0
		db    8
		db  71h	; q
		db  61h	; a
		db  8Dh	; 
		db  53h	; S
		db  71h	; q
		db  72h	; r
		db  11h
		db  15h
		db    0
		db    0
		db    6
		db 0D7h	; ×
		db 0D2h	; Ò
		db  4Fh	; O
		db  14h
		db 0F2h	; ò
		db 0F1h	; ñ
		db  61h	; a
		db 0B2h	; ²
		db    0
		db    0
		db    8
		db    1
		db    1
		db  11h
		db  13h
		db 0F0h	; ð
		db 0F0h	; ð
		db 0FFh
		db 0F8h	; ø
		db    0
		db    0
		db  0Ah
		db  31h	; 1
		db  61h	; a
		db  8Bh	; 
		db  10h
		db  41h	; A
		db  22h	; "
		db  11h
		db  13h
		db    0
		db    0
		db    6
		db  31h	; 1
		db  61h	; a
		db  8Bh	; 
		db  10h
		db 0FFh
		db  44h	; D
		db  21h	; !
		db  15h
		db    0
		db    0
		db  0Ah
		db  31h	; 1
		db  61h	; a
		db  8Bh	; 
		db  10h
		db  41h	; A
		db  32h	; 2
		db  11h
		db  15h
		db    0
		db    0
		db    2
		db  71h	; q
		db  21h	; !
		db  1Ch
		db  10h
		db 0FDh	; ý
		db 0E7h	; ç
		db  13h
		db 0D6h	; Ö
		db    0
		db    0
		db  0Eh
		db  71h	; q
		db  21h	; !
		db  1Ch
		db  10h
		db  51h	; Q
		db  54h	; T
		db    3
		db  67h	; g
		db    0
		db    0
		db  0Eh
		db  71h	; q
		db  21h	; !
		db  1Ch
		db  10h
		db  51h	; Q
		db  54h	; T
		db    3
		db  17h
		db    0
		db    0
		db  0Eh
		db  71h	; q
		db  21h	; !
		db  1Ch
		db  10h
		db  54h	; T
		db  53h	; S
		db  15h
		db  49h	; I
		db    0
		db    0
		db  0Eh
		db  71h	; q
		db  61h	; a
		db  56h	; V
		db  10h
		db  51h	; Q
		db  54h	; T
		db    3
		db  17h
		db    0
		db    0
		db  0Eh
		db  71h	; q
		db  21h	; !
		db  1Ch
		db  10h
		db  51h	; Q
		db  54h	; T
		db    3
		db  17h
		db    0
		db    0
		db  0Eh
		db    2
		db    1
		db  29h	; )
		db  90h	; 
		db 0F5h	; õ
		db 0F2h	; ò
		db  75h	; u
		db 0F3h	; ó
		db    0
		db    0
		db    0
		db    2
		db    1
		db  29h	; )
		db  90h	; 
		db 0F0h	; ð
		db 0F4h	; ô
		db  75h	; u
		db  33h	; 3
		db    0
		db    0
		db    0
		db    1
		db  11h
		db  49h	; I
		db  10h
		db 0F1h	; ñ
		db 0F1h	; ñ
		db  53h	; S
		db  74h	; t
		db    0
		db    0
		db    6
		db    1
		db  11h
		db  89h	; 
		db  10h
		db 0F1h	; ñ
		db 0F1h	; ñ
		db  53h	; S
		db  74h	; t
		db    0
		db    0
		db    6
		db    2
		db  11h
		db  89h	; 
		db  10h
		db 0F1h	; ñ
		db 0F1h	; ñ
		db  53h	; S
		db  74h	; t
		db    0
		db    0
		db    6
		db    2
		db  11h
		db  80h	; 
		db  10h
		db 0F1h	; ñ
		db 0F1h	; ñ
		db  53h	; S
		db  74h	; t
		db    0
		db    0
		db    6
		db    1
		db    8
		db  40h	; @
		db  50h	; P
		db 0F1h	; ñ
		db 0F1h	; ñ
		db  53h	; S
		db  53h	; S
		db    0
		db    0
		db    0
		db  21h	; !
		db  21h	; !
		db  15h
		db  90h	; 
		db 0D3h	; Ó
		db 0C3h	; Ã
		db  2Ch	; ,
		db  2Ch	; ,
		db    0
		db    0
		db  0Ah
		db    1
		db  21h	; !
		db  18h
		db  90h	; 
		db 0D4h	; Ô
		db 0C4h	; Ä
		db 0F2h	; ò
		db  8Ah	; 
		db    0
		db    0
		db  0Ah
		db    1
		db  11h
		db  4Eh	; N
		db  10h
		db 0F0h	; ð
		db 0F4h	; ô
		db  7Bh	; {
		db 0C8h	; È
		db    0
		db    0
		db    4
		db    1
		db  11h
		db  44h	; D
		db  10h
		db 0F0h	; ð
		db 0F3h	; ó
		db 0ABh	; «
		db 0ABh	; «
		db    0
		db    0
		db    4
		db  53h	; S
		db  11h
		db  0Eh
		db  10h
		db 0F4h	; ô
		db 0F1h	; ñ
		db 0C8h	; È
		db 0BBh	; »
		db    0
		db    0
		db    4
		db  53h	; S
		db  11h
		db  0Bh
		db  10h
		db 0F2h	; ò
		db 0F2h	; ò
		db 0C8h	; È
		db 0C5h	; Å
		db    0
		db    0
		db    4
		db  21h	; !
		db  21h	; !
		db  15h
		db  10h
		db 0B4h	; ´
		db  94h	; 
		db  4Ch	; L
		db 0ACh	; ¬
		db    0
		db    0
		db  0Ah
		db  21h	; !
		db  21h	; !
		db  15h
		db  10h
		db  94h	; 
		db  64h	; d
		db  1Ch
		db 0ACh	; ¬
		db    0
		db    0
		db  0Ah
		db  21h	; !
		db 0A1h	; ¡
		db  16h
		db  90h	; 
		db  77h	; w
		db  60h	; `
		db  8Fh	; 
		db  2Ah	; *
		db    0
		db    0
		db    6
		db  21h	; !
		db 0A1h	; ¡
		db  19h
		db  90h	; 
		db  77h	; w
		db  60h	; `
		db 0BFh	; ¿
		db  2Ah	; *
		db    0
		db    0
		db    6
		db 0A1h	; ¡
		db 0E2h	; â
		db  13h
		db  90h	; 
		db 0D6h	; Ö
		db  60h	; `
		db 0AFh	; ¯
		db  2Ah	; *
		db    0
		db    0
		db    2
		db 0A2h	; ¢
		db 0E2h	; â
		db  1Dh
		db  90h	; 
		db  95h	; 
		db  60h	; `
		db  24h	; $
		db  2Ah	; *
		db    0
		db    0
		db    2
		db  32h	; 2
		db  61h	; a
		db  9Ah	; 
		db  90h	; 
		db  51h	; Q
		db  60h	; `
		db  19h
		db  39h	; 9
		db    0
		db    0
		db  0Ch
		db 0A4h	; ¤
		db 0E2h	; â
		db  12h
		db  90h	; 
		db 0F4h	; ô
		db  60h	; `
		db  30h	; 0
		db  2Ah	; *
		db    0
		db    0
		db    2
		db  21h	; !
		db  21h	; !
		db  16h
		db  10h
		db  63h	; c
		db  63h	; c
		db  0Eh
		db  0Eh
		db    0
		db    0
		db  0Ch
		db  31h	; 1
		db  21h	; !
		db  16h
		db  10h
		db  63h	; c
		db  63h	; c
		db  0Ah
		db  0Bh
		db    0
		db    0
		db  0Ch
		db  21h	; !
		db  21h	; !
		db  1Bh
		db  10h
		db  63h	; c
		db  63h	; c
		db  0Ah
		db  0Bh
		db    0
		db    0
		db  0Ch
		db  20h
		db  21h	; !
		db  1Bh
		db  10h
		db  63h	; c
		db  63h	; c
		db  0Ah
		db  0Bh
		db    0
		db    0
		db  0Ch
		db  32h	; 2
		db  61h	; a
		db  1Ch
		db  90h	; 
		db  82h	; 
		db  60h	; `
		db  18h
		db    7
		db    0
		db    0
		db  0Ch
		db  32h	; 2
		db 0E1h	; á
		db  18h
		db  90h	; 
		db  51h	; Q
		db  62h	; b
		db  14h
		db  36h	; 6
		db    0
		db    0
		db  0Ch
		db  31h	; 1
		db  22h	; "
		db 0C3h	; Ã
		db  10h
		db  87h	; 
		db  8Bh	; 
		db  17h
		db  0Eh
		db    0
		db    0
		db    2
		db  71h	; q
		db  22h	; "
		db 0C3h	; Ã
		db  14h
		db  8Eh	; 
		db  8Bh	; 
		db  17h
		db  0Eh
		db    0
		db    0
		db    2
		db  70h	; p
		db  22h	; "
		db  8Dh	; 
		db  10h
		db  6Eh	; n
		db  6Bh	; k
		db  17h
		db  0Eh
		db    0
		db    0
		db    2
		db  24h	; $
		db  31h	; 1
		db  4Fh	; O
		db  10h
		db 0F2h	; ò
		db  52h	; R
		db    6
		db    6
		db    0
		db    0
		db  0Eh
		db  31h	; 1
		db  61h	; a
		db  1Bh
		db  10h
		db  64h	; d
		db 0D0h	; Ð
		db    7
		db  67h	; g
		db    0
		db    0
		db  0Eh
		db  31h	; 1
		db  61h	; a
		db  1Bh
		db  10h
		db  61h	; a
		db 0D2h	; Ò
		db    6
		db  36h	; 6
		db    0
		db    0
		db  0Ch
		db  31h	; 1
		db  61h	; a
		db  1Fh
		db  10h
		db  31h	; 1
		db  50h	; P
		db    6
		db  36h	; 6
		db    0
		db    0
		db  0Ch
		db  31h	; 1
		db  61h	; a
		db  1Fh
		db  10h
		db  41h	; A
		db 0A0h	;  
		db    6
		db  36h	; 6
		db    0
		db    0
		db  0Ch
		db  21h	; !
		db  21h	; !
		db  9Ah	; 
		db  90h	; 
		db  53h	; S
		db 0A0h	;  
		db  56h	; V
		db  16h
		db    0
		db    0
		db  0Eh
		db  21h	; !
		db  21h	; !
		db  9Ah	; 
		db  90h	; 
		db  53h	; S
		db 0A0h	;  
		db  56h	; V
		db  16h
		db    0
		db    0
		db  0Eh
		db  61h	; a
		db  21h	; !
		db  19h
		db  10h
		db  53h	; S
		db 0A0h	;  
		db  58h	; X
		db  18h
		db    0
		db    0
		db  0Ch
		db  61h	; a
		db  21h	; !
		db  19h
		db  10h
		db  73h	; s
		db 0A0h	;  
		db  57h	; W
		db  17h
		db    0
		db    0
		db  0Ch
		db  21h	; !
		db  21h	; !
		db  1Bh
		db  10h
		db  71h	; q
		db 0A1h	; ¡
		db 0A6h	; ¦
		db  96h	; 
		db    0
		db    0
		db  0Eh
		db  85h	; 
		db 0A1h	; ¡
		db  91h	; 
		db  10h
		db 0F5h	; õ
		db 0F0h	; ð
		db  44h	; D
		db  45h	; E
		db    0
		db    0
		db    6
		db    7
		db  61h	; a
		db  51h	; Q
		db  10h
		db 0F5h	; õ
		db 0F0h	; ð
		db  33h	; 3
		db  25h	; %
		db    0
		db    0
		db    6
		db  13h
		db  11h
		db  8Ch	; 
		db  90h	; 
		db 0FFh
		db 0FFh
		db  21h	; !
		db    3
		db    0
		db    0
		db  0Eh
		db  38h	; 8
		db 0B1h	; ±
		db  8Ch	; 
		db  50h	; P
		db 0F3h	; ó
		db 0F5h	; õ
		db  0Dh
		db  33h	; 3
		db    0
		db    0
		db  0Eh
		db  87h	; 
		db  22h	; "
		db  91h	; 
		db  10h
		db 0F5h	; õ
		db 0F0h	; ð
		db  55h	; U
		db  54h	; T
		db    0
		db    0
		db    6
		db 0B3h	; ³
		db  90h	; 
		db  4Ah	; J
		db  10h
		db 0B6h	; ¶
		db 0D1h	; Ñ
		db  32h	; 2
		db  31h	; 1
		db    0
		db    0
		db  0Eh
		db    4
		db 0C2h	; Â
		db    0
		db  10h
		db 0FEh	; þ
		db 0F6h	; ö
		db 0F0h	; ð
		db 0B5h	; µ
		db    0
		db    0
		db  0Eh
		db    5
		db    1
		db  4Eh	; N
		db  90h	; 
		db 0DAh	; Ú
		db 0F0h	; ð
		db  15h
		db  13h
		db    0
		db    0
		db  0Ah
		db  31h	; 1
		db  32h	; 2
		db  44h	; D
		db  10h
		db 0F2h	; ò
		db 0F0h	; ð
		db  9Ah	; 
		db  27h	; '
		db    0
		db    0
		db    6
		db 0B0h	; °
		db 0D7h	; ×
		db 0C4h	; Ä
		db  90h	; 
		db 0A4h	; ¤
		db  40h	; @
		db    2
		db  42h	; B
		db    0
		db    0
		db    0
		db 0CAh	; Ê
		db 0CCh	; Ì
		db  84h	; 
		db  10h
		db 0F0h	; ð
		db  59h	; Y
		db 0F0h	; ð
		db  62h	; b
		db    0
		db    0
		db  0Ch
		db  30h	; 0
		db  35h	; 5
		db  35h	; 5
		db  10h
		db 0F5h	; õ
		db 0F0h	; ð
		db 0F0h	; ð
		db  9Bh	; 
		db    0
		db    0
		db    2
		db 0B4h	; ´
		db 0D7h	; ×
		db  87h	; 
		db  90h	; 
		db 0A4h	; ¤
		db  40h	; @
		db    2
		db  42h	; B
		db    0
		db    0
		db    6
		db    7
		db    5
		db  40h	; @
		db    0
		db    9
		db 0F6h	; ö
		db  53h	; S
		db  96h	; 
		db    0
		db    0
		db  0Eh
		db    9
		db    1
		db  4Eh	; N
		db  10h
		db 0DAh	; Ú
		db 0F1h	; ñ
		db  25h	; %
		db  15h
		db    0
		db    0
		db  0Ah
		db    6
		db    0
		db    9
		db  10h
		db 0F4h	; ô
		db 0F6h	; ö
		db 0A0h	;  
		db  46h	; F
		db    0
		db    0
		db  0Eh
		db    7
		db    0
		db    0
		db  10h
		db 0F0h	; ð
		db  5Ch	; \
		db 0F0h	; ð
		db 0DCh	; Ü
		db    0
		db    0
		db  0Eh
		db  1Ch
		db  0Ch
		db  1Eh
		db  10h
		db 0E5h	; å
		db  5Dh	; ]
		db  5Bh	; [
		db 0FAh	; ú
		db    0
		db    0
		db  0Eh
		db  11h
		db    1
		db  8Ah	; 
		db  50h	; P
		db 0F1h	; ñ
		db 0F1h	; ñ
		db  11h
		db 0B3h	; ³
		db    0
		db    0
		db    6
		db    0
		db    0
		db  40h	; @
		db  10h
		db 0D1h	; Ñ
		db 0F2h	; ò
		db  53h	; S
		db  56h	; V
		db    0
		db    0
		db  0Eh
		db  32h	; 2
		db  11h
		db  44h	; D
		db  10h
		db 0F8h	; ø
		db 0F5h	; õ
		db 0FFh
		db  7Fh	; 
		db    0
		db    0
		db  0Eh
		db    0
		db    2
		db  40h	; @
		db  10h
		db    9
		db 0F7h	; ÷
		db  53h	; S
		db  94h	; 
		db    0
		db    0
		db  0Eh
		db  11h
		db    1
		db  86h	; 
		db  90h	; 
		db 0F2h	; ò
		db 0A0h	;  
		db 0A8h	; ¨
		db 0A8h	; ¨
		db    0
		db    0
		db    8
		db    0
		db  13h
		db  50h	; P
		db  10h
		db 0F2h	; ò
		db 0F2h	; ò
		db  70h	; p
		db  72h	; r
		db    0
		db    0
		db  0Eh
		db 0F0h	; ð
		db 0E0h	; à
		db    0
		db 0D0h	; Ð
		db  11h
		db  11h
		db  11h
		db  11h
		db    0
		db    0
		db  0Eh
		db    7
		db  12h
		db  4Fh	; O
		db  10h
		db 0F2h	; ò
		db 0F2h	; ò
		db  60h	; `
		db  72h	; r
		db    0
		db    0
		db    8
		db    0
		db    0
		db  0Bh
		db  10h
		db 0A8h	; ¨
		db 0D6h	; Ö
		db  4Ch	; L
		db  4Fh	; O
		db    0
		db    0
		db    0
		db    0
		db    0
		db  0Dh
		db  10h
		db 0E8h	; è
		db 0A5h	; ¥
		db 0EFh	; ï
		db 0FFh
		db    0
		db    0
		db    6
		db  31h	; 1
		db  16h
		db  87h	; 
		db  90h	; 
		db 0A1h	; ¡
		db  7Dh	; }
		db  11h
		db  46h	; F
		db    0
		db    0
		db    8
		db  30h	; 0
		db  10h
		db  90h	; 
		db  10h
		db 0F4h	; ô
		db 0F4h	; ô
		db  49h	; I
		db  33h	; 3
		db    0
		db    0
		db  0Ch
		db  24h	; $
		db  31h	; 1
		db  54h	; T
		db  10h
		db  55h	; U
		db  50h	; P
		db 0FDh	; ý
		db  2Dh	; -
		db    0
		db    0
		db  0Eh
byte_213C6	db 10h			; DATA XREF: sub_22448+5Er
		db  10h
		db    1
		db    8
		db    1
		db    8
		db  10h
		db    1
		db  10h
		db    1
		db    4
		db    1
		db    4
		db    4
		db    2
		db    4
		db    2
		db    1
		db    1
		db    4
		db    4
		db    1
		db    4
		db    4
		db    4
		db    4
		db    4
		db    4
		db    1
		db    1
		db    1
		db    1
		db    4
		db    4
		db    1
		db    1
		db    1
		db    1
		db    4
		db    4
unk_213EE	db 0E0h	; à		; DATA XREF: sub_2222E+C3o
		db 0BDh	; ½
		db    0
		db    8
		db  38h	; 8
		db 0A6h	; ¦
		db    9
		db 0B6h	; ¶
		db  0Bh
		db  50h	; P
		db    0
		db 0C6h	; Æ
		db 0A8h	; ¨
		db  70h	; p
		db  4Ch	; L
		db  90h	; 
		db    0
		db  30h	; 0
		db    0
		db 0F0h	; ð
		db    4
		db  53h	; S
		db 0D6h	; Ö
		db  73h	; s
		db  4Fh	; O
		db  93h	; 
		db    0
		db  33h	; 3
		db    0
		db 0F3h	; ó
		db 0E0h	; à
		db 0BDh	; ½
		db    0
		db    8
		db 0E0h	; à
		db 0BDh	; ½
		db    0
		db    8
		db    3
		db 0A7h	; §
		db  0Ah
		db 0B7h	; ·
		db  0Dh
		db  51h	; Q
		db    1
		db 0C7h	; Ç
		db 0FAh	; ú
		db  71h	; q
		db  8Ch	; 
		db  91h	; 
		db    1
		db  31h	; 1
		db    0
		db 0F1h	; ñ
		db 0E0h	; à
		db 0BDh	; ½
		db    0
		db    8
		db 0E0h	; à
		db 0BDh	; ½
		db    0
		db    8
		db  57h	; W
		db 0A8h	; ¨
		db    9
		db 0B8h	; ¸
		db    0
		db  52h	; R
		db    1
		db 0C8h	; È
		db 0F7h	; ÷
		db  72h	; r
		db 0B5h	; µ
		db  92h	; 
		db    4
		db  32h	; 2
		db    0
		db 0F2h	; ò
		db 0E0h	; à
		db 0BDh	; ½
		db    0
		db    8
		db 0E0h	; à
		db 0BDh	; ½
		db    0
		db    8
		db    7
		db  54h	; T
		db 0F8h	; ø
		db  74h	; t
		db  47h	; G
		db  94h	; 
		db  0Ch
		db  34h	; 4
		db    0
		db 0F4h	; ô
		db 0E0h	; à
		db 0BDh	; ½
		db    0
		db    8
		db 0E0h	; à
		db 0BDh	; ½
		db    0
		db    8
		db  0Dh
		db  55h	; U
		db 0F5h	; õ
		db  75h	; u
		db 0A5h	; ¥
		db  95h	; 
		db    1
		db  35h	; 5
		db    0
		db 0F5h	; õ
		db 0E0h	; à
		db 0BDh	; ½
		db    0
		db    8
		db 0FFh
		db 0FFh
unk_21466	db  0Bh			; DATA XREF: sub_2222E+2Eo
		db  50h	; P
		db  0Bh
		db  50h	; P
		db    4
		db  53h	; S
		db    4
		db  53h	; S
		db  0Dh
		db  51h	; Q
		db  0Dh
		db  51h	; Q
		db    0
		db  52h	; R
		db    0
		db  52h	; R
		db    7
		db  54h	; T
		db    7
		db  54h	; T
		db  0Dh
		db  55h	; U
		db  0Dh
		db  55h	; U
		db 0FFh
		db 0FFh
byte_21480	db 0			; DATA XREF: sub_2222E+1Er
					; sub_2222E+81w ...
unk_21481	db  6Bh	; k		; DATA XREF: sub_225A6+27o
		db    1
		dw 181h
		db  98h	; 
		db    1
		db 0B0h	; °
		db    1
		db 0CAh	; Ê
		db    1
		db 0E5h	; å
		db    1
		db    2
		db    2
		db  20h
		db    2
		db  41h	; A
		db    2
		db  63h	; c
		db    2
		db  87h	; 
		db    2
		db 0AEh	; ®
		db    2
word_21499	dw 100h			; DATA XREF: sub_21837+Co
					; sub_220BE+1Br ...
		db    2
		db    8
		db    9
		db  0Ah
		db  10h
		db  11h
		db  12h
word_214A2	dw 403h			; DATA XREF: sub_21837+1Bo
					; sub_220BE+2Ar ...
		db    5
		db  0Bh
		db  0Ch
		db  0Dh
		db  13h
		db  14h
		db  15h
unk_214AB	db  16h			; DATA XREF: sub_225A6+43o
		db 16h
		db  16h
		db  16h
		db  16h
		db  16h
		db  16h
		db  16h
		db  16h
		db  16h
		db  16h
		db  16h
		db  16h
byte_214B8	db 0			; DATA XREF: sub_2222E+F7o
					; sub_225A6+38r ...
		db 0
		dw 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
word_214C8	dw 0			; DATA XREF: sub_221BF:loc_221F7o
					; sub_2222E+8Do ...
		db    0
		db    0
		dw 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		dw 0
		dw 0
		dw 0
byte_214DA	db 0			; DATA XREF: sub_22448+131o
					; sub_226B0+23o ...
		db    0
		db 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
byte_214EA	db 7Fh			; DATA XREF: sub_2222E+19w
					; sub_225A6+CBr
		db  7Fh	; 
		dw 7F7Fh
		db  7Fh	; 
		db  7Fh	; 
		db  7Fh	; 
		db  7Fh	; 
		db  7Fh	; 
		db  7Fh	; 
		db  7Fh	; 
		db  7Fh	; 
		db  7Fh	; 
		db  7Fh	; 
		db  7Fh	; 
		db  7Fh	; 
byte_214FA	db 0			; DATA XREF: sub_221BF+58o
					; sub_22448:loc_224E2o	...
		db    0
		db 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
word_21503	dw 0			; DATA XREF: sub_220BE+4Dw
					; sub_225A6+B6r
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
		db  58h	; X
byte_2153F	db 0			; DATA XREF: sub_217A9w
					; _core_startworx+Dw ...
aWorxToolkitVer	db 'WORX TOOLKIT VERSION 2.1 COPYRIGHT 1993 BY MYSTIC SOFTWARE',0
		db 0
word_2157C	dw 0FFFFh		; DATA XREF: _core_startworx+75w
					; seg1c75:366Cr ...
word_2157E	dw 0			; DATA XREF: sub_219A7+Aw sub_219CE+5w ...
word_21580	dw 0			; DATA XREF: sub_219A7+Ew sub_219CE+Dw ...
word_21582	dw 0			; DATA XREF: sub_219A7+13w
					; sub_219CE+1r
word_21584	dw 0			; DATA XREF: sub_219A7+17w
					; sub_219CE+9r
byte_21586	db 0			; DATA XREF: sub_219A7+1Cw
					; sub_219CE+11w ...
word_21587	dw 0			; DATA XREF: sub_22B42+ADw
					; sub_22C66+D4w ...
word_21589	dw 0			; DATA XREF: sub_22B42+B4w
					; sub_22C66+DBw ...
word_2158B	dw 0			; DATA XREF: sub_22B42+79w
					; sub_22B42+89r ...
word_2158D	dw 0			; DATA XREF: sub_22B42+85w
					; sub_22C66+55w ...
byte_2158F	db 0			; DATA XREF: sub_22B42:loc_22BE3w
					; sub_22C66+CFw ...
word_21590	dw 0			; DATA XREF: sub_22B42:loc_22B6Dw
					; sub_22C66+Fw	...
word_21592	dw 0			; DATA XREF: sub_22B42+53w
					; sub_22C66+Bw	...
byte_21594	db 1			; DATA XREF: sub_22738+5w
					; sub_22D90:loc_22E90r
word_21595	dw 0			; DATA XREF: sub_22B42+48o
					; sub_22B42+10Ao ...
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
word_215D5	dw 0			; DATA XREF: sub_22B42+EDo
					; sub_22C66+AEo ...
word_215D7	dw 0			; DATA XREF: sub_22D90+1Ar
					; sub_22D90+27w ...
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
word_21655	dw 0			; DATA XREF: sub_22B42+FEo
					; sub_22C66+C5w ...
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
byte_21695	db 0			; DATA XREF: sub_22754+5w sub_22B42+Ew ...
word_21696	dw 0			; DATA XREF: sub_22D90+46w
					; sub_22D90:loc_22DDCr	...
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		dw 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
byte_216D6	db 0F4h			; DATA XREF: sub_2233A+A9r
byte_216D7	db 0			; DATA XREF: sub_2233A+31r
					; sub_22D90+59r
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    2
		db    2
		db    2
		dw 102h
		db    1
		db    2
		db    0
word_216E7	dw 0			; DATA XREF: seg1c75:loc_22A4Cw
					; seg1c75:4122r ...
word_216E9	dw 0			; DATA XREF: seg1c75:4126r
					; sub_22F47+1Cw
		db 4 dup(0)
byte_216EF	db 0Ch			; DATA XREF: sub_21911w sub_221BFr ...
byte_216F0	db 0			; DATA XREF: sub_21916w sub_22448-54r
word_216F1	dw 0			; DATA XREF: seg1c75:3679r
					; sub_21FD4+1Dr ...
word_216F3	dw 0			; DATA XREF: sub_22B42+8Ew
					; sub_22B42+F0r ...
word_216F5	dw 0			; DATA XREF: sub_22448+8w
					; sub_22448+17w ...
byte_216F7	db 0			; DATA XREF: sub_2222E+26r
					; sub_2222E+FCr ...
byte_216F8	db 0			; DATA XREF: sub_2233A+10w
					; sub_2233A+49r ...
byte_216F9	db 0			; DATA XREF: sub_2222E+43r
					; sub_2233A+15w ...
byte_216FA	db 0			; DATA XREF: sub_22448:loc_224F3w
					; sub_22448+123w ...
byte_216FB	db 0			; DATA XREF: sub_2233A+Bw
					; sub_2233A+3Ar ...
byte_216FC	db 0			; DATA XREF: sub_2222E:loc_222A9w
					; sub_2222E:loc_222D0w	...
byte_216FD	db 0			; DATA XREF: sub_21CB9r sub_21DCB+1r ...
word_216FE	dw 0			; DATA XREF: sub_21DCB+7Ew
					; sub_21E96+65w ...
word_21700	dw 0			; DATA XREF: sub_21DCB+86w
					; sub_21E96+6Dw ...
word_21702	dw 0			; DATA XREF: sub_21DCB+69w
					; sub_21DCB+95r ...
word_21704	dw 0			; DATA XREF: sub_21DCB+70w
					; sub_21DCB+9Fr ...
		db    0
byte_21707	db 14h			; DATA XREF: sub_231C6+4Fo
		db 75h
		db 77h
		db 17h
byte_2170B	db 14h			; DATA XREF: sub_232ED+1Do
		db 74h
		db 76h
		db 16h
		db 0
		db 0
word_21711	dw 0			; DATA XREF: sub_23069+30w
					; sub_231C6+3Cr ...
		db    0
word_21714	dw 0			; DATA XREF: sub_23069:loc_2308Dw
					; sub_23069+2Bw
		db    0
		db  64h	; d
		db    0
		db    0
		db    0
		db    0
		db    0
byte_2171D	db 0			; DATA XREF: sub_22EC2r sub_2301E+6w ...
		db 5 dup(0)
word_21723	dw 210h			; DATA XREF: sub_20B06r sub_20B16r ...
byte_21725	db 0			; DATA XREF: sub_2201Cr sub_2203Dr ...
word_21726	dw 0FFFFh		; DATA XREF: sub_21A3B+43r
					; sub_21A3B+80r ...
word_21728	dw 0			; DATA XREF: sub_21AD7+DCr
					; sub_21C0F+37o ...
word_2172A	dw 0			; DATA XREF: sub_21A3B+1Er
					; sub_21A3B+4Ao ...
word_2172C	dw 0			; DATA XREF: sub_21AD7+24w
		db    0
		db    0
		db    0
		db    0
word_21732	dw 0			; DATA XREF: sub_21A3B+19r
					; sub_21A3B+22r ...
word_21734	dw 0			; DATA XREF: sub_21AD7+32w
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
byte_21743	db 0			; DATA XREF: sub_21AD7:loc_21B27r
					; sub_21C0F:loc_21C55w	...
word_21744	dw 0			; DATA XREF: _core_startworx+1Dw
					; _core_closeworx+34r ...
word_21746	dw 0			; DATA XREF: _core_startworx+25w
					; _core_closeworx+39r ...

; =============== S U B	R O U T	I N E =======================================


sub_21748	proc near		; CODE XREF: sub_21C85+30p
		push	ax
		push	bx
		xor	bx, bx

loc_2174C::				; CODE XREF: sub_21748+Bj
		cmp	byte ptr es:[bx+di], 0
		jz	loc_21755
		inc	bx
		jmp	loc_2174C
; ---------------------------------------------------------------------------

loc_21755::				; CODE XREF: sub_21748+8j
		cmp	bx, 0
		jz	loc_21771
		mov	ah, es:[di]
		mov	es:[di], bl

loc_21760::				; CODE XREF: sub_21748+23j
		mov	al, es:[bx+di]
		mov	es:[bx+di+1], al
		dec	bx
		cmp	bx, 0
		ja	loc_21760
		mov	es:[di+1], ah

loc_21771::				; CODE XREF: sub_21748+10j
		pop	bx
		pop	ax
		retn
sub_21748	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================


sub_21774	proc near		; CODE XREF: sub_23141+10p
					; sub_23141+3Cp ...
		push	ax
		push	bx
		push	cx
		push	dx
		xor	ax, ax
		int	1Ah		; CLOCK	- GET TIME OF DAY
					; Return: CX:DX	= clock	count
					; AL = 00h if clock was	read or	written	(via AH=0,1) since the previous
					; midnight
					; Otherwise, AL	> 0
		add	bx, dx

loc_2177E::				; CODE XREF: sub_21774+Ej
		int	1Ah
		cmp	dx, bx
		jbe	loc_2177E
		pop	dx
		pop	cx
		pop	bx
		pop	ax
		retn
sub_21774	endp


; =============== S U B	R O U T	I N E =======================================


sub_21789	proc near		; CODE XREF: sub_21AD7+4Dp
					; sub_21C0F+12p
		push	cx
		push	ds
		push	si
		mov	cl, es:[di]
		xor	ch, ch
		mov	si, di
		mov	di, 2BDCh
		push	ds
		push	es
		pop	ds
		assume ds:nothing
		pop	es
		assume es:nothing
		inc	si
		rep movsb
		xor	cl, cl
		mov	es:[di], cl
		pop	si
		pop	ds
		assume ds:seg2608
		pop	cx
		mov	di, 2BDCh
		retn
sub_21789	endp


; =============== S U B	R O U T	I N E =======================================


sub_217A9	proc near		; DATA XREF: seg1c75:206Co
		mov	cs:byte_2153F, 1
		retn
sub_217A9	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================


_core_startworx	proc far		; CODE XREF: _startworx+3P
		push	ax
		push	bx
		push	cx
		push	dx
		push	bp
		push	di
		push	si
		push	ds
		push	es
		push	cs
		pop	ds
		assume ds:seg1c75
		cli
		cld
		mov	cs:byte_2153F, 0
		xor	ax, ax
		mov	es, ax
		assume es:nothing
		mov	di, 18Ch
		mov	ax, es:[di]
		mov	cs:word_21744, ax
		mov	ax, es:[di+2]
		mov	cs:word_21746, ax
		mov	ax, offset sub_219F3
		stosw
		mov	ax, cs
		stosw
		mov	ax, 4092h
		sub	ax, 4
		mov	cs:word_227BE, ax
		mov	ax, cs
		mov	cs:word_227C0, ax
		xor	ax, ax

loc_217F2::				; CODE XREF: _core_startworx+4Aj
		call	sub_22194
		inc	ah
		cmp	ah, 0
		jnz	loc_217F2
		mov	ax, 2001h
		call	sub_22194
		xor	ax, ax
		mov	es, ax
		mov	di, 20h	; ' '
		mov	ax, es:[di]
		mov	cs:off_1E93A, ax
		mov	ax, es:[di+2]
		mov	cs:word_1E93C, ax
		mov	ax, offset loc_22A2D
		stosw
		mov	ax, cs
		stosw
		mov	ax, 952h
		call	sub_22F47
		mov	cs:word_2157C, 952h
		pop	es
		assume es:nothing
		pop	ds
		assume ds:seg2608
		pop	si
		pop	di
		pop	bp
		pop	dx
		pop	cx
		pop	bx
		pop	ax
		sti
		retf
_core_startworx	endp


; =============== S U B	R O U T	I N E =======================================


sub_21837	proc near
		mov	dx, 20h	; ' '
		mov	cx, 5
		mov	si, offset unk_20D2A

loc_21840::				; CODE XREF: sub_21837:loc_21868j
		mov	ah, [si]
		inc	si
		mov	di, offset word_21499
		add	di, bx
		mov	al, [di]
		add	al, dl
		call	sub_22194
		mov	ah, [si]
		inc	si
		mov	di, offset word_214A2
		add	di, bx
		mov	al, [di]
		add	al, dl
		call	sub_22194
		add	dl, 20h	; ' '
		cmp	dl, 0A0h ; ' '
		jnz	loc_21868
		mov	dl, 0E0h ; 'à'

loc_21868::				; CODE XREF: sub_21837+2Dj
		loop	loc_21840
		mov	di, offset unk_20D34
		push	bx
		shl	bl, 1
		add	di, bx
		pop	bx
		mov	ax, [di]
		xchg	ah, al
		call	sub_22194
		retn
sub_21837	endp


; =============== S U B	R O U T	I N E =======================================


sub_2187B	proc near		; DATA XREF: seg1c75:2068o
		mov	ax, 1234h
		mov	dx, 5678h
		retn
sub_2187B	endp


; =============== S U B	R O U T	I N E =======================================


_core_closeworx	proc far		; CODE XREF: _closeworx+3P
		cld
		cli
		push	ax
		push	bx
		push	cx
		push	dx
		push	bp
		push	di
		push	si
		push	ds
		push	es
		push	cs
		pop	ds
		assume ds:seg1c75
		call	sub_2301E
		call	sub_22754
		call	sub_220B1
		call	sub_22744
		call	sub_21C65
		mov	di, 20h	; ' '
		xor	ax, ax
		mov	es, ax
		assume es:nothing
		mov	ax, cs:off_1E93A
		stosw
		mov	ax, cs:word_1E93C
		stosw
		mov	di, 18Ch
		xor	ax, ax
		mov	es, ax
		mov	ax, cs:word_21744
		stosw
		mov	ax, cs:word_21746
		stosw
		push	cs
		pop	ds
		cmp	cs:word_20AF0, 0FFFFh
		jz	loc_218D6
		mov	ah, 0Ah
		mov	dx, cs:word_20AF0
		call	cs:dword_20AF2

loc_218D6::				; CODE XREF: _core_closeworx+46j
		pop	es
		assume es:nothing
		pop	ds
		assume ds:seg2608
		pop	si
		pop	di
		pop	bp
		pop	dx
		pop	cx
		pop	bx
		pop	ax
		sti
		retf
_core_closeworx	endp


; =============== S U B	R O U T	I N E =======================================


sub_218E1	proc near		; DATA XREF: seg1c75:206Ao
		push	ax
		push	bx
		push	cx
		push	dx
		push	bp
		push	di
		push	si
		push	ds
		push	es
		call	sub_22754
		call	sub_220B1
		call	sub_22744
		call	sub_21C65
		mov	di, 18Ch
		xor	ax, ax
		mov	es, ax
		assume es:nothing
		mov	ax, cs:word_21744
		stosw
		mov	ax, cs:word_21746
		stosw
		pop	es
		assume es:nothing
		pop	ds
		pop	si
		pop	di
		pop	bp
		pop	dx
		pop	cx
		pop	bx
		pop	ax
		retn
sub_218E1	endp


; =============== S U B	R O U T	I N E =======================================


sub_21911	proc near		; DATA XREF: seg1c75:2046o
		mov	cs:byte_216EF, al
		retn
sub_21911	endp


; =============== S U B	R O U T	I N E =======================================


sub_21916	proc near		; DATA XREF: seg1c75:204Co
		mov	cs:byte_216F0, al
		retn
sub_21916	endp

		assume es:nothing, ds:seg1c75

; =============== S U B	R O U T	I N E =======================================


sub_2191B	proc near		; CODE XREF: sub_2192A+8p
					; sub_2192A+11p ...
		push	ax
		push	cx
		push	dx
		mov	cx, 8FFh

loc_21921::				; CODE XREF: sub_2191B+9j
		in	al, dx
		in	al, dx
		in	al, dx
		loop	loc_21921
		pop	dx
		pop	cx
		pop	ax
		retn
sub_2191B	endp


; =============== S U B	R O U T	I N E =======================================


sub_2192A	proc near		; DATA XREF: seg1c75:2066o
		push	bx
		push	dx
		mov	dx, 388h
		mov	al, 4
		out	dx, al
		call	sub_2191B
		mov	dx, 389h
		mov	al, 60h	; '`'
		out	dx, al
		call	sub_2191B
		mov	al, 80h	; ''
		out	dx, al
		call	sub_2191B
		mov	dx, 388h
		in	al, dx
		mov	bl, al
		mov	al, 2
		out	dx, al
		call	sub_2191B
		mov	dx, 389h
		mov	al, 0FFh
		out	dx, al
		call	sub_2191B
		mov	dx, 388h
		mov	al, 4
		out	dx, al
		call	sub_2191B
		mov	dx, 389h
		mov	al, 21h	; '!'
		out	dx, al
		call	sub_2191B
		mov	dx, 388h
		in	al, dx
		mov	bh, al
		mov	al, 4
		out	dx, al
		call	sub_2191B
		mov	dx, 389h
		mov	al, 60h	; '`'
		out	dx, al
		call	sub_2191B
		mov	dx, 389h
		mov	al, 80h	; ''
		out	dx, al
		call	sub_2191B
		and	bx, 0E0E0h
		and	bh, bl
		xor	ax, ax
		cmp	bh, 0
		jnz	loc_21997
		inc	ax

loc_21997::				; CODE XREF: sub_2192A+6Aj
		pop	dx
		pop	bx
		clc
		retn
sub_2192A	endp


; =============== S U B	R O U T	I N E =======================================


sub_2199B	proc near		; DATA XREF: seg1c75:2026o
		mov	ax, word ptr cs:aWorxToolkitVer+3Ah ; ""
		mov	word ptr cs:aWorxToolkitVer+3Ah, 0 ; ""
		retn
sub_2199B	endp


; =============== S U B	R O U T	I N E =======================================


sub_219A7	proc near		; DATA XREF: seg1c75:2032o
		mov	ax, bx
		xor	dx, dx
		mov	bx, 1193
		mul	bx
		cli
		mov	cs:word_2157E, ax
		mov	cs:word_21580, dx
		mov	cs:word_21582, ax
		mov	cs:word_21584, dx
		mov	cs:byte_21586, 0
		clc
		mov	ax, bx
		sti
		retn
sub_219A7	endp


; =============== S U B	R O U T	I N E =======================================


sub_219CE	proc near		; DATA XREF: seg1c75:2034o
		push	ax
		mov	ax, cs:word_21582
		mov	cs:word_2157E, ax
		mov	ax, cs:word_21584
		mov	cs:word_21580, ax
		mov	cs:byte_21586, 0
		clc
		pop	ax
		retn
sub_219CE	endp


; =============== S U B	R O U T	I N E =======================================


sub_219E8	proc near		; DATA XREF: seg1c75:2036o
		xor	ah, ah

loc_219EA::
		mov	al, cs:byte_21586
		retn
sub_219E8	endp

; ---------------------------------------------------------------------------
word_219EF	dw 0			; DATA XREF: sub_219F3+22w
					; sub_219F3+39r
word_219F1	dw 0			; DATA XREF: sub_219F3+26w
					; sub_219F3+3Dr
		assume es:nothing, ds:seg2608

; =============== S U B	R O U T	I N E =======================================


sub_219F3	proc far		; DATA XREF: _core_startworx+29o
		inc	cs:word_227B1
		push	ax
		push	bx
		push	cx
		push	dx
		push	bp
		push	di
		push	si
		push	ds
		push	es
		push	cs
		pop	ds
		assume ds:seg1c75
		cld
		mov	es, dx
		assume es:seg2608
		push	ax
		xchg	ah, al
		xor	ah, ah
		shl	ax, 1
		mov	si, ax
		pop	ax
		call	cs:word_20950[si]
		mov	cs:word_219EF, ax
		mov	cs:word_219F1, dx
		pop	es
		assume es:nothing
		pop	ds
		assume ds:seg2608
		pop	si
		pop	di
		pop	bp
		pop	dx
		pop	cx
		pop	bx
		pop	ax
		dec	cs:word_227B1
		mov	ax, cs:word_219EF
		mov	dx, cs:word_219F1
		iret
sub_219F3	endp

; ---------------------------------------------------------------------------
word_21A36	dw 0			; DATA XREF: sub_21A3B+14r
					; sub_21AD7+15w
word_21A38	dw 0			; DATA XREF: sub_21AD7+1Aw
byte_21A3A	db 0			; DATA XREF: sub_21A3B+Br sub_21AD7+Fw ...
		assume es:nothing, ds:seg1c75

; =============== S U B	R O U T	I N E =======================================


sub_21A3B	proc near		; CODE XREF: sub_20C7D+61p
					; sub_21C85+Dp	...
		push	bx
		push	cx
		push	dx
		push	bp
		push	di
		push	si
		push	ds
		push	es
		push	cs
		pop	ds
		push	bx
		cmp	cs:byte_21A3A, 0
		jz	loc_21A77
		assume es:nothing
		pop	bx
		lds	si, dword ptr cs:word_21A36
		assume ds:nothing
		add	si, cs:word_21732
		mov	ax, cs:word_2172A
		sub	ax, cs:word_21732
		cmp	ax, bx
		jnb	loc_21A68
		mov	bx, ax

loc_21A68::				; CODE XREF: sub_21A3B+29j
		add	cs:word_21732, bx
		mov	cx, bx
		rep movsb
		mov	ax, bx
		clc
		jmp	loc_21ACE
; ---------------------------------------------------------------------------
		db 90h
; ---------------------------------------------------------------------------
		assume es:nothing, ds:seg1c75

loc_21A77::				; CODE XREF: sub_21A3B+11j
		mov	ax, 4201h
		xor	cx, cx
		xor	dx, dx
		mov	bx, cs:word_21726
		int	21h		; DOS -	2+ - MOVE FILE READ/WRITE POINTER (LSEEK)
					; AL = method: offset from present location
		mov	si, offset word_2172A
		sub	ax, [si+8]
		sbb	dx, [si+0Ah]
		cmp	dx, [si+2]
		jb	loc_21A9E
		cmp	ax, [si]
		jb	loc_21A9E
		assume es:seg1c75
		xor	ax, ax
		xor	dx, dx
		jmp	loc_21ACC
; ---------------------------------------------------------------------------
		db 90h
; ---------------------------------------------------------------------------
		assume es:nothing

loc_21A9E::				; CODE XREF: sub_21A3B+56j
					; sub_21A3B+5Aj
		xchg	ax, bx
		xchg	cx, dx
		mov	ax, [si]
		mov	dx, [si+2]
		sub	ax, bx
		sbb	dx, cx
		pop	bx
		cmp	dx, 0
		ja	loc_21AB6
		cmp	bx, ax
		jbe	loc_21AB6

loc_21AB4::
		mov	bx, ax

loc_21AB6::				; CODE XREF: sub_21A3B+73j
					; sub_21A3B+77j
		push	ds
		mov	cx, bx
		mov	dx, di
		mov	bx, cs:word_21726
		mov	ax, es
		mov	ds, ax
		assume ds:nothing
		mov	ah, 3Fh
		int	21h		; DOS -	2+ - READ FROM FILE WITH HANDLE
					; BX = file handle, CX = number	of bytes to read
					; DS:DX	-> buffer
		pop	ds
		assume ds:seg1c75
		jmp	loc_21ACE
; ---------------------------------------------------------------------------
		db 90h
; ---------------------------------------------------------------------------
		assume es:seg1c75

loc_21ACC::				; CODE XREF: sub_21A3B+60j
		pop	bx
		stc
		assume es:nothing

loc_21ACE::				; CODE XREF: sub_21A3B+39j
					; sub_21A3B+8Ej
		pop	es
		pop	ds
		pop	si
		pop	di
		pop	bp
		pop	dx
		pop	cx
		pop	bx
		retn
sub_21A3B	endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================


sub_21AD7	proc near		; CODE XREF: sub_20C7D+3p
					; sub_2450D+24p ...
		push	bx
		push	cx
		push	si
		push	di
		push	es
		push	cs
		pop	ds
		call	sub_22F0D
		assume es:nothing
		cmp	bx, 0
		jz	loc_21B16
		assume es:nothing
		mov	cs:byte_21A3A, 1
		mov	cs:word_21A36, di
		mov	cs:word_21A38, es
		mov	cs:word_2172A, bx
		mov	cs:word_2172C, 0
		mov	cs:word_21732, 0
		mov	cs:word_21734, 0
		mov	ax, bx
		clc
		jmp	loc_21C09
; ---------------------------------------------------------------------------
		assume es:nothing

loc_21B16::				; CODE XREF: sub_21AD7+Dj
		mov	cs:byte_21A3A, 0
		cmp	cs:byte_2153F, 0
		jz	loc_21B27
		call	sub_21789

loc_21B27::				; CODE XREF: sub_21AD7+4Bj
		cmp	cs:byte_21743, 0
		jnz	loc_21B9F
		mov	ax, cs:word_21726
		cmp	ax, 0FFFFh
		jz	loc_21B50
		mov	cs:word_21726, 0FFFFh
		mov	bx, ax
		mov	ah, 3Eh
		xor	al, al
		int	21h		; DOS -	2+ - CLOSE A FILE WITH HANDLE
					; BX = file handle
		jnb	loc_21B50
		mov	word ptr cs:aWorxToolkitVer+3Ah, ax ; ""
		jmp	loc_21C02
; ---------------------------------------------------------------------------

loc_21B50::				; CODE XREF: sub_21AD7+5Fj
					; sub_21AD7+70j
		push	ds
		push	dx
		mov	ax, es
		mov	ds, ax
		assume ds:nothing
		mov	ax, 3D00h
		mov	dx, di
		int	21h		; DOS -	2+ - OPEN DISK FILE WITH HANDLE
					; DS:DX	-> ASCIZ filename
					; AL = access mode
					; 0 - read
		pop	dx
		pop	ds
		assume ds:seg2608
		jnb	loc_21B68
		mov	word ptr cs:aWorxToolkitVer+3Ah, ax ; ""
		jmp	loc_21C02
; ---------------------------------------------------------------------------

loc_21B68::				; CODE XREF: sub_21AD7+88j
		mov	cs:word_21726, ax
		mov	bx, ax
		mov	ax, 4202h
		xor	cx, cx
		xor	dx, dx
		int	21h		; DOS -	2+ - MOVE FILE READ/WRITE POINTER (LSEEK)
					; AL = method: offset from end of file
		mov	si, offset word_2172A
		mov	[si], ax
		mov	[si+2],	dx
		mov	word ptr [si+8], 0
		mov	word ptr [si+0Ah], 0
		mov	bx, cs:word_21726
		mov	ax, 4200h
		xor	cx, cx
		xor	dx, dx
		int	21h		; DOS -	2+ - MOVE FILE READ/WRITE POINTER (LSEEK)
					; AL = method: offset from beginning of	file
		mov	ax, [si]
		mov	dx, [si+2]
		jmp	loc_21C09
; ---------------------------------------------------------------------------
		db  90h	; 
; ---------------------------------------------------------------------------
		assume ds:seg1c75

loc_21B9F::				; CODE XREF: sub_21AD7+56j
		call	sub_23184
		mov	ax, 4200h
		mov	bx, cs:word_21726
		xor	cx, cx
		mov	dx, 2
		int	21h		; DOS -	2+ - MOVE FILE READ/WRITE POINTER (LSEEK)
					; AL = method: offset from beginning of	file
		jb	loc_21C09
		mov	cx, cs:word_21728

loc_21BB8::				; CODE XREF: sub_21AD7+104j
					; sub_21AD7+10Fj
		jcxz	loc_21C02
		push	cx
		mov	cx, 19h
		mov	dx, offset word_2172A
		mov	bx, cs:word_21726
		mov	ah, 3Fh
		int	21h		; DOS -	2+ - READ FROM FILE WITH HANDLE
					; BX = file handle, CX = number	of bytes to read
					; DS:DX	-> buffer
		pop	cx
		dec	cx
		xor	bx, bx
		mov	si, dx
		add	si, 0Ch

loc_21BD3::				; CODE XREF: sub_21AD7+107j
		lodsb
		cmp	al, 0
		jz	loc_21BE0
		cmp	al, es:[bx+di]
		jnz	loc_21BB8
		inc	bx
		jmp	loc_21BD3
; ---------------------------------------------------------------------------

loc_21BE0::				; CODE XREF: sub_21AD7+FFj
		cmp	byte ptr es:[bx+di], 0
		jz	loc_21BE8
		jmp	loc_21BB8
; ---------------------------------------------------------------------------

loc_21BE8::				; CODE XREF: sub_21AD7+10Dj
		mov	si, offset word_2172A
		mov	dx, [si+8]
		mov	cx, [si+0Ah]
		mov	bx, cs:word_21726
		mov	ax, 4200h
		int	21h		; DOS -	2+ - MOVE FILE READ/WRITE POINTER (LSEEK)
					; AL = method: offset from beginning of	file
		mov	ax, [si]
		mov	dx, [si+2]
		jnb	loc_21C09
		assume es:nothing

loc_21C02::				; CODE XREF: sub_21AD7+76j
					; sub_21AD7+8Ej ...
		stc
		mov	dx, 0FFFFh
		mov	ax, 0FFFFh
		assume es:nothing

loc_21C09::				; CODE XREF: sub_21AD7+3Cj
					; sub_21AD7+C5j ...
		pop	es
		assume es:seg2608
		pop	di
		pop	si
		pop	cx
		pop	bx
		retn
sub_21AD7	endp


; =============== S U B	R O U T	I N E =======================================


sub_21C0F	proc near		; DATA XREF: seg1c75:2048o
		push	bx
		push	cx
		push	dx
		push	es
		call	sub_21C65
		call	sub_22F0D
		assume es:nothing
		cmp	cs:byte_2153F, 0
		jz	loc_21C24
		call	sub_21789

loc_21C24::				; CODE XREF: sub_21C0F+10j
		push	ds
		mov	dx, di
		mov	ax, es
		mov	ds, ax
		assume ds:nothing
		mov	ax, 3D00h
		int	21h		; DOS -	2+ - OPEN DISK FILE WITH HANDLE
					; DS:DX	-> ASCIZ filename
					; AL = access mode
					; 0 - read
		pop	ds
		assume ds:seg1c75
		jnb	loc_21C3B
		mov	word ptr cs:aWorxToolkitVer+3Ah, ax ; ""
		stc
		jmp	loc_21C60
; ---------------------------------------------------------------------------
		db  90h	; 
; ---------------------------------------------------------------------------

loc_21C3B::				; CODE XREF: sub_21C0F+22j
		mov	cs:word_21726, ax
		mov	bx, ax
		mov	ah, 3Fh	; '?'
		mov	cx, 2
		mov	dx, offset word_21728
		int	21h		; DOS -	2+ - READ FROM FILE WITH HANDLE
					; BX = file handle, CX = number	of bytes to read
					; DS:DX	-> buffer
		jnb	loc_21C55
		mov	word ptr cs:aWorxToolkitVer+3Ah, ax ; ""
		stc
		jmp	loc_21C60
; ---------------------------------------------------------------------------
		db  90h	; 
; ---------------------------------------------------------------------------

loc_21C55::				; CODE XREF: sub_21C0F+3Cj
		mov	cs:byte_21743, 1
		mov	ax, cs:word_21728
		clc

loc_21C60::				; CODE XREF: sub_21C0F+29j
					; sub_21C0F+43j
		pop	es
		assume es:seg2608
		pop	dx
		pop	cx
		pop	bx
		retn
sub_21C0F	endp


; =============== S U B	R O U T	I N E =======================================


sub_21C65	proc near		; CODE XREF: _core_closeworx+19p
					; sub_218E1+12p ...
		push	ax
		push	bx
		mov	bx, cs:word_21726
		cmp	bx, 0FFFFh
		jz	loc_21C75
		mov	ah, 3Eh
		int	21h		; DOS -	2+ - CLOSE A FILE WITH HANDLE
					; BX = file handle

loc_21C75::				; CODE XREF: sub_21C65+Aj
		mov	cs:byte_21743, 0
		mov	cs:word_21726, 0FFFFh
		pop	bx
		pop	ax
		retn
sub_21C65	endp


; =============== S U B	R O U T	I N E =======================================


sub_21C85	proc near		; DATA XREF: seg1c75:2054o
		push	ax
		push	bx
		push	cx
		push	di
		mov	cl, al
		xor	ch, ch

loc_21C8D::				; CODE XREF: sub_21C85+1Dj
		jcxz	loc_21CA4
		mov	bx, 1
		call	sub_21A3B
		cmp	ax, 0
		jz	loc_21CA5
		cmp	byte ptr es:[di], 0Ah
		jz	loc_21CA4
		inc	di
		dec	cx
		jmp	loc_21C8D
; ---------------------------------------------------------------------------

loc_21CA4::				; CODE XREF: sub_21C85:loc_21C8Dj
					; sub_21C85+19j
		inc	di

loc_21CA5::				; CODE XREF: sub_21C85+13j
		mov	byte ptr es:[di], 0
		pop	di
		pop	cx
		pop	bx
		pop	ax
		cmp	cs:byte_2153F, 0
		jz	locret_21CB8
		call	sub_21748

locret_21CB8::				; CODE XREF: sub_21C85+2Ej
		retn
sub_21C85	endp


; =============== S U B	R O U T	I N E =======================================


sub_21CB9	proc near		; DATA XREF: seg1c75:2058o
		mov	al, cs:byte_216FD
		xor	ah, ah
		and	ax, 1
		retn
sub_21CB9	endp

; ---------------------------------------------------------------------------
unk_21CC3	db    0			; DATA XREF: seg1c75:364Fo
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    2
		db    2
		db    2
		db    2
		db    2
		db    2
		db    2
		db    2
		db    2
		db    2
		db    2
		db    2
		db    2
		db    2
		db    3
		db    3
		db    3
		db    3
		db    3
		db    3
		db    3
		db    3
		db    3
		db    3
		db    3
		db    3
		db    4
		db    4
		db    4
		db    4
		db    4
		db    4
		db    4
		db    4
		db    4
		db    4
		db    4
		db    5
		db    5
		db    5
		db    5
		db    5
		db    5
		db    5
		db    5
		db    5
		db    6
		db    6
		db    6
		db    6
		db    6
		db    6
		db    6
		db    6
		db    7
		db    7
		db    7
		db    7
		db    7
		db    7
		db    8
		db    8
		db    8
		db    8
		db    8
		db    8
		db    9
		db    9
		db    9
		db    9
		db    9
		db  0Ah
		db  0Ah
		db  0Ah
		db  0Ah
		db  0Bh
		db  0Bh
		db  0Bh
		db  0Bh
		db  0Ch
		db  0Ch
		db  0Ch
		db  0Dh
		db  0Dh
		db  0Dh
		db  0Eh
		db  0Eh
		db  0Fh
		db  0Fh
		db  10h
		db  10h
		db  11h
		db  12h
		db  12h
		db  13h
		db  14h
		db  15h
		db  17h
		db  19h
		db  1Bh
		db  20h
		db  25h	; %
		db  27h	; '
		db  29h	; )
		db  2Bh	; +
		db  2Ch	; ,
		db  2Dh	; -
		db  2Eh	; .
		db  2Eh	; .
		db  2Fh	; /
		db  30h	; 0
		db  30h	; 0
		db  31h	; 1
		db  31h	; 1
		db  32h	; 2
		db  32h	; 2
		db  33h	; 3
		db  33h	; 3
		db  33h	; 3
		db  34h	; 4
		db  34h	; 4
		db  34h	; 4
		db  35h	; 5
		db  35h	; 5
		db  35h	; 5
		db  35h	; 5
		db  36h	; 6
		db  36h	; 6
		db  36h	; 6
		db  36h	; 6
		db  37h	; 7
		db  37h	; 7
		db  37h	; 7
		db  37h	; 7
		db  37h	; 7
		db  38h	; 8
		db  38h	; 8
		db  38h	; 8
		db  38h	; 8
		db  38h	; 8
		db  38h	; 8
		db  39h	; 9
		db  39h	; 9
		db  39h	; 9
		db  39h	; 9
		db  39h	; 9
		db  39h	; 9
		db  3Ah	; :
		db  3Ah	; :
		db  3Ah	; :
		db  3Ah	; :
		db  3Ah	; :
		db  3Ah	; :
		db  3Ah	; :
		db  3Ah	; :
		db  3Bh	; ;
		db  3Bh	; ;
		db  3Bh	; ;
		db  3Bh	; ;
		db  3Bh	; ;
		db  3Bh	; ;
		db  3Bh	; ;
		db  3Bh	; ;
		db  3Bh	; ;
		db  3Ch	; <
		db  3Ch	; <
		db  3Ch	; <
		db  3Ch	; <
		db  3Ch	; <
		db  3Ch	; <
		db  3Ch	; <
		db  3Ch	; <
		db  3Ch	; <
		db  3Ch	; <
		db  3Ch	; <
		db  3Dh	; =
		db  3Dh	; =
		db  3Dh	; =
		db  3Dh	; =
		db  3Dh	; =
		db  3Dh	; =
		db  3Dh	; =
		db  3Dh	; =
		db  3Dh	; =
		db  3Dh	; =
		db  3Dh	; =
		db  3Dh	; =
		db  3Eh	; >
		db  3Eh	; >
		db  3Eh	; >
		db  3Eh	; >
		db  3Eh	; >
		db  3Eh	; >
		db  3Eh	; >
		db  3Eh	; >
		db  3Eh	; >
		db  3Eh	; >
		db  3Eh	; >
		db  3Eh	; >
		db  3Eh	; >
		db  3Eh	; >
		db  3Fh	; ?
		db  3Fh	; ?
		db  3Fh	; ?
		db  3Fh	; ?
		db  3Fh	; ?
		db  3Fh	; ?
		db  3Fh	; ?
		db  3Fh	; ?
		db  3Fh	; ?
		db  3Fh	; ?
		db  3Fh	; ?
		db  3Fh	; ?
		db  3Fh	; ?
		db  3Fh	; ?
		db  3Fh	; ?
		db  3Fh	; ?
		db  3Fh	; ?
		db  3Fh	; ?
		db  3Fh	; ?
		db  3Fh	; ?
		db  3Fh	; ?
		db  3Fh	; ?
		db  3Fh	; ?
		db  3Fh	; ?
		db  3Fh	; ?
		db  3Fh	; ?
		db  3Fh	; ?
word_21DC3	dw 18643		; DATA XREF: sub_21DC5w sub_21DCB+4Er	...

; =============== S U B	R O U T	I N E =======================================


sub_21DC5	proc near		; DATA XREF: seg1c75:20A6o
		mov	cs:word_21DC3, bx
		retn
sub_21DC5	endp


; =============== S U B	R O U T	I N E =======================================


sub_21DCB	proc near		; DATA XREF: seg1c75:2056o
		cli
		cmp	cs:byte_216FD, 0
		jz	loc_21DD7
		call	sub_21FD4

loc_21DD7::				; CODE XREF: sub_21DCB+7j
		call	sub_22F0D
		add	di, 1Ah

loc_21DDD::				; CODE XREF: sub_21DCB+2Aj
		cmp	byte ptr es:[di], 1
		jz	loc_21DF7
		cmp	byte ptr es:[di], 0
		jnz	loc_21DEC
		jmp	loc_21E92
; ---------------------------------------------------------------------------

loc_21DEC::				; CODE XREF: sub_21DCB+1Cj
		mov	ax, es:[di+1]
		add	di, ax
		add	di, 4
		jmp	loc_21DDD
; ---------------------------------------------------------------------------

loc_21DF7::				; CODE XREF: sub_21DCB+16j
		mov	ax, es:[di+1]
		mov	cs:word_21F63, ax
		mov	al, es:[di+4]
		xor	ah, ah
		mov	bx, 100h
		sub	bx, ax
		mov	dx, 0Fh
		mov	ax, 4240h
		cmp	bx, 0
		jz	loc_21E92
		div	bx
		xor	dx, dx
		mov	bx, cs:word_21DC3
		div	bx
		mov	cs:word_21F73, ax
		xor	ax, ax
		mov	bx, cs:word_21DC3
		div	bx
		mov	cs:word_21F6C, ax
		add	di, 20h	; ' '
		mov	cs:word_21702, di
		mov	ax, es
		mov	cs:word_21704, ax
		xor	ax, ax
		mov	es, ax
		assume es:nothing
		mov	di, 20h	; ' '
		mov	ax, es:[di]
		mov	cs:word_216FE, ax
		mov	ax, es:[di+2]
		mov	cs:word_21700, ax
		mov	ax, offset loc_21F48
		stosw
		mov	ax, cs
		stosw
		mov	al, 0B0h ; '°'
		out	43h, al		; Timer	8253-5 (AT: 8254.2).
		mov	di, cs:word_21702
		mov	cs:word_21F7B, di
		mov	ax, cs:word_21704
		mov	cs:word_21F76, ax
		mov	es, ax
		assume es:nothing
		in	al, 61h		; PC/XT	PPI port B bits:
					; 0: Tmr 2 gate	ÍËÍ OR	03H=spkr ON
					; 1: Tmr 2 data	Í¼  AND	0fcH=spkr OFF
					; 3: 1=read high switches
					; 4: 0=enable RAM parity checking
					; 5: 0=enable I/O channel check
					; 6: 0=hold keyboard clock low
					; 7: 0=enable kbrd
		or	al, 3
		out	61h, al		; PC/XT	PPI port B bits:
					; 0: Tmr 2 gate	ÍËÍ OR	03H=spkr ON
					; 1: Tmr 2 data	Í¼  AND	0fcH=spkr OFF
					; 3: 1=read high switches
					; 4: 0=enable RAM parity checking
					; 5: 0=enable I/O channel check
					; 6: 0=hold keyboard clock low
					; 7: 0=enable kbrd
		mov	dx, 12h
		mov	ax, 2D0Ch
		mov	bx, cs:word_21DC3
		div	bx
		xor	ah, ah
		call	sub_22F47
		mov	al, 1
		mov	cs:byte_216FD, al

loc_21E92::				; CODE XREF: sub_21DCB+1Ej
					; sub_21DCB+48j
		xor	ax, ax
		sti
		retn
sub_21DCB	endp


; =============== S U B	R O U T	I N E =======================================


sub_21E96	proc near		; DATA XREF: seg1c75:20A0o
		cli
		cmp	cs:byte_216FD, 0
		jz	loc_21EA2
		call	sub_21FD4

loc_21EA2::				; CODE XREF: sub_21E96+7j
		call	sub_22F0D
		mov	cx, 2Ch	; ','
		mov	si, di
		mov	ax, es
		mov	ds, ax
		assume ds:seg2608
		mov	di, offset aRiff ; "RIFF"
		mov	ax, cs
		mov	es, ax
		assume es:seg1c75
		cld
		rep movsb
		push	ds
		pop	es
		assume es:seg2608
		mov	di, si
		push	cs
		pop	ds
		assume ds:seg1c75
		mov	ax, cs:word_242B3
		add	ax, di
		mov	cs:word_21F63, ax
		mov	ax, cs:word_242A3
		xor	dx, dx
		mov	bx, cs:word_21DC3
		div	bx
		mov	cs:word_21F73, ax
		xor	ax, ax
		mov	bx, cs:word_21DC3
		div	bx
		mov	cs:word_21F6C, ax
		mov	cs:word_21702, di
		mov	ax, es
		mov	cs:word_21704, ax
		xor	ax, ax
		mov	es, ax
		assume es:nothing
		mov	di, 20h	; ' '
		mov	ax, es:[di]
		mov	cs:word_216FE, ax
		mov	ax, es:[di+2]
		mov	cs:word_21700, ax
		mov	ax, offset loc_21F48
		stosw
		mov	ax, cs
		stosw
		mov	al, 0B0h ; '°'
		out	43h, al		; Timer	8253-5 (AT: 8254.2).
		mov	di, cs:word_21702
		mov	cs:word_21F7B, di
		mov	ax, cs:word_21704
		mov	cs:word_21F76, ax
		mov	es, ax
		assume es:nothing
		in	al, 61h		; PC/XT	PPI port B bits:
					; 0: Tmr 2 gate	ÍËÍ OR	03H=spkr ON
					; 1: Tmr 2 data	Í¼  AND	0fcH=spkr OFF
					; 3: 1=read high switches
					; 4: 0=enable RAM parity checking
					; 5: 0=enable I/O channel check
					; 6: 0=hold keyboard clock low
					; 7: 0=enable kbrd
		or	al, 3
		out	61h, al		; PC/XT	PPI port B bits:
					; 0: Tmr 2 gate	ÍËÍ OR	03H=spkr ON
					; 1: Tmr 2 data	Í¼  AND	0fcH=spkr OFF
					; 3: 1=read high switches
					; 4: 0=enable RAM parity checking
					; 5: 0=enable I/O channel check
					; 6: 0=hold keyboard clock low
					; 7: 0=enable kbrd
		mov	dx, 12h
		mov	ax, 2D0Ch
		mov	bx, cs:word_21DC3
		div	bx
		xor	ah, ah
		call	sub_22F47
		mov	al, 1
		mov	cs:byte_216FD, al
		sti
		retn
sub_21E96	endp

; ---------------------------------------------------------------------------
		dw 0
; ---------------------------------------------------------------------------

loc_21F48::				; DATA XREF: sub_21DCB+8Ao
					; sub_21E96+71o
		push	ax
		push	ds
		push	cs
		pop	ds
		sub	cs:word_2157E, 40h ; '@'
		sbb	cs:word_21580, 0
		adc	cs:byte_21586, 0
; ---------------------------------------------------------------------------
		db 2Eh
		db  81h	; 
		db  3Eh	; >
		db  4Bh	; K
		db  36h	; 6
word_21F63	dw 5555h		; DATA XREF: sub_21DCB+30w
					; sub_21E96+2Ew
; ---------------------------------------------------------------------------
		jnb	loc_21F97
; ---------------------------------------------------------------------------
		db  2Eh	; .
		db  81h	; 
		db    6
		db  16h
		db  36h	; 6
word_21F6C	dw 5555h		; DATA XREF: sub_21DCB+62w
					; sub_21E96+4Cw
		db  2Eh	; .
		db  81h	; 
		db  16h
		db  4Bh	; K
		db  36h	; 6
word_21F73	dw 5555h		; DATA XREF: sub_21DCB+55w
					; sub_21E96+3Fw
		db 0B8h	; ¸
word_21F76	dw 5555h		; DATA XREF: sub_21DCB+A3w
					; sub_21E96+8Aw
		db  8Eh	; 
		db 0D8h	; Ø
		db 0A0h	;  
word_21F7B	dw 5555h		; DATA XREF: sub_21DCB+9Aw
					; sub_21E96+81w
; ---------------------------------------------------------------------------
		xor	ah, ah
		add	ax, offset unk_21CC3
		mov	cs:word_21F88, ax
; ---------------------------------------------------------------------------
		db  2Eh	; .
		db 0A0h	;  
word_21F88	dw 5555h		; DATA XREF: seg1c75:3652w
; ---------------------------------------------------------------------------
		out	42h, al		; Timer	8253-5 (AT: 8254.2).
		xor	al, al
		out	42h, al		; Timer	8253-5 (AT: 8254.2).
		mov	al, 20h	; ' '
		out	20h, al		; Interrupt controller,	8259A.
		pop	ds
		assume ds:seg2608
		pop	ax
		iret
; ---------------------------------------------------------------------------

loc_21F97::				; CODE XREF: seg1c75:3635j
		push	di
		mov	al, 34h	; '4'
		out	43h, al		; Timer	8253-5 (AT: 8254.2).
		mov	ax, cs:word_2157C
		call	sub_22F47
		in	al, 61h		; PC/XT	PPI port B bits:
					; 0: Tmr 2 gate	ÍËÍ OR	03H=spkr ON
					; 1: Tmr 2 data	Í¼  AND	0fcH=spkr OFF
					; 3: 1=read high switches
					; 4: 0=enable RAM parity checking
					; 5: 0=enable I/O channel check
					; 6: 0=hold keyboard clock low
					; 7: 0=enable kbrd
		and	al, 0FCh
		out	61h, al		; PC/XT	PPI port B bits:
					; 0: Tmr 2 gate	ÍËÍ OR	03H=spkr ON
					; 1: Tmr 2 data	Í¼  AND	0fcH=spkr OFF
					; 3: 1=read high switches
					; 4: 0=enable RAM parity checking
					; 5: 0=enable I/O channel check
					; 6: 0=hold keyboard clock low
					; 7: 0=enable kbrd
		mov	ax, cs:word_216F1
		out	42h, al		; Timer	8253-5 (AT: 8254.2).
		xchg	al, ah
		out	42h, al		; Timer	8253-5 (AT: 8254.2).
		xor	al, al
		mov	cs:byte_216FD, al
		push	es
		mov	di, 20h	; ' '
		xor	ax, ax
		mov	es, ax
		assume es:nothing
		mov	ax, cs:word_216FE
		stosw
		mov	ax, cs:word_21700
		stosw
		pop	es
		assume es:nothing
		mov	al, 20h	; ' '
		out	20h, al		; Interrupt controller,	8259A.
		pop	di
		pop	ds
		pop	ax
		iret

; =============== S U B	R O U T	I N E =======================================


sub_21FD4	proc near		; CODE XREF: sub_21DCB+9p sub_21E96+9p
					; DATA XREF: ...
		cli
		push	ax
		push	bx
		push	cx
		push	dx
		push	bp
		push	di
		push	si
		push	ds
		push	es
		push	cs
		pop	ds
		assume ds:seg1c75
		mov	al, 34h	; '4'
		out	43h, al		; Timer	8253-5 (AT: 8254.2).
		mov	ax, cs:word_2157C
		call	sub_22F47
		in	al, 61h		; PC/XT	PPI port B bits:
					; 0: Tmr 2 gate	ÍËÍ OR	03H=spkr ON
					; 1: Tmr 2 data	Í¼  AND	0fcH=spkr OFF
					; 3: 1=read high switches
					; 4: 0=enable RAM parity checking
					; 5: 0=enable I/O channel check
					; 6: 0=hold keyboard clock low
					; 7: 0=enable kbrd
		and	al, 0FCh
		out	61h, al		; PC/XT	PPI port B bits:
					; 0: Tmr 2 gate	ÍËÍ OR	03H=spkr ON
					; 1: Tmr 2 data	Í¼  AND	0fcH=spkr OFF
					; 3: 1=read high switches
					; 4: 0=enable RAM parity checking
					; 5: 0=enable I/O channel check
					; 6: 0=hold keyboard clock low
					; 7: 0=enable kbrd
		mov	ax, cs:word_216F1
		out	42h, al		; Timer	8253-5 (AT: 8254.2).
		xchg	al, ah
		out	42h, al		; Timer	8253-5 (AT: 8254.2).
		xor	al, al
		mov	cs:byte_216FD, al
		mov	di, 20h	; ' '
		xor	ax, ax
		mov	es, ax
		assume es:nothing
		mov	ax, cs:word_216FE
		stosw
		mov	ax, cs:word_21700
		stosw
		pop	es
		assume es:nothing
		pop	ds
		assume ds:seg2608
		pop	si
		pop	di
		pop	bp
		pop	dx
		pop	cx
		pop	bx
		pop	ax
		retn
sub_21FD4	endp

		assume es:nothing, ds:seg1c75

; =============== S U B	R O U T	I N E =======================================


sub_2201C	proc near		; CODE XREF: sub_23069+7Dp
					; DATA XREF: seg1c75:2060o
		cmp	cs:byte_21725, 1
		jb	loc_22037
		mov	dx, cs:word_21723
		add	dx, 4
		mov	al, 22h	; '"'
		out	dx, al
		inc	dx
		mov	al, bl
		out	dx, al
		xor	ax, ax
		clc
		retn
; ---------------------------------------------------------------------------

loc_22037::				; CODE XREF: sub_2201C+6j
		xor	ax, ax
		not	ax
		clc
		retn
sub_2201C	endp


; =============== S U B	R O U T	I N E =======================================


sub_2203D	proc near		; CODE XREF: sub_23069+82p
					; DATA XREF: seg1c75:2064o
		cmp	cs:byte_21725, 1
		jb	loc_22058
		mov	dx, cs:word_21723
		add	dx, 4
		mov	al, 26h	; '&'
		out	dx, al
		inc	dx
		mov	al, bl
		out	dx, al
		xor	ax, ax
		clc
		retn
; ---------------------------------------------------------------------------

loc_22058::				; CODE XREF: sub_2203D+6j
		xor	ax, ax
		not	ax
		clc
		retn
sub_2203D	endp


; =============== S U B	R O U T	I N E =======================================


sub_2205E	proc near		; CODE XREF: sub_23069+87p
					; DATA XREF: seg1c75:2062o
		cmp	cs:byte_21725, 1
		jb	loc_22079
		mov	dx, cs:word_21723
		add	dx, 4
		mov	al, 4
		out	dx, al
		inc	dx
		mov	al, bl
		out	dx, al
		xor	ax, ax
		clc
		retn
; ---------------------------------------------------------------------------

loc_22079::				; CODE XREF: sub_2205E+6j
		xor	ax, ax
		not	ax
		clc
		retn
sub_2205E	endp


; =============== S U B	R O U T	I N E =======================================


sub_2207F	proc near		; DATA XREF: seg1c75:203Eo
		push	bx
		push	cx
		push	si
		push	di
		push	ds
		push	es
		mov	ax, es:[di]
		cmp	ax, 'BS'
		jz	loc_22091
		stc
		jmp	loc_220AA
; ---------------------------------------------------------------------------
		db  90h	; 
; ---------------------------------------------------------------------------

loc_22091::				; CODE XREF: sub_2207F+Cj
		mov	si, offset byte_20E46
		push	ds
		push	es
		pop	ds
		assume ds:nothing
		pop	es
		assume es:nothing
		xchg	di, si
		mov	ax, 0Bh
		mul	bx
		add	di, ax
		add	si, 24h	; '$'
		mov	cx, 0Bh
		rep movsb
		clc

loc_220AA::				; CODE XREF: sub_2207F+Fj
		pop	es
		pop	ds
		assume ds:seg2608
		pop	di
		pop	si
		pop	cx
		pop	bx
		retn
sub_2207F	endp


; =============== S U B	R O U T	I N E =======================================


sub_220B1	proc near		; CODE XREF: _core_closeworx+13p
					; sub_218E1+Cp
		xor	ax, ax

loc_220B3::				; CODE XREF: sub_220B1+Aj
		call	sub_22194
		inc	ah
		cmp	ah, 0
		jnz	loc_220B3
		retn
sub_220B1	endp

		assume es:nothing, ds:seg1c75

; =============== S U B	R O U T	I N E =======================================


sub_220BE	proc near		; CODE XREF: sub_22448+156p
					; sub_226B0:loc_226C9p
		push	ax
		push	bx
		push	di
		push	dx
		push	si
		mov	si, offset byte_20E46
		push	bx
		mov	ax, 0Bh
		xor	bh, bh
		mul	bx
		add	si, ax
		pop	bx
		xchg	bl, bh
		xor	bh, bh
		mov	al, [si]
		mov	ah, 20h	; ' '
		add	ah, byte ptr cs:word_21499[bx]
		xchg	al, ah
		call	sub_22194
		inc	si
		mov	al, [si]
		mov	ah, 20h	; ' '
		add	ah, byte ptr cs:word_214A2[bx]
		xchg	al, ah
		call	sub_22194
		inc	si
		mov	al, [si]
		mov	ah, 40h	; '@'
		add	ah, byte ptr cs:word_21499[bx]
		xchg	al, ah
		call	sub_22194
		inc	si
		mov	al, [si]
		mov	ah, 40h	; '@'
		add	ah, byte ptr cs:word_214A2[bx]
		mov	byte ptr cs:word_21503[bx], al
		xchg	al, ah
		call	sub_22194
		inc	si
		mov	al, [si]
		mov	di, offset word_21499
		mov	ah, 60h	; '`'
		add	ah, [bx+di]
		xchg	al, ah
		call	sub_22194
		inc	si
		mov	al, [si]
		mov	di, offset word_214A2
		mov	ah, 60h	; '`'
		add	ah, [bx+di]
		xchg	al, ah
		call	sub_22194
		inc	si
		mov	al, [si]
		mov	di, offset word_21499
		mov	ah, 80h	; ''
		add	ah, [bx+di]
		xchg	al, ah
		call	sub_22194
		inc	si
		mov	al, [si]
		mov	di, offset word_214A2
		mov	ah, 80h	; ''
		add	ah, [bx+di]
		xchg	al, ah
		call	sub_22194
		inc	si
		mov	al, [si]
		mov	di, offset word_21499
		mov	ah, 0E0h ; 'à'
		add	ah, [bx+di]
		xchg	al, ah
		call	sub_22194
		inc	si
		mov	al, [si]
		mov	di, offset word_214A2
		mov	ah, 0E0h ; 'à'
		add	ah, [bx+di]
		xchg	al, ah
		call	sub_22194
		inc	si
		mov	ax, 0C0h ; 'À'
		add	ax, bx
		xchg	al, ah
		lodsb
		xchg	ah, al
		call	sub_22194
		pop	si
		pop	dx
		pop	di
		pop	bx
		pop	ax
		retn
sub_220BE	endp

; ---------------------------------------------------------------------------
dword_22183	dd 0			; DATA XREF: sub_22187+1w
					; sub_22194+25r ...

; =============== S U B	R O U T	I N E =======================================


sub_22187	proc near		; DATA XREF: seg1c75:20ACo
		cli
		mov	word ptr cs:dword_22183, bx
		mov	word ptr cs:dword_22183+2, dx
		sti
		retn
sub_22187	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================


sub_22194	proc near		; CODE XREF: _core_startworx:loc_217F2p
					; _core_startworx+4Fp ...
		push	ax
		push	bx
		push	cx
		push	dx
		mov	dx, 388h
		out	dx, al
		mov	cx, 6

loc_2219F::				; CODE XREF: sub_22194+Cj
		in	al, dx
		loop	loc_2219F
		inc	dx
		xchg	al, ah
		out	dx, al
		mov	cx, 23h	; '#'

loc_221A9::				; CODE XREF: sub_22194+17j
		in	al, dx
		in	al, dx
		loop	loc_221A9
		pop	dx
		pop	cx
		pop	bx
		pop	ax
		cmp	word ptr cs:dword_22183+2, 0
		jz	locret_221BE
		call	cs:dword_22183

locret_221BE::				; CODE XREF: sub_22194+23j
		retn
sub_22194	endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================


sub_221BF	proc near		; CODE XREF: sub_2222E+Ap sub_22754+2p
		test	cs:byte_216EF, 10h
		jz	loc_221E4
		mov	bl, 0

loc_221C9::				; CODE XREF: sub_221BF+20j
		mov	al, 0B0h ; '°'
		or	al, bl
		call	sub_241EB
		mov	al, 7Bh	; '{'
		call	sub_241EB
		mov	al, 0
		call	sub_241EB
		inc	bl
		cmp	bl, 10h
		jb	loc_221C9
		jmp	loc_221F2
; ---------------------------------------------------------------------------
		nop

loc_221E4::				; CODE XREF: sub_221BF+6j
		test	cs:byte_216EF, 2
		jz	loc_221F2
		in	al, 61h		; PC/XT	PPI port B bits:
					; 0: Tmr 2 gate	ÍËÍ OR	03H=spkr ON
					; 1: Tmr 2 data	Í¼  AND	0fcH=spkr OFF
					; 3: 1=read high switches
					; 4: 0=enable RAM parity checking
					; 5: 0=enable I/O channel check
					; 6: 0=hold keyboard clock low
					; 7: 0=enable kbrd
		and	al, 0FDh
		out	61h, al		; PC/XT	PPI port B bits:
					; 0: Tmr 2 gate	ÍËÍ OR	03H=spkr ON
					; 1: Tmr 2 data	Í¼  AND	0fcH=spkr OFF
					; 3: 1=read high switches
					; 4: 0=enable RAM parity checking
					; 5: 0=enable I/O channel check
					; 6: 0=hold keyboard clock low
					; 7: 0=enable kbrd

loc_221F2::				; CODE XREF: sub_221BF+22j
					; sub_221BF+2Bj
		push	bx
		xor	cx, cx
		mov	bh, ah

loc_221F7::				; CODE XREF: sub_221BF+65j
		mov	si, offset word_214C8
		push	cx
		shl	cx, 1
		add	si, cx
		pop	cx
		lodsw
		cmp	bh, ah
		jnz	loc_22220
		mov	al, 0A0h ; ' '
		add	al, cl
		xor	ah, ah
		call	sub_22194
		mov	al, 0B0h ; '°'
		add	al, cl
		xor	ah, ah
		call	sub_22194
		mov	si, offset byte_214FA
		add	si, cx
		mov	al, 0
		mov	[si], al

loc_22220::				; CODE XREF: sub_221BF+44j
		inc	cx
		cmp	cx, 9
		jb	loc_221F7
		pop	bx
		retn
sub_221BF	endp


; =============== S U B	R O U T	I N E =======================================


sub_22228	proc near		; DATA XREF: seg1c75:20BAo
		or	al, 0B0h
		call	sub_2233A
		retn
sub_22228	endp


; =============== S U B	R O U T	I N E =======================================


sub_2222E	proc near		; CODE XREF: sub_2233A+6Ep
		mov	ah, al
		and	ah, 0Fh
		cmp	bh, 7Bh	; '{'
		jnz	loc_2223E
		call	sub_221BF
		jmp	locret_22339
; ---------------------------------------------------------------------------

loc_2223E::				; CODE XREF: sub_2222E+8j
		cmp	bh, 7
		jnz	loc_22297
		xchg	ah, bl
		xor	bh, bh
		mov	cs:byte_214EA[bx], ah
		test	cs:byte_21480, 1
		jz	loc_22294
		cmp	cs:byte_216F7, 9
		jnz	loc_22294
		mov	si, offset unk_21466

loc_2225F::				; CODE XREF: sub_2222E+64j
		mov	ax, [si]
		cmp	ax, 0FFFFh
		jz	loc_22294
		add	si, 2
		mov	ah, 3Fh	; '?'
		sub	ah, al
		xor	al, al
		xchg	al, ah
		mov	bl, cs:byte_216F9
		xor	bh, bh
		xor	dx, dx
		mul	bx
		mov	al, ah
		xor	ah, ah
		shl	ax, 1
		mov	ah, 3Fh	; '?'
		sub	ah, al
		mov	[si], ah
		mov	ax, [si]
		xchg	ah, al
		call	sub_22194
		add	si, 2
		jmp	loc_2225F
; ---------------------------------------------------------------------------

loc_22294::				; CODE XREF: sub_2222E+24j
					; sub_2222E+2Cj ...
		jmp	locret_22339
; ---------------------------------------------------------------------------
		assume es:nothing

loc_22297::				; CODE XREF: sub_2222E+13j
		cmp	bh, 67h	; 'g'
		jnz	loc_22316
		cmp	bl, 0
		jz	loc_222A9
		cmp	bl, 1
		jz	loc_222D0
		jmp	locret_22339
; ---------------------------------------------------------------------------

loc_222A9::				; CODE XREF: sub_2222E+71j
		mov	cs:byte_216FC, 0C0h ; 'À'
		mov	cs:byte_21480, 0
		mov	ax, 0C0BDh
		call	sub_22194
		mov	si, offset word_214C8
		mov	word ptr [si+0Ch], 0FFFFh
		mov	word ptr [si+0Eh], 0FFFFh
		mov	word ptr [si+10h], 0FFFFh
		jmp	locret_22339
; ---------------------------------------------------------------------------
		nop

loc_222D0::				; CODE XREF: sub_2222E+76j
		mov	cs:byte_216FC, 0E0h ; 'à'
		mov	cs:byte_21480, 1
		mov	ax, 0E0BDh
		call	sub_22194
		mov	bx, (offset byte_1E93E+10F1h)
		mov	si, offset word_214C8
		mov	[si+0Ch], bx
		mov	[si+0Eh], bx
		mov	[si+10h], bx
		mov	si, offset unk_213EE

loc_222F4::				; CODE XREF: sub_2222E+D1j
		lodsw
		xchg	ah, al
		cmp	ax, 0FFFFh
		jz	loc_22301
		call	sub_22194
		jmp	loc_222F4
; ---------------------------------------------------------------------------

loc_22301::				; CODE XREF: sub_2222E+CCj
		mov	ax, 0E0BDh
		call	sub_22194
		mov	ax, 8
		call	sub_22194
		mov	cs:byte_216FC, 0E0h ; 'à'
		jmp	locret_22339
; ---------------------------------------------------------------------------
		db 90h
; ---------------------------------------------------------------------------

loc_22316::				; CODE XREF: sub_2222E+6Cj
		cmp	bh, 69h	; 'i'
		jz	loc_22323
		cmp	bh, 68h	; 'h'
		jz	loc_22323
		jmp	locret_22339
; ---------------------------------------------------------------------------
		db 90h
; ---------------------------------------------------------------------------

loc_22323::				; CODE XREF: sub_2222E+EBj
					; sub_2222E+F0j
		xor	bh, bh
		mov	si, offset byte_214B8
		mov	cl, bl
		mov	bl, cs:byte_216F7
		cmp	bh, 68h	; 'h'
		jnz	loc_22337
		or	cl, 80h

loc_22337::				; CODE XREF: sub_2222E+104j
		mov	[bx+si], cl
		assume es:nothing

locret_22339::				; CODE XREF: sub_2222E+Dj
					; sub_2222E:loc_22294j	...
		retn
sub_2222E	endp


; =============== S U B	R O U T	I N E =======================================


sub_2233A	proc near		; CODE XREF: sub_22228+2p sub_2269E+4p ...
		mov	ah, al
		and	ah, 0F0h
		and	al, 0Fh
		mov	cs:byte_216F7, al
		mov	cs:byte_216FB, ah
		mov	cs:byte_216F8, bh
		mov	cs:byte_216F9, bl
		test	cs:byte_216EF, 6
		jnz	loc_22398
		push	cs
		pop	ds
		push	ax
		push	cx
		push	si
		mov	al, ah
		xor	ah, ah
		mov	cl, 4
		shr	ax, cl
		mov	si, ax
		mov	cl, cs:byte_216D7[si]
		xor	ch, ch
		jcxz	loc_22394
		mov	al, cs:byte_216FB
		or	al, cs:byte_216F7
		call	sub_241EB
		jcxz	loc_22394
		dec	cx
		mov	al, cs:byte_216F8
		call	sub_241EB
		jcxz	loc_22394
		dec	cx
		mov	al, cs:byte_216F9
		call	sub_241EB

loc_22394::				; CODE XREF: sub_2233A+38j
					; sub_2233A+46j ...
		pop	si
		pop	cx
		pop	ax
		retn
; ---------------------------------------------------------------------------

loc_22398::				; CODE XREF: sub_2233A+20j
		cmp	cs:byte_216FB, 90h ; ''
		jbe	loc_223BC
		cmp	cs:byte_216FB, 0B0h ; '°'
		ja	loc_223AE
		call	sub_2222E
		jmp	loc_223EF
; ---------------------------------------------------------------------------
		db 90h
; ---------------------------------------------------------------------------
		assume es:nothing

loc_223AE::				; CODE XREF: sub_2233A+6Cj
		cmp	cs:byte_216FB, 0C0h ; 'À'
		ja	loc_223EF
		call	loc_22711
		jmp	loc_223EF
; ---------------------------------------------------------------------------
		db 90h
; ---------------------------------------------------------------------------

loc_223BC::				; CODE XREF: sub_2233A+64j
		test	cs:byte_216FC, 20h
		jz	loc_223DF
		cmp	cs:byte_21480, 1
		jnz	loc_223D7
		cmp	cs:byte_216F7, 9
		jz	loc_223EC
		jmp	loc_223DF
; ---------------------------------------------------------------------------
		db 90h
; ---------------------------------------------------------------------------

loc_223D7::				; CODE XREF: sub_2233A+90j
		cmp	cs:byte_216F7, 0Bh
		jnb	loc_223EC

loc_223DF::				; CODE XREF: sub_2233A+88j
					; sub_2233A+9Aj
		mov	al, cs:byte_216F8
		add	al, cs:byte_216D6
		mov	cs:byte_216F8, al

loc_223EC::				; CODE XREF: sub_2233A+98j
					; sub_2233A+A3j
		call	sub_22448
		assume es:nothing

loc_223EF::				; CODE XREF: sub_2233A+71j
					; sub_2233A+7Aj ...
		clc
		retn
sub_2233A	endp

; ---------------------------------------------------------------------------
; START	OF FUNCTION CHUNK FOR sub_22448

loc_223F1::				; CODE XREF: sub_22448+6j
		push	ax
		push	bx
		push	si
		mov	al, cs:byte_216F0
		cmp	cs:byte_216F7, al
		jnz	loc_22443
		cmp	cs:byte_216FB, 90h ; ''
		jnz	loc_22443
		cmp	cs:byte_216F9, 0
		jz	loc_22443
		cmp	cs:byte_216F8, 9
		jb	loc_22443
		in	al, 61h		; PC/XT	PPI port B bits:
					; 0: Tmr 2 gate	ÍËÍ OR	03H=spkr ON
					; 1: Tmr 2 data	Í¼  AND	0fcH=spkr OFF
					; 3: 1=read high switches
					; 4: 0=enable RAM parity checking
					; 5: 0=enable I/O channel check
					; 6: 0=hold keyboard clock low
					; 7: 0=enable kbrd
		test	al, 2
		jz	loc_22421
		and	al, 0FDh
		out	61h, al		; PC/XT	PPI port B bits:
					; 0: Tmr 2 gate	ÍËÍ OR	03H=spkr ON
					; 1: Tmr 2 data	Í¼  AND	0fcH=spkr OFF
					; 3: 1=read high switches
					; 4: 0=enable RAM parity checking
					; 5: 0=enable I/O channel check
					; 6: 0=hold keyboard clock low
					; 7: 0=enable kbrd

loc_22421::				; CODE XREF: sub_22448-2Dj
		xor	bx, bx
		mov	bl, cs:byte_216F8
		shl	bx, 1
		mov	si, offset unk_20D46
		mov	al, 0B6h ; '¶'
		out	43h, al		; Timer	8253-5 (AT: 8254.2).
		mov	ax, [bx+si]
		mov	cs:word_216F1, ax
		out	42h, al		; Timer	8253-5 (AT: 8254.2).
		xchg	al, ah
		out	42h, al		; Timer	8253-5 (AT: 8254.2).
		in	al, 61h		; PC/XT	PPI port B bits:
					; 0: Tmr 2 gate	ÍËÍ OR	03H=spkr ON
					; 1: Tmr 2 data	Í¼  AND	0fcH=spkr OFF
					; 3: 1=read high switches
					; 4: 0=enable RAM parity checking
					; 5: 0=enable I/O channel check
					; 6: 0=hold keyboard clock low
					; 7: 0=enable kbrd
		or	al, 3
		out	61h, al		; PC/XT	PPI port B bits:
					; 0: Tmr 2 gate	ÍËÍ OR	03H=spkr ON
					; 1: Tmr 2 data	Í¼  AND	0fcH=spkr OFF
					; 3: 1=read high switches
					; 4: 0=enable RAM parity checking
					; 5: 0=enable I/O channel check
					; 6: 0=hold keyboard clock low
					; 7: 0=enable kbrd

loc_22443::				; CODE XREF: sub_22448-4Bj
					; sub_22448-43j ...
		clc
		pop	si
		pop	bx
		pop	ax
		retn
; END OF FUNCTION CHUNK	FOR sub_22448
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================


sub_22448	proc near		; CODE XREF: sub_2233A:loc_223ECp

; FUNCTION CHUNK AT 3AC1 SIZE 00000057 BYTES

		test	cs:byte_216EF, 2
		jnz	loc_223F1
		mov	cs:word_216F5, 9
		test	cs:byte_216FC, 20h
		jz	loc_224BD
		mov	cs:word_216F5, 6
		cmp	cs:byte_21480, 1
		jnz	loc_22476
		cmp	cs:byte_216F7, 9
		jz	loc_2249C

loc_22476::				; CODE XREF: sub_22448+24j
		cmp	cs:byte_216F7, 0Bh
		jb	loc_224BD
		mov	ah, 10h
		mov	cl, cs:byte_216F7
		sub	cl, 0Bh
		shr	ah, cl
		xor	cs:byte_216FC, ah
		mov	ah, cs:byte_216FC
		mov	al, 0BDh ; '½'
		call	sub_22194
		jmp	locret_225A5
; ---------------------------------------------------------------------------

loc_2249C::				; CODE XREF: sub_22448+2Cj
		mov	bl, cs:byte_216F8
		sub	bl, 23h	; '#'
		xor	bh, bh
		mov	ah, cs:byte_213C6[bx]
		xor	cs:byte_216FC, ah
		mov	ah, cs:byte_216FC
		mov	al, 0BDh ; '½'
		call	sub_22194
		jmp	locret_225A5
; ---------------------------------------------------------------------------

loc_224BD::				; CODE XREF: sub_22448+15j
					; sub_22448+34j
		cmp	cs:byte_216FB, 80h ; ''
		ja	loc_22501

loc_224C5::				; CODE XREF: sub_22448+BFj
		mov	cx, cs:word_216F5
		xor	bx, bx
		mov	si, offset word_214C8

loc_224CF::				; CODE XREF: sub_22448+95j
		shl	bx, 1
		mov	ax, [bx+si]
		shr	bx, 1
		cmp	ah, cs:byte_216F7
		jz	loc_224E2

loc_224DC::				; CODE XREF: sub_22448+A9j
		inc	bx
		loop	loc_224CF
		jmp	locret_225A5
; ---------------------------------------------------------------------------

loc_224E2::				; CODE XREF: sub_22448+92j
		mov	si, offset byte_214FA
		mov	al, [bx+si]
		cmp	al, cs:byte_216F8
		jz	loc_224F3
		assume es:nothing
		mov	si, offset word_214C8
		jmp	loc_224DC
; ---------------------------------------------------------------------------
		assume es:nothing

loc_224F3::				; CODE XREF: sub_22448+A4j
		mov	cs:byte_216FA, bl
		call	sub_225A6
		mov	byte ptr [bx+si], 0
		jmp	locret_225A5
; ---------------------------------------------------------------------------

loc_22501::				; CODE XREF: sub_22448+7Bj
					; sub_22448+107j
		cmp	cs:byte_216F9, 0
		jz	loc_224C5
		xor	cx, cx
		mov	si, offset word_214C8

loc_2250E::				; CODE XREF: sub_22448+D4j
					; sub_22448+11Bj
		lodsw
		cmp	ah, cs:byte_216F7
		jz	loc_22551
		inc	cx
		cmp	cx, cs:word_216F5
		jnz	loc_2250E

loc_2251E::				; CODE XREF: sub_22448+11Dj
		xor	cx, cx
		mov	si, offset word_214C8

loc_22523::				; CODE XREF: sub_22448+E7j
		lodsw
		cmp	ah, 0FFh
		jz	loc_22551
		inc	cx
		cmp	cx, cs:word_216F5
		jnz	loc_22523
		assume es:nothing
		xor	bx, bx

loc_22533::				; CODE XREF: sub_22448+F9j
		mov	si, offset byte_214FA
		cmp	byte ptr [bx+si], 0
		jz	loc_22546
		inc	bx
		cmp	bx, cs:word_216F5
		jb	loc_22533
		jmp	locret_225A5
; ---------------------------------------------------------------------------
		db 90h
; ---------------------------------------------------------------------------

loc_22546::				; CODE XREF: sub_22448+F1j
		mov	si, offset word_214C8
		shl	bx, 1
		mov	word ptr [bx+si], 0FFFFh
		jmp	loc_22501
; ---------------------------------------------------------------------------
		assume es:nothing

loc_22551::				; CODE XREF: sub_22448+CCj
					; sub_22448+DFj
		push	si
		mov	si, offset byte_214FA
		add	si, cx
		cmp	byte ptr [si], 0
		pop	si
		jz	loc_22567
		assume es:nothing
		inc	cx
		cmp	cx, cs:word_216F5
		jnz	loc_2250E
		jmp	loc_2251E
; ---------------------------------------------------------------------------
		assume es:nothing

loc_22567::				; CODE XREF: sub_22448+113j
		xor	ch, ch
		mov	dx, bx
		mov	cs:byte_216FA, cl
		mov	bl, cs:byte_216F7
		mov	ah, bl
		xor	bh, bh
		mov	si, offset byte_214DA
		mov	ch, [bx+si]
		cmp	ch, al
		jz	loc_225A1
		mov	si, offset word_214C8
		mov	bl, cs:byte_216FA
		xor	bh, bh
		shl	bl, 1
		mov	al, ch
		mov	ah, cs:byte_216F7
		mov	[bx+si], ax
		mov	bh, cs:byte_216FA
		mov	bl, al
		call	sub_220BE

loc_225A1::				; CODE XREF: sub_22448+138j
		call	sub_225A6
		retn
; ---------------------------------------------------------------------------

locret_225A5::				; CODE XREF: sub_22448+51j
					; sub_22448+72j ...
		retn
sub_22448	endp


; =============== S U B	R O U T	I N E =======================================


sub_225A6	proc near		; CODE XREF: sub_22448+B0p
					; sub_22448:loc_225A1p
		push	bx
		push	dx
		push	si
		mov	dh, cs:byte_216F8
		mov	bl, cs:byte_216FA
		xor	bh, bh
		mov	cs:byte_214FA[bx], dh
		mov	bh, dh
		dec	bh
		mov	al, bh
		xor	ah, ah
		mov	bx, 0Ch
		xor	dx, dx
		div	bx
		mov	bx, ax
		mov	cl, dl
		mov	si, offset unk_21481
		shl	dx, 1
		add	si, dx
		mov	dx, [si]
		push	bx
		xor	bh, bh
		mov	bl, cs:byte_216F7
		mov	al, cs:byte_214B8[bx]
		cmp	al, 0
		jz	loc_2260F
		mov	ch, al
		mov	si, offset unk_214AB
		mov	bl, cl
		cmp	al, 80h	; ''
		jb	loc_225F3
		inc	si

loc_225F3::				; CODE XREF: sub_225A6+4Aj
		mov	bl, [bx+si]
		mul	bl
		shl	ax, 1
		xchg	ah, al
		xor	ah, ah
		cmp	ch, 80h	; ''
		jnz	loc_22609
		add	ax, dx
		mov	dx, ax
		jmp	loc_2260F
; ---------------------------------------------------------------------------
		db 90h
; ---------------------------------------------------------------------------

loc_22609::				; CODE XREF: sub_225A6+5Aj
		neg	ax
		add	ax, dx
		mov	dx, ax

loc_2260F::				; CODE XREF: sub_225A6+3Fj
					; sub_225A6+60j
		pop	bx
		mov	al, 0A0h ; ' '
		add	al, cs:byte_216FA
		mov	ah, dl
		call	sub_22194
		mov	al, 0B0h ; '°'
		add	al, cs:byte_216FA
		and	dh, 3
		shl	bx, 1
		shl	bx, 1
		cmp	cs:byte_216FB, 80h ; ''
		jz	loc_2264D
		cmp	cs:byte_216F9, 0
		jz	loc_2264D
		test	cs:byte_21480, 1
		jz	loc_2264A
		cmp	cs:byte_216F7, 9
		jnb	loc_2264D

loc_2264A::				; CODE XREF: sub_225A6+9Aj
		or	bl, 20h

loc_2264D::				; CODE XREF: sub_225A6+8Aj
					; sub_225A6+92j ...
		or	bl, dh
		mov	ah, bl
		call	sub_22194
		mov	bl, cs:byte_216FA
		xor	bh, bh
		push	cx
		mov	ah, byte ptr cs:word_21503[bx]
		and	ah, 3Fh
		mov	al, 3Fh	; '?'
		sub	al, ah
		xor	ah, ah
		mov	bl, cs:byte_216F7
		xor	bh, bh
		mov	cl, cs:byte_214EA[bx]
		xor	ch, ch
		xor	ah, ah
		xor	dx, dx
		mul	cx
		pop	cx
		mov	al, ah
		xor	ah, ah
		shl	ax, 1
		mov	ah, 3Fh	; '?'
		sub	ah, al
		mov	bl, cs:byte_216FA
		xor	bh, bh
		mov	al, 40h	; '@'
		add	al, byte ptr cs:word_214A2[bx]
		call	sub_22194
		pop	si
		pop	dx
		pop	bx
		retn
sub_225A6	endp


; =============== S U B	R O U T	I N E =======================================


sub_2269E	proc near		; DATA XREF: seg1c75:2040o
		and	al, 0Fh
		or	al, 90h
		call	sub_2233A
		retn
sub_2269E	endp


; =============== S U B	R O U T	I N E =======================================


sub_226A6	proc near		; DATA XREF: seg1c75:2042o
		and	al, 0Fh
		or	al, 80h
		xor	bl, bl
		call	sub_2233A
		retn
sub_226A6	endp


; =============== S U B	R O U T	I N E =======================================


sub_226B0	proc near		; CODE XREF: sub_22B42+Bp
					; sub_22C66+16p
		push	ax
		push	di
		push	es
		mov	ax, 0
		call	sub_22194
		mov	cs:byte_216FC, 0C0h ; 'À'
		mov	ax, 0C0BDh
		call	sub_22194
		mov	bh, 0
		mov	bl, 0

loc_226C9::				; CODE XREF: sub_226B0+21j
		call	sub_220BE
		inc	bh
		cmp	bh, 9
		jb	loc_226C9
		mov	di, offset byte_214DA
		mov	ax, ds
		mov	es, ax
		assume es:seg1c75
		mov	al, 0
		mov	cx, 10h
		rep stosb
		mov	di, offset byte_214B8
		mov	ax, ds
		mov	es, ax
		mov	al, 0
		mov	cx, 10h
		rep stosb
		mov	di, offset byte_214FA
		xor	al, al
		mov	cx, 9
		rep stosb
		mov	di, offset word_214C8
		mov	ax, 0FFFFh
		mov	cx, 9
		rep stosw
		pop	es
		assume es:nothing
		pop	di
		pop	ax
		retn
sub_226B0	endp


; =============== S U B	R O U T	I N E =======================================


sub_22708	proc near		; DATA XREF: seg1c75:2044o
		mov	cs:byte_216F7, al
		mov	cs:byte_216F8, bl

loc_22711::				; CODE XREF: sub_2233A+7Cp
		push	ax
		push	bx
		push	si
		test	cs:byte_216FC, 20h
		jz	loc_22724
		cmp	cs:byte_216F7, 0B0h ; '°'
		jnb	loc_22734

loc_22724::				; CODE XREF: sub_22708+12j
		mov	si, offset byte_214DA
		mov	bl, cs:byte_216F7
		xor	bh, bh
		mov	al, cs:byte_216F8
		mov	[bx+si], al

loc_22734::				; CODE XREF: sub_22708+1Aj
		pop	si
		pop	bx
		pop	ax
		retn
sub_22708	endp


; =============== S U B	R O U T	I N E =======================================


sub_22738	proc near		; DATA XREF: seg1c75:205Ao
		push	ax
		mov	ax, cs
		mov	ds, ax
		mov	cs:byte_21594, bl
		pop	ax
		retn
sub_22738	endp


; =============== S U B	R O U T	I N E =======================================


sub_22744	proc near		; CODE XREF: _core_closeworx+16p
					; sub_218E1+Fp
					; DATA XREF: ...
		cli
		mov	ax, 0FFFFh
		call	sub_22F47
		mov	cs:word_2094E, 1
		sti
		retn
sub_22744	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================


sub_22754	proc near		; CODE XREF: _core_closeworx+10p
					; sub_218E1+9p
					; DATA XREF: ...
		push	ax
		push	cx
		call	sub_221BF
		mov	cs:byte_21695, 0
		mov	al, cs:byte_216FC
		and	al, 0E0h
		cmp	al, 0E0h ; 'à'
		jz	loc_22787
		mov	cx, 9
		mov	ax, 0A0h ; ' '

loc_2276F::				; CODE XREF: sub_22754+20j
		call	sub_22194
		inc	al
		loop	loc_2276F
		mov	cx, 9
		mov	ax, 0B0h ; '°'

loc_2277C::				; CODE XREF: sub_22754+2Dj
		call	sub_22194
		inc	al
		loop	loc_2277C
		clc
		pop	cx
		pop	ax
		retn
; ---------------------------------------------------------------------------

loc_22787::				; CODE XREF: sub_22754+13j
		mov	ax, 0C0BDh
		call	sub_22194
		mov	ax, 8
		call	sub_22194
		mov	cx, 6
		mov	ax, 0A0h ; ' '

loc_22799::				; CODE XREF: sub_22754+4Aj
		call	sub_22194
		inc	al
		loop	loc_22799
		mov	cx, 6
		mov	ax, 0B0h ; '°'

loc_227A6::				; CODE XREF: sub_22754+57j
		call	sub_22194
		inc	al
		loop	loc_227A6
		pop	cx
		pop	ax
		clc
		retn
sub_22754	endp

; ---------------------------------------------------------------------------
word_227B1	dw 0FFFFh		; DATA XREF: sub_219F3w sub_219F3+34w	...
byte_227B3	db 0			; DATA XREF: sub_227B4w
					; sub_229C4:loc_22A0Dr

; =============== S U B	R O U T	I N E =======================================


sub_227B4	proc near		; DATA XREF: seg1c75:209Co
		mov	cs:byte_227B3, bl
		retn
sub_227B4	endp

; ---------------------------------------------------------------------------
word_227BA	dw 0			; DATA XREF: sub_229C4+1w
					; sub_229C4+5Er
word_227BC	dw 0			; DATA XREF: sub_229C4+6w
					; sub_229C4+63r
word_227BE	dw 0			; DATA XREF: _core_startworx+36w
					; sub_229C4+Br
word_227C0	dw 0			; DATA XREF: _core_startworx+3Cw
					; sub_229C4+10r
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
word_229C2	dw 0			; DATA XREF: seg1c75:414Fw
		assume es:nothing, ds:seg2608

; =============== S U B	R O U T	I N E =======================================


sub_229C4	proc near		; CODE XREF: seg1c75:loc_22A87p
		cli
		mov	cs:word_227BA, sp
		mov	cs:word_227BC, ss
		mov	sp, cs:word_227BE
		mov	ss, cs:word_227C0
		sti
		push	ax
		push	bx
		push	cx
		push	dx
		push	bp
		push	di
		push	si
		push	ds
		push	es
		push	cs
		pop	ds
		assume ds:seg1c75
		mov	ax, cs:word_2157C
		sub	cs:word_2157E, ax
		sbb	cs:word_21580, 0
		cmp	cs:word_21580, 0
		jge	loc_22A02
		mov	cs:byte_21586, 1

loc_22A02::				; CODE XREF: sub_229C4+36j
		test	cs:byte_216EF, 20h
		jz	loc_22A0D
		call	sub_23E32

loc_22A0D::				; CODE XREF: sub_229C4+44j
		cmp	cs:byte_227B3, 0
		jz	loc_22A18
		assume es:nothing
		call	sub_2469C
		assume es:nothing

loc_22A18::				; CODE XREF: sub_229C4+4Fj
		pop	es
		pop	ds
		assume ds:seg2608
		pop	si
		pop	di
		pop	bp
		pop	dx
		pop	cx
		pop	bx
		pop	ax
		cli
		mov	sp, cs:word_227BA
		mov	ss, cs:word_227BC
		retn
sub_229C4	endp

; ---------------------------------------------------------------------------
		assume es:nothing

loc_22A2D::				; DATA XREF: _core_startworx+68o
		cld
		cli
		test	cs:byte_216EF, 16h
		jz	loc_22A4C
		push	ax
		push	bx
		push	cx
		push	dx
		push	bp
		push	di
		push	si
		push	ds
		push	es
		call	sub_22D53
		assume ds:seg1c75
		pop	es
		pop	ds
		assume ds:seg2608
		pop	si
		pop	di
		pop	bp
		pop	dx
		pop	cx
		pop	bx
		pop	ax

loc_22A4C::				; CODE XREF: seg1c75:4105j
		inc	cs:word_216E7
		push	ax
		mov	ax, cs:word_216E7
		cmp	ax, cs:word_216E9
		pop	ax
		jb	loc_22A6C
		mov	cs:word_216E7, 0
		pushf
		call	dword ptr cs:off_1E93A
		iret
; ---------------------------------------------------------------------------
		assume es:nothing

loc_22A6C::				; CODE XREF: seg1c75:412Cj
		inc	cs:word_227B1
		push	ax
		mov	al, 20h	; ' '
		out	20h, al		; Interrupt controller,	8259A.
		pop	ax
		cmp	cs:word_227B1, 0
		jz	loc_22A87
		assume es:nothing, ds:seg1c75
		inc	cs:word_229C2
		jmp	loc_22A8A
; ---------------------------------------------------------------------------
		db  90h	; 
; ---------------------------------------------------------------------------
		assume es:nothing, ds:seg2608

loc_22A87::				; CODE XREF: seg1c75:414Dj
		call	sub_229C4

loc_22A8A::				; CODE XREF: seg1c75:4154j
		dec	cs:word_227B1
		iret

; =============== S U B	R O U T	I N E =======================================


sub_22A90	proc near		; DATA XREF: seg1c75:2074o
		mov	ax, cs:word_20942
		mov	bx, 40h	; '@'
		mul	bx
		xor	dx, dx
		mov	bx, cs:word_2094A
		cmp	bx, 0
		stc
		jz	locret_22AA9
		div	bx
		clc

locret_22AA9::				; CODE XREF: sub_22A90+14j
		retn
sub_22A90	endp


; =============== S U B	R O U T	I N E =======================================


sub_22AAA	proc near		; DATA XREF: seg1c75:2076o
		mov	ax, cs:word_20944
		mov	bx, 40h	; '@'
		mul	bx
		xor	dx, dx
		mov	bx, cs:word_2094C
		cmp	bx, 0
		stc
		jz	locret_22AC3
		div	bx
		clc

locret_22AC3::				; CODE XREF: sub_22AAA+14j
		retn
sub_22AAA	endp


; =============== S U B	R O U T	I N E =======================================


sub_22AC4	proc near		; DATA XREF: seg1c75:2078o
		push	si
		mov	si, offset unk_20946
		xor	ah, ah
		add	si, ax
		mov	al, [si]
		xor	ah, ah
		pop	si
		clc
		retn
sub_22AC4	endp


; =============== S U B	R O U T	I N E =======================================


sub_22AD3	proc near		; DATA XREF: seg1c75:2072o
		cli
		push	ax
		push	dx
		mov	dx, 201h
		mov	cs:word_20942, 0
		mov	cs:word_20944, 0
		in	al, dx		; Game I/O port
					; bits 0-3: Coordinates	(resistive, time-dependent inputs)
					; bits 4-7: Buttons/Triggers (digital inputs)
		mov	si, offset unk_20946
		add	si, 3
		mov	cx, 4

loc_22AF1::				; CODE XREF: sub_22AD3+29j
		xor	ah, ah
		shl	al, 1
		jb	loc_22AF9
		mov	ah, 1

loc_22AF9::				; CODE XREF: sub_22AD3+22j
		mov	[si], ah
		dec	si
		loop	loc_22AF1
		mov	cx, 28h	; '('

loc_22B01::				; CODE XREF: sub_22AD3+2Fj
		out	dx, al		; Game I/O port
					; bits 0-3: Coordinates	(resistive, time-dependent inputs)
					; bits 4-7: Buttons/Triggers (digital inputs)
		loop	loc_22B01
		mov	cx, 320h

loc_22B07::				; CODE XREF: sub_22AD3+52j
		mov	dx, 201h
		in	al, dx		; Game I/O port
					; bits 0-3: Coordinates	(resistive, time-dependent inputs)
					; bits 4-7: Buttons/Triggers (digital inputs)
		mov	bl, al
		and	bl, 1
		xor	bh, bh
		add	cs:word_20942, bx
		mov	bl, al
		shr	bl, 1
		and	bl, 1
		xor	bh, bh
		add	cs:word_20944, bx
		loop	loc_22B07
		cmp	cs:word_2094A, 0
		jnz	loc_22B3F
		mov	ax, cs:word_20942
		mov	cs:word_2094A, ax
		mov	ax, cs:word_20944
		mov	cs:word_2094C, ax

loc_22B3F::				; CODE XREF: sub_22AD3+5Aj
		pop	dx
		pop	ax
		retn
sub_22AD3	endp


; =============== S U B	R O U T	I N E =======================================


sub_22B42	proc near		; CODE XREF: sub_22D90+115p
					; DATA XREF: seg1c75:2038o
		push	si
		push	di
		push	ds
		call	sub_22F0D
		push	es
		mov	ax, cs
		mov	ds, ax
		assume ds:seg1c75
		call	sub_226B0
		mov	cs:byte_21695, 0
		cmp	cs:byte_21480, 1
		jnz	loc_22B67
		mov	cs:byte_216FC, 0E0h ; 'à'
		jmp	loc_22B6D
; ---------------------------------------------------------------------------
		db  90h	; 
; ---------------------------------------------------------------------------

loc_22B67::				; CODE XREF: sub_22B42+1Aj
		mov	cs:byte_216FC, 0C0h ; 'À'

loc_22B6D::				; CODE XREF: sub_22B42+22j
		mov	cs:word_21590, di
		mov	si, di
		mov	ax, es
		mov	ds, ax
		assume ds:nothing
		lodsw
		cmp	ax, 'TM'
		jnz	loc_22BDC
		lodsw
		cmp	ax, 'dh'
		jnz	loc_22BDC
		mov	ax, cs
		mov	ds, ax
		assume ds:seg1c75
		mov	es, ax
		assume es:seg1c75
		mov	di, offset word_21595
		mov	cx, 20h	; ' '
		xor	ax, ax
		rep stosw
		pop	es
		assume es:nothing
		mov	cs:word_21592, es
		mov	di, si
		mov	ax, es:[di]
		add	di, 2
		mov	ax, es:[di]
		add	di, 2
		mov	ax, es:[di]
		add	di, 2
		cmp	ah, 1
		ja	loc_22BDC
		mov	ax, es:[di]
		add	di, 2
		xchg	al, ah
		mov	cs:word_2158B, ax
		mov	ax, es:[di]
		add	di, 2
		xchg	al, ah
		mov	cs:word_2158D, ax
		mov	cx, cs:word_2158B
		mov	cs:word_216F3, 0
		jcxz	loc_22BE3
		jmp	loc_22C02
; ---------------------------------------------------------------------------
		db  90h	; 
; ---------------------------------------------------------------------------

loc_22BDC::				; CODE XREF: sub_22B42+3Aj
					; sub_22B42+40j ...
		stc
		mov	ax, bx
		pop	ds
		assume ds:seg2608
		pop	di
		pop	si
		retn
; ---------------------------------------------------------------------------

loc_22BE3::				; CODE XREF: sub_22B42+95j
					; sub_22B42:loc_22C02j
		mov	cs:byte_2158F, 0
		mov	cs:byte_21695, 1
		mov	cs:word_21587, 0
		mov	cs:word_21589, 0
		clc
		pop	ds
		pop	di
		pop	si
		retn
; ---------------------------------------------------------------------------

loc_22C02::				; CODE XREF: sub_22B42+97j
					; sub_22B42+11Bj
		jcxz	loc_22BE3
		mov	ax, es:[di]
		add	di, 2
		cmp	ax, 'TM'
		jnz	loc_22BDC
		mov	ax, es:[di]
		add	di, 2
		cmp	ax, 'kr'
		jnz	loc_22BDC
		mov	ax, es:[di]
		add	di, 2
		mov	ax, es:[di]
		add	di, 2
		xchg	ah, al
		mov	bx, ax
		push	bx
		push	di
		call	sub_22ED6
		mov	si, offset word_215D5
		mov	bx, cs:word_216F3
		shl	bx, 1
		shl	bx, 1
		mov	[bx+si], ax
		mov	[bx+si+2], dx
		mov	si, offset word_21655
		mov	bx, cs:word_216F3
		shl	bx, 1
		mov	[bx+si], di
		mov	si, offset word_21595
		mov	word ptr [bx+si], 1
		pop	di
		pop	bx
		add	di, bx
		inc	cs:word_216F3
		dec	cx
		jmp	loc_22C02
sub_22B42	endp ; sp-analysis failed

; ---------------------------------------------------------------------------
; START	OF FUNCTION CHUNK FOR sub_22C66

loc_22C5F::				; CODE XREF: sub_22C66+27j
					; sub_22C66+2Dj
		stc
		mov	ax, bx
		pop	ds
		pop	di
		pop	si
		retn
; END OF FUNCTION CHUNK	FOR sub_22C66
		assume es:nothing, ds:seg1c75

; =============== S U B	R O U T	I N E =======================================


sub_22C66	proc near		; CODE XREF: sub_22D90:loc_22EABp
					; DATA XREF: seg1c75:205Co

; FUNCTION CHUNK AT 432F SIZE 00000007 BYTES

		push	si
		push	di
		push	ds
		call	sub_22F0D
		push	es
		push	cs
		pop	ds
		mov	ax, es
		mov	cs:word_21592, ax
		mov	cs:word_21590, di
		mov	dx, di
		call	sub_226B0
		mov	cs:byte_21695, al
		mov	si, di
		mov	ax, es
		mov	ds, ax
		assume ds:nothing
		lodsw
		cmp	ax, 'TC'
		jnz	loc_22C5F
		lodsw
		cmp	ax, 'FM'
		jnz	loc_22C5F
		mov	ax, cs
		mov	ds, ax
		assume ds:seg1c75
		mov	es, ax
		assume es:seg1c75
		mov	di, offset word_21595
		mov	cx, 20h	; ' '
		xor	ax, ax
		rep stosw
		pop	es
		assume es:nothing
		mov	di, si
		add	di, 2
		mov	ax, es:[di]
		push	ax
		add	di, 2
		mov	bx, es:[di]
		add	di, 2
		mov	ax, es:[di]
		mov	cs:word_2158D, ax
		add	di, 2
		push	bx
		push	dx
		mov	bx, es:[di]
		mov	dx, 12h
		mov	ax, 34DCh
		div	bx
		call	sub_22F47
		mov	cs:word_2157C, ax
		pop	dx
		pop	bx
		add	di, 2
		add	di, 2
		add	di, 2
		add	di, 2
		add	di, 10h
		mov	cx, es:[di]
		add	di, 2
		mov	di, dx
		pop	ax
		add	di, ax
		mov	si, di
		mov	di, offset byte_20E46
		push	ds
		push	es
		pop	ds
		assume ds:nothing
		pop	es
		assume es:seg1c75

loc_22CFB::				; CODE XREF: sub_22C66+A1j
		jcxz	loc_22D09
		push	cx
		mov	cx, 0Bh
		rep movsb
		add	si, 5
		pop	cx
		loop	loc_22CFB

loc_22D09::				; CODE XREF: sub_22C66:loc_22CFBj
		mov	di, dx
		add	di, bx
		push	es
		push	ds
		pop	es
		assume es:nothing
		pop	ds
		assume ds:seg1c75
		call	sub_22ED6
		mov	si, offset word_215D5
		mov	[si], ax
		mov	[si+2],	dx
		mov	ax, 1
		mov	cs:word_2158B, ax
		mov	cs:word_21595, ax
		mov	cs:byte_21695, al
		mov	cs:word_21655, di
		jmp	loc_22D33
; ---------------------------------------------------------------------------
		db  90h	; 
; ---------------------------------------------------------------------------

loc_22D33::				; CODE XREF: sub_22C66+CAj
		mov	bl, 1
		mov	cs:byte_2158F, bl
		mov	cs:word_21587, 0
		mov	cs:word_21589, 0
		clc
		pop	ds
		pop	di
		pop	si
		retn
sub_22C66	endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================


sub_22D4D	proc near		; DATA XREF: seg1c75:2080o
		mov	ax, cs:word_2157C
		clc
		retn
sub_22D4D	endp

		assume es:nothing, ds:seg2608

; =============== S U B	R O U T	I N E =======================================


sub_22D53	proc near		; CODE XREF: seg1c75:4110p
					; DATA XREF: seg1c75:207Eo
		push	cs
		pop	ds
		assume ds:seg1c75
		cmp	cs:byte_21695, 0
		jnz	loc_22D5E
		retn
; ---------------------------------------------------------------------------
		assume es:nothing

loc_22D5E::				; CODE XREF: sub_22D53+8j
		inc	cs:word_21587
		mov	ax, cs:word_21587
		cmp	ax, cs:word_2158D
		jb	loc_22D7A
		assume es:seg2608
		mov	cs:word_21587, 0
		inc	cs:word_21589
		assume es:nothing

loc_22D7A::				; CODE XREF: sub_22D53+19j
		mov	cs:word_216F3, 0
		mov	cx, cs:word_2158B

loc_22D86::				; CODE XREF: sub_22D53+3Bj
		call	sub_22D90
		assume es:nothing
		inc	cs:word_216F3
		loop	loc_22D86
sub_22D53	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================


sub_22D90	proc near		; CODE XREF: sub_22D53:loc_22D86p
		push	cx

loc_22D91::				; CODE XREF: sub_22D90+90j
					; sub_22D90+FDj ...
		mov	bx, cs:word_216F3
		shl	bx, 1
		test	cs:word_21595[bx], 1
		jnz	loc_22DA3
		assume es:nothing
		pop	cx
		retn
; ---------------------------------------------------------------------------
		assume es:nothing

loc_22DA3::				; CODE XREF: sub_22D90+Fj
		shl	bx, 1
		mov	ax, cs:word_215D5[bx]
		or	ax, cs:word_215D7[bx]
		jz	loc_22DBF
		assume es:nothing
		sub	cs:word_215D5[bx], 1
		sbb	cs:word_215D7[bx], 0
		pop	cx
		retn
; ---------------------------------------------------------------------------
		assume es:nothing

loc_22DBF::				; CODE XREF: sub_22D90+1Fj
		shr	bx, 1
		mov	di, cs:word_21655[bx]
		mov	es, cs:word_21592
		assume es:nothing
		mov	al, es:[di]
		cmp	al, 0FFh
		jz	loc_22E23
		test	al, 80h
		jz	loc_22DDC
		mov	cs:word_21696[bx], ax
		inc	di

loc_22DDC::				; CODE XREF: sub_22D90+44j
		mov	ax, cs:word_21696[bx]
		xor	ah, ah
		mov	cl, 4
		shr	ax, cl
		mov	si, ax
		mov	cl, cs:byte_216D7[si]
		xor	ch, ch
		mov	ax, cs:word_21696[bx]
		jcxz	loc_22E02
		mov	bh, es:[di]
		inc	di
		dec	cx
		jcxz	loc_22E02
		mov	bl, es:[di]
		inc	di

loc_22E02::				; CODE XREF: sub_22D90+65j
					; sub_22D90+6Cj
		call	sub_2233A

loc_22E05::				; CODE XREF: sub_22D90+A8j
					; sub_22D90+D7j
		call	sub_22ED6
		mov	bx, cs:word_216F3
		shl	bx, 1
		mov	cs:word_21655[bx], di
		shl	bx, 1
		mov	cs:word_215D5[bx], ax
		mov	cs:word_215D7[bx], dx
		jmp	loc_22D91
; ---------------------------------------------------------------------------

loc_22E23::				; CODE XREF: sub_22D90+40j
		inc	di
		mov	al, es:[di]
		inc	di
		cmp	al, 2Fh	; '/'
		jz	loc_22E69
		cmp	al, 51h	; 'Q'
		jz	loc_22E3A
		xor	ah, ah
		mov	al, es:[di]
		inc	di
		add	di, ax
		jmp	loc_22E05
; ---------------------------------------------------------------------------

loc_22E3A::				; CODE XREF: sub_22D90+9Ej
		inc	di
		push	bx
		push	dx
		mov	dl, es:[di]
		inc	di
		xor	dh, dh
		mov	ax, es:[di]
		add	di, 2
		xchg	ah, al
		mov	bx, cs:word_2158D
		div	bx
		mov	bx, 7795
		mul	bx
		mov	ax, dx
		mov	bx, 10
		mul	bx
		call	sub_22F47
		mov	cs:word_2157C, ax
		pop	dx
		pop	bx
		jmp	loc_22E05
; ---------------------------------------------------------------------------

loc_22E69::				; CODE XREF: sub_22D90+9Aj
		mov	cs:word_21595[bx], 0
		mov	cx, cs:word_2158B
		xor	bx, bx

loc_22E77::				; CODE XREF: sub_22D90+F3j
		test	cs:word_21595[bx], 0FFFFh
		jnz	loc_22E88
		add	bx, 2
		loop	loc_22E77
		jmp	loc_22E90
; ---------------------------------------------------------------------------
		db  90h	; 
; ---------------------------------------------------------------------------

loc_22E88::				; CODE XREF: sub_22D90+EEj
		inc	cs:word_216F3
		jmp	loc_22D91
; ---------------------------------------------------------------------------

loc_22E90::				; CODE XREF: sub_22D90+F5j
		cmp	cs:byte_21594, 0
		jz	loc_22EB1
		les	di, dword ptr cs:word_21590
		assume es:nothing
		mov	al, cs:byte_2158F
		cmp	al, 1
		jz	loc_22EAB
		call	sub_22B42
		jmp	loc_22D91
; ---------------------------------------------------------------------------

loc_22EAB::				; CODE XREF: sub_22D90+113j
		call	sub_22C66
		jmp	loc_22D91
; ---------------------------------------------------------------------------

loc_22EB1::				; CODE XREF: sub_22D90+106j
		mov	cs:byte_21695, 0
		jmp	loc_22D91
sub_22D90	endp


; =============== S U B	R O U T	I N E =======================================


sub_22EBA	proc near		; DATA XREF: seg1c75:203Co
		mov	al, cs:byte_21695
		and	ax, 1
		retn
sub_22EBA	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================


sub_22EC2	proc near		; DATA XREF: seg1c75:2030o
		mov	al, cs:byte_2171D
		and	ax, 1
		retn
sub_22EC2	endp


; =============== S U B	R O U T	I N E =======================================


sub_22ECA	proc near		; DATA XREF: seg1c75:207Ao
		mov	ax, cs:word_21589
		retn
sub_22ECA	endp


; =============== S U B	R O U T	I N E =======================================


sub_22ECF	proc near		; DATA XREF: seg1c75:205Eo
		mov	cs:byte_21695, 1
		retn
sub_22ECF	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================


sub_22ED6	proc near		; CODE XREF: sub_22B42+EAp
					; sub_22C66+ABp ...
		push	bx
		push	cx
		xor	ax, ax
		xor	dx, dx

loc_22EDC::				; CODE XREF: sub_22ED6+32j
		mov	bl, es:[di]
		inc	di
		mov	bh, bl
		and	bl, 7Fh
		or	al, bl
		cmp	bh, 80h	; ''
		jb	loc_22F0A
		shl	ax, 1
		rcl	dx, 1
		shl	ax, 1
		rcl	dx, 1
		shl	ax, 1
		rcl	dx, 1
		shl	ax, 1
		rcl	dx, 1
		shl	ax, 1
		rcl	dx, 1
		shl	ax, 1
		rcl	dx, 1
		shl	ax, 1
		rcl	dx, 1
		jmp	loc_22EDC
; ---------------------------------------------------------------------------

loc_22F0A::				; CODE XREF: sub_22ED6+14j
		pop	cx
		pop	bx
		retn
sub_22ED6	endp

		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================


sub_22F0D	proc near		; CODE XREF: sub_21AD7+7p sub_21C0F+7p ...
		push	ax
		push	dx
		mov	ax, es
		cmp	ax, 0
		jz	loc_22F44
		xor	dx, dx
		shl	ax, 1
		rcl	dx, 1
		shl	ax, 1
		rcl	dx, 1
		shl	ax, 1
		rcl	dx, 1
		shl	ax, 1
		rcl	dx, 1
		add	ax, di
		adc	dx, 0
		mov	di, ax
		and	di, 0Fh
		shr	dx, 1
		rcr	ax, 1
		shr	dx, 1
		rcr	ax, 1
		shr	dx, 1
		rcr	ax, 1
		shr	dx, 1
		rcr	ax, 1
		mov	es, ax
		assume es:nothing

loc_22F44::				; CODE XREF: sub_22F0D+7j
		pop	dx
		pop	ax
		retn
sub_22F0D	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================


sub_22F47	proc near		; CODE XREF: _core_startworx+72p
					; sub_21DCB+BEp ...
		cmp	cs:word_2094E, 1
		jnz	loc_22F50
		retn
; ---------------------------------------------------------------------------

loc_22F50::				; CODE XREF: sub_22F47+6j
		push	ax
		push	bx
		push	ds
		mov	bx, cs
		mov	ds, bx
		push	ax
		push	bx
		push	dx
		mov	bx, ax
		xor	dx, dx
		mov	ax, 0FFFFh
		div	bx
		mov	cs:word_216E9, ax
		mov	cs:word_216E7, ax
		pop	dx
		pop	bx
		mov	al, 34h	; '4'
		out	43h, al		; Timer	8253-5 (AT: 8254.2).
		pop	ax
		out	40h, al		; Timer	8253-5 (AT: 8254.2).
		mov	al, ah
		out	40h, al		; Timer	8253-5 (AT: 8254.2).
		pop	ds
		pop	bx
		pop	ax
		retn
sub_22F47	endp


; =============== S U B	R O U T	I N E =======================================


sub_22F7C	proc near
		push	ax
		cmp	al, 8
		jnb	loc_22F85
		add	al, 8
		pop	ax
		retn
; ---------------------------------------------------------------------------

loc_22F85::				; CODE XREF: sub_22F7C+3j
		sub	al, 8
		add	al, 70h	; 'p'
		pop	ax
		retn
sub_22F7C	endp


; =============== S U B	R O U T	I N E =======================================


sub_22F8B	proc near
		push	ax
		cmp	al, 8
		jnb	loc_22F94
		add	al, 8
		pop	ax
		retn
; ---------------------------------------------------------------------------

loc_22F94::				; CODE XREF: sub_22F8B+3j
		sub	al, 8
		add	al, 70h	; 'p'
		pop	ax
		retn
sub_22F8B	endp


; =============== S U B	R O U T	I N E =======================================


sub_22F9A	proc near		; CODE XREF: sub_22F9A+4Ap
		push	ax
		push	bx
		push	cx
		push	dx
		cmp	al, 8
		jnb	loc_22FC2
		cmp	al, 2
		jz	loc_22FBC
		mov	cl, al
		mov	bl, 1
		shl	bl, cl
		in	al, 21h		; Interrupt controller,	8259A.
		and	al, bl
		cmp	al, bl
		jnz	loc_22FED
		not	bl
		in	al, 21h		; Interrupt controller,	8259A.
		and	al, bl
		out	21h, al		; Interrupt controller,	8259A.

loc_22FBC::				; CODE XREF: sub_22F9A+Aj
		pop	dx
		pop	cx
		pop	bx
		pop	ax
		clc
		retn
; ---------------------------------------------------------------------------

loc_22FC2::				; CODE XREF: sub_22F9A+6j
		sub	al, 8
		mov	cl, al
		mov	bl, 1
		shl	bl, cl
		mov	dx, 0A1h ; '¡'
		in	al, dx		; Interrupt Controller #2, 8259A
		and	al, bl
		cmp	al, bl
		jnz	loc_22FED
		not	bl
		mov	dx, 0A1h ; '¡'
		in	al, dx		; Interrupt Controller #2, 8259A
		and	al, bl
		out	dx, al		; Interrupt Controller #2, 8259A
		mov	al, 60h	; '`'
		out	0A0h, al	; PIC 2	 same as 0020 for PIC 1
		mov	ax, 2
		call	sub_22F9A
		pop	dx
		pop	cx
		pop	bx
		pop	ax
		clc
		retn
; ---------------------------------------------------------------------------

loc_22FED::				; CODE XREF: sub_22F9A+18j
					; sub_22F9A+38j
		pop	dx
		pop	cx
		pop	bx
		pop	ax
		stc
		retn
sub_22F9A	endp


; =============== S U B	R O U T	I N E =======================================


sub_22FF3	proc near
		push	ax
		push	bx
		push	dx
		cmp	al, 8
		jnb	loc_2300A
		mov	cl, al
		mov	bl, 1
		shl	bl, cl
		in	al, 21h		; Interrupt controller,	8259A.
		or	al, bl
		out	21h, al		; Interrupt controller,	8259A.
		pop	dx
		pop	bx
		pop	ax
		retn
; ---------------------------------------------------------------------------

loc_2300A::				; CODE XREF: sub_22FF3+5j
		sub	al, 8
		mov	cl, al
		mov	bl, 1
		shl	bl, cl
		mov	dx, 0A1h ; '¡'
		in	al, dx		; Interrupt Controller #2, 8259A
		or	al, bl
		out	dx, al		; Interrupt Controller #2, 8259A
		pop	dx
		pop	bx
		pop	ax
		retn
sub_22FF3	endp

; ---------------------------------------------------------------------------
byte_2301D	db 0			; DATA XREF: sub_2301E+Cr
					; sub_2301E+14w ...
		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================


sub_2301E	proc near		; CODE XREF: _core_closeworx+Dp
					; sub_23F6Fp ...
		mov	cs:byte_231C5, 0
		mov	cs:byte_2171D, 0
		test	cs:byte_2301D, 1
		jz	locret_23041
		assume es:nothing
		mov	cs:byte_2301D, 0
		mov	al, 0D0h ; 'Ð'
		call	sub_24311
		mov	al, 5
		out	0Ah, al		; DMA controller, 8237A-5.
					; single mask bit register
					; 0-1: select channel (00=0; 01=1; 10=2; 11=3)
					; 2: 1=set mask	for channel; 0=clear mask (enable)
		assume es:seg2608

locret_23041::				; CODE XREF: sub_2301E+12j
		retn
sub_2301E	endp

; ---------------------------------------------------------------------------
word_23042	dw 0			; DATA XREF: sub_23069:loc_230F3r
					; sub_242BB+Br	...
word_23044	dw 2121h		; DATA XREF: sub_242BB+10r
					; sub_2433E:loc_24347r	...
		db  21h	; !
		db  21h	; !
		db 0A1h	; ¡
		db    0
word_2304A	dw 2080h		; DATA XREF: sub_2433E+53r
					; sub_2433E+CEr
		db    8
		db    4
		db    4
word_2304F	dw 3Ch			; DATA XREF: sub_23069+91r
					; sub_242BB+1Er ...
		db  34h	; 4
		db    0
		db  2Ch	; ,
		db    0
		db  28h	; (
		db    0
		db 0C8h	; È
		db    1
word_23059	dw 507h			; DATA XREF: sub_2433E+1Fr
					; sub_2433E+E2r
		db    3
		db    2
		db  0Ah
word_2305E	dw 0			; DATA XREF: sub_242BB+2Ar
					; sub_2433E+3Bw ...
word_23060	dw 0			; DATA XREF: sub_242BB+31r
					; sub_2433E+43w ...
word_23062	dw 0			; DATA XREF: sub_242BB+17r
					; sub_2433E+1Bw ...
		db    0
		db  64h	; d
		db  18h
word_23067	dw 0			; DATA XREF: sub_23E32+15w
					; sub_23E32:loc_23E61r
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================


sub_23069	proc near		; DATA XREF: seg1c75:2022o
		mov	ax, ds
		xor	dx, dx
		mov	dx, ax
		mov	cl, 0Ch
		shr	dx, cl
		mov	cl, 4
		shl	ax, cl
		mov	bx, 0Eh
		add	ax, bx
		adc	dx, 0
		mov	bx, ax
		add	bx, 1000h
		jnb	loc_2308D
		add	ax, 1000h
		adc	dx, 0

loc_2308D::				; CODE XREF: sub_23069+1Cj
		mov	cs:word_21714, dx
		mov	cl, 0Ch
		shl	cs:word_21714, cl
		mov	byte ptr cs:word_21711,	dl
		mov	cs:word_21711+1, ax
		mov	cs:word_20940, 0
		call	sub_24429
		jnb	loc_230B2
		mov	ax, 0FFFFh
		retn
; ---------------------------------------------------------------------------

loc_230B2::				; CODE XREF: sub_23069+43j
		call	sub_2433E
		jnb	loc_230BB
		mov	ax, 0FFFFh
		retn
; ---------------------------------------------------------------------------

loc_230BB::				; CODE XREF: sub_23069+4Cj
		mov	cs:word_20940, ax
		mov	dx, cs:word_21723
		add	dx, 4
		xor	al, al
		out	dx, al
		inc	dx
		out	dx, al
		dec	dx
		mov	al, 22h	; '"'
		out	dx, al
		inc	dx
		mov	al, 55h	; 'U'
		out	dx, al
		dec	dx
		mov	al, 22h	; '"'
		out	dx, al
		inc	dx
		in	al, dx
		cmp	al, 55h	; 'U'
		jnz	loc_230F3
		mov	cs:byte_21725, 1
		mov	bl, 0FFh
		call	sub_2201C
		mov	bl, 0FFh
		call	sub_2203D
		mov	bl, 0FFh
		call	sub_2205E

loc_230F3::				; CODE XREF: sub_23069+73j
		mov	bx, cs:word_23042
		shl	bx, 1
		mov	di, cs:word_2304F[bx]
		xor	ax, ax
		mov	es, ax
		mov	word ptr es:[di], offset sub_232ED
		mov	ax, cs
		mov	es:[di+2], ax
		mov	al, 0D1h ; 'Ñ'
		call	sub_24311
		mov	dx, cs:word_21723
		add	dx, 4
		xor	al, al
		out	dx, al
		inc	dx
		out	dx, al
		dec	dx
		mov	al, 4
		out	dx, al
		inc	dx
		mov	al, 0FFh
		out	dx, al
		dec	dx
		mov	al, 22h	; '"'
		out	dx, al
		inc	dx
		mov	al, 0FFh
		out	dx, al
		mov	ax, cs:word_20940
		retn
sub_23069	endp


; =============== S U B	R O U T	I N E =======================================


sub_23135	proc near		; DATA XREF: seg1c75:2024o
		mov	cs:word_21723, bx
		retn
sub_23135	endp


; =============== S U B	R O U T	I N E =======================================


sub_2313B	proc near		; DATA XREF: seg1c75:208Eo
		mov	ax, cs:word_21723
		clc
		retn
sub_2313B	endp


; =============== S U B	R O U T	I N E =======================================


sub_23141	proc near
		push	ax
		push	dx
		mov	dx, cs:word_21723
		add	dx, 6
		mov	al, 1
		out	dx, al
		mov	bx, 1
		call	sub_21774
		xor	al, al
		out	dx, al
		mov	cx, 0C8h ; 'È'
		mov	dx, cs:word_21723
		add	dx, 0Eh

loc_23162::				; CODE XREF: sub_23141+26j
		in	al, dx
		cmp	al, 80h	; ''
		jnb	loc_2316D
		loop	loc_23162

loc_23169::				; CODE XREF: sub_23141+37j
		stc
		pop	dx
		pop	ax
		retn
; ---------------------------------------------------------------------------

loc_2316D::				; CODE XREF: sub_23141+24j
		mov	dx, cs:word_21723
		add	dx, 0Ah
		in	al, dx
		cmp	al, 0AAh ; 'ª'
		jnz	loc_23169
		mov	bx, 4
		call	sub_21774
		clc
		pop	dx
		pop	ax
		retn
sub_23141	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================


sub_23184	proc near		; CODE XREF: sub_21AD7:loc_21B9Fp
		push	ax
		push	bx
		push	cx
		push	dx
		push	bp
		push	di
		push	si
		push	ds
		push	es
		push	es
		pop	ds
		assume ds:nothing
		push	di
		pop	si
		jmp	loc_2319F
; ---------------------------------------------------------------------------
		db  90h	; 
; ---------------------------------------------------------------------------

loc_23194::				; CODE XREF: sub_23184+1Ej
		sub	al, 61h	; 'a'
		cmp	al, 19h
		ja	loc_2319F
		add	al, 41h	; 'A'
		mov	[si-1],	al

loc_2319F::				; CODE XREF: sub_23184+Dj
					; sub_23184+14j
		lodsb
		and	al, al
		jnz	loc_23194
		pop	es
		pop	ds
		assume ds:seg1c75
		pop	si
		pop	di
		pop	bp
		pop	dx
		pop	cx
		pop	bx
		pop	ax
		retn
sub_23184	endp

; ---------------------------------------------------------------------------
		db    0
		db    0
word_231B0	dw 0			; DATA XREF: sub_23291+50w
					; sub_2450D+39w ...
word_231B2	dw 0			; DATA XREF: sub_231C6+Dw
					; sub_23233+12w ...
word_231B4	dw 0			; DATA XREF: sub_2450D+4Ew
					; sub_245A0+1Aw ...
word_231B6	dw 0			; DATA XREF: sub_2450D+55w
					; sub_245A0+22w ...
byte_231B8	db 0			; DATA XREF: sub_2450D+33w
					; sub_245A0+4Dw ...
word_231B9	dw 0			; DATA XREF: sub_231C6+52r
					; sub_232ED+20r ...
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
word_231C3	dw 0			; DATA XREF: sub_2450D+47w
					; sub_245A0+61w ...
byte_231C5	db 0			; DATA XREF: sub_2301Ew sub_231C6+26r	...
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================


sub_231C6	proc near		; CODE XREF: sub_23F4A+18p
					; sub_2450D+65p ...
		cli
		push	cs
		pop	ds
		mov	al, 5
		out	0Ah, al		; DMA controller, 8237A-5.
					; single mask bit register
					; 0-1: select channel (00=0; 01=1; 10=2; 11=3)
					; 2: 1=set mask	for channel; 0=clear mask (enable)
		mov	cs:byte_2301D, 1
		mov	cs:word_231B2, 0
		mov	al, 40h	; '@'
		call	sub_24311
		mov	al, byte ptr cs:word_231B9+1
		call	sub_24311
		xor	al, al
		out	0Ch, al		; DMA controller, 8237A-5.
					; clear	byte pointer flip-flop.
		mov	al, 59h	; 'Y'
		cmp	cs:byte_231C5, 1
		jnz	loc_231F6
		mov	al, 55h	; 'U'

loc_231F6::				; CODE XREF: sub_231C6+2Cj
		out	0Bh, al		; DMA 8237A-5. mode register bits:
					; 0-1: channel (00=0; 01=1; 10=2; 11=3)
					; 2-3: transfer	type (00=verify=Nop; 01=write; 10=read)
					; 4: 1=enable auto-initialization
					; 5: 1=address increment; 0=address decrement
					; 6-7: 00=demand mode; 01=single; 10=block; 11=cascade
		mov	ax, cs:word_21711+1
		out	2, al		; DMA controller, 8237A-5.
					; channel 1 base address
					; (also	sets current address)
		xchg	ah, al
		out	2, al		; DMA controller, 8237A-5.
					; channel 1 base address
					; (also	sets current address)
		mov	al, byte ptr cs:word_21711
		out	83h, al		; DMA page register 74LS612:
					; Channel 1 (address bits 16-23)
		mov	ax, 0FFFh
		out	3, al		; DMA controller, 8237A-5.
					; channel 1 base address and word count
		xchg	ah, al
		out	3, al		; DMA controller, 8237A-5.
					; channel 1 base address and word count
		mov	al, 1
		out	0Ah, al		; DMA controller, 8237A-5.
					; single mask bit register
					; 0-1: select channel (00=0; 01=1; 10=2; 11=3)
					; 2: 1=set mask	for channel; 0=clear mask (enable)
		mov	bx, offset byte_21707
		mov	al, byte ptr cs:word_231B9
		xlat
		cmp	cs:byte_231C5, 1
		jnz	loc_23227
		mov	al, 24h	; '$'

loc_23227::				; CODE XREF: sub_231C6+5Dj
		call	sub_24311
		mov	al, 0E0h ; 'à'
		call	sub_24311
		call	sub_24311
		retn
sub_231C6	endp


; =============== S U B	R O U T	I N E =======================================


sub_23233	proc near		; CODE XREF: sub_24477+45p
		cli
		mov	cs:byte_231C5, 1
		mov	al, 0D3h ; 'Ó'
		call	sub_24311
		mov	cs:byte_2301D, 1
		mov	cs:word_231B2, 0
		mov	al, 40h	; '@'
		call	sub_24311
		mov	al, byte ptr cs:word_231B9+1
		call	sub_24311
		mov	al, 5
		out	0Ah, al		; DMA controller, 8237A-5.
					; single mask bit register
					; 0-1: select channel (00=0; 01=1; 10=2; 11=3)
					; 2: 1=set mask	for channel; 0=clear mask (enable)
		mov	al, 55h	; 'U'
		out	0Bh, al		; DMA 8237A-5. mode register bits:
					; 0-1: channel (00=0; 01=1; 10=2; 11=3)
					; 2-3: transfer	type (00=verify=Nop; 01=write; 10=read)
					; 4: 1=enable auto-initialization
					; 5: 1=address increment; 0=address decrement
					; 6-7: 00=demand mode; 01=single; 10=block; 11=cascade
		xor	al, al
		out	0Ch, al		; DMA controller, 8237A-5.
					; clear	byte pointer flip-flop.
		mov	ax, cs:word_21711+1
		out	2, al		; DMA controller, 8237A-5.
					; channel 1 base address
					; (also	sets current address)
		xchg	ah, al
		out	2, al		; DMA controller, 8237A-5.
					; channel 1 base address
					; (also	sets current address)
		mov	al, byte ptr cs:word_21711
		out	83h, al		; DMA page register 74LS612:
					; Channel 1 (address bits 16-23)
		mov	ax, 0FFFh
		out	3, al		; DMA controller, 8237A-5.
					; channel 1 base address and word count
		xchg	ah, al
		out	3, al		; DMA controller, 8237A-5.
					; channel 1 base address and word count
		mov	al, 1
		out	0Ah, al		; DMA controller, 8237A-5.
					; single mask bit register
					; 0-1: select channel (00=0; 01=1; 10=2; 11=3)
					; 2: 1=set mask	for channel; 0=clear mask (enable)
		mov	al, 24h	; '$'
		call	sub_24311
		mov	al, 20h	; ' '
		call	sub_24311
		call	sub_24311
		retn
sub_23233	endp

; ---------------------------------------------------------------------------
word_2328F	dw 0			; DATA XREF: sub_23291+36w
					; sub_23E32+10r ...
		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================


sub_23291	proc near		; CODE XREF: sub_23E32+2p sub_244C3+4p ...
		push	cs
		pop	ds
		cli
		xor	al, al
		out	0Ch, al		; DMA controller, 8237A-5.
					; clear	byte pointer flip-flop.
		in	al, 2		; DMA controller, 8237A-5.
					; channel 1 current address
		in	al, 2		; DMA controller, 8237A-5.
					; channel 1 current address
		sti
		xchg	ah, al
		xor	al, al
		mov	cx, ax
		mov	ax, cs:word_21711+1
		cmp	cx, ax
		jnb	loc_232AE
		xor	cx, cx
		retn
; ---------------------------------------------------------------------------

loc_232AE::				; CODE XREF: sub_23291+18j
		sub	cx, ax
		cmp	cx, 400h
		jnb	loc_232B9
		xor	cx, cx
		retn
; ---------------------------------------------------------------------------

loc_232B9::				; CODE XREF: sub_23291+23j
		cmp	cx, 1000h
		jle	loc_232C2
		xor	cx, cx
		retn
; ---------------------------------------------------------------------------

loc_232C2::				; CODE XREF: sub_23291+2Cj
		mov	dx, cs:word_231B2
		mov	cs:word_2328F, dx
		mov	cs:word_231B2, cx
		cmp	cx, dx
		jge	loc_232DF
		mov	cs:word_231B2, 0
		mov	cx, 1000h

loc_232DF::				; CODE XREF: sub_23291+42j
		sub	cx, dx
		mov	cs:word_231B0, cx
		retn
sub_23291	endp

; ---------------------------------------------------------------------------
		db    0
		db    0
		db    0
		db    0
		db 0FFh
		db 0FFh

; =============== S U B	R O U T	I N E =======================================


sub_232ED	proc far		; DATA XREF: sub_23069+9Ao
		cli
		push	ax
		push	bx
		push	dx
		push	ds
		push	cs
		pop	ds
		mov	dx, cs:word_21723
		add	dx, 0Eh
		in	al, dx
		mov	dx, cs:word_21723
		add	dx, 0Ch

loc_23305::				; CODE XREF: sub_232ED+1Bj
		in	al, dx
		test	al, 80h
		jnz	loc_23305
		mov	bx, offset byte_2170B
		mov	al, byte ptr cs:word_231B9
		xlat
		cmp	cs:byte_231C5, 0
		jz	loc_2331C
		mov	al, 24h	; '$'

loc_2331C::				; CODE XREF: sub_232ED+2Bj
		out	dx, al

loc_2331D::				; CODE XREF: sub_232ED+33j
		in	al, dx
		test	al, 80h
		jnz	loc_2331D
		mov	al, 0D0h ; 'Ð'
		out	dx, al

loc_23325::				; CODE XREF: sub_232ED+3Bj
		in	al, dx
		test	al, 80h
		jnz	loc_23325
		mov	al, 0D0h ; 'Ð'
		out	dx, al
		mov	al, 20h	; ' '
		out	20h, al		; Interrupt controller,	8259A.
		out	0A0h, al	; PIC 2	 same as 0020 for PIC 1
		pop	ds
		assume ds:seg2608
		pop	dx
		pop	bx
		pop	ax
		iret
sub_232ED	endp

; ---------------------------------------------------------------------------
word_23338	dw 0			; DATA XREF: sub_2354A+2Dr
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db  1Ch
		db    0
		db  1Dh
		db    0
		db  1Fh
		db    0
		db  21h	; !
		db    0
		db  23h	; #
		db    0
		db  25h	; %
		db    0
		db  27h	; '
		db    0
		db  29h	; )
		db    0
		db  2Ch	; ,
		db    0
		db  2Eh	; .
		db    0
		db  31h	; 1
		db    0
		db  34h	; 4
		db    0
		db  37h	; 7
		db    0
		db  3Ah	; :
		db    0
		db  3Eh	; >
		db    0
		db  41h	; A
		db    0
		db  45h	; E
		db    0
		db  49h	; I
		db    0
		db  4Eh	; N
		db    0
		db  52h	; R
		db    0
		db  57h	; W
		db    0
		db  5Ch	; \
		db    0
		db  62h	; b
		db    0
		db  68h	; h
		db    0
		db  6Eh	; n
		db    0
		db  75h	; u
		db    0
		db  7Bh	; {
		db    0
		db  83h	; 
		db    0
		db  8Bh	; 
		db    0
		db  93h	; 
		db    0
		db  9Ch	; 
		db    0
		db 0A5h	; ¥
		db    0
		db 0AFh	; ¯
		db    0
		db 0B9h	; ¹
		db    0
		db 0C4h	; Ä
		db    0
		db 0D0h	; Ð
		db    0
		db 0DCh	; Ü
		db    0
		db 0E9h	; é
		db    0
		db 0F7h	; ÷
		db    0
		db    6
		db    1
		db  15h
		db    1
		db  26h	; &
		db    1
		db  37h	; 7
		db    1
		db  4Ah	; J
		db    1
		db  5Dh	; ]
		db    1
		db  72h	; r
		db    1
		db  88h	; 
		db    1
		db  9Fh	; 
		db    1
		db 0B8h	; ¸
		db    1
		db 0D2h	; Ò
		db    1
		db 0EEh	; î
		db    1
		db  0Bh
		db    2
		db  2Ah	; *
		db    2
		db  4Bh	; K
		db    2
		db  6Eh	; n
		db    2
		db  93h	; 
		db    2
		db 0BAh	; º
		db    2
		db 0E4h	; ä
		db    2
		db  10h
		db    3
		db  3Fh	; ?
		db    3
		db  70h	; p
		db    3
		db 0A4h	; ¤
		db    3
		db 0DCh	; Ü
		db    3
		db  17h
		db    4
		db  55h	; U
		db    4
		db  97h	; 
		db    4
		db 0DDh	; Ý
		db    4
		db  27h	; '
		db    5
		db  75h	; u
		db    5
		db 0C8h	; È
		db    5
		db  20h
		db    6
		db  7Dh	; }
		db    6
		db 0E0h	; à
		db    6
		db  49h	; I
		db    7
		db 0B8h	; ¸
		db    7
		db  2Dh	; -
		db    8
		db 0A9h	; ©
		db    8
		db  2Dh	; -
		db    9
		db 0B9h	; ¹
		db    9
		db  4Dh	; M
		db  0Ah
		db 0EAh	; ê
		db  0Ah
		db  90h	; 
		db  0Bh
		db  40h	; @
		db  0Ch
		db 0FAh	; ú
		db  0Ch
		db 0C0h	; À
		db  0Dh
		db  91h	; 
		db  0Eh
		db  6Fh	; o
		db  0Fh
		db  5Ah	; Z
		db  10h
		db  53h	; S
		db  11h
		db  5Bh	; [
		db  12h
		db  72h	; r
		db  13h
		db  9Ah	; 
		db  14h
		db 0D4h	; Ô
		db  15h
		db  20h
		db  17h
		db  80h	; 
		db  18h
		db 0F5h	; õ
		db  19h
		db  80h	; 
		db  1Bh
		db  23h	; #
		db  1Dh
		db 0DEh	; Þ
		db  1Eh
		db 0B4h	; ´
		db  20h
		db 0A6h	; ¦
		db  22h	; "
		db 0B5h	; µ
		db  24h	; $
		db 0E4h	; ä
		db  26h	; &
		db  34h	; 4
		db  29h	; )
		db 0A7h	; §
		db  2Bh	; +
		db  40h	; @
		db  2Eh	; .
		db    0
		db  31h	; 1
		db 0EAh	; ê
		db  33h	; 3
		db    0
		db  37h	; 7
		db  45h	; E
		db  3Ah	; :
		db 0BCh	; ¼
		db  3Dh	; =
		db  68h	; h
		db  41h	; A
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
word_23444	dw 0			; DATA XREF: sub_23FE6+Ew sub_24087+Ew ...
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
word_23454	dw 0			; DATA XREF: sub_23E32+93r
					; sub_23FE6+9w	...
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
word_23464	dw 0			; DATA XREF: sub_23E32+52r
					; sub_23FE6+92w ...
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
word_23474	dw 0			; DATA XREF: sub_23E32+4Br
					; sub_23FE6+9Bw ...
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
word_23484	dw 0			; DATA XREF: sub_23536+2w
					; sub_23E32+43r ...
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
word_23494	dw 3Fh			; DATA XREF: sub_235B6+6w
					; sub_23E32+D2r
		db  3Fh	; ?
		db    0
		db  3Fh	; ?
		db    0
		db  3Fh	; ?
		db    0
		db  3Fh	; ?
		db    0
		db  3Fh	; ?
		db    0
		db  3Fh	; ?
		db    0
		db  3Fh	; ?
		db    0
word_234A4	dw 0			; DATA XREF: sub_23E32:loc_23E70r
					; sub_23E32+57w ...
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
word_234B4	dw 0			; DATA XREF: sub_23E32:loc_23E91r
					; sub_23FE6+77w ...
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
word_234C4	dw 0			; DATA XREF: sub_23540+2w
					; sub_23E32:loc_23E55r	...
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
word_234D4	dw 0			; DATA XREF: sub_2354A+4Cw
					; sub_23E32+E1r
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
word_234E4	dw 0			; DATA XREF: sub_2354A+47w
					; sub_23E32+EBr
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
word_234F4	dw 0			; DATA XREF: sub_2354A+5Dw
					; sub_23E32+E6w
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
word_23504	dw 0			; DATA XREF: sub_2354A+56w
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
word_23514	dw 0			; DATA XREF: sub_2354A+Ar
					; sub_23FE6+80w ...
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db 0B8h	; ¸
		db    1
		db 0B8h	; ¸
		db    1
		db 0B8h	; ¸
		db    1
		db 0B8h	; ¸
		db    1
		db 0B8h	; ¸
		db    1
		db 0B8h	; ¸
		db    1
		db 0B8h	; ¸
		db    1
		db 0B8h	; ¸
		db    1
word_23534	dw 0			; DATA XREF: seg1c75:5615r

; =============== S U B	R O U T	I N E =======================================


sub_23536	proc near		; DATA XREF: seg1c75:20A8o
		shl	bx, 1
		mov	cs:word_23484[bx], 2
		retn
sub_23536	endp


; =============== S U B	R O U T	I N E =======================================


sub_23540	proc near		; DATA XREF: seg1c75:20AEo
		shl	bx, 1
		mov	cs:word_234C4[bx], 0
		retn
sub_23540	endp


; =============== S U B	R O U T	I N E =======================================


sub_2354A	proc near		; CODE XREF: sub_23DD7+3Dp
					; DATA XREF: seg1c75:208Ao
		push	ax
		xchg	bh, bl
		xor	bh, bh
		mov	di, bx
		shl	di, 1
		push	dx
		mov	ax, cs:word_23514[di]
		mov	bx, 18181
		xor	dx, dx
		div	bx
		push	ax
		xor	ax, ax
		div	bx
		pop	dx
		mov	al, ah
		mov	ah, dl
		mov	bp, ax
		pop	si
		mov	ax, si
		cmp	si, 80h	; ''
		jnb	loc_2357C
		shl	si, 1
		mov	ax, cs:word_23338[si]

loc_2357C::				; CODE XREF: sub_2354A+29j
		mov	bx, 1B8h
		xor	dx, dx
		div	bx
		push	ax
		xor	ax, ax
		div	bx
		pop	dx
		mov	al, ah
		mov	ah, dl
		xor	dx, dx
		mul	bp
		mov	cs:word_234E4[di], dx
		mov	cs:word_234D4[di], ax
		pop	ax
		cmp	al, 0
		jnz	locret_235B5
		mov	cs:word_23504[di], 0
		mov	cs:word_234F4[di], 0
		mov	ax, di
		shr	ax, 1
		call	sub_241CB

locret_235B5::				; CODE XREF: sub_2354A+54j
		retn
sub_2354A	endp


; =============== S U B	R O U T	I N E =======================================


sub_235B6	proc near		; DATA XREF: seg1c75:2082o
		shl	bx, 1
		and	al, 3Fh
		xor	ah, ah
		mov	cs:word_23494[bx], ax
		retn
sub_235B6	endp

; ---------------------------------------------------------------------------
unk_235C2	db    0			; DATA XREF: sub_23E32+B5o
					; sub_24157+Bo
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
word_23DC2	dw 0			; DATA XREF: sub_23E32+A2r
					; sub_23E32+BFr ...
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
byte_23DD2	db 0			; DATA XREF: sub_23DD7+Cw sub_23E1Ew ...
dword_23DD3	dd 0			; DATA XREF: sub_23DD7r
					; sub_23DD7:loc_23E05r	...

; =============== S U B	R O U T	I N E =======================================


sub_23DD7	proc near		; CODE XREF: sub_23E1E+10p
					; sub_23E32+82p
		les	di, cs:dword_23DD3
		assume es:nothing
		cmp	byte ptr es:[di+4], 2
		jnz	loc_23DEA
		mov	cs:byte_23DD2, 0
		retn
; ---------------------------------------------------------------------------

loc_23DEA::				; CODE XREF: sub_23DD7+Aj
		mov	bl, es:[di+4]
		mov	al, es:[di+7]
		les	di, es:[di]
		mov	dx, es
		cmp	bl, 1
		jz	loc_23E02
		call	sub_23FE6
		jmp	loc_23E05
; ---------------------------------------------------------------------------
		db  90h	; 
; ---------------------------------------------------------------------------

loc_23E02::				; CODE XREF: sub_23DD7+23j
		call	sub_24087

loc_23E05::				; CODE XREF: sub_23DD7+28j
		les	di, cs:dword_23DD3
		mov	bh, es:[di+7]
		mov	dx, es:[di+5]
		xor	al, al
		call	sub_2354A
		add	word ptr cs:dword_23DD3, 8
		retn
sub_23DD7	endp


; =============== S U B	R O U T	I N E =======================================


sub_23E1E	proc near		; DATA XREF: seg1c75:20BCo
		mov	cs:byte_23DD2, 1
		mov	word ptr cs:dword_23DD3, di
		mov	word ptr cs:dword_23DD3+2, es
		call	sub_23DD7
		retn
sub_23E1E	endp


; =============== S U B	R O U T	I N E =======================================


sub_23E32	proc near		; CODE XREF: sub_229C4+46p
		push	cs
		pop	ds
		assume ds:seg1c75
		call	sub_23291
		cmp	cx, 0
		jnz	loc_23E3D
		retn
; ---------------------------------------------------------------------------

loc_23E3D::				; CODE XREF: sub_23E32+8j
		les	di, dword ptr cs:word_21711+1
		add	di, cs:word_2328F
		mov	cs:word_23067, cx
		shr	cx, 1
		mov	ax, 8080h
		rep stosw
		xor	bx, bx

loc_23E55::				; CODE XREF: sub_23E32+103j
		test	cs:word_234C4[bx], 1
		jnz	loc_23E61
		jmp	loc_23F2D
; ---------------------------------------------------------------------------

loc_23E61::				; CODE XREF: sub_23E32+2Aj
		mov	cx, cs:word_23067
		les	di, dword ptr cs:word_21711+1
		add	di, cs:word_2328F

loc_23E70::				; CODE XREF: sub_23E32+F8j
		mov	si, cs:word_234A4[bx]
		cmp	cs:word_23484[bx], 1
		jnz	loc_23E91
		cmp	si, cs:word_23474[bx]
		jb	loc_23EC4
		mov	si, cs:word_23464[bx]
		mov	cs:word_234A4[bx], si
		jmp	loc_23EC4
; ---------------------------------------------------------------------------
		db  90h	; 
; ---------------------------------------------------------------------------

loc_23E91::				; CODE XREF: sub_23E32+49j
		cmp	si, cs:word_234B4[bx]
		jb	loc_23EC4
		cmp	cs:word_23484[bx], 2
		jnz	loc_23EA7
		mov	cs:word_23484[bx], 1

loc_23EA7::				; CODE XREF: sub_23E32+6Cj
		cmp	bx, 0
		jnz	loc_23EBA
		cmp	cs:byte_23DD2, 0
		jz	loc_23EBA
		call	sub_23DD7
		jmp	loc_23F2D
; ---------------------------------------------------------------------------
		db  90h	; 
; ---------------------------------------------------------------------------

loc_23EBA::				; CODE XREF: sub_23E32+78j
					; sub_23E32+80j
		mov	cs:word_234C4[bx], 0
		jmp	loc_23F2D
; ---------------------------------------------------------------------------
		db  90h	; 
; ---------------------------------------------------------------------------

loc_23EC4::				; CODE XREF: sub_23E32+50j
					; sub_23E32+5Cj ...
		push	ds
		mov	ax, cs:word_23454[bx]
		cmp	ax, 0
		jnz	loc_23EF8
		mov	ax, cs:word_234A4[bx]
		sub	ax, cs:word_23DC2[bx]
		cmp	ax, 100h
		jb	loc_23EE1
		call	sub_24157

loc_23EE1::				; CODE XREF: sub_23E32+AAj
		mov	ax, bx
		shr	ax, 1
		xchg	ah, al
		add	ax, offset unk_235C2
		mov	si, ax
		add	si, cs:word_234A4[bx]
		sub	si, cs:word_23DC2[bx]
		mov	ax, cs

loc_23EF8::				; CODE XREF: sub_23E32+9Bj
		mov	ds, ax
		mov	al, [si]
		xor	ah, ah
		shr	ax, 1
		pop	ds
		assume ds:seg2608
		sub	ax, 40h	; '@'
		mov	dx, cs:word_23494[bx]
		shl	dx, 1
		shl	dx, 1
		imul	dx
		add	es:[di], ah
		inc	di
		mov	ax, cs:word_234D4[bx]
		add	cs:word_234F4[bx], ax
		mov	ax, cs:word_234E4[bx]
		adc	cs:word_234A4[bx], ax
		dec	cx
		jcxz	loc_23F2D
		jmp	loc_23E70
; ---------------------------------------------------------------------------

loc_23F2D::				; CODE XREF: sub_23E32+2Cj
					; sub_23E32+85j ...
		add	bx, 2
		cmp	bx, 10h
		jnb	locret_23F38
		jmp	loc_23E55
; ---------------------------------------------------------------------------

locret_23F38::				; CODE XREF: sub_23E32+101j
		retn
sub_23E32	endp


; =============== S U B	R O U T	I N E =======================================


sub_23F39	proc near		; DATA XREF: seg1c75:208Co
		mov	bl, al
		xor	bh, bh
		shl	bx, 1
		mov	ax, cs:word_234C4[bx]
		retn
sub_23F39	endp

; ---------------------------------------------------------------------------
		mov	ax, cs:word_23534
		retn

; =============== S U B	R O U T	I N E =======================================


sub_23F4A	proc near		; DATA XREF: seg1c75:2084o
		les	di, dword ptr cs:word_21711+1
		mov	cx, 1000h
		mov	al, 80h	; ''
		rep stosb
		mov	byte ptr cs:word_231B9+1, 0C9h ; 'É'
		mov	byte ptr cs:word_231B9,	0
		call	sub_231C6
		or	cs:byte_216EF, 20h
		mov	ax, 0
		retn
sub_23F4A	endp


; =============== S U B	R O U T	I N E =======================================


sub_23F6F	proc near		; DATA XREF: seg1c75:2088o
		call	sub_2301E
		mov	bx, 4
		call	sub_21774
		and	cs:byte_216EF, 0DFh
		mov	ax, 0
		retn
sub_23F6F	endp

; ---------------------------------------------------------------------------
unk_23F82	db    0			; DATA XREF: sub_23FE6+4Eo
					; sub_24087+4Eo
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0

; =============== S U B	R O U T	I N E =======================================


sub_23FE6	proc near		; CODE XREF: sub_23DD7+25p
					; DATA XREF: seg1c75:2086o
		call	sub_22F0D
		mov	bl, al
		xor	bh, bh
		shl	bx, 1
		mov	cs:word_23454[bx], es
		mov	cs:word_23444[bx], di
		cmp	dx, 0
		jnz	loc_24059
		push	bx
		mov	bx, di
		shl	bx, 1
		shl	bx, 1
		mov	ax, cs:word_209F0[bx]
		mov	cs:word_20AFC, ax
		mov	ax, cs:word_209F2[bx]
		mov	cs:word_20AFE, ax
		mov	ax, cs:word_20AF0
		mov	cs:word_20AFA, ax
		mov	cs:word_20AF6, 40h ; '@'
		mov	cs:word_20AF8, 0
		mov	cs:word_20B00, 0
		mov	cs:word_20B02, offset unk_23F82
		mov	cs:word_20B04, seg seg1c75
		mov	si, offset word_20AF6
		mov	ah, 0Bh
		call	cs:dword_20AF2
		push	cs
		pop	ds
		assume ds:seg1c75
		pop	bx
		mov	di, cs:word_20B02
		mov	es, cs:word_20B04

loc_24059::				; CODE XREF: sub_23FE6+16j
		mov	dx, es:[di+28h]
		mov	cs:word_234B4[bx], dx
		mov	ax, es:[di+18h]
		mov	cs:word_23514[bx], ax
		mov	ax, es:[di+12h]
		mov	cs:word_23484[bx], ax
		mov	ax, es:[di+2Ch]
		mov	cs:word_23464[bx], ax
		mov	ax, es:[di+2Eh]
		mov	cs:word_23474[bx], ax
		retn
sub_23FE6	endp


; =============== S U B	R O U T	I N E =======================================


sub_24087	proc near		; CODE XREF: sub_23DD7:loc_23E02p
					; DATA XREF: seg1c75:20A2o
		mov	bl, al
		xor	bh, bh
		shl	bx, 1
		call	sub_22F0D
		mov	cs:word_23454[bx], es
		mov	cs:word_23444[bx], di
		cmp	dx, 0
		jnz	loc_240FA
		push	bx
		mov	bx, di
		shl	bx, 1
		shl	bx, 1
		mov	ax, cs:word_209F0[bx]
		mov	cs:word_20AFC, ax
		mov	ax, cs:word_209F2[bx]
		mov	cs:word_20AFE, ax
		mov	ax, cs:word_20AF0
		mov	cs:word_20AFA, ax
		mov	cs:word_20AF6, 40h ; '@'
		mov	cs:word_20AF8, 0
		mov	cs:word_20B00, 0
		mov	cs:word_20B02, offset unk_23F82
		mov	cs:word_20B04, seg seg1c75
		mov	si, offset word_20AF6
		mov	ah, 0Bh
		call	cs:dword_20AF2
		push	cs
		pop	ds
		pop	bx
		mov	di, cs:word_20B02
		mov	es, cs:word_20B04

loc_240FA::				; CODE XREF: sub_24087+16j
		push	bx
		mov	dx, es:[di+1Bh]
		sub	dx, 80h	; ''
		mov	cs:word_234B4[bx], dx
		mov	al, es:[di+1Eh]
		xor	ah, ah
		mov	bx, 100h
		sub	bx, ax
		mov	dx, 0Fh
		mov	ax, 4240h
		cmp	bx, 0
		jz	short locret_24156
		div	bx
		pop	bx
		mov	cs:word_23514[bx], ax
		mov	ax, es:[di+20h]
		mov	cs:word_23484[bx], 0
		cmp	ax, 1
		jnz	short loc_2414F
		mov	cs:word_23484[bx], 1
		mov	ax, es:[di+22h]
		mov	cs:word_23464[bx], ax
		mov	ax, es:[di+24h]
		mov	cs:word_23474[bx], ax

loc_2414F::				; CODE XREF: sub_24087+ADj
		mov	cs:word_234A4[bx], 40h ; '@'

locret_24156::				; CODE XREF: sub_24087+95j
		retn
sub_24087	endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================


sub_24157	proc near		; CODE XREF: sub_23E32+ACp
					; sub_241CB+1Cp
		push	ax
		push	bx
		push	cx
		push	dx
		push	si
		mov	ax, bx
		shr	ax, 1
		xchg	ah, al
		add	ax, offset unk_235C2
		mov	cs:word_20B02, ax
		mov	cs:word_20B04, cs
		mov	cs:word_20AF6, 100h
		mov	cs:word_20B00, 0
		mov	ax, cs:word_20AF0
		mov	cs:word_20AFA, ax
		mov	ax, cs:word_234A4[bx]
		mov	cs:word_23DC2[bx], ax
		mov	bx, cs:word_23444[bx]
		shl	bx, 1
		shl	bx, 1
		add	ax, cs:word_209F0[bx]
		mov	cs:word_20AFC, ax
		mov	ax, cs:word_209F2[bx]
		mov	cs:word_20AFE, 0
		adc	cs:word_20AFE, ax
		mov	ah, 0Bh
		mov	si, offset word_20AF6
		call	cs:dword_20AF2
		cmp	ax, 1
		jz	loc_241C3
		mov	ax, 0

loc_241C3::				; CODE XREF: sub_24157+67j
		push	cs
		pop	ds
		pop	si
		pop	dx
		pop	cx
		pop	bx
		pop	ax
		retn
sub_24157	endp


; =============== S U B	R O U T	I N E =======================================


sub_241CB	proc near		; CODE XREF: sub_2354A+68p
		mov	bl, al
		xor	bh, bh
		shl	bx, 1
		mov	cs:word_234C4[bx], 1
		mov	cs:word_234A4[bx], 40h ; '@'
		cmp	cs:word_23454[bx], 0
		jnz	locret_241EA
		call	sub_24157

locret_241EA::				; CODE XREF: sub_241CB+1Aj
		retn
sub_241CB	endp


; =============== S U B	R O U T	I N E =======================================


sub_241EB	proc near		; CODE XREF: sub_221BF+Ep
					; sub_221BF+13p ...
		push	ax
		push	cx
		push	dx
		mov	ah, al
		mov	cx, 0FFFFh
		mov	dx, 331h

loc_241F6::				; CODE XREF: sub_241EB+11j
		jcxz	loc_24215
		dec	cx
		in	al, dx
		test	al, 40h
		jnz	loc_241F6
		mov	al, ah
		mov	dx, 330h
		out	dx, al
		pop	dx
		pop	cx
		pop	ax
		cmp	word ptr cs:dword_22183+2, 0
		jz	locret_24214
		call	cs:dword_22183

locret_24214::				; CODE XREF: sub_241EB+22j
		retn
; ---------------------------------------------------------------------------

loc_24215::				; CODE XREF: sub_241EB:loc_241F6j
		pop	dx
		pop	cx
		pop	ax
		retn
sub_241EB	endp


; =============== S U B	R O U T	I N E =======================================


sub_24219	proc near		; DATA XREF: seg1c75:2090o
		xor	bx, bx

loc_2421B::				; CODE XREF: sub_24219+30j
		cmp	bx, 3
		jnb	loc_24262
		inc	bx
		mov	dx, 331h
		mov	cx, 0FFFFh

loc_24227::				; CODE XREF: sub_24219+14j
		jcxz	loc_24262
		dec	cx
		in	al, dx
		test	al, 40h
		jnz	loc_24227
		mov	dx, 331h
		mov	al, 0FFh
		out	dx, al
		mov	dx, 331h
		mov	cx, 0FFFFh

loc_2423B::				; CODE XREF: sub_24219+28j
		jcxz	loc_24262
		dec	cx
		in	al, dx
		test	al, 80h
		jnz	loc_2423B
		mov	dx, 330h
		in	al, dx
		cmp	al, 0FEh ; 'þ'
		jnz	loc_2421B
		mov	dx, 331h
		mov	cx, 0FFFFh

loc_24251::				; CODE XREF: sub_24219+3Ej
		jcxz	loc_24262
		dec	cx
		in	al, dx
		test	al, 40h
		jnz	loc_24251
		mov	dx, 331h
		mov	al, 3Fh	; '?'
		out	dx, al
		xor	ax, ax
		retn
; ---------------------------------------------------------------------------

loc_24262::				; CODE XREF: sub_24219+5j
					; sub_24219:loc_24227j	...
		mov	ax, 0FFFFh
		retn
sub_24219	endp


; =============== S U B	R O U T	I N E =======================================


sub_24266	proc near		; DATA XREF: seg1c75:2092o
		call	sub_22F0D
		xor	bx, bx
		mov	si, offset byte_20E46
		add	di, 4

loc_24271::				; CODE XREF: sub_24266+1Fj
		mov	cx, 0Bh

loc_24274::				; CODE XREF: sub_24266+15j
		mov	al, es:[di]
		inc	di
		mov	[si], al
		inc	si
		loop	loc_24274
		add	di, 5
		inc	bx
		cmp	bx, 80h	; ''
		jb	loc_24271
		mov	ax, 0
		retn
sub_24266	endp

; ---------------------------------------------------------------------------
aRiff		db 'RIFF',0             ; DATA XREF: sub_21E96+18o
					; sub_245A0+Bo	...
		db    0
		db    0
		db    0
		db  57h	; W
		db  41h	; A
		db  56h	; V
		db  45h	; E
		db  66h	; f
		db  6Dh	; m
		db  74h	; t
		db  20h
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
word_242A3	dw 0			; DATA XREF: sub_21E96+32r
					; sub_245A0+2Cr ...
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db  64h	; d
		db  61h	; a
		db  74h	; t
		db  61h	; a
word_242B3	dw 0			; DATA XREF: sub_21E96+28r
					; sub_245A0+16r ...
word_242B5	dw 0			; DATA XREF: sub_245A0+1Er
					; sub_24619+27r
		db    0
		db    0
		db    0
		db    0

; =============== S U B	R O U T	I N E =======================================


sub_242BB	proc near		; DATA XREF: seg1c75:2028o
		cmp	cs:word_20940, 0
		jz	locret_242F4
		call	sub_2301E
		mov	bx, cs:word_23042
		mov	dl, byte ptr cs:word_23044[bx]
		xor	dh, dh
		mov	al, byte ptr cs:word_23062
		out	dx, al
		shl	bx, 1
		mov	di, cs:word_2304F[bx]
		shr	bx, 1
		mov	ax, 0
		mov	es, ax
		assume es:nothing
		mov	ax, cs:word_2305E
		mov	es:[di], ax
		mov	ax, cs:word_23060
		mov	es:[di+2], ax

locret_242F4::				; CODE XREF: sub_242BB+6j
		retn
sub_242BB	endp

; ---------------------------------------------------------------------------
		assume es:nothing

loc_242F5::				; DATA XREF: sub_2433E+47o
		cld
		push	ax
		push	dx
		mov	dx, cs:word_21723
		add	dx, 0Eh
		in	al, dx
		mov	cs:word_23062+1, 1
		mov	al, 20h	; ' '
		out	20h, al		; Interrupt controller,	8259A.
		out	0A0h, al	; PIC 2	 same as 0020 for PIC 1
		pop	dx
		pop	ax
		iret

; =============== S U B	R O U T	I N E =======================================


sub_24311	proc near		; CODE XREF: sub_2301E+1Cp
					; sub_23069+A7p ...
		push	ax
		push	bx
		push	cx
		push	dx
		push	bp
		push	di
		push	si
		push	ds
		push	es
		push	cs
		pop	ds
		mov	bl, al
		mov	dx, cs:word_21723
		add	dx, 0Ch
		mov	cx, 0FFFFh

loc_24329::				; CODE XREF: sub_24311+1Ej
		jcxz	loc_24331
		in	al, dx
		dec	cx
		test	al, 80h
		jnz	loc_24329

loc_24331::				; CODE XREF: sub_24311:loc_24329j
		mov	al, bl
		out	dx, al
		pop	es
		pop	ds
		pop	si
		pop	di
		pop	bp
		pop	dx
		pop	cx
		pop	bx
		pop	ax
		retn
sub_24311	endp


; =============== S U B	R O U T	I N E =======================================


sub_2433E	proc near		; CODE XREF: sub_23069:loc_230B2p
		xor	bx, bx
		push	cs
		pop	ds
		mov	al, 0D3h ; 'Ó'
		call	sub_24311

loc_24347::				; CODE XREF: sub_2433E+BBj
		mov	dl, byte ptr cs:word_23044[bx]
		cmp	dl, 0

loc_2434F::
		jnz	loc_24354
		jmp	loc_243FC
; ---------------------------------------------------------------------------

loc_24354::				; CODE XREF: sub_2433E:loc_2434Fj
		xor	dh, dh
		in	al, dx
		xor	ah, ah
		mov	byte ptr cs:word_23062,	al
		cmp	byte ptr cs:word_23059[bx], 0Ah
		jnz	loc_24369
		mov	al, 67h	; 'g'
		out	0A0h, al	; PIC 2	 same as 0020 for PIC 1

loc_24369::				; CODE XREF: sub_2433E+25j
		shl	bx, 1
		mov	di, cs:word_2304F[bx]
		shr	bx, 1
		xor	ax, ax
		mov	es, ax
		mov	ax, es:[di]
		mov	cs:word_2305E, ax
		mov	ax, es:[di+2]
		mov	cs:word_23060, ax
		mov	ax, offset loc_242F5
		mov	es:[di], ax
		mov	ax, cs
		mov	es:[di+2], ax
		mov	ah, byte ptr cs:word_2304A[bx]
		not	ah
		mov	al, ah
		and	al, 0FEh
		out	dx, al
		mov	cs:word_23062+1, 0
		mov	al, 40h	; '@'
		call	sub_24311
		mov	al, 7Fh	; ''
		call	sub_24311
		mov	al, 80h	; ''
		call	sub_24311
		mov	al, 1
		call	sub_24311
		call	sub_24311
		push	bx
		mov	bx, 3
		call	sub_21774
		pop	bx
		cmp	cs:word_23062+1, 1
		jz	loc_24401
		mov	dx, cs:word_21723
		add	dx, 0Eh
		in	al, dx
		mov	al, 0D0h ; 'Ð'
		call	sub_24311
		mov	al, 20h	; ' '
		out	20h, al		; Interrupt controller,	8259A.
		mov	dl, byte ptr cs:word_23044[bx]
		xor	dh, dh
		mov	al, byte ptr cs:word_23062
		out	dx, al
		mov	ax, cs:word_2305E
		mov	es:[di], ax
		mov	ax, cs:word_23060
		mov	es:[di+2], ax
		inc	bx
		jmp	loc_24347
; ---------------------------------------------------------------------------

loc_243FC::				; CODE XREF: sub_2433E+13j
		mov	ax, 0FFFFh
		stc
		retn
; ---------------------------------------------------------------------------

loc_24401::				; CODE XREF: sub_2433E+8Bj
		mov	dl, byte ptr cs:word_23044[bx]
		xor	dh, dh
		mov	al, byte ptr cs:word_23062
		mov	ah, byte ptr cs:word_2304A[bx]
		not	ah
		and	al, ah
		out	dx, al
		mov	al, 0D3h ; 'Ó'
		call	sub_24311
		mov	cs:word_23042, bx
		mov	al, byte ptr cs:word_23059[bx]
		xor	ah, ah
		clc
		retn
sub_2433E	endp


; =============== S U B	R O U T	I N E =======================================


sub_24429	proc near		; CODE XREF: sub_23069+40p
					; sub_24429+33j
		mov	dx, cs:word_21723
		add	dx, 6
		mov	al, 1
		out	dx, al		; XT Expansion chassis address register	(low byte)
		mov	bx, 1
		call	sub_21774
		mov	al, 0
		out	dx, al
		mov	cx, 0C8h ; 'È'

loc_24440::				; CODE XREF: sub_24429+24j
		mov	dx, cs:word_21723
		add	dx, 0Eh
		in	al, dx
		test	al, 80h
		jnz	loc_24460
		loop	loc_24440

loc_2444F::				; CODE XREF: sub_24429+42j
		add	cs:word_21723, 10h
		cmp	cs:word_21723, 300h
		jb	sub_24429
		stc
		retn
; ---------------------------------------------------------------------------

loc_24460::				; CODE XREF: sub_24429+22j
		mov	dx, cs:word_21723
		add	dx, 0Ah
		in	al, dx
		cmp	al, 0AAh ; 'ª'
		jnz	loc_2444F
		mov	bx, 4
		call	sub_21774
		clc
		retn
sub_24429	endp

; ---------------------------------------------------------------------------
word_24475	dw 0			; DATA XREF: sub_24477+34w
					; sub_244C3+Br	...

; =============== S U B	R O U T	I N E =======================================


sub_24477	proc near		; DATA XREF: seg1c75:2098o
		mov	byte ptr cs:word_231B9,	0
		cmp	bx, 0
		jnz	loc_24486

loc_24482::				; CODE XREF: sub_24477+30j
		mov	ax, 0FFFFh
		retn
; ---------------------------------------------------------------------------

loc_24486::				; CODE XREF: sub_24477+9j
		mov	dx, 0Fh
		mov	ax, 4240h
		div	bx
		mov	bx, 100h
		sub	bx, ax
		mov	byte ptr cs:word_231B9+1, bl
		mov	dx, di
		mov	ax, es
		mov	ds, ax
		assume ds:nothing
		mov	cx, 0
		mov	ah, 3Ch	; '<'
		mov	al, 0
		int	21h		; DOS -	2+ - CREATE A FILE WITH	HANDLE (CREAT)
					; CX = attributes for file
					; DS:DX	-> ASCIZ filename (may include drive and path)
		jb	loc_24482
		push	cs
		pop	ds
		assume ds:seg1c75
		mov	cs:word_24475, ax
		mov	cs:word_2328F, 0
		mov	cs:byte_2171D, 1
		call	sub_23233
		mov	ax, 0
		retn
sub_24477	endp


; =============== S U B	R O U T	I N E =======================================


sub_244C3	proc near		; DATA XREF: seg1c75:20AAo
		push	cs
		pop	ds
		xor	cx, cx
		call	sub_23291
		jcxz	loc_244E7
		mov	ah, 40h	; '@'
		mov	bx, cs:word_24475
		lds	dx, dword ptr cs:word_21711+1
		assume ds:seg2608
		add	dx, cs:word_2328F
		int	21h		; DOS -	2+ - WRITE TO FILE WITH	HANDLE
					; BX = file handle, CX = number	of bytes to write, DS:DX -> buffer
		push	cs
		pop	ds
		assume ds:seg1c75
		jb	loc_244EB
		cmp	ax, cx
		jnz	loc_244EB

loc_244E7::				; CODE XREF: sub_244C3+7j
		mov	ax, 0
		retn
; ---------------------------------------------------------------------------

loc_244EB::				; CODE XREF: sub_244C3+1Ej
					; sub_244C3+22j
		mov	bx, cs:word_24475
		mov	ah, 3Eh
		int	21h		; DOS -	2+ - CLOSE A FILE WITH HANDLE
					; BX = file handle
		mov	cs:word_24475, 0
		call	sub_2301E
		mov	al, 0D1h ; 'Ñ'
		call	sub_24311
		mov	cs:byte_2171D, 0
		mov	ax, 0FFFFh
		retn
sub_244C3	endp


; =============== S U B	R O U T	I N E =======================================


sub_2450D	proc near		; DATA XREF: seg1c75:209Eo
		mov	byte ptr cs:word_231B9,	al
		cmp	bx, 0
		jnz	loc_2451A

loc_24516::				; CODE XREF: sub_2450D+27j
		mov	ax, 0FFFFh
		retn
; ---------------------------------------------------------------------------

loc_2451A::				; CODE XREF: sub_2450D+7j
		mov	dx, 0Fh
		mov	ax, 4240h
		div	bx
		mov	bx, 100h
		sub	bx, ax
		mov	byte ptr cs:word_231B9+1, bl
		push	cs
		pop	ds
		mov	bx, 0
		call	sub_21AD7
		jb	loc_24516
		mov	cs:word_2328F, 0
		mov	cx, 1000h
		mov	cs:byte_231B8, 2
		mov	cs:word_231B0, 1000h
		mov	cs:word_2328F, 0
		mov	cs:word_231C3, 0
		mov	cs:word_231B4, 0FFFFh
		mov	cs:word_231B6, 0FFFFh
		call	sub_249B6
		mov	cs:byte_2171D, 1
		call	sub_231C6
		clc
		mov	ax, 0
		retn
sub_2450D	endp


; =============== S U B	R O U T	I N E =======================================


sub_2457A	proc near		; DATA XREF: seg1c75:209Ao
		call	sub_2301E
		mov	cs:byte_2171D, 0
		mov	ah, 3Eh	; '>'
		mov	bx, cs:word_24475
		cmp	bx, 0
		jz	loc_2459C
		int	21h		; DOS -	2+ - CLOSE A FILE WITH HANDLE
					; BX = file handle
		mov	cs:word_24475, 0
		mov	ax, 0
		retn
; ---------------------------------------------------------------------------

loc_2459C::				; CODE XREF: sub_2457A+13j
		mov	ax, 0FFFFh
		retn
sub_2457A	endp


; =============== S U B	R O U T	I N E =======================================


sub_245A0	proc near		; DATA XREF: seg1c75:2096o
		cli
		call	sub_2301E
		xor	bx, bx
		call	sub_21AD7
		jb	locret_24618
		mov	di, offset aRiff ; "RIFF"
		push	cs
		pop	es
		assume es:seg1c75
		mov	bx, 2Ch	; ','
		call	sub_21A3B
		mov	ax, cs:word_242B3
		mov	cs:word_231B4, ax
		mov	ax, cs:word_242B5
		mov	cs:word_231B6, ax
		mov	byte ptr cs:word_231B9,	0
		mov	bx, cs:word_242A3
		mov	dx, 0Fh
		mov	ax, 4240h
		div	bx
		mov	bx, 100h
		sub	bx, ax
		mov	byte ptr cs:word_231B9+1, bl
		mov	cs:word_2328F, 0
		mov	cx, 1000h
		mov	cs:byte_231B8, 2
		mov	cs:word_231B0, 1000h
		mov	cs:word_2328F, 0
		mov	cs:word_231C3, 0
		call	sub_249B6
		mov	cs:byte_2171D, 1

loc_24611::
		call	sub_231C6
		clc
		mov	ax, 0

locret_24618::				; CODE XREF: sub_245A0+9j
		retn
sub_245A0	endp


; =============== S U B	R O U T	I N E =======================================


sub_24619	proc near		; DATA XREF: seg1c75:2094o
		cli
		call	sub_22F0D
		call	sub_2301E
		mov	bx, es:[di+28h]
		add	bx, 2Ch	; ','
		call	sub_22F0D
		call	sub_21AD7
		mov	di, offset aRiff ; "RIFF"
		push	ds
		pop	es
		mov	bx, 2Ch	; ','
		call	sub_21A3B
		mov	ax, cs:word_242B3
		mov	cs:word_231B4, ax
		mov	ax, cs:word_242B5
		mov	cs:word_231B6, ax
		mov	byte ptr cs:word_231B9,	0
		mov	bx, cs:word_242A3
		mov	dx, 0Fh
		mov	ax, 4240h
		div	bx
		mov	bx, 100h
		sub	bx, ax
		mov	byte ptr cs:word_231B9+1, bl
		mov	cs:word_2328F, 0
		mov	cx, 1000h
		mov	cs:byte_231B8, 2
		mov	cs:word_231B0, 1000h
		mov	cs:word_2328F, 0
		mov	cs:word_231C3, 0
		call	sub_249B6
		mov	cs:byte_2171D, 1
		call	sub_231C6
		clc
		mov	ax, 0
		clc
		retn
sub_24619	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================


sub_2469C	proc near		; CODE XREF: sub_229C4+51p
					; DATA XREF: seg1c75:20A4o
		cmp	cs:byte_2171D, 1
		jz	loc_246A5
		retn
; ---------------------------------------------------------------------------
		assume es:seg2608

loc_246A5::				; CODE XREF: sub_2469C+6j
		xor	cx, cx
		cmp	cs:byte_231B8, 2
		jz	loc_246BA
		cmp	cs:byte_231B8, 0Ch
		jz	loc_246BA
		jmp	loc_246BF
; ---------------------------------------------------------------------------
		db  90h	; 
; ---------------------------------------------------------------------------

loc_246BA::				; CODE XREF: sub_2469C+11j
					; sub_2469C+19j
		call	sub_23291
		jcxz	locret_246C2

loc_246BF::				; CODE XREF: sub_2469C+1Bj
		call	sub_247C1

locret_246C2::				; CODE XREF: sub_2469C+21j
		retn
sub_2469C	endp


; =============== S U B	R O U T	I N E =======================================


sub_246C3	proc near		; DATA XREF: seg1c75:202Ao
		cli
		call	sub_2301E
		mov	bx, 0
		call	sub_21AD7
		mov	ax, 0FFFFh
		jb	locret_24712
		mov	bx, cs:word_21726
		mov	ah, 42h	; 'B'
		mov	al, 1
		mov	cx, 0
		mov	dx, 1Ah
		int	21h		; DOS -	2+ - MOVE FILE READ/WRITE POINTER (LSEEK)
					; AL = method: offset from present location
		mov	cs:word_231B0, 1000h
		mov	cs:word_2328F, 0
		mov	cs:word_231C3, 0
		mov	cs:word_231B4, 0
		mov	cs:word_231B6, 0
		mov	byte ptr cs:word_231B9,	0
		call	sub_247C1
		assume es:nothing
		mov	ax, 0

locret_24712::				; CODE XREF: sub_246C3+Dj
		retn
sub_246C3	endp

; ---------------------------------------------------------------------------
unk_24713	db    0			; DATA XREF: sub_247C1+AFo
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================


sub_24777	proc near		; DATA XREF: seg1c75:202Co
		cli
		call	sub_22F0D
		call	sub_2301E
		mov	bx, 0FF00h
		call	sub_21AD7
		les	di, dword ptr cs:word_21711+1
		assume es:nothing
		mov	bx, 1Ah
		call	sub_21A3B
		mov	cs:word_231B0, 1000h
		mov	cs:word_2328F, 0
		mov	cs:word_231C3, 0
		mov	cs:word_231B4, 0
		mov	cs:word_231B6, 0
		mov	byte ptr cs:word_231B9,	0
		call	sub_247C1
		mov	ax, 0
		retn
sub_24777	endp

; ---------------------------------------------------------------------------
		db    0
		db    0
		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================


sub_247C1	proc near		; CODE XREF: sub_2469C:loc_246BFp
					; sub_246C3+49p ...
		push	cs
		pop	ds
		mov	cs:byte_2171D, 1
		mov	cx, cs:word_231B0
		jcxz	loc_247E8
		les	di, dword ptr cs:word_21711+1
		assume es:nothing
		add	di, cs:word_2328F
		mov	al, 0
		cmp	byte ptr cs:word_231B9,	0
		jnz	loc_247E6
		mov	al, 80h	; ''

loc_247E6::				; CODE XREF: sub_247C1+21j
		rep stosb

loc_247E8::				; CODE XREF: sub_247C1+Dj
		mov	ax, cs:word_231B4
		or	ax, cs:word_231B6
		jnz	loc_2482B
		cmp	cs:word_231C3, 0
		jnz	loc_2482B
		test	cs:byte_2301D, 1
		jz	loc_24812
		mov	cs:byte_2301D, 0
		mov	al, 0D0h ; 'Ð'
		call	sub_24311
		mov	al, 5
		out	0Ah, al		; DMA controller, 8237A-5.
					; single mask bit register
					; 0-1: select channel (00=0; 01=1; 10=2; 11=3)
					; 2: 1=set mask	for channel; 0=clear mask (enable)

loc_24812::				; CODE XREF: sub_247C1+40j
		mov	bx, 1
		push	cs
		pop	es
		assume es:seg1c75
		mov	di, offset byte_231B8
		call	sub_21A3B
		cmp	ax, 1
		jnz	loc_24864
		mov	bx, 3
		mov	di, offset word_231B4
		call	sub_21A3B

loc_2482B::				; CODE XREF: sub_247C1+30j
					; sub_247C1+38j
		cmp	cs:byte_231B8, 0Ch
		jz	loc_2487C
		cmp	cs:byte_231B8, 3
		jz	loc_2489D
		cmp	cs:byte_231B8, 8
		jz	loc_24869
		cmp	cs:byte_231B8, 9
		jnz	loc_2484E
		jmp	loc_2493C
; ---------------------------------------------------------------------------

loc_2484E::				; CODE XREF: sub_247C1+88j
		cmp	cs:byte_231B8, 2
		jnz	loc_24859
		assume es:nothing
		jmp	loc_24992
; ---------------------------------------------------------------------------
		assume es:seg1c75

loc_24859::				; CODE XREF: sub_247C1+93j
		cmp	cs:byte_231B8, 1
		jnz	loc_24864
		jmp	loc_248E1
; ---------------------------------------------------------------------------
		db  90h	; 
; ---------------------------------------------------------------------------

loc_24864::				; CODE XREF: sub_247C1+5Fj
					; sub_247C1+9Ej
		call	sub_2301E
		stc
		retn
; ---------------------------------------------------------------------------

loc_24869::				; CODE XREF: sub_247C1+80j
		mov	bx, cs:word_231B4
		push	cs
		pop	es
		mov	di, offset unk_24713
		call	sub_21A3B
		sub	cs:word_231B4, ax
		retn
; ---------------------------------------------------------------------------

loc_2487C::				; CODE XREF: sub_247C1+70j
		mov	cx, cs:word_231B0
		sub	cs:word_231B4, cx
		sbb	cs:word_231B6, 0
		jnb	locret_2489C
		mov	cs:word_231B4, 0
		mov	cs:word_231B6, 0

locret_2489C::				; CODE XREF: sub_247C1+CBj
		retn
; ---------------------------------------------------------------------------

loc_2489D::				; CODE XREF: sub_247C1+78j
		call	sub_2301E
		mov	cs:byte_2171D, 1
		mov	bx, 2
		mov	di, offset word_231B4
		mov	cs:word_231B6, 0
		push	cs
		pop	es
		call	sub_21A3B
		mov	bx, 1
		mov	di, (offset word_231B9+1)
		call	sub_21A3B
		mov	cx, 1000h
		les	di, dword ptr cs:word_21711+1
		assume es:nothing
		xor	al, al
		cmp	byte ptr cs:word_231B9,	0
		jnz	loc_248D5
		mov	al, 80h	; ''

loc_248D5::				; CODE XREF: sub_247C1+110j
		rep stosb
		call	sub_231C6
		mov	cs:byte_231B8, 0Ch
		retn
; ---------------------------------------------------------------------------
		assume es:seg1c75

loc_248E1::				; CODE XREF: sub_247C1+A0j
		mov	bx, 1
		mov	di, (offset word_231B9+1)
		push	cs
		pop	es
		call	sub_21A3B
		mov	bx, 1
		mov	di, offset word_231B9
		call	sub_21A3B
		sub	cs:word_231B4, 2
		sbb	cs:word_231B6, 0
		mov	cs:word_231B0, 1000h
		mov	cs:word_2328F, 0
		mov	cs:byte_231B8, 2
		call	sub_249B6
		assume es:nothing
		call	sub_231C6
		retn
; ---------------------------------------------------------------------------
unk_2491C	db    0			; DATA XREF: sub_247C1+17Eo
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
; ---------------------------------------------------------------------------

loc_2493C::				; CODE XREF: sub_247C1+8Aj
		mov	bx, 2
		mov	di, offset unk_2491C
		push	cs
		pop	es
		assume es:seg1c75
		call	sub_21A3B
		mov	bx, es:[di]
		mov	dx, 0Fh
		mov	ax, 4240h
		div	bx
		mov	bx, 100h
		sub	bx, ax
		mov	byte ptr cs:word_231B9+1, bl
		mov	bx, 1
		mov	di, offset word_231B9
		call	sub_21A3B
		mov	bx, 0Dh
		call	sub_21A3B
		sub	cs:word_231B4, 10h
		sbb	cs:word_231B6, 0
		mov	cs:word_231B0, 1000h
		mov	cs:word_2328F, 0
		mov	cs:byte_231B8, 2
		call	sub_249B6
		call	sub_231C6
		retn
; ---------------------------------------------------------------------------
		assume es:nothing

loc_24992::				; CODE XREF: sub_247C1+95j
		call	sub_249B6
		mov	ax, cs:word_231B0
		sub	cs:word_231C3, ax
		jnb	locret_249B5
		mov	cs:word_231C3, 0
		mov	cs:word_231B4, 0
		mov	cs:word_231B6, 0

locret_249B5::				; CODE XREF: sub_247C1+1DDj
		retn
sub_247C1	endp

		assume es:seg1c75

; =============== S U B	R O U T	I N E =======================================


sub_249B6	proc near		; CODE XREF: sub_2450D+5Cp
					; sub_245A0+68p ...
		mov	bx, cs:word_231B0
		cmp	cs:word_231B6, 0
		jnz	loc_249CF
		cmp	bx, cs:word_231B4
		jbe	loc_249CF
		assume es:nothing
		mov	bx, cs:word_231B4
		assume es:seg1c75

loc_249CF::				; CODE XREF: sub_249B6+Bj
					; sub_249B6+12j
		mov	ax, 0
		cmp	bx, 0
		jz	loc_249E4
		les	di, dword ptr cs:word_21711+1
		assume es:nothing
		add	di, cs:word_2328F
		call	sub_21A3B

loc_249E4::				; CODE XREF: sub_249B6+1Fj
		add	cs:word_231C3, ax
		sub	cs:word_231B4, ax
		sbb	cs:word_231B6, 0
		retn
sub_249B6	endp

; ---------------------------------------------------------------------------
unk_249F5	db  30h	; 0		; DATA XREF: seg1c75:60FCo
		db  31h	; 1
		db  32h	; 2
		db  33h	; 3
		db  34h	; 4
		db  35h	; 5
		db  36h	; 6
		db  37h	; 7
		db  38h	; 8
		db  39h	; 9
		db  41h	; A
		db  42h	; B
		db  43h	; C
		db  44h	; D
		db  45h	; E
		db  46h	; F
; ---------------------------------------------------------------------------
		pushf
		cld
		push	ax
		push	bp
		push	bx
		push	cx
		push	dx
		push	di
		push	ds
		push	es
		push	cs
		pop	ds
		push	ax
		mov	ax, 0A0h ; ' '
		mov	dx, 0
		mov	cl, bh
		mov	ch, 0
		mov	bh, 0
		mul	bx
		add	ax, cx
		add	ax, cx
		mov	di, ax
		mov	ax, 0B000h
		mov	es, ax
		assume es:nothing
		pop	dx
		mov	bx, offset unk_249F5
		mov	bp, 4

loc_24A32::				; CODE XREF: seg1c75:6112j
		mov	cl, 4
		rol	dx, cl
		mov	al, dl
		and	al, 0Fh
		xlat
		mov	ah, 7
		stosw
		dec	bp

loc_24A3F::
		cmp	bp, 0
		jnz	loc_24A32
seg1c75		ends

; ---------------------------------------------------------------------------
; ===========================================================================

; Segment type:	Pure code
seg2286		segment	byte public 'CODE' use16
		assume cs:seg2286
		;org 4
		assume es:nothing, ss:nothing, ds:seg2608, fs:nothing, gs:nothing
		pop	es
		pop	ds
		pop	di
		pop	dx
		pop	cx
		pop	bx
		pop	bp
		pop	ax
		popf
		retn
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_worx_call	proc far		; CODE XREF: seg2286:0087p
					; _elementread+14p ...

arg_0		= byte ptr  6
arg_2		= byte ptr  8
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh

		push	bp
		mov	bp, sp
		sub	sp, 10h
		mov	ax, [bp+arg_6]
		mov	[bp-0Ah], ax
		mov	al, [bp+arg_2]
		mov	[bp-10h], al
		mov	al, [bp+arg_0]
		mov	[bp-0Fh], al
		mov	ax, [bp+arg_4]
		mov	[bp-0Eh], ax

loc_24A6C::
		mov	ax, [bp+arg_8]
		mov	[bp-6],	ax
		push	ss
		lea	ax, [bp-10h]
		push	ax		; outregs
		push	ss
		lea	ax, [bp-10h]
		push	ax		; inregs
		mov	ax, 63h	; 'c'
		push	ax		; intno
		call	_int86
		add	sp, 0Ah
		mov	ax, [bp-10h]
		mov	_worx_ax, ax
		mov	ax, [bp-0Eh]
		mov	_worx_bx, ax
		mov	ax, [bp-0Ah]
		mov	_worx_dx, ax
		mov	ax, [bp-6]
		mov	_worx_di, ax
		mov	ax, _worx_ax
		jmp	$+2
; ---------------------------------------------------------------------------

loc_24AA5::				; CODE XREF: _worx_call+55j
		mov	sp, bp
		pop	bp
		retf
_worx_call	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_closeworx	proc far		; CODE XREF: game_manager::~game_manager(void):loc_13531P
		push	bp
		mov	bp, sp
		call	_core_closeworx
		pop	bp
		retf
_closeworx	endp

; ---------------------------------------------------------------------------

_elementgets:
		push	bp
		mov	bp, sp
		push	word ptr [bp+6]
		push	word ptr [bp+8]
		xor	ax, ax
		push	ax

loc_24ABF::
		mov	al, [bp+0Ah]
		push	ax
		mov	al, 1Ah
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		les	bx, [bp+6]
		assume es:nothing
		cmp	byte ptr es:[bx], 0
		jnz	loc_24ADE
		xor	dx, dx
		xor	ax, ax
		jmp	loc_24AE6
; ---------------------------------------------------------------------------
		jmp	loc_24AE6
; ---------------------------------------------------------------------------

loc_24ADE::				; CODE XREF: seg2286:0094j
		mov	dx, [bp+8]
		mov	ax, [bp+6]
		jmp	$+2
; ---------------------------------------------------------------------------

loc_24AE6::				; CODE XREF: seg2286:009Aj
					; seg2286:009Cj ...
		pop	bp
		retf
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_elementread	proc far		; CODE XREF: seg110e:002FP
					; _loadoneshot+73p ...

arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah

		push	bp
		mov	bp, sp
		push	si
		push	[bp+arg_0]
		push	[bp+arg_2]
		push	[bp+arg_4]
		mov	al, 0
		push	ax
		mov	al, 18h
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		mov	si, ax
		cmp	si, 0FFFFh
		jnz	loc_24B0F
		xor	ax, ax
		jmp	loc_24B14
; ---------------------------------------------------------------------------
		jmp	loc_24B14
; ---------------------------------------------------------------------------

loc_24B0F::				; CODE XREF: _elementread+1Fj
		mov	ax, _worx_ax
		jmp	$+2
; ---------------------------------------------------------------------------

loc_24B14::				; CODE XREF: _elementread+23j
					; _elementread+25j ...
		pop	si
		pop	bp
		retf
_elementread	endp

		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_openelement	proc far		; CODE XREF: seg110e:0017P
					; _loadoneshot+17p ...

arg_0		= word ptr  6
arg_2		= word ptr  8

		push	bp
		mov	bp, sp
		push	[bp+arg_0]
		push	[bp+arg_2]
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 17h
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		mov	dx, _worx_dx
		xor	ax, ax
		add	ax, _worx_ax
		adc	dx, 0
		jmp	$+2
; ---------------------------------------------------------------------------

loc_24B3F::				; CODE XREF: _openelement+26j
		pop	bp
		retf
_openelement	endp

; ---------------------------------------------------------------------------

_getxmsblock:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		push	word ptr [bp+6]
		mov	al, 0
		push	ax
		mov	al, 48h	; 'H'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_24B5C::				; CODE XREF: seg2286:011Aj
		pop	bp
		retf

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_loadoneshot	proc far		; CODE XREF: seg2286:0261p

nbytes___	= dword	ptr -8
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8

		push	bp
		mov	bp, sp
		sub	sp, 8
		mov	[bp+var_4], 0
		mov	[bp+var_2], 0
		push	[bp+arg_2]
		push	[bp+arg_0]
		push	cs
		call	near ptr _openelement
		pop	cx
		pop	cx
		mov	word ptr [bp+nbytes___], ax
		mov	word ptr [bp+nbytes___+2], dx
		cmp	word ptr [bp+nbytes___+2], 0
		jl	loc_24BD9
		jg	loc_24B8E
		cmp	word ptr [bp+nbytes___], 0
		jbe	loc_24BD9

loc_24B8E::				; CODE XREF: _loadoneshot+28j
		xor	ax, ax
		push	ax
		push	word ptr [bp+nbytes___]	; nbytes
		call	_farmalloc
		pop	cx
		pop	cx
		mov	[bp+var_4], ax
		mov	[bp+var_2], dx
		mov	ax, [bp+var_4]
		or	ax, [bp+var_2]
		jnz	loc_24BAF
		xor	dx, dx
		xor	ax, ax
		jmp	loc_24BE7
; ---------------------------------------------------------------------------

loc_24BAF::				; CODE XREF: _loadoneshot+49j
		cmp	word ptr [bp+nbytes___+2], 0
		jl	loc_24BC7
		jg	loc_24BBD
		cmp	word ptr [bp+nbytes___], 0FFFFh
		jbe	loc_24BC7

loc_24BBD::				; CODE XREF: _loadoneshot+57j
		mov	word ptr [bp+nbytes___], 0FFFFh
		mov	word ptr [bp+nbytes___+2], 0

loc_24BC7::				; CODE XREF: _loadoneshot+55j
					; _loadoneshot+5Dj
		push	word ptr [bp+nbytes___]
		push	[bp+var_2]
		push	[bp+var_4]
		push	cs
		call	near ptr _elementread
		add	sp, 6
		jmp	loc_24BDF
; ---------------------------------------------------------------------------

loc_24BD9::				; CODE XREF: _loadoneshot+26j
					; _loadoneshot+2Ej
		xor	dx, dx
		xor	ax, ax
		jmp	loc_24BE7
; ---------------------------------------------------------------------------

loc_24BDF::				; CODE XREF: _loadoneshot+79j
		mov	dx, [bp+var_2]
		mov	ax, [bp+var_4]
		jmp	$+2
; ---------------------------------------------------------------------------

loc_24BE7::				; CODE XREF: _loadoneshot+4Fj
					; _loadoneshot+7Fj ...
		mov	sp, bp
		pop	bp
		retf
_loadoneshot	endp

; ---------------------------------------------------------------------------

_loadxmsoneshot:
		push	bp
		mov	bp, sp
		sub	sp, 4
		mov	word ptr [bp-4], 0
		mov	word ptr [bp-2], 0
		push	word ptr [bp+6]
		push	word ptr [bp+8]
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 49h	; 'I'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		mov	ax, _worx_ax
		mov	[bp-4],	ax
		mov	dx, [bp-2]
		mov	ax, [bp-4]
		jmp	$+2
; ---------------------------------------------------------------------------

loc_24C1F::				; CODE XREF: seg2286:01DDj
		mov	sp, bp
		pop	bp
		retf
; ---------------------------------------------------------------------------

_processflatfile:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 45h	; 'E'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_24C3E::				; CODE XREF: seg2286:01FCj
		pop	bp
		retf
; ---------------------------------------------------------------------------

_getmidibeat:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 2Dh	; '-'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_24C5B::				; CODE XREF: seg2286:0219j
		pop	bp
		retf

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_continuesequence proc far		; CODE XREF: game_manager::continue_song(void)+1AP
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 1Fh
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		pop	bp
		retf
_continuesequence endp

; ---------------------------------------------------------------------------

_setaudiomode:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, [bp+6]
		push	ax
		mov	al, 13h
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		pop	bp
		retf
; ---------------------------------------------------------------------------

_loadibkfile:
		push	bp
		mov	bp, sp
		sub	sp, 4
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr _loadoneshot
		pop	cx
		pop	cx
		mov	[bp-4],	ax
		mov	[bp-2],	dx
		mov	ax, [bp-4]
		or	ax, [bp-2]
		jnz	loc_24CBB
		mov	ax, 0FFFFh
		jmp	loc_24CE2
; ---------------------------------------------------------------------------
		jmp	loc_24CDE
; ---------------------------------------------------------------------------

loc_24CBB::				; CODE XREF: seg2286:0272j
		push	word ptr [bp-4]
		push	word ptr [bp-2]
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 39h	; '9'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		call	_farfree
		pop	cx
		pop	cx

loc_24CDE::				; CODE XREF: seg2286:0279j
		xor	ax, ax
		jmp	$+2
; ---------------------------------------------------------------------------

loc_24CE2::				; CODE XREF: seg2286:0277j
					; seg2286:02A0j
		mov	sp, bp
		pop	bp
		retf
; ---------------------------------------------------------------------------

_setmidispeaker:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, [bp+6]
		push	ax
		mov	al, 16h
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		pop	bp
		retf
; ---------------------------------------------------------------------------

_resetmpu401:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 38h	; '8'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_24D1D::				; CODE XREF: seg2286:02DBj
		pop	bp
		retf
; ---------------------------------------------------------------------------

_setmastervolume:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, [bp+6]
		mov	ah, 0
		mov	cl, 4
		shl	ax, cl
		mov	dl, [bp+8]
		mov	dh, 0
		or	ax, dx
		push	ax

loc_24D39::
		mov	al, 0
		push	ax
		mov	al, 20h	; ' '
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_24D48::				; CODE XREF: seg2286:0306j
		pop	bp
		retf
; ---------------------------------------------------------------------------

_getlastvocmarker:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 27h	; '''
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_24D65::				; CODE XREF: seg2286:0323j
		pop	bp
		retf
; ---------------------------------------------------------------------------

_setvocindex:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		push	word ptr [bp+6]
		mov	al, 0
		push	ax
		mov	al, 28h	; '('
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		pop	bp
		retf
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_setvocvolume	proc far		; CODE XREF: game_manager::game_manager(uchar *)+141P

arg_0		= byte ptr  6
arg_2		= byte ptr  8

		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, [bp+arg_0]
		mov	ah, 0
		mov	cl, 4
		shl	ax, cl
		mov	dl, [bp+arg_2]
		mov	dh, 0
		or	ax, dx
		push	ax
		mov	al, 0
		push	ax
		mov	al, 21h	; '!'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_24DAB::				; CODE XREF: _setvocvolume+27j
		pop	bp
		retf
_setvocvolume	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_setfmvolume	proc far		; CODE XREF: game_manager::game_manager(uchar *)+135P

arg_0		= byte ptr  6
arg_2		= byte ptr  8

		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, [bp+arg_0]
		mov	ah, 0
		mov	cl, 4
		shl	ax, cl
		mov	dl, [bp+arg_2]
		mov	dh, 0
		or	ax, dx
		push	ax
		mov	al, 0
		push	ax
		mov	al, 22h	; '"'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_24DD6::				; CODE XREF: _setfmvolume+27j
		pop	bp
		retf
_setfmvolume	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_joystickupdate	proc far		; CODE XREF: game_manager::doit(void)+A4P
					; game_manager::joy_update(void)+3P
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 29h	; ')'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		pop	bp
		retf
_joystickupdate	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_joystickbutton	proc far		; CODE XREF: seg0fa9:0D14P
					; game_manager::doit(void)+F8P	...

arg_0		= byte ptr  6

		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, [bp+arg_0]
		push	ax
		mov	al, 2Ch	; ','
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_24E0F::				; CODE XREF: _joystickbutton+1Aj
		pop	bp
		retf
_joystickbutton	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_joystickx	proc far		; CODE XREF: game_manager::doit(void)+A9P
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 2Ah	; '*'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_24E2C::				; CODE XREF: _joystickx+19j
		pop	bp
		retf
_joystickx	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_joysticky	proc far		; CODE XREF: game_manager::doit(void)+B1P
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 2Bh	; '+'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_24E49::				; CODE XREF: _joysticky+19j
		pop	bp
		retf
_joysticky	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_adlibdetect	proc far		; CODE XREF: game_manager::game_manager(uchar *)+ECP
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 23h	; '#'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_24E66::				; CODE XREF: _adlibdetect+19j
		pop	bp
		retf
_adlibdetect	endp

; ---------------------------------------------------------------------------

_dspportsetting:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 37h	; '7'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_24E83::				; CODE XREF: seg2286:0441j
		pop	bp
		retf

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_dspclose	proc far		; CODE XREF: game_manager::~game_manager(void)+14P
					; seg2286:0926p
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 4
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		pop	bp
		retf
_dspclose	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_dspreset	proc far		; CODE XREF: game_manager::game_manager(uchar *)+F8P
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 1
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_24EBB::				; CODE XREF: _dspreset+19j
		pop	bp
		retf
_dspreset	endp

; ---------------------------------------------------------------------------

_forceconfig:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		push	word ptr [bp+6]
		mov	al, [bp+8]
		push	ax
		mov	al, 2
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_24ED9::				; CODE XREF: seg2286:0497j
		pop	bp
		retf
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_getsequence	proc far		; CODE XREF: game_manager::play_song(uchar *)+23P
					; game_manager::load_voc(uchar *)+38P

nbytes_______	= dword	ptr -8
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8

		push	bp
		mov	bp, sp
		sub	sp, 8
		mov	[bp+var_4], 0
		mov	[bp+var_2], 0
		push	[bp+arg_2]
		push	[bp+arg_0]
		push	cs
		call	near ptr _openelement
		pop	cx
		pop	cx
		mov	word ptr [bp+nbytes_______], ax
		mov	word ptr [bp+nbytes_______+2], dx
		cmp	word ptr [bp+nbytes_______+2], 0
		jl	loc_24F46
		jg	loc_24F0B
		cmp	word ptr [bp+nbytes_______], 0
		jbe	loc_24F46

loc_24F0B::				; CODE XREF: _getsequence+28j
		xor	ax, ax
		push	ax
		push	word ptr [bp+nbytes_______] ; nbytes
		call	_farmalloc
		assume es:nothing
		pop	cx
		pop	cx
		mov	[bp+var_4], ax
		mov	[bp+var_2], dx
		mov	ax, [bp+var_4]
		or	ax, [bp+var_2]
		jnz	loc_24F2C
		xor	dx, dx
		xor	ax, ax
		jmp	loc_24F54
; ---------------------------------------------------------------------------

loc_24F2C::				; CODE XREF: _getsequence+49j
		push	word ptr [bp+nbytes_______]
		push	[bp+var_2]
		push	[bp+var_4]
		push	cs
		call	near ptr _elementread
		add	sp, 6
		mov	word ptr [bp+nbytes_______], ax
		mov	word ptr [bp+nbytes_______+2], 0
		jmp	loc_24F4C
; ---------------------------------------------------------------------------

loc_24F46::				; CODE XREF: _getsequence+26j
					; _getsequence+2Ej
		xor	dx, dx
		xor	ax, ax
		jmp	loc_24F54
; ---------------------------------------------------------------------------

loc_24F4C::				; CODE XREF: _getsequence+69j
		mov	dx, [bp+var_2]
		mov	ax, [bp+var_4]
		jmp	$+2
; ---------------------------------------------------------------------------

loc_24F54::				; CODE XREF: _getsequence+4Fj
					; _getsequence+6Fj ...
		mov	sp, bp
		pop	bp
		retf
_getsequence	endp

; ---------------------------------------------------------------------------

_gonote:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, [bp+8]
		mov	ah, 0
		mov	cl, 8
		shl	ax, cl
		mov	dl, [bp+0Ah]
		mov	dh, 0
		or	ax, dx
		push	ax
		mov	al, [bp+6]
		push	ax
		mov	al, 10h
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		pop	bp
		retf
; ---------------------------------------------------------------------------

_loadsbifile:
		push	bp
		mov	bp, sp
		sub	sp, 84h
		push	word ptr [bp+8]
		push	word ptr [bp+6]
		push	cs
		call	near ptr _openelement
		pop	cx
		pop	cx
		mov	[bp-4],	ax
		mov	[bp-2],	dx
		cmp	word ptr [bp-2], 0
		jl	loc_24FD3
		jg	loc_24FA9
		cmp	word ptr [bp-4], 0
		jbe	loc_24FD3

loc_24FA9::				; CODE XREF: seg2286:0561j
		push	word ptr [bp-4]
		push	ss
		lea	ax, [bp-84h]
		push	ax
		push	cs
		call	near ptr _elementread
		add	sp, 6
		lea	ax, [bp-84h]
		push	ax
		push	ss
		mov	al, [bp+0Ah]
		cbw
		push	ax
		mov	al, 0
		push	ax
		mov	al, 0Fh
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	loc_24FD8
; ---------------------------------------------------------------------------

loc_24FD3::				; CODE XREF: seg2286:055Fj
					; seg2286:0567j
		mov	ax, 0FFFFh
		jmp	loc_24FDC
; ---------------------------------------------------------------------------

loc_24FD8::				; CODE XREF: seg2286:0591j
		xor	ax, ax
		jmp	$+2
; ---------------------------------------------------------------------------

loc_24FDC::				; CODE XREF: seg2286:0596j
					; seg2286:059Aj
		mov	sp, bp
		pop	bp
		retf
; ---------------------------------------------------------------------------

_setpwmrate:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		push	word ptr [bp+6]
		mov	al, 0
		push	ax
		mov	al, 43h	; 'C'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		pop	bp
		retf
; ---------------------------------------------------------------------------

_playpwmblock:
		push	bp
		mov	bp, sp
		mov	ax, [bp+6]
		or	ax, [bp+8]
		jnz	loc_2500B
		mov	ax, 0FFFFh
		jmp	loc_25023
; ---------------------------------------------------------------------------

loc_2500B::				; CODE XREF: seg2286:05C4j
		push	word ptr [bp+6]
		push	word ptr [bp+8]
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 1Bh
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_25023::				; CODE XREF: seg2286:05C9j
					; seg2286:05E1j
		pop	bp
		retf
; ---------------------------------------------------------------------------

_playpwmwav:
		push	bp
		mov	bp, sp
		mov	ax, [bp+6]
		or	ax, [bp+8]
		jnz	loc_25035
		mov	ax, 0FFFFh
		jmp	loc_2504D
; ---------------------------------------------------------------------------

loc_25035::				; CODE XREF: seg2286:05EEj
		push	word ptr [bp+6]
		push	word ptr [bp+8]
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 40h	; '@'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_2504D::				; CODE XREF: seg2286:05F3j
					; seg2286:060Bj
		pop	bp
		retf
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_playvocblock	proc far		; CODE XREF: game_manager::play_voc(uchar *)+24P

arg_0		= word ptr  6
arg_2		= word ptr  8

		push	bp
		mov	bp, sp
		mov	ax, [bp+arg_0]
		or	ax, [bp+arg_2]
		jnz	loc_2505F
		mov	ax, 0FFFFh
		jmp	loc_25077
; ---------------------------------------------------------------------------

loc_2505F::				; CODE XREF: _playvocblock+9j
		push	[bp+arg_0]
		push	[bp+arg_2]
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 6
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_25077::				; CODE XREF: _playvocblock+Ej
					; _playvocblock+26j
		pop	bp
		retf
_playvocblock	endp

; ---------------------------------------------------------------------------

_playwavblock:
		push	bp
		mov	bp, sp
		mov	ax, [bp+6]
		or	ax, [bp+8]
		jnz	loc_25089
		mov	ax, 0FFFFh
		jmp	loc_250A1
; ---------------------------------------------------------------------------

loc_25089::				; CODE XREF: seg2286:0642j
		push	word ptr [bp+6]
		push	word ptr [bp+8]
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 3Ah	; ':'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_250A1::				; CODE XREF: seg2286:0647j
					; seg2286:065Fj
		pop	bp
		retf
; ---------------------------------------------------------------------------

_releasepolychannel:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		push	word ptr [bp+6]
		mov	al, 0
		push	ax
		mov	al, 44h	; 'D'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		pop	bp
		retf
; ---------------------------------------------------------------------------

_killpolychannel:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		push	word ptr [bp+6]
		mov	al, 0
		push	ax
		mov	al, 47h	; 'G'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		pop	bp
		retf

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_playcmfblock	proc far		; CODE XREF: game_manager::turn_sound(uchar)+37P
					; game_manager::play_song(uchar	*)+68P

arg_0		= word ptr  6
arg_2		= word ptr  8

		push	bp
		mov	bp, sp
		mov	ax, [bp+arg_0]
		or	ax, [bp+arg_2]
		jnz	loc_250E6
		jmp	loc_250FC
; ---------------------------------------------------------------------------

loc_250E6::				; CODE XREF: _playcmfblock+9j
		push	[bp+arg_0]
		push	[bp+arg_2]
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 1Eh
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah

loc_250FC::				; CODE XREF: _playcmfblock+Bj
		pop	bp
		retf
_playcmfblock	endp

; ---------------------------------------------------------------------------

_playmidblock:
		push	bp
		mov	bp, sp
		mov	ax, [bp+6]
		or	ax, [bp+8]
		jnz	loc_2510B
		jmp	loc_25121
; ---------------------------------------------------------------------------

loc_2510B::				; CODE XREF: seg2286:06C7j
		push	word ptr [bp+6]
		push	word ptr [bp+8]
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 0Ch
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah

loc_25121::				; CODE XREF: seg2286:06C9j
		pop	bp
		retf
		assume es:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_playvocfile	proc far		; CODE XREF: game_manager::play_voc_file(uchar *)+43P

arg_0		= word ptr  6
arg_2		= word ptr  8

		push	bp
		mov	bp, sp
		push	[bp+arg_0]
		push	[bp+arg_2]
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 5
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_2513E::				; CODE XREF: _playvocfile+19j
		pop	bp
		retf
_playvocfile	endp

; ---------------------------------------------------------------------------

_recordflatfile:
		push	bp
		mov	bp, sp
		push	word ptr [bp+6]
		push	word ptr [bp+8]
		push	word ptr [bp+0Ah]
		mov	al, 0
		push	ax
		mov	al, 3Ch	; '<'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_2515B::				; CODE XREF: seg2286:0719j
		pop	bp
		retf
; ---------------------------------------------------------------------------

_playflatfile:
		push	bp
		mov	bp, sp
		push	word ptr [bp+6]
		push	word ptr [bp+8]
		push	word ptr [bp+0Ah]
		mov	al, [bp+0Ch]
		push	ax
		mov	al, 3Fh	; '?'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_25179::				; CODE XREF: seg2286:0737j
		pop	bp
		retf
; ---------------------------------------------------------------------------

_stopflatrecord:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 3Dh	; '='
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_25196::				; CODE XREF: seg2286:0754j
		pop	bp
		retf
; ---------------------------------------------------------------------------

_playwavfile:
		push	bp
		mov	bp, sp
		push	word ptr [bp+6]
		push	word ptr [bp+8]
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 3Bh	; ';'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_251B3::				; CODE XREF: seg2286:0771j
		pop	bp
		retf
; ---------------------------------------------------------------------------

_programchange:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	ax, [bp+8]
		and	ax, 0FFh
		push	ax
		mov	al, [bp+6]
		push	ax
		mov	al, 12h
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		pop	bp
		retf
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_setchannelvolume proc far		; CODE XREF: game_manager::game_manager(uchar *)+155P

arg_0		= byte ptr  6
arg_2		= word ptr  8

		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	ax, [bp+arg_2]
		and	ax, 0FFh
		mov	dx, 700h
		or	dx, ax
		push	dx
		mov	al, [bp+arg_0]
		push	ax
		mov	al, 4Dh	; 'M'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		pop	bp
		retf
_setchannelvolume endp

; ---------------------------------------------------------------------------

_resetrealtime:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 0Ah
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		pop	bp
		retf
; ---------------------------------------------------------------------------

_sequenceplaying:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 0Eh
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_25230::				; CODE XREF: seg2286:07EEj
		pop	bp
		retf
; ---------------------------------------------------------------------------

_setloopmode:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		push	word ptr [bp+6]
		mov	al, 0
		push	ax
		mov	al, 1Dh
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		pop	bp
		retf
; ---------------------------------------------------------------------------

_setrealtime:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		push	word ptr [bp+6]
		mov	al, 0
		push	ax
		mov	al, 9
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_25268::				; CODE XREF: seg2286:0826j
		pop	bp
		retf
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_startresource	proc far		; CODE XREF: game_manager::game_manager(uchar *)+33P

arg_0		= word ptr  6
arg_2		= word ptr  8

		push	bp
		mov	bp, sp
		push	[bp+arg_0]
		push	[bp+arg_2]
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 14h
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		mov	ax, _worx_ax
		jmp	$+2
; ---------------------------------------------------------------------------

loc_25288::				; CODE XREF: _startresource+1Cj
		pop	bp
		retf
_startresource	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_startworx	proc far		; CODE XREF: game_manager::game_manager(uchar *):loc_13325P
		push	bp
		mov	bp, sp
		call	_core_startworx
		pop	bp
		retf
_startworx	endp

; ---------------------------------------------------------------------------

_stopnote:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, [bp+8]
		mov	ah, 0
		and	ax, 0FFh
		mov	cl, 8
		shl	ax, cl
		push	ax
		mov	al, [bp+6]
		push	ax
		mov	al, 11h
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		pop	bp
		retf
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_stopsequence	proc far		; CODE XREF: game_manager::turn_sound(uchar)+4CP
					; game_manager::stop_song(void)+1AP ...
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 0Dh
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		pop	bp
		retf
_stopsequence	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_stopvoc	proc far		; CODE XREF: game_manager::turn_sound(uchar)+5AP
					; game_manager::remove_sound(uchar *)+EP ...
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 7
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		pop	bp
		retf
_stopvoc	endp

; ---------------------------------------------------------------------------

_stoppwm:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 15h
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		pop	bp
		retf
; ---------------------------------------------------------------------------

_timerdone:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 0Bh
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_25326::				; CODE XREF: seg2286:08E4j
		pop	bp
		retf

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_vocplaying	proc far		; CODE XREF: game_manager::doit(void)+16P
					; game_manager::turn_sound(uchar):loc_13829P ...
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 8
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_25343::				; CODE XREF: _vocplaying+19j
		pop	bp
		retf
_vocplaying	endp

; ---------------------------------------------------------------------------

_pwmplaying:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 1Ch
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_25360::				; CODE XREF: seg2286:091Ej
		pop	bp
		retf
; ---------------------------------------------------------------------------

_closeworxdriver:
		push	bp
		mov	bp, sp
		push	cs
		call	near ptr _dspclose
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 25h	; '%'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		pop	bp
		retf
; ---------------------------------------------------------------------------

_startpoly:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 32h	; '2'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		pop	bp
		retf
; ---------------------------------------------------------------------------

_closepoly:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 34h	; '4'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		pop	bp
		retf
; ---------------------------------------------------------------------------

_setsmpvolume:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		push	word ptr [bp+6]
		mov	al, [bp+8]
		push	ax
		mov	al, 31h	; '1'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		pop	bp
		retf
; ---------------------------------------------------------------------------

_newpitchpoly:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		push	word ptr [bp+8]
		mov	ax, [bp+6]
		mov	cl, 8
		shl	ax, cl
		push	ax
		mov	al, 1
		push	ax
		mov	al, 35h	; '5'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		pop	bp
		retf
; ---------------------------------------------------------------------------

_playwavpoly:
		push	bp
		mov	bp, sp
		push	word ptr [bp+6]
		push	word ptr [bp+8]
		xor	ax, ax
		push	ax
		mov	al, [bp+0Ah]
		push	ax
		mov	al, 33h	; '3'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		xor	ax, ax
		push	ax
		push	word ptr [bp+0Ch]
		mov	ax, [bp+0Ah]
		mov	cl, 8
		shl	ax, cl
		push	ax
		mov	al, 0
		push	ax
		mov	al, 35h	; '5'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		xor	ax, ax
		jmp	$+2
; ---------------------------------------------------------------------------

loc_2542C::				; CODE XREF: seg2286:09EAj
		pop	bp
		retf
; ---------------------------------------------------------------------------

_playvocpoly:
		push	bp
		mov	bp, sp
		push	word ptr [bp+6]
		push	word ptr [bp+8]
		xor	ax, ax
		push	ax
		mov	al, [bp+0Ah]
		push	ax
		mov	al, 41h	; 'A'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		xor	ax, ax
		push	ax
		push	word ptr [bp+0Ch]
		mov	ax, [bp+0Ah]
		mov	cl, 8
		shl	ax, cl
		push	ax
		mov	al, 0
		push	ax
		mov	al, 35h	; '5'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		xor	ax, ax
		jmp	$+2
; ---------------------------------------------------------------------------

loc_25467::				; CODE XREF: seg2286:0A25j
		pop	bp
		retf
; ---------------------------------------------------------------------------

_polycellstatus:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, [bp+6]
		push	ax
		mov	al, 36h	; '6'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		jmp	$+2
; ---------------------------------------------------------------------------

loc_25485::				; CODE XREF: seg2286:0A43j
		pop	bp
		retf
; ---------------------------------------------------------------------------

_vocpoll:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		mov	al, 0
		push	ax
		mov	al, 42h	; 'B'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		pop	bp
		retf

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_vochooksetting	proc far		; CODE XREF: game_manager::game_manager(uchar *)+12BP

arg_0		= word ptr  6

		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		push	[bp+arg_0]
		mov	al, 0
		push	ax
		mov	al, 3Eh	; '>'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		pop	bp
		retf
_vochooksetting	endp

; ---------------------------------------------------------------------------

_setmiclevel:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		push	word ptr [bp+6]
		mov	al, 0
		push	ax
		mov	al, 4Ah	; 'J'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		pop	bp
		retf
; ---------------------------------------------------------------------------

_selectinput:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		push	word ptr [bp+6]
		mov	al, 0
		push	ax
		mov	al, 4Bh	; 'K'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		pop	bp
		retf
; ---------------------------------------------------------------------------

_setlinelevel:
		push	bp
		mov	bp, sp
		xor	ax, ax
		push	ax
		xor	ax, ax
		push	ax
		push	word ptr [bp+6]
		mov	al, 0
		push	ax
		mov	al, 4Ch	; 'L'
		push	ax
		push	cs
		call	near ptr _worx_call
		add	sp, 0Ah
		pop	bp
		retf
; ---------------------------------------------------------------------------
		db 0
		db    0
seg2286		ends

; ===========================================================================

; Segment type:	Pure code
seg2333		segment	byte public 'CODE' use16
		assume cs:seg2333
		assume es:nothing, ss:nothing, ds:seg2608, fs:nothing, gs:nothing
		dw 0E287h
		dw 0C00h
		dw 2418h
		dw 3C30h
		dw 5448h
		dw 6C60h
		dw 8478h
		dw 9C90h
		dw 0B4A8h

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_25522	proc near		; CODE XREF: sub_25603-3Dp
					; sub_25603-19p ...
		push	dx
		push	si
		mov	dx, [si+6]
		and	dh, 7Fh
		or	dx, [si]
		or	dx, [si+2]
		or	dx, [si+4]
		jnz	loc_25554
		cmp	bx, 0FFFFh
		jz	loc_25550

loc_25539::
		cmp	word ptr [bx+8], 4001h
		jl	loc_25550
		mov	dx, [bx+6]

loc_25543::
		and	dh, 7Fh
		or	dx, [bx]
		or	dx, [bx+2]
		or	dx, [bx+4]
		jnz	loc_25594

loc_25550::				; CODE XREF: sub_25522+15j
					; sub_25522+1Cj
		clc

loc_25551::				; CODE XREF: sub_25522+82j
		pop	si
		pop	dx
		retn
; ---------------------------------------------------------------------------

loc_25554::				; CODE XREF: sub_25522+10j
		cmp	bx, 0FFFFh
		jz	loc_25596
		cmp	word ptr [bx+8], 4001h
		jl	loc_25596
		mov	dx, [bx+6]
		and	dh, 7Fh
		or	dx, [bx]
		or	dx, [bx+2]
		or	dx, [bx+4]
		jz	loc_25596
		mov	dx, [si+6]
		cmp	dx, [bx+6]
		ja	loc_25596
		jb	loc_25594
		mov	dx, [si+4]
		cmp	dx, [bx+4]
		ja	loc_25596
		jb	loc_25594
		mov	dx, [si+2]
		cmp	dx, [bx+2]
		ja	loc_25596
		jb	loc_25594
		mov	dx, [si]

loc_25590::
		cmp	dx, [bx]
		ja	loc_25596

loc_25594::				; CODE XREF: sub_25522+2Cj
					; sub_25522+56j ...
		mov	si, bx

loc_25596::				; CODE XREF: sub_25522+35j
					; sub_25522+3Cj ...
		push	di
		mov	ch, 1
		call	sub_27C24
		mov	cx, 6
		cld
		rep movsw
		stc
		pop	di
		jmp	loc_25551
sub_25522	endp

; ---------------------------------------------------------------------------
; START	OF FUNCTION CHUNK FOR sub_25603

loc_255A6::				; CODE XREF: sub_25603-32j
					; sub_25603-29j
		mov	al, [si+0Ah]

loc_255A9::				; CODE XREF: sub_25603-14j
		mov	[bp+var_5], al
		mov	[bp+var_4], 4001h
		nop
		jmp	loc_255F1
; ---------------------------------------------------------------------------

loc_255B4::				; CODE XREF: sub_25603-2Bj
		mov	di, [bp+arg_0]
		nop
		call	sub_26363

loc_255BB::				; CODE XREF: sub_25603-38j
					; sub_25603-16j
		jmp	loc_25751
; ---------------------------------------------------------------------------

loc_255BE::				; CODE XREF: sub_25603+24j
		push	bx
		push	di
		mov	bx, di
		mov	di, [bp+arg_0]
		nop
		call	sub_25522
		pop	di
		pop	bx
		jb	loc_255BB
		cmp	bx, 4001h
		jl	loc_255A6
		mov	al, byte ptr [bp+var_6]
		or	al, al
		jnz	loc_255B4
		jmp	loc_255A6
; ---------------------------------------------------------------------------

loc_255DC::				; CODE XREF: sub_25603+2Aj
		mov	bx, 0FFFFh
		mov	al, [di+0Ah]
		xor	al, cl
		mov	si, di
		mov	di, [bp+arg_0]
		nop
		call	sub_25522
		jb	loc_255BB
		jmp	loc_255A9
; ---------------------------------------------------------------------------

loc_255F1::				; CODE XREF: sub_25603-51j
					; sub_25603+48j ...
		mov	ax, [si]
		mov	bx, [si+2]
		mov	cx, [si+4]
		mov	dx, [si+6]
		jmp	loc_2573E
; END OF FUNCTION CHUNK	FOR sub_25603

; =============== S U B	R O U T	I N E =======================================


sub_255FF	proc near		; CODE XREF: sub_26D36+6Ep
					; seg2333:1C67p ...
		mov	cl, 1
		jmp	loc_25605
sub_255FF	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_25603	proc near		; CODE XREF: seg2333:0830p
					; sub_26D36+7Dp ...

var_6		= byte ptr -6
var_5		= byte ptr -5
var_4		= word ptr -4
var_2		= byte ptr -2
arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= word ptr  8

; FUNCTION CHUNK AT 0096 SIZE 00000059 BYTES

		mov	cl, 0

loc_25605::				; CODE XREF: sub_255FF+2j
		push	bp
		mov	bp, sp
		lea	sp, [bp-6]
		push	si
		push	di
		mov	si, [bp+arg_4]
		mov	di, [bp+arg_2]
		mov	al, cl
		xor	al, [di+0Ah]
		xor	al, [si+0Ah]
		mov	[bp+var_6], al
		mov	ax, [si+8]
		mov	bx, [di+8]
		cmp	ax, 4001h
		jge	loc_255BE
		cmp	bx, 4001h
		jge	loc_255DC
		cmp	ax, bx
		jge	loc_2563B
		xor	cl, [di+0Ah]
		xchg	ax, bx
		xchg	si, di
		jmp	loc_2563E
; ---------------------------------------------------------------------------

loc_2563B::				; CODE XREF: sub_25603+2Ej
		mov	cl, [si+0Ah]

loc_2563E::				; CODE XREF: sub_25603+36j
		mov	[bp+var_5], cl
		mov	cx, [si+8]
		mov	[bp+var_4], cx
		cmp	bx, 0C001h
		jle	loc_255F1
		sub	ax, bx
		cmp	ax, 41h	; 'A'
		jg	loc_255F1
		mov	bx, [di+2]
		mov	cx, [di+4]
		mov	dx, [di+6]
		mov	di, [di]
		xchg	ax, di
		mov	[bp+var_2], 0
		sub	di, 8
		jl	loc_25681

loc_25669::				; CODE XREF: sub_25603+7Cj
		mov	[bp+var_2], al
		mov	al, ah
		mov	ah, bl
		mov	bl, bh
		mov	bh, cl
		mov	cl, ch
		mov	ch, dl
		mov	dl, dh
		mov	dh, 0
		sub	di, 8
		jge	loc_25669

loc_25681::				; CODE XREF: sub_25603+64j
		and	di, 7
		jz	loc_25694

loc_25686::				; CODE XREF: sub_25603+8Fj
		shr	dx, 1
		rcr	cx, 1
		rcr	bx, 1
		rcr	ax, 1
		rcr	[bp+var_2], 1
		dec	di
		jnz	loc_25686

loc_25694::				; CODE XREF: sub_25603+81j
		cmp	[bp+var_6], 0
		jnz	loc_256B7
		add	ax, [si]
		adc	bx, [si+2]
		adc	cx, [si+4]
		adc	dx, [si+6]
		jnb	loc_2571E
		rcr	dx, 1
		rcr	cx, 1
		rcr	bx, 1
		rcr	ax, 1
		rcr	[bp+var_2], 1
		inc	[bp+var_4]
		jmp	loc_2571E
; ---------------------------------------------------------------------------

loc_256B7::				; CODE XREF: sub_25603+95j
		xor	[bp+var_5], 1
		sub	ax, [si]
		sbb	bx, [si+2]
		sbb	cx, [si+4]
		sbb	dx, [si+6]
		jnb	loc_256E0
		xor	[bp+var_5], 1
		not	dx
		not	cx
		not	bx
		not	ax
		neg	[bp+var_2]
		cmc
		adc	ax, di
		adc	bx, di
		adc	cx, di
		adc	dx, di

loc_256E0::				; CODE XREF: sub_25603+C3j
		mov	si, 8

loc_256E3::				; CODE XREF: sub_25603+FEj
		or	dh, dh
		jnz	loc_2571C
		mov	dh, dl
		mov	dl, ch
		mov	ch, cl
		mov	cl, bh
		mov	bh, bl
		mov	bl, ah
		mov	ah, al
		mov	al, [bp+var_2]
		mov	[bp+var_2], 0
		sub	[bp+var_4], 8
		dec	si
		jge	loc_256E3
		mov	[bp+var_4], 0C001h
		mov	[bp+var_5], 0
		jmp	loc_2573E
; ---------------------------------------------------------------------------

loc_2570E::				; CODE XREF: sub_25603:loc_2571Cj
		dec	[bp+var_4]
		shl	[bp+var_2], 1
		rcl	ax, 1
		rcl	bx, 1
		rcl	cx, 1
		adc	dx, dx

loc_2571C::				; CODE XREF: sub_25603+E2j
		jns	loc_2570E

loc_2571E::				; CODE XREF: sub_25603+A2j
					; sub_25603+B2j
		shl	[bp+var_2], 1
		adc	ax, di
		adc	bx, di
		adc	cx, di
		adc	dx, di
		jnb	loc_25730
		rcr	dx, 1
		inc	[bp+var_4]

loc_25730::				; CODE XREF: sub_25603+126j
		cmp	[bp+var_4], 4001h
		jge	loc_25759
		cmp	[bp+var_4], 0C001h
		jle	loc_25762

loc_2573E::				; CODE XREF: sub_25603-7j
					; sub_25603+109j ...
		cld
		mov	di, [bp+arg_0]
		stosw
		xchg	ax, bx
		stosw
		xchg	ax, cx
		stosw
		xchg	ax, dx
		stosw
		mov	ax, [bp+var_4]
		stosw
		mov	al, [bp+var_5]
		stosb

loc_25751::				; CODE XREF: sub_25603:loc_255BBj
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn	6
; ---------------------------------------------------------------------------

loc_25759::				; CODE XREF: sub_25603+132j
		mov	ch, 8
		mov	[bp+var_4], 4001h
		jmp	loc_25769
; ---------------------------------------------------------------------------

loc_25762::				; CODE XREF: sub_25603+139j
		mov	ch, 10h
		mov	[bp+var_4], 0C001h

loc_25769::				; CODE XREF: sub_25603+15Dj
		call	sub_27C24
		mov	[bp+var_5], 0
		sub	ax, ax
		mov	bx, ax
		mov	cx, ax
		cwd
		jmp	loc_2573E
sub_25603	endp

; ---------------------------------------------------------------------------
; START	OF FUNCTION CHUNK FOR sub_257CD

loc_25779::				; CODE XREF: sub_257CD-31j
					; sub_257CD-1Bj ...
		mov	ax, 4001h

loc_2577C::				; CODE XREF: sub_257CD-2j
		mov	di, [bp+arg_0]
		mov	cl, [bp+var_6]
		call	sub_2634D

loc_25785::				; CODE XREF: sub_257CD-3Aj
					; sub_257CD-22j ...
		pop	ax
		jmp	loc_2585D
; ---------------------------------------------------------------------------

loc_25789::				; CODE XREF: sub_257CD+21j
		push	di
		mov	bx, di
		mov	di, [bp+arg_0]
		call	sub_25522
		pop	di
		jb	loc_25785
		cmp	word ptr [di+8], 0C001h
		jle	loc_257B4
		jmp	loc_25779
; ---------------------------------------------------------------------------

loc_2579E::				; CODE XREF: sub_257CD+25j
		push	si
		mov	bx, 0FFFFh
		mov	si, di
		mov	di, [bp+arg_0]
		call	sub_25522
		pop	si
		jb	loc_25785
		cmp	word ptr [si+8], 0C001h
		jg	loc_25779

loc_257B4::				; CODE XREF: sub_257CD-33j
		mov	di, [bp+arg_0]
		call	sub_26363
		jmp	loc_25785
; ---------------------------------------------------------------------------

loc_257BC::				; CODE XREF: sub_257CD+35j
		mov	ch, 8
		call	sub_27C24
		jmp	loc_25779
; ---------------------------------------------------------------------------

loc_257C3::				; CODE XREF: sub_257CD:loc_25808j
		mov	ch, 10h
		call	sub_27C24

loc_257C8::				; CODE XREF: sub_257CD+29j
					; sub_257CD+2Dj
		mov	ax, 0C001h
		jmp	loc_2577C
; END OF FUNCTION CHUNK	FOR sub_257CD

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_257CD	proc near		; CODE XREF: sub_26C15+12p
					; sub_26D36+74p ...

var_6		= byte ptr -6
arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= word ptr  8
arg_1A		= word ptr  1Eh

; FUNCTION CHUNK AT 0269 SIZE 00000054 BYTES

		push	bp
		mov	bp, sp
		push	si
		push	di
		cld
		mov	si, [bp+arg_4]
		mov	di, [bp+arg_2]
		mov	cl, [si+0Ah]
		xor	cl, [di+0Ah]
		push	cx
		mov	dx, 4001h
		mov	bx, [di+8]
		mov	cx, 0C001h
		mov	ax, [si+8]
		cmp	ax, dx
		jge	loc_25789
		cmp	bx, dx
		jge	loc_2579E
		cmp	ax, cx
		jle	loc_257C8
		cmp	bx, cx
		jle	loc_257C8
		add	ax, bx
		dec	ax
		cmp	ax, 4001h
		jge	loc_257BC
		inc	ax
		cmp	ax, 0C001h

loc_25808::
		jle	loc_257C3
		push	word ptr [si+6]
		push	word ptr [si+4]
		push	word ptr [si+2]
		push	word ptr [si]
		sub	sp, 4
		push	word ptr [di+6]
		push	word ptr [di+4]
		push	word ptr [di+2]
		push	word ptr [di]
		xchg	ax, di
		mov	bp, sp
		call	sub_25863
		add	sp, 14h
		or	dx, dx
		js	loc_2583B
		dec	di
		shl	si, 1
		rcl	ax, 1
		rcl	bx, 1
		rcl	cx, 1
		rcl	dx, 1

loc_2583B::				; CODE XREF: sub_257CD+61j
		shl	si, 1
		adc	ax, 0
		jnb	loc_2584D
		adc	bx, ax
		adc	cx, ax
		adc	dx, ax
		jnb	loc_2584D
		rcr	dx, 1
		inc	di

loc_2584D::				; CODE XREF: sub_257CD+73j
					; sub_257CD+7Bj
		mov	si, di
		mov	di, [bp+arg_1A]
		stosw
		xchg	ax, bx
		stosw
		xchg	ax, cx
		stosw
		xchg	ax, dx
		stosw
		xchg	ax, si
		stosw
		pop	ax
		stosb

loc_2585D::				; CODE XREF: sub_257CD-47j
		pop	di
		pop	si
		pop	bp
		retn	6
sub_257CD	endp


; =============== S U B	R O U T	I N E =======================================


sub_25863	proc near		; CODE XREF: sub_257CD+59p
					; sub_26A5E+28p
		push	di
		sub	di, di
		mov	cx, di
		mov	si, di
		test	byte ptr [bp+0Fh], 80h
		jz	loc_25876
		mov	cx, [bp+0]
		mov	si, [bp+2]

loc_25876::				; CODE XREF: sub_25863+Bj
		test	byte ptr [bp+3], 80h
		jz	loc_2588B
		add	cx, [bp+0Ch]
		adc	si, [bp+0Eh]
		adc	di, di
		test	byte ptr [bp+0Fh], 80h
		jz	loc_2588B
		dec	di

loc_2588B::				; CODE XREF: sub_25863+17j
					; sub_25863+25j
		sub	bx, bx
		mov	ax, [bp+0Ch]
		mul	word ptr [bp+4]
		add	cx, ax
		adc	si, dx
		adc	di, 0
		mov	ax, [bp+10h]
		or	ax, ax
		jz	loc_258B8
		mul	word ptr [bp+0]
		add	cx, ax
		adc	si, dx
		adc	di, 0
		mov	ax, [bp+10h]
		mul	word ptr [bp+2]
		add	si, ax
		adc	di, dx
		adc	bx, 0

loc_258B8::				; CODE XREF: sub_25863+3Cj
		mov	ax, [bp+0Ch]
		mul	word ptr [bp+6]
		add	si, ax
		adc	di, dx
		adc	bx, 0
		mov	ax, [bp+0Eh]
		mul	word ptr [bp+4]
		add	si, ax
		adc	di, dx
		adc	bx, 0
		mov	ax, [bp+12h]
		or	ax, ax
		jz	loc_258E3
		mul	word ptr [bp+0]
		add	si, ax
		adc	di, dx
		adc	bx, 0

loc_258E3::				; CODE XREF: sub_25863+74j
		sub	cx, cx
		push	si
		mov	si, cx
		mov	ax, [bp+0Eh]
		mul	word ptr [bp+6]
		add	di, ax
		adc	bx, dx
		adc	cx, 0
		mov	ax, [bp+10h]
		or	ax, ax
		jz	loc_25913
		mul	word ptr [bp+4]
		add	di, ax
		adc	bx, dx
		adc	cx, 0
		mov	ax, [bp+10h]
		mul	word ptr [bp+6]
		add	bx, ax
		adc	cx, dx
		adc	si, 0

loc_25913::				; CODE XREF: sub_25863+97j
		mov	ax, [bp+12h]
		or	ax, ax
		jz	loc_2593E
		mul	word ptr [bp+2]
		add	di, ax
		adc	bx, dx
		adc	cx, 0
		adc	si, 0
		mov	ax, [bp+12h]
		mul	word ptr [bp+4]
		add	bx, ax
		adc	cx, dx
		adc	si, 0
		mov	ax, [bp+12h]
		mul	word ptr [bp+6]
		add	cx, ax
		adc	si, dx

loc_2593E::				; CODE XREF: sub_25863+B5j
		mov	dx, si
		xchg	ax, di
		pop	si
		pop	di
		retn
sub_25863	endp

; ---------------------------------------------------------------------------
; START	OF FUNCTION CHUNK FOR sub_2599A

loc_25944::				; CODE XREF: sub_2599A+22j
		mov	si, di
		mov	di, [bp+arg_0]
		nop
		call	sub_25522
		jb	loc_2597E
		cmp	word ptr [bx+8], 4001h
		jl	loc_25986
		call	sub_26363
		jmp	loc_2597E
; ---------------------------------------------------------------------------

loc_2595B::				; CODE XREF: sub_2599A+27j
		mov	si, bx
		mov	bx, 0FFFFh
		mov	di, [bp+arg_0]
		nop
		call	sub_25522
		jb	loc_2597E
		jmp	loc_25970
; ---------------------------------------------------------------------------

loc_2596B::				; CODE XREF: sub_2599A+2Dj
		mov	ch, 4

loc_2596D::				; CODE XREF: sub_2599A-Dj
		call	sub_27C24

loc_25970::				; CODE XREF: sub_2599A-31j
					; sub_2599A:loc_25CEBj
		mov	ax, 4001h

loc_25973::				; CODE XREF: sub_2599A-11j
		mov	cl, [bp+var_7]
		nop
		mov	di, [bp+arg_0]
		nop
		call	sub_2634D

loc_2597E::				; CODE XREF: sub_2599A-4Dj
					; sub_2599A-41j ...
		jmp	loc_25CE2
; ---------------------------------------------------------------------------

loc_25981::				; CODE XREF: sub_2599A+3Ej
		mov	ch, 10h
		call	sub_27C24

loc_25986::				; CODE XREF: sub_2599A-46j
					; sub_2599A+32j
		mov	ax, 0C001h
		jmp	loc_25973
; ---------------------------------------------------------------------------

loc_2598B::				; CODE XREF: sub_2599A+39j
		mov	ch, 8
		jmp	loc_2596D
; ---------------------------------------------------------------------------

loc_2598F::				; CODE XREF: sub_2599A+5Aj
		mov	ax, [bp+var_12]
		or	ax, [bp+var_14]
		jnz	loc_259F6
		jmp	loc_25CEE
; END OF FUNCTION CHUNK	FOR sub_2599A

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_2599A	proc near		; CODE XREF: seg2333:082Ap
					; sub_26D36+Bp	...

var_14		= word ptr -14h
var_12		= word ptr -12h
var_10		= word ptr -10h
var_E		= word ptr -0Eh
var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= byte ptr -8
var_7		= byte ptr -7
var_6		= word ptr -6
arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= word ptr  8

; FUNCTION CHUNK AT 0434 SIZE 00000056 BYTES

		push	bp
		mov	bp, sp
		push	si
		push	di
		lea	sp, [bp-0Ch]
		mov	di, [bp+arg_2]
		mov	bx, [bp+arg_4]
		cld
		mov	al, [bx+0Ah]
		xor	al, [di+0Ah]
		mov	[bp+var_7], al
		mov	si, [di+8]
		mov	ax, [bx+8]
		cmp	si, 4001h
		jge	loc_25944
		cmp	ax, 4001h
		jge	loc_2595B
		cmp	si, 0C001h
		jle	loc_2596B
		cmp	ax, 0C001h
		jle	loc_25986
		sub	ax, si
		cmp	ax, 4001h
		jge	loc_2598B
		cmp	ax, 0C001h
		jle	loc_25981
		mov	dx, [di+6]
		push	dx
		mov	cx, [di+4]
		push	cx
		push	word ptr [di+2]
		push	word ptr [di]
		mov	[bp+var_6], ax
		mov	[bp+var_8], 0
		mov	di, [bx+6]
		mov	si, [bx+4]
		jcxz	loc_2598F

loc_259F6::				; CODE XREF: sub_2599A-5j
		xchg	ax, cx
		mov	cx, [bx+2]
		mov	bx, [bx]
		cmp	di, dx
		jb	loc_25A7A
		mov	[bp+var_8], 1
		sub	bx, [bp+var_14]
		sbb	cx, [bp+var_12]
		sbb	si, ax
		sbb	di, dx
		jnb	loc_25A7A
		sub	ax, ax
		cwd
		sub	ax, si
		sbb	dx, di
		div	[bp+var_E]
		mov	[bp+var_A], ax
		mul	[bp+var_E]
		add	si, ax
		adc	di, dx
		mov	ax, [bp+var_10]
		mul	[bp+var_A]
		add	cx, ax
		adc	si, dx
		adc	di, 0
		mov	ax, [bp+var_12]
		mul	[bp+var_A]
		add	bx, ax
		adc	cx, dx
		adc	si, 0
		adc	di, 0
		mov	ax, [bp+var_14]
		mul	[bp+var_A]
		neg	[bp+var_A]
		sbb	[bp+var_8], 0
		add	bx, dx
		adc	cx, 0
		adc	si, 0
		adc	di, 0
		xchg	ax, di
		jl	loc_25A75
		cmp	si, [bp+var_E]
		jb	loc_25A77
		add	[bp+var_A], 1
		adc	[bp+var_8], 0
		sub	di, [bp+var_14]
		sbb	bx, [bp+var_12]
		sbb	cx, [bp+var_10]
		sbb	si, [bp+var_E]

loc_25A75::				; CODE XREF: sub_2599A+C0j
		jl	loc_25ADD

loc_25A77::				; CODE XREF: sub_2599A+C5j
					; sub_2599A+122j
		jmp	loc_25B46
; ---------------------------------------------------------------------------

loc_25A7A::				; CODE XREF: sub_2599A+64j
					; sub_2599A+74j
		mov	ax, si
		mov	dx, di
		div	[bp+var_E]
		mov	[bp+var_A], ax
		mul	[bp+var_E]
		sub	si, ax
		sbb	di, dx
		mov	ax, [bp+var_10]
		mul	[bp+var_A]
		sub	cx, ax
		sbb	si, dx
		sbb	di, 0
		mov	ax, [bp+var_12]
		mul	[bp+var_A]
		sub	bx, ax
		sbb	cx, dx
		sbb	si, 0
		sbb	di, 0
		mov	ax, [bp+var_14]
		mul	[bp+var_A]
		neg	ax
		sbb	bx, dx
		sbb	cx, 0
		sbb	si, 0
		sbb	di, 0
		xchg	ax, di
		jge	loc_25A77
		mov	dx, si
		neg	dx
		cmp	dx, [bp+var_E]
		jb	loc_25ADD
		sub	[bp+var_A], 1
		sbb	[bp+var_8], 0
		add	di, [bp+var_14]
		adc	bx, [bp+var_12]
		adc	cx, [bp+var_10]
		adc	si, [bp+var_E]
		jge	loc_25B46

loc_25ADD::				; CODE XREF: sub_2599A:loc_25A75j
					; sub_2599A+12Bj
		sub	ax, ax
		cwd
		sub	ax, cx
		sbb	dx, si
		div	[bp+var_E]
		mov	[bp+var_C], ax
		mul	[bp+var_E]
		add	cx, ax
		adc	si, dx
		mov	ax, [bp+var_10]
		mul	[bp+var_C]
		add	bx, ax
		adc	cx, dx
		adc	si, 0
		mov	ax, [bp+var_12]
		mul	[bp+var_C]
		add	di, ax
		adc	bx, dx
		adc	cx, 0
		adc	si, 0
		mov	ax, [bp+var_14]
		mul	[bp+var_C]
		sub	ax, ax
		neg	[bp+var_C]
		sbb	[bp+var_A], ax
		sbb	[bp+var_8], al
		add	di, dx
		adc	bx, ax
		adc	cx, ax
		adc	si, ax
		jl	loc_25BA4
		cmp	cx, [bp+var_E]
		jb	loc_25B43
		add	[bp+var_C], 1
		adc	[bp+var_A], ax
		adc	[bp+var_8], al
		sub	di, [bp+var_12]
		sbb	bx, [bp+var_10]
		sbb	cx, [bp+var_E]
		jl	loc_25BA4

loc_25B43::				; CODE XREF: sub_2599A+192j
		jmp	loc_25BF9
; ---------------------------------------------------------------------------

loc_25B46::				; CODE XREF: sub_2599A:loc_25A77j
					; sub_2599A+141j
		mov	ax, cx
		mov	dx, si
		div	[bp+var_E]
		mov	[bp+var_C], ax
		mul	[bp+var_E]
		sub	cx, ax
		sbb	si, dx
		mov	ax, [bp+var_10]
		mul	[bp+var_C]
		sub	bx, ax
		sbb	cx, dx
		sbb	si, 0
		mov	ax, [bp+var_12]
		mul	[bp+var_C]
		sub	di, ax
		sbb	bx, dx
		sbb	cx, 0
		sbb	si, 0
		mov	ax, [bp+var_14]
		mul	[bp+var_C]
		sub	ax, ax
		sub	di, dx
		sbb	bx, ax
		sbb	cx, ax
		sbb	si, ax
		jge	loc_25BF9
		mov	dx, cx
		neg	dx
		cmp	dx, [bp+var_E]
		jb	loc_25BA4
		sub	[bp+var_C], 1
		sbb	[bp+var_A], ax
		sbb	[bp+var_8], al
		add	di, [bp+var_12]
		adc	bx, [bp+var_10]
		adc	cx, [bp+var_E]
		jge	loc_25BF9

loc_25BA4::				; CODE XREF: sub_2599A+18Dj
					; sub_2599A+1A7j ...
		sub	ax, ax
		cwd
		sub	ax, bx
		sbb	dx, cx
		div	[bp+var_E]
		mov	si, ax
		mul	[bp+var_E]
		add	bx, ax
		adc	cx, dx
		mov	ax, [bp+var_10]
		mul	si
		add	di, ax
		adc	bx, dx
		adc	cx, 0
		mov	ax, [bp+var_12]
		mul	si
		sub	ax, ax
		neg	si
		sbb	[bp+var_C], ax
		sbb	[bp+var_A], ax
		sbb	[bp+var_8], al
		add	di, dx
		adc	bx, ax
		adc	cx, ax
		jl	loc_25C41
		cmp	bx, [bp+var_E]
		jb	loc_25BF6
		add	si, 1
		adc	[bp+var_C], ax
		adc	[bp+var_A], ax
		adc	[bp+var_8], al
		sub	di, [bp+var_10]
		sbb	bx, [bp+var_E]
		jl	loc_25C41

loc_25BF6::				; CODE XREF: sub_2599A+246j
		jmp	loc_25C83
; ---------------------------------------------------------------------------

loc_25BF9::				; CODE XREF: sub_2599A:loc_25B43j
					; sub_2599A+1EAj ...
		mov	ax, bx
		mov	dx, cx
		div	[bp+var_E]
		mov	si, ax
		mul	[bp+var_E]
		sub	bx, ax
		sbb	cx, dx
		mov	ax, [bp+var_10]
		mul	si
		sub	di, ax
		sbb	bx, dx
		sbb	cx, 0
		mov	ax, [bp+var_12]
		mul	si
		sub	ax, ax
		sub	di, dx
		sbb	bx, ax
		sbb	cx, ax
		jge	loc_25C83
		mov	dx, bx
		neg	dx
		cmp	dx, [bp+var_E]
		jb	loc_25C41
		sub	si, 1
		sbb	[bp+var_C], ax
		sbb	[bp+var_A], ax
		sbb	[bp+var_8], al
		add	di, [bp+var_10]
		adc	bx, [bp+var_E]
		jge	loc_25C83

loc_25C41::				; CODE XREF: sub_2599A+241j
					; sub_2599A+25Aj ...
		mov	ax, [bp+var_10]
		shr	ax, 1
		neg	ax
		mov	cx, [bp+var_E]
		add	ax, cx
		sub	dx, dx
		sub	ax, di
		sbb	dx, bx
		mov	bx, [bp+var_C]
		mov	di, [bp+var_A]
		cmp	dx, cx
		jnb	loc_25C78
		div	cx
		sub	dx, cx
		neg	dx
		neg	ax

loc_25C65::				; CODE XREF: sub_2599A+2E2j
		mov	dl, [bp+var_8]
		sbb	si, 0
		jnb	loc_25CA1
		sbb	bx, 0
		sbb	di, 0
		sbb	dl, 0
		jmp	loc_25CA1
; ---------------------------------------------------------------------------

loc_25C78::				; CODE XREF: sub_2599A+2C1j
		sub	ax, ax
		cwd
		stc
		jmp	loc_25C65
; ---------------------------------------------------------------------------

loc_25C7E::				; CODE XREF: sub_2599A+300j
		sub	ax, ax
		cwd
		jmp	loc_25C9E
; ---------------------------------------------------------------------------

loc_25C83::				; CODE XREF: sub_2599A:loc_25BF6j
					; sub_2599A+288j ...
		mov	ax, [bp+var_10]
		shr	ax, 1
		neg	ax
		cwd
		add	ax, di
		adc	dx, bx
		mov	bx, [bp+var_C]
		mov	di, [bp+var_A]
		mov	cx, [bp+var_E]
		cmp	dx, cx
		jnb	loc_25C7E
		div	cx

loc_25C9E::				; CODE XREF: sub_2599A+2E7j
					; sub_2599A+375j
		mov	dl, [bp+var_8]

loc_25CA1::				; CODE XREF: sub_2599A+2D1j
					; sub_2599A+2DCj
		shr	dl, 1
		jnb	loc_25CB2
		rcr	di, 1
		rcr	bx, 1
		rcr	si, 1
		rcr	ax, 1
		rcr	dh, 1
		inc	[bp+var_6]

loc_25CB2::				; CODE XREF: sub_2599A+309j
		shr	cx, 1
		sub	ch, dh
		mov	cx, [bp+var_6]
		adc	ax, 0
		jnb	loc_25CC9
		adc	si, ax
		adc	bx, ax
		adc	di, ax
		jnb	loc_25CC9
		rcr	di, 1
		inc	cx

loc_25CC9::				; CODE XREF: sub_2599A+322j
					; sub_2599A+32Aj
		cmp	cx, 4001h
		jge	loc_25CEB
		mov	dx, di
		mov	di, [bp+arg_0]
		cld
		stosw
		xchg	ax, si
		stosw
		xchg	ax, bx
		stosw
		xchg	ax, dx
		stosw
		xchg	ax, cx
		stosw
		mov	al, [bp+var_7]
		stosb

loc_25CE2::				; CODE XREF: sub_2599A:loc_2597Ej
		lea	sp, [bp-4]
		pop	di
		pop	si
		pop	bp
		retn	6
; ---------------------------------------------------------------------------

loc_25CEB::				; CODE XREF: sub_2599A+333j
		jmp	loc_25970
; ---------------------------------------------------------------------------

loc_25CEE::				; CODE XREF: sub_2599A-3j
		mov	cx, dx
		mov	dx, di
		xchg	ax, si
		cmp	dx, cx
		jb	loc_25CFD
		sub	dx, cx
		mov	[bp+var_8], 1

loc_25CFD::				; CODE XREF: sub_2599A+35Bj
		div	cx
		xchg	ax, di
		mov	ax, [bx+2]
		div	cx
		mov	bx, [bx]
		xchg	ax, bx
		div	cx
		xchg	ax, si
		sub	ax, ax
		div	cx
		jmp	loc_25C9E
sub_2599A	endp ; sp-analysis failed

; ---------------------------------------------------------------------------
		mov	si, word_2826C

loc_25D15::				; DATA XREF: seg2333:2554o
		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	ax, [si+8]
		cmp	ax, 0C001h
		jle	loc_25D4B
		cmp	ax, 4001h
		jge	loc_25D4F
		cmp	byte ptr [si+0Ah], 0
		jnz	loc_25D59
		call	sub_2637B
		call	sub_25D6A
		mov	di, word_2826C
		push	si
		push	di
		push	si
		call	sub_2599A
		push	di
		push	si
		push	si
		call	sub_25603
		dec	word ptr [si+8]
		add	word_2826C, 0Ch

loc_25D4B::				; CODE XREF: seg2333:0810j
					; seg2333:0847j ...
		pop	di
		pop	si
		pop	bp
		retn
; ---------------------------------------------------------------------------

loc_25D4F::				; CODE XREF: seg2333:0815j
		mov	bx, 0FFFFh
		mov	di, si
		call	sub_25522
		jmp	loc_25D4B
; ---------------------------------------------------------------------------

loc_25D59::				; CODE XREF: seg2333:081Bj
		mov	ch, 1
		call	sub_27C24
		mov	di, si
		call	sub_26337
		mov	word ptr [di+8], 4001h
		jmp	loc_25D4B

; =============== S U B	R O U T	I N E =======================================


sub_25D6A	proc near		; CODE XREF: seg2333:0820p
		push	si
		push	di
		mov	di, word_2826C
		mov	bx, [di+8]
		mov	dx, [di+6]
		mov	ax, [di+4]
		mov	cx, [di+2]
		sar	bx, 1
		jnb	loc_25D87
		inc	bx
		shr	dx, 1
		rcr	ax, 1
		rcr	cx, 1

loc_25D87::				; CODE XREF: sub_25D6A+14j
		cmp	dx, 0FFFEh
		jnb	loc_25DA9
		push	bx
		push	cx
		mov	cx, dx
		mov	bx, ax
		mov	si, dx
		stc
		rcr	si, 1

loc_25D97::				; CODE XREF: sub_25D6A+3Dj
		div	si
		dec	si
		cmp	si, ax
		jbe	loc_25DB0
		inc	si
		add	si, ax
		rcr	si, 1
		mov	dx, cx
		mov	ax, bx
		jmp	loc_25D97
; ---------------------------------------------------------------------------

loc_25DA9::				; CODE XREF: sub_25D6A+20j
		stc
		rcr	dx, 1
		rcr	ax, 1
		jmp	loc_25DC7
; ---------------------------------------------------------------------------

loc_25DB0::				; CODE XREF: sub_25D6A+32j
		inc	si
		cmp	si, ax
		jnb	loc_25DB6
		xchg	ax, si

loc_25DB6::				; CODE XREF: sub_25D6A+49j
		pop	cx
		pop	bx
		xchg	ax, cx
		div	si
		sub	dx, dx
		add	si, cx
		rcr	si, 1
		rcr	ax, 1
		adc	ax, dx
		adc	dx, si

loc_25DC7::				; CODE XREF: sub_25D6A+44j
		cld
		sub	cx, cx
		xchg	ax, cx
		stosw
		stosw
		xchg	ax, cx
		stosw
		xchg	ax, dx
		stosw
		xchg	ax, bx
		stosw
		mov	al, 0
		stosb
		pop	di
		pop	si
		retn
sub_25D6A	endp

; ---------------------------------------------------------------------------
		db 0
; ---------------------------------------------------------------------------
		add	al, [bx+si+42h]
		add	[bp+di], ax
		inc	cx
		inc	bx

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_25DE1	proc near		; CODE XREF: seg2333:1C3Cp
					; DATA XREF: seg2333:2550o

var_A		= word ptr -0Ah
var_4		= word ptr -4
var_2		= byte ptr -2

		push	bp
		mov	bp, sp
		push	word ptr [di+0Ah]
		lea	sp, [bp-6]
		push	si
		push	di
		mov	ax, [di]
		mov	bx, [di+2]
		mov	cx, [di+4]
		mov	dx, [di+6]
		mov	[bp+var_4], 0
		mov	di, [di+8]
		sub	di, [si+8]
		jge	loc_25E1B
		jmp	loc_25E57
; ---------------------------------------------------------------------------

loc_25E06::				; CODE XREF: sub_25DE1+29j
		inc	di
		jmp	loc_25E46
; ---------------------------------------------------------------------------

loc_25E09::				; CODE XREF: sub_25DE1+38j
					; sub_25DE1+3Fj ...
		dec	di
		jl	loc_25E06
		shl	[bp+var_4], 1
		shl	ax, 1
		rcl	bx, 1
		rcl	cx, 1
		adc	dx, dx
		jb	loc_25E34
		jns	loc_25E09

loc_25E1B::				; CODE XREF: sub_25DE1+21j
		cmp	dx, [si+6]
		ja	loc_25E34
		jb	loc_25E09
		cmp	cx, [si+4]
		ja	loc_25E34
		jb	loc_25E09
		cmp	bx, [si+2]
		ja	loc_25E34
		jb	loc_25E09
		cmp	ax, [si]
		jb	loc_25E09

loc_25E34::				; CODE XREF: sub_25DE1+36j
					; sub_25DE1+3Dj ...
		inc	[bp+var_4]
		sub	ax, [si]
		sbb	bx, [si+2]
		sbb	cx, [si+4]
		sbb	dx, [si+6]
		or	di, di
		jg	loc_25E09

loc_25E46::				; CODE XREF: sub_25DE1+26j
					; sub_25DE1+B8j ...
		or	dx, dx
		js	loc_25E57
		jz	loc_25E8F

loc_25E4C::				; CODE XREF: sub_25DE1+74j
		dec	di
		shl	ax, 1
		rcl	bx, 1
		rcl	cx, 1
		adc	dx, dx
		jns	loc_25E4C

loc_25E57::				; CODE XREF: sub_25DE1+23j
					; sub_25DE1+67j
		add	di, [si+8]

loc_25E5A::				; CODE XREF: sub_25DE1+D9j
		push	di
		mov	di, [bp+var_A]
		stosw
		xchg	ax, bx
		stosw
		xchg	ax, cx
		stosw
		xchg	ax, dx
		stosw
		pop	ax
		stosw
		mov	al, [bp+var_2]
		stosb
		and	byte ptr dataseg@+1, 0B8h
		mov	di, 7
		mov	ax, [bp+var_4]
		cmp	[bp+var_2], 1
		jnz	loc_25E7E
		neg	ax

loc_25E7E::				; CODE XREF: sub_25DE1+99j
		and	di, ax
		mov	dl, cs:[di+8C9h]
		or	byte ptr dataseg@+1, dl
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
; ---------------------------------------------------------------------------

loc_25E8F::				; CODE XREF: sub_25DE1+69j
		xchg	dx, cx
		xchg	cx, bx
		xchg	ax, bx
		sub	di, 10h
		or	dx, dx
		jnz	loc_25E46
		xchg	dx, cx
		xchg	cx, bx
		sub	di, 10h
		or	dx, dx
		jnz	loc_25E46
		xchg	dx, cx
		sub	di, 10h
		or	dx, dx
		jnz	loc_25E46
		mov	di, 0C001h
		sub	dx, dx
		sub	cx, cx
		sub	bx, bx
		sub	ax, ax
		jmp	loc_25E5A
sub_25DE1	endp

; ---------------------------------------------------------------------------
; START	OF FUNCTION CHUNK FOR sub_25EE9

loc_25EBC::				; CODE XREF: sub_25EE9+14j
		mov	dx, [si+6]
		and	dh, 7Fh
		or	dx, [si]
		or	dx, [si+2]
		or	dx, [si+4]
		jz	loc_25EFF

loc_25ECC::				; CODE XREF: sub_25EE9-4j
		mov	ch, 1
		call	sub_27C24
		mov	ax, 4500h
		jmp	loc_25F67
; ---------------------------------------------------------------------------

loc_25ED7::				; CODE XREF: sub_25EE9+1Aj
		mov	dx, [di+6]
		and	dh, 7Fh
		or	dx, [di]
		or	dx, [di+2]
		or	dx, [di+4]
		jnz	loc_25ECC
		jmp	loc_25F05
; END OF FUNCTION CHUNK	FOR sub_25EE9

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_25EE9	proc near		; CODE XREF: sub_26D36+28p
					; sub_277A8+3j

arg_0		= word ptr  4
arg_2		= word ptr  6

; FUNCTION CHUNK AT 09AC SIZE 0000002D BYTES

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	si, [bp+arg_2]
		mov	di, [bp+arg_0]
		mov	ax, [si+8]
		mov	bx, [di+8]
		cmp	ax, 4001h
		jge	loc_25EBC

loc_25EFF::				; CODE XREF: sub_25EE9-1Fj
		cmp	bx, 4001h
		jge	loc_25ED7

loc_25F05::				; CODE XREF: sub_25EE9-2j
		mov	dx, ax
		cmp	ax, bx
		jg	loc_25F0D
		mov	dx, bx

loc_25F0D::				; CODE XREF: sub_25EE9+20j
		cmp	dx, 0C001h
		jle	loc_25F4E
		mov	cl, [si+0Ah]
		cmp	cl, [di+0Ah]
		jl	loc_25F64
		jg	loc_25F5A
		cmp	ax, bx
		jl	loc_25F55
		jg	loc_25F5F
		mov	ax, [si+6]
		cmp	ax, [di+6]
		jnz	loc_25F53
		mov	ch, 3
		and	ch, byte ptr word_28262+1
		jz	loc_25F71
		mov	ax, [si+4]
		cmp	ax, [di+4]
		jnz	loc_25F53
		mov	ax, [si+2]
		cmp	ax, [di+2]
		jnz	loc_25F53
		cmp	ch, 2
		jz	loc_25F93
		mov	ax, [si]
		cmp	ax, [di]
		jnz	loc_25F53

loc_25F4E::				; CODE XREF: sub_25EE9+28j
					; sub_25EE9+9Fj ...
		mov	ax, 4000h
		jmp	loc_25F67
; ---------------------------------------------------------------------------

loc_25F53::				; CODE XREF: sub_25EE9+40j
					; sub_25EE9+50j ...
		ja	loc_25F5F

loc_25F55::				; CODE XREF: sub_25EE9+36j
					; sub_25EE9+A1j ...
		cmp	cl, 0
		jnz	loc_25F64

loc_25F5A::				; CODE XREF: sub_25EE9+32j
					; sub_25EE9+79j
		mov	ax, 100h
		jmp	loc_25F67
; ---------------------------------------------------------------------------

loc_25F5F::				; CODE XREF: sub_25EE9+38j
					; sub_25EE9:loc_25F53j	...
		cmp	cl, 0
		jnz	loc_25F5A

loc_25F64::				; CODE XREF: sub_25EE9+30j
					; sub_25EE9+6Fj
		mov	ax, 0

loc_25F67::				; CODE XREF: sub_25EE9-15j
					; sub_25EE9+68j ...
		mov	byte ptr dataseg@+1, ah
		pop	di
		pop	si
		pop	bp
		retn	4
; ---------------------------------------------------------------------------

loc_25F71::				; CODE XREF: sub_25EE9+48j
		mov	bx, [si]
		sub	bx, [di]
		mov	bx, [si+2]
		sbb	bx, [di+2]
		mov	bx, [si+4]
		sbb	bx, [di+4]
		ja	loc_25F8C
		neg	bx
		and	bx, 0FF80h
		jz	loc_25F4E
		jmp	loc_25F55
; ---------------------------------------------------------------------------

loc_25F8C::				; CODE XREF: sub_25EE9+98j
		and	bx, 0FF80h
		jz	loc_25F4E
		jmp	loc_25F5F
; ---------------------------------------------------------------------------

loc_25F93::				; CODE XREF: sub_25EE9+5Dj
		mov	bx, [si]
		sub	bx, [di]
		ja	loc_25FA2
		neg	bx
		and	bh, 0FCh
		jz	loc_25F4E
		jmp	loc_25F55
; ---------------------------------------------------------------------------

loc_25FA2::				; CODE XREF: sub_25EE9+AEj
		and	bh, 0FCh
		jz	loc_25F4E
		jmp	loc_25F5F
sub_25EE9	endp


; =============== S U B	R O U T	I N E =======================================


sub_25FA9	proc near		; CODE XREF: sub_27A82+2Fp
					; sub_27A82+45j ...
		mov	ax, 4000h
		cmp	word ptr [si+8], 0C001h
		jle	loc_25FC6
		cmp	word ptr [si+8], 4001h
		jge	loc_25FCB

loc_25FBA::				; CODE XREF: sub_25FA9+30j
		mov	ax, 100h
		cmp	byte ptr [si+0Ah], 1
		jz	loc_25FC6
		mov	ax, 0

loc_25FC6::				; CODE XREF: sub_25FA9+8j
					; sub_25FA9+18j ...
		mov	byte ptr dataseg@+1, ah
		retn
; ---------------------------------------------------------------------------

loc_25FCB::				; CODE XREF: sub_25FA9+Fj
		mov	dx, [si+6]
		and	dh, 7Fh
		or	dx, [si]
		or	dx, [si+2]
		or	dx, [si+4]
		jz	loc_25FBA
		mov	ch, 1
		call	sub_27C24
		mov	ax, 4500h
		jmp	loc_25FC6
sub_25FA9	endp


; =============== S U B	R O U T	I N E =======================================


sub_25FE5	proc near		; CODE XREF: sub_27A82+2Fp
					; sub_27A82+45j ...
		mov	ax, 4000h
		cmp	word ptr [si+8], 0C001h
		jle	loc_26002
		cmp	word ptr [si+8], 4001h
		jge	loc_26007
		mov	ax, 400h

loc_25FF9::				; CODE XREF: sub_25FE5+33j
					; sub_25FE5+38j
		cmp	byte ptr [si+0Ah], 1
		jnz	loc_26002
		or	ax, 200h

loc_26002::				; CODE XREF: sub_25FE5+8j
					; sub_25FE5+18j
		mov	byte ptr dataseg@+1, ah
		retn
; ---------------------------------------------------------------------------

loc_26007::				; CODE XREF: sub_25FE5+Fj
		mov	ax, 500h
		mov	dx, [si+6]
		and	dh, 7Fh
		or	dx, [si]
		or	dx, [si+2]
		or	dx, [si+4]
		jz	loc_25FF9
		mov	ax, 100h
		jmp	loc_25FF9
sub_25FE5	endp


; =============== S U B	R O U T	I N E =======================================


sub_2601F	proc near		; CODE XREF: seg2333:21A4j
					; seg2333:2222j ...
		mov	ax, [si+4]
		mov	dx, [si+6]
		mov	bx, [si+8]
		mov	cl, [si+0Ah]
		cmp	word ptr [si], 0
		jnz	loc_2603F
		cmp	word ptr [si+2], 0
		jnz	loc_2603F
		test	al, 7Fh
		jnz	loc_2603F
		test	ah, 1
		jz	loc_2604E

loc_2603F::				; CODE XREF: sub_2601F+Fj
					; sub_2601F+15j ...
		add	al, al
		adc	ah, 0
		adc	dx, 0
		jnb	loc_2604E
		rcr	dx, 1
		rcr	ax, 1
		inc	bx

loc_2604E::				; CODE XREF: sub_2601F+1Ej
					; sub_2601F+28j
		add	bx, 7Eh	; '~'
		jle	loc_26085
		cmp	bx, 0FFh
		jge	loc_26070

loc_26059::				; CODE XREF: sub_2601F+64j
					; sub_2601F+78j
		shl	dx, 1
		shr	cl, 1
		rcr	bl, 1
		rcr	dx, 1
		mov	al, ah
		mov	ah, dl
		mov	dl, dh
		mov	dh, bl
		stosw
		xchg	ax, dx
		stosw
		sub	di, 4
		retn
; ---------------------------------------------------------------------------

loc_26070::				; CODE XREF: sub_2601F+38j
		cmp	word ptr [si+8], 4001h
		jge	loc_26080
		mov	ch, 8
		call	sub_27C24
		sub	dx, dx
		sub	ax, ax

loc_26080::				; CODE XREF: sub_2601F+56j
		mov	bx, 0FFh
		jmp	loc_26059
; ---------------------------------------------------------------------------

loc_26085::				; CODE XREF: sub_2601F+32j
		cmp	word ptr [si+8], 0C001h
		jle	loc_26091
		mov	ch, 10h
		call	sub_27C24

loc_26091::				; CODE XREF: sub_2601F+6Bj
		sub	bx, bx
		mov	dx, bx
		mov	ax, bx
		jmp	loc_26059
sub_2601F	endp


; =============== S U B	R O U T	I N E =======================================


sub_26099	proc near		; CODE XREF: seg2333:21A4j
					; seg2333:2222j ...
		mov	ax, es:[si]
		mov	dx, es:[si+2]
		push	si
		sub	si, si
		shl	dx, 1
		rcl	si, 1
		sub	bx, bx
		add	bl, dh
		jz	loc_260DB
		cmp	dh, 0FFh
		jz	loc_260D6
		sub	bx, 7Eh	; '~'

loc_260B5::				; CODE XREF: sub_26099+40j
		stc
		rcr	dl, 1

loc_260B8::				; CODE XREF: sub_26099+51j
					; sub_26099+59j
		mov	dh, dl
		mov	dl, ah
		mov	ch, al
		mov	cl, 0
		sub	ax, ax
		mov	[di], ax
		mov	[di+2],	ax
		mov	[di+4],	cx
		mov	[di+6],	dx
		mov	[di+8],	bx
		xchg	ax, si
		mov	[di+0Ah], al
		pop	si
		retn
; ---------------------------------------------------------------------------

loc_260D6::				; CODE XREF: sub_26099+17j
		mov	bx, 4001h
		jmp	loc_260B5
; ---------------------------------------------------------------------------

loc_260DB::				; CODE XREF: sub_26099+12j
		mov	cx, dx
		or	cx, ax
		jz	loc_260EF
		sub	bx, 7Eh	; '~'
		shr	dl, 1

loc_260E6::				; CODE XREF: sub_26099+54j
		add	ax, ax
		adc	dl, dl
		js	loc_260B8
		dec	bx
		jmp	loc_260E6
; ---------------------------------------------------------------------------

loc_260EF::				; CODE XREF: sub_26099+46j
		mov	bx, 0C001h
		jmp	loc_260B8
sub_26099	endp

; ---------------------------------------------------------------------------
		mov	es, cx

; =============== S U B	R O U T	I N E =======================================


sub_260F6	proc near		; CODE XREF: seg2333:21A4j
					; seg2333:2222j ...
		push	di
		mov	ax, [si+1]
		mov	di, [si+3]
		mov	cx, [si+5]
		mov	dl, [si+7]
		mov	bx, [si+8]
		mov	dh, 3
		and	dh, al
		or	dh, [si]
		jnz	loc_26112
		test	al, 8
		jz	loc_26123

loc_26112::				; CODE XREF: sub_260F6+16j
		add	ax, 4
		adc	di, 0
		adc	cx, 0
		adc	dl, 0
		jnb	loc_26123
		rcr	dl, 1
		inc	bx

loc_26123::				; CODE XREF: sub_260F6+1Aj
					; sub_260F6+28j
		add	bx, 3FEh
		jle	loc_2616B
		cmp	bx, 7FFh
		jge	loc_26178

loc_2612F::				; CODE XREF: sub_260F6+A1j
		and	al, 0F8h
		shl	dl, 1
		shr	bx, 1
		rcr	dl, 1
		or	al, bh
		mov	dh, bl
		mov	bx, di
		shr	di, 1
		rcr	ax, 1
		rcr	dx, 1
		rcr	cx, 1
		rcr	bx, 1
		shr	di, 1
		rcr	ax, 1
		rcr	dx, 1
		rcr	cx, 1
		rcr	bx, 1
		or	al, [si+0Ah]
		shr	di, 1
		rcr	ax, 1
		rcr	dx, 1
		rcr	cx, 1
		rcr	bx, 1

loc_2615E::				; CODE XREF: sub_260F6+9Cj
		pop	di
		cld
		stosw
		xchg	ax, bx
		stosw
		xchg	ax, cx
		stosw
		xchg	ax, dx
		stosw
		sub	di, 8
		retn
; ---------------------------------------------------------------------------

loc_2616B::				; CODE XREF: sub_260F6+31j
		sub	dx, dx
		cmp	word ptr [si+8], 0C001h
		jle	loc_26187
		mov	ch, 10h
		jmp	loc_26184
; ---------------------------------------------------------------------------

loc_26178::				; CODE XREF: sub_260F6+37j
		cmp	word ptr [si+8], 4001h
		jge	loc_26194
		mov	dx, 0FFE0h
		mov	ch, 8

loc_26184::				; CODE XREF: sub_260F6+80j
		call	sub_27C24

loc_26187::				; CODE XREF: sub_260F6+7Cj
		or	dl, [si+0Ah]
		ror	dx, 1
		sub	cx, cx
		mov	bx, cx
		mov	ax, cx
		jmp	loc_2615E
; ---------------------------------------------------------------------------

loc_26194::				; CODE XREF: sub_260F6+87j
		mov	bx, 7FFh
		jmp	loc_2612F
sub_260F6	endp

; ---------------------------------------------------------------------------
		mov	si, bx
		mov	es, ax
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================


sub_2619D	proc near		; CODE XREF: seg2333:21A4j
					; seg2333:2222j ...
		mov	dx, es:[si+6]
		mov	cx, 5
		shl	dx, 1
		rcl	ch, 1
		mov	[di+0Ah], ch
		shr	dx, cl
		jz	loc_26212
		cmp	dx, 7FFh
		jz	loc_261F8
		mov	bl, 10h
		sub	dx, 3FEh

loc_261BB::				; CODE XREF: sub_2619D+73j
					; sub_2619D+8Cj
		mov	[di+8],	dx
		mov	dx, es:[si+5]
		and	dh, 0Fh
		or	dh, bl
		mov	cx, es:[si+3]
		mov	bx, es:[si+1]
		mov	ah, es:[si]
		mov	al, 0
		shl	ax, 1
		rcl	bx, 1
		rcl	cx, 1
		rcl	dx, 1
		shl	ax, 1
		rcl	bx, 1
		rcl	cx, 1
		rcl	dx, 1
		shl	ax, 1
		rcl	bx, 1
		rcl	cx, 1
		rcl	dx, 1

loc_261EC::				; CODE XREF: sub_2619D+BAj
		mov	[di], ax
		mov	[di+2],	bx
		mov	[di+4],	cx
		mov	[di+6],	dx
		retn
; ---------------------------------------------------------------------------

loc_261F8::				; CODE XREF: sub_2619D+16j
		mov	bx, 0Fh
		and	bl, es:[si+6]
		or	bx, es:[si+4]
		or	bx, es:[si+2]
		or	bx, es:[si]
		mov	dx, 4001h
		or	bl, 10h
		jmp	loc_261BB
; ---------------------------------------------------------------------------

loc_26212::				; CODE XREF: sub_2619D+10j
		mov	bx, 0Fh
		and	bl, es:[si+6]
		or	bx, es:[si+4]
		or	bx, es:[si+2]
		or	bx, es:[si]
		jnz	loc_2622B
		mov	dx, 0C001h
		jmp	loc_261BB
; ---------------------------------------------------------------------------

loc_2622B::				; CODE XREF: sub_2619D+87j
		mov	dx, es:[si+5]
		and	dh, 0Fh
		mov	cx, es:[si+3]
		mov	bx, es:[si+1]
		mov	ah, es:[si]
		mov	al, 4

loc_2623F::				; CODE XREF: sub_2619D+ACj
		dec	al
		shl	ah, 1
		rcl	bx, 1
		rcl	cx, 1
		adc	dx, dx
		jns	loc_2623F
		push	ax
		mov	ah, 0
		sub	ax, 4FEh
		mov	[di+8],	ax
		pop	ax
		mov	al, 0
		jmp	loc_261EC
sub_2619D	endp

; ---------------------------------------------------------------------------
		mov	es, cx
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================


sub_2625B	proc near		; CODE XREF: sub_2786C+10p
					; sub_27938+4p
		cld
		movsw
		movsw
		movsw
		movsw
		lodsw
		mov	cl, [si]
		cmp	ax, 4001h
		jge	loc_2627B
		add	ax, 3FFEh
		jl	loc_26280

loc_2626D::				; CODE XREF: sub_2625B+23j
					; sub_2625B+27j
		shl	ax, 1
		shr	cl, 1
		rcr	ax, 1
		stosw
		sub	di, 0Ah
		sub	si, 0Ah
		retn
; ---------------------------------------------------------------------------

loc_2627B::				; CODE XREF: sub_2625B+Bj
		mov	ax, 7FFFh
		jmp	loc_2626D
; ---------------------------------------------------------------------------

loc_26280::				; CODE XREF: sub_2625B+10j
		sub	ax, ax
		jmp	loc_2626D
sub_2625B	endp

; ---------------------------------------------------------------------------
		mov	si, bx
		mov	es, ax
		assume es:nothing

; =============== S U B	R O U T	I N E =======================================


sub_26288	proc near		; CODE XREF: sub_27890+1Cp
					; sub_2790E+7p
		push	si
		mov	cx, ds
		mov	dx, es
		mov	es, cx
		assume es:seg2608
		mov	ds, dx
		assume ds:nothing
		std
		lea	si, [si+8]
		lea	di, [di+0Ah]
		lodsw
		xchg	ax, bx
		sub	ax, ax
		shl	bx, 1
		rcl	ax, 1
		stosb
		dec	di
		shr	bx, 1
		jz	loc_262B9
		sub	bx, 3FFEh
		xchg	ax, bx
		stosw
		movsw
		movsw
		movsw
		movsw

loc_262B0::				; CODE XREF: sub_26288+3Bj
		cld
		mov	es, dx
		assume es:nothing
		mov	ds, cx
		assume ds:seg2608
		inc	di
		inc	di
		pop	si
		retn
; ---------------------------------------------------------------------------

loc_262B9::				; CODE XREF: sub_26288+1Cj
		mov	ax, 0C001h
		stosw
		sub	ax, ax
		stosw
		stosw
		stosw
		stosw
		jmp	loc_262B0
sub_26288	endp

; ---------------------------------------------------------------------------
word_262C5	dw 0			; DATA XREF: sub_262D1o
		dw 0
		dw 0
		dw 8000h
		dw 1
		dw 0

; =============== S U B	R O U T	I N E =======================================


sub_262D1	proc near		; CODE XREF: sub_26D36+77p
					; sub_270A6+14p ...
		mov	ax, offset word_262C5
		jmp	loc_2633A
sub_262D1	endp

; ---------------------------------------------------------------------------
word_262D6	dw 8AFEh		; DATA XREF: seg2333:loc_262E2o
		dw 0CD1Bh
		dw 784Bh
		dw 0D49Ah
		dw 2
		dw 0
; ---------------------------------------------------------------------------

loc_262E2::				; DATA XREF: seg2333:loc_272C8o
					; seg2333:2532o
		mov	ax, offset word_262D6
		jmp	loc_2633A
; ---------------------------------------------------------------------------
word_262E7	dw 0F0BBh		; DATA XREF: sub_262F3o
		dw 5C17h
		dw 3B29h
		dw 0B8AAh
		dw 1
		dw 0

; =============== S U B	R O U T	I N E =======================================


sub_262F3	proc near		; CODE XREF: seg2333:1DC8p
					; DATA XREF: seg2333:loc_272B8o ...
		mov	ax, offset word_262E7
		jmp	loc_2633A
sub_262F3	endp

; ---------------------------------------------------------------------------
byte_262F8	db 35h,	0C2h, 68h, 21h,	0A2h, 0DAh, 0Fh, 0C9h, 2, 3 dup(0)
					; DATA XREF: sub_26304o

; =============== S U B	R O U T	I N E =======================================


sub_26304	proc near		; CODE XREF: seg2333:1C33p
					; seg2333:1C5Bp ...
		mov	ax, offset byte_262F8
		jmp	loc_2633A
sub_26304	endp

; ---------------------------------------------------------------------------
word_26309	dw 0F799h		; DATA XREF: sub_26315o
		dw 0FBCFh
		dw 9A84h
		dw 9A20h
		dw 0FFFFh
		dw 0

; =============== S U B	R O U T	I N E =======================================


sub_26315	proc near		; CODE XREF: seg2333:1D68p
					; DATA XREF: seg2333:2538o
		mov	ax, offset word_26309
		jmp	loc_2633A
sub_26315	endp

; ---------------------------------------------------------------------------
word_2631A	dw 79ACh		; DATA XREF: sub_26326o
		dw 0D1CFh
		dw 17F7h
		dw 0B172h
		dw 0
		dw 0

; =============== S U B	R O U T	I N E =======================================


sub_26326	proc near		; CODE XREF: sub_26EBE+Ep
					; seg2333:1D44p
					; DATA XREF: ...
		mov	ax, offset word_2631A
		jmp	loc_2633A
sub_26326	endp

; ---------------------------------------------------------------------------
word_2632B	dw 0			; DATA XREF: sub_26337o
		dw 0
		dw 0
		dw 0
		dw 0C001h
		dw 0

; =============== S U B	R O U T	I N E =======================================


sub_26337	proc near		; CODE XREF: seg2333:0850p
					; sub_26FB6+58p ...
		mov	ax, offset word_2632B

loc_2633A::				; CODE XREF: sub_262D1+3j
					; seg2333:0DD5j ...
		push	ds
		mov	cx, cs
		mov	ds, cx
		assume ds:seg2333
		xchg	ax, si
		cld
		mov	cx, 5
		rep movsw
		movsb
		sub	di, 0Bh
		xchg	ax, si
		pop	ds
		assume ds:seg2608
		retn
sub_26337	endp


; =============== S U B	R O U T	I N E =======================================


sub_2634D	proc near		; CODE XREF: sub_257CD-4Bp
					; sub_2599A-1Fp ...
		cld
		push	di
		push	ax
		cmp	ax, 0C001h
		mov	ax, 0
		stosw
		stosw
		stosw
		rcr	ax, 1
		stosw
		pop	ax
		stosw
		mov	al, cl
		stosb
		pop	di
		retn
sub_2634D	endp


; =============== S U B	R O U T	I N E =======================================


sub_26363	proc near		; CODE XREF: sub_25603-4Bp
					; sub_257CD-16p ...
		mov	ch, 1
		call	sub_27C24
		push	di
		sub	ax, ax
		cld
		stosw
		stosw
		stosw
		mov	ah, 0C0h ; 'À'
		stosw
		mov	ax, 4001h
		stosw
		mov	al, 1
		stosb
		pop	di
		retn
sub_26363	endp


; =============== S U B	R O U T	I N E =======================================


sub_2637B	proc near		; CODE XREF: seg2333:081Dp sub_26C0Fp	...
		push	di
		push	es
		mov	di, ss
		mov	es, di
		assume es:nothing
		sub	word_2826C, 0Ch
		mov	di, word_2826C
		cld
		mov	cx, 5
		rep movsw
		movsb
		pop	es
		pop	di
		sub	si, 0Bh
		retn
sub_2637B	endp


; =============== S U B	R O U T	I N E =======================================


sub_26397	proc near		; CODE XREF: sub_26A5E+13p
					; sub_26D36+1Ep ...
		push	si
		push	di
		sub	word_2826C, 0Ch
		mov	di, word_2826C
		push	ds
		push	es
		push	ds
		pop	es
		assume es:seg2608
		push	cs
		pop	ds
		assume ds:seg2333
		cld
		mov	cx, 5
		rep movsw
		movsb
		pop	es
		assume es:nothing
		pop	ds
		assume ds:seg2608
		pop	di
		pop	si
		retn
sub_26397	endp


; =============== S U B	R O U T	I N E =======================================


sub_263B4	proc near		; CODE XREF: sub_26DE9+Dp
		push	si
		mov	si, word_2826C
		cld
		mov	cx, 5
		rep movsw
		movsb
		inc	si
		mov	word_2826C, si
		sub	di, 0Bh
		pop	si
		retn
sub_263B4	endp


; =============== S U B	R O U T	I N E =======================================


sub_263CA	proc near		; CODE XREF: sub_26C40+6p
					; sub_270A6+26p ...
		push	si
		push	di
		push	es
		mov	si, word_2826C
		lea	di, [si-0Ch]
		mov	word_2826C, di
		cld
		mov	cx, ss
		mov	es, cx
		mov	cx, 5
		rep movsw
		movsb
		pop	es
		pop	di
		pop	si
		retn
sub_263CA	endp


; =============== S U B	R O U T	I N E =======================================


sub_263E7	proc near		; CODE XREF: seg2333:1CFAp
					; seg2333:loc_2727Bp
		push	si
		push	di
		mov	si, word_2826C
		mov	di, si
		cld
		push	es
		mov	cx, ss
		mov	es, cx
		mov	cx, 5

loc_263F8::				; CODE XREF: sub_263E7+16j
		lodsw
		xchg	ax, [di+0Ch]
		stosw
		loop	loc_263F8
		lodsb
		xchg	al, [di+0Ch]
		stosb
		pop	es
		pop	di
		pop	si
		retn
sub_263E7	endp


; =============== S U B	R O U T	I N E =======================================


sub_26408	proc near		; CODE XREF: sub_264EE+1Ep
					; sub_26FB6+96p ...
		mov	ax, es:[si]
		sub	cx, cx
		cwd
		xor	ax, dx
		sub	ax, dx
		jz	loc_26446
		and	dl, 1

loc_26417::				; CODE XREF: sub_26408+3Cj
		mov	bx, cx
		xchg	ax, cx
		shl	ax, 1

loc_2641C::				; CODE XREF: sub_26408+20j
		rcr	ax, 1
		inc	bx
		shr	cx, 1
		rcr	ax, 1
		jcxz	loc_2642C
		inc	bx
		shr	cx, 1
		jnz	loc_2641C
		rcr	ax, 1

loc_2642C::				; CODE XREF: sub_26408+1Bj
					; sub_26408+41j
		mov	[di+0Ah], dl
		mov	[di+8],	bx
		mov	[di+6],	ax
		mov	[di+4],	cx
		mov	[di+2],	cx
		mov	[di], cx
		retn
; ---------------------------------------------------------------------------
		sub	cx, cx
		mov	dx, cx
		or	ax, ax
		jnz	loc_26417

loc_26446::				; CODE XREF: sub_26408+Aj
		mov	bx, 0C001h
		jmp	loc_2642C
sub_26408	endp


; =============== S U B	R O U T	I N E =======================================


sub_2644B	proc near		; CODE XREF: seg2333:1E07p
					; seg2333:21A4j ...
		mov	cx, [si+8]
		cmp	cx, 10h

loc_26451::				; CODE XREF: seg2333:0FDBj
		jg	loc_264C3
		cmp	cx, 0C001h
		jle	loc_264CD
		mov	bx, [si+6]
		sub	ax, ax
		or	cx, cx
		jge	loc_26466
		shr	bx, 1
		rcr	dx, 1

loc_26466::				; CODE XREF: sub_2644B+15j
		mov	dx, [si+4]
		or	cx, cx
		jle	loc_26475

loc_2646D::				; CODE XREF: sub_2644B+28j
		shl	dx, 1
		rcl	bx, 1
		rcl	ax, 1
		loop	loc_2646D

loc_26475::				; CODE XREF: sub_2644B+20j
		or	dx, [si]
		or	dx, [si+2]
		or	bl, dh
		or	bl, dl
		mov	cl, 0Ch
		and	cl, byte ptr word_28262+1
		cmp	cl, 0Ch
		jz	loc_264B3
		cmp	cl, 0
		jz	loc_264A4
		add	cl, [si+0Ah]
		cmp	cl, 4
		jz	loc_264B3
		cmp	cl, 9
		jz	loc_264B3
		neg	bx
		adc	ax, 0
		jb	loc_264C3
		jmp	loc_264B3
; ---------------------------------------------------------------------------

loc_264A4::				; CODE XREF: sub_2644B+41j
		mov	dl, 1
		and	dl, al
		or	bl, dl
		add	bx, 7FFFh
		adc	ax, 0
		jb	loc_264C3

loc_264B3::				; CODE XREF: sub_2644B+3Cj
					; sub_2644B+49j ...
		cmp	byte ptr [si+0Ah], 1
		jz	loc_264D1
		sahf
		jns	loc_264D7
		cmp	byte ptr aDivideErrorAbn+0Ch, 1	; "\r\nAbnormal	program	termination\r\n"
		jz	loc_264D7

loc_264C3::				; CODE XREF: sub_2644B:loc_26451j
					; sub_2644B+55j ...
		mov	ch, 8
		call	sub_27C24
		mov	ax, 8000h
		jmp	loc_264D7
; ---------------------------------------------------------------------------

loc_264CD::				; CODE XREF: sub_2644B+Cj
		sub	ax, ax
		jmp	loc_264D7
; ---------------------------------------------------------------------------

loc_264D1::				; CODE XREF: sub_2644B+6Cj
		neg	ax
		jz	loc_264D7
		jns	loc_264C3

loc_264D7::				; CODE XREF: sub_2644B+6Fj
					; sub_2644B+76j ...
		mov	byte ptr aDivideErrorAbn+0Ch, 0	; "\r\nAbnormal	program	termination\r\n"
		mov	es:[di], ax
		retn
sub_2644B	endp

; ---------------------------------------------------------------------------
		mov	byte ptr aDivideErrorAbn+0Ch, 1	; "\r\nAbnormal	program	termination\r\n"
		mov	cx, [si+8]
		cmp	cx, 10h
		jmp	loc_26451

; =============== S U B	R O U T	I N E =======================================


sub_264EE	proc near		; CODE XREF: seg2333:256Cp
		push	si
		push	di
		cld
		mov	cx, 5
		rep movsw
		movsb
		pop	di
		pop	si
		xchg	si, di
		lea	si, [si+8]
		cmp	word ptr [si], 0C001h
		jle	locret_26513
		cmp	word ptr [si], 4001h
		jge	loc_26514
		dec	word ptr [si]
		call	sub_26408
		mov	word ptr [si], 1

locret_26513::				; CODE XREF: sub_264EE+14j
					; sub_264EE+33j
		retn
; ---------------------------------------------------------------------------

loc_26514::				; CODE XREF: sub_264EE+1Aj
		mov	word ptr [si], 0C001h
		mov	word ptr [di+8], 0Dh
		mov	byte ptr [di+7], 80h ; ''
		jmp	locret_26513
sub_264EE	endp

; ---------------------------------------------------------------------------

loc_26523::				; DATA XREF: seg2333:255Ao
		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	cx, [si+8]
		cmp	cx, 0Fh
		jg	loc_26538
		or	cx, cx
		jg	loc_26542
		sub	ax, ax
		jmp	loc_26554
; ---------------------------------------------------------------------------

loc_26538::				; CODE XREF: seg2333:101Ej
		mov	ch, 8
		call	sub_27C24
		mov	ax, 7FFFh
		jmp	loc_2654C
; ---------------------------------------------------------------------------

loc_26542::				; CODE XREF: seg2333:1022j
		mov	ax, [si+6]
		neg	cl
		add	cl, 10h
		shr	ax, cl

loc_2654C::				; CODE XREF: seg2333:1030j
		cmp	byte ptr [si+0Ah], 1
		jnz	loc_26554

loc_26552::
		neg	ax

loc_26554::				; CODE XREF: seg2333:1026j
					; seg2333:1040j
		mov	cx, [di+8]
		cmp	cx, 0C001h
		jle	loc_26572
		cmp	cx, 4001h
		jge	loc_26572
		add	ax, cx
		cmp	ax, 0C001h
		jle	loc_26580
		cmp	ax, 4001h
		jge	loc_26576
		mov	[di+8],	ax

loc_26572::				; CODE XREF: seg2333:104Bj
					; seg2333:1051j ...
		pop	di
		pop	si
		pop	bp
		retn
; ---------------------------------------------------------------------------

loc_26576::				; CODE XREF: seg2333:105Dj
		mov	ch, 8
		call	sub_27C24
		mov	ax, 4001h
		jmp	loc_26588
; ---------------------------------------------------------------------------

loc_26580::				; CODE XREF: seg2333:1058j
		mov	ch, 10h
		call	sub_27C24
		mov	ax, 0C001h

loc_26588::				; CODE XREF: seg2333:106Ej
		call	sub_2634D
		jmp	loc_26572
; ---------------------------------------------------------------------------
		mov	cx, dx
		xchg	ax, bx
		jmp	loc_265A1
; ---------------------------------------------------------------------------
		mov	cx, dx
		xchg	ax, bx
		mov	dx, 0
		jmp	loc_265B3

; =============== S U B	R O U T	I N E =======================================


sub_2659A	proc near		; CODE XREF: seg2333:21A4j
					; seg2333:2222j ...
		mov	bx, es:[si]
		mov	cx, es:[si+2]

loc_265A1::				; CODE XREF: seg2333:1080j
		sub	ax, ax
		mov	dx, 0
		or	cx, cx
		jns	loc_265B3
		not	cx
		neg	bx
		sbb	cx, 0FFFFh
		mov	dl, 1

loc_265B3::				; CODE XREF: seg2333:1088j
					; sub_2659A+Ej
		mov	[di+0Ah], dl
		mov	dl, 10h
		or	cx, cx
		jnz	loc_265C8
		xchg	bx, cx
		mov	dl, 0
		jcxz	loc_265E0
		jmp	loc_265C8
; ---------------------------------------------------------------------------

loc_265C4::				; CODE XREF: sub_2659A+31j
		rcr	bx, 1
		rcr	ax, 1

loc_265C8::				; CODE XREF: sub_2659A+20j
					; sub_2659A+28j
		inc	dx
		shr	cx, 1
		jnz	loc_265C4
		rcr	bx, 1
		rcr	ax, 1

loc_265D1::				; CODE XREF: sub_2659A+49j
		mov	[di+8],	dx
		mov	[di+6],	bx
		mov	[di+4],	ax
		mov	[di+2],	cx
		mov	[di], cx
		retn
; ---------------------------------------------------------------------------

loc_265E0::				; CODE XREF: sub_2659A+26j
		mov	dx, 0C001h
		jmp	loc_265D1
sub_2659A	endp

; ---------------------------------------------------------------------------
		mov	byte ptr aDivideErrorAbn+0Ch, 1	; "\r\nAbnormal	program	termination\r\n"
		mov	cx, [si+8]
		cmp	cx, 20h	; ' '
		jmp	loc_265F8

; =============== S U B	R O U T	I N E =======================================


sub_265F2	proc near		; CODE XREF: seg2333:21A4j
					; seg2333:2222j ...
		mov	cx, [si+8]
		cmp	cx, 20h	; ' '

loc_265F8::				; CODE XREF: seg2333:10E0j
		jg	loc_2662D
		or	cx, cx
		jge	loc_2663A
		cmp	cx, 0C001h
		jle	loc_26617
		mov	bl, 0Ch
		and	bl, byte ptr word_28262+1
		add	bl, [si+0Ah]
		cmp	bl, 5
		jz	loc_2661D
		cmp	bl, 8
		jz	loc_2661D

loc_26617::				; CODE XREF: sub_265F2+10j
		sub	dx, dx
		mov	ax, dx
		jmp	loc_26637
; ---------------------------------------------------------------------------

loc_2661D::				; CODE XREF: sub_265F2+1Ej
					; sub_265F2+23j
		sub	dx, dx
		mov	ax, 1
		cmp	bl, 5
		jnz	loc_26637
		neg	ax
		not	dx
		jmp	loc_26637
; ---------------------------------------------------------------------------

loc_2662D::				; CODE XREF: sub_265F2:loc_265F8j
					; sub_265F2:loc_266C1j
		mov	ch, 8
		call	sub_27C24
		mov	dx, 8000h
		sub	ax, ax

loc_26637::				; CODE XREF: sub_265F2+29j
					; sub_265F2+33j ...
		jmp	loc_266D1
; ---------------------------------------------------------------------------

loc_2663A::				; CODE XREF: sub_265F2+Aj
		mov	bx, [si+2]
		or	bl, [si]
		or	bl, [si+1]
		mov	ax, [si+4]
		mov	dx, [si+6]
		sub	cl, 10h
		ja	loc_2665D

loc_2664D::				; CODE XREF: sub_265F2+66j
		or	al, bl
		or	al, bh
		xchg	ax, bx
		xchg	ax, dx
		sub	dx, dx
		add	cl, 10h
		jle	loc_2664D
		and	cl, 0Fh

loc_2665D::				; CODE XREF: sub_265F2+59j
		jcxz	loc_2667C
		push	si
		mov	si, 0FFFFh
		rol	dx, cl
		rol	ax, cl
		shl	si, cl
		mov	cx, si
		and	cx, ax
		xor	ax, cx
		and	si, dx
		xor	dx, si
		or	ax, si
		or	bl, bh
		or	bl, cl
		mov	bh, ch
		pop	si

loc_2667C::				; CODE XREF: sub_265F2:loc_2665Dj
		mov	cl, 0Ch
		and	cl, byte ptr word_28262+1
		cmp	cl, 0Ch
		jz	loc_266C4
		cmp	cl, 0
		jz	loc_2669F
		add	cl, [si+0Ah]
		cmp	cl, 4
		jz	loc_266C4
		cmp	cl, 9
		jz	loc_266C4
		neg	bx
		jb	loc_266A9
		jmp	loc_266C4
; ---------------------------------------------------------------------------

loc_2669F::				; CODE XREF: sub_265F2+98j
		mov	cl, 1
		and	cl, al
		or	bl, cl
		add	bx, 7FFFh

loc_266A9::				; CODE XREF: sub_265F2+A9j
		adc	ax, 0
		adc	dx, 0
		jns	loc_266C4
		cmp	byte ptr [si+0Ah], 1
		jnz	loc_266C1
		cmp	dx, 8000h
		jnz	loc_266C1
		or	ax, ax
		jz	loc_266C4

loc_266C1::				; CODE XREF: sub_265F2+C3j
					; sub_265F2+C9j
		jmp	loc_2662D
; ---------------------------------------------------------------------------

loc_266C4::				; CODE XREF: sub_265F2+93j
					; sub_265F2+A0j ...
		cmp	byte ptr [si+0Ah], 1
		jnz	loc_266D1
		not	dx
		neg	ax
		sbb	dx, 0FFFFh

loc_266D1::				; CODE XREF: sub_265F2:loc_26637j
					; sub_265F2+D6j
		mov	byte ptr aDivideErrorAbn+0Ch, 0	; "\r\nAbnormal	program	termination\r\n"
		mov	es:[di], ax
		mov	es:[di+2], dx
		retn
sub_265F2	endp


; =============== S U B	R O U T	I N E =======================================


sub_266DE	proc near		; CODE XREF: sub_278EE+7p
		push	bp
		push	si
		mov	ax, es:[si]
		mov	bx, es:[si+2]
		mov	cx, es:[si+4]
		mov	dx, es:[si+6]
		mov	bp, 0
		or	dx, dx
		jl	loc_26709
		jg	loc_2671E
		or	cx, cx
		jnz	loc_2671E
		or	bx, bx
		jnz	loc_2671E
		or	ax, ax
		jnz	loc_2671E
		mov	si, 0C001h
		jmp	loc_2673C
; ---------------------------------------------------------------------------

loc_26709::				; CODE XREF: sub_266DE+16j
		not	dx
		not	cx
		not	bx
		neg	ax
		cmc
		adc	bx, 0
		adc	cx, 0
		adc	dx, 0
		mov	bp, 1

loc_2671E::				; CODE XREF: sub_266DE+18j
					; sub_266DE+1Cj ...
		mov	si, 40h	; '@'

loc_26721::				; CODE XREF: sub_266DE+4Fj
		or	dx, dx
		jnz	loc_2672F
		xchg	dx, cx
		xchg	cx, bx
		xchg	ax, bx
		sub	si, 10h
		jmp	loc_26721
; ---------------------------------------------------------------------------

loc_2672F::				; CODE XREF: sub_266DE+45j
		js	loc_2673C

loc_26731::				; CODE XREF: sub_266DE+5Cj
		dec	si
		add	ax, ax
		adc	bx, bx
		adc	cx, cx
		adc	dx, dx
		jns	loc_26731

loc_2673C::				; CODE XREF: sub_266DE+29j
					; sub_266DE:loc_2672Fj
		mov	[di+8],	si
		mov	[di+6],	dx
		mov	[di+4],	cx
		mov	[di+2],	bx
		mov	[di], ax
		xchg	ax, bp
		mov	[di+0Ah], al
		pop	si
		pop	bp
		retn
sub_266DE	endp


; =============== S U B	R O U T	I N E =======================================


sub_26751	proc near		; CODE XREF: sub_2791E+4p
		push	bp
		push	di
		mov	cx, [si+8]
		cmp	cx, 3Fh	; '?'
		jg	loc_26794
		or	cx, cx
		jge	loc_267A5
		cmp	cx, 0C001h
		jle	loc_26778
		mov	bl, 0Ch
		and	bl, byte ptr word_28262+1
		add	bl, [si+0Ah]
		cmp	bl, 5
		jz	loc_2677C
		cmp	bl, 8
		jz	loc_2677C

loc_26778::				; CODE XREF: sub_26751+12j
		sub	bp, bp
		jmp	loc_2679C
; ---------------------------------------------------------------------------

loc_2677C::				; CODE XREF: sub_26751+20j
					; sub_26751+25j
		sub	bp, bp
		mov	dx, bp
		mov	ax, 1
		cmp	bl, 5
		mov	bx, bp
		jnz	loc_267A2
		neg	ax
		not	bx
		not	dx
		not	bp
		jmp	loc_267A2
; ---------------------------------------------------------------------------

loc_26794::				; CODE XREF: sub_26751+8j
					; sub_26751:loc_26805j
		mov	ch, 8
		call	sub_27C24
		mov	bp, 8000h

loc_2679C::				; CODE XREF: sub_26751+29j
		sub	dx, dx
		mov	bx, dx
		mov	ax, bx

loc_267A2::				; CODE XREF: sub_26751+37j
					; sub_26751+41j
		jmp	loc_26836
; ---------------------------------------------------------------------------

loc_267A5::				; CODE XREF: sub_26751+Cj
		mov	bp, [si+6]
		mov	dx, [si+4]
		mov	bx, [si+2]
		mov	di, [si]
		sub	ax, ax
		sub	cl, 30h	; '0'
		ja	loc_267CD

loc_267B7::				; CODE XREF: sub_26751+77j
		or	al, ah
		mov	ah, 0
		or	ax, di
		mov	di, bx
		mov	bx, dx
		mov	dx, bp
		sub	bp, bp
		add	cl, 10h
		jle	loc_267B7
		and	cl, 0Fh

loc_267CD::				; CODE XREF: sub_26751+64j
		neg	cl
		jz	loc_267E2
		add	cl, 10h

loc_267D4::				; CODE XREF: sub_26751+8Fj
		or	al, ah
		shr	bp, 1
		rcr	dx, 1
		rcr	bx, 1
		rcr	di, 1
		rcr	ah, 1
		loop	loc_267D4

loc_267E2::				; CODE XREF: sub_26751+7Ej
		mov	cl, 0Ch
		and	cl, byte ptr word_28262+1
		cmp	cl, 0Ch
		jz	loc_2681D
		cmp	cl, 0
		jz	loc_26807
		add	cl, [si+0Ah]
		cmp	cl, 4
		jz	loc_2681D
		cmp	cl, 9
		jz	loc_2681D
		neg	ax
		jb	loc_26810
		jmp	loc_2681D
; ---------------------------------------------------------------------------

loc_26805::				; CODE XREF: sub_26751+CAj
		jmp	loc_26794
; ---------------------------------------------------------------------------

loc_26807::				; CODE XREF: sub_26751+9Fj
		mov	cl, 1
		and	cx, di
		or	al, cl
		add	ax, 7FFFh

loc_26810::				; CODE XREF: sub_26751+B0j
		mov	cx, 0
		adc	di, cx
		adc	bx, cx
		adc	dx, cx
		adc	bp, cx
		js	loc_26805

loc_2681D::				; CODE XREF: sub_26751+9Aj
					; sub_26751+A7j ...
		xchg	ax, di
		cmp	byte ptr [si+0Ah], 1
		jnz	loc_26836
		not	bp
		not	dx
		not	bx
		neg	ax
		cmc
		adc	bx, 0
		adc	dx, 0
		adc	bp, 0

loc_26836::				; CODE XREF: sub_26751:loc_267A2j
					; sub_26751+D1j
		pop	di
		stosw
		xchg	ax, bx
		stosw
		xchg	ax, dx
		stosw
		xchg	ax, bp
		stosw
		sub	di, 8
		pop	bp
		retn
sub_26751	endp

; ---------------------------------------------------------------------------
		mov	si, word_2826C

; =============== S U B	R O U T	I N E =======================================


sub_26847	proc near		; CODE XREF: seg2333:1DFDp
					; DATA XREF: seg2333:2558o
		push	bp
		push	si
		push	di
		xchg	bp, si
		mov	cx, [bp+8]
		cmp	cx, 40h	; '@'
		jge	loc_26885
		or	cx, cx
		jge	loc_268A2
		cmp	cx, 0C001h
		jle	loc_26876
		mov	ch, 20h	; ' '
		call	sub_27C24
		mov	cl, 0Ch
		and	cl, byte ptr word_28262+1
		add	cl, [bp+0Ah]
		cmp	cl, 5
		jz	loc_2687D
		cmp	cl, 8
		jz	loc_2687D

loc_26876::				; CODE XREF: sub_26847+15j
					; sub_26847+CCj
		sub	bx, bx
		mov	si, 0C001h
		jmp	loc_2688E
; ---------------------------------------------------------------------------

loc_2687D::				; CODE XREF: sub_26847+28j
					; sub_26847+2Dj
		mov	si, 1
		mov	bx, 8000h
		jmp	loc_2688E
; ---------------------------------------------------------------------------

loc_26885::				; CODE XREF: sub_26847+Bj
		jz	loc_2689F
		mov	ch, 20h	; ' '
		call	sub_27C24
		jmp	loc_2689F
; ---------------------------------------------------------------------------

loc_2688E::				; CODE XREF: sub_26847+34j
					; sub_26847+3Cj
		sub	ax, ax
		mov	[bp+0],	ax
		mov	[bp+2],	ax
		mov	[bp+4],	ax
		mov	[bp+6],	bx
		mov	[bp+8],	si

loc_2689F::				; CODE XREF: sub_26847:loc_26885j
					; sub_26847+45j
		jmp	loc_26952
; ---------------------------------------------------------------------------

loc_268A2::				; CODE XREF: sub_26847+Fj
		mov	si, 38h	; '8'
		and	si, cx
		xor	cx, si
		shr	si, 1
		shr	si, 1
		shr	si, 1
		neg	si
		add	si, 7
		cmp	si, 7
		jnz	loc_268BF
		mov	ah, 0
		mov	al, [bp+si]
		jmp	loc_268C1
; ---------------------------------------------------------------------------

loc_268BF::				; CODE XREF: sub_26847+70j
		mov	ax, [bp+si]

loc_268C1::				; CODE XREF: sub_26847+76j
		sub	bx, bx
		mov	di, si

loc_268C5::				; CODE XREF: sub_26847+85j
		dec	di
		jl	loc_268CE
		or	bl, [bp+di]
		mov	[bp+di], bh
		jmp	loc_268C5
; ---------------------------------------------------------------------------

loc_268CE::				; CODE XREF: sub_26847+7Fj
		mov	dx, 0FFh
		and	cl, 7
		shr	dx, cl
		mov	di, dx
		inc	di
		and	dx, ax
		jnz	loc_268E1
		or	bl, bl
		jz	loc_26952

loc_268E1::				; CODE XREF: sub_26847+94j
		mov	ch, 20h	; ' '
		call	sub_27C24
		xor	ax, dx
		mov	cl, 0Ch
		and	cl, byte ptr word_28262+1
		cmp	cl, 0Ch
		jz	loc_2690B
		cmp	cl, 0
		jz	loc_26916
		add	cl, [bp+0Ah]
		cmp	cl, 4
		jz	loc_2690B
		cmp	cl, 9
		jz	loc_2690B
		or	bl, dl
		jnz	loc_2692C
		jmp	loc_26952
; ---------------------------------------------------------------------------

loc_2690B::				; CODE XREF: sub_26847+AAj
					; sub_26847+B7j ...
		mov	[bp+si], al
		cmp	byte ptr [bp+7], 0
		jnz	loc_26952
		jmp	loc_26876
; ---------------------------------------------------------------------------

loc_26916::				; CODE XREF: sub_26847+AFj
		or	bl, bl
		jnz	loc_26926
		test	ax, di
		jnz	loc_26926
		add	dx, dx
		cmp	dx, di
		jbe	loc_2690B
		jmp	loc_2692C
; ---------------------------------------------------------------------------

loc_26926::				; CODE XREF: sub_26847+D1j
					; sub_26847+D5j
		add	dx, dx
		cmp	dx, di
		jb	loc_2690B

loc_2692C::				; CODE XREF: sub_26847+C0j
					; sub_26847+DDj
		sub	si, 7
		jl	loc_2693A
		add	ax, di
		mov	[bp+si+7], al
		neg	ah
		jmp	loc_26949
; ---------------------------------------------------------------------------

loc_2693A::				; CODE XREF: sub_26847+E8j
		add	ax, di
		mov	[bp+si+7], ax
		inc	si

loc_26940::				; CODE XREF: sub_26847+100j
		inc	si
		jg	loc_26949
		adc	byte ptr [bp+si+7], 0
		jb	loc_26940

loc_26949::				; CODE XREF: sub_26847+F1j
					; sub_26847+FAj
		jnb	loc_26952
		stc
		rcr	word ptr [bp+6], 1
		inc	word ptr [bp+8]

loc_26952::				; CODE XREF: sub_26847:loc_2689Fj
					; sub_26847+98j ...
		pop	di
		pop	si
		pop	bp
		retn
sub_26847	endp


; =============== S U B	R O U T	I N E =======================================


sub_26956	proc near		; CODE XREF: sub_26C0F+3p sub_26C30p ...
		push	bp
		push	si
		push	di
		mov	bp, word_2826C
		mov	ax, [bp+0]
		mov	bx, [bp+2]
		mov	cx, [bp+4]
		mov	dx, [bp+6]
		sub	di, di
		mov	si, [bp+8]
		cmp	si, 0C001h
		jz	loc_26995
		cmp	si, 0FFF0h
		jg	loc_26986
		mov	di, ax
		mov	ax, bx
		mov	bx, cx
		mov	cx, dx
		sub	dx, dx
		add	si, 10h

loc_26986::				; CODE XREF: sub_26956+21j
					; sub_26956+3Dj
		inc	si
		jg	loc_26995
		shr	dx, 1
		rcr	cx, 1
		rcr	bx, 1
		rcr	ax, 1
		rcr	di, 1
		jmp	loc_26986
; ---------------------------------------------------------------------------

loc_26995::				; CODE XREF: sub_26956+1Cj
					; sub_26956+31j
		shl	di, 1
		mov	di, 0
		adc	ax, di
		adc	bx, di
		adc	cx, di
		adc	dx, di
		mov	[bp+0],	ax
		mov	[bp+2],	bx
		mov	[bp+4],	cx
		mov	[bp+6],	dx
		mov	bx, di
		mov	cx, di
		mov	si, di
		test	byte ptr [bp+3], 80h
		jz	loc_269C4
		mov	bx, [bp+0]
		mov	cx, [bp+2]
		shl	bx, 1
		rcl	cx, 1

loc_269C4::				; CODE XREF: sub_26956+62j
		mov	ax, [bp+0]
		mul	word ptr [bp+4]
		add	bx, ax
		adc	cx, dx
		adc	si, di
		add	bx, ax
		adc	cx, dx
		adc	si, di
		mov	bx, cx
		mov	cx, si
		sub	si, si
		mov	ax, [bp+2]
		mul	word ptr [bp+4]
		add	bx, ax
		adc	cx, dx
		adc	si, di
		add	bx, ax
		adc	cx, dx
		adc	si, di
		mov	ax, [bp+0]
		mul	word ptr [bp+6]
		add	bx, ax
		adc	cx, dx
		adc	si, di
		add	bx, ax
		adc	cx, dx
		adc	si, di
		shl	bx, 1
		adc	cx, di
		adc	si, di
		mov	bx, cx
		mov	cx, si
		sub	si, si
		mov	ax, [bp+4]
		mul	ax
		add	bx, ax
		adc	cx, dx
		adc	si, di
		mov	ax, [bp+6]
		mul	word ptr [bp+2]
		add	bx, ax
		adc	cx, dx
		adc	si, di
		add	bx, ax
		adc	cx, dx
		adc	si, di
		mov	ax, [bp+6]
		mul	word ptr [bp+4]
		add	cx, ax
		adc	si, dx
		adc	di, di
		add	cx, ax
		adc	si, dx
		adc	di, 0
		mov	ax, [bp+6]
		mul	ax
		add	si, ax
		adc	di, dx
		mov	[bp+0],	bx
		mov	[bp+2],	cx
		mov	[bp+4],	si
		mov	[bp+6],	di
		mov	byte ptr [bp+0Ah], 0
		mov	word ptr [bp+8], 0
		pop	di
		pop	si
		pop	bp
		retn
sub_26956	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_26A5E	proc near		; CODE XREF: sub_26C15+9p sub_26C33+9p ...

var_s0		= word ptr  0
arg_0		= word ptr  4
arg_2		= word ptr  6
arg_6		= byte ptr  0Ah
arg_12		= byte ptr  16h

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	ds
		push	es
		mov	al, 0Ch
		mul	byte ptr [bp+arg_2]
		sub	ax, 0Ch
		xchg	ax, si
		add	si, [bp+arg_0]
		call	sub_26397
		mov	di, si

loc_26A76::				; CODE XREF: sub_26A5E+84j
					; sub_26A5E+93j
		dec	byte ptr [bp+arg_2]
		jle	loc_26AF3
		push	bp
		mov	bp, word_2826C
		mov	al, [bp+arg_12]
		xor	[bp+arg_6], al
		call	sub_25863
		mov	[bp+var_s0], ax
		mov	[bp+2],	bx
		mov	[bp+arg_0], cx
		mov	[bp+arg_2], dx
		sub	di, 0Ch
		mov	bx, cs:[di]
		mov	cx, cs:[di+2]
		mov	dx, cs:[di+4]
		mov	si, cs:[di+6]
		mov	al, cs:[di+0Ah]
		cmp	al, [bp+arg_6]
		jz	loc_26AE4
		sub	bx, [bp+var_s0]
		sbb	cx, [bp+2]
		sbb	dx, [bp+arg_0]
		sbb	si, [bp+arg_2]
		jnb	loc_26AD2
		not	si
		not	dx
		not	cx
		neg	bx
		cmc
		adc	cx, 0
		adc	dx, 0
		adc	si, 0
		xor	al, 1

loc_26AD2::				; CODE XREF: sub_26A5E+5Ej
		mov	[bp+var_s0], bx
		mov	[bp+2],	cx
		mov	[bp+arg_0], dx
		mov	[bp+arg_2], si
		mov	[bp+arg_6], al
		pop	bp
		jmp	loc_26A76
; ---------------------------------------------------------------------------

loc_26AE4::				; CODE XREF: sub_26A5E+50j
		add	[bp+var_s0], bx
		adc	[bp+2],	cx
		adc	[bp+arg_0], dx
		adc	[bp+arg_2], si
		pop	bp
		jmp	loc_26A76
; ---------------------------------------------------------------------------

loc_26AF3::				; CODE XREF: sub_26A5E+1Bj
		mov	si, word_2826C
		cld
		lodsw
		xchg	ax, bx
		lodsw
		xchg	ax, cx
		lodsw
		xchg	ax, dx
		lodsw
		xchg	ax, di
		lodsw
		lodsb
		inc	si
		mov	word_2826C, si
		xchg	si, di
		sub	di, di
		cmp	al, 1
		jnz	loc_26B20
		not	si
		not	dx
		not	cx
		neg	bx
		cmc
		adc	cx, di
		adc	dx, di
		adc	si, di
		jmp	loc_26B32
; ---------------------------------------------------------------------------

loc_26B20::				; CODE XREF: sub_26A5E+AFj
		stc
		rcr	si, 1
		rcr	dx, 1
		rcr	cx, 1
		rcr	bx, 1
		adc	bx, di
		adc	cx, di
		adc	dx, di
		adc	si, di
		inc	di

loc_26B32::				; CODE XREF: sub_26A5E+C0j
		mov	ax, word_2826C
		xchg	ax, di
		xchg	ax, bx
		stosw
		xchg	ax, cx
		stosw
		xchg	ax, dx
		stosw
		xchg	ax, si
		stosw
		xchg	ax, bx
		stosw
		mov	al, 0
		stosb
		pop	es
		pop	ds
		pop	di
		pop	si
		pop	bp
		retn	4
sub_26A5E	endp

; ---------------------------------------------------------------------------
byte_26B4B	db 8			; DATA XREF: sub_26C15r
					; Method
		db 0
byte_26B4D	db 0			; DATA XREF: sub_26C15+5o
					; Procedure
		db 0
		db 0Ah dup(0), 0B6h, 6 dup(0AAh), 2Ah, 2 dup(0), 1, 0
		db 3, 24h, 5 dup(22h), 2, 4 dup(0), 0B3h, 0E4h,	0, 0Dh
		db 0D0h, 0, 0Dh, 3 dup(0), 1, 0, 6Eh, 8, 4Bh, 0C7h, 3Bh
		db 2Eh,	6 dup(0), 0C6h,	40h, 16h, 99h, 6Bh, 5 dup(0), 1
		db 0, 0Ch, 45h,	92h, 0B0h, 8 dup(0), 0D5h, 45h,	0D6h, 7	dup(0)
		db 1, 0
word_26BAD	dw 8			; DATA XREF: sub_26C33r
byte_26BAF	db 0Ch dup(0), 88h, 6 dup(0FFh), 7Fh, 2	dup(0),	1, 0, 0A6h
					; DATA XREF: sub_26C33+5o
		db 9Ah,	5 dup(0AAh), 0Ah, 4 dup(0), 7Fh, 0E6h, 4, 5Bh
		db 0B0h, 5, 5Bh, 3 dup(0), 1, 0, 0EFh, 26h, 9Bh, 1, 1Ah
		db 0A0h, 1, 5 dup(0), 1Dh, 0CEh, 0DCh, 93h, 9Fh, 4, 4 dup(0)
		db 1, 0, 0Fh, 0B1h, 4Bh, 0F7h, 8, 7 dup(0), 3, 0D8h, 7Bh
		db 0Ch,	6 dup(0), 1, 0

; =============== S U B	R O U T	I N E =======================================


sub_26C0F	proc near		; CODE XREF: seg2333:loc_2718Bp
		call	sub_2637B
		call	sub_26956
sub_26C0F	endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================


sub_26C15	proc near		; CODE XREF: sub_26C40+9p
		push	word ptr cs:byte_26B4B
		mov	ax, offset byte_26B4D
		push	ax
		call	sub_26A5E
		push	word_2826C
		push	si
		push	si
		call	sub_257CD
		add	word_2826C, 0Ch
		retn
sub_26C15	endp


; =============== S U B	R O U T	I N E =======================================


sub_26C30	proc near		; CODE XREF: seg2333:1C76p
		call	sub_26956
sub_26C30	endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================


sub_26C33	proc near		; CODE XREF: sub_26C40+Cp
		push	cs:word_26BAD
		mov	ax, offset byte_26BAF
		push	ax
		call	sub_26A5E
		retn
sub_26C33	endp


; =============== S U B	R O U T	I N E =======================================


sub_26C40	proc near		; CODE XREF: seg2333:1CA4p
					; DATA XREF: seg2333:2544o
		call	sub_2637B
		call	sub_26956
		call	sub_263CA
		call	sub_26C15
		call	sub_26C33
		retn
sub_26C40	endp

; ---------------------------------------------------------------------------
		db 35h
		db 0C2h	; Â
		db  68h	; h
		db 21h
		db 0A2h	; ¢
		db 0DAh	; Ú
		db  0Fh
		db 0C9h
		db 1
		db    0
		db    0
		db    0
word_26C5C	dw 8			; DATA XREF: sub_26DE9+1Dr
unk_26C5E	db    0			; DATA XREF: sub_26DE9+22o
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db  57h	; W
		db  55h	; U
		db  55h	; U
		db  55h	; U
		db  55h	; U
		db  55h	; U
		db  55h	; U
		db    1
		db    0
		db    0
		db    1
		db    0
		db 0BEh	; ¾
		db  32h	; 2
		db  33h	; 3
		db  33h	; 3
		db  33h	; 3
		db  33h	; 3
		db    3
		db    0
		db    0
		db    0
		db    0
		db    0
		db  7Dh	; }
		db  1Eh
		db  49h	; I
		db  92h	; 
		db  24h	; $
		db    9
		db    0
		db    0
		db    0
		db    0
		db    1
		db    0
		db 0BCh	; ¼
		db 0FEh	; þ
		db 0C6h	; Æ
		db  71h	; q
		db  1Ch
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db  5Ch	; \
		db 0FFh
		db  16h
		db  5Dh	; ]
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    1
		db    0
		db 0D8h	; Ø
		db 0BBh	; »
		db  3Ah	; :
		db    1
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db  0Ah
		db  0Ch
		db    4
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    1
		db    0
unk_26CBE	db    0			; DATA XREF: sub_26D36+13o
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db 0E7h	; ç
		db 0FDh	; ý
		db 0FFh
		db    0
		db    0
		db 0BDh	; ½
		db 0A4h	; ¤
		db 0D6h	; Ö
		db  7Bh	; {
		db 0EEh	; î
		db  64h	; d
		db  5Ch	; \
		db 0B3h	; ³
		db 0FFh
		db 0FFh
		db    0
		db    0
		db 0B5h	; µ
		db  85h	; 
		db  47h	; G
		db 0FCh	; ü
		db  74h	; t
		db  30h	; 0
		db  11h
		db 0A1h	; ¡
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db  80h	; 
		db    1
		db    0
		db    0
		db    0
unk_26CEE	db  9Ch	; 		; DATA XREF: sub_26D36+94o
		db 0FAh	; ú
		db  64h	; d
		db 0B0h	; °
		db 0B2h	; ²
		db  1Dh
		db    7
		db 0E6h	; æ
		db 0FEh	; þ
		db 0FFh
		db    0
		db    0
		db  9Ch	; 
		db 0FAh	; ú
		db  64h	; d
		db 0B0h	; °
		db 0B2h	; ²
		db  1Dh
		db    7
		db 0E6h	; æ
		db 0FFh
		db 0FFh
		db    0
		db    0
		db 0F5h	; õ
		db 0BBh	; »
		db  4Bh	; K
		db    4
		db  46h	; F
		db  56h	; V
		db  85h	; 
		db 0ACh	; ¬
		db    0
		db    0
		db    0
		db    0
unk_26D12	db 0E6h	; æ		; DATA XREF: sub_26D36+54o
		db  6Eh	; n
		db 0D9h	; Ù
		db  1Fh
		db 0BDh	; ½
		db    9
		db 0FAh	; ú
		db 0E9h	; é
		db 0FEh	; þ
		db 0FFh
		db    0
		db    0
		db  8Dh	; 
		db  7Bh	; {
		db  35h	; 5
		db 0BDh	; ½
		db  5Bh	; [
		db  84h	; 
		db 0DDh	; Ý
		db 0F6h	; ö
		db 0FFh
		db 0FFh
		db    0
		db    0
		db  7Fh	; 
		db 0D5h	; Õ
		db  35h	; 5
		db    2
		db 0DBh	; Û
		db  80h	; 
		db  73h	; s
		db 0CCh	; Ì
		db    0
		db    0
		db    0
		db    0

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_26D36	proc near		; CODE XREF: seg2333:1D07p
					; DATA XREF: seg2333:2546o

var_2		= word ptr -2

		push	bp
		mov	bp, sp
		lea	sp, [bp-2]
		push	si
		push	di
		push	si
		push	di
		push	si
		call	sub_2599A
		mov	[bp+var_2], 0
		mov	di, offset unk_26CBE

loc_26D4C::				; CODE XREF: sub_26D36+3Bj
		cmp	[bp+var_2], 3
		jnb	loc_26D73
		xchg	si, di
		call	sub_26397
		xchg	di, si
		push	si
		push	word_2826C
		call	sub_25EE9
		add	word_2826C, 0Ch
		cmp	ax, 0
		jnz	loc_26D73
		inc	[bp+var_2]
		add	di, 0Ch
		jmp	loc_26D4C
; ---------------------------------------------------------------------------

loc_26D73::				; CODE XREF: sub_26D36+1Aj
					; sub_26D36+33j
		cmp	[bp+var_2], 0
		jnz	loc_26D7E
		call	sub_26DE9
		jmp	loc_26DE3
; ---------------------------------------------------------------------------

loc_26D7E::				; CODE XREF: sub_26D36+41j
		mov	bx, [bp+var_2]
		dec	bx
		mov	bl, cs:[bx+2]
		mov	[bp+var_2], bx
		add	bx, offset unk_26D12
		mov	di, bx
		xchg	si, di
		call	sub_26397
		xchg	di, si
		push	si
		mov	di, word_2826C
		push	di
		lea	ax, [di-0Ch]
		mov	word_2826C, ax
		push	ax
		call	sub_255FF
		push	si
		push	di
		push	si
		call	sub_257CD
		call	sub_262D1
		push	di
		push	si
		push	si
		call	sub_25603
		push	word_2826C
		push	si
		push	si
		call	sub_2599A
		add	word_2826C, 18h
		call	sub_26DE9
		mov	di, [bp+var_2]
		add	di, offset unk_26CEE
		xchg	si, di
		call	sub_26397
		xchg	di, si
		push	word_2826C
		push	si
		push	si
		call	sub_25603
		add	word_2826C, 0Ch

loc_26DE3::				; CODE XREF: sub_26D36+46j
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
sub_26D36	endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================


sub_26DE9	proc near		; CODE XREF: sub_26D36+43p
					; sub_26D36+8Ep
		push	si
		push	di
		call	sub_2637B
		cmp	word ptr [si+8], 0FFE0h
		jg	loc_26DFB
		mov	di, si
		call	sub_263B4
		jmp	loc_26E1D
; ---------------------------------------------------------------------------

loc_26DFB::				; CODE XREF: sub_26DE9+9j
		mov	di, word_2826C
		add	word ptr [di+8], 3
		call	sub_26956
		push	cs:word_26C5C
		mov	ax, offset unk_26C5E
		push	ax
		call	sub_26A5E
		push	di
		push	si
		push	si
		call	sub_257CD
		add	word_2826C, 0Ch

loc_26E1D::				; CODE XREF: sub_26DE9+10j
		pop	di
		pop	si
		retn
sub_26DE9	endp

; ---------------------------------------------------------------------------
word_26E20	dw 0Dh			; DATA XREF: sub_26EBE+60r
byte_26E22	db 0Ch dup(0), 3, 6 dup(0), 40h, 4 dup(0), 0A9h, 6 dup(0AAh)
					; DATA XREF: sub_26EBE+65o
		db 0Ah,	4 dup(0), 78h, 6 dup(55h), 1, 4	dup(0),	26h, 23h
		db 5 dup(22h), 5 dup(0), 1Ch, 2Bh, 0D8h, 82h, 2Dh, 0D8h
		db 2, 5	dup(0),	0FCh, 0F9h, 33h, 40h, 3, 34h, 6	dup(0)
		db 14h,	52h, 3,	34h, 40h, 3, 6 dup(0), 1Eh, 6Ch, 0C7h
		db 3Bh,	2Eh, 7 dup(0), 4Ch, 0B0h, 0C9h,	4Fh, 2,	7 dup(0)
		db 91h,	0Eh, 0E6h, 1Ah,	8 dup(0), 51h, 76h, 1Fh, 1, 8 dup(0)
		db 0C5h, 2Ch, 0Bh, 9 dup(0)

; =============== S U B	R O U T	I N E =======================================


sub_26EBE	proc near		; CODE XREF: seg2333:1E98p
					; DATA XREF: seg2333:2540o
		push	bp
		push	si
		push	di
		mov	bp, word_2826C
		lea	di, [bp-0Ch]
		mov	word_2826C, di
		call	sub_26326
		push	di
		push	si
		push	si
		call	sub_257CD
		mov	word_2826C, bp
		mov	di, [si+8]
		cmp	di, 0FFC0h
		jle	loc_26F38
		mov	ax, [si]
		mov	bx, [si+2]
		mov	cx, [si+4]
		mov	dx, [si+6]
		inc	di
		jge	loc_26F06

loc_26EEF::				; CODE XREF: sub_26EBE+3Aj
		shr	dx, 1
		rcr	cx, 1
		rcr	bx, 1
		rcr	ax, 1
		inc	di
		jl	loc_26EEF
		adc	ax, 0
		adc	bx, 0
		adc	cx, 0
		adc	dx, 0

loc_26F06::				; CODE XREF: sub_26EBE+2Fj
		sub	word_2826C, 0Ch
		cld
		mov	di, word_2826C
		stosw
		xchg	ax, bx
		stosw
		xchg	ax, cx
		stosw
		xchg	ax, dx
		stosw
		sub	ax, ax
		stosw
		stosb
		sub	di, 0Bh
		push	cs:word_26E20
		mov	ax, offset byte_26E22
		push	ax
		call	sub_26A5E
		mov	ax, word_2826C
		push	ax
		push	si
		push	si
		call	sub_257CD
		add	word_2826C, 0Ch

loc_26F38::				; CODE XREF: sub_26EBE+21j
		pop	di
		pop	si
		pop	bp
		retn
sub_26EBE	endp

; ---------------------------------------------------------------------------
byte_26F3C	db 0BBh, 0F0h, 17h, 5Ch, 29h, 3Bh, 0AAh, 0B8h, 1, 3 dup(0)
					; DATA XREF: sub_26FB6+75o
					; seg2333:1B6Eo
word_26F48	dw 9			; DATA XREF: sub_270A6+34r
byte_26F4A	db 0Ch dup(0), 68h, 6 dup(55h),	5, 4 dup(0), 0BAh, 34h
					; DATA XREF: sub_270A6+39o
		db 5 dup(33h), 5 dup(0), 0A7h, 0C3h, 48h, 92h, 24h, 49h
		db 2, 5	dup(0),	4Dh, 5Dh, 22h, 0C7h, 71h, 1Ch, 6 dup(0)
		db 24h,	56h, 0EBh, 5Ch,	74h, 1,	6 dup(0), 39h, 0ADh, 0ECh
		db 0B1h, 13h, 7	dup(0),	0FDh, 0D6h, 80h, 0Fh, 1, 7 dup(0)
		db 0B5h, 7Ah, 0E4h, 10h, 8 dup(0)

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_26FB6	proc near		; CODE XREF: seg2333:1D81p
					; DATA XREF: seg2333:2542o

var_4		= word ptr -4
var_2		= word ptr -2

		push	bp
		mov	bp, sp
		push	word ptr [di+8]
		push	si
		push	di
		mov	ax, [di]
		mov	bx, [di+2]
		mov	cx, [di+4]
		mov	dx, [di+6]
		cmp	dx, 0B505h
		ja	loc_26FDF
		shl	ax, 1
		rcl	bx, 1
		rcl	cx, 1
		rcl	dx, 1
		mov	si, 0
		dec	[bp+var_2]
		jmp	loc_26FF4
; ---------------------------------------------------------------------------

loc_26FDF::				; CODE XREF: sub_26FB6+17j
		not	dx
		not	cx
		not	bx
		neg	ax
		cmc
		adc	bx, 0
		adc	cx, 0
		adc	dx, 0
		mov	si, 1

loc_26FF4::				; CODE XREF: sub_26FB6+27j
		sub	di, di

loc_26FF6::				; CODE XREF: sub_26FB6+4Dj
		or	dx, dx
		jnz	loc_27013
		xchg	ax, bx
		xchg	ax, cx
		xchg	ax, dx
		sub	di, 10h
		cmp	di, 0FFC0h
		jg	loc_26FF6
		sub	word_2826C, 0Ch
		mov	di, word_2826C
		call	sub_26337
		jmp	loc_27040
; ---------------------------------------------------------------------------

loc_27013::				; CODE XREF: sub_26FB6+42j
		js	loc_27020

loc_27015::				; CODE XREF: sub_26FB6+68j
		dec	di
		shl	ax, 1
		rcl	bx, 1
		rcl	cx, 1
		adc	dx, dx
		jns	loc_27015

loc_27020::				; CODE XREF: sub_26FB6:loc_27013j
		push	si
		push	di
		push	dx
		push	cx
		push	bx
		push	ax
		mov	si, sp
		call	sub_270A6
		mov	si, offset byte_26F3C
		call	sub_26397
		mov	si, word_2826C
		mov	ax, sp
		push	si
		push	ax
		push	si
		call	sub_257CD
		add	sp, 0Ch

loc_27040::				; CODE XREF: sub_26FB6+5Bj
		lea	si, [bp+var_2]
		sub	word_2826C, 0Ch
		mov	di, word_2826C
		call	sub_26408
		lea	si, [di+0Ch]
		push	si
		push	di
		push	di
		call	sub_25603
		push	di
		push	[bp+var_4]
		push	[bp+var_4]
		call	sub_257CD
		add	word_2826C, 18h
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
sub_26FB6	endp

; ---------------------------------------------------------------------------

loc_2706D::				; DATA XREF: seg2333:2552o
		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	si, di
		call	sub_2637B
		mov	si, word_2826C
		call	sub_270A6
		mov	si, offset byte_26F3C
		call	sub_26397
		mov	si, word_2826C
		push	si
		lea	si, [si+0Ch]
		push	si
		push	si
		call	sub_257CD
		push	si
		push	word ptr [bp-2]
		push	word ptr [bp-2]
		call	sub_257CD
		add	word_2826C, 18h
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_270A6	proc near		; CODE XREF: sub_26FB6+72p
					; seg2333:1B6Bp
		push	bp
		mov	bp, sp
		push	si
		push	di
		cmp	word ptr [si+8], 0FFC0h
		jle	loc_270F7
		sub	word_2826C, 0Ch
		mov	di, word_2826C
		call	sub_262D1
		inc	word ptr [di+8]
		push	si
		push	di
		push	di
		call	sub_25603
		push	si
		push	di
		push	di
		call	sub_2599A
		call	sub_263CA
		mov	bx, word_2826C
		add	word ptr [bx+8], 2
		call	sub_26956
		push	cs:word_26F48
		mov	ax, offset byte_26F4A
		push	ax
		call	sub_26A5E
		push	word_2826C
		push	di
		push	si
		call	sub_257CD
		inc	word ptr [si+8]
		add	word_2826C, 18h

loc_270F7::				; CODE XREF: sub_270A6+9j
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
sub_270A6	endp

; ---------------------------------------------------------------------------

loc_270FD::				; DATA XREF: seg2333:26C6o
					; seg2333:26CCo
		mov	cl, 0
		jmp	loc_27107
; ---------------------------------------------------------------------------

loc_27101::				; DATA XREF: seg2333:26C8o
					; seg2333:26CEo
		mov	cl, 2
		jmp	loc_27107
; ---------------------------------------------------------------------------

loc_27105::				; DATA XREF: seg2333:26CAo
					; seg2333:26D0o
		mov	cl, 4

loc_27107::				; CODE XREF: seg2333:1BEFj
					; seg2333:1BF3j
		mov	es, di
		mov	bp, sp
		mov	di, word_2826C
		mov	ch, [di+0Ah]
		push	cx
		push	ax
		cmp	word ptr [di+8], 0FFE0h
		jg	loc_27125
		cmp	cl, 2
		jnz	loc_27122
		call	sub_262D1

loc_27122::				; CODE XREF: seg2333:1C0Dj
		jmp	loc_271DF
; ---------------------------------------------------------------------------

loc_27125::				; CODE XREF: seg2333:1C08j
		cmp	word ptr [di+8], 40h ; '@'
		jle	loc_27136
		call	sub_26363
		mov	word ptr [di+6], 21h ; '!'
		jmp	loc_271DF
; ---------------------------------------------------------------------------

loc_27136::				; CODE XREF: seg2333:1C19j
		mov	byte ptr [di+0Ah], 0
		lea	si, [di-0Ch]
		mov	word_2826C, si
		xchg	di, si
		call	sub_26304
		xchg	di, si
		sub	word ptr [si+8], 2
		call	sub_25DE1
		and	al, 7
		mov	[bp-4],	al
		mov	bl, [bp-2]
		cmp	bl, 4
		jz	loc_27197
		add	bl, [bp-4]
		and	bl, 7
		mov	[bp-4],	bl
		shr	bx, 1
		jnb	loc_2717A
		xchg	di, si
		call	sub_26304
		xchg	di, si
		sub	word ptr [si+8], 2
		push	si
		push	di
		push	di
		call	sub_255FF

loc_2717A::				; CODE XREF: seg2333:1C57j
		mov	word_2826C, di
		mov	si, di
		test	byte ptr [bp-4], 3
		jp	loc_2718B
		call	sub_26C30
		jmp	loc_2718E
; ---------------------------------------------------------------------------

loc_2718B::				; CODE XREF: seg2333:1C74j
		call	sub_26C0F

loc_2718E::				; CODE XREF: seg2333:1C79j
		mov	bl, [bp-4]
		shr	bl, 1
		shr	bl, 1
		jmp	loc_271D3
; ---------------------------------------------------------------------------

loc_27197::				; CODE XREF: seg2333:1C4Aj
		test	byte ptr [bp-4], 1
		jz	loc_271AE
		xchg	si, di
		call	sub_26304
		xchg	si, di
		sub	word ptr [si+8], 2
		push	si
		push	di
		push	di
		call	sub_255FF

loc_271AE::				; CODE XREF: seg2333:1C8Bj
		mov	word_2826C, di
		mov	si, di
		call	sub_26C40
		lea	di, [si-0Ch]
		mov	ax, si
		test	byte ptr [bp-4], 3
		jp	loc_271C4
		xchg	si, di

loc_271C4::				; CODE XREF: seg2333:1CB0j
		xchg	ax, di
		push	si
		push	ax
		push	di
		call	sub_2599A
		mov	bl, [bp-4]
		shr	bl, 1
		and	bl, 1

loc_271D3::				; CODE XREF: seg2333:1C85j
		cmp	byte ptr [bp-2], 2
		jz	loc_271DC
		xor	bl, [bp-1]

loc_271DC::				; CODE XREF: seg2333:1CC7j
		mov	[di+0Ah], bl

loc_271DF::				; CODE XREF: seg2333:loc_27122j
					; seg2333:1C23j
		mov	word_2826C, di
		mov	sp, bp
		retn
; ---------------------------------------------------------------------------

loc_271E6::				; DATA XREF: seg2333:26D2o
		mov	es, di
		mov	si, word_2826C
		lea	di, [si-0Ch]
		mov	word_2826C, di
		call	sub_262D1
		mov	ax, [si+8]
		cmp	ax, 4001h
		jge	loc_27236
		cmp	ax, 0C001h
		jle	loc_27231
		mov	cl, 0
		mov	bx, si
		dec	ax
		jl	loc_27211
		call	sub_263E7
		mov	bx, di
		mov	cl, 1

loc_27211::				; CODE XREF: seg2333:1CF8j
		mov	ch, 0
		xchg	ch, [bx+0Ah]
		push	cx
		call	sub_26D36
		pop	cx
		cmp	cl, 1
		jnz	loc_2722E
		push	cx
		call	sub_26304
		dec	word ptr [di+8]
		push	di
		push	si
		push	si
		call	sub_255FF
		pop	cx

loc_2722E::				; CODE XREF: seg2333:1D0Ej
		mov	[si+0Ah], ch

loc_27231::				; CODE XREF: seg2333:1CF1j
					; seg2333:1D35j
		mov	word_2826C, si
		retn
; ---------------------------------------------------------------------------

loc_27236::				; CODE XREF: seg2333:1CECj
		mov	di, si
		push	word ptr [si+0Ah]
		call	sub_26304
		pop	ax
		mov	[si+0Ah], al
		dec	word ptr [si+8]
		jmp	loc_27231
; ---------------------------------------------------------------------------

loc_27247::				; DATA XREF: seg2333:26D4o
		mov	es, di
		mov	si, word_2826C
		lea	di, [si-0Ch]
		mov	word_2826C, di
		call	sub_26326
		jmp	loc_2727B
; ---------------------------------------------------------------------------

loc_27259::				; DATA XREF: seg2333:26D6o
		mov	es, di
		mov	si, word_2826C
		lea	di, [si-0Ch]
		mov	word_2826C, di
		call	sub_262D1
		jmp	loc_2727B
; ---------------------------------------------------------------------------

loc_2726B::				; DATA XREF: seg2333:26D8o
		mov	es, di
		mov	si, word_2826C
		lea	di, [si-0Ch]
		mov	word_2826C, di
		call	sub_26315

loc_2727B::				; CODE XREF: seg2333:1D47j
					; seg2333:1D59j
		call	sub_263E7
		cmp	byte ptr [di+0Ah], 0
		jnz	loc_2729D
		mov	ax, [di+8]
		cmp	ax, 0C001h
		jle	loc_27299
		cmp	ax, 4001h
		jge	loc_2729D
		call	sub_26FB6

loc_27294::				; CODE XREF: seg2333:1D9Fj
					; seg2333:1DA6j
		mov	word_2826C, si
		retn
; ---------------------------------------------------------------------------

loc_27299::				; CODE XREF: seg2333:1D7Aj
		mov	ch, 4
		jmp	loc_2729F
; ---------------------------------------------------------------------------

loc_2729D::				; CODE XREF: seg2333:1D72j
					; seg2333:1D7Fj
		mov	ch, 1

loc_2729F::				; CODE XREF: seg2333:1D8Bj
		call	sub_27C24
		mov	ax, 4001h
		mov	di, si
		mov	cl, 0
		call	sub_2634D
		cmp	ch, 1
		jnz	loc_27294
		mov	word ptr [di+6], 0C000h
		jmp	loc_27294
; ---------------------------------------------------------------------------

loc_272B8::				; DATA XREF: seg2333:26DAo
		mov	ax, offset sub_262F3
		jmp	loc_272CB
; ---------------------------------------------------------------------------

loc_272BD::				; DATA XREF: seg2333:26DCo
		mov	es, di
		mov	si, word_2826C
		lea	di, [si-0Ch]
		jmp	loc_272E4
; ---------------------------------------------------------------------------

loc_272C8::				; DATA XREF: seg2333:26DEo
		mov	ax, offset loc_262E2

loc_272CB::				; CODE XREF: seg2333:1DABj
		mov	es, di
		mov	si, word_2826C
		lea	di, [si-0Ch]
		mov	word_2826C, di
		call	ax ; sub_262F3
		push	si
		push	di
		push	si
		call	sub_257CD
		mov	word_2826C, si

loc_272E4::				; CODE XREF: seg2333:1DB6j
		mov	bp, sp
		mov	ax, 0
		push	ax
		mov	ax, [si+8]
		cmp	ax, 0Ch
		jg	loc_27340
		cmp	ax, 0FFC0h
		jle	loc_2736C
		call	sub_263CA
		inc	word ptr [di+8]
		push	word_28262
		and	byte ptr word_28262+1, 0F3h
		or	byte ptr word_28262+1, 4
		mov	si, di
		call	sub_26847
		pop	word_28262
		push	ax
		mov	di, sp
		call	sub_2644B
		dec	word ptr [si+8]
		lea	di, [si+0Ch]
		push	di
		push	si
		push	di
		call	sub_255FF
		pop	ax
		sar	ax, 1
		jnb	loc_27388
		mov	word ptr [si], 6485h
		mov	word ptr [si+2], 0F9DEh
		mov	word ptr [si+4], 0F333h
		mov	word ptr [si+6], 0B504h
		jmp	loc_2739B
; ---------------------------------------------------------------------------

loc_27340::				; CODE XREF: seg2333:1DE0j
		cmp	ax, 4001h
		jnz	loc_27355
		mov	ax, 7FFFh
		and	ax, [si+6]
		or	ax, [si+4]
		or	ax, [si+2]
		or	ax, [si]
		jnz	loc_27373

loc_27355::				; CODE XREF: seg2333:1E33j
		cmp	byte ptr [si+0Ah], 0
		jnz	loc_27381
		mov	di, si
		mov	ch, 8
		call	sub_27C24
		mov	ax, 4001h
		mov	cl, 0
		call	sub_2634D
		jmp	loc_273C1
; ---------------------------------------------------------------------------

loc_2736C::				; CODE XREF: seg2333:1DE5j
		mov	di, si
		call	sub_262D1
		jmp	loc_273C1
; ---------------------------------------------------------------------------

loc_27373::				; CODE XREF: seg2333:1E43j
		mov	word ptr [si+6], 0C000h
		mov	di, si
		mov	ch, 1
		call	sub_27C24
		jmp	loc_273C1
; ---------------------------------------------------------------------------

loc_27381::				; CODE XREF: seg2333:1E49j
		mov	di, si
		call	sub_26337
		jmp	loc_273C1
; ---------------------------------------------------------------------------

loc_27388::				; CODE XREF: seg2333:1E19j
		mov	word ptr [si], 0
		mov	word ptr [si+2], 0
		mov	word ptr [si+4], 0
		mov	word ptr [si+6], 8000h

loc_2739B::				; CODE XREF: seg2333:1E2Ej
		inc	ax
		mov	[si+8],	ax
		mov	byte ptr [si+0Ah], 0
		mov	di, si
		lea	si, [di+0Ch]
		call	sub_26EBE
		push	si
		push	di
		push	si
		call	sub_257CD
		push	si
		push	di
		push	si
		call	sub_25603
		cmp	byte ptr [bp-2], 1
		jnz	loc_273C1
		xor	byte ptr [si+0Ah], 1

loc_273C1::				; CODE XREF: seg2333:1E5Aj
					; seg2333:1E61j ...
		mov	word_2826C, si
		mov	sp, bp
		retn

; =============== S U B	R O U T	I N E =======================================


sub_273C8	proc near		; CODE XREF: sub_273F7+26p
					; sub_273F7+3Dp ...
		push	bx
		push	cx
		push	dx
		mov	cl, 4
		mov	ch, 0Ah
		mov	bx, es:[si]
		mov	al, bh
		shr	al, cl
		mul	ch
		mov	dl, 0Fh
		and	dl, bh
		add	al, dl
		mul	ch
		mov	dx, 0F0h ; 'ð'
		and	dl, bl
		shr	dx, cl
		add	ax, dx
		mov	cx, 0Ah
		mul	cx
		and	bx, 0Fh
		add	ax, bx
		pop	dx
		pop	cx
		pop	bx
		retn
sub_273C8	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_273F7	proc near		; CODE XREF: sub_278FE+7p

var_4		= word ptr -4
var_2		= word ptr -2

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	al, es:[si+9]
		and	ax, 80h
		rol	al, 1
		mov	[di+0Ah], al
		mov	cl, 4
		mov	al, es:[si+8]
		shl	ax, cl
		shr	al, cl
		aad
		mov	di, 2710h
		mul	di
		xchg	ax, bx
		lea	si, [si+6]
		call	sub_273C8
		add	ax, bx
		adc	dl, dh
		mov	bx, dx
		mul	di
		xchg	ax, bx
		mov	cx, dx
		mul	di
		add	cx, ax
		adc	dl, dh
		sub	si, 2
		call	sub_273C8
		add	ax, bx
		adc	cx, 0
		adc	dl, dh
		push	si
		mov	bx, dx
		mul	di
		xchg	ax, cx
		mov	si, dx
		mul	di
		xchg	ax, bx
		xchg	di, dx
		mul	dx
		add	bx, si
		adc	di, ax
		pop	si
		sub	si, 2
		call	sub_273C8
		add	ax, cx
		adc	bx, dx
		adc	di, dx
		mov	si, 2710h
		mul	si
		xchg	ax, bx
		mov	cx, dx
		mul	si
		xchg	ax, si
		xchg	di, dx
		mul	dx
		add	cx, si
		adc	di, ax
		adc	dx, 0
		mov	si, [bp+var_2]
		call	sub_273C8
		add	bx, ax
		adc	cx, 0
		adc	di, 0
		adc	dx, 0
		mov	ax, 40h	; '@'

loc_27488::				; CODE XREF: sub_273F7+A0j
		or	dx, dx
		jnz	loc_27499
		sub	ax, 10h
		jz	loc_274BD
		xchg	dx, di
		xchg	di, cx
		xchg	cx, bx
		jmp	loc_27488
; ---------------------------------------------------------------------------

loc_27499::				; CODE XREF: sub_273F7+93j
		js	loc_274A6

loc_2749B::				; CODE XREF: sub_273F7+ADj
		dec	ax
		shl	bx, 1
		rcl	cx, 1
		rcl	di, 1
		adc	dx, dx
		jns	loc_2749B

loc_274A6::				; CODE XREF: sub_273F7:loc_27499j
					; sub_273F7+C9j
		mov	si, [bp+var_4]
		mov	[si], bx
		mov	[si+2],	cx
		mov	[si+4],	di
		mov	[si+6],	dx
		mov	[si+8],	ax
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
; ---------------------------------------------------------------------------

loc_274BD::				; CODE XREF: sub_273F7+98j
		mov	ax, 0C001h
		jmp	loc_274A6
sub_273F7	endp


; =============== S U B	R O U T	I N E =======================================


sub_274C2	proc near		; CODE XREF: sub_274E0+81p
					; sub_274E0+8Fp ...
		push	ax
		push	cx
		mov	al, 64h	; 'd'
		mov	cl, 4
		xchg	ax, dx
		div	dl
		mov	dl, ah
		aam
		shl	ah, cl
		or	ah, al
		xchg	ax, dx
		aam
		shl	ah, cl
		or	al, ah
		mov	ah, dh
		stosw
		pop	cx
		pop	ax
		retn
sub_274C2	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_274E0	proc near		; CODE XREF: sub_2792B+4p

var_2		= word ptr -2

		push	bp
		mov	bp, sp
		push	si
		push	di
		cld
		mov	ax, [si+8]
		mov	bx, [si]
		mov	cx, [si+2]
		mov	dx, [si+6]
		mov	si, [si+4]
		cmp	ax, 0
		jl	loc_27531
		sub	ax, 3Ch	; '<'
		jl	loc_2751D
		jg	loc_27533
		cmp	dx, 0DE0Bh
		jb	loc_2751D
		ja	loc_27533
		cmp	si, 6B3Ah
		jb	loc_2751D
		ja	loc_27533
		cmp	cx, 763Fh
		jb	loc_2751D
		ja	loc_27533
		cmp	bx, 0FFF0h
		ja	loc_27533

loc_2751D::				; CODE XREF: sub_274E0+1Cj
					; sub_274E0+24j ...
		mov	ah, 0
		sub	al, 4

loc_27521::				; CODE XREF: sub_274E0+4Fj
		add	al, 10h
		jg	loc_27535
		mov	ah, bh
		mov	bx, cx
		mov	cx, si
		mov	si, dx
		sub	dx, dx
		jmp	loc_27521
; ---------------------------------------------------------------------------

loc_27531::				; CODE XREF: sub_274E0+17j
		jmp	loc_2759A
; ---------------------------------------------------------------------------

loc_27533::				; CODE XREF: sub_274E0+1Ej
					; sub_274E0+26j ...
		jmp	loc_275A3
; ---------------------------------------------------------------------------

loc_27535::				; CODE XREF: sub_274E0+43j
		sub	al, 10h
		jge	loc_27547

loc_27539::				; CODE XREF: sub_274E0+65j
		shr	dx, 1
		rcr	si, 1
		rcr	cx, 1
		rcr	bx, 1
		rcr	ah, 1
		inc	al
		jl	loc_27539

loc_27547::				; CODE XREF: sub_274E0+57j
		add	ah, ah
		adc	bx, 0
		adc	cx, 0
		adc	si, 0
		adc	dx, 0
		xchg	ax, si
		mov	si, 2710h
		div	si
		xchg	ax, cx
		div	si
		xchg	ax, bx
		div	si
		call	sub_274C2
		sub	dx, dx
		xchg	ax, cx
		div	si
		xchg	ax, bx
		div	si
		xchg	ax, cx
		div	si
		call	sub_274C2
		mov	dx, bx
		xchg	ax, cx
		div	si
		xchg	ax, cx
		div	si
		call	sub_274C2
		mov	dx, cx
		div	si
		call	sub_274C2
		aam
		mov	cl, 4
		shl	ah, cl
		or	al, ah
		stosb

loc_2758D::				; CODE XREF: sub_274E0+C1j
		mov	si, [bp+var_2]
		mov	al, [si+0Ah]
		ror	al, 1
		stosb
		pop	di
		pop	si
		pop	bp
		retn
; ---------------------------------------------------------------------------

loc_2759A::				; CODE XREF: sub_274E0:loc_27531j
		mov	al, 0

loc_2759C::				; CODE XREF: sub_274E0+CAj
		mov	cx, 9
		rep stosb
		jmp	loc_2758D
; ---------------------------------------------------------------------------

loc_275A3::				; CODE XREF: sub_274E0:loc_27533j
		mov	ch, 8
		call	sub_27C24
		mov	al, 99h	; ''
		jmp	loc_2759C
sub_274E0	endp

; ---------------------------------------------------------------------------
off_275AC	dw offset loc_276B9	; DATA XREF: seg2333:21A4r
		dw offset loc_276C3
		dw offset loc_276CD
		dw offset loc_276D7
		dw offset loc_276E1
		dw offset loc_276E8
		dw offset loc_27706
		dw offset loc_276EF
off_275BC	dw offset loc_27A97	; DATA XREF: seg2333:2222r
		dw offset loc_27B0C
		dw offset loc_27B7C
		dw offset loc_27B7E
off_275C4	dw offset sub_26099	; DATA XREF: seg2333:2246r
		dw offset sub_2659A
		dw offset sub_2619D
		dw offset sub_26408
off_275CC	dw offset sub_27797	; DATA XREF: seg2333:225Br
					; seg2333:2282r
		dw offset sub_2779E
		dw offset sub_277A8
		dw offset sub_277A5
		dw offset sub_277AF
		dw offset sub_277AE
		dw offset sub_277B7
		dw offset sub_277B6
off_275DC	dw offset sub_26099	; DATA XREF: seg2333:22D2r
		dw offset sub_2659A
		dw offset sub_2619D
		dw offset sub_26408
off_275E4	dw offset sub_2601F	; DATA XREF: seg2333:22E6r
					; seg2333:22F5r
		dw offset sub_265F2
		dw offset sub_260F6
		dw offset sub_2644B
off_275EC	dw offset sub_2782F	; DATA XREF: seg2333:230Ar
		dw offset sub_27829
		dw offset sub_27890
		dw offset sub_278FE
		dw offset sub_27838
		dw offset sub_2790E
		dw offset sub_27829
		dw offset sub_278EE
off_275FC	dw offset sub_27843	; DATA XREF: seg2333:2311r
		dw offset sub_27829
		dw offset sub_2786C
		dw offset sub_2792B
		dw offset sub_278C2
		dw offset sub_27938
		dw offset sub_278C7
		dw offset sub_2791E
; ---------------------------------------------------------------------------

loc_2760C::				; CODE XREF: seg2333:2109j
		mov	ch, 1
		call	sub_27C24
		jmp	loc_27BAC
; ---------------------------------------------------------------------------

loc_27614::				; CODE XREF: seg2333:2170j
		ja	loc_2763A
		test	ah, 20h
		jnz	loc_2760C
		inc	dx
		mov	al, ah
		mov	di, ds
		and	al, 0C0h
		jz	loc_27632
		cmp	al, 80h	; ''
		mov	di, ss
		jb	loc_27632
		mov	di, [bp+0]
		ja	loc_27632
		mov	di, [bp+14h]

loc_27632::				; CODE XREF: seg2333:2112j
					; seg2333:2118j ...
		lods	byte ptr es:[si]
		xchg	ah, al
		and	al, 7
		jmp	loc_27682
; ---------------------------------------------------------------------------

loc_2763A::				; CODE XREF: seg2333:loc_27614j
		cmp	al, 9
		jnz	loc_2765D
		mov	al, ss:7
		mov	bx, es
		and	bl, 0F8h
		mov	ds, word ptr ss:0Ah
		xor	[bx+5],	al
		push	es
		pop	es
		mov	word ptr es:[si-3], 0E489h
		xor	[bx+5],	al
		jmp	loc_27BAC
; ---------------------------------------------------------------------------

loc_2765D::				; CODE XREF: seg2333:212Cj
		jmp	loc_27C61
; ---------------------------------------------------------------------------
		db 34h,	0
; ---------------------------------------------------------------------------

e086_entry:				; DATA XREF: sub_24D9+131o
		sti
		cld
		push	ax
		push	cx
		push	dx
		push	bx
		push	ds
		push	bp
		push	si
		push	di
		push	es
		mov	bp, sp
		mov	ss:32h,	bp
		les	si, [bp+12h]
		dec	si
		mov	dl, 0
		lods	word ptr es:[si]
		sub	al, 34h	; '4'
		cmp	al, 8
		jnb	loc_27614

loc_27682::				; CODE XREF: seg2333:2128j
		mov	bx, 0C007h
		and	bl, ah
		and	bh, ah
		xchg	ax, cx
		cmp	bh, 0C0h ; 'À'
		jnb	loc_276F6
		cmp	bh, 40h	; '@'
		ja	loc_276A6
		jz	loc_276AA
		sub	ax, ax
		cmp	bl, 6
		jnz	loc_276AD
		lods	word ptr es:[si]
		mov	[bp+12h], si
		mov	si, ds
		jmp	loc_2770B
; ---------------------------------------------------------------------------

loc_276A6::				; CODE XREF: seg2333:2182j
		lods	word ptr es:[si]
		jmp	loc_276AD
; ---------------------------------------------------------------------------

loc_276AA::				; CODE XREF: seg2333:2184j
		lods	byte ptr es:[si]
		cbw

loc_276AD::				; CODE XREF: seg2333:218Bj
					; seg2333:2198j
		mov	[bp+12h], si
		mov	bh, 0
		shl	bx, 1
		jmp	cs:off_275AC[bx]
; ---------------------------------------------------------------------------

loc_276B9::				; CODE XREF: seg2333:21A4j
					; DATA XREF: seg2333:off_275ACo
		add	ax, [bp+0Ah]
		add	ax, [bp+4]
		mov	si, ds
		jmp	loc_2770B
; ---------------------------------------------------------------------------

loc_276C3::				; CODE XREF: seg2333:21A4j
					; DATA XREF: seg2333:209Eo
		add	ax, [bp+0Ah]
		add	ax, [bp+2]
		mov	si, ds
		jmp	loc_2770B
; ---------------------------------------------------------------------------

loc_276CD::				; CODE XREF: seg2333:21A4j
					; DATA XREF: seg2333:20A0o
		add	ax, [bp+6]
		add	ax, [bp+4]
		mov	si, ss
		jmp	loc_2770B
; ---------------------------------------------------------------------------

loc_276D7::				; CODE XREF: seg2333:21A4j
					; DATA XREF: seg2333:20A2o
		add	ax, [bp+6]
		add	ax, [bp+2]
		mov	si, ss
		jmp	loc_2770B
; ---------------------------------------------------------------------------

loc_276E1::				; CODE XREF: seg2333:21A4j
					; DATA XREF: seg2333:20A4o
		add	ax, [bp+4]
		mov	si, ds
		jmp	loc_2770B
; ---------------------------------------------------------------------------

loc_276E8::				; CODE XREF: seg2333:21A4j
					; DATA XREF: seg2333:20A6o
		add	ax, [bp+2]
		mov	si, ds
		jmp	loc_2770B
; ---------------------------------------------------------------------------

loc_276EF::				; CODE XREF: seg2333:21A4j
					; DATA XREF: seg2333:20AAo
		add	ax, [bp+0Ah]
		mov	si, ds
		jmp	loc_2770B
; ---------------------------------------------------------------------------

loc_276F6::				; CODE XREF: seg2333:217Dj
		mov	[bp+12h], si
		mov	ax, ss
		mov	ds, ax
		mov	es, ax
		test	cl, 1
		jz	loc_27737
		jmp	loc_2771D
; ---------------------------------------------------------------------------

loc_27706::				; CODE XREF: seg2333:21A4j
					; DATA XREF: seg2333:20A8o
		add	ax, [bp+6]
		mov	si, ss

loc_2770B::				; CODE XREF: seg2333:2194j
					; seg2333:21B1j ...
		xchg	ax, si
		cmp	dl, 1
		jnz	loc_27712
		xchg	ax, di

loc_27712::				; CODE XREF: seg2333:21FFj
		mov	es, ax
		mov	ax, ss
		mov	ds, ax
		test	cl, 1
		jz	loc_27737

loc_2771D::				; CODE XREF: seg2333:21F4j
		cmp	ch, 0C0h ; 'À'
		jnb	loc_27725
		jmp	loc_277BE
; ---------------------------------------------------------------------------

loc_27725::				; CODE XREF: seg2333:2210j
		test	ch, 20h
		jnz	loc_2772D
		jmp	loc_27965
; ---------------------------------------------------------------------------

loc_2772D::				; CODE XREF: seg2333:2218j
		mov	bx, 6
		and	bl, cl
		jmp	cs:off_275BC[bx]
; ---------------------------------------------------------------------------

loc_27737::				; CODE XREF: seg2333:21F2j
					; seg2333:220Bj
		mov	ax, 38h	; '8'
		and	al, ch
		shr	ax, 1
		shr	ax, 1
		xchg	ax, bp
		cmp	ch, 0C0h ; 'À'
		jnb	loc_27770
		mov	di, word_2826C
		sub	di, 0Ch
		mov	word_2826C, di
		mov	bx, 6
		and	bl, cl
		call	cs:off_275C4[bx]
		mov	cx, ss
		mov	es, cx
		mov	si, 0Ch
		mov	bx, di
		lea	ax, [bx+si]
		mov	dx, ax
		mov	cx, 2697h
		jmp	cs:off_275CC[bp]
; ---------------------------------------------------------------------------

loc_27770::				; CODE XREF: seg2333:2234j
		mov	bh, 0
		mov	bl, cs:[bx+2]
		mov	ax, word_2826C
		add	bx, ax
		test	cl, 4
		mov	dx, ax
		jz	loc_27785
		mov	dx, bx

loc_27785::				; CODE XREF: seg2333:2271j
		sub	si, si
		test	cl, 2
		jz	loc_2778F
		mov	si, 0Ch

loc_2778F::				; CODE XREF: seg2333:227Aj
		mov	cx, 2697h
		jmp	cs:off_275CC[bp]

; =============== S U B	R O U T	I N E =======================================


sub_27797	proc near		; CODE XREF: seg2333:21A4j
					; seg2333:2222j ...
		push	ax
		push	bx
		push	dx
		push	cx
		jmp	sub_25603
sub_27797	endp


; =============== S U B	R O U T	I N E =======================================


sub_2779E	proc near		; CODE XREF: seg2333:21A4j
					; seg2333:2222j ...
		push	ax
		push	bx
		push	dx
		push	cx
		jmp	sub_257CD
sub_2779E	endp


; =============== S U B	R O U T	I N E =======================================


sub_277A5	proc near		; CODE XREF: seg2333:21A4j
					; seg2333:2222j ...
		add	si, 0Ch
sub_277A5	endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================


sub_277A8	proc near		; CODE XREF: seg2333:21A4j
					; seg2333:2222j ...
		push	ax
		push	bx
		push	cx
		jmp	sub_25EE9
sub_277A8	endp


; =============== S U B	R O U T	I N E =======================================


sub_277AE	proc near		; CODE XREF: seg2333:21A4j
					; seg2333:2222j ...
		xchg	ax, bx
sub_277AE	endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================


sub_277AF	proc near		; CODE XREF: seg2333:21A4j
					; seg2333:2222j ...
		push	ax
		push	bx
		push	dx
		push	cx
		jmp	sub_255FF
sub_277AF	endp


; =============== S U B	R O U T	I N E =======================================


sub_277B6	proc near		; CODE XREF: seg2333:21A4j
					; seg2333:2222j ...
		xchg	ax, bx
sub_277B6	endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================


sub_277B7	proc near		; CODE XREF: seg2333:21A4j
					; seg2333:2222j ...
		push	ax
		push	bx
		push	dx
		push	cx
		jmp	sub_2599A
sub_277B7	endp

; ---------------------------------------------------------------------------

loc_277BE::				; CODE XREF: seg2333:2212j
		mov	bp, 6
		and	bp, cx
		test	ch, 20h
		jnz	loc_2780A
		test	ch, 10h
		jnz	loc_277E7
		test	ch, 8
		jnz	loc_27826
		mov	di, word_2826C
		mov	ax, 0FFF4h
		add	di, ax
		mov	word_28264, ax
		mov	ax, 2692h
		push	ax
		jmp	cs:off_275DC[bp]
; ---------------------------------------------------------------------------

loc_277E7::				; CODE XREF: seg2333:22BBj
		mov	di, word_2826C
		xchg	si, di
		test	ch, 8
		jnz	loc_277FB
		mov	ax, 269Ch
		push	ax
		jmp	cs:off_275E4[bp]
; ---------------------------------------------------------------------------

loc_277FB::				; CODE XREF: seg2333:22E0j
		mov	word_28264, 0Ch
		mov	ax, 2692h
		push	ax
		jmp	cs:off_275E4[bp]
; ---------------------------------------------------------------------------

loc_2780A::				; CODE XREF: seg2333:22B6j
		mov	ax, 8
		and	al, ch
		or	bp, ax
		mov	ax, 269Ch
		push	ax
		test	ch, 10h
		jnz	loc_2781F
		jmp	cs:off_275EC[bp]
; ---------------------------------------------------------------------------

loc_2781F::				; CODE XREF: seg2333:2308j
		xchg	si, di
		jmp	cs:off_275FC[bp]
; ---------------------------------------------------------------------------

loc_27826::				; CODE XREF: seg2333:22C0j
		jmp	loc_27BAC

; =============== S U B	R O U T	I N E =======================================


sub_27829	proc near		; CODE XREF: seg2333:21A4j
					; seg2333:2222j ...
		mov	ch, 1
		call	sub_27C24
		retn
sub_27829	endp


; =============== S U B	R O U T	I N E =======================================


sub_2782F	proc near		; CODE XREF: seg2333:21A4j
					; seg2333:2222j ...
		mov	cl, 4
		mov	ax, es:[si+2]
		mov	dataseg@, ax
sub_2782F	endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================


sub_27838	proc near		; CODE XREF: seg2333:21A4j
					; seg2333:2222j ...
		mov	ax, es:[si]
		mov	word_28262, ax
		mov	ch, 0
		jmp	sub_27C24
sub_27838	endp


; =============== S U B	R O U T	I N E =======================================


sub_27843	proc near		; CODE XREF: seg2333:21A4j
					; seg2333:2222j ...
		call	sub_278C2
		call	sub_278C7
		mov	ax, off_28270
		sub	ax, word_2826C
		mov	cx, 60h	; '`'
		cmp	ax, cx
		jb	loc_27858
		xchg	ax, cx

loc_27858::				; CODE XREF: sub_27843+12j
		mov	dl, 0Ch
		div	dl
		xchg	ax, cx
		add	cx, cx
		mov	ax, 0FFFFh
		shr	ax, cl
		stosw
		sub	ax, ax
		stosw
		stosw
		stosw
		stosw
		retn
sub_27843	endp


; =============== S U B	R O U T	I N E =======================================


sub_2786C	proc near		; CODE XREF: seg2333:21A4j
					; seg2333:2222j ...
		call	sub_27843
		mov	si, word_2826C
		mov	bp, es:[di-0Ah]
		neg	bp
		dec	bp

loc_2787A::				; CODE XREF: sub_2786C+1Dj
		jz	loc_2788B
		call	sub_2625B
		add	si, 0Ch
		add	di, 0Ah
		shl	bp, 1
		shl	bp, 1
		jmp	loc_2787A
; ---------------------------------------------------------------------------

loc_2788B::				; CODE XREF: sub_2786C:loc_2787Aj
		mov	word_2826C, si
		retn
sub_2786C	endp


; =============== S U B	R O U T	I N E =======================================


sub_27890	proc near		; CODE XREF: seg2333:21A4j
					; seg2333:2222j ...
		mov	di, word_2826C
		mov	bp, es:[si+4]
		neg	bp
		dec	bp
		jz	sub_2782F
		add	si, 5Eh	; '^'

loc_278A0::				; CODE XREF: sub_27890+17j
		sub	si, 0Ah
		shr	bp, 1
		shr	bp, 1
		jnb	loc_278A0

loc_278A9::				; CODE XREF: sub_27890+26j
		sub	di, 0Ch
		call	sub_26288
		sub	si, 0Ah
		shr	bp, 1
		shr	bp, 1
		jb	loc_278A9
		add	si, 0FFFCh
		mov	word_2826C, di
		jmp	sub_2782F
sub_27890	endp


; =============== S U B	R O U T	I N E =======================================


sub_278C2	proc near		; CODE XREF: seg2333:21A4j
					; seg2333:2222j ...
		mov	ax, word_28262
		stosw
		retn
sub_278C2	endp


; =============== S U B	R O U T	I N E =======================================


sub_278C7	proc near		; CODE XREF: seg2333:21A4j
					; seg2333:2222j ...
		mov	ax, off_28270
		sub	ax, word_2826C
		mov	cx, 60h	; '`'
		cmp	ax, cx
		jb	loc_278D6
		xchg	ax, cx

loc_278D6::				; CODE XREF: sub_278C7+Cj
		neg	ax
		mov	cl, 0Ch
		idiv	cl
		and	al, 7
		mov	cl, 3
		shl	al, cl
		mov	cx, dataseg@
		and	ch, 0C7h
		or	ch, al
		xchg	ax, cx
		stosw
		retn
sub_278C7	endp


; =============== S U B	R O U T	I N E =======================================


sub_278EE	proc near		; CODE XREF: seg2333:21A4j
					; seg2333:2222j ...
		mov	di, word_2826C
		sub	di, 0Ch
		call	sub_266DE
		sub	word_2826C, 0Ch
		retn
sub_278EE	endp


; =============== S U B	R O U T	I N E =======================================


sub_278FE	proc near		; CODE XREF: seg2333:21A4j
					; seg2333:2222j ...
		mov	di, word_2826C
		sub	di, 0Ch
		call	sub_273F7
		sub	word_2826C, 0Ch
		retn
sub_278FE	endp


; =============== S U B	R O U T	I N E =======================================


sub_2790E	proc near		; CODE XREF: seg2333:21A4j
					; seg2333:2222j ...
		mov	di, word_2826C
		sub	di, 0Ch
		call	sub_26288
		sub	word_2826C, 0Ch
		retn
sub_2790E	endp


; =============== S U B	R O U T	I N E =======================================


sub_2791E	proc near		; CODE XREF: seg2333:21A4j
					; seg2333:2222j ...
		mov	si, word_2826C
		call	sub_26751

loc_27925::
		add	word_2826C, 0Ch
		retn
sub_2791E	endp


; =============== S U B	R O U T	I N E =======================================


sub_2792B	proc near		; CODE XREF: seg2333:21A4j
					; seg2333:2222j ...
		mov	si, word_2826C
		call	sub_274E0
		add	word_2826C, 0Ch
		retn
sub_2792B	endp


; =============== S U B	R O U T	I N E =======================================


sub_27938	proc near		; CODE XREF: seg2333:21A4j
					; seg2333:2222j ...
		mov	si, word_2826C
		call	sub_2625B
		add	word_2826C, 0Ch
		retn
sub_27938	endp

; ---------------------------------------------------------------------------
off_27945	dw offset loc_27984	; DATA XREF: seg2333:246Fr
		dw offset loc_279DE
		dw offset loc_27997
		dw offset loc_27992
		dw offset loc_279E5
		dw offset loc_279DE
		dw offset loc_279E5
		dw offset loc_279E5
		dw offset loc_279D9
		dw offset loc_279DE
		dw offset loc_279F6
		dw offset loc_27A01
		dw offset loc_27A01
		dw offset loc_279DE
		dw offset loc_27A01
		dw offset loc_27A01
; ---------------------------------------------------------------------------

loc_27965::				; CODE XREF: seg2333:221Aj
		mov	bh, 0
		mov	bl, cs:[bx+2]
		mov	si, word_2826C
		add	si, bx
		mov	bl, 18h
		and	bl, ch
		and	cl, 6
		or	bl, cl
		cld
		mov	cx, 6
		jmp	cs:off_27945[bx]
; ---------------------------------------------------------------------------

loc_27984::				; CODE XREF: seg2333:246Fj
					; DATA XREF: seg2333:off_27945o
		sub	word_2826C, 0Ch
		mov	di, word_2826C
		rep movsw
		jmp	loc_27BAC
; ---------------------------------------------------------------------------

loc_27992::				; CODE XREF: seg2333:246Fj
					; DATA XREF: seg2333:243Bo
		mov	di, 0Ch
		jmp	loc_2799A
; ---------------------------------------------------------------------------

loc_27997::				; CODE XREF: seg2333:246Fj
					; DATA XREF: seg2333:2439o
		mov	di, 0

loc_2799A::				; CODE XREF: seg2333:2485j
		mov	ax, off_28270
		sub	ax, 0Ch
		cmp	si, ax
		jz	loc_279B4
		xchg	di, si
		mov	ax, 4001h
		mov	cl, 0
		call	sub_2634D
		add	word_2826C, si
		jmp	loc_27A0D
; ---------------------------------------------------------------------------

loc_279B4::				; CODE XREF: seg2333:2492j
		add	di, 0Ch
		mov	dx, di
		mov	cx, si
		sub	cx, word_2826C
		jz	loc_279D3
		push	ss
		pop	es
		sub	si, 2
		mov	di, off_28270
		sub	di, 2
		std
		shr	cx, 1
		rep movsw
		cld

loc_279D3::				; CODE XREF: seg2333:24AFj
		add	word_2826C, dx
		jmp	loc_27A0D
; ---------------------------------------------------------------------------

loc_279D9::				; CODE XREF: seg2333:246Fj
					; DATA XREF: seg2333:2445o
		test	ch, 7
		jz	loc_27A0D

loc_279DE::				; CODE XREF: seg2333:246Fj
					; DATA XREF: seg2333:2437o ...
		mov	ch, 1
		call	sub_27C24
		jmp	loc_27A0D
; ---------------------------------------------------------------------------

loc_279E5::				; CODE XREF: seg2333:246Fj
					; DATA XREF: seg2333:243Do ...
		mov	di, word_2826C

loc_279E9::				; CODE XREF: seg2333:24E1j
		mov	ax, [di]
		xchg	ax, [si]
		stosw
		add	si, 2
		loop	loc_279E9
		jmp	loc_27BAC
; ---------------------------------------------------------------------------

loc_279F6::				; CODE XREF: seg2333:246Fj
					; DATA XREF: seg2333:2449o
		mov	di, si
		mov	si, word_2826C
		rep movsw
		jmp	loc_27BAC
; ---------------------------------------------------------------------------

loc_27A01::				; CODE XREF: seg2333:246Fj
					; DATA XREF: seg2333:244Bo ...
		mov	di, si
		mov	si, word_2826C
		rep movsw
		mov	word_2826C, si

loc_27A0D::				; CODE XREF: seg2333:24A2j
					; seg2333:24C7j ...
		jmp	loc_27BAC
; ---------------------------------------------------------------------------
byte_27A10	db 4			; DATA XREF: sub_27A82+1Ar
		db    4
		db    4
		db    4
		db    4
		db    4
		db    4
		db    4
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    4
		db    4
		db    8
		db    6
		db    8
		db    6
		db    4
		db    2
		db    0
		db  0Ah
		db    8
		db    4
		db    4
		db    4
		db  0Ah
		db    4
		db    4
off_27A30	dw offset sub_27A70	; DATA XREF: sub_27A82+2Fr
					; sub_27A82+45r ...
		dw offset sub_27A75
		dw offset sub_27A82
		dw offset sub_27A82
		dw offset sub_25FA9
		dw offset sub_25FE5
		dw offset sub_27A82
		dw offset sub_27A82
		dw offset sub_262D1
		dw offset loc_262E2
		dw offset sub_262F3
		dw offset sub_26304
		dw offset sub_26315
		dw offset sub_26326
		dw offset sub_26337
		dw offset sub_27A82
		dw offset sub_26EBE
		dw offset sub_26FB6
		dw offset sub_26C40
		dw offset sub_26D36
		dw offset loc_27A7A
		dw offset sub_27A82
		dw offset sub_27A82
		dw offset sub_27A82
		dw offset sub_25DE1
		dw offset loc_2706D
		dw offset loc_25D15
		dw offset sub_27A82
		dw offset sub_26847
		dw offset loc_26523
		dw offset sub_27A82
		dw offset sub_27A82

; =============== S U B	R O U T	I N E =======================================


sub_27A70	proc near		; CODE XREF: sub_27A82+2Fp
					; sub_27A82+45j ...
		xor	byte ptr [si+0Ah], 1
		retn
sub_27A70	endp


; =============== S U B	R O U T	I N E =======================================


sub_27A75	proc near		; CODE XREF: sub_27A82+2Fp
					; sub_27A82+45j ...
		mov	byte ptr [si+0Ah], 0
		retn
sub_27A75	endp

; ---------------------------------------------------------------------------

loc_27A7A::				; DATA XREF: seg2333:2548o
		push	si
		push	di
		call	sub_264EE
		pop	di
		pop	si
		retn

; =============== S U B	R O U T	I N E =======================================


sub_27A82	proc far		; CODE XREF: sub_27A82+2Fp
					; sub_27A82+45j ...
		mov	ch, 1
		call	sub_27C24
		jmp	loc_27BAC
; ---------------------------------------------------------------------------
		retn
; ---------------------------------------------------------------------------
off_27A8B	dw offset loc_27AAA	; DATA XREF: sub_27A82+23r
		dw offset loc_27AE1
		dw offset loc_27ABD
		dw offset loc_27ACC
		dw offset loc_27AE9
		dw offset loc_27AFC
; ---------------------------------------------------------------------------

loc_27A97::				; CODE XREF: seg2333:21A4j
					; seg2333:2222j
					; DATA XREF: ...
		mov	bx, 1Fh
		and	bl, ch
		mov	al, cs:byte_27A10[bx]
		cbw
		xchg	ax, di
		shl	bx, 1
		jmp	cs:off_27A8B[di]
; ---------------------------------------------------------------------------

loc_27AAA::				; CODE XREF: sub_27A82+23j
					; DATA XREF: sub_27A82:off_27A8Bo
		mov	di, word_2826C
		sub	di, 0Ch
		call	cs:off_27A30[bx]
		mov	word_2826C, di
		jmp	loc_27BAC
; ---------------------------------------------------------------------------

loc_27ABD::				; CODE XREF: sub_27A82+23j
					; DATA XREF: sub_27A82+Do
		mov	si, word_2826C
		mov	di, si
		mov	ax, 269Ch
		push	ax
		jmp	cs:off_27A30[bx]
; ---------------------------------------------------------------------------

loc_27ACC::				; CODE XREF: sub_27A82+23j
					; DATA XREF: sub_27A82+Fo
		mov	si, word_2826C
		mov	di, si
		sub	di, 0Ch
		call	cs:off_27A30[bx]
		mov	word_2826C, di
		jmp	loc_27BAC
; ---------------------------------------------------------------------------

loc_27AE1::				; CODE XREF: sub_27A82+23j
					; DATA XREF: sub_27A82+Bo
		add	word_2826C, 0Ch
		jmp	loc_27BAC
; ---------------------------------------------------------------------------

loc_27AE9::				; CODE XREF: sub_27A82+23j
					; DATA XREF: sub_27A82+11o
		mov	di, word_2826C
		lea	si, [di+0Ch]
		call	cs:off_27A30[bx]
		mov	word_2826C, si
		jmp	loc_27BAC
; ---------------------------------------------------------------------------

loc_27AFC::				; CODE XREF: sub_27A82+23j
					; DATA XREF: sub_27A82+13o
		mov	di, word_2826C
		lea	si, [di+0Ch]
		mov	ax, 269Ch
		push	ax
		jmp	cs:off_27A30[bx]
; ---------------------------------------------------------------------------

loc_27B0C::				; CODE XREF: seg2333:21A4j
					; seg2333:2222j
					; DATA XREF: ...
		and	ch, 1Fh
		cmp	ch, 3
		jnz	loc_27B69
		mov	word ptr aDivideErrorAbn+9, 2 ;	"ror\r\nAbnormal program termination\r\n"
		mov	word ptr aDivideErrorAbn+5, 6D65h ; "e error\r\nAbnormal program termination"...
		mov	word ptr aDivideErrorAbn+7, 8775h ; "error\r\nAbnormal program termination\r"...
		mov	word_28264, 0
		mov	di, off_28270
		mov	word_2826C, di
		mov	bx, off_2826E
		sub	bx, di
		neg	bx
		mov	ax, 4001h
		mov	cl, 0
		call	sub_2634D
		mov	byte ptr [di+7], 0C0h ;	'À'
		lea	si, [di+0Ah]
		sub	di, 2
		mov	cx, off_2826E
		sub	cx, di
		neg	cx
		shr	cx, 1
		std
		rep movsw
		mov	dataseg@, 4100h
		mov	word_28262, 33Fh
		jmp	loc_27B7A
; ---------------------------------------------------------------------------

loc_27B69::				; CODE XREF: sub_27A82+90j
		cmp	ch, 2
		jnz	loc_27B75
		mov	byte ptr dataseg@, 0
		jmp	loc_27B7A
; ---------------------------------------------------------------------------

loc_27B75::				; CODE XREF: sub_27A82+EAj
					; sub_27A82:loc_27B7Cj	...
		mov	ch, 1
		call	sub_27C24

loc_27B7A::				; CODE XREF: sub_27A82+E5j
					; sub_27A82+F1j
		jmp	loc_27BAC
; ---------------------------------------------------------------------------

loc_27B7C::				; CODE XREF: seg2333:21A4j
					; seg2333:2222j
					; DATA XREF: ...
		jmp	loc_27B75
; ---------------------------------------------------------------------------

loc_27B7E::				; CODE XREF: seg2333:21A4j
					; seg2333:2222j
					; DATA XREF: ...
		test	ch, 1Fh
		jnz	loc_27B75
		mov	ax, word_2826C
		sub	ax, off_28270
		mov	cl, 0Ch
		idiv	cl
		and	al, 7
		mov	cl, 3
		shl	al, cl
		mov	cx, dataseg@
		and	ch, 0C7h
		or	ch, al
		mov	[bp+10h], cx
		jmp	loc_27BAC
; ---------------------------------------------------------------------------
		mov	si, ss:4
		add	ss:0Ch,	si

loc_27BAC::				; CODE XREF: seg2333:2101j
					; seg2333:214Aj ...
		mov	ax, ss:0Eh
		cmp	ss:0Ch,	ax
		jb	loc_27BC6

loc_27BB7::				; CODE XREF: sub_27A82+152j
		mov	sp, ss:32h
		pop	es
		pop	di
		pop	si
		pop	bp
		pop	ds
		pop	bx
		pop	dx
		pop	cx
		pop	ax
		iret
; ---------------------------------------------------------------------------

loc_27BC6::				; CODE XREF: sub_27A82+133j
		mov	ch, 40h	; '@'
		mov	di, off_28270
		mov	word_2826C, di
		call	sub_27C24
		int	3		; Trap to Debugger
		jmp	loc_27BB7
sub_27A82	endp ; sp-analysis failed

; ---------------------------------------------------------------------------
		dw offset loc_270FD
		dw offset loc_27101
		dw offset loc_27105
		dw offset loc_270FD
		dw offset loc_27101
		dw offset loc_27105
		dw offset loc_271E6
		dw offset loc_27247
		dw offset loc_27259
		dw offset loc_2726B
		dw offset loc_272B8
		dw offset loc_272BD
		dw offset loc_272C8
; ---------------------------------------------------------------------------

e086_shortcut:				; DATA XREF: sub_24D9+13Bo
					; seg2333:2708r
		sti
		cld
		push	ax
		push	cx
		push	dx
		push	bx
		push	ds
		push	bp
		push	si
		push	di
		push	es
		mov	bp, sp
		mov	ss:32h,	sp
		lds	si, [bp+12h]
		lodsb
		mov	[bp+12h], si
		mov	di, ss
		mov	ds, di
		cbw
		xchg	ax, bx
		cmp	bl, 0E6h ; 'æ'
		jb	loc_27C1D
		mov	ax, offset loc_27BAC
		push	ax
		jmp	word ptr cs:e086_shortcut[bx]
; ---------------------------------------------------------------------------

loc_27C1D::				; CODE XREF: seg2333:2702j
		mov	ch, 1
		call	sub_27C24
		jmp	loc_27BAC

; =============== S U B	R O U T	I N E =======================================


sub_27C24	proc near		; CODE XREF: sub_25522+77p
					; sub_25603:loc_25769p	...
		push	ax
		push	cx
		push	ds
		push	ss
		pop	ds
		mov	al, byte ptr dataseg@
		mov	cl, byte ptr word_28262
		and	cl, 7Fh
		xor	cl, 7Fh
		or	al, ch
		mov	ah, al
		and	ah, cl
		xor	ah, al
		test	ah, 8
		jz	loc_27C45
		or	al, 20h

loc_27C45::				; CODE XREF: sub_27C24+1Dj
		test	al, cl
		jz	loc_27C58
		or	al, 80h
		mov	byte ptr dataseg@, al
		and	al, cl
		cmp	al, 20h	; ' '
		jnz	loc_27C61
		pop	ds
		pop	cx
		pop	ax
		retn
; ---------------------------------------------------------------------------

loc_27C58::				; CODE XREF: sub_27C24+23j
		and	al, 7Fh
		mov	byte ptr dataseg@, al
		pop	ds
		pop	cx
		pop	ax
		retn
; ---------------------------------------------------------------------------

loc_27C61::				; CODE XREF: seg2333:loc_2765Dj
					; sub_27C24+2Ej
		call	__fpuint
		mov	ah, 35h
		int	21h		; DOS -	2+ - GET INTERRUPT VECTOR
					; AL = interrupt number
					; Return: ES:BX	= value	of interrupt vector
		mov	ss:40h,	bx
		mov	word ptr ss:42h, es
		mov	sp, ss:32h
		pop	es
		pop	di
		pop	si
		pop	bp
		pop	ds
		pop	bx
		pop	dx
		pop	cx
		pop	ax
		jmp	dword ptr ss:40h
sub_27C24	endp

; ---------------------------------------------------------------------------
		db 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
seg2333		ends

; ===========================================================================

; Segment type:	Pure code
seg25ab		segment	byte public 'CODE' use16
		assume cs:seg25ab
		assume es:nothing, ss:nothing, ds:seg2608, fs:nothing, gs:nothing
tbyte_27C90	REAL10 0.78539816339744830963 ; DATA XREF: seg25ab:0084r
 					; seg25ab:0157r
tbyte_27C9A	REAL10 1.5707963267948966193 ; DATA	XREF: seg25ab:014Cr
 					; seg25ab:017Dr
flt_27CA4	REAL8 -5.1110893e38	; DATA XREF: seg25ab:0067r
 					; seg25ab:0075r
flt_27CA8	REAL8 -5.1117124e38	; DATA XREF: seg25ab:01D7r
 		db 0, 4Ah, 0C0h, 0FFh
 flt_27CB0	dd 0.5			; DATA XREF: seg25ab:026Cr
tbyte_27CB4	REAL10 1.4142135623730950489 ; DATA	XREF: seg25ab:02CCr
flt_27CBE	REAL8 3.4028237e38		; DATA XREF: seg25ab:011Dr
					; seg25ab:0255r
; ---------------------------------------------------------------------------
		mov	cl, 0
		jmp	loc_27CCC
; ---------------------------------------------------------------------------
		mov	cl, 2
		jmp	loc_27CCC
; ---------------------------------------------------------------------------
		mov	cl, 4

loc_27CCC::				; CODE XREF: seg25ab:0034j
					; seg25ab:0038j
		wait
		fxam
		push	bp
		mov	bp, sp
		lea	sp, [bp-2]
		fstsw	word ptr [bp-2]
		wait
		mov	ah, [bp-1]
		sahf
		jb	loc_27CEF
		jnz	loc_27D10
		cmp	cl, 2
		jnz	loc_27CED
		wait
		fstp	st
		wait
		fld1

loc_27CED::				; CODE XREF: seg25ab:0055j
		jmp	loc_27D0D
; ---------------------------------------------------------------------------

loc_27CEF::				; CODE XREF: seg25ab:004Ej
		jz	loc_27CFF
		jnp	loc_27CFF
		wait
		fstp	st
		wait
		fld	cs:flt_27CA4
		wait
		ftst

loc_27CFF::				; CODE XREF: seg25ab:loc_27CEFj
					; seg25ab:0061j
		jmp	loc_27D0D
; ---------------------------------------------------------------------------

loc_27D01::				; CODE XREF: seg25ab:009Ej
		wait
		fcompp
		wait
		fld	cs:flt_27CA4
		wait
		ftst

loc_27D0D::				; CODE XREF: seg25ab:loc_27CEDj
					; seg25ab:loc_27CFFj
		jmp	loc_27DB7
; ---------------------------------------------------------------------------

loc_27D10::				; CODE XREF: seg25ab:0050j
		wait
		fabs
		wait
		fld	cs:tbyte_27C90
		wait
		fxch	st(1)
		wait
		fprem
		mov	ch, 2
		and	ch, ah
		shr	ch, 1
		fstsw	word ptr [bp-2]
		wait
		mov	ah, [bp-1]
		sahf
		jp	loc_27D01
		mov	al, 3
		and	al, ah
		shl	ah, 1
		shl	ah, 1
		rcl	al, 1
		add	al, 0FCh ; 'ü'
		rcl	al, 1
		cmp	cl, 2
		jnz	loc_27D47
		add	al, cl
		mov	ch, 0

loc_27D47::				; CODE XREF: seg25ab:00B1j
		and	al, 7
		test	al, 1
		jz	loc_27D52
		wait
		fsubp	st(1), st
		jmp	loc_27D55
; ---------------------------------------------------------------------------

loc_27D52::				; CODE XREF: seg25ab:00BBj
		wait
		fstp	st(1)

loc_27D55::				; CODE XREF: seg25ab:00C0j
		wait
		fptan
		cmp	cl, 4
		jz	loc_27D86
		test	al, 3
		jp	loc_27D64
		wait
		fxch	st(1)

loc_27D64::				; CODE XREF: seg25ab:00CFj
		wait
		fld	st(1)
		wait
		fmul	st, st
		wait
		fxch	st(1)
		wait
		fmul	st, st
		wait
		faddp	st(1), st
		wait
		fsqrt
		shr	al, 1
		shr	al, 1
		xor	al, ch
		jz	loc_27D81
		wait
		fchs

loc_27D81::				; CODE XREF: seg25ab:00ECj
		wait
		fdivp	st(1), st
		jmp	loc_27DB7
; ---------------------------------------------------------------------------

loc_27D86::				; CODE XREF: seg25ab:00CBj
		mov	ah, al
		shr	ah, 1
		and	ah, 1
		xor	ah, ch
		jz	loc_27D94
		wait
		fchs

loc_27D94::				; CODE XREF: seg25ab:00FFj
		test	al, 3
		jp	loc_27DB4
		wait
		fxch	st(1)
		wait
		ftst
		fstsw	word ptr [bp-2]
		wait
		test	byte ptr [bp-1], 40h
		jz	loc_27DB4
		wait
		fcompp
		wait
		fld	cs:flt_27CBE
		jmp	loc_27DB7
; ---------------------------------------------------------------------------

loc_27DB4::				; CODE XREF: seg25ab:0106j
					; seg25ab:0117j
		wait
		fdivp	st(1), st

loc_27DB7::				; CODE XREF: seg25ab:loc_27D0Dj
					; seg25ab:00F4j ...
		mov	sp, bp
		pop	bp
		retn
; ---------------------------------------------------------------------------
		wait
		fxam
		push	bp
		mov	bp, sp
		lea	sp, [bp-2]
		fstsw	word ptr [bp-2]
		wait
		mov	ah, [bp-1]
		sahf
		xchg	ax, cx
		jb	loc_27DD4
		jnz	loc_27DEE
		jmp	loc_27E20
; ---------------------------------------------------------------------------

loc_27DD4::				; CODE XREF: seg25ab:013Ej
		jz	loc_27E20
		jnp	loc_27E20
		wait
		fstp	st
		wait
		fld	cs:tbyte_27C9A
		jmp	loc_27E18
; ---------------------------------------------------------------------------

loc_27DE3::				; CODE XREF: seg25ab:0170j
		wait
		fcompp
		wait
		fld	cs:tbyte_27C90
		jmp	loc_27E18
; ---------------------------------------------------------------------------

loc_27DEE::				; CODE XREF: seg25ab:0140j
		wait
		fabs
		wait
		fld1
		wait
		fcom	st(1)
		fstsw	word ptr [bp-2]
		wait
		mov	ah, [bp-1]
		sahf
		jz	loc_27DE3
		jnb	loc_27E07
		wait
		fxch	st(1)

loc_27E07::				; CODE XREF: seg25ab:0172j
		wait
		fpatan
		jnb	loc_27E18
		wait
		fld	cs:tbyte_27C9A
		wait
		fsubp	st(1), st
		xor	ch, 2

loc_27E18::				; CODE XREF: seg25ab:0151j
					; seg25ab:015Cj ...
		test	ch, 2
		jz	loc_27E20
		wait
		fchs

loc_27E20::				; CODE XREF: seg25ab:0142j
					; seg25ab:loc_27DD4j ...
		mov	sp, bp
		pop	bp
		retn
; ---------------------------------------------------------------------------
		wait
		fld1
		jmp	loc_27E31
; ---------------------------------------------------------------------------
		wait
		fldlg2
		jmp	loc_27E31
; ---------------------------------------------------------------------------
		wait
		fldln2

loc_27E31::				; CODE XREF: seg25ab:0197j
					; seg25ab:019Cj
		wait
		fxch	st(1)
		push	bp
		mov	bp, sp
		wait
		fxam
		lea	sp, [bp-0Ah]
		fstsw	word ptr [bp-0Ah]
		wait
		mov	ah, [bp-9]
		sahf
		jb	loc_27E54
		jz	loc_27E4F
		test	ah, 2
		jz	loc_27E71

loc_27E4F::				; CODE XREF: seg25ab:01B8j
		wait
		fstp	st
		jmp	loc_27E63
; ---------------------------------------------------------------------------

loc_27E54::				; CODE XREF: seg25ab:01B6j
		jz	loc_27E6C
		wait
		fstp	st(1)
		jnp	loc_27E6C
		wait
		fstp	st(1)
		test	ah, 2
		jz	loc_27E95

loc_27E63::				; CODE XREF: seg25ab:01C2j
		wait
		fstp	st
		wait
		fld	cs:flt_27CA8

loc_27E6C::				; CODE XREF: seg25ab:loc_27E54j
					; seg25ab:01C9j
		wait
		ftst
		jmp	loc_27E95
; ---------------------------------------------------------------------------

loc_27E71::				; CODE XREF: seg25ab:01BDj
		wait
		fld	st
		wait
		fstp	tbyte ptr [bp-0Ah]
		wait
		cmp	word ptr [bp-2], 3FFFh
		jnz	loc_27E92
		cmp	word ptr [bp-4], 8000h
		jnz	loc_27E92
		wait
		fld1
		wait
		fsubp	st(1), st
		wait
		fyl2xp1
		jmp	loc_27E95
; ---------------------------------------------------------------------------

loc_27E92::				; CODE XREF: seg25ab:01EEj
					; seg25ab:01F5j
		wait
		fyl2x

loc_27E95::				; CODE XREF: seg25ab:01D1j
					; seg25ab:01DFj ...
		mov	sp, bp
		pop	bp
		retn
; ---------------------------------------------------------------------------
		sub	cx, cx
		jmp	loc_27EAF
; ---------------------------------------------------------------------------
		wait
		fldl2t
		mov	cl, 1
		wait
		fxch	st(1)
		jmp	loc_27EAF
; ---------------------------------------------------------------------------
		wait
		fldl2e
		mov	cl, 1
		wait
		fxch	st(1)

loc_27EAF::				; CODE XREF: seg25ab:020Bj
					; seg25ab:0215j
		wait
		fxam
		push	bp
		mov	bp, sp
		lea	sp, [bp-4]
		fstsw	word ptr [bp-4]
		jcxz	loc_27EC1
		wait
		fxch	st(1)

loc_27EC1::				; CODE XREF: seg25ab:022Cj
		wait
		mov	ah, [bp-3]
		sahf
		jb	loc_27ED8
		jnz	loc_27EF3
		wait
		fstp	st
		jcxz	loc_27ED2
		wait
		fstp	st

loc_27ED2::				; CODE XREF: seg25ab:023Dj
		wait
		fld1
		jmp	loc_27F7C
; ---------------------------------------------------------------------------

loc_27ED8::				; CODE XREF: seg25ab:0236j
		jcxz	loc_27EDD
		wait
		fstp	st

loc_27EDD::				; CODE XREF: seg25ab:loc_27ED8j
		jz	loc_27EED
		jnp	loc_27EED
		wait
		fstp	st
		wait
		fld	cs:flt_27CBE
		jmp	loc_27F71
; ---------------------------------------------------------------------------

loc_27EED::				; CODE XREF: seg25ab:loc_27EDDj
					; seg25ab:024Fj
		wait
		ftst
		jmp	loc_27F7C
; ---------------------------------------------------------------------------

loc_27EF3::				; CODE XREF: seg25ab:0238j
		jcxz	loc_27EF8
		wait
		fmulp	st(1), st

loc_27EF8::				; CODE XREF: seg25ab:loc_27EF3j
		wait
		fabs
		wait
		fcom	cs:flt_27CB0
		fstsw	word ptr [bp-4]
		wait
		test	byte ptr [bp-3], 41h
		jz	loc_27F17
		wait
		f2xm1
		wait
		fld1
		wait
		faddp	st(1), st
		jmp	loc_27F71
; ---------------------------------------------------------------------------

loc_27F17::				; CODE XREF: seg25ab:027Aj
		wait
		fld1
		wait
		fld	st(1)
		fstcw	word ptr [bp-4]
		wait
		fscale
		or	byte ptr [bp-3], 0Fh
		wait
		fldcw	word ptr [bp-4]
		wait
		frndint
		and	byte ptr [bp-3], 0F3h
		wait
		fldcw	word ptr [bp-4]
		wait
		fist	word ptr [bp-2]
		wait
		fxch	st(1)
		wait
		fchs
		wait
		fxch	st(1)
		wait
		fscale
		wait
		fstp	st(1)
		wait
		fsubp	st(1), st
		wait
		f2xm1
		wait
		fld1
		wait
		faddp	st(1), st
		shr	word ptr [bp-2], 1
		jnb	loc_27F64
		wait
		fld	cs:tbyte_27CB4
		wait
		fmulp	st(1), st

loc_27F64::				; CODE XREF: seg25ab:02C9j
		wait
		fild	word ptr [bp-2]
		wait
		fxch	st(1)
		wait
		fscale
		wait
		fstp	st(1)

loc_27F71::				; CODE XREF: seg25ab:025Aj
					; seg25ab:0285j
		test	ah, 2
		jz	loc_27F7C
		wait
		fld1
		wait
		fdivrp	st(1), st

loc_27F7C::				; CODE XREF: seg25ab:0245j
					; seg25ab:0260j ...
		mov	sp, bp
		pop	bp
		retn
		assume es:nothing, ds:seg0000

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_27F80	proc near		; CODE XREF: e087_entry+10p
					; e087_entry:loc_2802Ap
		push	bx
		mov	al, ss:7
		mov	bx, ds

loc_27F87::
		and	bl, 0F8h
		push	ds
		mov	ds, word ptr ss:0Ah
		assume ds:nothing
		xor	[bx+5],	al
		pop	ds
		assume ds:seg0000
		pop	bx
		retn
sub_27F80	endp

		assume ds:seg2608

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

e087_entry	proc far		; DATA XREF: sub_24D9+11Bo

var_2		= word ptr -2
arg_1		= byte ptr  7

		push	bp
		mov	bp, sp
		push	ax
		push	si
		push	ds
		test	[bp+arg_1], 2
		jz	loc_27FA3
		sti

loc_27FA3::				; CODE XREF: e087_entry+Aj
		lds	si, [bp+2]
		assume ds:seg0000
		call	sub_27F80
		mov	ax, [si-1]
		sub	al, 34h	; '4'
		cmp	al, 8
		jnb	loc_28007
		cmp	ax, 0E303h
		jz	loc_27FDC
		cmp	ax, 0E007h
		jnz	loc_27FCD
		cmp	byte ptr ss:6, 2
		jge	loc_27FCD
		fstsw	[bp+var_2]
		inc	word ptr [bp+2]
		jmp	loc_2802A
; ---------------------------------------------------------------------------

loc_27FCD::				; CODE XREF: e087_entry+24j
					; e087_entry+2Cj
		sub	si, 2
		mov	byte ptr [si], 9Bh ; ''
		add	byte ptr [si+1], 0A4h ;	'¤'

loc_27FD7::				; CODE XREF: e087_entry+A7j
		mov	[bp+2],	si
		jmp	loc_2802A
; ---------------------------------------------------------------------------

loc_27FDC::				; CODE XREF: e087_entry+1Fj
		fninit
		inc	word ptr [bp+2]
		mov	word ptr ss:0, 4100h
		mov	word ptr ss:2, 3Fh ; '?'
		mov	word ptr ss:24h, 0
		mov	ax, ss:10h
		mov	ss:0Ch,	ax
		mov	word ptr ss:4, 0
		jmp	loc_2802A
; ---------------------------------------------------------------------------

loc_28007::				; CODE XREF: e087_entry+1Aj
		ja	loc_28032
		test	ah, 20h
		jnz	loc_2803F
		sub	si, 2
		mov	[bp+2],	si
		mov	byte ptr [si], 9Bh ; ''
		inc	si
		mov	al, ah
		and	ax, 7C0h
		shr	al, 1
		shr	al, 1
		shr	al, 1
		xor	al, 18h
		add	ax, 0D826h
		mov	[si], ax

loc_2802A::				; CODE XREF: e087_entry+35j
					; e087_entry+44j ...
		call	sub_27F80
		pop	ds
		assume ds:seg2608
		pop	si
		pop	ax
		pop	bp
		iret
; ---------------------------------------------------------------------------

loc_28032::				; CODE XREF: e087_entry:loc_28007j
		cmp	al, 9
		ja	loc_2803F
		sub	si, 2
		mov	word ptr [si], 9B90h
		jmp	loc_27FD7
; ---------------------------------------------------------------------------

loc_2803F::				; CODE XREF: e087_entry+76j
					; e087_entry+9Ej
		int	3		; Trap to Debugger
		jmp	loc_2802A
e087_entry	endp

; ---------------------------------------------------------------------------
		db 32h,	0, 36h,	0, 3Ah,	0, 2Bh,	1, 9Eh,	1, 94h,	1, 99h
		db 1, 17h, 2, 9, 2, 0Dh, 2
; ---------------------------------------------------------------------------

e087_shortcut:				; DATA XREF: sub_24D9+125o
		sti
		push	ax
		push	si
		push	es
		push	bp
		mov	bp, sp
		les	si, [bp+8]
		assume es:nothing
		lods	byte ptr es:[si]
		mov	[bp+8],	si
		cbw
		xchg	ax, si
		push	cx
		call	word ptr cs:[si+3C6h]
		pop	cx
		pop	bp
		pop	es
		pop	si
		pop	ax
		iret
; ---------------------------------------------------------------------------
		db 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
; ---------------------------------------------------------------------------
; START	OF FUNCTION CHUNK FOR e087_trap

loc_28080::				; CODE XREF: e087_trap-2Aj
					; e087_trap+1Dj
		pop	di
		pop	es
		pop	dx
		pop	cx
		pop	bx
		pop	si
		pop	ds
		clc
		retf
; ---------------------------------------------------------------------------

loc_28089::				; CODE XREF: e087_trap+10j
		mov	al, byte ptr word_28262
		mov	ah, byte ptr dataseg@
		fnclex			; (emulator call)
		test	ah, 80h
		jz	loc_28080
		not	al
		and	al, ah
		jmp	loc_281C8
; ---------------------------------------------------------------------------

loc_2809F::				; CODE XREF: e087_trap+40j
		les	di, [si+6]
		test	bl, 8
		jnz	loc_280AF
		mov	bx, es
		and	bx, 0F000h
		mov	es, bx
		assume es:nothing

loc_280AF::				; CODE XREF: e087_trap-1Bj
		test	byte ptr es:[di], 80h
		jnz	loc_280B6
		inc	di

loc_280B6::				; CODE XREF: e087_trap-Dj
		mov	bx, es:[di]
		xchg	bh, bl
		jmp	loc_28102
; END OF FUNCTION CHUNK	FOR e087_trap
; ---------------------------------------------------------------------------
		jmp	loc_28114
; ---------------------------------------------------------------------------
		db 90h

; =============== S U B	R O U T	I N E =======================================


e087_trap	proc far		; CODE XREF: seg0000:02E1P

; FUNCTION CHUNK AT 03F0 SIZE 0000003D BYTES

		push	ds
		push	si
		push	bx
		push	cx
		push	dx
		push	es
		push	di
		mov	ds, ax
		mov	al, byte ptr word_28266
		or	al, al
		mov	bx, ax
		jz	loc_28089
		mov	si, 12h
		fnstenv	byte ptr [si]
		wait
		mov	ax, [si+2]
		test	al, 80h
		jz	loc_28080
		fclex
		mov	dx, ax
		mov	al, [si]
		mov	dh, dl
		or	al, 40h
		and	dl, al
		and	dl, 7Fh
		mov	[si+2],	dl
		wait
		fldenv	byte ptr [si]
		not	al
		and	al, dh
		or	bl, byte ptr word_28266+1
		cmp	bl, 3
		jge	loc_2809F

loc_28102::				; CODE XREF: e087_trap-5j
		and	bh, 7
		mov	dh, bl
		and	dh, 0C0h
		cmp	dh, 0C0h ; 'À'
		jz	loc_28112
		and	bl, 38h

loc_28112::				; CODE XREF: e087_trap+4Dj
		wait
		sti

loc_28114::				; CODE XREF: seg25ab:042Dj
		test	al, 2
		jz	loc_2816D
		mov	cx, 8

loc_2811B::				; CODE XREF: e087_trap+61j
		call	sub_281DB
		wait
		fincstp
		loop	loc_2811B
		mov	ax, bx
		shr	ax, 1
		and	al, 9Ch
		cmp	al, 80h	; ''
		jz	loc_28135
		cmp	al, 94h	; ''
		jz	loc_28135
		and	al, 98h
		cmp	al, 8

loc_28135::				; CODE XREF: e087_trap+6Bj
					; e087_trap+6Fj
		jz	loc_2816B
		fnstcw	word ptr aDivideErrorAbn+1 ; "ivide error\r\nAbnormal program termina"...
		wait
		or	byte ptr aDivideErrorAbn+1, 2 ;	"ivide error\r\nAbnormal program termina"...
		wait
		fldcw	word ptr aDivideErrorAbn+1 ; "ivide error\r\nAbnormal program termina"...
		les	di, [si+0Ah]
		assume es:nothing
		cmp	bx, 30h	; '0'
		jnz	loc_28154
		wait
		fld	dword ptr es:[di]
		jmp	loc_2815E
; ---------------------------------------------------------------------------

loc_28154::				; CODE XREF: e087_trap+8Cj
		cmp	bx, 430h
		jnz	loc_28164
		wait
		fld	qword ptr es:[di]

loc_2815E::				; CODE XREF: e087_trap+92j
		call	sub_281DB
		mov	bx, 0DEF9h

loc_28164::				; CODE XREF: e087_trap+98j
		wait
		mov	di, word_2826C
		jmp	loc_2819E
; ---------------------------------------------------------------------------

loc_2816B::				; CODE XREF: e087_trap:loc_28135j
		jmp	loc_281B6
; ---------------------------------------------------------------------------

loc_2816D::				; CODE XREF: e087_trap+56j
		mov	ah, byte ptr word_28262
		not	ah
		and	ah, al
		and	ah, 7Fh
		jnz	loc_281C8
		test	al, 5
		jnz	loc_2818C
		test	al, 18h
		jz	loc_281BA
		mov	ax, bx
		shr	ax, 1
		and	al, 0E8h
		cmp	al, 88h	; ''
		jnz	loc_281BA

loc_2818C::				; CODE XREF: e087_trap+BCj
		fnstcw	word ptr aDivideErrorAbn+1 ; "ivide error\r\nAbnormal program termina"...
		wait
		mov	ax, word ptr aDivideErrorAbn+1 ; "ivide	error\r\nAbnormal program termina"...
		or	byte ptr aDivideErrorAbn+1, 3Fh	; "ivide error\r\nAbnormal program termina"...
		wait
		fldcw	word ptr aDivideErrorAbn+1 ; "ivide error\r\nAbnormal program termina"...

loc_2819E::				; CODE XREF: e087_trap+A9j
		push	cs
		call	near ptr sub_28228
		add	sp, 0Ah
		fstsw	word ptr aDivideErrorAbn+1 ; "ivide error\r\nAbnormal program termina"...
		fclex
		mov	ax, word ptr aDivideErrorAbn+1 ; "ivide	error\r\nAbnormal program termina"...
		and	al, 3Fh
		or	byte ptr aCopyright1991B+12h, al ; "land Intl."

loc_281B6::				; CODE XREF: e087_trap:loc_2816Bj
		wait
		fldcw	word ptr [si]
		clc

loc_281BA::				; CODE XREF: e087_trap+C0j
					; e087_trap+CAj ...
		pop	di
		pop	es
		pop	dx
		pop	cx
		pop	bx
		pop	si
		pop	ds
		jb	locret_281C7
		pop	ax
		pop	ax
		pop	ax
		iret
; ---------------------------------------------------------------------------

locret_281C7::				; CODE XREF: e087_trap+101j
		retf
; ---------------------------------------------------------------------------

loc_281C8::				; CODE XREF: e087_trap-24j
					; e087_trap+B8j
		xor	dx, dx
		mov	bx, ax

loc_281CC::				; CODE XREF: e087_trap+10Fj
		inc	dx
		shr	bx, 1
		jnb	loc_281CC
		mov	word_28268, dx
		mov	ax, 8
		stc
		jmp	loc_281BA
e087_trap	endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================


sub_281DB	proc near		; CODE XREF: e087_trap:loc_2811Bp
					; e087_trap:loc_2815Ep
		wait
		fxam
		fstsw	word ptr aDivideErrorAbn+1 ; "ivide error\r\nAbnormal program termina"...
		wait
		mov	ah, byte ptr aDivideErrorAbn+2 ; "vide error\r\nAbnormal program terminat"...
		sahf
		jnb	loc_281EE
		jnz	loc_281F0
		retn
; ---------------------------------------------------------------------------

loc_281EE::				; CODE XREF: sub_281DB+Ej
		jz	loc_281F5

loc_281F0::				; CODE XREF: sub_281DB+10j
		jb	locret_281F4
		jnp	loc_281FC

locret_281F4::				; CODE XREF: sub_281DB:loc_281F0j
		retn
; ---------------------------------------------------------------------------

loc_281F5::				; CODE XREF: sub_281DB:loc_281EEj
		wait
		fstp	st
		wait
		fldz
		retn
; ---------------------------------------------------------------------------

loc_281FC::				; CODE XREF: sub_281DB+17j
		wait
		fstp	tbyte ptr aCopyright1991B+14h ;	"nd Intl."
		wait
		fild	qword ptr aCopyright1991B+14h ;	"nd Intl."
		mov	ax, word ptr aCopyright1991B+1Ch ; ""
		mov	dx, ax
		and	dh, 80h
		wait
		fstp	tbyte ptr aCopyright1991B+14h ;	"nd Intl."
		xor	ah, dh
		wait
		add	ax, word ptr aCopyright1991B+1Ch ; ""
		sub	ax, 403Eh
		xor	ah, dh
		mov	word ptr aCopyright1991B+1Ch, ax ; ""
		wait
		fld	tbyte ptr aCopyright1991B+14h ;	"nd Intl."
		retn
sub_281DB	endp


; =============== S U B	R O U T	I N E =======================================


sub_28228	proc far		; CODE XREF: e087_trap+DFp
		mov	word_2826C, di
		mov	dx, 0EA90h
		push	dx
		mov	dx, bx
		and	bl, 0C0h
		cmp	bl, 0C0h ; 'À'
		jz	loc_2823D
		or	dl, 7

loc_2823D::				; CODE XREF: sub_28228+10j
		or	dh, 0D8h
		xchg	dh, dl
		push	dx
		mov	dx, 269Bh
		push	dx
		mov	dx, ss
		xor	dl, byte ptr word_28266+1
		push	dx
		mov	dx, sp
		add	dx, 2
		push	dx
		les	bx, [si+0Ah]
		retf
sub_28228	endp ; sp-analysis failed

; ---------------------------------------------------------------------------
		db 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
seg25ab		ends

; ===========================================================================

; Segment type:	Pure data
seg2608		segment	para public 'DATA' use16
		assume cs:seg2608
dataseg@	dw 0			; DATA XREF: sub_3FBF+20r sub_2782F+6w ...
word_28262	dw 0			; DATA XREF: seg2333:1DEDr
					; seg2333:1E00w ...
word_28264	dw 6F42h		; DATA XREF: _farmalloc+71o
					; seg2333:22CBw ...
word_28266	dw 6C72h		; DATA XREF: e087_trap+9r
					; e087_trap+39r ...
word_28268	dw 6E61h		; DATA XREF: e087_trap+111w
		dw 2064h
word_2826C	dw 2B43h		; DATA XREF: seg2333:0801r
					; seg2333:0823r ...
off_2826E	dw offset loc_420A+1	; DATA XREF: sub_333C+17r
					; sub_27A82+B2r ...
off_28270	dw offset sub_420D	; DATA XREF: sub_27843+6r sub_278C7r ...
aCopyright1991B	db 'Copyright 1991 Borland Intl.',0
aDivideErrorAbn	db 'Divide error',0Dh,0Ah ; DATA XREF: e087_trap+77w
					; e087_trap+7Cw ...
		db 'Abnormal program termination',0Dh,0Ah
__int0vector	dd 0			; DATA XREF: sub_235D+6w
					; __restorezero+4r ...
__int4vector	dd 0			; DATA XREF: sub_235D+13w
					; __restorezero+Fr ...
__int5vector	dd 0			; DATA XREF: sub_235D+20w
					; __restorezero+1Ar ...
__int6vector	dd 0			; DATA XREF: sub_235D+2Dw
					; __restorezero+25r ...
; int _c0argc
__c0argc	dw 0			; DATA XREF: start+148r
					; unknown_libname_3+116w
; char **_c0argv
__c0argv	dd 0			; DATA XREF: start+144r
					; unknown_libname_3+122w ...
; char **_c0environ
__c0environ	dd 0			; DATA XREF: start+13Cr start+138r
__envlng	dw 0			; DATA XREF: start+46w
					; unknown_libname_3+2Br
__envseg	dw 0			; DATA XREF: start+1Dw	start+28r ...
__envsize	dw 0			; DATA XREF: start+55w
; unsigned int _psp
__psp		dw 0			; DATA XREF: start+19w	start+8Dr ...
; unsigned int _version
__version	db 0			; DATA XREF: start+16w	start+C5r ...
; unsigned __int8 _osminor
__osminor	db 0			; DATA XREF: start+CEr
; int errno
_errno		dw 0			; DATA XREF: __ioerror:loc_2F48w
					; _perror+6r ...
__starttime	dd 0			; DATA XREF: start+110w _clock+3Dr ...
___brklvl	dw offset unk_2D704
__heapbase	dd 0			; DATA XREF: __brk+7r sub_420D+13r ...
__brklvl	dd 0			; DATA XREF: sub_4120+22w __sbrk+10r ...
__heaptop	dd 0			; DATA XREF: sub_4120+69w __brk+1Ar ...
		db 0
_gun_pieces_xy	db  80h	; 
		db  97h	; 
		db  92h	; 
		db  97h	; 
		db  9Ch	; 
		db  97h	; 
		db 0ABh	; «
		db  97h	; 
_all_messages	dd aYouNeedTheKeyF	; "You need the	key for	this door."
		dd aYouGotTheKey	; "You got the key!"
		dd aThink		; "Think!"
		dd aExtraFirePower	; "Extra fire power added!"
		dd aAutoFireAdded	; "Auto-fire added!"
		dd aWarningAirIsLo	; "WARNING: Air	is low."
		dd aWatchOutForTho	; "Watch out for those piranas!"
		dd aTryGoingInThat	; "Try going in	that drain hole!"
		dd aWarningJasonPo	; "WARNING: JASON power	low."
		dd aWarningShieldI	; "WARNING: Shield is low."
		dd aShootTheBarrel	; "Shoot the barrels!  They may\ncontain g"...
		dd aYouGotTheJason	; "You got the JASON sub!  To\ncontrol the"...
		dd aCollectAllTheW	; "Collect all the weapon\npieces to get t"...
		dd aToEnterACavePr	; "To enter a cave press\nAlt or Ctrl."
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
_all_projectiles dd aFire1_1		; "fire1"
		dd aMsl_sm_l_0		; "msl_sm.l"
		dd aMsl_sm_l_1		; "msl_sm.l"
		db 1
		db 0Ah
		db 0
		db    0
		dw 0
		dw 0
		db 1
		db    0
		dd aFire1_2		; "fire1"
		dd aMsl_tpl_l_0		; "msl_tpl.l"
		dd aMsl_tpr_l_0		; "msl_tpr.l"
		db    2
		db  0Ch
		db    1
		db    0
		db    0
		db    0
		db    0
		db    0
		db    1
		db    0
		dd aFire2_2		; "fire2"
		dd aMsl_rkl_l_0		; "msl_rkl.l"
		dd aMsl_rkr_l_0		; "msl_rkr.l"
		db    4
		db  0Eh
		db    2
		db    0
		db    0
		db    0
		db    0
		db    0
		db    1
		db    0
		dd aFire2_3		; "fire2"
		dd aMsl_bigl_l_0	; "msl_bigl.l"
		dd aMsl_bigr_l_0	; "msl_bigr.l"
		db    6
		db  0Ah
		db    2
		db    0
		db    0
		db    0
		db    0
		db    0
		db    1
		db    0
		dd aFire2_4		; "fire2"
		dd aMsl_hbl_l_0		; "msl_hbl.l"
		dd aMsl_hbr_l_0		; "msl_hbr.l"
		db  0Ah
		db  0Fh
		db    2
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		dd aFire2_5		; "fire2"
		dd aMsl_str_l_0		; "msl_str.l"
		dd aMsl_str_l_1		; "msl_str.l"
		db    6
		db  0Eh
		db    2
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		dd aTulip_0		; "tulip"
		dd aMsl_pea_l_0		; "msl_pea.l"
		dd aMsl_pea_l_1		; "msl_pea.l"
		db    7
		db    8
		db    0
		db    0
		dd aDirhit_4		; "dirhit"
		db    0
		db    0
		dd aFire1_3		; "fire1"
		dd aMsl_spt_l_0		; "msl_spt.l"
		dd aMsl_spt_l_1		; "msl_spt.l"
		db    6
		db    5
		db    0
		db    0
		dd aDirhit_5		; "dirhit"
		db 0
		db    0
		dd aSwish_2		; "swish"
		dd aMsl_arwl_l_0	; "msl_arwl.l"
		dd aMsl_arwr_l_0	; "msl_arwr.l"
		db    5
		db    8
		db    3
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		dd aFire1_4		; "fire1"
		dd aMsl_red_l_0		; "msl_red.l"
		dd aMsl_red_l_1		; "msl_red.l"
		db    7
		db    5
		db    0
		db    0
		dd aDirhit_6		; "dirhit"
		db 0
		db    0
		dd aFaze_0		; "faze"
		dd aMsl_bg2l_l_0	; "msl_bg2l.l"
		dd aMsl_bg2r_l_0	; "msl_bg2r.l"
		db    9
		db    8
		db    1
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		dd aFire2_6		; "fire2"
		dd aMsl_inkl_l_1	; "msl_inkl.l"
		dd aMsl_inkr_l_1	; "msl_inkr.l"
		db    9
		db    6
		db    1
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
_all_explosions	dd aExpsm_l_0		; "expsm.l"
		dd aExp1_0		; "exp1"
		dd aExpmd_l_0		; "expmd.l"
		dd aExp1_1		; "exp1"
		dd aExplg_l_0		; "explg.l"
		dd aExp2_2		; "exp2"
		dd aSplat_l_0		; "splat.l"
		dd aExp1_2		; "exp1"
		dd aSplat_l_1		; "splat.l"
		dd aExp1_3		; "exp1"
		dd aBosshit_l_1		; "bosshit.l"
		dd aExp2_3		; "exp2"
_all_secrets	db  16h
		db    4
		db  17h
		db    9
_all_maps	dd a11_m		; "1-1.m"
		dd a1_cmf		; "1.cmf"
		dd a1			; "1"
		dd aShallowSea		; "Shallow Sea"
		dd 0
		dd a12_m		; "1-2.m"
		dd a2_cmf		; "2.cmf"
		dd aUr2gd		; "UR2GD"
		dd aMicroMenace		; "Micro Menace"
		dd 0
		dd a13_m		; "1-3.m"
		dd a3_cmf		; "3.cmf"
		dd aUrgr8		; "URGR8"
		dd aTulipTango		; "Tulip Tango"
		dd 0
		dd a14_m		; "1-4.m"
		dd a1_cmf_0		; "1.cmf"
		dd a4good		; "4GOOD"
		dd aRedTide		; "Red Tide"
		dd 0
		dd a15_m		; "1-5.m"
		dd a2_cmf_0		; "2.cmf"
off_284E0	dd a2much4u		; DATA XREF: show_prelude(void)+126o
					; show_prelude(void)+210o
					; "2MUCH4U"
		dd aFathomsOfTeeth	; "Fathoms of Teeth"
		dd 0
		dd a16_m		; "1-6.m"
		dd a3_cmf_0		; "3.cmf"
off_284F4	dd aAce			; "ACE"
		dd aThinkTank		; "Think Tank"
		dd 0
		dd aBs1_m		; "bs1.m"
		dd a5_cmf		; "5.cmf"
		dd aBs1			; "BS1"
		dd aOscarSLair		; "Oscar's Lair"
		dd @bs1_start_up$qv	; bs1_start_up(void)
		dd a21_m		; "2-1.m"
		dd aOxygen_cmf		; "oxygen.cmf"
		dd aDnundr		; "DNUNDR"
		dd aAtlantis		; "Atlantis"
		dd 0
		dd a22_m		; "2-2.m"
		dd a4_cmf		; "4.cmf"
		dd aOut2gtu		; "OUT2GTU"
		dd aAquaTremendom	; "Aqua	Tremendom"
		dd 0
		dd a23_m		; "2-3.m"
		dd aBossa_cmf		; "bossa.cmf"
		dd aAic			; "AIC"
		dd aSpawningWaters	; "Spawning Waters"
		dd 0
		dd a24_m		; "2-4.m"
		dd a1_cmf_1		; "1.cmf"
off_28558	dd aHang10		; "HANG10"
		dd aJasonQuest		; "JASON Quest"
		dd 0
		dd a25_m		; "2-5.m"
		dd aWeerd_cmf		; "weerd.cmf"
		dd aRun4it		; "RUN4IT"
		dd aFranticAttack	; "Frantic Attack"
		dd 0
		dd aBs2_m		; "bs2.m"
		dd aChaos_cmf		; "chaos.cmf"
		dd aBs2			; "BS2"
		dd aEnterOtis		; "Enter Otis"
		dd @bs2_start_up$qv	; bs2_start_up(void)
		dd a31_m		; "3-1.m"
		dd a1_cmf_2		; "1.cmf"
		dd aGetit		; "GETIT"
		dd aSeaEscape		; "Sea Escape"
		dd 0
		dd a32_m		; "3-2.m"
		dd aOxygen_cmf_0	; "oxygen.cmf"
		dd aUrinde		; "URINDE"
		dd aDeepEnigma		; "Deep	Enigma"
		dd 0
		dd a33_m		; "3-3.m"
		dd a4_cmf_0		; "4.cmf"
		dd aSos			; "SOS"
		dd aSinkOrSwim		; "Sink	or Swim"
		dd 0
		dd a34_m		; "3-4.m"
		dd a3_cmf_1		; "3.cmf"
		dd aRun2me		; "RUN2ME"
		dd aMarathon		; "Marathon"
		db    0
		db    0
		db    0
		db    0
		dd a35_m		; "3-5.m"
		dd aChaos_cmf_0		; "chaos.cmf"
		dd a512tr		; "512TR"
		dd aLabRynth		; "Lab Rynth"
		db 0
		db    0
		db    0
		db    0
		dd a36_m		; "3-6.m"
		dd aTurn_cmf		; "turn.cmf"
		dd a2b4udy		; "2B4UDY"
off_285FC	dd aAbyssOfPeril	; "Abyss of Peril"
		db    0
		db    0
		db    0
		db    0
		dd a37_m		; "3-7.m"
		dd a2_cmf_1		; "2.cmf"
		dd aHoh			; "HOH"
		dd aHallsOfHell		; "Halls of Hell"
		db 0
		db    0
		db    0
		db    0
		dd a38_m		; "3-8.m"
		dd aOxygen_cmf_1	; "oxygen.cmf"
		dd aRip			; "RIP"
		dd aMysteriousMaze	; "Mysterious Maze"
		db    0
		db    0
		db    0
		db    0
		dd aBs3_m		; "bs3.m"
		dd a5_cmf_0		; "5.cmf"
		dd aBs3			; "BS3"
		dd aConfrontation	; "Confrontation"
		dd @bs3_start_up$qv	; bs3_start_up(void)
		dd aSec1_m		; "sec1.m"
		dd a4_cmf_1		; "4.cmf"
		dd aSec1		; "SEC1"
		dd aOutpostEnigma	; "Outpost Enigma"
		db    0
		db    0
		db    0
		db    0
		dd aSec2_m		; "sec2.m"
		dd aWeerd_cmf_0		; "weerd.cmf"
		dd aSec2		; "SEC2"
		dd a??????		; "??????"
		db 0
		db    0
		db    0
		db    0
aYouNeedTheKeyF	db 'You need the key for this door.',0 ; DATA XREF: seg2608:_all_messageso
aYouGotTheKey	db 'You got the key!',0 ; DATA XREF: seg2608:00A0o
aThink		db 'Think!',0           ; DATA XREF: seg2608:00A4o
aExtraFirePower	db 'Extra fire power added!',0 ; DATA XREF: seg2608:00A8o
aAutoFireAdded	db 'Auto-fire added!',0 ; DATA XREF: seg2608:00ACo
aWarningAirIsLo	db 'WARNING: Air is low.',0 ; DATA XREF: seg2608:00B0o
aWatchOutForTho	db 'Watch out for those piranas!',0 ; DATA XREF: seg2608:00B4o
aTryGoingInThat	db 'Try going in that drain hole!',0 ; DATA XREF: seg2608:00B8o
aWarningJasonPo	db 'WARNING: JASON power low.',0 ; DATA XREF: seg2608:00BCo
aWarningShieldI	db 'WARNING: Shield is low.',0 ; DATA XREF: seg2608:00C0o
aShootTheBarrel	db 'Shoot the barrels!  They may',0Ah ; DATA XREF: seg2608:00C4o
		db 'contain goodies or enemies.',0
aYouGotTheJason	db 'You got the JASON sub!  To',0Ah ; DATA XREF: seg2608:00C8o
		db 'control the JASON sub',0Ah
		db ' press Alt or Ctrl.',0
aCollectAllTheW	db 'Collect all the weapon',0Ah ; DATA XREF: seg2608:00CCo
		db 'pieces to get the Super Gun!',0
aToEnterACavePr	db 'To enter a cave press',0Ah ; DATA XREF: seg2608:00D0o
		db 'Alt or Ctrl.',0
aFire1_1	db 'fire1',0            ; DATA XREF: seg2608:_all_projectileso
aMsl_sm_l_0	db 'msl_sm.l',0         ; DATA XREF: seg2608:00F0o
aMsl_sm_l_1	db 'msl_sm.l',0         ; DATA XREF: seg2608:00F4o
aFire1_2	db 'fire1',0            ; DATA XREF: seg2608:0102o
aMsl_tpl_l_0	db 'msl_tpl.l',0        ; DATA XREF: seg2608:0106o
aMsl_tpr_l_0	db 'msl_tpr.l',0        ; DATA XREF: seg2608:010Ao
aFire2_2	db 'fire2',0            ; DATA XREF: seg2608:0118o
aMsl_rkl_l_0	db 'msl_rkl.l',0        ; DATA XREF: seg2608:011Co
aMsl_rkr_l_0	db 'msl_rkr.l',0        ; DATA XREF: seg2608:0120o
aFire2_3	db 'fire2',0            ; DATA XREF: seg2608:012Eo
aMsl_bigl_l_0	db 'msl_bigl.l',0       ; DATA XREF: seg2608:0132o
aMsl_bigr_l_0	db 'msl_bigr.l',0       ; DATA XREF: seg2608:0136o
aFire2_4	db 'fire2',0            ; DATA XREF: seg2608:0144o
aMsl_hbl_l_0	db 'msl_hbl.l',0        ; DATA XREF: seg2608:0148o
aMsl_hbr_l_0	db 'msl_hbr.l',0        ; DATA XREF: seg2608:014Co
aFire2_5	db 'fire2',0            ; DATA XREF: seg2608:015Ao
aMsl_str_l_0	db 'msl_str.l',0        ; DATA XREF: seg2608:015Eo
aMsl_str_l_1	db 'msl_str.l',0        ; DATA XREF: seg2608:0162o
aTulip_0	db 'tulip',0            ; DATA XREF: seg2608:0170o
aMsl_pea_l_0	db 'msl_pea.l',0        ; DATA XREF: seg2608:0174o
aMsl_pea_l_1	db 'msl_pea.l',0        ; DATA XREF: seg2608:0178o
aDirhit_4	db 'dirhit',0           ; DATA XREF: seg2608:0180o
aFire1_3	db 'fire1',0            ; DATA XREF: seg2608:0186o
aMsl_spt_l_0	db 'msl_spt.l',0        ; DATA XREF: seg2608:018Ao
aMsl_spt_l_1	db 'msl_spt.l',0        ; DATA XREF: seg2608:018Eo
aDirhit_5	db 'dirhit',0           ; DATA XREF: seg2608:0196o
aSwish_2	db 'swish',0            ; DATA XREF: seg2608:019Co
aMsl_arwl_l_0	db 'msl_arwl.l',0       ; DATA XREF: seg2608:01A0o
aMsl_arwr_l_0	db 'msl_arwr.l',0       ; DATA XREF: seg2608:01A4o
aFire1_4	db 'fire1',0            ; DATA XREF: seg2608:01B2o
aMsl_red_l_0	db 'msl_red.l',0        ; DATA XREF: seg2608:01B6o
aMsl_red_l_1	db 'msl_red.l',0        ; DATA XREF: seg2608:01BAo
aDirhit_6	db 'dirhit',0           ; DATA XREF: seg2608:01C2o
aFaze_0		db 'faze',0             ; DATA XREF: seg2608:01C8o
aMsl_bg2l_l_0	db 'msl_bg2l.l',0       ; DATA XREF: seg2608:01CCo
aMsl_bg2r_l_0	db 'msl_bg2r.l',0       ; DATA XREF: seg2608:01D0o
aFire2_6	db 'fire2',0            ; DATA XREF: seg2608:01DEo
aMsl_inkl_l_1	db 'msl_inkl.l',0       ; DATA XREF: seg2608:01E2o
aMsl_inkr_l_1	db 'msl_inkr.l',0       ; DATA XREF: seg2608:01E6o
aExpsm_l_0	db 'expsm.l',0          ; DATA XREF: seg2608:_all_explosionso
aExp1_0		db 'exp1',0             ; DATA XREF: seg2608:01F8o
aExpmd_l_0	db 'expmd.l',0          ; DATA XREF: seg2608:01FCo
aExp1_1		db 'exp1',0             ; DATA XREF: seg2608:0200o
aExplg_l_0	db 'explg.l',0          ; DATA XREF: seg2608:0204o
aExp2_2		db 'exp2',0             ; DATA XREF: seg2608:0208o
aSplat_l_0	db 'splat.l',0          ; DATA XREF: seg2608:020Co
aExp1_2		db 'exp1',0             ; DATA XREF: seg2608:0210o
aSplat_l_1	db 'splat.l',0          ; DATA XREF: seg2608:0214o
aExp1_3		db 'exp1',0             ; DATA XREF: seg2608:0218o
aBosshit_l_1	db 'bosshit.l',0        ; DATA XREF: seg2608:021Co
aExp2_3		db 'exp2',0             ; DATA XREF: seg2608:0220o
a11_m		db '1-1.m',0            ; DATA XREF: seg2608:_all_mapso
a1_cmf		db '1.cmf',0            ; DATA XREF: seg2608:022Co
a1		db '1',0                ; DATA XREF: seg2608:0230o
aShallowSea	db 'Shallow Sea',0      ; DATA XREF: seg2608:0234o
a12_m		db '1-2.m',0            ; DATA XREF: seg2608:023Co
a2_cmf		db '2.cmf',0            ; DATA XREF: seg2608:0240o
aUr2gd		db 'UR2GD',0            ; DATA XREF: seg2608:0244o
aMicroMenace	db 'Micro Menace',0     ; DATA XREF: seg2608:0248o
a13_m		db '1-3.m',0            ; DATA XREF: seg2608:0250o
a3_cmf		db '3.cmf',0            ; DATA XREF: seg2608:0254o
aUrgr8		db 'URGR8',0            ; DATA XREF: seg2608:0258o
aTulipTango	db 'Tulip Tango',0      ; DATA XREF: seg2608:025Co
a14_m		db '1-4.m',0            ; DATA XREF: seg2608:0264o
a1_cmf_0	db '1.cmf',0            ; DATA XREF: seg2608:0268o
a4good		db '4GOOD',0            ; DATA XREF: seg2608:026Co
aRedTide	db 'Red Tide',0         ; DATA XREF: seg2608:0270o
a15_m		db '1-5.m',0            ; DATA XREF: seg2608:0278o
a2_cmf_0	db '2.cmf',0            ; DATA XREF: seg2608:027Co
a2much4u	db '2MUCH4U',0          ; DATA XREF: seg2608:off_284E0o
aFathomsOfTeeth	db 'Fathoms of Teeth',0 ; DATA XREF: seg2608:0284o
a16_m		db '1-6.m',0            ; DATA XREF: seg2608:028Co
a3_cmf_0	db '3.cmf',0            ; DATA XREF: seg2608:0290o
aAce		db 'ACE',0              ; DATA XREF: seg2608:off_284F4o
aThinkTank	db 'Think Tank',0       ; DATA XREF: seg2608:0298o
aBs1_m		db 'bs1.m',0            ; DATA XREF: seg2608:02A0o
a5_cmf		db '5.cmf',0            ; DATA XREF: seg2608:02A4o
aBs1		db 'BS1',0              ; DATA XREF: seg2608:02A8o
aOscarSLair	db 'Oscar',27h,'s Lair',0 ; DATA XREF: seg2608:02ACo
a21_m		db '2-1.m',0            ; DATA XREF: seg2608:02B4o
aOxygen_cmf	db 'oxygen.cmf',0       ; DATA XREF: seg2608:02B8o
aDnundr		db 'DNUNDR',0           ; DATA XREF: seg2608:02BCo
aAtlantis	db 'Atlantis',0         ; DATA XREF: seg2608:02C0o
a22_m		db '2-2.m',0            ; DATA XREF: seg2608:02C8o
a4_cmf		db '4.cmf',0            ; DATA XREF: seg2608:02CCo
aOut2gtu	db 'OUT2GTU',0          ; DATA XREF: seg2608:02D0o
aAquaTremendom	db 'Aqua Tremendom',0   ; DATA XREF: seg2608:02D4o
a23_m		db '2-3.m',0            ; DATA XREF: seg2608:02DCo
aBossa_cmf	db 'bossa.cmf',0        ; DATA XREF: seg2608:02E0o
aAic		db 'AIC',0              ; DATA XREF: seg2608:02E4o
aSpawningWaters	db 'Spawning Waters',0  ; DATA XREF: seg2608:02E8o
a24_m		db '2-4.m',0            ; DATA XREF: seg2608:02F0o
a1_cmf_1	db '1.cmf',0            ; DATA XREF: seg2608:02F4o
aHang10		db 'HANG10',0           ; DATA XREF: seg2608:off_28558o
aJasonQuest	db 'JASON Quest',0      ; DATA XREF: seg2608:02FCo
a25_m		db '2-5.m',0            ; DATA XREF: seg2608:0304o
aWeerd_cmf	db 'weerd.cmf',0        ; DATA XREF: seg2608:0308o
aRun4it		db 'RUN4IT',0           ; DATA XREF: seg2608:030Co
aFranticAttack	db 'Frantic Attack',0   ; DATA XREF: seg2608:0310o
aBs2_m		db 'bs2.m',0            ; DATA XREF: seg2608:0318o
aChaos_cmf	db 'chaos.cmf',0        ; DATA XREF: seg2608:031Co
aBs2		db 'BS2',0              ; DATA XREF: seg2608:0320o
aEnterOtis	db 'Enter Otis',0       ; DATA XREF: seg2608:0324o
a31_m		db '3-1.m',0            ; DATA XREF: seg2608:032Co
a1_cmf_2	db '1.cmf',0            ; DATA XREF: seg2608:0330o
aGetit		db 'GETIT',0            ; DATA XREF: seg2608:0334o
aSeaEscape	db 'Sea Escape',0       ; DATA XREF: seg2608:0338o
a32_m		db '3-2.m',0            ; DATA XREF: seg2608:0340o
aOxygen_cmf_0	db 'oxygen.cmf',0       ; DATA XREF: seg2608:0344o
aUrinde		db 'URINDE',0           ; DATA XREF: seg2608:0348o
aDeepEnigma	db 'Deep Enigma',0      ; DATA XREF: seg2608:034Co
a33_m		db '3-3.m',0            ; DATA XREF: seg2608:0354o
a4_cmf_0	db '4.cmf',0            ; DATA XREF: seg2608:0358o
aSos		db 'SOS',0              ; DATA XREF: seg2608:035Co
aSinkOrSwim	db 'Sink or Swim',0     ; DATA XREF: seg2608:0360o
a34_m		db '3-4.m',0            ; DATA XREF: seg2608:0368o
a3_cmf_1	db '3.cmf',0            ; DATA XREF: seg2608:036Co
aRun2me		db 'RUN2ME',0           ; DATA XREF: seg2608:0370o
aMarathon	db 'Marathon',0         ; DATA XREF: seg2608:0374o
a35_m		db '3-5.m',0            ; DATA XREF: seg2608:037Co
aChaos_cmf_0	db 'chaos.cmf',0        ; DATA XREF: seg2608:0380o
a512tr		db '512TR',0            ; DATA XREF: seg2608:0384o
aLabRynth	db 'Lab Rynth',0        ; DATA XREF: seg2608:0388o
a36_m		db '3-6.m',0            ; DATA XREF: seg2608:0390o
aTurn_cmf	db 'turn.cmf',0         ; DATA XREF: seg2608:0394o
a2b4udy		db '2B4UDY',0           ; DATA XREF: seg2608:0398o
aAbyssOfPeril	db 'Abyss of Peril',0   ; DATA XREF: seg2608:off_285FCo
a37_m		db '3-7.m',0            ; DATA XREF: seg2608:03A4o
a2_cmf_1	db '2.cmf',0            ; DATA XREF: seg2608:03A8o
aHoh		db 'HOH',0              ; DATA XREF: seg2608:03ACo
aHallsOfHell	db 'Halls of Hell',0    ; DATA XREF: seg2608:03B0o
a38_m		db '3-8.m',0            ; DATA XREF: seg2608:03B8o
aOxygen_cmf_1	db 'oxygen.cmf',0       ; DATA XREF: seg2608:03BCo
aRip		db 'RIP',0              ; DATA XREF: seg2608:03C0o
aMysteriousMaze	db 'Mysterious Maze',0  ; DATA XREF: seg2608:03C4o
aBs3_m		db 'bs3.m',0            ; DATA XREF: seg2608:03CCo
a5_cmf_0	db '5.cmf',0            ; DATA XREF: seg2608:03D0o
aBs3		db 'BS3',0              ; DATA XREF: seg2608:03D4o
aConfrontation	db 'Confrontation',0    ; DATA XREF: seg2608:03D8o
aSec1_m		db 'sec1.m',0           ; DATA XREF: seg2608:03E0o
a4_cmf_1	db '4.cmf',0            ; DATA XREF: seg2608:03E4o
aSec1		db 'SEC1',0             ; DATA XREF: seg2608:03E8o
aOutpostEnigma	db 'Outpost Enigma',0   ; DATA XREF: seg2608:03ECo
aSec2_m		db 'sec2.m',0           ; DATA XREF: seg2608:03F4o
aWeerd_cmf_0	db 'weerd.cmf',0        ; DATA XREF: seg2608:03F8o
aSec2		db 'SEC2',0             ; DATA XREF: seg2608:03FCo
a??????		db '??????',0           ; DATA XREF: seg2608:0400o
; char format[4]
format		db '%s',0Ah,0           ; DATA XREF: init_game(void)+13o
aRiptideRegiste	db 'Riptide (Registered) 1.0 (C) 1994 MindStorm Software',0
					; DATA XREF: init_game(void)+Fo
; char aDebugModeEnabl[]
aDebugModeEnabl	db '>> DEBUG MODE ENABLED <<',0Ah,0 ; DATA XREF: init_game(void)+26o
; char aForcingPcSound[]
aForcingPcSound	db '>>  FORCING PC SOUND  <<',0Ah,0 ; DATA XREF: init_game(void)+39o
aRiptide_dat	db 'riptide.dat',0      ; DATA XREF: init_game(void)+45o
aRiptideRequire	db 'Riptide requires 600k with digital sound.  Increase memory or run'
					; DATA XREF: init_game(void)+CEo
		db 0Ah
		db 'with the -pcsound option.',0
aRiptideRequi_0	db 'Riptide requires 500k running pc sound.',0
					; DATA XREF: init_game(void)+D8o
; char aLogos_pcx[]
aLogos_pcx	db 'logos.pcx',0        ; DATA XREF: init_game(void)+102o
; char aBytesFreeLu[]
aBytesFreeLu	db 'Bytes free %lu',0Ah,0 ; DATA XREF: init_game(void)+131o
; char aMouse_l[]
aMouse_l	db 'mouse.l',0          ; DATA XREF: init_game(void)+179o
; char aConfigrip[]
aConfigrip	db 'config.rip',0       ; DATA XREF: init_game(void)+2E0o
; char mode[]
_mode		db 'rb',0               ; DATA XREF: init_game(void)+2DCo
; char aP_frame_pcx[]
aP_frame_pcx	db 'p_frame.pcx',0      ; DATA XREF: play_game(uchar)+1Bo
; char aBs1_bdl_l[]
aBs1_bdl_l	db 'bs1_bdl.l',0        ; DATA XREF: play_game(uchar)+142o
; char aBs1_bdr_l[]
aBs1_bdr_l	db 'bs1_bdr.l',0        ; DATA XREF: play_game(uchar)+156o
; char aBs1dr_l[]
aBs1dr_l	db 'bs1dr.l',0          ; DATA XREF: play_game(uchar)+16Ao
; char aBosshit_l[]
aBosshit_l	db 'bosshit.l',0        ; DATA XREF: play_game(uchar)+17Eo
; char aBadgrunt[]
aBadgrunt	db 'badgrunt',0         ; DATA XREF: play_game(uchar)+194o
; char aBs2_bod_l[]
aBs2_bod_l	db 'bs2_bod.l',0        ; DATA XREF: play_game(uchar)+1B7o
; char aBs2_tnr1_l[]
aBs2_tnr1_l	db 'bs2_tnr1.l',0       ; DATA XREF: play_game(uchar)+1CBo
; char aBs2_tnl1_l[]
aBs2_tnl1_l	db 'bs2_tnl1.l',0       ; DATA XREF: play_game(uchar)+1DFo
; char aBs2_tnr2_l[]
aBs2_tnr2_l	db 'bs2_tnr2.l',0       ; DATA XREF: play_game(uchar)+1F3o
; char aBs2_tnl2_l[]
aBs2_tnl2_l	db 'bs2_tnl2.l',0       ; DATA XREF: play_game(uchar)+207o
; char aMsl_inkl_l[]
aMsl_inkl_l	db 'msl_inkl.l',0       ; DATA XREF: play_game(uchar)+21Bo
; char aMsl_inkr_l[]
aMsl_inkr_l	db 'msl_inkr.l',0       ; DATA XREF: play_game(uchar)+22Fo
; char aOtiseyes_l[]
aOtiseyes_l	db 'otiseyes.l',0       ; DATA XREF: play_game(uchar)+243o
; char aBs3_bdr_l[]
aBs3_bdr_l	db 'bs3_bdr.l',0        ; DATA XREF: play_game(uchar)+266o
; char aBs3_arr_l[]
aBs3_arr_l	db 'bs3_arr.l',0        ; DATA XREF: play_game(uchar)+27Ao
; char aBs3_bdl_l[]
aBs3_bdl_l	db 'bs3_bdl.l',0        ; DATA XREF: play_game(uchar)+28Eo
; char aBs3_arl_l[]
aBs3_arl_l	db 'bs3_arl.l',0        ; DATA XREF: play_game(uchar)+2A2o
; char aBs3_dthr_l[]
aBs3_dthr_l	db 'bs3_dthr.l',0       ; DATA XREF: play_game(uchar)+2B6o
; char aBs3_prpl_l[]
aBs3_prpl_l	db 'bs3_prpl.l',0       ; DATA XREF: play_game(uchar)+2CAo
; char aBs3_prpr_l[]
aBs3_prpr_l	db 'bs3_prpr.l',0       ; DATA XREF: play_game(uchar)+2DEo
; char aBs3_facl_l[]
aBs3_facl_l	db 'bs3_facl.l',0       ; DATA XREF: play_game(uchar)+2F2o
; char aBs3_facr_l[]
aBs3_facr_l	db 'bs3_facr.l',0       ; DATA XREF: play_game(uchar)+306o
; char aChain_l[]
aChain_l	db 'chain.l',0          ; DATA XREF: play_game(uchar)+31Ao
; char aExp3_l[]
aExp3_l		db 'exp3.l',0           ; DATA XREF: play_game(uchar)+32Eo
aPlunk2		db 'plunk2',0           ; DATA XREF: play_game(uchar)+344o
; char aSharkr_l[]
aSharkr_l	db 'sharkr.l',0         ; DATA XREF: play_game(uchar)+34Bo
; char aSharkl_l[]
aSharkl_l	db 'sharkl.l',0         ; DATA XREF: play_game(uchar)+35Fo
; char aSharkdie_l[]
aSharkdie_l	db 'sharkdie.l',0       ; DATA XREF: play_game(uchar)+373o
; char aBs1_bdl_l_0[]
aBs1_bdl_l_0	db 'bs1_bdl.l',0        ; DATA XREF: play_game(uchar)+3EEo
; char aBs1_bdr_l_0[]
aBs1_bdr_l_0	db 'bs1_bdr.l',0        ; DATA XREF: play_game(uchar)+402o
; char aBs1dr_l_0[]
aBs1dr_l_0	db 'bs1dr.l',0          ; DATA XREF: play_game(uchar)+416o
; char aBosshit_l_0[]
aBosshit_l_0	db 'bosshit.l',0        ; DATA XREF: play_game(uchar)+42Ao
; char aBadgrunt_0[]
aBadgrunt_0	db 'badgrunt',0         ; DATA XREF: play_game(uchar)+43Eo
; char aBs2_bod_l_0[]
aBs2_bod_l_0	db 'bs2_bod.l',0        ; DATA XREF: play_game(uchar)+452o
; char aBs2_tnr1_l_0[]
aBs2_tnr1_l_0	db 'bs2_tnr1.l',0       ; DATA XREF: play_game(uchar)+466o
; char aBs2_tnl1_l_0[]
aBs2_tnl1_l_0	db 'bs2_tnl1.l',0       ; DATA XREF: play_game(uchar)+47Ao
; char aBs2_tnr2_l_0[]
aBs2_tnr2_l_0	db 'bs2_tnr2.l',0       ; DATA XREF: play_game(uchar)+48Eo
; char aBs2_tnl2_l_0[]
aBs2_tnl2_l_0	db 'bs2_tnl2.l',0       ; DATA XREF: play_game(uchar)+4A2o
; char aMsl_inkl_l_0[]
aMsl_inkl_l_0	db 'msl_inkl.l',0       ; DATA XREF: play_game(uchar)+4B6o
; char aMsl_inkr_l_0[]
aMsl_inkr_l_0	db 'msl_inkr.l',0       ; DATA XREF: play_game(uchar)+4CAo
; char aOtiseyes_l_0[]
aOtiseyes_l_0	db 'otiseyes.l',0       ; DATA XREF: play_game(uchar)+4DEo
; char aBs3_bdr_l_0[]
aBs3_bdr_l_0	db 'bs3_bdr.l',0        ; DATA XREF: play_game(uchar)+4F2o
; char aBs3_arr_l_0[]
aBs3_arr_l_0	db 'bs3_arr.l',0        ; DATA XREF: play_game(uchar)+506o
; char aBs3_bdl_l_0[]
aBs3_bdl_l_0	db 'bs3_bdl.l',0        ; DATA XREF: play_game(uchar)+51Ao
; char aBs3_arl_l_0[]
aBs3_arl_l_0	db 'bs3_arl.l',0        ; DATA XREF: play_game(uchar)+52Eo
; char aBs3_prpl_l_0[]
aBs3_prpl_l_0	db 'bs3_prpl.l',0       ; DATA XREF: play_game(uchar)+542o
; char aBs3_prpr_l_0[]
aBs3_prpr_l_0	db 'bs3_prpr.l',0       ; DATA XREF: play_game(uchar)+556o
; char aBs3_facl_l_0[]
aBs3_facl_l_0	db 'bs3_facl.l',0       ; DATA XREF: play_game(uchar)+56Ao
; char aBs3_facr_l_0[]
aBs3_facr_l_0	db 'bs3_facr.l',0       ; DATA XREF: play_game(uchar)+57Eo
; char aBs3_dthr_l_0[]
aBs3_dthr_l_0	db 'bs3_dthr.l',0       ; DATA XREF: play_game(uchar)+592o
; char aChain_l_0[]
aChain_l_0	db 'chain.l',0          ; DATA XREF: play_game(uchar)+5A6o
; char aExp3_l_0[]
aExp3_l_0	db 'exp3.l',0           ; DATA XREF: play_game(uchar)+5BAo
; char aPlunk2_0[]
aPlunk2_0	db 'plunk2',0           ; DATA XREF: play_game(uchar)+5CEo
; char aSharkr_l_0[]
aSharkr_l_0	db 'sharkr.l',0         ; DATA XREF: play_game(uchar)+5E2o
; char aSharkl_l_0[]
aSharkl_l_0	db 'sharkl.l',0         ; DATA XREF: play_game(uchar)+5F6o
; char aSharkdie_l_0[]
aSharkdie_l_0	db 'sharkdie.l',0       ; DATA XREF: play_game(uchar)+60Ao
; char aNewPassword[]
aNewPassword	db 'New password : ',0  ; DATA XREF: play_game(uchar)+6BAo
aInvalidSecretL	db 'Invalid secret level exit.',0 ; DATA XREF: setup_secret_level(void)+3Co
aInvalidSecre_0	db 'Invalid secret level re-entrance.',0
					; DATA XREF: exit_secret_level(void)+33o
; char aSubl_l[]
aSubl_l		db 'subl.l',0           ; DATA XREF: start_room(uchar *)+2D6o
; char aSubr_l[]
aSubr_l		db 'subr.l',0           ; DATA XREF: start_room(uchar *)+308o
aTooManyBarrier	db 'Too many barriers for list.',0 ; DATA XREF: de_doit(void)+47o
aTooManyShootab	db 'Too many shootables.',0 ; DATA XREF: de_doit(void)+BAo
aEndDoorSwitchW	db 'End door switch without door.',0 ; DATA XREF: de_doit(void)+29Eo
; char aBubbles2[]
aBubbles2	db 'bubbles2',0         ; DATA XREF: de_doit(void)+380o
; char aSubr_l_0[]
aSubr_l_0	db 'subr.l',0           ; DATA XREF: de_doit(void)+5B8o
; char aChain_l_1[]
aChain_l_1	db 'chain.l',0          ; DATA XREF: de_doit(void)+5DDo
; char aPlunk2_1[]
aPlunk2_1	db 'plunk2',0           ; DATA XREF: de_doit(void)+66Bo
; char aThe_l[]
aThe_l		db 'the.l',0            ; DATA XREF: de_doit(void)+6E5o
; char aEnd_l[]
aEnd_l		db 'end.l',0            ; DATA XREF: de_doit(void)+6FAo
aP_death1_pcx	db 'p_death1.pcx',0     ; DATA XREF: end_game(void)+43o
; char aP_death2_pcx[]
aP_death2_pcx	db 'p_death2.pcx',0     ; DATA XREF: end_game(void)+4Fo
aBubbles2_0	db 'bubbles2',0         ; DATA XREF: end_game(void)+7Eo
; char aDead[]
aDead		db 'dead',0             ; DATA XREF: end_game(void)+84o
; char aYouMadeTheTop1[]
aYouMadeTheTop1	db 'You made the top 10!  Unfortunately',0Ah
					; DATA XREF: end_game(void)+101o
		db 'you used the cheat code...  Sorry!',0
aEnterName	db 'Enter Name',0       ; DATA XREF: end_game(void)+117o
aYouReInTheTop1	db 'You',27h,'re in the top 10!',0 ; DATA XREF: end_game(void)+113o
		db    0
; char aEgodie2_l_0_[]
aEgodie2_l_0_	db 'egodie2.l',0        ; DATA XREF: kill_ego(int,int)+41o
; char aEgodie2_l_0[]
aEgodie2_l_0	db 'egodie2.l',0        ; DATA XREF: kill_ego(int,int)+55o
; char aSwish[]
aSwish		db 'swish',0            ; DATA XREF: kill_ego(int,int)+A7o
; char aGotcha_l[]
aGotcha_l	db 'gotcha.l',0         ; DATA XREF: kill_ego(int,int)+BBo
; char aGotcha_l_0[]
aGotcha_l_0	db 'gotcha.l',0         ; DATA XREF: kill_ego(int,int)+CFo
; char aSmash[]
aSmash		db 'smash',0            ; DATA XREF: kill_ego(int,int)+117o
; char aExp2[]
aExp2		db 'exp2',0             ; DATA XREF: kill_ego(int,int)+175o
aEgodie2_l_1	db 'egodie2.l',0        ; DATA XREF: kill_ego(int,int)+1F6o
; char aGotcha_l_1[]
aGotcha_l_1	db 'gotcha.l',0         ; DATA XREF: kill_ego(int,int)+1FCo
; char aCry[]
aCry		db 'cry',0              ; DATA XREF: kill_ego(int,int)+236o
aVillans	db 'villans',0          ; DATA XREF: kill_ego(int,int)+24Co
aScr_100_l_0	db 'scr_100.l',0        ; DATA XREF: score_at(int,int,int)+26o
aScr_500_l_0	db 'scr_500.l',0        ; DATA XREF: score_at(int,int,int)+30o
aScr_1000_l_0	db 'scr_1000.l',0       ; DATA XREF: score_at(int,int,int)+3Ao
aScr_2000_l_0	db 'scr_2000.l',0       ; DATA XREF: score_at(int,int,int)+44o
aScr_3000_l_0	db 'scr_3000.l',0       ; DATA XREF: score_at(int,int,int)+4Eo
aScr_4000_l_0	db 'scr_4000.l',0       ; DATA XREF: score_at(int,int,int)+58o
aUndefinedScore	db 'Undefined score animation.',0 ; DATA XREF: score_at(int,int,int)+64o
aMsg_bar_l	db 'msg_bar.l',0        ; DATA XREF: post_message(uchar)+34o
aMsg_cave_l	db 'msg_cave.l',0       ; DATA XREF: post_message(uchar)+3Eo
aMsg_gun_l	db 'msg_gun.l',0        ; DATA XREF: post_message(uchar)+48o
aMsg_jasn_l	db 'msg_jasn.l',0       ; DATA XREF: post_message(uchar)+52o
aGem_l_2	db 'gem.l',0            ; DATA XREF: add_map_item(uint,uint)+6Do
aBonus1_l_0	db 'bonus1.l',0         ; DATA XREF: add_map_item(uint,uint)+8Eo
aBonus2_l_0	db 'bonus2.l',0         ; DATA XREF: add_map_item(uint,uint)+98o
aCoin_l_1	db 'coin.l',0           ; DATA XREF: add_map_item(uint,uint)+A4o
; char aPod1_l[]
aPod1_l		db 'pod1.l',0           ; DATA XREF: add_map_item(uint,uint)+12Ao
; char aPod2_l[]
aPod2_l		db 'pod2.l',0           ; DATA XREF: add_map_item(uint,uint)+153o
; char aMine_l[]
aMine_l		db 'mine.l',0           ; DATA XREF: add_map_item(uint,uint)+1BAo
; char aZap_ud_l[]
aZap_ud_l	db 'zap_ud.l',0         ; DATA XREF: add_map_item(uint,uint)+21Fo
; char aFish1r_l[]
aFish1r_l	db 'fish1r.l',0         ; DATA XREF: add_map_item(uint,uint)+295o
; char aFish2r_l[]
aFish2r_l	db 'fish2r.l',0         ; DATA XREF: add_map_item(uint,uint)+2C6o
; char aWeed1_l[]
aWeed1_l	db 'weed1.l',0          ; DATA XREF: add_map_item(uint,uint)+330o
; char aTulip_l[]
aTulip_l	db 'tulip.l',0          ; DATA XREF: add_map_item(uint,uint)+382o
; char aChest_l[]
aChest_l	db 'chest.l',0          ; DATA XREF: add_map_item(uint,uint)+3DFo
; char aDuct_r_l[]
aDuct_r_l	db 'duct_r.l',0         ; DATA XREF: add_map_item(uint,uint)+44Do
; char aDuct_l_l[]
aDuct_l_l	db 'duct_l.l',0         ; DATA XREF: add_map_item(uint,uint)+47Do
; char aDuct_u_l[]
aDuct_u_l	db 'duct_u.l',0         ; DATA XREF: add_map_item(uint,uint)+4B7o
; char aDuct_d_l[]
aDuct_d_l	db 'duct_d.l',0         ; DATA XREF: add_map_item(uint,uint)+4E7o
; char aPiranar_l[]
aPiranar_l	db 'piranar.l',0        ; DATA XREF: add_map_item(uint,uint)+538o
; char aPiranal_l[]
aPiranal_l	db 'piranal.l',0        ; DATA XREF: add_map_item(uint,uint)+574o
aBlock2_l	db 'block2.l',0         ; DATA XREF: add_map_item(uint,uint)+5F2o
; char aBlock_l[]
aBlock_l	db 'block.l',0          ; DATA XREF: add_map_item(uint,uint)+602o
; char aFace_r_l[]
aFace_r_l	db 'face_r.l',0         ; DATA XREF: add_map_item(uint,uint)+63Ao
; char aFace_l_l[]
aFace_l_l	db 'face_l.l',0         ; DATA XREF: add_map_item(uint,uint)+66Eo
; char aSerp_r_l[]
aSerp_r_l	db 'serp_r.l',0         ; DATA XREF: add_map_item(uint,uint)+6D4o
; char aSerp_l_l[]
aSerp_l_l	db 'serp_l.l',0         ; DATA XREF: add_map_item(uint,uint)+710o
; char aCrab_l[]
aCrab_l		db 'crab.l',0           ; DATA XREF: add_map_item(uint,uint)+775o
aPiece_1_l_0	db 'piece_1.l',0        ; DATA XREF: add_map_item(uint,uint)+81Do
aPiece_2_l_0	db 'piece_2.l',0        ; DATA XREF: add_map_item(uint,uint)+827o
aPiece_3_l_0	db 'piece_3.l',0        ; DATA XREF: add_map_item(uint,uint)+831o
aPiece_4_l_0	db 'piece_4.l',0        ; DATA XREF: add_map_item(uint,uint)+83Bo
; char aJelly_l[]
aJelly_l	db 'jelly.l',0          ; DATA XREF: add_map_item(uint,uint)+89Ao
; char aSharkr_l_1[]
aSharkr_l_1	db 'sharkr.l',0         ; DATA XREF: add_map_item(uint,uint)+8DFo
; char aSharkl_l_1[]
aSharkl_l_1	db 'sharkl.l',0         ; DATA XREF: add_map_item(uint,uint)+911o
; char aTent_out_l[]
aTent_out_l	db 'tent_out.l',0       ; DATA XREF: add_map_item(uint,uint)+973o
; char aSpikes_d_l[]
aSpikes_d_l	db 'spikes_d.l',0       ; DATA XREF: add_map_item(uint,uint)+9D7o
; char aSpikes_u_l[]
aSpikes_u_l	db 'spikes_u.l',0       ; DATA XREF: add_map_item(uint,uint)+A02o
; char aStatue_l[]
aStatue_l	db 'statue.l',0         ; DATA XREF: add_map_item(uint,uint)+A6Bo
; char aFire_pit_l[]
aFire_pit_l	db 'fire_pit.l',0       ; DATA XREF: add_map_item(uint,uint)+AABo
; char aShutl_l_l[]
aShutl_l_l	db 'shutl_l.l',0        ; DATA XREF: add_map_item(uint,uint)+B07o
; char aClam_l[]
aClam_l		db 'clam.l',0           ; DATA XREF: add_map_item(uint,uint)+B41o
; char aCannonr_l[]
aCannonr_l	db 'cannonr.l',0        ; DATA XREF: add_map_item(uint,uint)+BA6o
; char aShipl_l[]
aShipl_l	db 'shipl.l',0          ; DATA XREF: add_map_item(uint,uint)+C1Eo
; char aShipr_l[]
aShipr_l	db 'shipr.l',0          ; DATA XREF: add_map_item(uint,uint)+C5Ao
; char aBarrel2_l[]
aBarrel2_l	db 'barrel2.l',0        ; DATA XREF: add_barrel(uint,uint)+Bo
; char aBarrel1_l[]
aBarrel1_l	db 'barrel1.l',0        ; DATA XREF: add_barrel(uint,uint)+3Co
aBarrel3_l	db 'barrel3.l',0        ; DATA XREF: add_barrel(uint,uint)+4Eo
; char aPu_air_l[]
aPu_air_l	db 'pu_air.l',0         ; DATA XREF: add_map_pup(uint,uint)+18o
aPu_shld_l	db 'pu_shld.l',0        ; DATA XREF: add_map_pup(uint,uint)+2Bo
aPu_fire_l	db 'pu_fire.l',0        ; DATA XREF: add_map_pup(uint,uint)+3Bo
aPu_top_l	db 'pu_top.l',0         ; DATA XREF: add_map_pup(uint,uint)+4Bo
; char aPu_1up_l[]
aPu_1up_l	db 'pu_1up.l',0         ; DATA XREF: add_map_pup(uint,uint)+5Fo
aPu_auto_l	db 'pu_auto.l',0        ; DATA XREF: add_map_pup(uint,uint)+87o
aPu_key_l	db 'pu_key.l',0         ; DATA XREF: add_map_pup(uint,uint)+8Do
aPu_jason_l	db 'pu_jason.l',0       ; DATA XREF: add_map_pup(uint,uint)+9Do
aPu_jf_l	db 'pu_jf.l',0          ; DATA XREF: add_map_pup(uint,uint)+B8o
aPupNotDefined	db 'Pup not defined!',0 ; DATA XREF: add_map_pup(uint,uint)+C3o
; char aSwitch_l[]
aSwitch_l	db 'switch.l',0         ; DATA XREF: add_switch(uint,uint)+24o
; char aEnd_dr_l[]
aEnd_dr_l	db 'end_dr.l',0         ; DATA XREF: add_door(uint,uint)+37o
; char aDoor_ud_l[]
aDoor_ud_l	db 'door_ud.l',0        ; DATA XREF: add_door(uint,uint)+66o
aBubmd_l	db 'bubmd.l',0          ; DATA XREF: add_bubble(int,int,int)+33o
; char aBubsm_l[]
aBubsm_l	db 'bubsm.l',0          ; DATA XREF: add_bubble(int,int,int)+43o
; char aMsl_top_l[]
aMsl_top_l	db 'msl_top.l',0        ; DATA XREF: add_missile(m_actor *,uchar,int)+227o
; char aProber_l[]
aProber_l	db 'prober.l',0         ; DATA XREF: add_jason(void)+10o
; char aSqueek[]
aSqueek		db 'squeek',0           ; DATA XREF: toggle_sub_control(void)+Do
aProber_l_0	db 'prober.l',0         ; DATA XREF: turn_ego(void)+16o
; char aProbel_l[]
aProbel_l	db 'probel.l',0         ; DATA XREF: turn_ego(void)+1Co
; char aTurn_l[]
aTurn_l		db 'turn.l',0           ; DATA XREF: turn_ego(void)+45o
; char aDrillhi[]
aDrillhi	db 'drillhi',0          ; DATA XREF: check_user(void)+2FFo
; char aDrillhi_0[]
aDrillhi_0	db 'drillhi',0          ; DATA XREF: check_user(void)+326o
; char aDrillhi_1[]
aDrillhi_1	db 'drillhi',0          ; DATA XREF: check_user(void)+34Co
; char aDrillhi_2[]
aDrillhi_2	db 'drillhi',0          ; DATA XREF: check_user(void)+37Ao
; char aDrillhi_3[]
aDrillhi_3	db 'drillhi',0          ; DATA XREF: check_user(void)+3A1o
; char aDrillhi_4[]
aDrillhi_4	db 'drillhi',0          ; DATA XREF: check_user(void)+3C8o
; char aRiptide_pcxHas[]
aRiptide_pcxHas	db 27h,'riptide.pcx',27h,' has been dumped.',0
					; DATA XREF: check_user(void)+415o
; char aBacksub_l[]
aBacksub_l	db 'backsub.l',0        ; DATA XREF: teleport_to(uint)+1Ao
; char aTport[]
aTport		db 'tport',0            ; DATA XREF: teleport_to(uint)+5Do
; char aTurn_l_0[]
aTurn_l_0	db 'turn.l',0           ; DATA XREF: teleport_to(uint)+F6o
aSubr_l_1	db 'subr.l',0           ; DATA XREF: teleport_to(uint)+147o
; char aSubl_l_0[]
aSubl_l_0	db 'subl.l',0           ; DATA XREF: teleport_to(uint)+14Do
; char aKey_l[]
aKey_l		db 'key.l',0            ; DATA XREF: update_key_guage(void)+37o
aGun_1_l_0	db 'gun_1.l',0          ; DATA XREF: update_gun(void)+43o
aGun_2_l_0	db 'gun_2.l',0          ; DATA XREF: update_gun(void)+4Do
aGun_3_l_0	db 'gun_3.l',0          ; DATA XREF: update_gun(void)+57o
aGun_4_l_0	db 'gun_4.l',0          ; DATA XREF: update_gun(void)+61o
aErrorUpdatingG	db 'Error updating gun.',0 ; DATA XREF: update_gun(void)+6Do
; char aDebug_[]
aDebug_		db 'Debug',0            ; DATA XREF: activate_menu_bar(void)+21o
; char aRunBenchmark[]
aRunBenchmark	db 'Run benchmark',0    ; DATA XREF: activate_menu_bar(void)+1Do
; char aGame[]
aGame		db 'Game',0             ; DATA XREF: activate_menu_bar(void)+3Bo
; char aResume[]
aResume		db 'Resume',0           ; DATA XREF: activate_menu_bar(void)+37o
; char aDebug_2[]
aDebug_2	db 'Debug',0            ; DATA XREF: activate_menu_bar(void)+67o
; char aRunBenchmark_0[]
aRunBenchmark_0	db 'Run benchmark',0    ; DATA XREF: activate_menu_bar(void)+63o
; char aGame_0[]
aGame_0		db 'Game',0             ; DATA XREF: activate_menu_bar(void)+81o
; char aResume_0[]
aResume_0	db 'Resume',0           ; DATA XREF: activate_menu_bar(void)+7Do
; char aPing[]
aPing		db 'ping',0             ; DATA XREF: check_guages(void)+47o
; char aPing_0[]
aPing_0		db 'ping',0             ; DATA XREF: check_guages(void)+9Eo
; char aPing_1[]
aPing_1		db 'ping',0             ; DATA XREF: check_guages(void)+18Co
; char aBubsm_l_0[]
aBubsm_l_0	db 'bubsm.l',0          ; DATA XREF: load_resources(void)+4o
; char aBubmd_l_0[]
aBubmd_l_0	db 'bubmd.l',0          ; DATA XREF: load_resources(void)+18o
; char aSubr_l_2[]
aSubr_l_2	db 'subr.l',0           ; DATA XREF: load_resources(void)+2Co
; char aSubl_l_1[]
aSubl_l_1	db 'subl.l',0           ; DATA XREF: load_resources(void)+40o
; char aTurn_l_1[]
aTurn_l_1	db 'turn.l',0           ; DATA XREF: load_resources(void)+54o
; char aMsl_str_l[]
aMsl_str_l	db 'msl_str.l',0        ; DATA XREF: load_resources(void)+68o
; char aMsl_sm_l[]
aMsl_sm_l	db 'msl_sm.l',0         ; DATA XREF: load_resources(void)+7Co
; char aMsl_tpl_l[]
aMsl_tpl_l	db 'msl_tpl.l',0        ; DATA XREF: load_resources(void)+90o
; char aMsl_tpr_l[]
aMsl_tpr_l	db 'msl_tpr.l',0        ; DATA XREF: load_resources(void)+A4o
; char aMsl_rkr_l[]
aMsl_rkr_l	db 'msl_rkr.l',0        ; DATA XREF: load_resources(void)+B8o
; char aMsl_rkl_l[]
aMsl_rkl_l	db 'msl_rkl.l',0        ; DATA XREF: load_resources(void)+CCo
; char aMsl_top_l_0[]
aMsl_top_l_0	db 'msl_top.l',0        ; DATA XREF: load_resources(void)+E0o
; char aMsl_pea_l[]
aMsl_pea_l	db 'msl_pea.l',0        ; DATA XREF: load_resources(void)+F4o
; char aMsl_spt_l[]
aMsl_spt_l	db 'msl_spt.l',0        ; DATA XREF: load_resources(void)+108o
; char aMsl_red_l[]
aMsl_red_l	db 'msl_red.l',0        ; DATA XREF: load_resources(void)+11Co
; char aMsl_arwl_l[]
aMsl_arwl_l	db 'msl_arwl.l',0       ; DATA XREF: load_resources(void)+130o
; char aMsl_arwr_l[]
aMsl_arwr_l	db 'msl_arwr.l',0       ; DATA XREF: load_resources(void)+144o
; char aMsl_bg2l_l[]
aMsl_bg2l_l	db 'msl_bg2l.l',0       ; DATA XREF: load_resources(void)+158o
; char aMsl_bg2r_l[]
aMsl_bg2r_l	db 'msl_bg2r.l',0       ; DATA XREF: load_resources(void)+16Co
; char aShpbmb_l[]
aShpbmb_l	db 'shpbmb.l',0         ; DATA XREF: load_resources(void)+180o
; char aFireball_l[]
aFireball_l	db 'fireball.l',0       ; DATA XREF: load_resources(void)+194o
; char aExplg_l[]
aExplg_l	db 'explg.l',0          ; DATA XREF: load_resources(void)+1A8o
; char aExpmd_l[]
aExpmd_l	db 'expmd.l',0          ; DATA XREF: load_resources(void)+1BCo
; char aExpsm_l[]
aExpsm_l	db 'expsm.l',0          ; DATA XREF: load_resources(void)+1D0o
; char aSplat_l[]
aSplat_l	db 'splat.l',0          ; DATA XREF: load_resources(void)+1E4o
; char aProber_l_1[]
aProber_l_1	db 'prober.l',0         ; DATA XREF: load_resources(void)+1F8o
; char aProbel_l_0[]
aProbel_l_0	db 'probel.l',0         ; DATA XREF: load_resources(void)+20Co
; char aFish1l_l[]
aFish1l_l	db 'fish1l.l',0         ; DATA XREF: load_resources(void)+220o
; char aFish1r_l_0[]
aFish1r_l_0	db 'fish1r.l',0         ; DATA XREF: load_resources(void)+234o
; char aFish2l_l[]
aFish2l_l	db 'fish2l.l',0         ; DATA XREF: load_resources(void)+248o
; char aFish2r_l_0[]
aFish2r_l_0	db 'fish2r.l',0         ; DATA XREF: load_resources(void)+25Co
; char aScr_100_l[]
aScr_100_l	db 'scr_100.l',0        ; DATA XREF: load_resources(void)+270o
; char aScr_500_l[]
aScr_500_l	db 'scr_500.l',0        ; DATA XREF: load_resources(void)+284o
; char aScr_1000_l[]
aScr_1000_l	db 'scr_1000.l',0       ; DATA XREF: load_resources(void)+298o
; char aScr_2000_l[]
aScr_2000_l	db 'scr_2000.l',0       ; DATA XREF: load_resources(void)+2ACo
; char aScr_3000_l[]
aScr_3000_l	db 'scr_3000.l',0       ; DATA XREF: load_resources(void)+2C0o
; char aScr_4000_l[]
aScr_4000_l	db 'scr_4000.l',0       ; DATA XREF: load_resources(void)+2D4o
; char aCoin_l[]
aCoin_l		db 'coin.l',0           ; DATA XREF: load_resources(void)+2E8o
; char aBonus1_l[]
aBonus1_l	db 'bonus1.l',0         ; DATA XREF: load_resources(void)+2FCo
; char aBonus2_l[]
aBonus2_l	db 'bonus2.l',0         ; DATA XREF: load_resources(void)+310o
; char aTulipl_l[]
aTulipl_l	db 'tulipl.l',0         ; DATA XREF: load_resources(void)+324o
; char aTulipr_l[]
aTulipr_l	db 'tulipr.l',0         ; DATA XREF: load_resources(void)+338o
; char aTulip_l_0[]
aTulip_l_0	db 'tulip.l',0          ; DATA XREF: load_resources(void)+34Co
; char aSerp_r_l_0[]
aSerp_r_l_0	db 'serp_r.l',0         ; DATA XREF: load_resources(void)+360o
; char aSerp_l_l_0[]
aSerp_l_l_0	db 'serp_l.l',0         ; DATA XREF: load_resources(void)+374o
; char aMsl_bigl_l[]
aMsl_bigl_l	db 'msl_bigl.l',0       ; DATA XREF: load_resources(void)+388o
; char aMsl_bigr_l[]
aMsl_bigr_l	db 'msl_bigr.l',0       ; DATA XREF: load_resources(void)+39Co
; char aMsl_hbl_l[]
aMsl_hbl_l	db 'msl_hbl.l',0        ; DATA XREF: load_resources(void)+3B0o
; char aMsl_hbr_l[]
aMsl_hbr_l	db 'msl_hbr.l',0        ; DATA XREF: load_resources(void)+3C4o
; char aFirbalup_l[]
aFirbalup_l	db 'firbalup.l',0       ; DATA XREF: load_resources(void)+3D8o
; char aFirbaldn_l[]
aFirbaldn_l	db 'firbaldn.l',0       ; DATA XREF: load_resources(void)+3ECo
; char aPu_air_l_0[]
aPu_air_l_0	db 'pu_air.l',0         ; DATA XREF: load_resources(void)+400o
; char aPu_fire_l_0[]
aPu_fire_l_0	db 'pu_fire.l',0        ; DATA XREF: load_resources(void)+414o
; char aPu_shld_l_0[]
aPu_shld_l_0	db 'pu_shld.l',0        ; DATA XREF: load_resources(void)+428o
; char aPu_jwl1_l[]
aPu_jwl1_l	db 'pu_jwl1.l',0        ; DATA XREF: load_resources(void)+43Co
; char aPu_1up_l_0[]
aPu_1up_l_0	db 'pu_1up.l',0         ; DATA XREF: load_resources(void)+450o
; char aPu_auto_l_0[]
aPu_auto_l_0	db 'pu_auto.l',0        ; DATA XREF: load_resources(void)+464o
; char aPu_key_l_0[]
aPu_key_l_0	db 'pu_key.l',0         ; DATA XREF: load_resources(void)+478o
; char aPu_top_l_0[]
aPu_top_l_0	db 'pu_top.l',0         ; DATA XREF: load_resources(void)+48Co
; char aPu_jason_l_0[]
aPu_jason_l_0	db 'pu_jason.l',0       ; DATA XREF: load_resources(void)+4A0o
; char aPu_jf_l_0[]
aPu_jf_l_0	db 'pu_jf.l',0          ; DATA XREF: load_resources(void)+4B4o
; char aGem_l[]
aGem_l		db 'gem.l',0            ; DATA XREF: load_resources(void)+4C8o
; char aSpikes_u_l_0[]
aSpikes_u_l_0	db 'spikes_u.l',0       ; DATA XREF: load_resources(void)+4DCo
; char aSpikes_d_l_0[]
aSpikes_d_l_0	db 'spikes_d.l',0       ; DATA XREF: load_resources(void)+4F0o
; char aShutl_l_l_0[]
aShutl_l_l_0	db 'shutl_l.l',0        ; DATA XREF: load_resources(void)+504o
; char aShutl_r_l[]
aShutl_r_l	db 'shutl_r.l',0        ; DATA XREF: load_resources(void)+518o
; char aMreal_l[]
aMreal_l	db 'mreal.l',0          ; DATA XREF: load_resources(void)+52Co
; char aFreemine_l[]
aFreemine_l	db 'freemine.l',0       ; DATA XREF: load_resources(void)+540o
; char aTent_out_l_0[]
aTent_out_l_0	db 'tent_out.l',0       ; DATA XREF: load_resources(void)+554o
; char aTent_in_l[]
aTent_in_l	db 'tent_in.l',0        ; DATA XREF: load_resources(void)+568o
; char aMine_l_0[]
aMine_l_0	db 'mine.l',0           ; DATA XREF: load_resources(void)+57Co
; char aBarrel1_l_0[]
aBarrel1_l_0	db 'barrel1.l',0        ; DATA XREF: load_resources(void)+590o
; char aBarrel2_l_0[]
aBarrel2_l_0	db 'barrel2.l',0        ; DATA XREF: load_resources(void)+5A4o
; char aBarrel3_l_0[]
aBarrel3_l_0	db 'barrel3.l',0        ; DATA XREF: load_resources(void)+5B8o
; char aPod1_l_0[]
aPod1_l_0	db 'pod1.l',0           ; DATA XREF: load_resources(void)+5CCo
; char aPod2_l_0[]
aPod2_l_0	db 'pod2.l',0           ; DATA XREF: load_resources(void)+5E0o
; char aPiranar_l_0[]
aPiranar_l_0	db 'piranar.l',0        ; DATA XREF: load_resources(void)+5F4o
; char aPiranal_l_0[]
aPiranal_l_0	db 'piranal.l',0        ; DATA XREF: load_resources(void)+608o
; char aJelly_l_0[]
aJelly_l_0	db 'jelly.l',0          ; DATA XREF: load_resources(void)+61Co
; char aBacksub_l_0[]
aBacksub_l_0	db 'backsub.l',0        ; DATA XREF: load_resources(void)+630o
; char aEnd_dr_l_0[]
aEnd_dr_l_0	db 'end_dr.l',0         ; DATA XREF: load_resources(void)+644o
; char aDoor_ud_l_0[]
aDoor_ud_l_0	db 'door_ud.l',0        ; DATA XREF: load_resources(void)+658o
; char aDuct_l_l_0[]
aDuct_l_l_0	db 'duct_l.l',0         ; DATA XREF: load_resources(void)+66Co
; char aDuct_r_l_0[]
aDuct_r_l_0	db 'duct_r.l',0         ; DATA XREF: load_resources(void)+680o
; char aDuct_u_l_0[]
aDuct_u_l_0	db 'duct_u.l',0         ; DATA XREF: load_resources(void)+694o
; char aDuct_d_l_0[]
aDuct_d_l_0	db 'duct_d.l',0         ; DATA XREF: load_resources(void)+6A8o
; char aBlock_l_0[]
aBlock_l_0	db 'block.l',0          ; DATA XREF: load_resources(void)+6BCo
; char aBlock2_l_0[]
aBlock2_l_0	db 'block2.l',0         ; DATA XREF: load_resources(void)+6D0o
; char aSwitch_l_0[]
aSwitch_l_0	db 'switch.l',0         ; DATA XREF: load_resources(void)+6E4o
; char aZap_ud_l_0[]
aZap_ud_l_0	db 'zap_ud.l',0         ; DATA XREF: load_resources(void)+6F8o
; char aWeed1_l_0[]
aWeed1_l_0	db 'weed1.l',0          ; DATA XREF: load_resources(void)+70Co
; char aChest_l_0[]
aChest_l_0	db 'chest.l',0          ; DATA XREF: load_resources(void)+720o
; char aFace_r_l_0[]
aFace_r_l_0	db 'face_r.l',0         ; DATA XREF: load_resources(void)+734o
; char aFace_l_l_0[]
aFace_l_l_0	db 'face_l.l',0         ; DATA XREF: load_resources(void)+748o
; char aCrab_l_0[]
aCrab_l_0	db 'crab.l',0           ; DATA XREF: load_resources(void)+75Co
; char aCrabdie_l[]
aCrabdie_l	db 'crabdie.l',0        ; DATA XREF: load_resources(void)+770o
; char aSerpdie_l[]
aSerpdie_l	db 'serpdie.l',0        ; DATA XREF: load_resources(void)+784o
; char aProbspin_l[]
aProbspin_l	db 'probspin.l',0       ; DATA XREF: load_resources(void)+798o
; char aPiece_1_l[]
aPiece_1_l	db 'piece_1.l',0        ; DATA XREF: load_resources(void)+7ACo
; char aPiece_2_l[]
aPiece_2_l	db 'piece_2.l',0        ; DATA XREF: load_resources(void)+7C0o
; char aPiece_3_l[]
aPiece_3_l	db 'piece_3.l',0        ; DATA XREF: load_resources(void)+7D4o
; char aPiece_4_l[]
aPiece_4_l	db 'piece_4.l',0        ; DATA XREF: load_resources(void)+7E8o
; char aGun_1_l[]
aGun_1_l	db 'gun_1.l',0          ; DATA XREF: load_resources(void)+7FCo
; char aGun_2_l[]
aGun_2_l	db 'gun_2.l',0          ; DATA XREF: load_resources(void)+810o
; char aGun_3_l[]
aGun_3_l	db 'gun_3.l',0          ; DATA XREF: load_resources(void)+824o
; char aGun_4_l[]
aGun_4_l	db 'gun_4.l',0          ; DATA XREF: load_resources(void)+838o
; char aStatue_l_0[]
aStatue_l_0	db 'statue.l',0         ; DATA XREF: load_resources(void)+84Co
; char aFire_pit_l_0[]
aFire_pit_l_0	db 'fire_pit.l',0       ; DATA XREF: load_resources(void)+860o
; char aClam_l_0[]
aClam_l_0	db 'clam.l',0           ; DATA XREF: load_resources(void)+874o
; char aCannonr_l_0[]
aCannonr_l_0	db 'cannonr.l',0        ; DATA XREF: load_resources(void)+888o
; char aCannonl_l[]
aCannonl_l	db 'cannonl.l',0        ; DATA XREF: load_resources(void)+89Co
; char aShipr_l_0[]
aShipr_l_0	db 'shipr.l',0          ; DATA XREF: load_resources(void)+8B0o
; char aShipl_l_0[]
aShipl_l_0	db 'shipl.l',0          ; DATA XREF: load_resources(void)+8C4o
; char aMouse_l_0[]
aMouse_l_0	db 'mouse.l',0          ; DATA XREF: load_resources(void)+8D8o
; char aKey_l_0[]
aKey_l_0	db 'key.l',0            ; DATA XREF: load_resources(void)+8ECo
; char aPat1_l[]
aPat1_l		db 'pat1.l',0           ; DATA XREF: load_resources(void)+900o
; char aFire1[]
aFire1		db 'fire1',0            ; DATA XREF: load_resources(void)+916o
; char aFire2[]
aFire2		db 'fire2',0            ; DATA XREF: load_resources(void)+92Co
; char aExp1[]
aExp1		db 'exp1',0             ; DATA XREF: load_resources(void)+942o
; char aExp2_0[]
aExp2_0		db 'exp2',0             ; DATA XREF: load_resources(void)+958o
; char aDirhit[]
aDirhit		db 'dirhit',0           ; DATA XREF: load_resources(void)+96Eo
; char aBubbles2_1[]
aBubbles2_1	db 'bubbles2',0         ; DATA XREF: load_resources(void)+984o
; char aPirana[]
aPirana		db 'pirana',0           ; DATA XREF: load_resources(void)+99Ao
; char aDoor[]
aDoor		db 'door',0             ; DATA XREF: load_resources(void)+9B0o
; char aDrillhi_5[]
aDrillhi_5	db 'drillhi',0          ; DATA XREF: load_resources(void)+9C6o
; char aZap[]
aZap		db 'zap',0              ; DATA XREF: load_resources(void)+9DCo
; char aPup[]
aPup		db 'pup',0              ; DATA XREF: load_resources(void)+9F2o
; char aPup2[]
aPup2		db 'pup2',0             ; DATA XREF: load_resources(void)+A08o
; char aFaze[]
aFaze		db 'faze',0             ; DATA XREF: load_resources(void)+A1Eo
; char aTulip[]
aTulip		db 'tulip',0            ; DATA XREF: load_resources(void)+A34o
; char aPing_2[]
aPing_2		db 'ping',0             ; DATA XREF: load_resources(void)+A4Ao
; char aTport_0[]
aTport_0	db 'tport',0            ; DATA XREF: load_resources(void)+A60o
; char aSwish_0[]
aSwish_0	db 'swish',0            ; DATA XREF: load_resources(void)+A76o
; char aSmash_0[]
aSmash_0	db 'smash',0            ; DATA XREF: load_resources(void)+A8Co
aTitle_cmf	db 'title.cmf',0        ; DATA XREF: start_title_loop(void)+5o
; char aP_title_pcx[]
aP_title_pcx	db 'p_title.pcx',0      ; DATA XREF: start_title_loop(void)+2Fo
aTitle		db 'title',0            ; DATA XREF: start_title_loop(void)+6Eo
; char aPup2_0[]
aPup2_0		db 'pup2',0             ; DATA XREF: start_title_loop(void)+74o
; char aSum[]
aSum		db 'sum',0              ; DATA XREF: start_title_loop(void)+D3o
; char aP_highs_pcx[]
aP_highs_pcx	db 'p_highs.pcx',0      ; DATA XREF: show_high_scores(uchar)+2Bo
; char src[]
_src		db '.',0                ; DATA XREF: show_high_scores(uchar)+C4o
; char aYourScore[]
aYourScore	db 'Your score: ',0     ; DATA XREF: show_high_scores(uchar)+19Fo
aReset		db 'Reset',0            ; DATA XREF: show_high_scores(uchar)+20Ao
aOk		db 'Ok',0               ; DATA XREF: show_high_scores(uchar)+226o
; char aAreYouSureYouW[]
aAreYouSureYouW	db 'Are you sure you want to',0Ah ; DATA XREF: show_high_scores(uchar)+335o
		db 'reset the high scores?',0
aStats_cmf	db 'stats.cmf',0        ; DATA XREF: show_stats(void)+41o
; char aAdd[]
aAdd		db 'add',0              ; DATA XREF: show_stats(void)+57o
; char aSum_0[]
aSum_0		db 'sum',0              ; DATA XREF: show_stats(void)+6Do
aAttemptToDivid	db 'Attempt to divide by zero in show_stats.',0
					; DATA XREF: show_stats(void)+E5o
flt_29B10	dd 100.0		; DATA XREF: show_stats(void)+10Br
					; show_stats(void)+133r
aShowStats	db 'show stats',0       ; DATA XREF: show_stats(void)+167o
; char aP_stats_pcx[]
aP_stats_pcx	db 'p_stats.pcx',0      ; DATA XREF: show_stats(void)+18Eo
; char aOtis_l[]
aOtis_l		db 'otis.l',0           ; DATA XREF: show_stats(void)+1B6o
; char aEnemiesDestroy[]
aEnemiesDestroy	db 'Enemies destroyed : ',0 ; DATA XREF: show_stats(void)+1EDo
; char asc_29B47[]
asc_29B47	db '%',0                ; DATA XREF: show_stats(void)+21Co
; char aGoodies[]
aGoodies	db 'Goodies           : ',0 ; DATA XREF: show_stats(void)+24Co
; char asc_29B5E[]
asc_29B5E	db '%',0                ; DATA XREF: show_stats(void)+27Bo
; char aBonusX50[]
aBonusX50	db 'Bonus X 50        :',0 ; DATA XREF: show_stats(void)+2ADo
; char aBonusX100[]
aBonusX100	db 'Bonus X 100       :',0 ; DATA XREF: show_stats(void)+2C9o
; char aAdd_0[]
aAdd_0		db 'add',0              ; DATA XREF: show_stats(void)+339o
; char aAdd_1[]
aAdd_1		db 'add',0              ; DATA XREF: show_stats(void)+4ECo
; char aSum_1[]
aSum_1		db 'sum',0              ; DATA XREF: show_stats(void)+648o
; char aAdd_2[]
aAdd_2		db 'add',0              ; DATA XREF: show_stats(void)+691o
; char aSum_2[]
aSum_2		db 'sum',0              ; DATA XREF: show_stats(void)+6A5o
; char aPrelude_l[]
aPrelude_l	db 'prelude.l',0        ; DATA XREF: show_prelude(void)+7Do
; char aFire2_0[]
aFire2_0	db 'fire2',0            ; DATA XREF: show_prelude(void)+E6o
; char aExp2_1[]
aExp2_1		db 'exp2',0             ; DATA XREF: show_prelude(void)+174o
; char aFire2_1[]
aFire2_1	db 'fire2',0            ; DATA XREF: show_prelude(void)+1E0o
aLoopDoesNotExi	db 'Loop does not exist.',0
					; DATA XREF: show_loop(uchar *,int,int,uchar,uint)+5Eo
; char amandich[]
amandich	db '-mandich',0         ; DATA XREF: update_gun(void):loc_ABB9t
					; parse_options(int,uchar **)+1Co
; char aPcsound[]
aPcsound	db '-pcsound',0         ; DATA XREF: parse_options(int,uchar **)+43o
; char aStart[]
aStart		db '-start',0           ; DATA XREF: parse_options(int,uchar **)+6Ao
aBs1_bdl_l_1	db 'bs1_bdl.l',0        ; DATA XREF: seg03f9:6B4Fo
aBs2_bod_l_1	db 'bs2_bod.l',0        ; DATA XREF: seg03f9:6BD5o
aOtiseyes_l_1	db 'otiseyes.l',0       ; DATA XREF: seg03f9:6C5Ao
aBs2_tnl2_l_1	db 'bs2_tnl2.l',0       ; DATA XREF: seg03f9:6CF8o
aBs2_tnr2_l_1	db 'bs2_tnr2.l',0       ; DATA XREF: seg03f9:6D9Fo
aBs2_tnl1_l_1	db 'bs2_tnl1.l',0       ; DATA XREF: seg03f9:6E46o
aBs2_tnr1_l_1	db 'bs2_tnr1.l',0       ; DATA XREF: seg03f9:6EEDo
aBs3_bdl_l_1	db 'bs3_bdl.l',0        ; DATA XREF: seg03f9:6F9Eo
aBs3_arr_l_1	db 'bs3_arr.l',0        ; DATA XREF: seg03f9:7019o
aBs3_arl_l_1	db 'bs3_arl.l',0        ; DATA XREF: seg03f9:70DBo
aBs3_prpr_l_1	db 'bs3_prpr.l',0       ; DATA XREF: seg03f9:70FBo
aBs3_prpl_l_1	db 'bs3_prpl.l',0       ; DATA XREF: seg03f9:71A3o
aBs3_facr_l_1	db 'bs3_facr.l',0       ; DATA XREF: seg03f9:71C3o
aBs3_facl_l_1	db 'bs3_facl.l',0       ; DATA XREF: seg03f9:726Bo
; `__vtable__'[gui_item]
@gui_item@	dd @gui_item@draw$qv	; DATA XREF: gui_item::~gui_item(void)+Do
					; gui_item::gui_item(void)+1Fo
					; gui_item::draw(void)
		dd @gui_item@erase$qv	; gui_item::erase(void)
		dd 6177334h
; `__vtable__'[button]
@button@	dd @button@draw$qv	; DATA XREF: button::~button(void)+Do
					; button::button(uchar *,void *,uchar)+2Co
					; button::draw(void)
		dd @gui_item@erase$qv	; gui_item::erase(void)
		dd @button@poll$qv	; button::poll(void)
aSubl_l_2	db 'subl.l',0           ; DATA XREF: seg0b2c:08C5o
aSubr_l_3	db 'subr.l',0           ; DATA XREF: seg0b2c:08CBo
aProbspin_l_0	db 'probspin.l',0       ; DATA XREF: seg0b2c:0A51o
aDrillhi_6	db 'drillhi',0          ; DATA XREF: seg0b2c:0A91o
aProbel_l_1	db 'probel.l',0         ; DATA XREF: seg0b2c:0CDCo
aProber_l_2	db 'prober.l',0         ; DATA XREF: seg0b2c:0CE2o
aPup2_1		db 'pup2',0             ; DATA XREF: seg0b2c:0D66o
aGem_l_1	db 'gem.l',0            ; DATA XREF: seg0b2c:0EB7o
aCoin_l_0	db 'coin.l',0           ; DATA XREF: seg0b2c:0EE7o
aPup_0		db 'pup',0              ; DATA XREF: seg0b2c:10C6o
aFish1r_l_1	db 'fish1r.l',0         ; DATA XREF: seg0b2c:1190o
aFish2r_l_1	db 'fish2r.l',0         ; DATA XREF: seg0b2c:1196o
aFish1l_l_0	db 'fish1l.l',0         ; DATA XREF: seg0b2c:11B4o
aFish2l_l_0	db 'fish2l.l',0         ; DATA XREF: seg0b2c:11BAo
aDoor_0		db 'door',0             ; DATA XREF: seg0b2c:126Eo
aPup2_2		db 'pup2',0             ; DATA XREF: seg0b2c:160Bo
aPup2_3		db 'pup2',0             ; DATA XREF: seg0b2c:163Fo
aPup_1		db 'pup',0              ; DATA XREF: seg0b2c:1662o
aShipr_l_1	db 'shipr.l',0          ; DATA XREF: seg0b2c:19B4o
aShipl_l_1	db 'shipl.l',0          ; DATA XREF: seg0b2c:19BAo
aShpbmb_l_0	db 'shpbmb.l',0         ; DATA XREF: seg0b2c:19F8o
aCannonr_l_1	db 'cannonr.l',0        ; DATA XREF: seg0b2c:1B32o
aCannonl_l_0	db 'cannonl.l',0        ; DATA XREF: seg0b2c:1B38o
aGem_l_0	db 'gem.l',0            ; DATA XREF: seg0b2c:1CBAo
aDirhit_0	db 'dirhit',0           ; DATA XREF: seg0b2c:1DF6o
aSwish_1	db 'swish',0            ; DATA XREF: seg0b2c:1E90o
aShutl_r_l_0	db 'shutl_r.l',0        ; DATA XREF: seg0b2c:1FA8o
aShutl_l_l_1	db 'shutl_l.l',0        ; DATA XREF: seg0b2c:1FAEo
aFirbaldn_l_0	db 'firbaldn.l',0       ; DATA XREF: seg0b2c:202Bo
aFire1_0	db 'fire1',0            ; DATA XREF: seg0b2c:20F8o
aFirbalup_l_0	db 'firbalup.l',0       ; DATA XREF: seg0b2c:2116o
aTent_out_l_1	db 'tent_out.l',0       ; DATA XREF: seg0b2c:229Fo
aTent_in_l_0	db 'tent_in.l',0        ; DATA XREF: seg0b2c:2313o
aPirana_1	db 'pirana',0           ; DATA XREF: seg0b2c:2433o
aSharkdie_l_1	db 'sharkdie.l',0       ; DATA XREF: seg0b2c:2545o
aPirana_2	db 'pirana',0           ; DATA XREF: seg0b2c:2558o
aSharkr_l_2	db 'sharkr.l',0         ; DATA XREF: seg0b2c:2579o
aSharkl_l_2	db 'sharkl.l',0         ; DATA XREF: seg0b2c:257Fo
aCrabdie_l_0	db 'crabdie.l',0        ; DATA XREF: seg0b2c:28C8o
aPirana_0	db 'pirana',0           ; DATA XREF: seg0b2c:28DBo
aSerpdie_l_0	db 'serpdie.l',0        ; DATA XREF: seg0b2c:29D5o
aSerp_l_l_1	db 'serp_l.l',0         ; DATA XREF: seg0b2c:2A0Fo
aSerp_r_l_1	db 'serp_r.l',0         ; DATA XREF: seg0b2c:2A15o
aPiranar_l_1	db 'piranar.l',0        ; DATA XREF: seg0b2c:2BDAo
aPiranal_l_1	db 'piranal.l',0        ; DATA XREF: seg0b2c:2BE0o
aPirana_3	db 'pirana',0           ; DATA XREF: seg0b2c:2D98o
aTulipl_l_0	db 'tulipl.l',0         ; DATA XREF: seg0b2c:2E4Ao
aTulipr_l_0	db 'tulipr.l',0         ; DATA XREF: seg0b2c:2E88o
aTulip_l_1	db 'tulip.l',0          ; DATA XREF: seg0b2c:2F7Co
aZap_0		db 'zap',0              ; DATA XREF: seg0b2c:3267o
aFreemine_l_0	db 'freemine.l',0       ; DATA XREF: seg0b2c:335Fo
aMreal_l_0	db 'mreal.l',0          ; DATA XREF: seg0b2c:33CFo
aDirhit_2	db 'dirhit',0           ; DATA XREF: seg0b2c:3502o
aBadgrunt_1	db 'badgrunt',0         ; DATA XREF: seg0b2c:39C2o
aBs1dr_l_1	db 'bs1dr.l',0          ; DATA XREF: seg0b2c:3A53o
aDirhit_1	db 'dirhit',0           ; DATA XREF: seg0b2c:3AC7o
aBs1_bdr_l_1	db 'bs1_bdr.l',0        ; DATA XREF: seg0b2c:3B34o
aBs1_bdl_l_2	db 'bs1_bdl.l',0        ; DATA XREF: seg0b2c:3B3Ao
aBadgrunt_2	db 'badgrunt',0         ; DATA XREF: seg0b2c:3C93o
aExp3_l_1	db 'exp3.l',0           ; DATA XREF: seg0b2c:4231o
aBs3_dthr_l_1	db 'bs3_dthr.l',0       ; DATA XREF: seg0b2c:42A3o
aDirhit_3	db 'dirhit',0           ; DATA XREF: seg0b2c:43B4o
aBs3_bdr_l_1	db 'bs3_bdr.l',0        ; DATA XREF: seg0b2c:449Bo
aBs3_arr_l_2	db 'bs3_arr.l',0        ; DATA XREF: seg0b2c:44B8o
aBs3_bdl_l_2	db 'bs3_bdl.l',0        ; DATA XREF: seg0b2c:44D1o
aBs3_arl_l_2	db 'bs3_arl.l',0        ; DATA XREF: seg0b2c:44EEo
aBs3_prpl_l_2	db 'bs3_prpl.l',0       ; DATA XREF: seg0b2c:4702o
aBs3_prpr_l_2	db 'bs3_prpr.l',0       ; DATA XREF: seg0b2c:4708o
aBs3_facl_l_2	db 'bs3_facl.l',0       ; DATA XREF: seg0b2c:47B0o
aBs3_facr_l_2	db 'bs3_facr.l',0       ; DATA XREF: seg0b2c:47B6o
; char aPrinterError_C[]
aPrinterError_C	db 'Printer error.  Continue?',0 ; DATA XREF: print_form(uchar *,uchar)+7Eo
; char asc_29EFE[]
asc_29EFE	db '        ',0         ; DATA XREF: print_form(uchar *,uchar)+CFo
aTurn_l_2	db 'turn.l',0           ; DATA XREF: seg0fa9:0289o
aFish1r_l_2	db 'fish1r.l',0         ; DATA XREF: seg0fa9:029Do
aBs1_bdl_l_3	db 'bs1_bdl.l',0        ; DATA XREF: seg0fa9:02B2o
aInSearchOfDr_R	db 'In Search of Dr. Riptide',0 ; DATA XREF: seg0fa9:02D1o
aREGISTERED	db 'R E G I S T E R E D',0 ; DATA XREF: seg0fa9:02EBo
aDesignAndProgr	db 'Design and Programming:',0 ; DATA XREF: seg0fa9:0318o
aRaoulSaid	db 'Raoul Said',0       ; DATA XREF: seg0fa9:0342o
aProducer	db 'Producer:',0        ; DATA XREF: seg0fa9:036Fo
aAveryPack	db 'Avery Pack',0       ; DATA XREF: seg0fa9:0399o
aArtwork	db 'Artwork:',0         ; DATA XREF: seg0fa9:03C6o
aMelGuymon	db 'Mel Guymon',0       ; DATA XREF: seg0fa9:03F0o
aComposerSoundE	db 'Composer/Sound Effects:',0 ; DATA XREF: seg0fa9:041Eo
aDanFroelich	db 'Dan Froelich',0     ; DATA XREF: seg0fa9:0449o
aCopyrightC1994	db 'Copyright (C) 1994 MindStorm Software',0 ; DATA XREF: seg0fa9:0475o
aAndPackMediaCo	db 'and Pack Media Company, Inc.',0 ; DATA XREF: seg0fa9:0490o
aScream		db 'scream',0           ; DATA XREF: seg0fa9:04B9o
aT_cat_txt	db 't_cat.txt',0        ; DATA XREF: seg0fa9:0621o
aStartGameFromB	db 'Start game from begining?',0 ; DATA XREF: seg0fa9:0659o
aEndCurrentGame	db 'End current game?',0 ; DATA XREF: seg0fa9:0688o
aPassword_0	db 'Password',0         ; DATA XREF: seg0fa9:06C3o
aEnterPasswordB	db 'Enter password below:',0 ; DATA XREF: seg0fa9:06BFo
aCharge		db 'charge',0           ; DATA XREF: seg0fa9:071Do
aLetsrip	db 'LETSRIP!',0         ; DATA XREF: seg0fa9:074Co
aDrillhi_7	db 'drillhi',0          ; DATA XREF: seg0fa9:0764o
aCheatModeOnLet	db 'Cheat mode ON!',0Ah ; DATA XREF: seg0fa9:077Eo
		db 'Let',27h,'s Rip!',0
aThatIsNotAVali	db 'That is not a valid',0Ah ; DATA XREF: seg0fa9:079Do
		db 'password.',0
aPat1_l_0	db 'pat1.l',0           ; DATA XREF: seg0fa9:0815o
aPu_shld_l_1	db 'pu_shld.l',0        ; DATA XREF: seg0fa9:0850o
aPu_auto_l_1	db 'pu_auto.l',0        ; DATA XREF: seg0fa9:086Ao
aPu_fire_l_1	db 'pu_fire.l',0        ; DATA XREF: seg0fa9:0884o
aPu_jason_l_1	db 'pu_jason.l',0       ; DATA XREF: seg0fa9:089Eo
aT_inst_txt	db 't_inst.txt',0       ; DATA XREF: seg0fa9:08BCo
aPat1_l_1	db 'pat1.l',0           ; DATA XREF: seg0fa9:094Co
aT_story_txt	db 't_story.txt',0      ; DATA XREF: seg0fa9:097Do
aAreYouSureYo_0	db 'Are you sure you want to',0Ah ; DATA XREF: seg0fa9:09EFo
		db 'leave?',0
aConfig_rip	db 'config.rip',0       ; DATA XREF: seg0fa9:0A3Fo
aWb		db 'wb+',0              ; DATA XREF: seg0fa9:0A3Bo
aT_exit_txt	db 't_exit.txt',0       ; DATA XREF: seg0fa9:0ABCo
aGameSound	db 'Game Sound',0       ; DATA XREF: seg0fa9:0AE7o
aGameSoundsAreC	db 'Game sounds are currently ',0 ; DATA XREF: seg0fa9:0AFDo
aOn_		db 'ON.',0              ; DATA XREF: seg0fa9:0B18o
aOff_		db 'OFF.',0             ; DATA XREF: seg0fa9:0B1Eo
aNewSetting?	db 'New setting?',0     ; DATA XREF: seg0fa9:0B40o
aOff		db 'Off',0              ; DATA XREF: seg0fa9:0B56o
aOn		db 'On',0               ; DATA XREF: seg0fa9:0B6Co
aGameControl	db 'Game Control',0     ; DATA XREF: seg0fa9:0C0Do
aGameControlIsC	db 'Game control is currently set to:',0 ; DATA XREF: seg0fa9:0C23o
aKeyboard	db 'KEYBOARD',0         ; DATA XREF: seg0fa9:0C4Ao
aJoystick	db 'JOYSTICK',0         ; DATA XREF: seg0fa9:0C5Eo
aJoy		db 'Joy',0              ; DATA XREF: seg0fa9:0C68o
aKey		db 'Key',0              ; DATA XREF: seg0fa9:0C7Eo
aCenterJoystick	db 'Center joystick and press',0Ah ; DATA XREF: seg0fa9:0CF5o
		db 'fire button...',0
aJoystickCalibr	db 'Joystick calibration aborted.',0 ; DATA XREF: seg0fa9:0D3Do
aGameSpeed_0	db 'Game Speed',0       ; DATA XREF: seg0fa9:0D7Fo
aGameSpeedIsCur	db 'Game speed is currently set to:',0 ; DATA XREF: seg0fa9:0D95o
aFast		db 'FAST',0             ; DATA XREF: seg0fa9:0DBDo
aSlow		db 'SLOW',0             ; DATA XREF: seg0fa9:0DD1o
aSlow_0		db 'Slow',0             ; DATA XREF: seg0fa9:0DDBo
aFast_0		db 'Fast',0             ; DATA XREF: seg0fa9:0DF1o
aT_help_txt	db 't_help.txt',0       ; DATA XREF: seg0fa9:0F1Eo
aBytesFree	db 'Bytes free  : ',0   ; DATA XREF: seg0fa9:0F67o
asc_2A262	db 0Ah,0		; DATA XREF: seg0fa9:0F9Ao
aMapWidth	db 0Ah			; DATA XREF: seg0fa9:0FAAo
		db 'Map width   : ',0
aMapHeight	db 0Ah			; DATA XREF: seg0fa9:0FDFo
		db 'Map height  : ',0
aCastSize	db 0Ah			; DATA XREF: seg0fa9:1014o
		db 'Cast size   : ',0
aSprtStorage	db 0Ah			; DATA XREF: seg0fa9:104Ao
		db 'Sprt storage: ',0
aEgoXY		db 0Ah			; DATA XREF: seg0fa9:1082o
		db 'Ego X,Y     : ',0
asc_2A2B4	db ' ',0                ; DATA XREF: seg0fa9:10B5o
aSystemBench	db 0Ah			; DATA XREF: seg0fa9:10E9o
		db 'System Bench: ',0
dbl_2A2C6	dq 18.2			; DATA XREF: seg0fa9:11AFr
flt_2A2CE	dd 600.0		; DATA XREF: seg0fa9:11B4r
aFramesPerSecon	db 'Frames per second: ',0 ; DATA XREF: seg0fa9:11CEo
aShotSize	db 'Shot size',0        ; DATA XREF: seg0fa9:1239o
aEnterNewShotSi	db '  Enter new shot size:  ',0 ; DATA XREF: seg0fa9:124Fo
aSmall		db 'Small',0            ; DATA XREF: seg0fa9:1265o
aMedium		db 'Medium',0           ; DATA XREF: seg0fa9:127Bo
aHuge		db 'Huge',0             ; DATA XREF: seg0fa9:1291o
aAdlibCardNotPr	db 'Adlib card not present.',0 ; DATA XREF: seg0fa9:1325o
a_cmf		db '*.cmf',0            ; DATA XREF: seg0fa9:1337o
aAdlibCardNot_0	db 'Adlib card not present.',0 ; DATA XREF: seg0fa9:137Ao
aGodModeNowOn	db 'God mode now on!',0 ; DATA XREF: seg0fa9:13A3o
a?		dw 3Fh			; DATA XREF: setup_options(void)+Eo
; char AboutRiptide[]
AboutRiptide	db 'About Riptide...',0 ; DATA XREF: setup_options(void)+2Ao
; char aCatalog___[]
aCatalog___	db 'Catalog...',0       ; DATA XREF: setup_options(void)+42o
; char aHelp[]
aHelp		db 'Help',0             ; DATA XREF: setup_options(void)+5Ao
aGame_1		db 'Game',0             ; DATA XREF: setup_options(void)+82o
; char aStart_0[]
aStart_0	db 'Start',0            ; DATA XREF: setup_options(void)+9Eo
; char aStartActIi[]
aStartActIi	db 'Start Act II',0     ; DATA XREF: setup_options(void)+B6o
; char aResume_1[]
aResume_1	db 'Resume',0           ; DATA XREF: setup_options(void)+CEo
; char aPassword[]
aPassword	db 'Password',0         ; DATA XREF: setup_options(void)+E6o
; char aStory___[]
aStory___	db 'Story...',0         ; DATA XREF: setup_options(void)+FEo
; char aInstructions__[]
aInstructions__	db 'Instructions...',0  ; DATA XREF: setup_options(void)+116o
; char aHighScores___[]
aHighScores___	db 'High scores...',0   ; DATA XREF: setup_options(void)+12Eo
; char aQuit[]
aQuit		db 'Quit',0             ; DATA XREF: setup_options(void)+146o
aSetup		db 'Setup',0            ; DATA XREF: setup_options(void)+16Eo
; char aSound[]
aSound		db 'Sound',0            ; DATA XREF: setup_options(void)+18Ao
; char aControl[]
aControl	db 'Control',0          ; DATA XREF: setup_options(void)+1A2o
; char aGameSpeed[]
aGameSpeed	db 'Game speed',0       ; DATA XREF: setup_options(void)+1BAo
aDebug_1	db 'Debug',0            ; DATA XREF: setup_options(void)+1ECo
; char aInfo[]
aInfo		db 'Info',0             ; DATA XREF: setup_options(void)+208o
; char aRunBenchmark_1[]
aRunBenchmark_1	db 'Run benchmark',0    ; DATA XREF: setup_options(void)+220o
; char aShotSize___[]
aShotSize___	db 'Shot size...',0     ; DATA XREF: setup_options(void)+238o
; char aPlaySong___[]
aPlaySong___	db 'Play song...',0     ; DATA XREF: setup_options(void)+250o
; char aStopSong[]
aStopSong	db 'Stop song',0        ; DATA XREF: setup_options(void)+268o
; char aGodMode[]
aGodMode	db 'God mode',0         ; DATA XREF: setup_options(void)+280o
		db 0
aRscFile_	db 'RSC file.',0        ; DATA XREF: game_manager::game_manager(uchar *)+67o
; char aSoundblasterDe[]
aSoundblasterDe	db 'SoundBlaster detected.',0Ah,0
					; DATA XREF: game_manager::game_manager(uchar *)+167o
aSoundStorageFu	db 'Sound storage full.',0
					; DATA XREF: game_manager::define_sound(uchar *,uchar)+13o
aSndNotInStorag	db 'Snd not in storage.',0 ; DATA XREF: game_manager::get_sound(uchar *)+63o
aCanTFindSong	db 'Can',27h,'t find song ',0
					; DATA XREF: game_manager::play_song(uchar *)+48o
; char a_voc[]
a_voc		db '.voc',0             ; DATA XREF: game_manager::play_voc_file(uchar *)+30o
; char a_voc_0[]
a_voc_0		db '.voc',0             ; DATA XREF: game_manager::load_voc(uchar *)+17o
aVocNotFound	db 'Voc not found: ',0  ; DATA XREF: game_manager::load_voc(uchar *)+52o
; char a_pcs[]
a_pcs		db '.pcs',0             ; DATA XREF: game_manager::load_pcs(uchar *)+17o
aErrorLoadingPc	db 'Error loading pcs:',0 ; DATA XREF: game_manager::load_pcs(uchar *)+F0o
aLoopStorageFul	db 'Loop storage full!',0 ; DATA XREF: game_manager::load_loop(uchar *)+14o
aAddingALoopToG	db 'Adding a loop to game_manager.',0
					; DATA XREF: game_manager::load_loop(uchar *)+35o
aLoadingLoop_	db 'Loading loop.',0    ; DATA XREF: game_manager::load_loop(uchar *)+219o
		db 0
aTooManyActorsI	db 'Too many actors in ed_list.',0 ; DATA XREF: m_actor::set_xy(int,int)+9Co
aErrorLookingFo	db 'Error looking for loop : ',0 ; DATA XREF: m_actor::new_loop(uchar *)+67o
aTooManyActorsT	db 'Too many actors to draw.',0 ; DATA XREF: m_actor::move(void)+15Bo
aAddingActorToC	db 'Adding actor to cast.',0
					; DATA XREF: game_cast::add(uchar *,void *,void	*)+63o
		db 0
_default_mouse	db  0Fh			; DATA XREF: ms_mouse::ms_mouse(void)+ABo
		db    1
		db    1
		db    1
		db    0
		db    1
		db  0Ah
		db  0Ah
		db  0Ah
		db    1
		db    1
		db  0Ah
		db  0Ah
		db    1
		db    0
		db    1
		db  0Ah
		db    1
		db    0
		db    0
		db    0
		db    1
		db    0
		db    0
		db    0
aThisFeatureHas	db 'This feature has not',0Ah ; DATA XREF: seg137f:00DCo
		db 'been implemented yet.',0
aOpenFile	db 'Open File',0        ; DATA XREF: i_load_file(uchar *,uchar *)+5o
aCancel		db 'Cancel',0           ; DATA XREF: i_load_file(uchar *,uchar *)+33o
aOk_0		db 'Ok',0               ; DATA XREF: i_load_file(uchar *,uchar *)+49o
aCd		db 'Cd',0               ; DATA XREF: i_load_file(uchar *,uchar *)+5Fo
aChangeDirector	db 'Change Directory',0 ; DATA XREF: i_load_file(uchar *,uchar *)+AFo
aEnterNewPath	db 'Enter new path:',0  ; DATA XREF: i_load_file(uchar *,uchar *)+ABo
; char aNotAValidPath_[]
aNotAValidPath_	db 'Not a valid path.',0 ; DATA XREF: i_load_file(uchar *,uchar *)+E0o
aNo		db 'No',0               ; DATA XREF: i_yes_cancel(uchar *,uchar)+39o
aYes		db 'Yes',0              ; DATA XREF: i_yes_cancel(uchar *,uchar)+4Fo
aCancel_0	db 'Cancel',0           ; DATA XREF: i_yes_cancel(uchar *,uchar)+59o
aOk_1		db 'Ok',0               ; DATA XREF: i_yes_cancel(uchar *,uchar)+6Fo
aOk_2		db 'Ok',0               ; DATA XREF: i_inform(uchar *,uchar,uchar *)+35o
aTextBox	db 'Text Box',0         ; DATA XREF: seg137f:26D7o
; char a_[]
a_		db '_',0                ; DATA XREF: prompt_box::update_text(uchar *)+AAo
; char asc_2A621[2]
asc_2A621	db '\',0                ; DATA XREF: file_box::file_box(uchar *)+77o
; char asc_2A623[4]
asc_2A623	db 'X:\',0              ; DATA XREF: file_box::current_directory(uchar *)+4o
aMore		db 'More >>',0          ; DATA XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+176o
aExit		db 'Exit',0             ; DATA XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+191o
aDone		db 'Done',0             ; DATA XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+388o
; `__vtable__'[text_pager]
@text_pager@	dd @gui_item@draw$qv	; DATA XREF: text_pager::text_pager(uchar *,uchar,void (*)(uchar))+30o
					; text_pager::~text_pager(void)+Do
					; gui_item::draw(void)
		dd @gui_item@erase$qv	; gui_item::erase(void)
		dd 6177334h
; `__vtable__'[file_box]
@file_box@	dd @file_box@draw$qv	; DATA XREF: file_box::file_box(uchar *)+32o
					; file_box::~file_box(void)+Eo
					; file_box::draw(void)
		dd @gui_item@erase$qv	; gui_item::erase(void)
		dd @file_box@poll$qv	; file_box::poll(void)
; `__vtable__'[prompt_box]
@prompt_box@	dd @prompt_box@draw$qv	; DATA XREF: prompt_box::prompt_box(uchar *)+2Co
					; prompt_box::~prompt_box(void)+11o
					; prompt_box::draw(void)
		dd @gui_item@erase$qv	; gui_item::erase(void)
off_2A659	dd @prompt_box@poll$qv	; prompt_box::poll(void)
; `__vtable__'[text_box]
@text_box@	dd @text_box@draw$qv	; DATA XREF: text_box::text_box(uchar *)+30o
					; text_box::~text_box(void)+11o
					; text_box::draw(void)
		dd @text_box@erase$qv	; text_box::erase(void)
		dd @text_box@poll$qv	; text_box::poll(void)
; `__vtable__'[menu_bar]
@menu_bar@	dd @menu_bar@draw$qv	; DATA XREF: menu_bar::menu_bar(void)+2Co
					; menu_bar::draw(void)
		dd @menu_bar@erase$qv	; menu_bar::erase(void)
		dd @menu_bar@poll$qv	; menu_bar::poll(void)
; `__vtable__'[pull_down]
@pull_down@	dd @pull_down@draw$qv	; DATA XREF: pull_down::pull_down(uchar	*)+2Co
					; pull_down::draw(void)
		dd @gui_item@erase$qv	; gui_item::erase(void)
		dd @pull_down@poll$qv	; pull_down::poll(void)
		db 0
aTiles_		db 'Tiles.',0           ; DATA XREF: tilemap::tilemap(uchar *,int,int)+43o
aViewportWidthT	db 'Viewport width too big.',0
					; DATA XREF: tilemap::set_viewport(int,int,int,int)+97o
aViewportHeight	db 'Viewport height too big.',0
					; DATA XREF: tilemap::set_viewport(int,int,int,int)+C5o
aInitMap_	db 'Init map.',0        ; DATA XREF: tilemap::reset_map(void)+72o
aSavingMap_	db 'Saving map.',0      ; DATA XREF: seg1783:0AC1o
aTiles__0	db 'Tiles.',0           ; DATA XREF: tilemap::load(uchar *,uchar)+13Bo
aLoadingMap_	db 'Loading map.',0     ; DATA XREF: tilemap::load(uchar *,uchar)+22Eo
aTileChangeOutO	db 'Tile change out of range.',0 ; DATA XREF: seg1783:0D25o
_page_offsets	dw 0			; DATA XREF: de_doit(void)+169r
					; de_doit(void)+1B5r ...
word_2A700	dw 3E80h		; DATA XREF: de_doit(void)+329r
					; post_message(uchar)+165r ...
		dw 7D00h
		dw 0BB80h
aPaletteCycleNo	db 'Palette cycle not a multiple of 4.',0
					; DATA XREF: vga_display::setup_cycle(uchar,uchar,uchar)+8Co
aNotInModeXAbor	db 'Not in Mode X - aborted.',0
					; DATA XREF: vga_display::show_offset(uint)+11o
aGettingScreenB	db 'Getting screen bits.',0
					; DATA XREF: vga_display::get_bits(int,int,int,int)+2Co
aLoadingPcxFile	db 'Loading pcx file.',0
					; DATA XREF: vga_display::show_pcx(uchar *,uchar,uint,int)+48o
aCreatingPcxHea	db 'Creating PCX header.',0
					; DATA XREF: vga_display::show_pcx(uchar *,uchar,uint,int)+8Do
aCouldnTOpen	db 'Couldn',27h,'t open',0
					; DATA XREF: vga_display::show_pcx(uchar *,uchar,uint,int)+1E6o
; char aRiptide_pcx[]
aRiptide_pcx	db 'riptide.pcx',0      ; DATA XREF: vga_display::dump_pcx(void)+Bo
aCreatingPcxH_0	db 'Creating PCX header.',0 ; DATA XREF: vga_display::dump_pcx(void)+38o
aRiptide_pcx_0	db 'riptide.pcx',0      ; DATA XREF: vga_display::dump_pcx(void)+26Bo
aCouldnTOpenRip	db 'Couldn',27h,'t open riptide.pcx',0
					; DATA XREF: vga_display::dump_pcx(void)+286o
a_pcx		db '*.pcx',0            ; DATA XREF: seg1891:125Co
aLoadingPcxFi_0	db 'Loading pcx file.',0 ; DATA XREF: seg1891:12C2o
		db 0
unk_2A7EC	db    0			; DATA XREF: return_element(uchar,uchar)+Ao
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
; char aHigh_scr[]
aHigh_scr	db 'high.scr',0         ; DATA XREF: init_scores_array(void)+9o
					; save_all_scores(void)+Bo ...
; char arb[3]
arb		db 'rb',0               ; DATA XREF: init_scores_array(void)+5o
; char a________[]
a________	db '........',0         ; DATA XREF: init_scores_file(void)+Bo
; char aError_[]
aError_		db 'Error:',0           ; DATA XREF: save_all_scores(void)+1Fo
					; load_scores_in(void)+1Co
a1_0		db '1',0                ; DATA XREF: return_element(uchar,uchar):loc_1C24Eo
first_time	dw 1			; DATA XREF: _gr_start_kbd_grab+41r
					; _gr_start_kbd_grab+56w
_debug		dw 0			; DATA XREF: check_user(void)+3ECw
; int g_handle
_g_handle	dw 0FFFFh		; DATA XREF: g_open_element(uchar *):loc_1C500r
					; g_open_element(uchar *)+44w ...
_external_open	dd offset locret_1C3C0 - offset	locret_1C3C0
					; DATA XREF: set_external_open(void *)+7w
					; g_open_element(uchar *)+4r ...
_external_read	dd offset locret_1C3C0 - offset	locret_1C3C0
					; DATA XREF: set_external_read(void *)+7w
					; g_element_read(void *,uint)+4r ...
; char aSS[]
aSS		db '%s %s',0Ah,0        ; DATA XREF: terminate(uchar *,uchar *)+31o
; char aS[]
aS		db '%s',0Ah,0           ; DATA XREF: terminate(uchar *,uchar *)+45o
aOutOfHeap	db 'Out of heap : ',0   ; DATA XREF: no_heap(uchar *)+Ao
aReadError	db 'Read error : ',0    ; DATA XREF: read_error(uchar *)+Ao
aWriteError	db 'Write error : ',0   ; DATA XREF: write_error(uchar *)+Ao
aRequestToOpenM	db 'Request to open more than one element.',0
					; DATA XREF: g_open_element(uchar *)+29o
aElementNotOpen	db 'Element not open.',0 ; DATA XREF: g_element_read(void *,uint)+2Co
mouse_cursor_ds	dw 0
mouse_cursor_off db 0
		db    0
leftclipplanemask dd 80C0E0Fh		; DATA XREF: _x_draw_span+28r
					; _x_fill_rect+28r ...
rightclipplanemask dd 703010Fh		; DATA XREF: _x_draw_span+35r
					; _x_fill_rect+32r ...
charx		dw 0
chary		dw 0
charcolor	dw 0
doffset		dw 0
fade		dw 0
dotx		dw 0
doty		dw 0
dcolor		dw 0
_string		db    0
		db    0
		db    0
		db    0
tmp_rgb		db 0			; DATA XREF: _nullpalo	_nullpal+19o ...
		db    0
		db 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db 0
target_rgb	db 0			; DATA XREF: _palup+10w _palup:incpalr
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
; const	int _8087
__8087		dw 0FFFFh		; DATA XREF: sub_24D9+C8w sub_24D9+CEw ...
		db 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
__protected	db 0			; DATA XREF: sub_24D9+18r
					; __fperror+6Br ...
__ldt		dw 0			; DATA XREF: sub_24D9+11r
		db 0
; unsigned int _default87
__default87	dw 1330h		; DATA XREF: sub_2624+4Ar
		db  81h	; 
		db    0
		dd aDomain		; "Domain"
		db  82h	; 
		db    0
		dd aDenormal		; "Denormal"
		db  83h	; 
		db    0
		dd aDivideBy0		; "Divide by 0"
		db  84h	; 
		db    0
		dd aOverflow		; "Overflow"
		db  85h	; 
		db    0
		dd aUnderflow		; "Underflow"
		db  86h	; 
		db    0
		dd aPartialLossOfP	; "Partial loss	of precision"
		db  87h	; 
		db    0
		dd aStackFault		; "Stack fault"
aDomain		db 'Domain',0           ; DATA XREF: seg2608:2C78o
aDenormal	db 'Denormal',0         ; DATA XREF: seg2608:2C7Eo
aDivideBy0	db 'Divide by 0',0      ; DATA XREF: seg2608:2C84o
aOverflow	db 'Overflow',0         ; DATA XREF: seg2608:2C8Ao
aUnderflow	db 'Underflow',0        ; DATA XREF: seg2608:2C90o
aPartialLossOfP	db 'Partial loss of precision',0 ; DATA XREF: seg2608:2C96o
aStackFault	db 'Stack fault',0      ; DATA XREF: seg2608:2C9Co
; char aFloatingPointE[]
aFloatingPointE	db 'Floating point error: %s.',0Ah,0 ; DATA XREF: __fperror+97o
flt_2AF70	dd 1.0			; DATA XREF: __pow10+38r __pow10+BFr
		db    0
		db    0
		db  20h
		db  41h	; A
		db    0
		db    0
		db 0C8h	; È
		db  42h	; B
		db    0
		db    0
		db  7Ah	; z
		db  44h	; D
		db    0
		db  40h	; @
		db  1Ch
		db  46h	; F
		db    0
		db  50h	; P
		db 0C3h	; Ã
		db  47h	; G
		db    0
		db  24h	; $
		db  74h	; t
		db  49h	; I
		db  80h	; 
		db  96h	; 
		db  18h
		db  4Bh	; K
flt_2AF90	dd 1.0e8		; DATA XREF: __pow10+47r
dbl_2AF94	dq 1.0e16		; DATA XREF: __pow10+54r
tbyte_2AF9C	dt 1.0e32		; DATA XREF: __pow10+5Dr
tbyte_2AFA6	dt 9.9999999999999999998e63 ; DATA XREF: __pow10+69r
tbyte_2AFB0	dt 1.0e128		; DATA XREF: __pow10+75r
tbyte_2AFBA	dt 1.0e256		; DATA XREF: __pow10+81r
tbyte_2AFC4	dt 1.0e512		; DATA XREF: __pow10+8Dr
tbyte_2AFCE	dt 9.9999999999999999997e1023 ;	DATA XREF: __pow10+99r
tbyte_2AFD8	dt 1.0e2048		; DATA XREF: __pow10+A5r
tbyte_2AFE2	dt 1.0e4096		; DATA XREF: __pow10+B1r
flt_2AFEC	REAL8 3.4028237e38		; DATA XREF: __pow10+17r
__atexitcnt	dw 0			; DATA XREF: _atexit+3r
					; _atexit:loc_2C57r ...
		public __ctype
; char _ctype[]
__ctype		db    0, 20h, 20h, 20h,	20h, 20h, 20h, 20h ; DATA XREF:	_atol+13o
		db  20h, 20h, 21h, 21h,	21h, 21h, 21h, 20h
		db  20h, 20h, 20h, 20h,	20h, 20h, 20h, 20h
		db  20h, 20h, 20h, 20h,	20h, 20h, 20h, 20h
		db  20h,   1, 40h, 40h,	40h, 40h, 40h, 40h
		db  40h, 40h, 40h, 40h,	40h, 40h, 40h, 40h
		db  40h,   2,	2,   2,	  2,   2,   2,	 2
		db    2,   2,	2, 40h,	40h, 40h, 40h, 40h
		db  40h, 40h, 14h, 14h,	14h, 14h, 14h, 14h
		db    4,   4,	4,   4,	  4,   4,   4,	 4
		db    4,   4,	4,   4,	  4,   4,   4,	 4
		db    4,   4,	4,   4,	40h, 40h, 40h, 40h
		db  40h, 40h, 18h, 18h,	18h, 18h, 18h, 18h
		db    8,   8,	8,   8,	  8,   8,   8,	 8
		db    8,   8,	8,   8,	  8,   8,   8,	 8
		db    8,   8,	8,   8,	40h, 40h, 40h, 40h
		db  20h,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0
		db 0
__exitbuf	dd nullsub_1		; DATA XREF: sub_2D4E+29r _setvbuf+C1w ...
__exitfopen	dd nullsub_1		; DATA XREF: sub_2D4E+41r sub_4EDE+A2w
__exitopen	dd nullsub_1		; DATA XREF: sub_2D4E+45r
; FILE _streams[]
__streams	dw 0			; DATA XREF: __setupio+28o
					; __setupio+71o ...
word_2B102	dw 209h			; DATA XREF: __setupio+50w
					; __setupio+5Ar
byte_2B104	db 0			; DATA XREF: __setupio+1Cw
					; __setupio:loc_3263r
		db    0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		db    0
		db    0
off_2B112	dw offset __streams	; DATA XREF: __setupio+36w
; FILE stru_2B114
stru_2B114	FILE <0, 20Ah, 1, 0, 0,	0, 0, 0, 2EB4h>	; DATA XREF: __setupio+ADo
					; _printf+8o ...
; FILE stru_2B128
stru_2B128	FILE <0, 202h, 2, 0, 0,	0, 0, 0, 2EC8h>	; DATA XREF: __fperror+9Co
					; _perror+48o
unk_2B13C	db    0			; DATA XREF: seg2608:2EEEo
		db    0
		db  43h	; C
		db    2
		db    3
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		dw offset unk_2B13C
; FILE stream
_stream		FILE <0, 242h, 4, 0, 0,	0, 0, 0, 2EF0h>
					; DATA XREF: print_form(uchar *,uchar)+13Co
					; print_form(uchar *,uchar)+169o
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		dd 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
; void (__interrupt far	*isr)()
_isr		dw 0
		dw 0
		dd 0
		db 0
		db    0
		db 0
		db 0
		db 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db 0
		db    0
		db    0
		db 0
		db    0
		db    0
		db 0
		db    0
		db    0
		db 0
		db 0
		db 0
		db 0
		db 0
		db 0
		db 0
		db 0
		db 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db 0
		db 0
		db    0
		db 0
		db 0
		db 0
		db 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db 0
		db    0
		db    0
		db    0
		db 0
		db    0
		db    0
		db 0
		db    0
		db 0
		db    0
		db    0
		db 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db 0
		db 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
; unsigned int _nfile
__nfile		dw 14h			; DATA XREF: start+E1r	__setupio+3r ...
__openfd	dw 6001h		; DATA XREF: _lseek+8w	__read+8r ...
		dw 6002h
		dw 6002h
		dw 0A004h
		dw 0A002h
		dw 0
		dw 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
; int _fmode
__fmode		dw 4000h		; DATA XREF: sub_4EDE:loc_4F68r
					; _open+14r
__notumask	dw 0FFFFh		; DATA XREF: _open:loc_55EDr
; unsigned int _fpstklen
__fpstklen	dw 0CCh
; int _doserrno
__doserrno	dw 0			; DATA XREF: __ioerror:loc_2F2Ew
					; __ioerror+27w ...
__doserrortosv	db 0			; DATA XREF: __ioerror+17r
		db  13h
		db    2
		db    2
		db    4
		db    5
		db    6
		db    8
		db    8
		db    8
		db  14h
		db  15h
		db    5
		db  13h
		db  0Eh
		db  16h
		db    5
		db  11h
		db    2
		db  1Eh
		db  29h	; )
		db  2Ch	; ,
		db  28h	; (
		db  28h	; (
		db  28h	; (
		db  28h	; (
		db  28h	; (
		db  29h	; )
		db  2Ch	; ,
		db  28h	; (
		db  28h	; (
		db  28h	; (
		db    5
		db    5
		db  29h	; )
		db  17h
		db  17h
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Fh
		db  2Ch	; ,
		db  23h	; #
		db    2
		db  2Ch	; ,
		db  0Fh
		db  2Ah	; *
		db  28h	; (
		db  28h	; (
		db  28h	; (
		db  13h
		db  1Bh
		db  1Ch
		db    2
		db    2
		db    5
		db  0Fh
		db    2
		db  17h
		db  28h	; (
		db  2Ah	; *
		db  13h
		db  2Ah	; *
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Eh
		db  23h	; #
		db  0Eh
		db  1Ch
		db  28h	; (
		db  17h
		db  23h	; #
		db  25h	; %
		db 13h
		db  28h	; (
		db    0
; char aTmp[]
aTmp		db 'TMP',0              ; DATA XREF: __mkname+20o
; char a__0[]
a__0		db '.$$$',0             ; DATA XREF: __mkname+41o
		db    0
word_2B326	dw 1			; DATA XREF: _srand+Cw	_rand+4r ...
word_2B328	dw 0			; DATA XREF: _srand+6w	_randr	...
; unsigned int _stklen
__stklen	dw 1000h		; DATA XREF: start+62r	start+70w ...
aNull		db '(null)',0           ; DATA XREF: __vprinter+2CEo
byte_2B333	db 0			; DATA XREF: __vprinter+C3r
		db  14h
		db  14h
		db    1
		db  14h
		db  15h
		db  14h
		db  14h
		db  14h
		db  14h
		db    2
		db    0
		db  14h
		db    3
		db    4
		db  14h
		db    9
		db    5
		db    5
		db    5
		db    5
		db    5
		db    5
		db    5
		db    5
		db    5
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  0Fh
		db  17h
		db  0Fh
		db    8
		db  14h
		db  14h
		db  14h
		db    7
		db  14h
		db  16h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  0Dh
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  10h
		db  0Ah
		db  0Fh
		db  0Fh
		db  0Fh
		db    8
		db  0Ah
		db  14h
		db  14h
		db    6
		db  14h
		db  12h
		db  0Bh
		db  0Eh
		db  14h
		db  14h
		db 11h
		db  14h
		db  0Ch
		db  14h
		db  14h
		db  0Dh
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db    0
; int _wscroll
__wscroll	dw 1			; DATA XREF: __cputn+D5r
__video		db 0			; DATA XREF: _clrscr+3r seg0000:16DBr	...
byte_2B397	db 0			; DATA XREF: _clrscr+7r seg0000:16DFr	...
byte_2B398	db 0			; DATA XREF: _clrscr+Br
					; __cputn:loc_39E0r ...
byte_2B399	db 0			; DATA XREF: _clrscr+Fr
					; __cputn:loc_39F8r ...
byte_2B39A	db 0			; DATA XREF: _textcolor+3r
					; _textcolor+10w ...
byte_2B39B	db 0			; DATA XREF: _normvideor
					; __c0crtinit+14w
byte_2B39C	db 0			; DATA XREF: __crtinit+6w
					; __crtinit+12r ...
byte_2B39D	db 0			; DATA XREF: __crtinit:loc_3BD1w
					; __crtinit+B8r ...
byte_2B39E	db 0			; DATA XREF: __vptr+3r	__crtinit+Ew ...
byte_2B39F	db 0			; DATA XREF: __cputn:loc_3988r
					; __crtinit:loc_3BB8w ...
byte_2B3A0	db 0			; DATA XREF: __vram+8r
					; __crtinit:loc_3BFDw
word_2B3A1	dw 0			; DATA XREF: __vptr+Fr	__crtinit+A2w
word_2B3A3	dw 0			; DATA XREF: __vptr+1Dr
					; __crtinit:loc_3C0Fw ...
; int directvideo
_directvideo	dw 1			; DATA XREF: __cputn+74r __screenio+Fr ...
aCompaq		db 'COMPAQ',0           ; DATA XREF: __crtinit+74o
aPrint		db 'print'              ; DATA XREF: sub_3C32o
aScan		db ' scan'              ; DATA XREF: sub_3C32:loc_3C37o
aFFloatingPoint	db 'f : floating point formats not linked',0Dh,0Ah,0
					; DATA XREF: sub_3C32+15o
word_2B3E0	dw 952h			; DATA XREF: seg0000:1A9Dw _delay+19r
word_2B3E2	dw 0			; DATA XREF: seg0000:1A97w _delay+15r
word_2B3E4	dw 0			; DATA XREF: sub_4120+13r
__cflag		db 0			; DATA XREF: _getchr _getch+7w ...
__cchar		db 0			; DATA XREF: _getch+Cr	_ungetch+17w
; int _argc
__argc		dw 0			; DATA XREF: unknown_libname_3+C8w
					; unknown_libname_3+113r
; char **_argv
__argv		dw 0			; DATA XREF: unknown_libname_3+DBw
					; unknown_libname_3+11Fr
word_2B3EC	dw 0			; DATA XREF: unknown_libname_3+DFw
					; unknown_libname_3+119r
off_2B3EE	dw offset start		; DATA XREF: unknown_libname_3w
					; unknown_libname_3+125r
word_2B3F0	dw 0			; DATA XREF: unknown_libname_3+4w
					; unknown_libname_3+10Fr
word_2B3F2	dw 0			; DATA XREF: unknown_libname_3+8w
					; unknown_libname_3+10Br
word_2B3F4	dw 0			; DATA XREF: unknown_libname_3+11w
					; unknown_libname_3+103r
word_2B3F6	dw 0			; DATA XREF: unknown_libname_3+15w
					; unknown_libname_3+107r
; char *sys_errlist[]
_sys_errlist	dd aError0		; DATA XREF: _perror+22r _perror+1Er
					; "Error 0"
		dd aInvalidFunctio	; "Invalid function number"
		dd aNoSuchFileOrDi	; "No such file	or directory"
		dd aPathNotFound	; "Path	not found"
		dd aTooManyOpenFil	; "Too many open files"
		dd aPermissionDeni	; "Permission denied"
		dd aBadFileNumber	; "Bad file number"
		dd aMemoryArenaTra	; "Memory arena	trashed"
		dd aNotEnoughMemor	; "Not enough memory"
		dd aInvalidMemoryB	; "Invalid memory block	address"
		dd aInvalidEnviron	; "Invalid environment"
		dd aInvalidFormat	; "Invalid format"
		dd aInvalidAccessC	; "Invalid access code"
		dd aInvalidData		; "Invalid data"
		dd unk_2B5C1
		dd aNoSuchDevice	; "No such device"
		dd aAttemptedToRem	; "Attempted to	remove current directory"
		dd aNotSameDevice	; "Not same device"
		dd aNoMoreFiles		; "No more files"
		dd aInvalidArgumen	; "Invalid argument"
		dd aArgListTooBig	; "Arg list too	big"
		dd aExecFormatErro	; "Exec	format error"
		dd aCrossDeviceLin	; "Cross-device	link"
		dd unk_2B65B
		dd unk_2B65C
		dd unk_2B65D
		dd unk_2B65E
		dd unk_2B65F
		dd unk_2B660
		dd unk_2B661
		dd unk_2B662
		dd unk_2B663
		dd unk_2B664
		dd aMathArgument	; "Math	argument"
		dd aResultTooLarge	; "Result too large"
		dd aFileAlreadyExi	; "File	already	exists"
		dd aPossibleDeadlo	; "Possible deadlock"
		dd unk_2B6AA
		dd unk_2B6AB
		dd unk_2B6AC
		dd unk_2B6AD
		dd unk_2B6AE
		dd unk_2B6AF
		dd unk_2B6B0
		dd unk_2B6B1
		dd unk_2B6B2
		dd unk_2B6B3
		dd unk_2B6B4
; int sys_nerr
_sys_nerr	dw 30h			; DATA XREF: _perror+9r
aError0		db 'Error 0',0          ; DATA XREF: seg2608:_sys_errlisto
aInvalidFunctio	db 'Invalid function number',0 ; DATA XREF: seg2608:319Co
aNoSuchFileOrDi	db 'No such file or directory',0 ; DATA XREF: seg2608:31A0o
aPathNotFound	db 'Path not found',0   ; DATA XREF: seg2608:31A4o
aTooManyOpenFil	db 'Too many open files',0 ; DATA XREF: seg2608:31A8o
aPermissionDeni	db 'Permission denied',0 ; DATA XREF: seg2608:31ACo
aBadFileNumber	db 'Bad file number',0  ; DATA XREF: seg2608:31B0o
aMemoryArenaTra	db 'Memory arena trashed',0 ; DATA XREF: seg2608:31B4o
aNotEnoughMemor	db 'Not enough memory',0 ; DATA XREF: seg2608:31B8o
aInvalidMemoryB	db 'Invalid memory block address',0 ; DATA XREF: seg2608:31BCo
aInvalidEnviron	db 'Invalid environment',0 ; DATA XREF: seg2608:31C0o
aInvalidFormat	db 'Invalid format',0   ; DATA XREF: seg2608:31C4o
aInvalidAccessC	db 'Invalid access code',0 ; DATA XREF: seg2608:31C8o
aInvalidData	db 'Invalid data',0     ; DATA XREF: seg2608:31CCo
unk_2B5C1	db    0			; DATA XREF: seg2608:31D0o
aNoSuchDevice	db 'No such device',0   ; DATA XREF: seg2608:31D4o
aAttemptedToRem	db 'Attempted to remove current directory',0 ; DATA XREF: seg2608:31D8o
aNotSameDevice	db 'Not same device',0  ; DATA XREF: seg2608:31DCo
aNoMoreFiles	db 'No more files',0    ; DATA XREF: seg2608:31E0o
aInvalidArgumen	db 'Invalid argument',0 ; DATA XREF: seg2608:31E4o
aArgListTooBig	db 'Arg list too big',0 ; DATA XREF: seg2608:31E8o
aExecFormatErro	db 'Exec format error',0 ; DATA XREF: seg2608:31ECo
aCrossDeviceLin	db 'Cross-device link',0 ; DATA XREF: seg2608:31F0o
unk_2B65B	db    0			; DATA XREF: seg2608:31F4o
unk_2B65C	db    0			; DATA XREF: seg2608:31F8o
unk_2B65D	db    0			; DATA XREF: seg2608:31FCo
unk_2B65E	db    0			; DATA XREF: seg2608:3200o
unk_2B65F	db    0			; DATA XREF: seg2608:3204o
unk_2B660	db    0			; DATA XREF: seg2608:3208o
unk_2B661	db    0			; DATA XREF: seg2608:320Co
unk_2B662	db    0			; DATA XREF: seg2608:3210o
unk_2B663	db    0			; DATA XREF: seg2608:3214o
unk_2B664	db    0			; DATA XREF: seg2608:3218o
aMathArgument	db 'Math argument',0    ; DATA XREF: seg2608:321Co
aResultTooLarge	db 'Result too large',0 ; DATA XREF: seg2608:3220o
aFileAlreadyExi	db 'File already exists',0 ; DATA XREF: seg2608:3224o
aPossibleDeadlo	db 'Possible deadlock',0 ; DATA XREF: seg2608:3228o
unk_2B6AA	db    0			; DATA XREF: seg2608:322Co
unk_2B6AB	db    0			; DATA XREF: seg2608:3230o
unk_2B6AC	db    0			; DATA XREF: seg2608:3234o
unk_2B6AD	db    0			; DATA XREF: seg2608:3238o
unk_2B6AE	db    0			; DATA XREF: seg2608:323Co
unk_2B6AF	db    0			; DATA XREF: seg2608:3240o
unk_2B6B0	db    0			; DATA XREF: seg2608:3244o
unk_2B6B1	db    0			; DATA XREF: seg2608:3248o
unk_2B6B2	db    0			; DATA XREF: seg2608:324Co
unk_2B6B3	db    0			; DATA XREF: seg2608:3250o
unk_2B6B4	db    0			; DATA XREF: seg2608:3254o
aUnknownError	db 'Unknown error',0    ; DATA XREF: _perror+31o
; char aSS_0[]
aSS_0		db '%s: %s',0Ah,0       ; DATA XREF: _perror+43o
		db    0
asc_2B6CC	db 0Dh,0		; DATA XREF: _fputc+149o
word_2B6CE	dw 0			; DATA XREF: _setvbuf:loc_5CBFr
					; _setvbuf+4Cw
word_2B6D0	dw 0			; DATA XREF: _setvbuf:loc_5CA9r
					; _setvbuf+36w
__realcvtvector	dw offset sub_26F1	; DATA XREF: __realcvtr
		dw offset sub_3C32
__scantodvector	dw offset loc_3C37
		dw offset loc_3C37
		dw offset loc_3C37
byte_2B6DC	db 0			; DATA XREF: start+12Fo
		db 10h
		dw offset sub_24D9
		db    0
		db    0
		db 0
		db    2
		dw offset __setupio
		db    0
		db    0
		db    0
		db  10h
		dw offset __c0crtinit
		db    0
		db    0
		db    1
		db  10h
		dd loc_3C6C
		db    0
		db  10h
		dw offset unknown_libname_3 ; TCC/TCC++/BCC++ 16 bit DOS
		db    0
		db    0
unk_2B6FA	db    0			; DATA XREF: start+132o start+15Eo
		db  10h
		db 0B3h	; ³
		db    4
		db    0
		db    0
; __int32 the_cast
_the_cast	dd 0			; DATA XREF: start+B3o	start+161o ...
_act		dd 0			; DATA XREF: de_doit(void)+2Cw
					; de_doit(void)+30r ...
; __int32 ego
_ego		dd 0			; DATA XREF: start_room(uchar *)+2EDw
					; start_room(uchar *)+2F0r ...
_end_door_ptr	dd 0			; DATA XREF: start_room(uchar *)+49w
					; de_doit(void)+291r ...
; __int32 jason
_jason		dd 0			; DATA XREF: add_jason(void)+27w
					; add_jason(void)+2Ar ...
; __int32 cur_sub
_cur_sub	dd 0			; DATA XREF: start_room(uchar *)+38Bw
					; de_doit(void):loc_73C4r ...
_boss		dd 0			; DATA XREF: start_room(uchar *)+10Dw
					; de_doit(void)+4EDr ...
_space_bar_been_up db 0			; DATA XREF: check_user(void):loc_9D6Fr
					; check_user(void):loc_9D7Aw ...
_ego_x_speed	db 0			; DATA XREF: start_room(uchar *)+52w
					; start_room(uchar *)+57r ...
_ego_y_speed	db 0			; DATA XREF: start_room(uchar *)+5Cw
					; check_user(void)+1A2r ...
_game_in_progress db 0			; DATA XREF: init_game(void)+20Ew
					; play_game(uchar):loc_659Cw ...
_got_key	db 0			; DATA XREF: start_room(uchar *)+6Ew
					; de_doit(void)+2BBr ...
		db 0
; void far *gun_underbits
_gun_underbits	dw 0			; DATA XREF: init_game(void):loc_63A2w
					; play_game(uchar)+4Ew	...
word_2B724	dw 0			; DATA XREF: play_game(uchar)+4Aw
					; start_room(uchar *)+4F8r ...
; void far *jguage_underbits
_jguage_underbits dw 0			; DATA XREF: init_game(void)+205w
					; play_game(uchar)+6Fw	...
word_2B728	dw 0			; DATA XREF: play_game(uchar)+6Bw
					; end_game(void)+16Br ...
_men		db 0			; DATA XREF: play_game(uchar)+A7w
					; kill_ego(int,int)+21Fr ...
_air_count	db 0			; DATA XREF: start_room(uchar *)+98w
					; check_guages(void)+4r ...
_air_speed	db 0			; DATA XREF: start_room(uchar *)+9Dw
					; check_guages(void)+Br
_system_bench	db 0			; DATA XREF: init_game(void)+2BDw
					; init_game(void):loc_6466r ...
_control	db 0			; DATA XREF: start_room(uchar *)+64w
					; start_room(uchar *)+4B6w ...
_shot_count	db 0			; DATA XREF: start_room(uchar *)+105w
					; ego_fire(void)+3r ...
_shot_size	db 0			; DATA XREF: play_game(uchar)+BCw
					; de_doit(void)+31Ew ...
_top_shot_count	db 0			; DATA XREF: start_room(uchar *)+102w
					; add_missile(m_actor *,uchar,int)+2D8w ...
_cur_map	db 0			; DATA XREF: play_game(uchar)+89w
					; play_game(uchar):loc_660Ar ...
_zoom_to_map	db 0			; DATA XREF: _main:loc_6198r
					; play_game(uchar):loc_6C2Er ...
_score_count	db 0			; DATA XREF: play_game(uchar)+97w
					; de_doit(void):loc_760Er ...
_top_fire	db 0			; DATA XREF: play_game(uchar)+B9w
					; kill_ego(int,int)+285w ...
_auto_fire	db 0			; DATA XREF: play_game(uchar)+B6w
					; kill_ego(int,int):loc_7E55w ...
_auto_fire_count db 0			; DATA XREF: play_game(uchar)+ACw
					; check_user(void)+43r	...
_gun_count	db 0			; DATA XREF: play_game(uchar)+A2w
					; de_doit(void)+319w ...
_jason_power	db 0			; DATA XREF: add_jason(void)+90w
					; update_jason_guage(void)+2Ar	...
_maximum_jason_power db	0		; DATA XREF: play_game(uchar)+CBw
					; check_guages(void)+1DFr
_jason_count	db 0			; DATA XREF: start_room(uchar *)+108w
					; check_guages(void):loc_AF4Br	...
_jason_fire	db 0			; DATA XREF: play_game(uchar)+B3w
					; kill_ego(int,int)+28Aw ...
_god_mode	db 0			; DATA XREF: init_game(void)+213w
					; kill_ego(int,int)+3r	...
_smart_missiles	db 0			; DATA XREF: start_room(uchar *)+73w
					; seg03f9:6BC3w ...
_jason_msg	db 0			; DATA XREF: de_doit(void):loc_7662r
					; de_doit(void)+3C7w
_cave_msg	db 0			; DATA XREF: de_doit(void):loc_76E9r
					; de_doit(void)+44Ew
_barrel_msg	db 0			; DATA XREF: de_doit(void):loc_768Fr
					; de_doit(void)+3F4w
_gun_msg	db 0			; DATA XREF: de_doit(void):loc_76BCr
					; de_doit(void)+421w
_cheat_mode	db 0			; DATA XREF: init_game(void)+218w
					; end_game(void)+F3r ...
_air_supply	dw 0			; DATA XREF: start_room(uchar *)+A2w
					; update_air_guage(int,int,int)+2Er ...
_shld_supply	dw 0			; DATA XREF: start_room(uchar *)+A8r
					; start_room(uchar *)+AFw ...
_start_x	dw 0			; DATA XREF: start_room(uchar *)+1A5w
					; start_room(uchar *)+1C6r ...
_start_y	dw 0			; DATA XREF: start_room(uchar *)+1BFw
					; start_room(uchar *)+1C2r ...
_finish_tile	dw 0			; DATA XREF: start_room(uchar *)+3ADw
					; de_doit(void):loc_74F3r
_end_door_tile	dw 0			; DATA XREF: start_room(uchar *)+3B8w
					; de_doit(void):loc_7534r
_secret_tile	dw 0			; DATA XREF: start_room(uchar *)+3D6w
					; de_doit(void):loc_7510r ...
_ego_map_w	dw 0			; DATA XREF: start_room(uchar *)+375w
					; seg0b2c:03EAr
_ego_map_h	dw 0			; DATA XREF: start_room(uchar *)+384w
					; seg0b2c:03E6r
_cur_message	dw 0			; DATA XREF: start_room(uchar *):loc_6E42w
					; post_message(uchar)+9r ...
_heavy_timer	dw 0			; DATA XREF: start_room(uchar *)+4E6r
					; start_room(uchar *)+4EDr ...
_map_messages	dw 0			; DATA XREF: start_room(uchar *)+479w
					; de_doit(void)+467r ...
word_2B75C	dw 0			; DATA XREF: start_room(uchar *)+497w
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
; __int32 score
_score		dd 0			; DATA XREF: play_game(uchar)+9Ew
					; end_game(void)+DDr ...
_debug_mode	db 0			; DATA XREF: _main:loc_618Cr
					; init_game(void)+1Er ...
_resume		db 0			; DATA XREF: activate_menu_bar(void)+106w
					; activate_menu_bar(void)+125r	...
_restart	db    0
_zapper_count	db 0			; DATA XREF: start_room(uchar *)+69w
					; add_map_item(uint,uint):loc_8376w ...
_new_map_name	dd 0			; DATA XREF: init_game(void)+1F3w
_stop_room	db 0			; DATA XREF: play_game(uchar):loc_68DBr
					; play_game(uchar)+65Br ...
_teleport_count	db 0			; DATA XREF: start_room(uchar *)+3D9w
					; start_room(uchar *)+3F7r ...
_barrier_count	db 0			; DATA XREF: de_doit(void)+Aw
					; de_doit(void)+3Br ...
_shootable_count db 0			; DATA XREF: de_doit(void)+7w
					; de_doit(void)+AEr ...
_enemy_count	db 0			; DATA XREF: start_room(uchar *)+95w
					; add_map_item(uint,uint)+19Bw	...
_goody_count	db 0			; DATA XREF: start_room(uchar *)+92w
					; add_map_item(uint,uint)+110w	...
_goodies_found	db 0			; DATA XREF: start_room(uchar *)+8Cw
					; show_stats(void):loc_C12Fr ...
_enemies_killed	db 0			; DATA XREF: start_room(uchar *)+8Fw
					; show_stats(void)+118r ...
_message_posted	db 0			; DATA XREF: start_room(uchar *)+BBw
					; de_doit(void)+4B5r ...
_message_count	db 0			; DATA XREF: start_room(uchar *)+441w
					; start_room(uchar *):loc_71EEr ...
_jason_on	db 0			; DATA XREF: play_game(uchar)+C1w
					; de_doit(void)+22Er ...
_jason_present	db 0			; DATA XREF: play_game(uchar)+C6w
					; play_game(uchar):loc_6645r ...
_displayed_page	db 0			; DATA XREF: play_game(uchar):loc_6B2Fr
					; start_room(uchar *)+32w ...
_non_displayed_page db 0		; DATA XREF: play_game(uchar)+623r
					; start_room(uchar *)+2Dw ...
_death_type	db 0			; DATA XREF: kill_ego(int,int)+39r
					; kill_ego(int,int):loc_7D35r ...
_saw_title_screen db 0			; DATA XREF: start_title_loop(void)+87r
					; start_title_loop(void):loc_BB84w
_barrier_list	dw 0			; DATA XREF: de_doit(void)+7Aw
					; check_new_pos(m_actor	*,int,int,int *,int *,int,int,int)+A7r	...
word_2B78C	dw 0			; DATA XREF: de_doit(void)+76w
					; check_new_pos(m_actor	*,int,int,int *,int *,int,int,int)+A3r	...
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
_shootable_list	dw 0			; DATA XREF: de_doit(void)+EDw
					; seg0b2c:3609r
word_2B818	dw 0			; DATA XREF: de_doit(void)+E9w
					; seg0b2c:3605r
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
_all_teleports	dw 0			; DATA XREF: start_room(uchar *)+410w
					; check_user(void)+9Br
word_2B890	dw 0			; DATA XREF: start_room(uchar *)+42Fw
					; check_user(void)+B9r
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
_diff_x		dw 0			; DATA XREF: seg0b2c:0AC5w
					; seg0b2c:loc_DFC2r ...
_diff_y		dw 0			; DATA XREF: seg0b2c:0ADEw
					; seg0b2c:0AE1r ...
; void far *the_game
_the_game	dw 0			; DATA XREF: init_game(void)+58w
					; init_game(void):loc_622Br ...
; int word_2B8BC
word_2B8BC	dw 0			; DATA XREF: init_game(void)+54w
					; init_game(void)+AEr ...
_cur_sound	dd 0			; DATA XREF: game_manager::game_manager(uchar *)+1DBw
					; game_manager::doit(void)+4r ...
_force_pc_sound	db 0			; DATA XREF: init_game(void):loc_61D7r
					; parse_options(int,uchar **)+9w ...
		db 0
; void (__interrupt far	*theirhandler)()
_theirhandler	dd 0			; DATA XREF: game_manager::game_manager(uchar *)+184w
					; game_manager::~game_manager(void)+31r ...
ticks18_2	db 0			; DATA XREF: @pc_sound_doit$qve+10r
					; @pc_sound_doit$qve+15w ...
		db    0
_ed_list	dw 0			; DATA XREF: m_actor::set_xy(int,int)+BBw
					; m_actor::move(void)+17Aw ...
word_2B8CC	dw 0			; DATA XREF: m_actor::set_xy(int,int)+B7w
					; m_actor::move(void)+176w ...
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
_ed_list_size	db 0			; DATA XREF: m_actor::set_xy(int,int)+90r
					; m_actor::set_xy(int,int):loc_14752r ...
		db 0
_mouse		dd 0			; DATA XREF: init_game(void)+1BAr
					; activate_menu_bar(void)+F1r ...
; __int32 the_menu_bar
_the_menu_bar	dd 0			; DATA XREF: activate_menu_bar(void)+28r
					; activate_menu_bar(void)+42r ...
; void far *show_box
_show_box	dd 0			; DATA XREF: i_show_box(uchar *,int,int,uchar *,uchar *)+22w
					; i_show_box(uchar *,int,int,uchar *,uchar *)+2Fr ...
_show_box_on	db 0			; DATA XREF: i_init_interface(void *,void *,void *,void	*,void *)+2Ew
					; i_show_box(uchar *,int,int,uchar *,uchar *)+3r ...
_menu_bar_height db 0			; DATA XREF: i_init_interface(void *,void *,void *,void	*,void *)+33w
					; i_set_text(uchar,uchar,uchar,uchar)+3Ew ...
_m_dont_handle	db 0			; DATA XREF: ms_mouse::ms_mouse(void)+FDw
					; seg137f:0C27r ...
_maximum_text_length db	0		; DATA XREF: i_init_interface(void *,void *,void *,void	*,void *)+38w
					; prompt_box::prompt_box(uchar *)+59r ...
_pd_redraws	db 0			; DATA XREF: init_game(void)+1C6w
					; i_init_interface(void	*,void *,void *,void *,void *)+29w ...
		db 0
_i_external_left dd offset loc_159CE+2 - (offset loc_159CE+2)
					; DATA XREF: show_high_scores(uchar):loc_BEE2r
					; show_high_scores(uchar):loc_BF28r ...
_i_external_right dd offset loc_159CE+2	- (offset loc_159CE+2)
					; DATA XREF: show_high_scores(uchar)+2CEr
					; show_high_scores(uchar)+314r	...
_i_external_up	dd offset loc_159CE+2 -	(offset	loc_159CE+2)
					; DATA XREF: i_init_interface(void *,void *,void *,void	*,void *)+51w
					; seg137f:loc_170DEr
_i_external_down dd offset loc_159CE+2 - (offset loc_159CE+2)
					; DATA XREF: i_init_interface(void *,void *,void *,void	*,void *)+59w
					; seg137f:loc_17107r
_i_external_button dd offset loc_159CE+2 - (offset loc_159CE+2)
					; DATA XREF: i_init_interface(void *,void *,void *,void	*,void *)+61w
					; seg137f:loc_1712Er ...
; __int32 the_map
_the_map	dd 0			; DATA XREF: init_game(void)+1EAw
					; start_room(uchar *)+116r ...
_tbl_mul_tw	dd 0			; DATA XREF: check_horizontal_ray(m_actor *,uint)+16r
					; check_new_pos(m_actor	*,int,int,int *,int *,int,int,int)+5Dr	...
		dw 0
		dw 0
		dw 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		dw 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
_tbl_mul80	dw 0			; DATA XREF: tilemap::init_tables(void)+83w
					; tilemap::update(uint)+1Ar
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		dw 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
_tbl_tile_src	dw 0			; DATA XREF: tilemap::init_tables(void)+35w
					; tilemap::init_tables(void)+4Ew ...
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
unk_2BFA0	db    0			; DATA XREF: show_prelude(void)+197o
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		dw 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
unk_2C0E0	db    0			; DATA XREF: show_prelude(void)+109o
					; show_prelude(void)+1F3o
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
_tbl_tile_dst	dw 0			; DATA XREF: tilemap::set_viewport(int,int,int,int)+DCw
					; tilemap::set_viewport(int,int,int,int)+F4w ...
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		dw 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
_map_exploded	db 0			; DATA XREF: tilemap::init_work_vars(void)+3w
					; tilemap::explode(void)+37w ...
		db 0
; int display
_display	dd 0			; DATA XREF: init_game(void)+EFr
					; init_game(void)+109r	...
_scrn		dd 0
_system_font_ptr dd 0			; DATA XREF: vga_text(int,int,uchar *,uchar,uchar)+50r
					; vga_text(int,int,uchar *,uchar,uchar)+8Ar ...
_palette	db 0			; DATA XREF: de_doit(void)+1E0o
					; show_stats(void)+176o ...
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
unk_2CA58	db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
_old_palette	db    0			; DATA XREF: vga_display::turn_cycling(uchar)+25o
					; vga_display::setup_cycle(uchar,uchar,uchar)+53o
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
_spare_palette	db    0			; DATA XREF: vga_display::save_palette(void)+Bo
					; vga_display::restore_palette(void)+7o
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
unk_2D2E6	db    0			; DATA XREF: save_new_score(ulong,uchar	*,uchar)+2Bo
					; save_new_score(ulong,uchar *,uchar)+54o
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
dword_2D2F0	dd 0			; DATA XREF: save_new_score(ulong,uchar	*,uchar)+6Fw
_download_pos	dw 0			; DATA XREF: init_display(uchar)+1Aw
					; save_new_score(ulong,uchar *,uchar)+81w
_game_highs	db    0			; DATA XREF: init_scores_file(void)+16o
					; save_all_scores(void)+35o ...
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
dword_2D300	dd 0			; DATA XREF: init_scores_array(void):loc_1C029r
					; init_scores_file(void)+2Dw ...
byte_2D304	db 0			; DATA XREF: init_scores_file(void)+40w
					; return_element(uchar,uchar):loc_1C245r
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
_high_score	dd 0			; DATA XREF: init_scores_array(void)+51w
fp_kbd_head	dd 0			; DATA XREF: _gr_int9+46w _gr_int9+4Fr
fp_kbd_tail	dd 0			; DATA XREF: _gr_int9:loc_1C373w
					; _gr_int9+56r
; void (__interrupt far	*gr_old_int9)()
_gr_old_int9	dd offset loc_1C24E+2 -	(offset	loc_1C24E+2)
					; DATA XREF: _gr_end_kbd_grab+7r
					; _gr_start_kbd_grab+1Dw ...
_exit_routine	dd 0			; DATA XREF: _set_exit_routine+7w
					; _gr_start_kbd_grab+8w ...
_disable_exit_routine db 0		; DATA XREF: seg137f:2F85w
					; seg137f:loc_18AA4w ...
_gr_keys	db 0			; DATA XREF: _gr_start_kbd_grab+26o
					; _gr_int9+2Aw	...
byte_2D3AC	db 0			; DATA XREF: check_user(void):loc_9D24r
					; activate_menu_bar(void):loc_ADB5r ...
byte_2D3AD	db 0			; DATA XREF: check_user(void):loc_A142r
byte_2D3AE	db 0			; DATA XREF: check_user(void):loc_A15Br
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
byte_2D3BE	db 0			; DATA XREF: check_user(void):loc_A028r
		db    0
		db    0
byte_2D3C1	db 0			; DATA XREF: check_user(void):loc_A0A3r
		db 0
		db    0
byte_2D3C4	db 0			; DATA XREF: check_user(void):loc_A106r
		db    0
		db    0
byte_2D3C7	db 0			; DATA XREF: post_message(uchar):loc_7FF6r
					; post_message(uchar):loc_801Ar ...
byte_2D3C8	db 0			; DATA XREF: game_manager::doit(void)+8Ar
byte_2D3C9	db 0			; DATA XREF: check_user(void):loc_9FD5r
byte_2D3CA	db 0			; DATA XREF: check_user(void):loc_9FEBr
byte_2D3CB	db 0			; DATA XREF: check_user(void):loc_A0FBr
byte_2D3CC	db 0			; DATA XREF: check_user(void):loc_A001r
byte_2D3CD	db 0			; DATA XREF: check_user(void):loc_A0CAr
					; start_title_loop(void)+C4r
byte_2D3CE	db 0			; DATA XREF: check_user(void):loc_A075r
byte_2D3CF	db 0			; DATA XREF: check_user(void):loc_A04Fr
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
byte_2D3D7	db 0			; DATA XREF: check_user(void):loc_A136r
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
byte_2D3E3	db 0			; DATA XREF: start_title_loop(void)+CBr
					; game_manager::doit(void):loc_135D5r
byte_2D3E4	db 0			; DATA XREF: de_button(void)+17r
					; wait_for_user(void)+2Ar ...
		db 0
byte_2D3E6	db 0			; DATA XREF: check_user(void)+15r
					; check_user(void):loc_A174r
byte_2D3E7	db 0			; DATA XREF: check_user(void):loc_A18Dr
byte_2D3E8	db 0			; DATA XREF: check_user(void):loc_A1A7r
byte_2D3E9	db 0			; DATA XREF: check_user(void):loc_A1C1r
		db    0
		db    0
		db    0
		db    0
		db    0
byte_2D3EF	db 0			; DATA XREF: seg0fa9:09E3r
		db    0
		db    0
		db    0
byte_2D3F3	db 0			; DATA XREF: seg03f9:6983r
					; game_manager::doit(void):loc_135B7r
		db    0
		db    0
byte_2D3F6	db 0			; DATA XREF: seg03f9:693Fr
					; game_manager::doit(void):loc_13599r
		db 0
byte_2D3F8	db 0			; DATA XREF: seg03f9:6961r
					; game_manager::doit(void)+38r
		db    0
		db    0
byte_2D3FB	db 0			; DATA XREF: seg03f9:69A5r
					; game_manager::doit(void):loc_135A8r
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
; char tmp[500]
_tmp		db 0			; DATA XREF: init_game(void)+249o
					; play_game(uchar)+6BEo ...
byte_2D42D	db 0			; DATA XREF: print_form(uchar *,uchar)+15Bw
		db    0
		db    0
		db    0
		dw 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
byte_2D47C	db 0			; DATA XREF: print_form(uchar *,uchar)+120w
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
; char tmp2[64]
_tmp2		dw 0			; DATA XREF: update_score(int,int)+34o
					; activate_menu_bar(void)+B2o ...
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
_tmp3		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
_debug_ptr	db    0
		db    0
		db    0
		db    0
_worx_ax	dw 0			; DATA XREF: _worx_call+3Dw
					; _worx_call+52r ...
_worx_bx	dw 0			; DATA XREF: _worx_call+43w
_worx_dx	dw 0			; DATA XREF: _worx_call+49w
					; _openelement+19r
_worx_di	dw 0			; DATA XREF: _worx_call+4Fw
__atexittbl	dw 0			; DATA XREF: _atexit+21w sub_2D4E+19r
word_2D66A	dw 0			; DATA XREF: _atexit+1Dw
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
byte_2D6E8	db 0			; DATA XREF: _clock+Aw
					; _clock:loc_2CB4r
		db    0
unk_2D6EA	db    0			; DATA XREF: __mkname+Eo
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
__new_handler	dd 0			; DATA XREF: set_new_handler(void (*)(void))+9r
					; set_new_handler(void (*)(void))+1Cw ...
___signalptr	dd 0			; DATA XREF: __fperror+Cr
					; __fperror+1Fr ...
byte_2D700	db 0			; DATA XREF: _fgetc+80o
					; _fgetc:loc_5482r ...
		db 0
byte_2D702	db 0			; DATA XREF: _fputc+7w	_fputc+22r ...
		db    0
unk_2D704	db    0			; DATA XREF: start+B6o
					; seg2608:___brklvlo
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
seg2608		ends

; ===========================================================================

; Segment type:	Uninitialized
seg2b53		segment	byte stack 'STACK' use16
		assume cs:seg2b53
		assume es:nothing, ss:nothing, ds:seg2608, fs:nothing, gs:nothing
__emu		dw 0
		dw 0
		dw 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		dw 0
		db    0
		db    0
		dw 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		dw 0
		dw 0
		dw 0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
		db    0
seg2b53		ends


		end start
